{
  "fileComparison": {
    "originalExists": true,
    "newExists": true,
    "originalSize": 1741390,
    "newSize": 1388302,
    "originalHash": "2966760a76f225d5655cf5a1742ffc44",
    "newHash": "35cfcfe363531dfd3821172328e93165"
  },
  "contentAnalysis": {
    "original": {
      "head": "<head> <meta charset=\"UTF-8\"> <title>Katachi Gen</title> <meta name=\"viewport\" content=\"width=400\"> <style>:root{--blue:#007bff;--indigo:#6610f2;--purple:#6f42c1;--pink:#e83e8c;--red:#dc3545;--orange:#fd7e14;--yellow:#ffc107;--green:#28a745;--teal:#20c997;--cyan:#17a2b8;--white:#fff;--gray:#6c757d;--gray-dark:#343a40;--primary:#007bff;--secondary:#6c757d;--success:#28a745;--info:#17a2b8;--warning:#ffc107;--danger:#dc3545;--light:#f8f9fa;--dark:#343a40;--breakpoint-xs:0;--breakpoint-sm:576px;--breakpoint-md:768px;--breakpoint-lg:992px;--breakpoint-xl:1200px;--font-family-sans-serif:-apple-system,BlinkMacSystemFont,\"Segoe UI\",Roboto,\"Helvetica Neue\",Arial,\"Noto Sans\",sans-serif,\"Apple Color Emoji\",\"Segoe UI Emoji\",\"Segoe UI Symbol\",\"Noto Color Emoji\";--font-family-monospace:SFMono-Regular,Menlo,Monaco,Consolas,\"Liberation Mono\",\"Courier New\",monospace}*,::after,::before{box-sizing:border-box}html{font-family:sans-serif;line-height:1.15;-webkit-text-size-adjust:100%;-webkit-tap-highlight-color:transparent}article,aside,figcaption,figure,footer,header,hgroup,main,nav,section{display:block}body{margin:0;font-family:-apple-system,BlinkMacSystemFont,\"Segoe UI\",Roboto,\"Helvetica Neue\",Arial,\"Noto Sans\",sans-serif,\"Apple Color Emoji\",\"Segoe UI Emoji\",\"Segoe UI Symbol\",\"Noto Color Emoji\";font-size:1rem;font-weight:400;line-height:1.5;color:#212529;text-align:left;background-color:#fff}[tabindex=\"-1\"]:focus:not(:focus-visible){outline:0!important}hr{box-sizing:content-box;height:0;overflow:visible}h1,h2,h3,h4,h5,h6{margin-top:0;margin-bottom:.5rem}p{margin-top:0;margin-bottom:1rem}abbr[data-original-title],abbr[title]{text-decoration:underline;-webkit-text-decoration:underline dotted;text-decoration:underline dotted;cursor:help;border-bottom:0;-webkit-text-decoration-skip-ink:none;text-decoration-skip-ink:none}address{margin-bottom:1rem;font-style:normal;line-height:inherit}dl,ol,ul{margin-top:0;margin-bottom:1rem}ol ol,ol ul,ul ol,ul ul{margin-bottom:0}dt{font-weight:700}dd{margin-bottom:.5rem;margin-left:0}blockquote{margin:0 0 1rem}b,strong{font-weight:bolder}small{font-size:80%}sub,sup{position:relative;font-size:75%;line-height:0;vertical-align:baseline}sub{bottom:-.25em}sup{top:-.5em}a{color:#007bff;text-decoration:none;background-color:transparent}a:hover{color:#0056b3;text-decoration:underline}a:not([href]):not([class]){color:inherit;text-decoration:none}a:not([href]):not([class]):hover{color:inherit;text-decoration:none}code,kbd,pre,samp{font-family:SFMono-Regular,Menlo,Monaco,Consolas,\"Liberation Mono\",\"Courier New\",monospace;font-size:1em}pre{margin-top:0;margin-bottom:1rem;overflow:auto;-ms-overflow-style:scrollbar}figure{margin:0 0 1rem}img{vertical-align:middle;border-style:none}svg{overflow:hidden;vertical-align:middle}table{border-collapse:collapse}caption{padding-top:.75rem;padding-bottom:.75rem;color:#6c757d;text-align:left;caption-side:bottom}th{text-align:inherit;text-align:-webkit-match-parent}label{display:inline-block;margin-bottom:.5rem}button{border-radius:0}button:focus{outline:1px dotted;outline:5px auto -webkit-focus-ring-color}button,input,optgroup,select,textarea{margin:0;font-family:inherit;font-size:inherit;line-height:inherit}button,input{overflow:visible}button,select{text-transform:none}[role=button]{cursor:pointer}select{word-wrap:normal}[type=button],[type=reset],[type=submit],button{-webkit-appearance:button}[type=button]:not(:disabled),[type=reset]:not(:disabled),[type=submit]:not(:disabled),button:not(:disabled){cursor:pointer}[type=button]::-moz-focus-inner,[type=reset]::-moz-focus-inner,[type=submit]::-moz-focus-inner,button::-moz-focus-inner{padding:0;border-style:none}input[type=checkbox],input[type=radio]{box-sizing:border-box;padding:0}textarea{overflow:auto;resize:vertical}fieldset{min-width:0;padding:0;margin:0;border:0}legend{display:block;width:100%;max-width:100%;padding:0;margin-bottom:.5rem;font-size:1.5rem;line-height:inherit;color:inherit;white-space:normal}progress{vertical-align:baseline}[type=number]::-webkit-inner-spin-button,[type=number]::-webkit-outer-spin-button{height:auto}[type=search]{outline-offset:-2px;-webkit-appearance:none}[type=search]::-webkit-search-decoration{-webkit-appearance:none}::-webkit-file-upload-button{font:inherit;-webkit-appearance:button}output{display:inline-block}summary{display:list-item;cursor:pointer}template{display:none}[hidden]{display:none!important}.h1,.h2,.h3,.h4,.h5,.h6,h1,h2,h3,h4,h5,h6{margin-bottom:.5rem;font-weight:500;line-height:1.2}.h1,h1{font-size:2.5rem}.h2,h2{font-size:2rem}.h3,h3{font-size:1.75rem}.h4,h4{font-size:1.5rem}.h5,h5{font-size:1.25rem}.h6,h6{font-size:1rem}.lead{font-size:1.25rem;font-weight:300}.display-1{font-size:6rem;font-weight:300;line-height:1.2}.display-2{font-size:5.5rem;font-weight:300;line-height:1.2}.display-3{font-size:4.5rem;font-weight:300;line-height:1.2}.display-4{font-size:3.5rem;font-weight:300;line-height:1.2}hr{margin-top:1rem;margin-bottom:1rem;border:0;border-top:1px solid rgba(0,0,0,.1)}.small,small{font-size:80%;font-weight:400}.mark,mark{padding:.2em;background-color:#fcf8e3}.list-unstyled{padding-left:0;list-style:none}.list-inline{padding-left:0;list-style:none}.list-inline-item{display:inline-block}.list-inline-item:not(:last-child){margin-right:.5rem}.initialism{font-size:90%;text-transform:uppercase}.blockquote{margin-bottom:1rem;font-size:1.25rem}.blockquote-footer{display:block;font-size:80%;color:#6c757d}.blockquote-footer::before{content:\"\\2014\\00A0\"}.img-fluid{max-width:100%;height:auto}.img-thumbnail{padding:.25rem;background-color:#fff;border:1px solid #dee2e6;border-radius:.25rem;max-width:100%;height:auto}.figure{display:inline-block}.figure-img{margin-bottom:.5rem;line-height:1}.figure-caption{font-size:90%;color:#6c757d}code{font-size:87.5%;color:#e83e8c;word-wrap:break-word}a>code{color:inherit}kbd{padding:.2rem .4rem;font-size:87.5%;color:#fff;background-color:#212529;border-radius:.2rem}kbd kbd{padding:0;font-size:100%;font-weight:700}pre{display:block;font-size:87.5%;color:#212529}pre code{font-size:inherit;color:inherit;word-break:normal}.pre-scrollable{max-height:340px;overflow-y:scroll}.container,.container-fluid,.container-lg,.container-md,.container-sm,.container-xl{width:100%;padding-right:15px;padding-left:15px;margin-right:auto;margin-left:auto}@media (min-width:576px){.container,.container-sm{max-width:540px}}@media (min-width:768px){.container,.container-md,.container-sm{max-width:720px}}@media (min-width:992px){.container,.container-lg,.container-md,.container-sm{max-width:960px}}@media (min-width:1200px){.container,.container-lg,.container-md,.container-sm,.container-xl{max-width:1140px}}.row{display:-ms-flexbox;display:flex;-ms-flex-wrap:wrap;flex-wrap:wrap;margin-right:-15px;margin-left:-15px}.no-gutters{margin-right:0;margin-left:0}.no-gutters>.col,.no-gutters>[class*=col-]{padding-right:0;padding-left:0}.col,.col-1,.col-10,.col-11,.col-12,.col-2,.col-3,.col-4,.col-5,.col-6,.col-7,.col-8,.col-9,.col-auto,.col-lg,.col-lg-1,.col-lg-10,.col-lg-11,.col-lg-12,.col-lg-2,.col-lg-3,.col-lg-4,.col-lg-5,.col-lg-6,.col-lg-7,.col-lg-8,.col-lg-9,.col-lg-auto,.col-md,.col-md-1,.col-md-10,.col-md-11,.col-md-12,.col-md-2,.col-md-3,.col-md-4,.col-md-5,.col-md-6,.col-md-7,.col-md-8,.col-md-9,.col-md-auto,.col-sm,.col-sm-1,.col-sm-10,.col-sm-11,.col-sm-12,.col-sm-2,.col-sm-3,.col-sm-4,.col-sm-5,.col-sm-6,.col-sm-7,.col-sm-8,.col-sm-9,.col-sm-auto,.col-xl,.col-xl-1,.col-xl-10,.col-xl-11,.col-xl-12,.col-xl-2,.col-xl-3,.col-xl-4,.col-xl-5,.col-xl-6,.col-xl-7,.col-xl-8,.col-xl-9,.col-xl-auto{position:relative;width:100%;padding-right:15px;padding-left:15px}.col{-ms-flex-preferred-size:0;flex-basis:0;-ms-flex-positive:1;flex-grow:1;max-width:100%}.row-cols-1>*{-ms-flex:0 0 100%;flex:0 0 100%;max-width:100%}.row-cols-2>*{-ms-flex:0 0 50%;flex:0 0 50%;max-width:50%}.row-cols-3>*{-ms-flex:0 0 33.333333%;flex:0 0 33.333333%;max-width:33.333333%}.row-cols-4>*{-ms-flex:0 0 25%;flex:0 0 25%;max-width:25%}.row-cols-5>*{-ms-flex:0 0 20%;flex:0 0 20%;max-width:20%}.row-cols-6>*{-ms-flex:0 0 16.666667%;flex:0 0 16.666667%;max-width:16.666667%}.col-auto{-ms-flex:0 0 auto;flex:0 0 auto;width:auto;max-width:100%}.col-1{-ms-flex:0 0 8.333333%;flex:0 0 8.333333%;max-width:8.333333%}.col-2{-ms-flex:0 0 16.666667%;flex:0 0 16.666667%;max-width:16.666667%}.col-3{-ms-flex:0 0 25%;flex:0 0 25%;max-width:25%}.col-4{-ms-flex:0 0 33.333333%;flex:0 0 33.333333%;max-width:33.333333%}.col-5{-ms-flex:0 0 41.666667%;flex:0 0 41.666667%;max-width:41.666667%}.col-6{-ms-flex:0 0 50%;flex:0 0 50%;max-width:50%}.col-7{-ms-flex:0 0 58.333333%;flex:0 0 58.333333%;max-width:58.333333%}.col-8{-ms-flex:0 0 66.666667%;flex:0 0 66.666667%;max-width:66.666667%}.col-9{-ms-flex:0 0 75%;flex:0 0 75%;max-width:75%}.col-10{-ms-flex:0 0 83.333333%;flex:0 0 83.333333%;max-width:83.333333%}.col-11{-ms-flex:0 0 91.666667%;flex:0 0 91.666667%;max-width:91.666667%}.col-12{-ms-flex:0 0 100%;flex:0 0 100%;max-width:100%}.order-first{-ms-flex-order:-1;order:-1}.order-last{-ms-flex-order:13;order:13}.order-0{-ms-flex-order:0;order:0}.order-1{-ms-flex-order:1;order:1}.order-2{-ms-flex-order:2;order:2}.order-3{-ms-flex-order:3;order:3}.order-4{-ms-flex-order:4;order:4}.order-5{-ms-flex-order:5;order:5}.order-6{-ms-flex-order:6;order:6}.order-7{-ms-flex-order:7;order:7}.order-8{-ms-flex-order:8;order:8}.order-9{-ms-flex-order:9;order:9}.order-10{-ms-flex-order:10;order:10}.order-11{-ms-flex-order:11;order:11}.order-12{-ms-flex-order:12;order:12}.offset-1{margin-left:8.333333%}.offset-2{margin-left:16.666667%}.offset-3{margin-left:25%}.offset-4{margin-left:33.333333%}.offset-5{margin-left:41.666667%}.offset-6{margin-left:50%}.offset-7{margin-left:58.333333%}.offset-8{margin-left:66.666667%}.offset-9{margin-left:75%}.offset-10{margin-left:83.333333%}.offset-11{margin-left:91.666667%}@media (min-width:576px){.col-sm{-ms-flex-preferred-size:0;flex-basis:0;-ms-flex-positive:1;flex-grow:1;max-width:100%}.row-cols-sm-1>*{-ms-flex:0 0 100%;flex:0 0 100%;max-width:100%}.row-cols-sm-2>*{-ms-flex:0 0 50%;flex:0 0 50%;max-width:50%}.row-cols-sm-3>*{-ms-flex:0 0 33.333333%;flex:0 0 33.333333%;max-width:33.333333%}.row-cols-sm-4>*{-ms-flex:0 0 25%;flex:0 0 25%;max-width:25%}.row-cols-sm-5>*{-ms-flex:0 0 20%;flex:0 0 20%;max-width:20%}.row-cols-sm-6>*{-ms-flex:0 0 16.666667%;flex:0 0 16.666667%;max-width:16.666667%}.col-sm-auto{-ms-flex:0 0 auto;flex:0 0 auto;width:auto;max-width:100%}.col-sm-1{-ms-flex:0 0 8.333333%;flex:0 0 8.333333%;max-width:8.333333%}.col-sm-2{-ms-flex:0 0 16.666667%;flex:0 0 16.666667%;max-width:16.666667%}.col-sm-3{-ms-flex:0 0 25%;flex:0 0 25%;max-width:25%}.col-sm-4{-ms-flex:0 0 33.333333%;flex:0 0 33.333333%;max-width:33.333333%}.col-sm-5{-ms-flex:0 0 41.666667%;flex:0 0 41.666667%;max-width:41.666667%}.col-sm-6{-ms-flex:0 0 50%;flex:0 0 50%;max-width:50%}.col-sm-7{-ms-flex:0 0 58.333333%;flex:0 0 58.333333%;max-width:58.333333%}.col-sm-8{-ms-flex:0 0 66.666667%;flex:0 0 66.666667%;max-width:66.666667%}.col-sm-9{-ms-flex:0 0 75%;flex:0 0 75%;max-width:75%}.col-sm-10{-ms-flex:0 0 83.333333%;flex:0 0 83.333333%;max-width:83.333333%}.col-sm-11{-ms-flex:0 0 91.666667%;flex:0 0 91.666667%;max-width:91.666667%}.col-sm-12{-ms-flex:0 0 100%;flex:0 0 100%;max-width:100%}.order-sm-first{-ms-flex-order:-1;order:-1}.order-sm-last{-ms-flex-order:13;order:13}.order-sm-0{-ms-flex-order:0;order:0}.order-sm-1{-ms-flex-order:1;order:1}.order-sm-2{-ms-flex-order:2;order:2}.order-sm-3{-ms-flex-order:3;order:3}.order-sm-4{-ms-flex-order:4;order:4}.order-sm-5{-ms-flex-order:5;order:5}.order-sm-6{-ms-flex-order:6;order:6}.order-sm-7{-ms-flex-order:7;order:7}.order-sm-8{-ms-flex-order:8;order:8}.order-sm-9{-ms-flex-order:9;order:9}.order-sm-10{-ms-flex-order:10;order:10}.order-sm-11{-ms-flex-order:11;order:11}.order-sm-12{-ms-flex-order:12;order:12}.offset-sm-0{margin-left:0}.offset-sm-1{margin-left:8.333333%}.offset-sm-2{margin-left:16.666667%}.offset-sm-3{margin-left:25%}.offset-sm-4{margin-left:33.333333%}.offset-sm-5{margin-left:41.666667%}.offset-sm-6{margin-left:50%}.offset-sm-7{margin-left:58.333333%}.offset-sm-8{margin-left:66.666667%}.offset-sm-9{margin-left:75%}.offset-sm-10{margin-left:83.333333%}.offset-sm-11{margin-left:91.666667%}}@media (min-width:768px){.col-md{-ms-flex-preferred-size:0;flex-basis:0;-ms-flex-positive:1;flex-grow:1;max-width:100%}.row-cols-md-1>*{-ms-flex:0 0 100%;flex:0 0 100%;max-width:100%}.row-cols-md-2>*{-ms-flex:0 0 50%;flex:0 0 50%;max-width:50%}.row-cols-md-3>*{-ms-flex:0 0 33.333333%;flex:0 0 33.333333%;max-width:33.333333%}.row-cols-md-4>*{-ms-flex:0 0 25%;flex:0 0 25%;max-width:25%}.row-cols-md-5>*{-ms-flex:0 0 20%;flex:0 0 20%;max-width:20%}.row-cols-md-6>*{-ms-flex:0 0 16.666667%;flex:0 0 16.666667%;max-width:16.666667%}.col-md-auto{-ms-flex:0 0 auto;flex:0 0 auto;width:auto;max-width:100%}.col-md-1{-ms-flex:0 0 8.333333%;flex:0 0 8.333333%;max-width:8.333333%}.col-md-2{-ms-flex:0 0 16.666667%;flex:0 0 16.666667%;max-width:16.666667%}.col-md-3{-ms-flex:0 0 25%;flex:0 0 25%;max-width:25%}.col-md-4{-ms-flex:0 0 33.333333%;flex:0 0 33.333333%;max-width:33.333333%}.col-md-5{-ms-flex:0 0 41.666667%;flex:0 0 41.666667%;max-width:41.666667%}.col-md-6{-ms-flex:0 0 50%;flex:0 0 50%;max-width:50%}.col-md-7{-ms-flex:0 0 58.333333%;flex:0 0 58.333333%;max-width:58.333333%}.col-md-8{-ms-flex:0 0 66.666667%;flex:0 0 66.666667%;max-width:66.666667%}.col-md-9{-ms-flex:0 0 75%;flex:0 0 75%;max-width:75%}.col-md-10{-ms-flex:0 0 83.333333%;flex:0 0 83.333333%;max-width:83.333333%}.col-md-11{-ms-flex:0 0 91.666667%;flex:0 0 91.666667%;max-width:91.666667%}.col-md-12{-ms-flex:0 0 100%;flex:0 0 100%;max-width:100%}.order-md-first{-ms-flex-order:-1;order:-1}.order-md-last{-ms-flex-order:13;order:13}.order-md-0{-ms-flex-order:0;order:0}.order-md-1{-ms-flex-order:1;order:1}.order-md-2{-ms-flex-order:2;order:2}.order-md-3{-ms-flex-order:3;order:3}.order-md-4{-ms-flex-order:4;order:4}.order-md-5{-ms-flex-order:5;order:5}.order-md-6{-ms-flex-order:6;order:6}.order-md-7{-ms-flex-order:7;order:7}.order-md-8{-ms-flex-order:8;order:8}.order-md-9{-ms-flex-order:9;order:9}.order-md-10{-ms-flex-order:10;order:10}.order-md-11{-ms-flex-order:11;order:11}.order-md-12{-ms-flex-order:12;order:12}.offset-md-0{margin-left:0}.offset-md-1{margin-left:8.333333%}.offset-md-2{margin-left:16.666667%}.offset-md-3{margin-left:25%}.offset-md-4{margin-left:33.333333%}.offset-md-5{margin-left:41.666667%}.offset-md-6{margin-left:50%}.offset-md-7{margin-left:58.333333%}.offset-md-8{margin-left:66.666667%}.offset-md-9{margin-left:75%}.offset-md-10{margin-left:83.333333%}.offset-md-11{margin-left:91.666667%}}@media (min-width:992px){.col-lg{-ms-flex-preferred-size:0;flex-basis:0;-ms-flex-positive:1;flex-grow:1;max-width:100%}.row-cols-lg-1>*{-ms-flex:0 0 100%;flex:0 0 100%;max-width:100%}.row-cols-lg-2>*{-ms-flex:0 0 50%;flex:0 0 50%;max-width:50%}.row-cols-lg-3>*{-ms-flex:0 0 33.333333%;flex:0 0 33.333333%;max-width:33.333333%}.row-cols-lg-4>*{-ms-flex:0 0 25%;flex:0 0 25%;max-width:25%}.row-cols-lg-5>*{-ms-flex:0 0 20%;flex:0 0 20%;max-width:20%}.row-cols-lg-6>*{-ms-flex:0 0 16.666667%;flex:0 0 16.666667%;max-width:16.666667%}.col-lg-auto{-ms-flex:0 0 auto;flex:0 0 auto;width:auto;max-width:100%}.col-lg-1{-ms-flex:0 0 8.333333%;flex:0 0 8.333333%;max-width:8.333333%}.col-lg-2{-ms-flex:0 0 16.666667%;flex:0 0 16.666667%;max-width:16.666667%}.col-lg-3{-ms-flex:0 0 25%;flex:0 0 25%;max-width:25%}.col-lg-4{-ms-flex:0 0 33.333333%;flex:0 0 33.333333%;max-width:33.333333%}.col-lg-5{-ms-flex:0 0 41.666667%;flex:0 0 41.666667%;max-width:41.666667%}.col-lg-6{-ms-flex:0 0 50%;flex:0 0 50%;max-width:50%}.col-lg-7{-ms-flex:0 0 58.333333%;flex:0 0 58.333333%;max-width:58.333333%}.col-lg-8{-ms-flex:0 0 66.666667%;flex:0 0 66.666667%;max-width:66.666667%}.col-lg-9{-ms-flex:0 0 75%;flex:0 0 75%;max-width:75%}.col-lg-10{-ms-flex:0 0 83.333333%;flex:0 0 83.333333%;max-width:83.333333%}.col-lg-11{-ms-flex:0 0 91.666667%;flex:0 0 91.666667%;max-width:91.666667%}.col-lg-12{-ms-flex:0 0 100%;flex:0 0 100%;max-width:100%}.order-lg-first{-ms-flex-order:-1;order:-1}.order-lg-last{-ms-flex-order:13;order:13}.order-lg-0{-ms-flex-order:0;order:0}.order-lg-1{-ms-flex-order:1;order:1}.order-lg-2{-ms-flex-order:2;order:2}.order-lg-3{-ms-flex-order:3;order:3}.order-lg-4{-ms-flex-order:4;order:4}.order-lg-5{-ms-flex-order:5;order:5}.order-lg-6{-ms-flex-order:6;order:6}.order-lg-7{-ms-flex-order:7;order:7}.order-lg-8{-ms-flex-order:8;order:8}.order-lg-9{-ms-flex-order:9;order:9}.order-lg-10{-ms-flex-order:10;order:10}.order-lg-11{-ms-flex-order:11;order:11}.order-lg-12{-ms-flex-order:12;order:12}.offset-lg-0{margin-left:0}.offset-lg-1{margin-left:8.333333%}.offset-lg-2{margin-left:16.666667%}.offset-lg-3{margin-left:25%}.offset-lg-4{margin-left:33.333333%}.offset-lg-5{margin-left:41.666667%}.offset-lg-6{margin-left:50%}.offset-lg-7{margin-left:58.333333%}.offset-lg-8{margin-left:66.666667%}.offset-lg-9{margin-left:75%}.offset-lg-10{margin-left:83.333333%}.offset-lg-11{margin-left:91.666667%}}@media (min-width:1200px){.col-xl{-ms-flex-preferred-size:0;flex-basis:0;-ms-flex-positive:1;flex-grow:1;max-width:100%}.row-cols-xl-1>*{-ms-flex:0 0 100%;flex:0 0 100%;max-width:100%}.row-cols-xl-2>*{-ms-flex:0 0 50%;flex:0 0 50%;max-width:50%}.row-cols-xl-3>*{-ms-flex:0 0 33.333333%;flex:0 0 33.333333%;max-width:33.333333%}.row-cols-xl-4>*{-ms-flex:0 0 25%;flex:0 0 25%;max-width:25%}.row-cols-xl-5>*{-ms-flex:0 0 20%;flex:0 0 20%;max-width:20%}.row-cols-xl-6>*{-ms-flex:0 0 16.666667%;flex:0 0 16.666667%;max-width:16.666667%}.col-xl-auto{-ms-flex:0 0 auto;flex:0 0 auto;width:auto;max-width:100%}.col-xl-1{-ms-flex:0 0 8.333333%;flex:0 0 8.333333%;max-width:8.333333%}.col-xl-2{-ms-flex:0 0 16.666667%;flex:0 0 16.666667%;max-width:16.666667%}.col-xl-3{-ms-flex:0 0 25%;flex:0 0 25%;max-width:25%}.col-xl-4{-ms-flex:0 0 33.333333%;flex:0 0 33.333333%;max-width:33.333333%}.col-xl-5{-ms-flex:0 0 41.666667%;flex:0 0 41.666667%;max-width:41.666667%}.col-xl-6{-ms-flex:0 0 50%;flex:0 0 50%;max-width:50%}.col-xl-7{-ms-flex:0 0 58.333333%;flex:0 0 58.333333%;max-width:58.333333%}.col-xl-8{-ms-flex:0 0 66.666667%;flex:0 0 66.666667%;max-width:66.666667%}.col-xl-9{-ms-flex:0 0 75%;flex:0 0 75%;max-width:75%}.col-xl-10{-ms-flex:0 0 83.333333%;flex:0 0 83.333333%;max-width:83.333333%}.col-xl-11{-ms-flex:0 0 91.666667%;flex:0 0 91.666667%;max-width:91.666667%}.col-xl-12{-ms-flex:0 0 100%;flex:0 0 100%;max-width:100%}.order-xl-first{-ms-flex-order:-1;order:-1}.order-xl-last{-ms-flex-order:13;order:13}.order-xl-0{-ms-flex-order:0;order:0}.order-xl-1{-ms-flex-order:1;order:1}.order-xl-2{-ms-flex-order:2;order:2}.order-xl-3{-ms-flex-order:3;order:3}.order-xl-4{-ms-flex-order:4;order:4}.order-xl-5{-ms-flex-order:5;order:5}.order-xl-6{-ms-flex-order:6;order:6}.order-xl-7{-ms-flex-order:7;order:7}.order-xl-8{-ms-flex-order:8;order:8}.order-xl-9{-ms-flex-order:9;order:9}.order-xl-10{-ms-flex-order:10;order:10}.order-xl-11{-ms-flex-order:11;order:11}.order-xl-12{-ms-flex-order:12;order:12}.offset-xl-0{margin-left:0}.offset-xl-1{margin-left:8.333333%}.offset-xl-2{margin-left:16.666667%}.offset-xl-3{margin-left:25%}.offset-xl-4{margin-left:33.333333%}.offset-xl-5{margin-left:41.666667%}.offset-xl-6{margin-left:50%}.offset-xl-7{margin-left:58.333333%}.offset-xl-8{margin-left:66.666667%}.offset-xl-9{margin-left:75%}.offset-xl-10{margin-left:83.333333%}.offset-xl-11{margin-left:91.666667%}}.table{width:100%;margin-bottom:1rem;color:#212529}.table td,.table th{padding:.75rem;vertical-align:top;border-top:1px solid #dee2e6}.table thead th{vertical-align:bottom;border-bottom:2px solid #dee2e6}.table tbody+tbody{border-top:2px solid #dee2e6}.table-sm td,.table-sm th{padding:.3rem}.table-bordered{border:1px solid #dee2e6}.table-bordered td,.table-bordered th{border:1px solid #dee2e6}.table-bordered thead td,.table-bordered thead th{border-bottom-width:2px}.table-borderless tbody+tbody,.table-borderless td,.table-borderless th,.table-borderless thead th{border:0}.table-striped tbody tr:nth-of-type(odd){background-color:rgba(0,0,0,.05)}.table-hover tbody tr:hover{color:#212529;background-color:rgba(0,0,0,.075)}.table-primary,.table-primary>td,.table-primary>th{background-color:#b8daff}.table-primary tbody+tbody,.table-primary td,.table-primary th,.table-primary thead th{border-color:#7abaff}.table-hover .table-primary:hover{background-color:#9fcdff}.table-hover .table-primary:hover>td,.table-hover .table-primary:hover>th{background-color:#9fcdff}.table-secondary,.table-secondary>td,.table-secondary>th{background-color:#d6d8db}.table-secondary tbody+tbody,.table-secondary td,.table-secondary th,.table-secondary thead th{border-color:#b3b7bb}.table-hover .table-secondary:hover{background-color:#c8cbcf}.table-hover .table-secondary:hover>td,.table-hover .table-secondary:hover>th{background-color:#c8cbcf}.table-success,.table-success>td,.table-success>th{background-color:#c3e6cb}.table-success tbody+tbody,.table-success td,.table-success th,.table-success thead th{border-color:#8fd19e}.table-hover .table-success:hover{background-color:#b1dfbb}.table-hover .table-success:hover>td,.table-hover .table-success:hover>th{background-color:#b1dfbb}.table-info,.table-info>td,.table-info>th{background-color:#bee5eb}.table-info tbody+tbody,.table-info td,.table-info th,.table-info thead th{border-color:#86cfda}.table-hover .table-info:hover{background-color:#abdde5}.table-hover .table-info:hover>td,.table-hover .table-info:hover>th{background-color:#abdde5}.table-warning,.table-warning>td,.table-warning>th{background-color:#ffeeba}.table-warning tbody+tbody,.table-warning td,.table-warning th,.table-warning thead th{border-color:#ffdf7e}.table-hover .table-warning:hover{background-color:#ffe8a1}.table-hover .table-warning:hover>td,.table-hover .table-warning:hover>th{background-color:#ffe8a1}.table-danger,.table-danger>td,.table-danger>th{background-color:#f5c6cb}.table-danger tbody+tbody,.table-danger td,.table-danger th,.table-danger thead th{border-color:#ed969e}.table-hover .table-danger:hover{background-color:#f1b0b7}.table-hover .table-danger:hover>td,.table-hover .table-danger:hover>th{background-color:#f1b0b7}.table-light,.table-light>td,.table-light>th{background-color:#fdfdfe}.table-light tbody+tbody,.table-light td,.table-light th,.table-light thead th{border-color:#fbfcfc}.table-hover .table-light:hover{background-color:#ececf6}.table-hover .table-light:hover>td,.table-hover .table-light:hover>th{background-color:#ececf6}.table-dark,.table-dark>td,.table-dark>th{background-color:#c6c8ca}.table-dark tbody+tbody,.table-dark td,.table-dark th,.table-dark thead th{border-color:#95999c}.table-hover .table-dark:hover{background-color:#b9bbbe}.table-hover .table-dark:hover>td,.table-hover .table-dark:hover>th{background-color:#b9bbbe}.table-active,.table-active>td,.table-active>th{background-color:rgba(0,0,0,.075)}.table-hover .table-active:hover{background-color:rgba(0,0,0,.075)}.table-hover .table-active:hover>td,.table-hover .table-active:hover>th{background-color:rgba(0,0,0,.075)}.table .thead-dark th{color:#fff;background-color:#343a40;border-color:#454d55}.table .thead-light th{color:#495057;background-color:#e9ecef;border-color:#dee2e6}.table-dark{color:#fff;background-color:#343a40}.table-dark td,.table-dark th,.table-dark thead th{border-color:#454d55}.table-dark.table-bordered{border:0}.table-dark.table-striped tbody tr:nth-of-type(odd){background-color:rgba(255,255,255,.05)}.table-dark.table-hover tbody tr:hover{color:#fff;background-color:rgba(255,255,255,.075)}@media (max-width:575.98px){.table-responsive-sm{display:block;width:100%;overflow-x:auto;-webkit-overflow-scrolling:touch}.table-responsive-sm>.table-bordered{border:0}}@media (max-width:767.98px){.table-responsive-md{display:block;width:100%;overflow-x:auto;-webkit-overflow-scrolling:touch}.table-responsive-md>.table-bordered{border:0}}@media (max-width:991.98px){.table-responsive-lg{display:block;width:100%;overflow-x:auto;-webkit-overflow-scrolling:touch}.table-responsive-lg>.table-bordered{border:0}}@media (max-width:1199.98px){.table-responsive-xl{display:block;width:100%;overflow-x:auto;-webkit-overflow-scrolling:touch}.table-responsive-xl>.table-bordered{border:0}}.table-responsive{display:block;width:100%;overflow-x:auto;-webkit-overflow-scrolling:touch}.table-responsive>.table-bordered{border:0}.form-control{display:block;width:100%;height:calc(1.5em + .75rem + 2px);padding:.375rem .75rem;font-size:1rem;font-weight:400;line-height:1.5;color:#495057;background-color:#fff;background-clip:padding-box;border:1px solid #ced4da;border-radius:.25rem;transition:border-color .15s ease-in-out,box-shadow .15s ease-in-out}@media (prefers-reduced-motion:reduce){.form-control{transition:none}}.form-control::-ms-expand{background-color:transparent;border:0}.form-control:-moz-focusring{color:transparent;text-shadow:0 0 0 #495057}.form-control:focus{color:#495057;background-color:#fff;border-color:#80bdff;outline:0;box-shadow:0 0 0 .2rem rgba(0,123,255,.25)}.form-control::-webkit-input-placeholder{color:#6c757d;opacity:1}.form-control::-moz-placeholder{color:#6c757d;opacity:1}.form-control:-ms-input-placeholder{color:#6c757d;opacity:1}.form-control::-ms-input-placeholder{color:#6c757d;opacity:1}.form-control::placeholder{color:#6c757d;opacity:1}.form-control:disabled,.form-control[readonly]{background-color:#e9ecef;opacity:1}input[type=date].form-control,input[type=datetime-local].form-control,input[type=month].form-control,input[type=time].form-control{-webkit-appearance:none;-moz-appearance:none;appearance:none}select.form-control:focus::-ms-value{color:#495057;background-color:#fff}.form-control-file,.form-control-range{display:block;width:100%}.col-form-label{padding-top:calc(.375rem + 1px);padding-bottom:calc(.375rem + 1px);margin-bottom:0;font-size:inherit;line-height:1.5}.col-form-label-lg{padding-top:calc(.5rem + 1px);padding-bottom:calc(.5rem + 1px);font-size:1.25rem;line-height:1.5}.col-form-label-sm{padding-top:calc(.25rem + 1px);padding-bottom:calc(.25rem + 1px);font-size:.875rem;line-height:1.5}.form-control-plaintext{display:block;width:100%;padding:.375rem 0;margin-bottom:0;font-size:1rem;line-height:1.5;color:#212529;background-color:transparent;border:solid transparent;border-width:1px 0}.form-control-plaintext.form-control-lg,.form-control-plaintext.form-control-sm{padding-right:0;padding-left:0}.form-control-sm{height:calc(1.5em + .5rem + 2px);padding:.25rem .5rem;font-size:.875rem;line-height:1.5;border-radius:.2rem}.form-control-lg{height:calc(1.5em + 1rem + 2px);padding:.5rem 1rem;font-size:1.25rem;line-height:1.5;border-radius:.3rem}select.form-control[multiple],select.form-control[size]{height:auto}textarea.form-control{height:auto}.form-group{margin-bottom:1rem}.form-text{display:block;margin-top:.25rem}.form-row{display:-ms-flexbox;display:flex;-ms-flex-wrap:wrap;flex-wrap:wrap;margin-right:-5px;margin-left:-5px}.form-row>.col,.form-row>[class*=col-]{padding-right:5px;padding-left:5px}.form-check{position:relative;display:block;padding-left:1.25rem}.form-check-input{position:absolute;margin-top:.3rem;margin-left:-1.25rem}.form-check-input:disabled~.form-check-label,.form-check-input[disabled]~.form-check-label{color:#6c757d}.form-check-label{margin-bottom:0}.form-check-inline{display:-ms-inline-flexbox;display:inline-flex;-ms-flex-align:center;align-items:center;padding-left:0;margin-right:.75rem}.form-check-inline .form-check-input{position:static;margin-top:0;margin-right:.3125rem;margin-left:0}.valid-feedback{display:none;width:100%;margin-top:.25rem;font-size:80%;color:#28a745}.valid-tooltip{position:absolute;top:100%;left:0;z-index:5;display:none;max-width:100%;padding:.25rem .5rem;margin-top:.1rem;font-size:.875rem;line-height:1.5;color:#fff;background-color:rgba(40,167,69,.9);border-radius:.25rem}.is-valid~.valid-feedback,.is-valid~.valid-tooltip,.was-validated :valid~.valid-feedback,.was-validated :valid~.valid-tooltip{display:block}.form-control.is-valid,.was-validated .form-control:valid{border-color:#28a745;padding-right:calc(1.5em + .75rem);background-image:url(\"data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' width='8' height='8' viewBox='0 0 8 8'%3e%3cpath fill='%2328a745' d='M2.3 6.73L.6 4.53c-.4-1.04.46-1.4 1.1-.8l1.1 1.4 3.4-3.8c.6-.63 1.6-.27 1.2.7l-4 4.6c-.43.5-.8.4-1.1.1z'/%3e%3c/svg%3e\");background-repeat:no-repeat;background-position:right calc(.375em + .1875rem) center;background-size:calc(.75em + .375rem) calc(.75em + .375rem)}.form-control.is-valid:focus,.was-validated .form-control:valid:focus{border-color:#28a745;box-shadow:0 0 0 .2rem rgba(40,167,69,.25)}.was-validated textarea.form-control:valid,textarea.form-control.is-valid{padding-right:calc(1.5em + .75rem);background-position:top calc(.375em + .1875rem) right calc(.375em + .1875rem)}.custom-select.is-valid,.was-validated .custom-select:valid{border-color:#28a745;padding-right:calc(.75em + 2.3125rem);background:url(\"data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' width='4' height='5' viewBox='0 0 4 5'%3e%3cpath fill='%23343a40' d='M2 0L0 2h4zm0 5L0 3h4z'/%3e%3c/svg%3e\") no-repeat right .75rem center/8px 10px,url(\"data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' width='8' height='8' viewBox='0 0 8 8'%3e%3cpath fill='%2328a745' d='M2.3 6.73L.6 4.53c-.4-1.04.46-1.4 1.1-.8l1.1 1.4 3.4-3.8c.6-.63 1.6-.27 1.2.7l-4 4.6c-.43.5-.8.4-1.1.1z'/%3e%3c/svg%3e\") #fff no-repeat center right 1.75rem/calc(.75em + .375rem) calc(.75em + .375rem)}.custom-select.is-valid:focus,.was-validated .custom-select:valid:focus{border-color:#28a745;box-shadow:0 0 0 .2rem rgba(40,167,69,.25)}.form-check-input.is-valid~.form-check-label,.was-validated .form-check-input:valid~.form-check-label{color:#28a745}.form-check-input.is-valid~.valid-feedback,.form-check-input.is-valid~.valid-tooltip,.was-validated .form-check-input:valid~.valid-feedback,.was-validated .form-check-input:valid~.valid-tooltip{display:block}.custom-control-input.is-valid~.custom-control-label,.was-validated .custom-control-input:valid~.custom-control-label{color:#28a745}.custom-control-input.is-valid~.custom-control-label::before,.was-validated .custom-control-input:valid~.custom-control-label::before{border-color:#28a745}.custom-control-input.is-valid:checked~.custom-control-label::before,.was-validated .custom-control-input:valid:checked~.custom-control-label::before{border-color:#34ce57;background-color:#34ce57}.custom-control-input.is-valid:focus~.custom-control-label::before,.was-validated .custom-control-input:valid:focus~.custom-control-label::before{box-shadow:0 0 0 .2rem rgba(40,167,69,.25)}.custom-control-input.is-valid:focus:not(:checked)~.custom-control-label::before,.was-validated .custom-control-input:valid:focus:not(:checked)~.custom-control-label::before{border-color:#28a745}.custom-file-input.is-valid~.custom-file-label,.was-validated .custom-file-input:valid~.custom-file-label{border-color:#28a745}.custom-file-input.is-valid:focus~.custom-file-label,.was-validated .custom-file-input:valid:focus~.custom-file-label{border-color:#28a745;box-shadow:0 0 0 .2rem rgba(40,167,69,.25)}.invalid-feedback{display:none;width:100%;margin-top:.25rem;font-size:80%;color:#dc3545}.invalid-tooltip{position:absolute;top:100%;left:0;z-index:5;display:none;max-width:100%;padding:.25rem .5rem;margin-top:.1rem;font-size:.875rem;line-height:1.5;color:#fff;background-color:rgba(220,53,69,.9);border-radius:.25rem}.is-invalid~.invalid-feedback,.is-invalid~.invalid-tooltip,.was-validated :invalid~.invalid-feedback,.was-validated :invalid~.invalid-tooltip{display:block}.form-control.is-invalid,.was-validated .form-control:invalid{border-color:#dc3545;padding-right:calc(1.5em + .75rem);background-image:url(\"data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' width='12' height='12' fill='none' stroke='%23dc3545' viewBox='0 0 12 12'%3e%3ccircle cx='6' cy='6' r='4.5'/%3e%3cpath stroke-linejoin='round' d='M5.8 3.6h.4L6 6.5z'/%3e%3ccircle cx='6' cy='8.2' r='.6' fill='%23dc3545' stroke='none'/%3e%3c/svg%3e\");background-repeat:no-repeat;background-position:right calc(.375em + .1875rem) center;background-size:calc(.75em + .375rem) calc(.75em + .375rem)}.form-control.is-invalid:focus,.was-validated .form-control:invalid:focus{border-color:#dc3545;box-shadow:0 0 0 .2rem rgba(220,53,69,.25)}.was-validated textarea.form-control:invalid,textarea.form-control.is-invalid{padding-right:calc(1.5em + .75rem);background-position:top calc(.375em + .1875rem) right calc(.375em + .1875rem)}.custom-select.is-invalid,.was-validated .custom-select:invalid{border-color:#dc3545;padding-right:calc(.75em + 2.3125rem);background:url(\"data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' width='4' height='5' viewBox='0 0 4 5'%3e%3cpath fill='%23343a40' d='M2 0L0 2h4zm0 5L0 3h4z'/%3e%3c/svg%3e\") no-repeat right .75rem center/8px 10px,url(\"data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' width='12' height='12' fill='none' stroke='%23dc3545' viewBox='0 0 12 12'%3e%3ccircle cx='6' cy='6' r='4.5'/%3e%3cpath stroke-linejoin='round' d='M5.8 3.6h.4L6 6.5z'/%3e%3ccircle cx='6' cy='8.2' r='.6' fill='%23dc3545' stroke='none'/%3e%3c/svg%3e\") #fff no-repeat center right 1.75rem/calc(.75em + .375rem) calc(.75em + .375rem)}.custom-select.is-invalid:focus,.was-validated .custom-select:invalid:focus{border-color:#dc3545;box-shadow:0 0 0 .2rem rgba(220,53,69,.25)}.form-check-input.is-invalid~.form-check-label,.was-validated .form-check-input:invalid~.form-check-label{color:#dc3545}.form-check-input.is-invalid~.invalid-feedback,.form-check-input.is-invalid~.invalid-tooltip,.was-validated .form-check-input:invalid~.invalid-feedback,.was-validated .form-check-input:invalid~.invalid-tooltip{display:block}.custom-control-input.is-invalid~.custom-control-label,.was-validated .custom-control-input:invalid~.custom-control-label{color:#dc3545}.custom-control-input.is-invalid~.custom-control-label::before,.was-validated .custom-control-input:invalid~.custom-control-label::before{border-color:#dc3545}.custom-control-input.is-invalid:checked~.custom-control-label::before,.was-validated .custom-control-input:invalid:checked~.custom-control-label::before{border-color:#e4606d;background-color:#e4606d}.custom-control-input.is-invalid:focus~.custom-control-label::before,.was-validated .custom-control-input:invalid:focus~.custom-control-label::before{box-shadow:0 0 0 .2rem rgba(220,53,69,.25)}.custom-control-input.is-invalid:focus:not(:checked)~.custom-control-label::before,.was-validated .custom-control-input:invalid:focus:not(:checked)~.custom-control-label::before{border-color:#dc3545}.custom-file-input.is-invalid~.custom-file-label,.was-validated .custom-file-input:invalid~.custom-file-label{border-color:#dc3545}.custom-file-input.is-invalid:focus~.custom-file-label,.was-validated .custom-file-input:invalid:focus~.custom-file-label{border-color:#dc3545;box-shadow:0 0 0 .2rem rgba(220,53,69,.25)}.form-inline{display:-ms-flexbox;display:flex;-ms-flex-flow:row wrap;flex-flow:row wrap;-ms-flex-align:center;align-items:center}.form-inline .form-check{width:100%}@media (min-width:576px){.form-inline label{display:-ms-flexbox;display:flex;-ms-flex-align:center;align-items:center;-ms-flex-pack:center;justify-content:center;margin-bottom:0}.form-inline .form-group{display:-ms-flexbox;display:flex;-ms-flex:0 0 auto;flex:0 0 auto;-ms-flex-flow:row wrap;flex-flow:row wrap;-ms-flex-align:center;align-items:center;margin-bottom:0}.form-inline .form-control{display:inline-block;width:auto;vertical-align:middle}.form-inline .form-control-plaintext{display:inline-block}.form-inline .custom-select,.form-inline .input-group{width:auto}.form-inline .form-check{display:-ms-flexbox;display:flex;-ms-flex-align:center;align-items:center;-ms-flex-pack:center;justify-content:center;width:auto;padding-left:0}.form-inline .form-check-input{position:relative;-ms-flex-negative:0;flex-shrink:0;margin-top:0;margin-right:.25rem;margin-left:0}.form-inline .custom-control{-ms-flex-align:center;align-items:center;-ms-flex-pack:center;justify-content:center}.form-inline .custom-control-label{margin-bottom:0}}.btn{display:inline-block;font-weight:400;color:#212529;text-align:center;vertical-align:middle;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;background-color:transparent;border:1px solid transparent;padding:.375rem .75rem;font-size:1rem;line-height:1.5;border-radius:.25rem;transition:color .15s ease-in-out,background-color .15s ease-in-out,border-color .15s ease-in-out,box-shadow .15s ease-in-out}@media (prefers-reduced-motion:reduce){.btn{transition:none}}.btn:hover{color:#212529;text-decoration:none}.btn.focus,.btn:focus{outline:0;box-shadow:0 0 0 .2rem rgba(0,123,255,.25)}.btn.disabled,.btn:disabled{opacity:.65}.btn:not(:disabled):not(.disabled){cursor:pointer}a.btn.disabled,fieldset:disabled a.btn{pointer-events:none}.btn-primary{color:#fff;background-color:#007bff;border-color:#007bff}.btn-primary:hover{color:#fff;background-color:#0069d9;border-color:#0062cc}.btn-primary.focus,.btn-primary:focus{color:#fff;background-color:#0069d9;border-color:#0062cc;box-shadow:0 0 0 .2rem rgba(38,143,255,.5)}.btn-primary.disabled,.btn-primary:disabled{color:#fff;background-color:#007bff;border-color:#007bff}.btn-primary:not(:disabled):not(.disabled).active,.btn-primary:not(:disabled):not(.disabled):active,.show>.btn-primary.dropdown-toggle{color:#fff;background-color:#0062cc;border-color:#005cbf}.btn-primary:not(:disabled):not(.disabled).active:focus,.btn-primary:not(:disabled):not(.disabled):active:focus,.show>.btn-primary.dropdown-toggle:focus{box-shadow:0 0 0 .2rem rgba(38,143,255,.5)}.btn-secondary{color:#fff;background-color:#6c757d;border-color:#6c757d}.btn-secondary:hover{color:#fff;background-color:#5a6268;border-color:#545b62}.btn-secondary.focus,.btn-secondary:focus{color:#fff;background-color:#5a6268;border-color:#545b62;box-shadow:0 0 0 .2rem rgba(130,138,145,.5)}.btn-secondary.disabled,.btn-secondary:disabled{color:#fff;background-color:#6c757d;border-color:#6c757d}.btn-secondary:not(:disabled):not(.disabled).active,.btn-secondary:not(:disabled):not(.disabled):active,.show>.btn-secondary.dropdown-toggle{color:#fff;background-color:#545b62;border-color:#4e555b}.btn-secondary:not(:disabled):not(.disabled).active:focus,.btn-secondary:not(:disabled):not(.disabled):active:focus,.show>.btn-secondary.dropdown-toggle:focus{box-shadow:0 0 0 .2rem rgba(130,138,145,.5)}.btn-success{color:#fff;background-color:#28a745;border-color:#28a745}.btn-success:hover{color:#fff;background-color:#218838;border-color:#1e7e34}.btn-success.focus,.btn-success:focus{color:#fff;background-color:#218838;border-color:#1e7e34;box-shadow:0 0 0 .2rem rgba(72,180,97,.5)}.btn-success.disabled,.btn-success:disabled{color:#fff;background-color:#28a745;border-color:#28a745}.btn-success:not(:disabled):not(.disabled).active,.btn-success:not(:disabled):not(.disabled):active,.show>.btn-success.dropdown-toggle{color:#fff;background-color:#1e7e34;border-color:#1c7430}.btn-success:not(:disabled):not(.disabled).active:focus,.btn-success:not(:disabled):not(.disabled):active:focus,.show>.btn-success.dropdown-toggle:focus{box-shadow:0 0 0 .2rem rgba(72,180,97,.5)}.btn-info{color:#fff;background-color:#17a2b8;border-color:#17a2b8}.btn-info:hover{color:#fff;background-color:#138496;border-color:#117a8b}.btn-info.focus,.btn-info:focus{color:#fff;background-color:#138496;border-color:#117a8b;box-shadow:0 0 0 .2rem rgba(58,176,195,.5)}.btn-info.disabled,.btn-info:disabled{color:#fff;background-color:#17a2b8;border-color:#17a2b8}.btn-info:not(:disabled):not(.disabled).active,.btn-info:not(:disabled):not(.disabled):active,.show>.btn-info.dropdown-toggle{color:#fff;background-color:#117a8b;border-color:#10707f}.btn-info:not(:disabled):not(.disabled).active:focus,.btn-info:not(:disabled):not(.disabled):active:focus,.show>.btn-info.dropdown-toggle:focus{box-shadow:0 0 0 .2rem rgba(58,176,195,.5)}.btn-warning{color:#212529;background-color:#ffc107;border-color:#ffc107}.btn-warning:hover{color:#212529;background-color:#e0a800;border-color:#d39e00}.btn-warning.focus,.btn-warning:focus{color:#212529;background-color:#e0a800;border-color:#d39e00;box-shadow:0 0 0 .2rem rgba(222,170,12,.5)}.btn-warning.disabled,.btn-warning:disabled{color:#212529;background-color:#ffc107;border-color:#ffc107}.btn-warning:not(:disabled):not(.disabled).active,.btn-warning:not(:disabled):not(.disabled):active,.show>.btn-warning.dropdown-toggle{color:#212529;background-color:#d39e00;border-color:#c69500}.btn-warning:not(:disabled):not(.disabled).active:focus,.btn-warning:not(:disabled):not(.disabled):active:focus,.show>.btn-warning.dropdown-toggle:focus{box-shadow:0 0 0 .2rem rgba(222,170,12,.5)}.btn-danger{color:#fff;background-color:#dc3545;border-color:#dc3545}.btn-danger:hover{color:#fff;background-color:#c82333;border-color:#bd2130}.btn-danger.focus,.btn-danger:focus{color:#fff;background-color:#c82333;border-color:#bd2130;box-shadow:0 0 0 .2rem rgba(225,83,97,.5)}.btn-danger.disabled,.btn-danger:disabled{color:#fff;background-color:#dc3545;border-color:#dc3545}.btn-danger:not(:disabled):not(.disabled).active,.btn-danger:not(:disabled):not(.disabled):active,.show>.btn-danger.dropdown-toggle{color:#fff;background-color:#bd2130;border-color:#b21f2d}.btn-danger:not(:disabled):not(.disabled).active:focus,.btn-danger:not(:disabled):not(.disabled):active:focus,.show>.btn-danger.dropdown-toggle:focus{box-shadow:0 0 0 .2rem rgba(225,83,97,.5)}.btn-light{color:#212529;background-color:#f8f9fa;border-color:#f8f9fa}.btn-light:hover{color:#212529;background-color:#e2e6ea;border-color:#dae0e5}.btn-light.focus,.btn-light:focus{color:#212529;background-color:#e2e6ea;border-color:#dae0e5;box-shadow:0 0 0 .2rem rgba(216,217,219,.5)}.btn-light.disabled,.btn-light:disabled{color:#212529;background-color:#f8f9fa;border-color:#f8f9fa}.btn-light:not(:disabled):not(.disabled).active,.btn-light:not(:disabled):not(.disabled):active,.show>.btn-light.dropdown-toggle{color:#212529;background-color:#dae0e5;border-color:#d3d9df}.btn-light:not(:disabled):not(.disabled).active:focus,.btn-light:not(:disabled):not(.disabled):active:focus,.show>.btn-light.dropdown-toggle:focus{box-shadow:0 0 0 .2rem rgba(216,217,219,.5)}.btn-dark{color:#fff;background-color:#343a40;border-color:#343a40}.btn-dark:hover{color:#fff;background-color:#23272b;border-color:#1d2124}.btn-dark.focus,.btn-dark:focus{color:#fff;background-color:#23272b;border-color:#1d2124;box-shadow:0 0 0 .2rem rgba(82,88,93,.5)}.btn-dark.disabled,.btn-dark:disabled{color:#fff;background-color:#343a40;border-color:#343a40}.btn-dark:not(:disabled):not(.disabled).active,.btn-dark:not(:disabled):not(.disabled):active,.show>.btn-dark.dropdown-toggle{color:#fff;background-color:#1d2124;border-color:#171a1d}.btn-dark:not(:disabled):not(.disabled).active:focus,.btn-dark:not(:disabled):not(.disabled):active:focus,.show>.btn-dark.dropdown-toggle:focus{box-shadow:0 0 0 .2rem rgba(82,88,93,.5)}.btn-outline-primary{color:#007bff;border-color:#007bff}.btn-outline-primary:hover{color:#fff;background-color:#007bff;border-color:#007bff}.btn-outline-primary.focus,.btn-outline-primary:focus{box-shadow:0 0 0 .2rem rgba(0,123,255,.5)}.btn-outline-primary.disabled,.btn-outline-primary:disabled{color:#007bff;background-color:transparent}.btn-outline-primary:not(:disabled):not(.disabled).active,.btn-outline-primary:not(:disabled):not(.disabled):active,.show>.btn-outline-primary.dropdown-toggle{color:#fff;background-color:#007bff;border-color:#007bff}.btn-outline-primary:not(:disabled):not(.disabled).active:focus,.btn-outline-primary:not(:disabled):not(.disabled):active:focus,.show>.btn-outline-primary.dropdown-toggle:focus{box-shadow:0 0 0 .2rem rgba(0,123,255,.5)}.btn-outline-secondary{color:#6c757d;border-color:#6c757d}.btn-outline-secondary:hover{color:#fff;background-color:#6c757d;border-color:#6c757d}.btn-outline-secondary.focus,.btn-outline-secondary:focus{box-shadow:0 0 0 .2rem rgba(108,117,125,.5)}.btn-outline-secondary.disabled,.btn-outline-secondary:disabled{color:#6c757d;background-color:transparent}.btn-outline-secondary:not(:disabled):not(.disabled).active,.btn-outline-secondary:not(:disabled):not(.disabled):active,.show>.btn-outline-secondary.dropdown-toggle{color:#fff;background-color:#6c757d;border-color:#6c757d}.btn-outline-secondary:not(:disabled):not(.disabled).active:focus,.btn-outline-secondary:not(:disabled):not(.disabled):active:focus,.show>.btn-outline-secondary.dropdown-toggle:focus{box-shadow:0 0 0 .2rem rgba(108,117,125,.5)}.btn-outline-success{color:#28a745;border-color:#28a745}.btn-outline-success:hover{color:#fff;background-color:#28a745;border-color:#28a745}.btn-outline-success.focus,.btn-outline-success:focus{box-shadow:0 0 0 .2rem rgba(40,167,69,.5)}.btn-outline-success.disabled,.btn-outline-success:disabled{color:#28a745;background-color:transparent}.btn-outline-success:not(:disabled):not(.disabled).active,.btn-outline-success:not(:disabled):not(.disabled):active,.show>.btn-outline-success.dropdown-toggle{color:#fff;background-color:#28a745;border-color:#28a745}.btn-outline-success:not(:disabled):not(.disabled).active:focus,.btn-outline-success:not(:disabled):not(.disabled):active:focus,.show>.btn-outline-success.dropdown-toggle:focus{box-shadow:0 0 0 .2rem rgba(40,167,69,.5)}.btn-outline-info{color:#17a2b8;border-color:#17a2b8}.btn-outline-info:hover{color:#fff;background-color:#17a2b8;border-color:#17a2b8}.btn-outline-info.focus,.btn-outline-info:focus{box-shadow:0 0 0 .2rem rgba(23,162,184,.5)}.btn-outline-info.disabled,.btn-outline-info:disabled{color:#17a2b8;background-color:transparent}.btn-outline-info:not(:disabled):not(.disabled).active,.btn-outline-info:not(:disabled):not(.disabled):active,.show>.btn-outline-info.dropdown-toggle{color:#fff;background-color:#17a2b8;border-color:#17a2b8}.btn-outline-info:not(:disabled):not(.disabled).active:focus,.btn-outline-info:not(:disabled):not(.disabled):active:focus,.show>.btn-outline-info.dropdown-toggle:focus{box-shadow:0 0 0 .2rem rgba(23,162,184,.5)}.btn-outline-warning{color:#ffc107;border-color:#ffc107}.btn-outline-warning:hover{color:#212529;background-color:#ffc107;border-color:#ffc107}.btn-outline-warning.focus,.btn-outline-warning:focus{box-shadow:0 0 0 .2rem rgba(255,193,7,.5)}.btn-outline-warning.disabled,.btn-outline-warning:disabled{color:#ffc107;background-color:transparent}.btn-outline-warning:not(:disabled):not(.disabled).active,.btn-outline-warning:not(:disabled):not(.disabled):active,.show>.btn-outline-warning.dropdown-toggle{color:#212529;background-color:#ffc107;border-color:#ffc107}.btn-outline-warning:not(:disabled):not(.disabled).active:focus,.btn-outline-warning:not(:disabled):not(.disabled):active:focus,.show>.btn-outline-warning.dropdown-toggle:focus{box-shadow:0 0 0 .2rem rgba(255,193,7,.5)}.btn-outline-danger{color:#dc3545;border-color:#dc3545}.btn-outline-danger:hover{color:#fff;background-color:#dc3545;border-color:#dc3545}.btn-outline-danger.focus,.btn-outline-danger:focus{box-shadow:0 0 0 .2rem rgba(220,53,69,.5)}.btn-outline-danger.disabled,.btn-outline-danger:disabled{color:#dc3545;background-color:transparent}.btn-outline-danger:not(:disabled):not(.disabled).active,.btn-outline-danger:not(:disabled):not(.disabled):active,.show>.btn-outline-danger.dropdown-toggle{color:#fff;background-color:#dc3545;border-color:#dc3545}.btn-outline-danger:not(:disabled):not(.disabled).active:focus,.btn-outline-danger:not(:disabled):not(.disabled):active:focus,.show>.btn-outline-danger.dropdown-toggle:focus{box-shadow:0 0 0 .2rem rgba(220,53,69,.5)}.btn-outline-light{color:#f8f9fa;border-color:#f8f9fa}.btn-outline-light:hover{color:#212529;background-color:#f8f9fa;border-color:#f8f9fa}.btn-outline-light.focus,.btn-outline-light:focus{box-shadow:0 0 0 .2rem rgba(248,249,250,.5)}.btn-outline-light.disabled,.btn-outline-light:disabled{color:#f8f9fa;background-color:transparent}.btn-outline-light:not(:disabled):not(.disabled).active,.btn-outline-light:not(:disabled):not(.disabled):active,.show>.btn-outline-light.dropdown-toggle{color:#212529;background-color:#f8f9fa;border-color:#f8f9fa}.btn-outline-light:not(:disabled):not(.disabled).active:focus,.btn-outline-light:not(:disabled):not(.disabled):active:focus,.show>.btn-outline-light.dropdown-toggle:focus{box-shadow:0 0 0 .2rem rgba(248,249,250,.5)}.btn-outline-dark{color:#343a40;border-color:#343a40}.btn-outline-dark:hover{color:#fff;background-color:#343a40;border-color:#343a40}.btn-outline-dark.focus,.btn-outline-dark:focus{box-shadow:0 0 0 .2rem rgba(52,58,64,.5)}.btn-outline-dark.disabled,.btn-outline-dark:disabled{color:#343a40;background-color:transparent}.btn-outline-dark:not(:disabled):not(.disabled).active,.btn-outline-dark:not(:disabled):not(.disabled):active,.show>.btn-outline-dark.dropdown-toggle{color:#fff;background-color:#343a40;border-color:#343a40}.btn-outline-dark:not(:disabled):not(.disabled).active:focus,.btn-outline-dark:not(:disabled):not(.disabled):active:focus,.show>.btn-outline-dark.dropdown-toggle:focus{box-shadow:0 0 0 .2rem rgba(52,58,64,.5)}.btn-link{font-weight:400;color:#007bff;text-decoration:none}.btn-link:hover{color:#0056b3;text-decoration:underline}.btn-link.focus,.btn-link:focus{text-decoration:underline}.btn-link.disabled,.btn-link:disabled{color:#6c757d;pointer-events:none}.btn-group-lg>.btn,.btn-lg{padding:.5rem 1rem;font-size:1.25rem;line-height:1.5;border-radius:.3rem}.btn-group-sm>.btn,.btn-sm{padding:.25rem .5rem;font-size:.875rem;line-height:1.5;border-radius:.2rem}.btn-block{display:block;width:100%}.btn-block+.btn-block{margin-top:.5rem}input[type=button].btn-block,input[type=reset].btn-block,input[type=submit].btn-block{width:100%}.fade{transition:opacity .15s linear}@media (prefers-reduced-motion:reduce){.fade{transition:none}}.fade:not(.show){opacity:0}.collapse:not(.show){display:none}.collapsing{position:relative;height:0;overflow:hidden;transition:height .35s ease}@media (prefers-reduced-motion:reduce){.collapsing{transition:none}}.dropdown,.dropleft,.dropright,.dropup{position:relative}.dropdown-toggle{white-space:nowrap}.dropdown-toggle::after{display:inline-block;margin-left:.255em;vertical-align:.255em;content:\"\";border-top:.3em solid;border-right:.3em solid transparent;border-bottom:0;border-left:.3em solid transparent}.dropdown-toggle:empty::after{margin-left:0}.dropdown-menu{position:absolute;top:100%;left:0;z-index:1000;display:none;float:left;min-width:10rem;padding:.5rem 0;margin:.125rem 0 0;font-size:1rem;color:#212529;text-align:left;list-style:none;background-color:#fff;background-clip:padding-box;border:1px solid rgba(0,0,0,.15);border-radius:.25rem}.dropdown-menu-left{right:auto;left:0}.dropdown-menu-right{right:0;left:auto}@media (min-width:576px){.dropdown-menu-sm-left{right:auto;left:0}.dropdown-menu-sm-right{right:0;left:auto}}@media (min-width:768px){.dropdown-menu-md-left{right:auto;left:0}.dropdown-menu-md-right{right:0;left:auto}}@media (min-width:992px){.dropdown-menu-lg-left{right:auto;left:0}.dropdown-menu-lg-right{right:0;left:auto}}@media (min-width:1200px){.dropdown-menu-xl-left{right:auto;left:0}.dropdown-menu-xl-right{right:0;left:auto}}.dropup .dropdown-menu{top:auto;bottom:100%;margin-top:0;margin-bottom:.125rem}.dropup .dropdown-toggle::after{display:inline-block;margin-left:.255em;vertical-align:.255em;content:\"\";border-top:0;border-right:.3em solid transparent;border-bottom:.3em solid;border-left:.3em solid transparent}.dropup .dropdown-toggle:empty::after{margin-left:0}.dropright .dropdown-menu{top:0;right:auto;left:100%;margin-top:0;margin-left:.125rem}.dropright .dropdown-toggle::after{display:inline-block;margin-left:.255em;vertical-align:.255em;content:\"\";border-top:.3em solid transparent;border-right:0;border-bottom:.3em solid transparent;border-left:.3em solid}.dropright .dropdown-toggle:empty::after{margin-left:0}.dropright .dropdown-toggle::after{vertical-align:0}.dropleft .dropdown-menu{top:0;right:100%;left:auto;margin-top:0;margin-right:.125rem}.dropleft .dropdown-toggle::after{display:inline-block;margin-left:.255em;vertical-align:.255em;content:\"\"}.dropleft .dropdown-toggle::after{display:none}.dropleft .dropdown-toggle::before{display:inline-block;margin-right:.255em;vertical-align:.255em;content:\"\";border-top:.3em solid transparent;border-right:.3em solid;border-bottom:.3em solid transparent}.dropleft .dropdown-toggle:empty::after{margin-left:0}.dropleft .dropdown-toggle::before{vertical-align:0}.dropdown-menu[x-placement^=bottom],.dropdown-menu[x-placement^=left],.dropdown-menu[x-placement^=right],.dropdown-menu[x-placement^=top]{right:auto;bottom:auto}.dropdown-divider{height:0;margin:.5rem 0;overflow:hidden;border-top:1px solid #e9ecef}.dropdown-item{display:block;width:100%;padding:.25rem 1.5rem;clear:both;font-weight:400;color:#212529;text-align:inherit;white-space:nowrap;background-color:transparent;border:0}.dropdown-item:focus,.dropdown-item:hover{color:#16181b;text-decoration:none;background-color:#f8f9fa}.dropdown-item.active,.dropdown-item:active{color:#fff;text-decoration:none;background-color:#007bff}.dropdown-item.disabled,.dropdown-item:disabled{color:#6c757d;pointer-events:none;background-color:transparent}.dropdown-menu.show{display:block}.dropdown-header{display:block;padding:.5rem 1.5rem;margin-bottom:0;font-size:.875rem;color:#6c757d;white-space:nowrap}.dropdown-item-text{display:block;padding:.25rem 1.5rem;color:#212529}.btn-group,.btn-group-vertical{position:relative;display:-ms-inline-flexbox;display:inline-flex;vertical-align:middle}.btn-group-vertical>.btn,.btn-group>.btn{position:relative;-ms-flex:1 1 auto;flex:1 1 auto}.btn-group-vertical>.btn:hover,.btn-group>.btn:hover{z-index:1}.btn-group-vertical>.btn.active,.btn-group-vertical>.btn:active,.btn-group-vertical>.btn:focus,.btn-group>.btn.active,.btn-group>.btn:active,.btn-group>.btn:focus{z-index:1}.btn-toolbar{display:-ms-flexbox;display:flex;-ms-flex-wrap:wrap;flex-wrap:wrap;-ms-flex-pack:start;justify-content:flex-start}.btn-toolbar .input-group{width:auto}.btn-group>.btn-group:not(:first-child),.btn-group>.btn:not(:first-child){margin-left:-1px}.btn-group>.btn-group:not(:last-child)>.btn,.btn-group>.btn:not(:last-child):not(.dropdown-toggle){border-top-right-radius:0;border-bottom-right-radius:0}.btn-group>.btn-group:not(:first-child)>.btn,.btn-group>.btn:not(:first-child){border-top-left-radius:0;border-bottom-left-radius:0}.dropdown-toggle-split{padding-right:.5625rem;padding-left:.5625rem}.dropdown-toggle-split::after,.dropright .dropdown-toggle-split::after,.dropup .dropdown-toggle-split::after{margin-left:0}.dropleft .dropdown-toggle-split::before{margin-right:0}.btn-group-sm>.btn+.dropdown-toggle-split,.btn-sm+.dropdown-toggle-split{padding-right:.375rem;padding-left:.375rem}.btn-group-lg>.btn+.dropdown-toggle-split,.btn-lg+.dropdown-toggle-split{padding-right:.75rem;padding-left:.75rem}.btn-group-vertical{-ms-flex-direction:column;flex-direction:column;-ms-flex-align:start;align-items:flex-start;-ms-flex-pack:center;justify-content:center}.btn-group-vertical>.btn,.btn-group-vertical>.btn-group{width:100%}.btn-group-vertical>.btn-group:not(:first-child),.btn-group-vertical>.btn:not(:first-child){margin-top:-1px}.btn-group-vertical>.btn-group:not(:last-child)>.btn,.btn-group-vertical>.btn:not(:last-child):not(.dropdown-toggle){border-bottom-right-radius:0;border-bottom-left-radius:0}.btn-group-vertical>.btn-group:not(:first-child)>.btn,.btn-group-vertical>.btn:not(:first-child){border-top-left-radius:0;border-top-right-radius:0}.btn-group-toggle>.btn,.btn-group-toggle>.btn-group>.btn{margin-bottom:0}.btn-group-toggle>.btn input[type=checkbox],.btn-group-toggle>.btn input[type=radio],.btn-group-toggle>.btn-group>.btn input[type=checkbox],.btn-group-toggle>.btn-group>.btn input[type=radio]{position:absolute;clip:rect(0,0,0,0);pointer-events:none}.input-group{position:relative;display:-ms-flexbox;display:flex;-ms-flex-wrap:wrap;flex-wrap:wrap;-ms-flex-align:stretch;align-items:stretch;width:100%}.input-group>.custom-file,.input-group>.custom-select,.input-group>.form-control,.input-group>.form-control-plaintext{position:relative;-ms-flex:1 1 auto;flex:1 1 auto;width:1%;min-width:0;margin-bottom:0}.input-group>.custom-file+.custom-file,.input-group>.custom-file+.custom-select,.input-group>.custom-file+.form-control,.input-group>.custom-select+.custom-file,.input-group>.custom-select+.custom-select,.input-group>.custom-select+.form-control,.input-group>.form-control+.custom-file,.input-group>.form-control+.custom-select,.input-group>.form-control+.form-control,.input-group>.form-control-plaintext+.custom-file,.input-group>.form-control-plaintext+.custom-select,.input-group>.form-control-plaintext+.form-control{margin-left:-1px}.input-group>.custom-file .custom-file-input:focus~.custom-file-label,.input-group>.custom-select:focus,.input-group>.form-control:focus{z-index:3}.input-group>.custom-file .custom-file-input:focus{z-index:4}.input-group>.custom-select:not(:last-child),.input-group>.form-control:not(:last-child){border-top-right-radius:0;border-bottom-right-radius:0}.input-group>.custom-select:not(:first-child),.input-group>.form-control:not(:first-child){border-top-left-radius:0;border-bottom-left-radius:0}.input-group>.custom-file{display:-ms-flexbox;display:flex;-ms-flex-align:center;align-items:center}.input-group>.custom-file:not(:last-child) .custom-file-label,.input-group>.custom-file:not(:last-child) .custom-file-label::after{border-top-right-radius:0;border-bottom-right-radius:0}.input-group>.custom-file:not(:first-child) .custom-file-label{border-top-left-radius:0;border-bottom-left-radius:0}.input-group-append,.input-group-prepend{display:-ms-flexbox;display:flex}.input-group-append .btn,.input-group-prepend .btn{position:relative;z-index:2}.input-group-append .btn:focus,.input-group-prepend .btn:focus{z-index:3}.input-group-append .btn+.btn,.input-group-append .btn+.input-group-text,.input-group-append .input-group-text+.btn,.input-group-append .input-group-text+.input-group-text,.input-group-prepend .btn+.btn,.input-group-prepend .btn+.input-group-text,.input-group-prepend .input-group-text+.btn,.input-group-prepend .input-group-text+.input-group-text{margin-left:-1px}.input-group-prepend{margin-right:-1px}.input-group-append{margin-left:-1px}.input-group-text{display:-ms-flexbox;display:flex;-ms-flex-align:center;align-items:center;padding:.375rem .75rem;margin-bottom:0;font-size:1rem;font-weight:400;line-height:1.5;color:#495057;text-align:center;white-space:nowrap;background-color:#e9ecef;border:1px solid #ced4da;border-radius:.25rem}.input-group-text input[type=checkbox],.input-group-text input[type=radio]{margin-top:0}.input-group-lg>.custom-select,.input-group-lg>.form-control:not(textarea){height:calc(1.5em + 1rem + 2px)}.input-group-lg>.custom-select,.input-group-lg>.form-control,.input-group-lg>.input-group-append>.btn,.input-group-lg>.input-group-append>.input-group-text,.input-group-lg>.input-group-prepend>.btn,.input-group-lg>.input-group-prepend>.input-group-text{padding:.5rem 1rem;font-size:1.25rem;line-height:1.5;border-radius:.3rem}.input-group-sm>.custom-select,.input-group-sm>.form-control:not(textarea){height:calc(1.5em + .5rem + 2px)}.input-group-sm>.custom-select,.input-group-sm>.form-control,.input-group-sm>.input-group-append>.btn,.input-group-sm>.input-group-append>.input-group-text,.input-group-sm>.input-group-prepend>.btn,.input-group-sm>.input-group-prepend>.input-group-text{padding:.25rem .5rem;font-size:.875rem;line-height:1.5;border-radius:.2rem}.input-group-lg>.custom-select,.input-group-sm>.custom-select{padding-right:1.75rem}.input-group>.input-group-append:last-child>.btn:not(:last-child):not(.dropdown-toggle),.input-group>.input-group-append:last-child>.input-group-text:not(:last-child),.input-group>.input-group-append:not(:last-child)>.btn,.input-group>.input-group-append:not(:last-child)>.input-group-text,.input-group>.input-group-prepend>.btn,.input-group>.input-group-prepend>.input-group-text{border-top-right-radius:0;border-bottom-right-radius:0}.input-group>.input-group-append>.btn,.input-group>.input-group-append>.input-group-text,.input-group>.input-group-prepend:first-child>.btn:not(:first-child),.input-group>.input-group-prepend:first-child>.input-group-text:not(:first-child),.input-group>.input-group-prepend:not(:first-child)>.btn,.input-group>.input-group-prepend:not(:first-child)>.input-group-text{border-top-left-radius:0;border-bottom-left-radius:0}.custom-control{position:relative;z-index:1;display:block;min-height:1.5rem;padding-left:1.5rem;-webkit-print-color-adjust:exact;color-adjust:exact}.custom-control-inline{display:-ms-inline-flexbox;display:inline-flex;margin-right:1rem}.custom-control-input{position:absolute;left:0;z-index:-1;width:1rem;height:1.25rem;opacity:0}.custom-control-input:checked~.custom-control-label::before{color:#fff;border-color:#007bff;background-color:#007bff}.custom-control-input:focus~.custom-control-label::before{box-shadow:0 0 0 .2rem rgba(0,123,255,.25)}.custom-control-input:focus:not(:checked)~.custom-control-label::before{border-color:#80bdff}.custom-control-input:not(:disabled):active~.custom-control-label::before{color:#fff;background-color:#b3d7ff;border-color:#b3d7ff}.custom-control-input:disabled~.custom-control-label,.custom-control-input[disabled]~.custom-control-label{color:#6c757d}.custom-control-input:disabled~.custom-control-label::before,.custom-control-input[disabled]~.custom-control-label::before{background-color:#e9ecef}.custom-control-label{position:relative;margin-bottom:0;vertical-align:top}.custom-control-label::before{position:absolute;top:.25rem;left:-1.5rem;display:block;width:1rem;height:1rem;pointer-events:none;content:\"\";background-color:#fff;border:#adb5bd solid 1px}.custom-control-label::after{position:absolute;top:.25rem;left:-1.5rem;display:block;width:1rem;height:1rem;content:\"\";background:no-repeat 50%/50% 50%}.custom-checkbox .custom-control-label::before{border-radius:.25rem}.custom-checkbox .custom-control-input:checked~.custom-control-label::after{background-image:url(\"data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' width='8' height='8' viewBox='0 0 8 8'%3e%3cpath fill='%23fff' d='M6.564.75l-3.59 3.612-1.538-1.55L0 4.26l2.974 2.99L8 2.193z'/%3e%3c/svg%3e\")}.custom-checkbox .custom-control-input:indeterminate~.custom-control-label::before{border-color:#007bff;background-color:#007bff}.custom-checkbox .custom-control-input:indeterminate~.custom-control-label::after{background-image:url(\"data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' width='4' height='4' viewBox='0 0 4 4'%3e%3cpath stroke='%23fff' d='M0 2h4'/%3e%3c/svg%3e\")}.custom-checkbox .custom-control-input:disabled:checked~.custom-control-label::before{background-color:rgba(0,123,255,.5)}.custom-checkbox .custom-control-input:disabled:indeterminate~.custom-control-label::before{background-color:rgba(0,123,255,.5)}.custom-radio .custom-control-label::before{border-radius:50%}.custom-radio .custom-control-input:checked~.custom-control-label::after{background-image:url(\"data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' width='12' height='12' viewBox='-4 -4 8 8'%3e%3ccircle r='3' fill='%23fff'/%3e%3c/svg%3e\")}.custom-radio .custom-control-input:disabled:checked~.custom-control-label::before{background-color:rgba(0,123,255,.5)}.custom-switch{padding-left:2.25rem}.custom-switch .custom-control-label::before{left:-2.25rem;width:1.75rem;pointer-events:all;border-radius:.5rem}.custom-switch .custom-control-label::after{top:calc(.25rem + 2px);left:calc(-2.25rem + 2px);width:calc(1rem - 4px);height:calc(1rem - 4px);background-color:#adb5bd;border-radius:.5rem;transition:background-color .15s ease-in-out,border-color .15s ease-in-out,box-shadow .15s ease-in-out,-webkit-transform .15s ease-in-out;transition:transform .15s ease-in-out,background-color .15s ease-in-out,border-color .15s ease-in-out,box-shadow .15s ease-in-out;transition:transform .15s ease-in-out,background-color .15s ease-in-out,border-color .15s ease-in-out,box-shadow .15s ease-in-out,-webkit-transform .15s ease-in-out}@media (prefers-reduced-motion:reduce){.custom-switch .custom-control-label::after{transition:none}}.custom-switch .custom-control-input:checked~.custom-control-label::after{background-color:#fff;-webkit-transform:translateX(.75rem);transform:translateX(.75rem)}.custom-switch .custom-control-input:disabled:checked~.custom-control-label::before{background-color:rgba(0,123,255,.5)}.custom-select{display:inline-block;width:100%;height:calc(1.5em + .75rem + 2px);padding:.375rem 1.75rem .375rem .75rem;font-size:1rem;font-weight:400;line-height:1.5;color:#495057;vertical-align:middle;background:#fff url(\"data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' width='4' height='5' viewBox='0 0 4 5'%3e%3cpath fill='%23343a40' d='M2 0L0 2h4zm0 5L0 3h4z'/%3e%3c/svg%3e\") no-repeat right .75rem center/8px 10px;border:1px solid #ced4da;border-radius:.25rem;-webkit-appearance:none;-moz-appearance:none;appearance:none}.custom-select:focus{border-color:#80bdff;outline:0;box-shadow:0 0 0 .2rem rgba(0,123,255,.25)}.custom-select:focus::-ms-value{color:#495057;background-color:#fff}.custom-select[multiple],.custom-select[size]:not([size=\"1\"]){height:auto;padding-right:.75rem;background-image:none}.custom-select:disabled{color:#6c757d;background-color:#e9ecef}.custom-select::-ms-expand{display:none}.custom-select:-moz-focusring{color:transparent;text-shadow:0 0 0 #495057}.custom-select-sm{height:calc(1.5em + .5rem + 2px);padding-top:.25rem;padding-bottom:.25rem;padding-left:.5rem;font-size:.875rem}.custom-select-lg{height:calc(1.5em + 1rem + 2px);padding-top:.5rem;padding-bottom:.5rem;padding-left:1rem;font-size:1.25rem}.custom-file{position:relative;display:inline-block;width:100%;height:calc(1.5em + .75rem + 2px);margin-bottom:0}.custom-file-input{position:relative;z-index:2;width:100%;height:calc(1.5em + .75rem + 2px);margin:0;opacity:0}.custom-file-input:focus~.custom-file-label{border-color:#80bdff;box-shadow:0 0 0 .2rem rgba(0,123,255,.25)}.custom-file-input:disabled~.custom-file-label,.custom-file-input[disabled]~.custom-file-label{background-color:#e9ecef}.custom-file-input:lang(en)~.custom-file-label::after{content:\"Browse\"}.custom-file-input~.custom-file-label[data-browse]::after{content:attr(data-browse)}.custom-file-label{position:absolute;top:0;right:0;left:0;z-index:1;height:calc(1.5em + .75rem + 2px);padding:.375rem .75rem;font-weight:400;line-height:1.5;color:#495057;background-color:#fff;border:1px solid #ced4da;border-radius:.25rem}.custom-file-label::after{position:absolute;top:0;right:0;bottom:0;z-index:3;display:block;height:calc(1.5em + .75rem);padding:.375rem .75rem;line-height:1.5;color:#495057;content:\"Browse\";background-color:#e9ecef;border-left:inherit;border-radius:0 .25rem .25rem 0}.custom-range{width:100%;height:1.4rem;padding:0;background-color:transparent;-webkit-appearance:none;-moz-appearance:none;appearance:none}.custom-range:focus{outline:0}.custom-range:focus::-webkit-slider-thumb{box-shadow:0 0 0 1px #fff,0 0 0 .2rem rgba(0,123,255,.25)}.custom-range:focus::-moz-range-thumb{box-shadow:0 0 0 1px #fff,0 0 0 .2rem rgba(0,123,255,.25)}.custom-range:focus::-ms-thumb{box-shadow:0 0 0 1px #fff,0 0 0 .2rem rgba(0,123,255,.25)}.custom-range::-moz-focus-outer{border:0}.custom-range::-webkit-slider-thumb{width:1rem;height:1rem;margin-top:-.25rem;background-color:#007bff;border:0;border-radius:1rem;-webkit-transition:background-color .15s ease-in-out,border-color .15s ease-in-out,box-shadow .15s ease-in-out;transition:background-color .15s ease-in-out,border-color .15s ease-in-out,box-shadow .15s ease-in-out;-webkit-appearance:none;appearance:none}@media (prefers-reduced-motion:reduce){.custom-range::-webkit-slider-thumb{-webkit-transition:none;transition:none}}.custom-range::-webkit-slider-thumb:active{background-color:#b3d7ff}.custom-range::-webkit-slider-runnable-track{width:100%;height:.5rem;color:transparent;cursor:pointer;background-color:#dee2e6;border-color:transparent;border-radius:1rem}.custom-range::-moz-range-thumb{width:1rem;height:1rem;background-color:#007bff;border:0;border-radius:1rem;-moz-transition:background-color .15s ease-in-out,border-color .15s ease-in-out,box-shadow .15s ease-in-out;transition:background-color .15s ease-in-out,border-color .15s ease-in-out,box-shadow .15s ease-in-out;-moz-appearance:none;appearance:none}@media (prefers-reduced-motion:reduce){.custom-range::-moz-range-thumb{-moz-transition:none;transition:none}}.custom-range::-moz-range-thumb:active{background-color:#b3d7ff}.custom-range::-moz-range-track{width:100%;height:.5rem;color:transparent;cursor:pointer;background-color:#dee2e6;border-color:transparent;border-radius:1rem}.custom-range::-ms-thumb{width:1rem;height:1rem;margin-top:0;margin-right:.2rem;margin-left:.2rem;background-color:#007bff;border:0;border-radius:1rem;-ms-transition:background-color .15s ease-in-out,border-color .15s ease-in-out,box-shadow .15s ease-in-out;transition:background-color .15s ease-in-out,border-color .15s ease-in-out,box-shadow .15s ease-in-out;appearance:none}@media (prefers-reduced-motion:reduce){.custom-range::-ms-thumb{-ms-transition:none;transition:none}}.custom-range::-ms-thumb:active{background-color:#b3d7ff}.custom-range::-ms-track{width:100%;height:.5rem;color:transparent;cursor:pointer;background-color:transparent;border-color:transparent;border-width:.5rem}.custom-range::-ms-fill-lower{background-color:#dee2e6;border-radius:1rem}.custom-range::-ms-fill-upper{margin-right:15px;background-color:#dee2e6;border-radius:1rem}.custom-range:disabled::-webkit-slider-thumb{background-color:#adb5bd}.custom-range:disabled::-webkit-slider-runnable-track{cursor:default}.custom-range:disabled::-moz-range-thumb{background-color:#adb5bd}.custom-range:disabled::-moz-range-track{cursor:default}.custom-range:disabled::-ms-thumb{background-color:#adb5bd}.custom-control-label::before,.custom-file-label,.custom-select{transition:background-color .15s ease-in-out,border-color .15s ease-in-out,box-shadow .15s ease-in-out}@media (prefers-reduced-motion:reduce){.custom-control-label::before,.custom-file-label,.custom-select{transition:none}}.nav{display:-ms-flexbox;display:flex;-ms-flex-wrap:wrap;flex-wrap:wrap;padding-left:0;margin-bottom:0;list-style:none}.nav-link{display:block;padding:.5rem 1rem}.nav-link:focus,.nav-link:hover{text-decoration:none}.nav-link.disabled{color:#6c757d;pointer-events:none;cursor:default}.nav-tabs{border-bottom:1px solid #dee2e6}.nav-tabs .nav-item{margin-bottom:-1px}.nav-tabs .nav-link{border:1px solid transparent;border-top-left-radius:.25rem;border-top-right-radius:.25rem}.nav-tabs .nav-link:focus,.nav-tabs .nav-link:hover{border-color:#e9ecef #e9ecef #dee2e6}.nav-tabs .nav-link.disabled{color:#6c757d;background-color:transparent;border-color:transparent}.nav-tabs .nav-item.show .nav-link,.nav-tabs .nav-link.active{color:#495057;background-color:#fff;border-color:#dee2e6 #dee2e6 #fff}.nav-tabs .dropdown-menu{margin-top:-1px;border-top-left-radius:0;border-top-right-radius:0}.nav-pills .nav-link{border-radius:.25rem}.nav-pills .nav-link.active,.nav-pills .show>.nav-link{color:#fff;background-color:#007bff}.nav-fill .nav-item,.nav-fill>.nav-link{-ms-flex:1 1 auto;flex:1 1 auto;text-align:center}.nav-justified .nav-item,.nav-justified>.nav-link{-ms-flex-preferred-size:0;flex-basis:0;-ms-flex-positive:1;flex-grow:1;text-align:center}.tab-content>.tab-pane{display:none}.tab-content>.active{display:block}.navbar{position:relative;display:-ms-flexbox;display:flex;-ms-flex-wrap:wrap;flex-wrap:wrap;-ms-flex-align:center;align-items:center;-ms-flex-pack:justify;justify-content:space-between;padding:.5rem 1rem}.navbar .container,.navbar .container-fluid,.navbar .container-lg,.navbar .container-md,.navbar .container-sm,.navbar .container-xl{display:-ms-flexbox;display:flex;-ms-flex-wrap:wrap;flex-wrap:wrap;-ms-flex-align:center;align-items:center;-ms-flex-pack:justify;justify-content:space-between}.navbar-brand{display:inline-block;padding-top:.3125rem;padding-bottom:.3125rem;margin-right:1rem;font-size:1.25rem;line-height:inherit;white-space:nowrap}.navbar-brand:focus,.navbar-brand:hover{text-decoration:none}.navbar-nav{display:-ms-flexbox;display:flex;-ms-flex-direction:column;flex-direction:column;padding-left:0;margin-bottom:0;list-style:none}.navbar-nav .nav-link{padding-right:0;padding-left:0}.navbar-nav .dropdown-menu{position:static;float:none}.navbar-text{display:inline-block;padding-top:.5rem;padding-bottom:.5rem}.navbar-collapse{-ms-flex-preferred-size:100%;flex-basis:100%;-ms-flex-positive:1;flex-grow:1;-ms-flex-align:center;align-items:center}.navbar-toggler{padding:.25rem .75rem;font-size:1.25rem;line-height:1;background-color:transparent;border:1px solid transparent;border-radius:.25rem}.navbar-toggler:focus,.navbar-toggler:hover{text-decoration:none}.navbar-toggler-icon{display:inline-block;width:1.5em;height:1.5em;vertical-align:middle;content:\"\";background:no-repeat center center;background-size:100% 100%}@media (max-width:575.98px){.navbar-expand-sm>.container,.navbar-expand-sm>.container-fluid,.navbar-expand-sm>.container-lg,.navbar-expand-sm>.container-md,.navbar-expand-sm>.container-sm,.navbar-expand-sm>.container-xl{padding-right:0;padding-left:0}}@media (min-width:576px){.navbar-expand-sm{-ms-flex-flow:row nowrap;flex-flow:row nowrap;-ms-flex-pack:start;justify-content:flex-start}.navbar-expand-sm .navbar-nav{-ms-flex-direction:row;flex-direction:row}.navbar-expand-sm .navbar-nav .dropdown-menu{position:absolute}.navbar-expand-sm .navbar-nav .nav-link{padding-right:.5rem;padding-left:.5rem}.navbar-expand-sm>.container,.navbar-expand-sm>.container-fluid,.navbar-expand-sm>.container-lg,.navbar-expand-sm>.container-md,.navbar-expand-sm>.container-sm,.navbar-expand-sm>.container-xl{-ms-flex-wrap:nowrap;flex-wrap:nowrap}.navbar-expand-sm .navbar-collapse{display:-ms-flexbox!important;display:flex!important;-ms-flex-preferred-size:auto;flex-basis:auto}.navbar-expand-sm .navbar-toggler{display:none}}@media (max-width:767.98px){.navbar-expand-md>.container,.navbar-expand-md>.container-fluid,.navbar-expand-md>.container-lg,.navbar-expand-md>.container-md,.navbar-expand-md>.container-sm,.navbar-expand-md>.container-xl{padding-right:0;padding-left:0}}@media (min-width:768px){.navbar-expand-md{-ms-flex-flow:row nowrap;flex-flow:row nowrap;-ms-flex-pack:start;justify-content:flex-start}.navbar-expand-md .navbar-nav{-ms-flex-direction:row;flex-direction:row}.navbar-expand-md .navbar-nav .dropdown-menu{position:absolute}.navbar-expand-md .navbar-nav .nav-link{padding-right:.5rem;padding-left:.5rem}.navbar-expand-md>.container,.navbar-expand-md>.container-fluid,.navbar-expand-md>.container-lg,.navbar-expand-md>.container-md,.navbar-expand-md>.container-sm,.navbar-expand-md>.container-xl{-ms-flex-wrap:nowrap;flex-wrap:nowrap}.navbar-expand-md .navbar-collapse{display:-ms-flexbox!important;display:flex!important;-ms-flex-preferred-size:auto;flex-basis:auto}.navbar-expand-md .navbar-toggler{display:none}}@media (max-width:991.98px){.navbar-expand-lg>.container,.navbar-expand-lg>.container-fluid,.navbar-expand-lg>.container-lg,.navbar-expand-lg>.container-md,.navbar-expand-lg>.container-sm,.navbar-expand-lg>.container-xl{padding-right:0;padding-left:0}}@media (min-width:992px){.navbar-expand-lg{-ms-flex-flow:row nowrap;flex-flow:row nowrap;-ms-flex-pack:start;justify-content:flex-start}.navbar-expand-lg .navbar-nav{-ms-flex-direction:row;flex-direction:row}.navbar-expand-lg .navbar-nav .dropdown-menu{position:absolute}.navbar-expand-lg .navbar-nav .nav-link{padding-right:.5rem;padding-left:.5rem}.navbar-expand-lg>.container,.navbar-expand-lg>.container-fluid,.navbar-expand-lg>.container-lg,.navbar-expand-lg>.container-md,.navbar-expand-lg>.container-sm,.navbar-expand-lg>.container-xl{-ms-flex-wrap:nowrap;flex-wrap:nowrap}.navbar-expand-lg .navbar-collapse{display:-ms-flexbox!important;display:flex!important;-ms-flex-preferred-size:auto;flex-basis:auto}.navbar-expand-lg .navbar-toggler{display:none}}@media (max-width:1199.98px){.navbar-expand-xl>.container,.navbar-expand-xl>.container-fluid,.navbar-expand-xl>.container-lg,.navbar-expand-xl>.container-md,.navbar-expand-xl>.container-sm,.navbar-expand-xl>.container-xl{padding-right:0;padding-left:0}}@media (min-width:1200px){.navbar-expand-xl{-ms-flex-flow:row nowrap;flex-flow:row nowrap;-ms-flex-pack:start;justify-content:flex-start}.navbar-expand-xl .navbar-nav{-ms-flex-direction:row;flex-direction:row}.navbar-expand-xl .navbar-nav .dropdown-menu{position:absolute}.navbar-expand-xl .navbar-nav .nav-link{padding-right:.5rem;padding-left:.5rem}.navbar-expand-xl>.container,.navbar-expand-xl>.container-fluid,.navbar-expand-xl>.container-lg,.navbar-expand-xl>.container-md,.navbar-expand-xl>.container-sm,.navbar-expand-xl>.container-xl{-ms-flex-wrap:nowrap;flex-wrap:nowrap}.navbar-expand-xl .navbar-collapse{display:-ms-flexbox!important;display:flex!important;-ms-flex-preferred-size:auto;flex-basis:auto}.navbar-expand-xl .navbar-toggler{display:none}}.navbar-expand{-ms-flex-flow:row nowrap;flex-flow:row nowrap;-ms-flex-pack:start;justify-content:flex-start}.navbar-expand>.container,.navbar-expand>.container-fluid,.navbar-expand>.container-lg,.navbar-expand>.container-md,.navbar-expand>.container-sm,.navbar-expand>.container-xl{padding-right:0;padding-left:0}.navbar-expand .navbar-nav{-ms-flex-direction:row;flex-direction:row}.navbar-expand .navbar-nav .dropdown-menu{position:absolute}.navbar-expand .navbar-nav .nav-link{padding-right:.5rem;padding-left:.5rem}.navbar-expand>.container,.navbar-expand>.container-fluid,.navbar-expand>.container-lg,.navbar-expand>.container-md,.navbar-expand>.container-sm,.navbar-expand>.container-xl{-ms-flex-wrap:nowrap;flex-wrap:nowrap}.navbar-expand .navbar-collapse{display:-ms-flexbox!important;display:flex!important;-ms-flex-preferred-size:auto;flex-basis:auto}.navbar-expand .navbar-toggler{display:none}.navbar-light .navbar-brand{color:rgba(0,0,0,.9)}.navbar-light .navbar-brand:focus,.navbar-light .navbar-brand:hover{color:rgba(0,0,0,.9)}.navbar-light .navbar-nav .nav-link{color:rgba(0,0,0,.5)}.navbar-light .navbar-nav .nav-link:focus,.navbar-light .navbar-nav .nav-link:hover{color:rgba(0,0,0,.7)}.navbar-light .navbar-nav .nav-link.disabled{color:rgba(0,0,0,.3)}.navbar-light .navbar-nav .active>.nav-link,.navbar-light .navbar-nav .nav-link.active,.navbar-light .navbar-nav .nav-link.show,.navbar-light .navbar-nav .show>.nav-link{color:rgba(0,0,0,.9)}.navbar-light .navbar-toggler{color:rgba(0,0,0,.5);border-color:rgba(0,0,0,.1)}.navbar-light .navbar-toggler-icon{background-image:url(\"data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' width='30' height='30' viewBox='0 0 30 30'%3e%3cpath stroke='rgba%280, 0, 0, 0.5%29' stroke-linecap='round' stroke-miterlimit='10' stroke-width='2' d='M4 7h22M4 15h22M4 23h22'/%3e%3c/svg%3e\")}.navbar-light .navbar-text{color:rgba(0,0,0,.5)}.navbar-light .navbar-text a{color:rgba(0,0,0,.9)}.navbar-light .navbar-text a:focus,.navbar-light .navbar-text a:hover{color:rgba(0,0,0,.9)}.navbar-dark .navbar-brand{color:#fff}.navbar-dark .navbar-brand:focus,.navbar-dark .navbar-brand:hover{color:#fff}.navbar-dark .navbar-nav .nav-link{color:rgba(255,255,255,.5)}.navbar-dark .navbar-nav .nav-link:focus,.navbar-dark .navbar-nav .nav-link:hover{color:rgba(255,255,255,.75)}.navbar-dark .navbar-nav .nav-link.disabled{color:rgba(255,255,255,.25)}.navbar-dark .navbar-nav .active>.nav-link,.navbar-dark .navbar-nav .nav-link.active,.navbar-dark .navbar-nav .nav-link.show,.navbar-dark .navbar-nav .show>.nav-link{color:#fff}.navbar-dark .navbar-toggler{color:rgba(255,255,255,.5);border-color:rgba(255,255,255,.1)}.navbar-dark .navbar-toggler-icon{background-image:url(\"data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' width='30' height='30' viewBox='0 0 30 30'%3e%3cpath stroke='rgba%28255, 255, 255, 0.5%29' stroke-linecap='round' stroke-miterlimit='10' stroke-width='2' d='M4 7h22M4 15h22M4 23h22'/%3e%3c/svg%3e\")}.navbar-dark .navbar-text{color:rgba(255,255,255,.5)}.navbar-dark .navbar-text a{color:#fff}.navbar-dark .navbar-text a:focus,.navbar-dark .navbar-text a:hover{color:#fff}.card{position:relative;display:-ms-flexbox;display:flex;-ms-flex-direction:column;flex-direction:column;min-width:0;word-wrap:break-word;background-color:#fff;background-clip:border-box;border:1px solid rgba(0,0,0,.125);border-radius:.25rem}.card>hr{margin-right:0;margin-left:0}.card>.list-group{border-top:inherit;border-bottom:inherit}.card>.list-group:first-child{border-top-width:0;border-top-left-radius:calc(.25rem - 1px);border-top-right-radius:calc(.25rem - 1px)}.card>.list-group:last-child{border-bottom-width:0;border-bottom-right-radius:calc(.25rem - 1px);border-bottom-left-radius:calc(.25rem - 1px)}.card>.card-header+.list-group,.card>.list-group+.card-footer{border-top:0}.card-body{-ms-flex:1 1 auto;flex:1 1 auto;min-height:1px;padding:1.25rem}.card-title{margin-bottom:.75rem}.card-subtitle{margin-top:-.375rem;margin-bottom:0}.card-text:last-child{margin-bottom:0}.card-link:hover{text-decoration:none}.card-link+.card-link{margin-left:1.25rem}.card-header{padding:.75rem 1.25rem;margin-bottom:0;background-color:rgba(0,0,0,.03);border-bottom:1px solid rgba(0,0,0,.125)}.card-header:first-child{border-radius:calc(.25rem - 1px) calc(.25rem - 1px) 0 0}.card-footer{padding:.75rem 1.25rem;background-color:rgba(0,0,0,.03);border-top:1px solid rgba(0,0,0,.125)}.card-footer:last-child{border-radius:0 0 calc(.25rem - 1px) calc(.25rem - 1px)}.card-header-tabs{margin-right:-.625rem;margin-bottom:-.75rem;margin-left:-.625rem;border-bottom:0}.card-header-pills{margin-right:-.625rem;margin-left:-.625rem}.card-img-overlay{position:absolute;top:0;right:0;bottom:0;left:0;padding:1.25rem;border-radius:calc(.25rem - 1px)}.card-img,.card-img-bottom,.card-img-top{-ms-flex-negative:0;flex-shrink:0;width:100%}.card-img,.card-img-top{border-top-left-radius:calc(.25rem - 1px);border-top-right-radius:calc(.25rem - 1px)}.card-img,.card-img-bottom{border-bottom-right-radius:calc(.25rem - 1px);border-bottom-left-radius:calc(.25rem - 1px)}.card-deck .card{margin-bottom:15px}@media (min-width:576px){.card-deck{display:-ms-flexbox;display:flex;-ms-flex-flow:row wrap;flex-flow:row wrap;margin-right:-15px;margin-left:-15px}.card-deck .card{-ms-flex:1 0 0%;flex:1 0 0%;margin-right:15px;margin-bottom:0;margin-left:15px}}.card-group>.card{margin-bottom:15px}@media (min-width:576px){.card-group{display:-ms-flexbox;display:flex;-ms-flex-flow:row wrap;flex-flow:row wrap}.card-group>.card{-ms-flex:1 0 0%;flex:1 0 0%;margin-bottom:0}.card-group>.card+.card{margin-left:0;border-left:0}.card-group>.card:not(:last-child){border-top-right-radius:0;border-bottom-right-radius:0}.card-group>.card:not(:last-child) .card-header,.card-group>.card:not(:last-child) .card-img-top{border-top-right-radius:0}.card-group>.card:not(:last-child) .card-footer,.card-group>.card:not(:last-child) .card-img-bottom{border-bottom-right-radius:0}.card-group>.card:not(:first-child){border-top-left-radius:0;border-bottom-left-radius:0}.card-group>.card:not(:first-child) .card-header,.card-group>.card:not(:first-child) .card-img-top{border-top-left-radius:0}.card-group>.card:not(:first-child) .card-footer,.card-group>.card:not(:first-child) .card-img-bottom{border-bottom-left-radius:0}}.card-columns .card{margin-bottom:.75rem}@media (min-width:576px){.card-columns{-webkit-column-count:3;-moz-column-count:3;column-count:3;-webkit-column-gap:1.25rem;-moz-column-gap:1.25rem;column-gap:1.25rem;orphans:1;widows:1}.card-columns .card{display:inline-block;width:100%}}.accordion{overflow-anchor:none}.accordion>.card{overflow:hidden}.accordion>.card:not(:last-of-type){border-bottom:0;border-bottom-right-radius:0;border-bottom-left-radius:0}.accordion>.card:not(:first-of-type){border-top-left-radius:0;border-top-right-radius:0}.accordion>.card>.card-header{border-radius:0;margin-bottom:-1px}.breadcrumb{display:-ms-flexbox;display:flex;-ms-flex-wrap:wrap;flex-wrap:wrap;padding:.75rem 1rem;margin-bottom:1rem;list-style:none;background-color:#e9ecef;border-radius:.25rem}.breadcrumb-item{display:-ms-flexbox;display:flex}.breadcrumb-item+.breadcrumb-item{padding-left:.5rem}.breadcrumb-item+.breadcrumb-item::before{display:inline-block;padding-right:.5rem;color:#6c757d;content:\"/\"}.breadcrumb-item+.breadcrumb-item:hover::before{text-decoration:underline}.breadcrumb-item+.breadcrumb-item:hover::before{text-decoration:none}.breadcrumb-item.active{color:#6c757d}.pagination{display:-ms-flexbox;display:flex;padding-left:0;list-style:none;border-radius:.25rem}.page-link{position:relative;display:block;padding:.5rem .75rem;margin-left:-1px;line-height:1.25;color:#007bff;background-color:#fff;border:1px solid #dee2e6}.page-link:hover{z-index:2;color:#0056b3;text-decoration:none;background-color:#e9ecef;border-color:#dee2e6}.page-link:focus{z-index:3;outline:0;box-shadow:0 0 0 .2rem rgba(0,123,255,.25)}.page-item:first-child .page-link{margin-left:0;border-top-left-radius:.25rem;border-bottom-left-radius:.25rem}.page-item:last-child .page-link{border-top-right-radius:.25rem;border-bottom-right-radius:.25rem}.page-item.active .page-link{z-index:3;color:#fff;background-color:#007bff;border-color:#007bff}.page-item.disabled .page-link{color:#6c757d;pointer-events:none;cursor:auto;background-color:#fff;border-color:#dee2e6}.pagination-lg .page-link{padding:.75rem 1.5rem;font-size:1.25rem;line-height:1.5}.pagination-lg .page-item:first-child .page-link{border-top-left-radius:.3rem;border-bottom-left-radius:.3rem}.pagination-lg .page-item:last-child .page-link{border-top-right-radius:.3rem;border-bottom-right-radius:.3rem}.pagination-sm .page-link{padding:.25rem .5rem;font-size:.875rem;line-height:1.5}.pagination-sm .page-item:first-child .page-link{border-top-left-radius:.2rem;border-bottom-left-radius:.2rem}.pagination-sm .page-item:last-child .page-link{border-top-right-radius:.2rem;border-bottom-right-radius:.2rem}.badge{display:inline-block;padding:.25em .4em;font-size:75%;font-weight:700;line-height:1;text-align:center;white-space:nowrap;vertical-align:baseline;border-radius:.25rem;transition:color .15s ease-in-out,background-color .15s ease-in-out,border-color .15s ease-in-out,box-shadow .15s ease-in-out}@media (prefers-reduced-motion:reduce){.badge{transition:none}}a.badge:focus,a.badge:hover{text-decoration:none}.badge:empty{display:none}.btn .badge{position:relative;top:-1px}.badge-pill{padding-right:.6em;padding-left:.6em;border-radius:10rem}.badge-primary{color:#fff;background-color:#007bff}a.badge-primary:focus,a.badge-primary:hover{color:#fff;background-color:#0062cc}a.badge-primary.focus,a.badge-primary:focus{outline:0;box-shadow:0 0 0 .2rem rgba(0,123,255,.5)}.badge-secondary{color:#fff;background-color:#6c757d}a.badge-secondary:focus,a.badge-secondary:hover{color:#fff;background-color:#545b62}a.badge-secondary.focus,a.badge-secondary:focus{outline:0;box-shadow:0 0 0 .2rem rgba(108,117,125,.5)}.badge-success{color:#fff;background-color:#28a745}a.badge-success:focus,a.badge-success:hover{color:#fff;background-color:#1e7e34}a.badge-success.focus,a.badge-success:focus{outline:0;box-shadow:0 0 0 .2rem rgba(40,167,69,.5)}.badge-info{color:#fff;background-color:#17a2b8}a.badge-info:focus,a.badge-info:hover{color:#fff;background-color:#117a8b}a.badge-info.focus,a.badge-info:focus{outline:0;box-shadow:0 0 0 .2rem rgba(23,162,184,.5)}.badge-warning{color:#212529;background-color:#ffc107}a.badge-warning:focus,a.badge-warning:hover{color:#212529;background-color:#d39e00}a.badge-warning.focus,a.badge-warning:focus{outline:0;box-shadow:0 0 0 .2rem rgba(255,193,7,.5)}.badge-danger{color:#fff;background-color:#dc3545}a.badge-danger:focus,a.badge-danger:hover{color:#fff;background-color:#bd2130}a.badge-danger.focus,a.badge-danger:focus{outline:0;box-shadow:0 0 0 .2rem rgba(220,53,69,.5)}.badge-light{color:#212529;background-color:#f8f9fa}a.badge-light:focus,a.badge-light:hover{color:#212529;background-color:#dae0e5}a.badge-light.focus,a.badge-light:focus{outline:0;box-shadow:0 0 0 .2rem rgba(248,249,250,.5)}.badge-dark{color:#fff;background-color:#343a40}a.badge-dark:focus,a.badge-dark:hover{color:#fff;background-color:#1d2124}a.badge-dark.focus,a.badge-dark:focus{outline:0;box-shadow:0 0 0 .2rem rgba(52,58,64,.5)}.jumbotron{padding:2rem 1rem;margin-bottom:2rem;background-color:#e9ecef;border-radius:.3rem}@media (min-width:576px){.jumbotron{padding:4rem 2rem}}.jumbotron-fluid{padding-right:0;padding-left:0;border-radius:0}.alert{position:relative;padding:.75rem 1.25rem;margin-bottom:1rem;border:1px solid transparent;border-radius:.25rem}.alert-heading{color:inherit}.alert-link{font-weight:700}.alert-dismissible{padding-right:4rem}.alert-dismissible .close{position:absolute;top:0;right:0;z-index:2;padding:.75rem 1.25rem;color:inherit}.alert-primary{color:#004085;background-color:#cce5ff;border-color:#b8daff}.alert-primary hr{border-top-color:#9fcdff}.alert-primary .alert-link{color:#002752}.alert-secondary{color:#383d41;background-color:#e2e3e5;border-color:#d6d8db}.alert-secondary hr{border-top-color:#c8cbcf}.alert-secondary .alert-link{color:#202326}.alert-success{color:#155724;background-color:#d4edda;border-color:#c3e6cb}.alert-success hr{border-top-color:#b1dfbb}.alert-success .alert-link{color:#0b2e13}.alert-info{color:#0c5460;background-color:#d1ecf1;border-color:#bee5eb}.alert-info hr{border-top-color:#abdde5}.alert-info .alert-link{color:#062c33}.alert-warning{color:#856404;background-color:#fff3cd;border-color:#ffeeba}.alert-warning hr{border-top-color:#ffe8a1}.alert-warning .alert-link{color:#533f03}.alert-danger{color:#721c24;background-color:#f8d7da;border-color:#f5c6cb}.alert-danger hr{border-top-color:#f1b0b7}.alert-danger .alert-link{color:#491217}.alert-light{color:#818182;background-color:#fefefe;border-color:#fdfdfe}.alert-light hr{border-top-color:#ececf6}.alert-light .alert-link{color:#686868}.alert-dark{color:#1b1e21;background-color:#d6d8d9;border-color:#c6c8ca}.alert-dark hr{border-top-color:#b9bbbe}.alert-dark .alert-link{color:#040505}@-webkit-keyframes progress-bar-stripes{from{background-position:1rem 0}to{background-position:0 0}}@keyframes progress-bar-stripes{from{background-position:1rem 0}to{background-position:0 0}}.progress{display:-ms-flexbox;display:flex;height:1rem;overflow:hidden;line-height:0;font-size:.75rem;background-color:#e9ecef;border-radius:.25rem}.progress-bar{display:-ms-flexbox;display:flex;-ms-flex-direction:column;flex-direction:column;-ms-flex-pack:center;justify-content:center;overflow:hidden;color:#fff;text-align:center;white-space:nowrap;background-color:#007bff;transition:width .6s ease}@media (prefers-reduced-motion:reduce){.progress-bar{transition:none}}.progress-bar-striped{background-image:linear-gradient(45deg,rgba(255,255,255,.15) 25%,transparent 25%,transparent 50%,rgba(255,255,255,.15) 50%,rgba(255,255,255,.15) 75%,transparent 75%,transparent);background-size:1rem 1rem}.progress-bar-animated{-webkit-animation:progress-bar-stripes 1s linear infinite;animation:progress-bar-stripes 1s linear infinite}@media (prefers-reduced-motion:reduce){.progress-bar-animated{-webkit-animation:none;animation:none}}.media{display:-ms-flexbox;display:flex;-ms-flex-align:start;align-items:flex-start}.media-body{-ms-flex:1;flex:1}.list-group{display:-ms-flexbox;display:flex;-ms-flex-direction:column;flex-direction:column;padding-left:0;margin-bottom:0;border-radius:.25rem}.list-group-item-action{width:100%;color:#495057;text-align:inherit}.list-group-item-action:focus,.list-group-item-action:hover{z-index:1;color:#495057;text-decoration:none;background-color:#f8f9fa}.list-group-item-action:active{color:#212529;background-color:#e9ecef}.list-group-item{position:relative;display:block;padding:.75rem 1.25rem;background-color:#fff;border:1px solid rgba(0,0,0,.125)}.list-group-item:first-child{border-top-left-radius:inherit;border-top-right-radius:inherit}.list-group-item:last-child{border-bottom-right-radius:inherit;border-bottom-left-radius:inherit}.list-group-item.disabled,.list-group-item:disabled{color:#6c757d;pointer-events:none;background-color:#fff}.list-group-item.active{z-index:2;color:#fff;background-color:#007bff;border-color:#007bff}.list-group-item+.list-group-item{border-top-width:0}.list-group-item+.list-group-item.active{margin-top:-1px;border-top-width:1px}.list-group-horizontal{-ms-flex-direction:row;flex-direction:row}.list-group-horizontal>.list-group-item:first-child{border-bottom-left-radius:.25rem;border-top-right-radius:0}.list-group-horizontal>.list-group-item:last-child{border-top-right-radius:.25rem;border-bottom-left-radius:0}.list-group-horizontal>.list-group-item.active{margin-top:0}.list-group-horizontal>.list-group-item+.list-group-item{border-top-width:1px;border-left-width:0}.list-group-horizontal>.list-group-item+.list-group-item.active{margin-left:-1px;border-left-width:1px}@media (min-width:576px){.list-group-horizontal-sm{-ms-flex-direction:row;flex-direction:row}.list-group-horizontal-sm>.list-group-item:first-child{border-bottom-left-radius:.25rem;border-top-right-radius:0}.list-group-horizontal-sm>.list-group-item:last-child{border-top-right-radius:.25rem;border-bottom-left-radius:0}.list-group-horizontal-sm>.list-group-item.active{margin-top:0}.list-group-horizontal-sm>.list-group-item+.list-group-item{border-top-width:1px;border-left-width:0}.list-group-horizontal-sm>.list-group-item+.list-group-item.active{margin-left:-1px;border-left-width:1px}}@media (min-width:768px){.list-group-horizontal-md{-ms-flex-direction:row;flex-direction:row}.list-group-horizontal-md>.list-group-item:first-child{border-bottom-left-radius:.25rem;border-top-right-radius:0}.list-group-horizontal-md>.list-group-item:last-child{border-top-right-radius:.25rem;border-bottom-left-radius:0}.list-group-horizontal-md>.list-group-item.active{margin-top:0}.list-group-horizontal-md>.list-group-item+.list-group-item{border-top-width:1px;border-left-width:0}.list-group-horizontal-md>.list-group-item+.list-group-item.active{margin-left:-1px;border-left-width:1px}}@media (min-width:992px){.list-group-horizontal-lg{-ms-flex-direction:row;flex-direction:row}.list-group-horizontal-lg>.list-group-item:first-child{border-bottom-left-radius:.25rem;border-top-right-radius:0}.list-group-horizontal-lg>.list-group-item:last-child{border-top-right-radius:.25rem;border-bottom-left-radius:0}.list-group-horizontal-lg>.list-group-item.active{margin-top:0}.list-group-horizontal-lg>.list-group-item+.list-group-item{border-top-width:1px;border-left-width:0}.list-group-horizontal-lg>.list-group-item+.list-group-item.active{margin-left:-1px;border-left-width:1px}}@media (min-width:1200px){.list-group-horizontal-xl{-ms-flex-direction:row;flex-direction:row}.list-group-horizontal-xl>.list-group-item:first-child{border-bottom-left-radius:.25rem;border-top-right-radius:0}.list-group-horizontal-xl>.list-group-item:last-child{border-top-right-radius:.25rem;border-bottom-left-radius:0}.list-group-horizontal-xl>.list-group-item.active{margin-top:0}.list-group-horizontal-xl>.list-group-item+.list-group-item{border-top-width:1px;border-left-width:0}.list-group-horizontal-xl>.list-group-item+.list-group-item.active{margin-left:-1px;border-left-width:1px}}.list-group-flush{border-radius:0}.list-group-flush>.list-group-item{border-width:0 0 1px}.list-group-flush>.list-group-item:last-child{border-bottom-width:0}.list-group-item-primary{color:#004085;background-color:#b8daff}.list-group-item-primary.list-group-item-action:focus,.list-group-item-primary.list-group-item-action:hover{color:#004085;background-color:#9fcdff}.list-group-item-primary.list-group-item-action.active{color:#fff;background-color:#004085;border-color:#004085}.list-group-item-secondary{color:#383d41;background-color:#d6d8db}.list-group-item-secondary.list-group-item-action:focus,.list-group-item-secondary.list-group-item-action:hover{color:#383d41;background-color:#c8cbcf}.list-group-item-secondary.list-group-item-action.active{color:#fff;background-color:#383d41;border-color:#383d41}.list-group-item-success{color:#155724;background-color:#c3e6cb}.list-group-item-success.list-group-item-action:focus,.list-group-item-success.list-group-item-action:hover{color:#155724;background-color:#b1dfbb}.list-group-item-success.list-group-item-action.active{color:#fff;background-color:#155724;border-color:#155724}.list-group-item-info{color:#0c5460;background-color:#bee5eb}.list-group-item-info.list-group-item-action:focus,.list-group-item-info.list-group-item-action:hover{color:#0c5460;background-color:#abdde5}.list-group-item-info.list-group-item-action.active{color:#fff;background-color:#0c5460;border-color:#0c5460}.list-group-item-warning{color:#856404;background-color:#ffeeba}.list-group-item-warning.list-group-item-action:focus,.list-group-item-warning.list-group-item-action:hover{color:#856404;background-color:#ffe8a1}.list-group-item-warning.list-group-item-action.active{color:#fff;background-color:#856404;border-color:#856404}.list-group-item-danger{color:#721c24;background-color:#f5c6cb}.list-group-item-danger.list-group-item-action:focus,.list-group-item-danger.list-group-item-action:hover{color:#721c24;background-color:#f1b0b7}.list-group-item-danger.list-group-item-action.active{color:#fff;background-color:#721c24;border-color:#721c24}.list-group-item-light{color:#818182;background-color:#fdfdfe}.list-group-item-light.list-group-item-action:focus,.list-group-item-light.list-group-item-action:hover{color:#818182;background-color:#ececf6}.list-group-item-light.list-group-item-action.active{color:#fff;background-color:#818182;border-color:#818182}.list-group-item-dark{color:#1b1e21;background-color:#c6c8ca}.list-group-item-dark.list-group-item-action:focus,.list-group-item-dark.list-group-item-action:hover{color:#1b1e21;background-color:#b9bbbe}.list-group-item-dark.list-group-item-action.active{color:#fff;background-color:#1b1e21;border-color:#1b1e21}.close{float:right;font-size:1.5rem;font-weight:700;line-height:1;color:#000;text-shadow:0 1px 0 #fff;opacity:.5}.close:hover{color:#000;text-decoration:none}.close:not(:disabled):not(.disabled):focus,.close:not(:disabled):not(.disabled):hover{opacity:.75}button.close{padding:0;background-color:transparent;border:0}a.close.disabled{pointer-events:none}.toast{-ms-flex-preferred-size:350px;flex-basis:350px;max-width:350px;font-size:.875rem;background-color:rgba(255,255,255,.85);background-clip:padding-box;border:1px solid rgba(0,0,0,.1);box-shadow:0 .25rem .75rem rgba(0,0,0,.1);opacity:0;border-radius:.25rem}.toast:not(:last-child){margin-bottom:.75rem}.toast.showing{opacity:1}.toast.show{display:block;opacity:1}.toast.hide{display:none}.toast-header{display:-ms-flexbox;display:flex;-ms-flex-align:center;align-items:center;padding:.25rem .75rem;color:#6c757d;background-color:rgba(255,255,255,.85);background-clip:padding-box;border-bottom:1px solid rgba(0,0,0,.05);border-top-left-radius:calc(.25rem - 1px);border-top-right-radius:calc(.25rem - 1px)}.toast-body{padding:.75rem}.modal-open{overflow:hidden}.modal-open .modal{overflow-x:hidden;overflow-y:auto}.modal{position:fixed;top:0;left:0;z-index:1050;display:none;width:100%;height:100%;overflow:hidden;outline:0}.modal-dialog{position:relative;width:auto;margin:.5rem;pointer-events:none}.modal.fade .modal-dialog{transition:-webkit-transform .3s ease-out;transition:transform .3s ease-out;transition:transform .3s ease-out,-webkit-transform .3s ease-out;-webkit-transform:translate(0,-50px);transform:translate(0,-50px)}@media (prefers-reduced-motion:reduce){.modal.fade .modal-dialog{transition:none}}.modal.show .modal-dialog{-webkit-transform:none;transform:none}.modal.modal-static .modal-dialog{-webkit-transform:scale(1.02);transform:scale(1.02)}.modal-dialog-scrollable{display:-ms-flexbox;display:flex;max-height:calc(100% - 1rem)}.modal-dialog-scrollable .modal-content{max-height:calc(100vh - 1rem);overflow:hidden}.modal-dialog-scrollable .modal-footer,.modal-dialog-scrollable .modal-header{-ms-flex-negative:0;flex-shrink:0}.modal-dialog-scrollable .modal-body{overflow-y:auto}.modal-dialog-centered{display:-ms-flexbox;display:flex;-ms-flex-align:center;align-items:center;min-height:calc(100% - 1rem)}.modal-dialog-centered::before{display:block;height:calc(100vh - 1rem);height:-webkit-min-content;height:-moz-min-content;height:min-content;content:\"\"}.modal-dialog-centered.modal-dialog-scrollable{-ms-flex-direction:column;flex-direction:column;-ms-flex-pack:center;justify-content:center;height:100%}.modal-dialog-centered.modal-dialog-scrollable .modal-content{max-height:none}.modal-dialog-centered.modal-dialog-scrollable::before{content:none}.modal-content{position:relative;display:-ms-flexbox;display:flex;-ms-flex-direction:column;flex-direction:column;width:100%;pointer-events:auto;background-color:#fff;background-clip:padding-box;border:1px solid rgba(0,0,0,.2);border-radius:.3rem;outline:0}.modal-backdrop{position:fixed;top:0;left:0;z-index:1040;width:100vw;height:100vh;background-color:#000}.modal-backdrop.fade{opacity:0}.modal-backdrop.show{opacity:.5}.modal-header{display:-ms-flexbox;display:flex;-ms-flex-align:start;align-items:flex-start;-ms-flex-pack:justify;justify-content:space-between;padding:1rem 1rem;border-bottom:1px solid #dee2e6;border-top-left-radius:calc(.3rem - 1px);border-top-right-radius:calc(.3rem - 1px)}.modal-header .close{padding:1rem 1rem;margin:-1rem -1rem -1rem auto}.modal-title{margin-bottom:0;line-height:1.5}.modal-body{position:relative;-ms-flex:1 1 auto;flex:1 1 auto;padding:1rem}.modal-footer{display:-ms-flexbox;display:flex;-ms-flex-wrap:wrap;flex-wrap:wrap;-ms-flex-align:center;align-items:center;-ms-flex-pack:end;justify-content:flex-end;padding:.75rem;border-top:1px solid #dee2e6;border-bottom-right-radius:calc(.3rem - 1px);border-bottom-left-radius:calc(.3rem - 1px)}.modal-footer>*{margin:.25rem}.modal-scrollbar-measure{position:absolute;top:-9999px;width:50px;height:50px;overflow:scroll}@media (min-width:576px){.modal-dialog{max-width:500px;margin:1.75rem auto}.modal-dialog-scrollable{max-height:calc(100% - 3.5rem)}.modal-dialog-scrollable .modal-content{max-height:calc(100vh - 3.5rem)}.modal-dialog-centered{min-height:calc(100% - 3.5rem)}.modal-dialog-centered::before{height:calc(100vh - 3.5rem);height:-webkit-min-content;height:-moz-min-content;height:min-content}.modal-sm{max-width:300px}}@media (min-width:992px){.modal-lg,.modal-xl{max-width:800px}}@media (min-width:1200px){.modal-xl{max-width:1140px}}.tooltip{position:absolute;z-index:1070;display:block;margin:0;font-family:-apple-system,BlinkMacSystemFont,\"Segoe UI\",Roboto,\"Helvetica Neue\",Arial,\"Noto Sans\",sans-serif,\"Apple Color Emoji\",\"Segoe UI Emoji\",\"Segoe UI Symbol\",\"Noto Color Emoji\";font-style:normal;font-weight:400;line-height:1.5;text-align:left;text-align:start;text-decoration:none;text-shadow:none;text-transform:none;letter-spacing:normal;word-break:normal;word-spacing:normal;white-space:normal;line-break:auto;font-size:.875rem;word-wrap:break-word;opacity:0}.tooltip.show{opacity:.9}.tooltip .arrow{position:absolute;display:block;width:.8rem;height:.4rem}.tooltip .arrow::before{position:absolute;content:\"\";border-color:transparent;border-style:solid}.bs-tooltip-auto[x-placement^=top],.bs-tooltip-top{padding:.4rem 0}.bs-tooltip-auto[x-placement^=top] .arrow,.bs-tooltip-top .arrow{bottom:0}.bs-tooltip-auto[x-placement^=top] .arrow::before,.bs-tooltip-top .arrow::before{top:0;border-width:.4rem .4rem 0;border-top-color:#000}.bs-tooltip-auto[x-placement^=right],.bs-tooltip-right{padding:0 .4rem}.bs-tooltip-auto[x-placement^=right] .arrow,.bs-tooltip-right .arrow{left:0;width:.4rem;height:.8rem}.bs-tooltip-auto[x-placement^=right] .arrow::before,.bs-tooltip-right .arrow::before{right:0;border-width:.4rem .4rem .4rem 0;border-right-color:#000}.bs-tooltip-auto[x-placement^=bottom],.bs-tooltip-bottom{padding:.4rem 0}.bs-tooltip-auto[x-placement^=bottom] .arrow,.bs-tooltip-bottom .arrow{top:0}.bs-tooltip-auto[x-placement^=bottom] .arrow::before,.bs-tooltip-bottom .arrow::before{bottom:0;border-width:0 .4rem .4rem;border-bottom-color:#000}.bs-tooltip-auto[x-placement^=left],.bs-tooltip-left{padding:0 .4rem}.bs-tooltip-auto[x-placement^=left] .arrow,.bs-tooltip-left .arrow{right:0;width:.4rem;height:.8rem}.bs-tooltip-auto[x-placement^=left] .arrow::before,.bs-tooltip-left .arrow::before{left:0;border-width:.4rem 0 .4rem .4rem;border-left-color:#000}.tooltip-inner{max-width:200px;padding:.25rem .5rem;color:#fff;text-align:center;background-color:#000;border-radius:.25rem}.popover{position:absolute;top:0;left:0;z-index:1060;display:block;max-width:276px;font-family:-apple-system,BlinkMacSystemFont,\"Segoe UI\",Roboto,\"Helvetica Neue\",Arial,\"Noto Sans\",sans-serif,\"Apple Color Emoji\",\"Segoe UI Emoji\",\"Segoe UI Symbol\",\"Noto Color Emoji\";font-style:normal;font-weight:400;line-height:1.5;text-align:left;text-align:start;text-decoration:none;text-shadow:none;text-transform:none;letter-spacing:normal;word-break:normal;word-spacing:normal;white-space:normal;line-break:auto;font-size:.875rem;word-wrap:break-word;background-color:#fff;background-clip:padding-box;border:1px solid rgba(0,0,0,.2);border-radius:.3rem}.popover .arrow{position:absolute;display:block;width:1rem;height:.5rem;margin:0 .3rem}.popover .arrow::after,.popover .arrow::before{position:absolute;display:block;content:\"\";border-color:transparent;border-style:solid}.bs-popover-auto[x-placement^=top],.bs-popover-top{margin-bottom:.5rem}.bs-popover-auto[x-placement^=top]>.arrow,.bs-popover-top>.arrow{bottom:calc(-.5rem - 1px)}.bs-popover-auto[x-placement^=top]>.arrow::before,.bs-popover-top>.arrow::before{bottom:0;border-width:.5rem .5rem 0;border-top-color:rgba(0,0,0,.25)}.bs-popover-auto[x-placement^=top]>.arrow::after,.bs-popover-top>.arrow::after{bottom:1px;border-width:.5rem .5rem 0;border-top-color:#fff}.bs-popover-auto[x-placement^=right],.bs-popover-right{margin-left:.5rem}.bs-popover-auto[x-placement^=right]>.arrow,.bs-popover-right>.arrow{left:calc(-.5rem - 1px);width:.5rem;height:1rem;margin:.3rem 0}.bs-popover-auto[x-placement^=right]>.arrow::before,.bs-popover-right>.arrow::before{left:0;border-width:.5rem .5rem .5rem 0;border-right-color:rgba(0,0,0,.25)}.bs-popover-auto[x-placement^=right]>.arrow::after,.bs-popover-right>.arrow::after{left:1px;border-width:.5rem .5rem .5rem 0;border-right-color:#fff}.bs-popover-auto[x-placement^=bottom],.bs-popover-bottom{margin-top:.5rem}.bs-popover-auto[x-placement^=bottom]>.arrow,.bs-popover-bottom>.arrow{top:calc(-.5rem - 1px)}.bs-popover-auto[x-placement^=bottom]>.arrow::before,.bs-popover-bottom>.arrow::before{top:0;border-width:0 .5rem .5rem .5rem;border-bottom-color:rgba(0,0,0,.25)}.bs-popover-auto[x-placement^=bottom]>.arrow::after,.bs-popover-bottom>.arrow::after{top:1px;border-width:0 .5rem .5rem .5rem;border-bottom-color:#fff}.bs-popover-auto[x-placement^=bottom] .popover-header::before,.bs-popover-bottom .popover-header::before{position:absolute;top:0;left:50%;display:block;width:1rem;margin-left:-.5rem;content:\"\";border-bottom:1px solid #f7f7f7}.bs-popover-auto[x-placement^=left],.bs-popover-left{margin-right:.5rem}.bs-popover-auto[x-placement^=left]>.arrow,.bs-popover-left>.arrow{right:calc(-.5rem - 1px);width:.5rem;height:1rem;margin:.3rem 0}.bs-popover-auto[x-placement^=left]>.arrow::before,.bs-popover-left>.arrow::before{right:0;border-width:.5rem 0 .5rem .5rem;border-left-color:rgba(0,0,0,.25)}.bs-popover-auto[x-placement^=left]>.arrow::after,.bs-popover-left>.arrow::after{right:1px;border-width:.5rem 0 .5rem .5rem;border-left-color:#fff}.popover-header{padding:.5rem .75rem;margin-bottom:0;font-size:1rem;background-color:#f7f7f7;border-bottom:1px solid #ebebeb;border-top-left-radius:calc(.3rem - 1px);border-top-right-radius:calc(.3rem - 1px)}.popover-header:empty{display:none}.popover-body{padding:.5rem .75rem;color:#212529}.carousel{position:relative}.carousel.pointer-event{-ms-touch-action:pan-y;touch-action:pan-y}.carousel-inner{position:relative;width:100%;overflow:hidden}.carousel-inner::after{display:block;clear:both;content:\"\"}.carousel-item{position:relative;display:none;float:left;width:100%;margin-right:-100%;-webkit-backface-visibility:hidden;backface-visibility:hidden;transition:-webkit-transform .6s ease-in-out;transition:transform .6s ease-in-out;transition:transform .6s ease-in-out,-webkit-transform .6s ease-in-out}@media (prefers-reduced-motion:reduce){.carousel-item{transition:none}}.carousel-item-next,.carousel-item-prev,.carousel-item.active{display:block}.active.carousel-item-right,.carousel-item-next:not(.carousel-item-left){-webkit-transform:translateX(100%);transform:translateX(100%)}.active.carousel-item-left,.carousel-item-prev:not(.carousel-item-right){-webkit-transform:translateX(-100%);transform:translateX(-100%)}.carousel-fade .carousel-item{opacity:0;transition-property:opacity;-webkit-transform:none;transform:none}.carousel-fade .carousel-item-next.carousel-item-left,.carousel-fade .carousel-item-prev.carousel-item-right,.carousel-fade .carousel-item.active{z-index:1;opacity:1}.carousel-fade .active.carousel-item-left,.carousel-fade .active.carousel-item-right{z-index:0;opacity:0;transition:opacity 0s .6s}@media (prefers-reduced-motion:reduce){.carousel-fade .active.carousel-item-left,.carousel-fade .active.carousel-item-right{transition:none}}.carousel-control-next,.carousel-control-prev{position:absolute;top:0;bottom:0;z-index:1;display:-ms-flexbox;display:flex;-ms-flex-align:center;align-items:center;-ms-flex-pack:center;justify-content:center;width:15%;color:#fff;text-align:center;opacity:.5;transition:opacity .15s ease}@media (prefers-reduced-motion:reduce){.carousel-control-next,.carousel-control-prev{transition:none}}.carousel-control-next:focus,.carousel-control-next:hover,.carousel-control-prev:focus,.carousel-control-prev:hover{color:#fff;text-decoration:none;outline:0;opacity:.9}.carousel-control-prev{left:0}.carousel-control-next{right:0}.carousel-control-next-icon,.carousel-control-prev-icon{display:inline-block;width:20px;height:20px;background:no-repeat 50%/100% 100%}.carousel-control-prev-icon{background-image:url(\"data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' fill='%23fff' width='8' height='8' viewBox='0 0 8 8'%3e%3cpath d='M5.25 0l-4 4 4 4 1.5-1.5L4.25 4l2.5-2.5L5.25 0z'/%3e%3c/svg%3e\")}.carousel-control-next-icon{background-image:url(\"data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' fill='%23fff' width='8' height='8' viewBox='0 0 8 8'%3e%3cpath d='M2.75 0l-1.5 1.5L3.75 4l-2.5 2.5L2.75 8l4-4-4-4z'/%3e%3c/svg%3e\")}.carousel-indicators{position:absolute;right:0;bottom:0;left:0;z-index:15;display:-ms-flexbox;display:flex;-ms-flex-pack:center;justify-content:center;padding-left:0;margin-right:15%;margin-left:15%;list-style:none}.carousel-indicators li{box-sizing:content-box;-ms-flex:0 1 auto;flex:0 1 auto;width:30px;height:3px;margin-right:3px;margin-left:3px;text-indent:-999px;cursor:pointer;background-color:#fff;background-clip:padding-box;border-top:10px solid transparent;border-bottom:10px solid transparent;opacity:.5;transition:opacity .6s ease}@media (prefers-reduced-motion:reduce){.carousel-indicators li{transition:none}}.carousel-indicators .active{opacity:1}.carousel-caption{position:absolute;right:15%;bottom:20px;left:15%;z-index:10;padding-top:20px;padding-bottom:20px;color:#fff;text-align:center}@-webkit-keyframes spinner-border{to{-webkit-transform:rotate(360deg);transform:rotate(360deg)}}@keyframes spinner-border{to{-webkit-transform:rotate(360deg);transform:rotate(360deg)}}.spinner-border{display:inline-block;width:2rem;height:2rem;vertical-align:text-bottom;border:.25em solid currentColor;border-right-color:transparent;border-radius:50%;-webkit-animation:spinner-border .75s linear infinite;animation:spinner-border .75s linear infinite}.spinner-border-sm{width:1rem;height:1rem;border-width:.2em}@-webkit-keyframes spinner-grow{0%{-webkit-transform:scale(0);transform:scale(0)}50%{opacity:1;-webkit-transform:none;transform:none}}@keyframes spinner-grow{0%{-webkit-transform:scale(0);transform:scale(0)}50%{opacity:1;-webkit-transform:none;transform:none}}.spinner-grow{display:inline-block;width:2rem;height:2rem;vertical-align:text-bottom;background-color:currentColor;border-radius:50%;opacity:0;-webkit-animation:spinner-grow .75s linear infinite;animation:spinner-grow .75s linear infinite}.spinner-grow-sm{width:1rem;height:1rem}.align-baseline{vertical-align:baseline!important}.align-top{vertical-align:top!important}.align-middle{vertical-align:middle!important}.align-bottom{vertical-align:bottom!important}.align-text-bottom{vertical-align:text-bottom!important}.align-text-top{vertical-align:text-top!important}.bg-primary{background-color:#007bff!important}a.bg-primary:focus,a.bg-primary:hover,button.bg-primary:focus,button.bg-primary:hover{background-color:#0062cc!important}.bg-secondary{background-color:#6c757d!important}a.bg-secondary:focus,a.bg-secondary:hover,button.bg-secondary:focus,button.bg-secondary:hover{background-color:#545b62!important}.bg-success{background-color:#28a745!important}a.bg-success:focus,a.bg-success:hover,button.bg-success:focus,button.bg-success:hover{background-color:#1e7e34!important}.bg-info{background-color:#17a2b8!important}a.bg-info:focus,a.bg-info:hover,button.bg-info:focus,button.bg-info:hover{background-color:#117a8b!important}.bg-warning{background-color:#ffc107!important}a.bg-warning:focus,a.bg-warning:hover,button.bg-warning:focus,button.bg-warning:hover{background-color:#d39e00!important}.bg-danger{background-color:#dc3545!important}a.bg-danger:focus,a.bg-danger:hover,button.bg-danger:focus,button.bg-danger:hover{background-color:#bd2130!important}.bg-light{background-color:#f8f9fa!important}a.bg-light:focus,a.bg-light:hover,button.bg-light:focus,button.bg-light:hover{background-color:#dae0e5!important}.bg-dark{background-color:#343a40!important}a.bg-dark:focus,a.bg-dark:hover,button.bg-dark:focus,button.bg-dark:hover{background-color:#1d2124!important}.bg-white{background-color:#fff!important}.bg-transparent{background-color:transparent!important}.border{border:1px solid #dee2e6!important}.border-top{border-top:1px solid #dee2e6!important}.border-right{border-right:1px solid #dee2e6!important}.border-bottom{border-bottom:1px solid #dee2e6!important}.border-left{border-left:1px solid #dee2e6!important}.border-0{border:0!important}.border-top-0{border-top:0!important}.border-right-0{border-right:0!important}.border-bottom-0{border-bottom:0!important}.border-left-0{border-left:0!important}.border-primary{border-color:#007bff!important}.border-secondary{border-color:#6c757d!important}.border-success{border-color:#28a745!important}.border-info{border-color:#17a2b8!important}.border-warning{border-color:#ffc107!important}.border-danger{border-color:#dc3545!important}.border-light{border-color:#f8f9fa!important}.border-dark{border-color:#343a40!important}.border-white{border-color:#fff!important}.rounded-sm{border-radius:.2rem!important}.rounded{border-radius:.25rem!important}.rounded-top{border-top-left-radius:.25rem!important;border-top-right-radius:.25rem!important}.rounded-right{border-top-right-radius:.25rem!important;border-bottom-right-radius:.25rem!important}.rounded-bottom{border-bottom-right-radius:.25rem!important;border-bottom-left-radius:.25rem!important}.rounded-left{border-top-left-radius:.25rem!important;border-bottom-left-radius:.25rem!important}.rounded-lg{border-radius:.3rem!important}.rounded-circle{border-radius:50%!important}.rounded-pill{border-radius:50rem!important}.rounded-0{border-radius:0!important}.clearfix::after{display:block;clear:both;content:\"\"}.d-none{display:none!important}.d-inline{display:inline!important}.d-inline-block{display:inline-block!important}.d-block{display:block!important}.d-table{display:table!important}.d-table-row{display:table-row!important}.d-table-cell{display:table-cell!important}.d-flex{display:-ms-flexbox!important;display:flex!important}.d-inline-flex{display:-ms-inline-flexbox!important;display:inline-flex!important}@media (min-width:576px){.d-sm-none{display:none!important}.d-sm-inline{display:inline!important}.d-sm-inline-block{display:inline-block!important}.d-sm-block{display:block!important}.d-sm-table{display:table!important}.d-sm-table-row{display:table-row!important}.d-sm-table-cell{display:table-cell!important}.d-sm-flex{display:-ms-flexbox!important;display:flex!important}.d-sm-inline-flex{display:-ms-inline-flexbox!important;display:inline-flex!important}}@media (min-width:768px){.d-md-none{display:none!important}.d-md-inline{display:inline!important}.d-md-inline-block{display:inline-block!important}.d-md-block{display:block!important}.d-md-table{display:table!important}.d-md-table-row{display:table-row!important}.d-md-table-cell{display:table-cell!important}.d-md-flex{display:-ms-flexbox!important;display:flex!important}.d-md-inline-flex{display:-ms-inline-flexbox!important;display:inline-flex!important}}@media (min-width:992px){.d-lg-none{display:none!important}.d-lg-inline{display:inline!important}.d-lg-inline-block{display:inline-block!important}.d-lg-block{display:block!important}.d-lg-table{display:table!important}.d-lg-table-row{display:table-row!important}.d-lg-table-cell{display:table-cell!important}.d-lg-flex{display:-ms-flexbox!important;display:flex!important}.d-lg-inline-flex{display:-ms-inline-flexbox!important;display:inline-flex!important}}@media (min-width:1200px){.d-xl-none{display:none!important}.d-xl-inline{display:inline!important}.d-xl-inline-block{display:inline-block!important}.d-xl-block{display:block!important}.d-xl-table{display:table!important}.d-xl-table-row{display:table-row!important}.d-xl-table-cell{display:table-cell!important}.d-xl-flex{display:-ms-flexbox!important;display:flex!important}.d-xl-inline-flex{display:-ms-inline-flexbox!important;display:inline-flex!important}}@media print{.d-print-none{display:none!important}.d-print-inline{display:inline!important}.d-print-inline-block{display:inline-block!important}.d-print-block{display:block!important}.d-print-table{display:table!important}.d-print-table-row{display:table-row!important}.d-print-table-cell{display:table-cell!important}.d-print-flex{display:-ms-flexbox!important;display:flex!important}.d-print-inline-flex{display:-ms-inline-flexbox!important;display:inline-flex!important}}.embed-responsive{position:relative;display:block;width:100%;padding:0;overflow:hidden}.embed-responsive::before{display:block;content:\"\"}.embed-responsive .embed-responsive-item,.embed-responsive embed,.embed-responsive iframe,.embed-responsive object,.embed-responsive video{position:absolute;top:0;bottom:0;left:0;width:100%;height:100%;border:0}.embed-responsive-21by9::before{padding-top:42.857143%}.embed-responsive-16by9::before{padding-top:56.25%}.embed-responsive-4by3::before{padding-top:75%}.embed-responsive-1by1::before{padding-top:100%}.flex-row{-ms-flex-direction:row!important;flex-direction:row!important}.flex-column{-ms-flex-direction:column!important;flex-direction:column!important}.flex-row-reverse{-ms-flex-direction:row-reverse!important;flex-direction:row-reverse!important}.flex-column-reverse{-ms-flex-direction:column-reverse!important;flex-direction:column-reverse!important}.flex-wrap{-ms-flex-wrap:wrap!important;flex-wrap:wrap!important}.flex-nowrap{-ms-flex-wrap:nowrap!important;flex-wrap:nowrap!important}.flex-wrap-reverse{-ms-flex-wrap:wrap-reverse!important;flex-wrap:wrap-reverse!important}.flex-fill{-ms-flex:1 1 auto!important;flex:1 1 auto!important}.flex-grow-0{-ms-flex-positive:0!important;flex-grow:0!important}.flex-grow-1{-ms-flex-positive:1!important;flex-grow:1!important}.flex-shrink-0{-ms-flex-negative:0!important;flex-shrink:0!important}.flex-shrink-1{-ms-flex-negative:1!important;flex-shrink:1!important}.justify-content-start{-ms-flex-pack:start!important;justify-content:flex-start!important}.justify-content-end{-ms-flex-pack:end!important;justify-content:flex-end!important}.justify-content-center{-ms-flex-pack:center!important;justify-content:center!important}.justify-content-between{-ms-flex-pack:justify!important;justify-content:space-between!important}.justify-content-around{-ms-flex-pack:distribute!important;justify-content:space-around!important}.align-items-start{-ms-flex-align:start!important;align-items:flex-start!important}.align-items-end{-ms-flex-align:end!important;align-items:flex-end!important}.align-items-center{-ms-flex-align:center!important;align-items:center!important}.align-items-baseline{-ms-flex-align:baseline!important;align-items:baseline!important}.align-items-stretch{-ms-flex-align:stretch!important;align-items:stretch!important}.align-content-start{-ms-flex-line-pack:start!important;align-content:flex-start!important}.align-content-end{-ms-flex-line-pack:end!important;align-content:flex-end!important}.align-content-center{-ms-flex-line-pack:center!important;align-content:center!important}.align-content-between{-ms-flex-line-pack:justify!important;align-content:space-between!important}.align-content-around{-ms-flex-line-pack:distribute!important;align-content:space-around!important}.align-content-stretch{-ms-flex-line-pack:stretch!important;align-content:stretch!important}.align-self-auto{-ms-flex-item-align:auto!important;align-self:auto!important}.align-self-start{-ms-flex-item-align:start!important;align-self:flex-start!important}.align-self-end{-ms-flex-item-align:end!important;align-self:flex-end!important}.align-self-center{-ms-flex-item-align:center!important;align-self:center!important}.align-self-baseline{-ms-flex-item-align:baseline!important;align-self:baseline!important}.align-self-stretch{-ms-flex-item-align:stretch!important;align-self:stretch!important}@media (min-width:576px){.flex-sm-row{-ms-flex-direction:row!important;flex-direction:row!important}.flex-sm-column{-ms-flex-direction:column!important;flex-direction:column!important}.flex-sm-row-reverse{-ms-flex-direction:row-reverse!important;flex-direction:row-reverse!important}.flex-sm-column-reverse{-ms-flex-direction:column-reverse!important;flex-direction:column-reverse!important}.flex-sm-wrap{-ms-flex-wrap:wrap!important;flex-wrap:wrap!important}.flex-sm-nowrap{-ms-flex-wrap:nowrap!important;flex-wrap:nowrap!important}.flex-sm-wrap-reverse{-ms-flex-wrap:wrap-reverse!important;flex-wrap:wrap-reverse!important}.flex-sm-fill{-ms-flex:1 1 auto!important;flex:1 1 auto!important}.flex-sm-grow-0{-ms-flex-positive:0!important;flex-grow:0!important}.flex-sm-grow-1{-ms-flex-positive:1!important;flex-grow:1!important}.flex-sm-shrink-0{-ms-flex-negative:0!important;flex-shrink:0!important}.flex-sm-shrink-1{-ms-flex-negative:1!important;flex-shrink:1!important}.justify-content-sm-start{-ms-flex-pack:start!important;justify-content:flex-start!important}.justify-content-sm-end{-ms-flex-pack:end!important;justify-content:flex-end!important}.justify-content-sm-center{-ms-flex-pack:center!important;justify-content:center!important}.justify-content-sm-between{-ms-flex-pack:justify!important;justify-content:space-between!important}.justify-content-sm-around{-ms-flex-pack:distribute!important;justify-content:space-around!important}.align-items-sm-start{-ms-flex-align:start!important;align-items:flex-start!important}.align-items-sm-end{-ms-flex-align:end!important;align-items:flex-end!important}.align-items-sm-center{-ms-flex-align:center!important;align-items:center!important}.align-items-sm-baseline{-ms-flex-align:baseline!important;align-items:baseline!important}.align-items-sm-stretch{-ms-flex-align:stretch!important;align-items:stretch!important}.align-content-sm-start{-ms-flex-line-pack:start!important;align-content:flex-start!important}.align-content-sm-end{-ms-flex-line-pack:end!important;align-content:flex-end!important}.align-content-sm-center{-ms-flex-line-pack:center!important;align-content:center!important}.align-content-sm-between{-ms-flex-line-pack:justify!important;align-content:space-between!important}.align-content-sm-around{-ms-flex-line-pack:distribute!important;align-content:space-around!important}.align-content-sm-stretch{-ms-flex-line-pack:stretch!important;align-content:stretch!important}.align-self-sm-auto{-ms-flex-item-align:auto!important;align-self:auto!important}.align-self-sm-start{-ms-flex-item-align:start!important;align-self:flex-start!important}.align-self-sm-end{-ms-flex-item-align:end!important;align-self:flex-end!important}.align-self-sm-center{-ms-flex-item-align:center!important;align-self:center!important}.align-self-sm-baseline{-ms-flex-item-align:baseline!important;align-self:baseline!important}.align-self-sm-stretch{-ms-flex-item-align:stretch!important;align-self:stretch!important}}@media (min-width:768px){.flex-md-row{-ms-flex-direction:row!important;flex-direction:row!important}.flex-md-column{-ms-flex-direction:column!important;flex-direction:column!important}.flex-md-row-reverse{-ms-flex-direction:row-reverse!important;flex-direction:row-reverse!important}.flex-md-column-reverse{-ms-flex-direction:column-reverse!important;flex-direction:column-reverse!important}.flex-md-wrap{-ms-flex-wrap:wrap!important;flex-wrap:wrap!important}.flex-md-nowrap{-ms-flex-wrap:nowrap!important;flex-wrap:nowrap!important}.flex-md-wrap-reverse{-ms-flex-wrap:wrap-reverse!important;flex-wrap:wrap-reverse!important}.flex-md-fill{-ms-flex:1 1 auto!important;flex:1 1 auto!important}.flex-md-grow-0{-ms-flex-positive:0!important;flex-grow:0!important}.flex-md-grow-1{-ms-flex-positive:1!important;flex-grow:1!important}.flex-md-shrink-0{-ms-flex-negative:0!important;flex-shrink:0!important}.flex-md-shrink-1{-ms-flex-negative:1!important;flex-shrink:1!important}.justify-content-md-start{-ms-flex-pack:start!important;justify-content:flex-start!important}.justify-content-md-end{-ms-flex-pack:end!important;justify-content:flex-end!important}.justify-content-md-center{-ms-flex-pack:center!important;justify-content:center!important}.justify-content-md-between{-ms-flex-pack:justify!important;justify-content:space-between!important}.justify-content-md-around{-ms-flex-pack:distribute!important;justify-content:space-around!important}.align-items-md-start{-ms-flex-align:start!important;align-items:flex-start!important}.align-items-md-end{-ms-flex-align:end!important;align-items:flex-end!important}.align-items-md-center{-ms-flex-align:center!important;align-items:center!important}.align-items-md-baseline{-ms-flex-align:baseline!important;align-items:baseline!important}.align-items-md-stretch{-ms-flex-align:stretch!important;align-items:stretch!important}.align-content-md-start{-ms-flex-line-pack:start!important;align-content:flex-start!important}.align-content-md-end{-ms-flex-line-pack:end!important;align-content:flex-end!important}.align-content-md-center{-ms-flex-line-pack:center!important;align-content:center!important}.align-content-md-between{-ms-flex-line-pack:justify!important;align-content:space-between!important}.align-content-md-around{-ms-flex-line-pack:distribute!important;align-content:space-around!important}.align-content-md-stretch{-ms-flex-line-pack:stretch!important;align-content:stretch!important}.align-self-md-auto{-ms-flex-item-align:auto!important;align-self:auto!important}.align-self-md-start{-ms-flex-item-align:start!important;align-self:flex-start!important}.align-self-md-end{-ms-flex-item-align:end!important;align-self:flex-end!important}.align-self-md-center{-ms-flex-item-align:center!important;align-self:center!important}.align-self-md-baseline{-ms-flex-item-align:baseline!important;align-self:baseline!important}.align-self-md-stretch{-ms-flex-item-align:stretch!important;align-self:stretch!important}}@media (min-width:992px){.flex-lg-row{-ms-flex-direction:row!important;flex-direction:row!important}.flex-lg-column{-ms-flex-direction:column!important;flex-direction:column!important}.flex-lg-row-reverse{-ms-flex-direction:row-reverse!important;flex-direction:row-reverse!important}.flex-lg-column-reverse{-ms-flex-direction:column-reverse!important;flex-direction:column-reverse!important}.flex-lg-wrap{-ms-flex-wrap:wrap!important;flex-wrap:wrap!important}.flex-lg-nowrap{-ms-flex-wrap:nowrap!important;flex-wrap:nowrap!important}.flex-lg-wrap-reverse{-ms-flex-wrap:wrap-reverse!important;flex-wrap:wrap-reverse!important}.flex-lg-fill{-ms-flex:1 1 auto!important;flex:1 1 auto!important}.flex-lg-grow-0{-ms-flex-positive:0!important;flex-grow:0!important}.flex-lg-grow-1{-ms-flex-positive:1!important;flex-grow:1!important}.flex-lg-shrink-0{-ms-flex-negative:0!important;flex-shrink:0!important}.flex-lg-shrink-1{-ms-flex-negative:1!important;flex-shrink:1!important}.justify-content-lg-start{-ms-flex-pack:start!important;justify-content:flex-start!important}.justify-content-lg-end{-ms-flex-pack:end!important;justify-content:flex-end!important}.justify-content-lg-center{-ms-flex-pack:center!important;justify-content:center!important}.justify-content-lg-between{-ms-flex-pack:justify!important;justify-content:space-between!important}.justify-content-lg-around{-ms-flex-pack:distribute!important;justify-content:space-around!important}.align-items-lg-start{-ms-flex-align:start!important;align-items:flex-start!important}.align-items-lg-end{-ms-flex-align:end!important;align-items:flex-end!important}.align-items-lg-center{-ms-flex-align:center!important;align-items:center!important}.align-items-lg-baseline{-ms-flex-align:baseline!important;align-items:baseline!important}.align-items-lg-stretch{-ms-flex-align:stretch!important;align-items:stretch!important}.align-content-lg-start{-ms-flex-line-pack:start!important;align-content:flex-start!important}.align-content-lg-end{-ms-flex-line-pack:end!important;align-content:flex-end!important}.align-content-lg-center{-ms-flex-line-pack:center!important;align-content:center!important}.align-content-lg-between{-ms-flex-line-pack:justify!important;align-content:space-between!important}.align-content-lg-around{-ms-flex-line-pack:distribute!important;align-content:space-around!important}.align-content-lg-stretch{-ms-flex-line-pack:stretch!important;align-content:stretch!important}.align-self-lg-auto{-ms-flex-item-align:auto!important;align-self:auto!important}.align-self-lg-start{-ms-flex-item-align:start!important;align-self:flex-start!important}.align-self-lg-end{-ms-flex-item-align:end!important;align-self:flex-end!important}.align-self-lg-center{-ms-flex-item-align:center!important;align-self:center!important}.align-self-lg-baseline{-ms-flex-item-align:baseline!important;align-self:baseline!important}.align-self-lg-stretch{-ms-flex-item-align:stretch!important;align-self:stretch!important}}@media (min-width:1200px){.flex-xl-row{-ms-flex-direction:row!important;flex-direction:row!important}.flex-xl-column{-ms-flex-direction:column!important;flex-direction:column!important}.flex-xl-row-reverse{-ms-flex-direction:row-reverse!important;flex-direction:row-reverse!important}.flex-xl-column-reverse{-ms-flex-direction:column-reverse!important;flex-direction:column-reverse!important}.flex-xl-wrap{-ms-flex-wrap:wrap!important;flex-wrap:wrap!important}.flex-xl-nowrap{-ms-flex-wrap:nowrap!important;flex-wrap:nowrap!important}.flex-xl-wrap-reverse{-ms-flex-wrap:wrap-reverse!important;flex-wrap:wrap-reverse!important}.flex-xl-fill{-ms-flex:1 1 auto!important;flex:1 1 auto!important}.flex-xl-grow-0{-ms-flex-positive:0!important;flex-grow:0!important}.flex-xl-grow-1{-ms-flex-positive:1!important;flex-grow:1!important}.flex-xl-shrink-0{-ms-flex-negative:0!important;flex-shrink:0!important}.flex-xl-shrink-1{-ms-flex-negative:1!important;flex-shrink:1!important}.justify-content-xl-start{-ms-flex-pack:start!important;justify-content:flex-start!important}.justify-content-xl-end{-ms-flex-pack:end!important;justify-content:flex-end!important}.justify-content-xl-center{-ms-flex-pack:center!important;justify-content:center!important}.justify-content-xl-between{-ms-flex-pack:justify!important;justify-content:space-between!important}.justify-content-xl-around{-ms-flex-pack:distribute!important;justify-content:space-around!important}.align-items-xl-start{-ms-flex-align:start!important;align-items:flex-start!important}.align-items-xl-end{-ms-flex-align:end!important;align-items:flex-end!important}.align-items-xl-center{-ms-flex-align:center!important;align-items:center!important}.align-items-xl-baseline{-ms-flex-align:baseline!important;align-items:baseline!important}.align-items-xl-stretch{-ms-flex-align:stretch!important;align-items:stretch!important}.align-content-xl-start{-ms-flex-line-pack:start!important;align-content:flex-start!important}.align-content-xl-end{-ms-flex-line-pack:end!important;align-content:flex-end!important}.align-content-xl-center{-ms-flex-line-pack:center!important;align-content:center!important}.align-content-xl-between{-ms-flex-line-pack:justify!important;align-content:space-between!important}.align-content-xl-around{-ms-flex-line-pack:distribute!important;align-content:space-around!important}.align-content-xl-stretch{-ms-flex-line-pack:stretch!important;align-content:stretch!important}.align-self-xl-auto{-ms-flex-item-align:auto!important;align-self:auto!important}.align-self-xl-start{-ms-flex-item-align:start!important;align-self:flex-start!important}.align-self-xl-end{-ms-flex-item-align:end!important;align-self:flex-end!important}.align-self-xl-center{-ms-flex-item-align:center!important;align-self:center!important}.align-self-xl-baseline{-ms-flex-item-align:baseline!important;align-self:baseline!important}.align-self-xl-stretch{-ms-flex-item-align:stretch!important;align-self:stretch!important}}.float-left{float:left!important}.float-right{float:right!important}.float-none{float:none!important}@media (min-width:576px){.float-sm-left{float:left!important}.float-sm-right{float:right!important}.float-sm-none{float:none!important}}@media (min-width:768px){.float-md-left{float:left!important}.float-md-right{float:right!important}.float-md-none{float:none!important}}@media (min-width:992px){.float-lg-left{float:left!important}.float-lg-right{float:right!important}.float-lg-none{float:none!important}}@media (min-width:1200px){.float-xl-left{float:left!important}.float-xl-right{float:right!important}.float-xl-none{float:none!important}}.user-select-all{-webkit-user-select:all!important;-moz-user-select:all!important;-ms-user-select:all!important;user-select:all!important}.user-select-auto{-webkit-user-select:auto!important;-moz-user-select:auto!important;-ms-user-select:auto!important;user-select:auto!important}.user-select-none{-webkit-user-select:none!important;-moz-user-select:none!important;-ms-user-select:none!important;user-select:none!important}.overflow-auto{overflow:auto!important}.overflow-hidden{overflow:hidden!important}.position-static{position:static!important}.position-relative{position:relative!important}.position-absolute{position:absolute!important}.position-fixed{position:fixed!important}.position-sticky{position:-webkit-sticky!important;position:sticky!important}.fixed-top{position:fixed;top:0;right:0;left:0;z-index:1030}.fixed-bottom{position:fixed;right:0;bottom:0;left:0;z-index:1030}@supports ((position:-webkit-sticky) or (position:sticky)){.sticky-top{position:-webkit-sticky;position:sticky;top:0;z-index:1020}}.sr-only{position:absolute;width:1px;height:1px;padding:0;margin:-1px;overflow:hidden;clip:rect(0,0,0,0);white-space:nowrap;border:0}.sr-only-focusable:active,.sr-only-focusable:focus{position:static;width:auto;height:auto;overflow:visible;clip:auto;white-space:normal}.shadow-sm{box-shadow:0 .125rem .25rem rgba(0,0,0,.075)!important}.shadow{box-shadow:0 .5rem 1rem rgba(0,0,0,.15)!important}.shadow-lg{box-shadow:0 1rem 3rem rgba(0,0,0,.175)!important}.shadow-none{box-shadow:none!important}.w-25{width:25%!important}.w-50{width:50%!important}.w-75{width:75%!important}.w-100{width:100%!important}.w-auto{width:auto!important}.h-25{height:25%!important}.h-50{height:50%!important}.h-75{height:75%!important}.h-100{height:100%!important}.h-auto{height:auto!important}.mw-100{max-width:100%!important}.mh-100{max-height:100%!important}.min-vw-100{min-width:100vw!important}.min-vh-100{min-height:100vh!important}.vw-100{width:100vw!important}.vh-100{height:100vh!important}.m-0{margin:0!important}.mt-0,.my-0{margin-top:0!important}.mr-0,.mx-0{margin-right:0!important}.mb-0,.my-0{margin-bottom:0!important}.ml-0,.mx-0{margin-left:0!important}.m-1{margin:.25rem!important}.mt-1,.my-1{margin-top:.25rem!important}.mr-1,.mx-1{margin-right:.25rem!important}.mb-1,.my-1{margin-bottom:.25rem!important}.ml-1,.mx-1{margin-left:.25rem!important}.m-2{margin:.5rem!important}.mt-2,.my-2{margin-top:.5rem!important}.mr-2,.mx-2{margin-right:.5rem!important}.mb-2,.my-2{margin-bottom:.5rem!important}.ml-2,.mx-2{margin-left:.5rem!important}.m-3{margin:1rem!important}.mt-3,.my-3{margin-top:1rem!important}.mr-3,.mx-3{margin-right:1rem!important}.mb-3,.my-3{margin-bottom:1rem!important}.ml-3,.mx-3{margin-left:1rem!important}.m-4{margin:1.5rem!important}.mt-4,.my-4{margin-top:1.5rem!important}.mr-4,.mx-4{margin-right:1.5rem!important}.mb-4,.my-4{margin-bottom:1.5rem!important}.ml-4,.mx-4{margin-left:1.5rem!important}.m-5{margin:3rem!important}.mt-5,.my-5{margin-top:3rem!important}.mr-5,.mx-5{margin-right:3rem!important}.mb-5,.my-5{margin-bottom:3rem!important}.ml-5,.mx-5{margin-left:3rem!important}.p-0{padding:0!important}.pt-0,.py-0{padding-top:0!important}.pr-0,.px-0{padding-right:0!important}.pb-0,.py-0{padding-bottom:0!important}.pl-0,.px-0{padding-left:0!important}.p-1{padding:.25rem!important}.pt-1,.py-1{padding-top:.25rem!important}.pr-1,.px-1{padding-right:.25rem!important}.pb-1,.py-1{padding-bottom:.25rem!important}.pl-1,.px-1{padding-left:.25rem!important}.p-2{padding:.5rem!important}.pt-2,.py-2{padding-top:.5rem!important}.pr-2,.px-2{padding-right:.5rem!important}.pb-2,.py-2{padding-bottom:.5rem!important}.pl-2,.px-2{padding-left:.5rem!important}.p-3{padding:1rem!important}.pt-3,.py-3{padding-top:1rem!important}.pr-3,.px-3{padding-right:1rem!important}.pb-3,.py-3{padding-bottom:1rem!important}.pl-3,.px-3{padding-left:1rem!important}.p-4{padding:1.5rem!important}.pt-4,.py-4{padding-top:1.5rem!important}.pr-4,.px-4{padding-right:1.5rem!important}.pb-4,.py-4{padding-bottom:1.5rem!important}.pl-4,.px-4{padding-left:1.5rem!important}.p-5{padding:3rem!important}.pt-5,.py-5{padding-top:3rem!important}.pr-5,.px-5{padding-right:3rem!important}.pb-5,.py-5{padding-bottom:3rem!important}.pl-5,.px-5{padding-left:3rem!important}.m-n1{margin:-.25rem!important}.mt-n1,.my-n1{margin-top:-.25rem!important}.mr-n1,.mx-n1{margin-right:-.25rem!important}.mb-n1,.my-n1{margin-bottom:-.25rem!important}.ml-n1,.mx-n1{margin-left:-.25rem!important}.m-n2{margin:-.5rem!important}.mt-n2,.my-n2{margin-top:-.5rem!important}.mr-n2,.mx-n2{margin-right:-.5rem!important}.mb-n2,.my-n2{margin-bottom:-.5rem!important}.ml-n2,.mx-n2{margin-left:-.5rem!important}.m-n3{margin:-1rem!important}.mt-n3,.my-n3{margin-top:-1rem!important}.mr-n3,.mx-n3{margin-right:-1rem!important}.mb-n3,.my-n3{margin-bottom:-1rem!important}.ml-n3,.mx-n3{margin-left:-1rem!important}.m-n4{margin:-1.5rem!important}.mt-n4,.my-n4{margin-top:-1.5rem!important}.mr-n4,.mx-n4{margin-right:-1.5rem!important}.mb-n4,.my-n4{margin-bottom:-1.5rem!important}.ml-n4,.mx-n4{margin-left:-1.5rem!important}.m-n5{margin:-3rem!important}.mt-n5,.my-n5{margin-top:-3rem!important}.mr-n5,.mx-n5{margin-right:-3rem!important}.mb-n5,.my-n5{margin-bottom:-3rem!important}.ml-n5,.mx-n5{margin-left:-3rem!important}.m-auto{margin:auto!important}.mt-auto,.my-auto{margin-top:auto!important}.mr-auto,.mx-auto{margin-right:auto!important}.mb-auto,.my-auto{margin-bottom:auto!important}.ml-auto,.mx-auto{margin-left:auto!important}@media (min-width:576px){.m-sm-0{margin:0!important}.mt-sm-0,.my-sm-0{margin-top:0!important}.mr-sm-0,.mx-sm-0{margin-right:0!important}.mb-sm-0,.my-sm-0{margin-bottom:0!important}.ml-sm-0,.mx-sm-0{margin-left:0!important}.m-sm-1{margin:.25rem!important}.mt-sm-1,.my-sm-1{margin-top:.25rem!important}.mr-sm-1,.mx-sm-1{margin-right:.25rem!important}.mb-sm-1,.my-sm-1{margin-bottom:.25rem!important}.ml-sm-1,.mx-sm-1{margin-left:.25rem!important}.m-sm-2{margin:.5rem!important}.mt-sm-2,.my-sm-2{margin-top:.5rem!important}.mr-sm-2,.mx-sm-2{margin-right:.5rem!important}.mb-sm-2,.my-sm-2{margin-bottom:.5rem!important}.ml-sm-2,.mx-sm-2{margin-left:.5rem!important}.m-sm-3{margin:1rem!important}.mt-sm-3,.my-sm-3{margin-top:1rem!important}.mr-sm-3,.mx-sm-3{margin-right:1rem!important}.mb-sm-3,.my-sm-3{margin-bottom:1rem!important}.ml-sm-3,.mx-sm-3{margin-left:1rem!important}.m-sm-4{margin:1.5rem!important}.mt-sm-4,.my-sm-4{margin-top:1.5rem!important}.mr-sm-4,.mx-sm-4{margin-right:1.5rem!important}.mb-sm-4,.my-sm-4{margin-bottom:1.5rem!important}.ml-sm-4,.mx-sm-4{margin-left:1.5rem!important}.m-sm-5{margin:3rem!important}.mt-sm-5,.my-sm-5{margin-top:3rem!important}.mr-sm-5,.mx-sm-5{margin-right:3rem!important}.mb-sm-5,.my-sm-5{margin-bottom:3rem!important}.ml-sm-5,.mx-sm-5{margin-left:3rem!important}.p-sm-0{padding:0!important}.pt-sm-0,.py-sm-0{padding-top:0!important}.pr-sm-0,.px-sm-0{padding-right:0!important}.pb-sm-0,.py-sm-0{padding-bottom:0!important}.pl-sm-0,.px-sm-0{padding-left:0!important}.p-sm-1{padding:.25rem!important}.pt-sm-1,.py-sm-1{padding-top:.25rem!important}.pr-sm-1,.px-sm-1{padding-right:.25rem!important}.pb-sm-1,.py-sm-1{padding-bottom:.25rem!important}.pl-sm-1,.px-sm-1{padding-left:.25rem!important}.p-sm-2{padding:.5rem!important}.pt-sm-2,.py-sm-2{padding-top:.5rem!important}.pr-sm-2,.px-sm-2{padding-right:.5rem!important}.pb-sm-2,.py-sm-2{padding-bottom:.5rem!important}.pl-sm-2,.px-sm-2{padding-left:.5rem!important}.p-sm-3{padding:1rem!important}.pt-sm-3,.py-sm-3{padding-top:1rem!important}.pr-sm-3,.px-sm-3{padding-right:1rem!important}.pb-sm-3,.py-sm-3{padding-bottom:1rem!important}.pl-sm-3,.px-sm-3{padding-left:1rem!important}.p-sm-4{padding:1.5rem!important}.pt-sm-4,.py-sm-4{padding-top:1.5rem!important}.pr-sm-4,.px-sm-4{padding-right:1.5rem!important}.pb-sm-4,.py-sm-4{padding-bottom:1.5rem!important}.pl-sm-4,.px-sm-4{padding-left:1.5rem!important}.p-sm-5{padding:3rem!important}.pt-sm-5,.py-sm-5{padding-top:3rem!important}.pr-sm-5,.px-sm-5{padding-right:3rem!important}.pb-sm-5,.py-sm-5{padding-bottom:3rem!important}.pl-sm-5,.px-sm-5{padding-left:3rem!important}.m-sm-n1{margin:-.25rem!important}.mt-sm-n1,.my-sm-n1{margin-top:-.25rem!important}.mr-sm-n1,.mx-sm-n1{margin-right:-.25rem!important}.mb-sm-n1,.my-sm-n1{margin-bottom:-.25rem!important}.ml-sm-n1,.mx-sm-n1{margin-left:-.25rem!important}.m-sm-n2{margin:-.5rem!important}.mt-sm-n2,.my-sm-n2{margin-top:-.5rem!important}.mr-sm-n2,.mx-sm-n2{margin-right:-.5rem!important}.mb-sm-n2,.my-sm-n2{margin-bottom:-.5rem!important}.ml-sm-n2,.mx-sm-n2{margin-left:-.5rem!important}.m-sm-n3{margin:-1rem!important}.mt-sm-n3,.my-sm-n3{margin-top:-1rem!important}.mr-sm-n3,.mx-sm-n3{margin-right:-1rem!important}.mb-sm-n3,.my-sm-n3{margin-bottom:-1rem!important}.ml-sm-n3,.mx-sm-n3{margin-left:-1rem!important}.m-sm-n4{margin:-1.5rem!important}.mt-sm-n4,.my-sm-n4{margin-top:-1.5rem!important}.mr-sm-n4,.mx-sm-n4{margin-right:-1.5rem!important}.mb-sm-n4,.my-sm-n4{margin-bottom:-1.5rem!important}.ml-sm-n4,.mx-sm-n4{margin-left:-1.5rem!important}.m-sm-n5{margin:-3rem!important}.mt-sm-n5,.my-sm-n5{margin-top:-3rem!important}.mr-sm-n5,.mx-sm-n5{margin-right:-3rem!important}.mb-sm-n5,.my-sm-n5{margin-bottom:-3rem!important}.ml-sm-n5,.mx-sm-n5{margin-left:-3rem!important}.m-sm-auto{margin:auto!important}.mt-sm-auto,.my-sm-auto{margin-top:auto!important}.mr-sm-auto,.mx-sm-auto{margin-right:auto!important}.mb-sm-auto,.my-sm-auto{margin-bottom:auto!important}.ml-sm-auto,.mx-sm-auto{margin-left:auto!important}}@media (min-width:768px){.m-md-0{margin:0!important}.mt-md-0,.my-md-0{margin-top:0!important}.mr-md-0,.mx-md-0{margin-right:0!important}.mb-md-0,.my-md-0{margin-bottom:0!important}.ml-md-0,.mx-md-0{margin-left:0!important}.m-md-1{margin:.25rem!important}.mt-md-1,.my-md-1{margin-top:.25rem!important}.mr-md-1,.mx-md-1{margin-right:.25rem!important}.mb-md-1,.my-md-1{margin-bottom:.25rem!important}.ml-md-1,.mx-md-1{margin-left:.25rem!important}.m-md-2{margin:.5rem!important}.mt-md-2,.my-md-2{margin-top:.5rem!important}.mr-md-2,.mx-md-2{margin-right:.5rem!important}.mb-md-2,.my-md-2{margin-bottom:.5rem!important}.ml-md-2,.mx-md-2{margin-left:.5rem!important}.m-md-3{margin:1rem!important}.mt-md-3,.my-md-3{margin-top:1rem!important}.mr-md-3,.mx-md-3{margin-right:1rem!important}.mb-md-3,.my-md-3{margin-bottom:1rem!important}.ml-md-3,.mx-md-3{margin-left:1rem!important}.m-md-4{margin:1.5rem!important}.mt-md-4,.my-md-4{margin-top:1.5rem!important}.mr-md-4,.mx-md-4{margin-right:1.5rem!important}.mb-md-4,.my-md-4{margin-bottom:1.5rem!important}.ml-md-4,.mx-md-4{margin-left:1.5rem!important}.m-md-5{margin:3rem!important}.mt-md-5,.my-md-5{margin-top:3rem!important}.mr-md-5,.mx-md-5{margin-right:3rem!important}.mb-md-5,.my-md-5{margin-bottom:3rem!important}.ml-md-5,.mx-md-5{margin-left:3rem!important}.p-md-0{padding:0!important}.pt-md-0,.py-md-0{padding-top:0!important}.pr-md-0,.px-md-0{padding-right:0!important}.pb-md-0,.py-md-0{padding-bottom:0!important}.pl-md-0,.px-md-0{padding-left:0!important}.p-md-1{padding:.25rem!important}.pt-md-1,.py-md-1{padding-top:.25rem!important}.pr-md-1,.px-md-1{padding-right:.25rem!important}.pb-md-1,.py-md-1{padding-bottom:.25rem!important}.pl-md-1,.px-md-1{padding-left:.25rem!important}.p-md-2{padding:.5rem!important}.pt-md-2,.py-md-2{padding-top:.5rem!important}.pr-md-2,.px-md-2{padding-right:.5rem!important}.pb-md-2,.py-md-2{padding-bottom:.5rem!important}.pl-md-2,.px-md-2{padding-left:.5rem!important}.p-md-3{padding:1rem!important}.pt-md-3,.py-md-3{padding-top:1rem!important}.pr-md-3,.px-md-3{padding-right:1rem!important}.pb-md-3,.py-md-3{padding-bottom:1rem!important}.pl-md-3,.px-md-3{padding-left:1rem!important}.p-md-4{padding:1.5rem!important}.pt-md-4,.py-md-4{padding-top:1.5rem!important}.pr-md-4,.px-md-4{padding-right:1.5rem!important}.pb-md-4,.py-md-4{padding-bottom:1.5rem!important}.pl-md-4,.px-md-4{padding-left:1.5rem!important}.p-md-5{padding:3rem!important}.pt-md-5,.py-md-5{padding-top:3rem!important}.pr-md-5,.px-md-5{padding-right:3rem!important}.pb-md-5,.py-md-5{padding-bottom:3rem!important}.pl-md-5,.px-md-5{padding-left:3rem!important}.m-md-n1{margin:-.25rem!important}.mt-md-n1,.my-md-n1{margin-top:-.25rem!important}.mr-md-n1,.mx-md-n1{margin-right:-.25rem!important}.mb-md-n1,.my-md-n1{margin-bottom:-.25rem!important}.ml-md-n1,.mx-md-n1{margin-left:-.25rem!important}.m-md-n2{margin:-.5rem!important}.mt-md-n2,.my-md-n2{margin-top:-.5rem!important}.mr-md-n2,.mx-md-n2{margin-right:-.5rem!important}.mb-md-n2,.my-md-n2{margin-bottom:-.5rem!important}.ml-md-n2,.mx-md-n2{margin-left:-.5rem!important}.m-md-n3{margin:-1rem!important}.mt-md-n3,.my-md-n3{margin-top:-1rem!important}.mr-md-n3,.mx-md-n3{margin-right:-1rem!important}.mb-md-n3,.my-md-n3{margin-bottom:-1rem!important}.ml-md-n3,.mx-md-n3{margin-left:-1rem!important}.m-md-n4{margin:-1.5rem!important}.mt-md-n4,.my-md-n4{margin-top:-1.5rem!important}.mr-md-n4,.mx-md-n4{margin-right:-1.5rem!important}.mb-md-n4,.my-md-n4{margin-bottom:-1.5rem!important}.ml-md-n4,.mx-md-n4{margin-left:-1.5rem!important}.m-md-n5{margin:-3rem!important}.mt-md-n5,.my-md-n5{margin-top:-3rem!important}.mr-md-n5,.mx-md-n5{margin-right:-3rem!important}.mb-md-n5,.my-md-n5{margin-bottom:-3rem!important}.ml-md-n5,.mx-md-n5{margin-left:-3rem!important}.m-md-auto{margin:auto!important}.mt-md-auto,.my-md-auto{margin-top:auto!important}.mr-md-auto,.mx-md-auto{margin-right:auto!important}.mb-md-auto,.my-md-auto{margin-bottom:auto!important}.ml-md-auto,.mx-md-auto{margin-left:auto!important}}@media (min-width:992px){.m-lg-0{margin:0!important}.mt-lg-0,.my-lg-0{margin-top:0!important}.mr-lg-0,.mx-lg-0{margin-right:0!important}.mb-lg-0,.my-lg-0{margin-bottom:0!important}.ml-lg-0,.mx-lg-0{margin-left:0!important}.m-lg-1{margin:.25rem!important}.mt-lg-1,.my-lg-1{margin-top:.25rem!important}.mr-lg-1,.mx-lg-1{margin-right:.25rem!important}.mb-lg-1,.my-lg-1{margin-bottom:.25rem!important}.ml-lg-1,.mx-lg-1{margin-left:.25rem!important}.m-lg-2{margin:.5rem!important}.mt-lg-2,.my-lg-2{margin-top:.5rem!important}.mr-lg-2,.mx-lg-2{margin-right:.5rem!important}.mb-lg-2,.my-lg-2{margin-bottom:.5rem!important}.ml-lg-2,.mx-lg-2{margin-left:.5rem!important}.m-lg-3{margin:1rem!important}.mt-lg-3,.my-lg-3{margin-top:1rem!important}.mr-lg-3,.mx-lg-3{margin-right:1rem!important}.mb-lg-3,.my-lg-3{margin-bottom:1rem!important}.ml-lg-3,.mx-lg-3{margin-left:1rem!important}.m-lg-4{margin:1.5rem!important}.mt-lg-4,.my-lg-4{margin-top:1.5rem!important}.mr-lg-4,.mx-lg-4{margin-right:1.5rem!important}.mb-lg-4,.my-lg-4{margin-bottom:1.5rem!important}.ml-lg-4,.mx-lg-4{margin-left:1.5rem!important}.m-lg-5{margin:3rem!important}.mt-lg-5,.my-lg-5{margin-top:3rem!important}.mr-lg-5,.mx-lg-5{margin-right:3rem!important}.mb-lg-5,.my-lg-5{margin-bottom:3rem!important}.ml-lg-5,.mx-lg-5{margin-left:3rem!important}.p-lg-0{padding:0!important}.pt-lg-0,.py-lg-0{padding-top:0!important}.pr-lg-0,.px-lg-0{padding-right:0!important}.pb-lg-0,.py-lg-0{padding-bottom:0!important}.pl-lg-0,.px-lg-0{padding-left:0!important}.p-lg-1{padding:.25rem!important}.pt-lg-1,.py-lg-1{padding-top:.25rem!important}.pr-lg-1,.px-lg-1{padding-right:.25rem!important}.pb-lg-1,.py-lg-1{padding-bottom:.25rem!important}.pl-lg-1,.px-lg-1{padding-left:.25rem!important}.p-lg-2{padding:.5rem!important}.pt-lg-2,.py-lg-2{padding-top:.5rem!important}.pr-lg-2,.px-lg-2{padding-right:.5rem!important}.pb-lg-2,.py-lg-2{padding-bottom:.5rem!important}.pl-lg-2,.px-lg-2{padding-left:.5rem!important}.p-lg-3{padding:1rem!important}.pt-lg-3,.py-lg-3{padding-top:1rem!important}.pr-lg-3,.px-lg-3{padding-right:1rem!important}.pb-lg-3,.py-lg-3{padding-bottom:1rem!important}.pl-lg-3,.px-lg-3{padding-left:1rem!important}.p-lg-4{padding:1.5rem!important}.pt-lg-4,.py-lg-4{padding-top:1.5rem!important}.pr-lg-4,.px-lg-4{padding-right:1.5rem!important}.pb-lg-4,.py-lg-4{padding-bottom:1.5rem!important}.pl-lg-4,.px-lg-4{padding-left:1.5rem!important}.p-lg-5{padding:3rem!important}.pt-lg-5,.py-lg-5{padding-top:3rem!important}.pr-lg-5,.px-lg-5{padding-right:3rem!important}.pb-lg-5,.py-lg-5{padding-bottom:3rem!important}.pl-lg-5,.px-lg-5{padding-left:3rem!important}.m-lg-n1{margin:-.25rem!important}.mt-lg-n1,.my-lg-n1{margin-top:-.25rem!important}.mr-lg-n1,.mx-lg-n1{margin-right:-.25rem!important}.mb-lg-n1,.my-lg-n1{margin-bottom:-.25rem!important}.ml-lg-n1,.mx-lg-n1{margin-left:-.25rem!important}.m-lg-n2{margin:-.5rem!important}.mt-lg-n2,.my-lg-n2{margin-top:-.5rem!important}.mr-lg-n2,.mx-lg-n2{margin-right:-.5rem!important}.mb-lg-n2,.my-lg-n2{margin-bottom:-.5rem!important}.ml-lg-n2,.mx-lg-n2{margin-left:-.5rem!important}.m-lg-n3{margin:-1rem!important}.mt-lg-n3,.my-lg-n3{margin-top:-1rem!important}.mr-lg-n3,.mx-lg-n3{margin-right:-1rem!important}.mb-lg-n3,.my-lg-n3{margin-bottom:-1rem!important}.ml-lg-n3,.mx-lg-n3{margin-left:-1rem!important}.m-lg-n4{margin:-1.5rem!important}.mt-lg-n4,.my-lg-n4{margin-top:-1.5rem!important}.mr-lg-n4,.mx-lg-n4{margin-right:-1.5rem!important}.mb-lg-n4,.my-lg-n4{margin-bottom:-1.5rem!important}.ml-lg-n4,.mx-lg-n4{margin-left:-1.5rem!important}.m-lg-n5{margin:-3rem!important}.mt-lg-n5,.my-lg-n5{margin-top:-3rem!important}.mr-lg-n5,.mx-lg-n5{margin-right:-3rem!important}.mb-lg-n5,.my-lg-n5{margin-bottom:-3rem!important}.ml-lg-n5,.mx-lg-n5{margin-left:-3rem!important}.m-lg-auto{margin:auto!important}.mt-lg-auto,.my-lg-auto{margin-top:auto!important}.mr-lg-auto,.mx-lg-auto{margin-right:auto!important}.mb-lg-auto,.my-lg-auto{margin-bottom:auto!important}.ml-lg-auto,.mx-lg-auto{margin-left:auto!important}}@media (min-width:1200px){.m-xl-0{margin:0!important}.mt-xl-0,.my-xl-0{margin-top:0!important}.mr-xl-0,.mx-xl-0{margin-right:0!important}.mb-xl-0,.my-xl-0{margin-bottom:0!important}.ml-xl-0,.mx-xl-0{margin-left:0!important}.m-xl-1{margin:.25rem!important}.mt-xl-1,.my-xl-1{margin-top:.25rem!important}.mr-xl-1,.mx-xl-1{margin-right:.25rem!important}.mb-xl-1,.my-xl-1{margin-bottom:.25rem!important}.ml-xl-1,.mx-xl-1{margin-left:.25rem!important}.m-xl-2{margin:.5rem!important}.mt-xl-2,.my-xl-2{margin-top:.5rem!important}.mr-xl-2,.mx-xl-2{margin-right:.5rem!important}.mb-xl-2,.my-xl-2{margin-bottom:.5rem!important}.ml-xl-2,.mx-xl-2{margin-left:.5rem!important}.m-xl-3{margin:1rem!important}.mt-xl-3,.my-xl-3{margin-top:1rem!important}.mr-xl-3,.mx-xl-3{margin-right:1rem!important}.mb-xl-3,.my-xl-3{margin-bottom:1rem!important}.ml-xl-3,.mx-xl-3{margin-left:1rem!important}.m-xl-4{margin:1.5rem!important}.mt-xl-4,.my-xl-4{margin-top:1.5rem!important}.mr-xl-4,.mx-xl-4{margin-right:1.5rem!important}.mb-xl-4,.my-xl-4{margin-bottom:1.5rem!important}.ml-xl-4,.mx-xl-4{margin-left:1.5rem!important}.m-xl-5{margin:3rem!important}.mt-xl-5,.my-xl-5{margin-top:3rem!important}.mr-xl-5,.mx-xl-5{margin-right:3rem!important}.mb-xl-5,.my-xl-5{margin-bottom:3rem!important}.ml-xl-5,.mx-xl-5{margin-left:3rem!important}.p-xl-0{padding:0!important}.pt-xl-0,.py-xl-0{padding-top:0!important}.pr-xl-0,.px-xl-0{padding-right:0!important}.pb-xl-0,.py-xl-0{padding-bottom:0!important}.pl-xl-0,.px-xl-0{padding-left:0!important}.p-xl-1{padding:.25rem!important}.pt-xl-1,.py-xl-1{padding-top:.25rem!important}.pr-xl-1,.px-xl-1{padding-right:.25rem!important}.pb-xl-1,.py-xl-1{padding-bottom:.25rem!important}.pl-xl-1,.px-xl-1{padding-left:.25rem!important}.p-xl-2{padding:.5rem!important}.pt-xl-2,.py-xl-2{padding-top:.5rem!important}.pr-xl-2,.px-xl-2{padding-right:.5rem!important}.pb-xl-2,.py-xl-2{padding-bottom:.5rem!important}.pl-xl-2,.px-xl-2{padding-left:.5rem!important}.p-xl-3{padding:1rem!important}.pt-xl-3,.py-xl-3{padding-top:1rem!important}.pr-xl-3,.px-xl-3{padding-right:1rem!important}.pb-xl-3,.py-xl-3{padding-bottom:1rem!important}.pl-xl-3,.px-xl-3{padding-left:1rem!important}.p-xl-4{padding:1.5rem!important}.pt-xl-4,.py-xl-4{padding-top:1.5rem!important}.pr-xl-4,.px-xl-4{padding-right:1.5rem!important}.pb-xl-4,.py-xl-4{padding-bottom:1.5rem!important}.pl-xl-4,.px-xl-4{padding-left:1.5rem!important}.p-xl-5{padding:3rem!important}.pt-xl-5,.py-xl-5{padding-top:3rem!important}.pr-xl-5,.px-xl-5{padding-right:3rem!important}.pb-xl-5,.py-xl-5{padding-bottom:3rem!important}.pl-xl-5,.px-xl-5{padding-left:3rem!important}.m-xl-n1{margin:-.25rem!important}.mt-xl-n1,.my-xl-n1{margin-top:-.25rem!important}.mr-xl-n1,.mx-xl-n1{margin-right:-.25rem!important}.mb-xl-n1,.my-xl-n1{margin-bottom:-.25rem!important}.ml-xl-n1,.mx-xl-n1{margin-left:-.25rem!important}.m-xl-n2{margin:-.5rem!important}.mt-xl-n2,.my-xl-n2{margin-top:-.5rem!important}.mr-xl-n2,.mx-xl-n2{margin-right:-.5rem!important}.mb-xl-n2,.my-xl-n2{margin-bottom:-.5rem!important}.ml-xl-n2,.mx-xl-n2{margin-left:-.5rem!important}.m-xl-n3{margin:-1rem!important}.mt-xl-n3,.my-xl-n3{margin-top:-1rem!important}.mr-xl-n3,.mx-xl-n3{margin-right:-1rem!important}.mb-xl-n3,.my-xl-n3{margin-bottom:-1rem!important}.ml-xl-n3,.mx-xl-n3{margin-left:-1rem!important}.m-xl-n4{margin:-1.5rem!important}.mt-xl-n4,.my-xl-n4{margin-top:-1.5rem!important}.mr-xl-n4,.mx-xl-n4{margin-right:-1.5rem!important}.mb-xl-n4,.my-xl-n4{margin-bottom:-1.5rem!important}.ml-xl-n4,.mx-xl-n4{margin-left:-1.5rem!important}.m-xl-n5{margin:-3rem!important}.mt-xl-n5,.my-xl-n5{margin-top:-3rem!important}.mr-xl-n5,.mx-xl-n5{margin-right:-3rem!important}.mb-xl-n5,.my-xl-n5{margin-bottom:-3rem!important}.ml-xl-n5,.mx-xl-n5{margin-left:-3rem!important}.m-xl-auto{margin:auto!important}.mt-xl-auto,.my-xl-auto{margin-top:auto!important}.mr-xl-auto,.mx-xl-auto{margin-right:auto!important}.mb-xl-auto,.my-xl-auto{margin-bottom:auto!important}.ml-xl-auto,.mx-xl-auto{margin-left:auto!important}}.stretched-link::after{position:absolute;top:0;right:0;bottom:0;left:0;z-index:1;pointer-events:auto;content:\"\";background-color:rgba(0,0,0,0)}.text-monospace{font-family:SFMono-Regular,Menlo,Monaco,Consolas,\"Liberation Mono\",\"Courier New\",monospace!important}.text-justify{text-align:justify!important}.text-wrap{white-space:normal!important}.text-nowrap{white-space:nowrap!important}.text-truncate{overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.text-left{text-align:left!important}.text-right{text-align:right!important}.text-center{text-align:center!important}@media (min-width:576px){.text-sm-left{text-align:left!important}.text-sm-right{text-align:right!important}.text-sm-center{text-align:center!important}}@media (min-width:768px){.text-md-left{text-align:left!important}.text-md-right{text-align:right!important}.text-md-center{text-align:center!important}}@media (min-width:992px){.text-lg-left{text-align:left!important}.text-lg-right{text-align:right!important}.text-lg-center{text-align:center!important}}@media (min-width:1200px){.text-xl-left{text-align:left!important}.text-xl-right{text-align:right!important}.text-xl-center{text-align:center!important}}.text-lowercase{text-transform:lowercase!important}.text-uppercase{text-transform:uppercase!important}.text-capitalize{text-transform:capitalize!important}.font-weight-light{font-weight:300!important}.font-weight-lighter{font-weight:lighter!important}.font-weight-normal{font-weight:400!important}.font-weight-bold{font-weight:700!important}.font-weight-bolder{font-weight:bolder!important}.font-italic{font-style:italic!important}.text-white{color:#fff!important}.text-primary{color:#007bff!important}a.text-primary:focus,a.text-primary:hover{color:#0056b3!important}.text-secondary{color:#6c757d!important}a.text-secondary:focus,a.text-secondary:hover{color:#494f54!important}.text-success{color:#28a745!important}a.text-success:focus,a.text-success:hover{color:#19692c!important}.text-info{color:#17a2b8!important}a.text-info:focus,a.text-info:hover{color:#0f6674!important}.text-warning{color:#ffc107!important}a.text-warning:focus,a.text-warning:hover{color:#ba8b00!important}.text-danger{color:#dc3545!important}a.text-danger:focus,a.text-danger:hover{color:#a71d2a!important}.text-light{color:#f8f9fa!important}a.text-light:focus,a.text-light:hover{color:#cbd3da!important}.text-dark{color:#343a40!important}a.text-dark:focus,a.text-dark:hover{color:#121416!important}.text-body{color:#212529!important}.text-muted{color:#6c757d!important}.text-black-50{color:rgba(0,0,0,.5)!important}.text-white-50{color:rgba(255,255,255,.5)!important}.text-hide{font:0/0 a;color:transparent;text-shadow:none;background-color:transparent;border:0}.text-decoration-none{text-decoration:none!important}.text-break{word-break:break-word!important;word-wrap:break-word!important}.text-reset{color:inherit!important}.visible{visibility:visible!important}.invisible{visibility:hidden!important}@media print{*,::after,::before{text-shadow:none!important;box-shadow:none!important}a:not(.btn){text-decoration:underline}abbr[title]::after{content:\" (\" attr(title) \")\"}pre{white-space:pre-wrap!important}blockquote,pre{border:1px solid #adb5bd;page-break-inside:avoid}thead{display:table-header-group}img,tr{page-break-inside:avoid}h2,h3,p{orphans:3;widows:3}h2,h3{page-break-after:avoid}@page{size:a3}body{min-width:992px!important}.container{min-width:992px!important}.navbar{display:none}.badge{border:1px solid #000}.table{border-collapse:collapse!important}.table td,.table th{background-color:#fff!important}.table-bordered td,.table-bordered th{border:1px solid #dee2e6!important}.table-dark{color:inherit}.table-dark tbody+tbody,.table-dark td,.table-dark th,.table-dark thead th{border-color:#dee2e6}.table .thead-dark th{color:inherit;border-color:#dee2e6}}</style> <style> .ui-helper-hidden{display:none}.ui-helper-hidden-accessible{border:0;clip:rect(0 0 0 0);height:1px;margin:-1px;overflow:hidden;padding:0;position:absolute;width:1px}.ui-helper-reset{margin:0;padding:0;border:0;outline:0;line-height:1.3;text-decoration:none;font-size:100%;list-style:none}.ui-helper-clearfix:before,.ui-helper-clearfix:after{content:\"\";display:table;border-collapse:collapse}.ui-helper-clearfix:after{clear:both}.ui-helper-zfix{width:100%;height:100%;top:0;left:0;position:absolute;opacity:0;filter:Alpha(Opacity=0)}.ui-front{z-index:100}.ui-state-disabled{cursor:default!important;pointer-events:none}.ui-icon{display:inline-block;vertical-align:middle;margin-top:-.25em;position:relative;text-indent:-99999px;overflow:hidden;background-repeat:no-repeat}.ui-widget-icon-block{left:50%;margin-left:-8px;display:block}.ui-widget-overlay{position:fixed;top:0;left:0;width:100%;height:100%}.ui-slider{position:relative;text-align:left}.ui-slider .ui-slider-handle{position:absolute;z-index:2;width:1.2em;height:1.2em;cursor:default;-ms-touch-action:none;touch-action:none}.ui-slider .ui-slider-range{position:absolute;z-index:1;font-size:.7em;display:block;border:0;background-position:0 0}.ui-slider.ui-state-disabled .ui-slider-handle,.ui-slider.ui-state-disabled .ui-slider-range{filter:inherit}.ui-slider-horizontal{height:.8em}.ui-slider-horizontal .ui-slider-handle{top:-.3em;margin-left:-.6em}.ui-slider-horizontal .ui-slider-range{top:0;height:100%}.ui-slider-horizontal .ui-slider-range-min{left:0}.ui-slider-horizontal .ui-slider-range-max{right:0}.ui-slider-vertical{width:.8em;height:100px}.ui-slider-vertical .ui-slider-handle{left:-.3em;margin-left:0;margin-bottom:-.6em}.ui-slider-vertical .ui-slider-range{left:0;width:100%}.ui-slider-vertical .ui-slider-range-min{bottom:0}.ui-slider-vertical .ui-slider-range-max{top:0}.ui-widget{font-family:Arial,Helvetica,sans-serif;font-size:1em}.ui-widget .ui-widget{font-size:1em}.ui-widget input,.ui-widget select,.ui-widget textarea,.ui-widget button{font-family:Arial,Helvetica,sans-serif;font-size:1em}.ui-widget.ui-widget-content{border:1px solid #c5c5c5}.ui-widget-content{border:1px solid #ddd;background:#fff;color:#333}.ui-widget-content a{color:#333}.ui-widget-header{border:1px solid #ddd;background:#e9e9e9;color:#333;font-weight:bold}.ui-widget-header a{color:#333}.ui-state-default,.ui-widget-content .ui-state-default,.ui-widget-header .ui-state-default,.ui-button,html .ui-button.ui-state-disabled:hover,html .ui-button.ui-state-disabled:active{border:1px solid #c5c5c5;background:#f6f6f6;font-weight:normal;color:#454545}.ui-state-default a,.ui-state-default a:link,.ui-state-default a:visited,a.ui-button,a:link.ui-button,a:visited.ui-button,.ui-button{color:#454545;text-decoration:none}.ui-state-hover,.ui-widget-content .ui-state-hover,.ui-widget-header .ui-state-hover,.ui-state-focus,.ui-widget-content .ui-state-focus,.ui-widget-header .ui-state-focus,.ui-button:hover,.ui-button:focus{border:1px solid #ccc;background:#ededed;font-weight:normal;color:#2b2b2b}.ui-state-hover a,.ui-state-hover a:hover,.ui-state-hover a:link,.ui-state-hover a:visited,.ui-state-focus a,.ui-state-focus a:hover,.ui-state-focus a:link,.ui-state-focus a:visited,a.ui-button:hover,a.ui-button:focus{color:#2b2b2b;text-decoration:none}.ui-visual-focus{box-shadow:0 0 3px 1px rgb(94,158,214)}.ui-state-active,.ui-widget-content .ui-state-active,.ui-widget-header .ui-state-active,a.ui-button:active,.ui-button:active,.ui-button.ui-state-active:hover{border:1px solid #003eff;background:#007fff;font-weight:normal;color:#fff}.ui-icon-background,.ui-state-active .ui-icon-background{border:#003eff;background-color:#fff}.ui-state-active a,.ui-state-active a:link,.ui-state-active a:visited{color:#fff;text-decoration:none}.ui-state-highlight,.ui-widget-content .ui-state-highlight,.ui-widget-header .ui-state-highlight{border:1px solid #dad55e;background:#fffa90;color:#777620}.ui-state-checked{border:1px solid #dad55e;background:#fffa90}.ui-state-highlight a,.ui-widget-content .ui-state-highlight a,.ui-widget-header .ui-state-highlight a{color:#777620}.ui-state-error,.ui-widget-content .ui-state-error,.ui-widget-header .ui-state-error{border:1px solid #f1a899;background:#fddfdf;color:#5f3f3f}.ui-state-error a,.ui-widget-content .ui-state-error a,.ui-widget-header .ui-state-error a{color:#5f3f3f}.ui-state-error-text,.ui-widget-content .ui-state-error-text,.ui-widget-header .ui-state-error-text{color:#5f3f3f}.ui-priority-primary,.ui-widget-content .ui-priority-primary,.ui-widget-header .ui-priority-primary{font-weight:bold}.ui-priority-secondary,.ui-widget-content .ui-priority-secondary,.ui-widget-header .ui-priority-secondary{opacity:.7;filter:Alpha(Opacity=70);font-weight:normal}.ui-state-disabled,.ui-widget-content .ui-state-disabled,.ui-widget-header .ui-state-disabled{opacity:.35;filter:Alpha(Opacity=35);background-image:none}.ui-state-disabled .ui-icon{filter:Alpha(Opacity=35)}.ui-icon{width:16px;height:16px}.ui-icon,.ui-widget-content .ui-icon{background-image:url('data:image/png;base64,')}.ui-widget-header .ui-icon{background-image:url('data:image/png;base64,')}.ui-button .ui-icon{background-image:url('data:image/png;base64,')}.ui-state-hover .ui-icon,.ui-state-focus .ui-icon,.ui-button:hover .ui-icon,.ui-button:focus .ui-icon,.ui-state-default .ui-icon{background-image:url('data:image/png;base64,')}.ui-state-active .ui-icon,.ui-button:active .ui-icon{background-image:url('data:image/png;base64,')}.ui-state-highlight .ui-icon,.ui-button .ui-state-highlight.ui-icon{background-image:url('data:image/png;base64,')}.ui-state-error .ui-icon,.ui-state-error-text .ui-icon{background-image:url('data:image/png;base64,')}.ui-icon-blank{background-position:16px 16px}.ui-icon-caret-1-n{background-position:0 0}.ui-icon-caret-1-ne{background-position:-16px 0}.ui-icon-caret-1-e{background-position:-32px 0}.ui-icon-caret-1-se{background-position:-48px 0}.ui-icon-caret-1-s{background-position:-65px 0}.ui-icon-caret-1-sw{background-position:-80px 0}.ui-icon-caret-1-w{background-position:-96px 0}.ui-icon-caret-1-nw{background-position:-112px 0}.ui-icon-caret-2-n-s{background-position:-128px 0}.ui-icon-caret-2-e-w{background-position:-144px 0}.ui-icon-triangle-1-n{background-position:0 -16px}.ui-icon-triangle-1-ne{background-position:-16px -16px}.ui-icon-triangle-1-e{background-position:-32px -16px}.ui-icon-triangle-1-se{background-position:-48px -16px}.ui-icon-triangle-1-s{background-position:-65px -16px}.ui-icon-triangle-1-sw{background-position:-80px -16px}.ui-icon-triangle-1-w{background-position:-96px -16px}.ui-icon-triangle-1-nw{background-position:-112px -16px}.ui-icon-triangle-2-n-s{background-position:-128px -16px}.ui-icon-triangle-2-e-w{background-position:-144px -16px}.ui-icon-arrow-1-n{background-position:0 -32px}.ui-icon-arrow-1-ne{background-position:-16px -32px}.ui-icon-arrow-1-e{background-position:-32px -32px}.ui-icon-arrow-1-se{background-position:-48px -32px}.ui-icon-arrow-1-s{background-position:-65px -32px}.ui-icon-arrow-1-sw{background-position:-80px -32px}.ui-icon-arrow-1-w{background-position:-96px -32px}.ui-icon-arrow-1-nw{background-position:-112px -32px}.ui-icon-arrow-2-n-s{background-position:-128px -32px}.ui-icon-arrow-2-ne-sw{background-position:-144px -32px}.ui-icon-arrow-2-e-w{background-position:-160px -32px}.ui-icon-arrow-2-se-nw{background-position:-176px -32px}.ui-icon-arrowstop-1-n{background-position:-192px -32px}.ui-icon-arrowstop-1-e{background-position:-208px -32px}.ui-icon-arrowstop-1-s{background-position:-224px -32px}.ui-icon-arrowstop-1-w{background-position:-240px -32px}.ui-icon-arrowthick-1-n{background-position:1px -48px}.ui-icon-arrowthick-1-ne{background-position:-16px -48px}.ui-icon-arrowthick-1-e{background-position:-32px -48px}.ui-icon-arrowthick-1-se{background-position:-48px -48px}.ui-icon-arrowthick-1-s{background-position:-64px -48px}.ui-icon-arrowthick-1-sw{background-position:-80px -48px}.ui-icon-arrowthick-1-w{background-position:-96px -48px}.ui-icon-arrowthick-1-nw{background-position:-112px -48px}.ui-icon-arrowthick-2-n-s{background-position:-128px -48px}.ui-icon-arrowthick-2-ne-sw{background-position:-144px -48px}.ui-icon-arrowthick-2-e-w{background-position:-160px -48px}.ui-icon-arrowthick-2-se-nw{background-position:-176px -48px}.ui-icon-arrowthickstop-1-n{background-position:-192px -48px}.ui-icon-arrowthickstop-1-e{background-position:-208px -48px}.ui-icon-arrowthickstop-1-s{background-position:-224px -48px}.ui-icon-arrowthickstop-1-w{background-position:-240px -48px}.ui-icon-arrowreturnthick-1-w{background-position:0 -64px}.ui-icon-arrowreturnthick-1-n{background-position:-16px -64px}.ui-icon-arrowreturnthick-1-e{background-position:-32px -64px}.ui-icon-arrowreturnthick-1-s{background-position:-48px -64px}.ui-icon-arrowreturn-1-w{background-position:-64px -64px}.ui-icon-arrowreturn-1-n{background-position:-80px -64px}.ui-icon-arrowreturn-1-e{background-position:-96px -64px}.ui-icon-arrowreturn-1-s{background-position:-112px -64px}.ui-icon-arrowrefresh-1-w{background-position:-128px -64px}.ui-icon-arrowrefresh-1-n{background-position:-144px -64px}.ui-icon-arrowrefresh-1-e{background-position:-160px -64px}.ui-icon-arrowrefresh-1-s{background-position:-176px -64px}.ui-icon-arrow-4{background-position:0 -80px}.ui-icon-arrow-4-diag{background-position:-16px -80px}.ui-icon-extlink{background-position:-32px -80px}.ui-icon-newwin{background-position:-48px -80px}.ui-icon-refresh{background-position:-64px -80px}.ui-icon-shuffle{background-position:-80px -80px}.ui-icon-transfer-e-w{background-position:-96px -80px}.ui-icon-transferthick-e-w{background-position:-112px -80px}.ui-icon-folder-collapsed{background-position:0 -96px}.ui-icon-folder-open{background-position:-16px -96px}.ui-icon-document{background-position:-32px -96px}.ui-icon-document-b{background-position:-48px -96px}.ui-icon-note{background-position:-64px -96px}.ui-icon-mail-closed{background-position:-80px -96px}.ui-icon-mail-open{background-position:-96px -96px}.ui-icon-suitcase{background-position:-112px -96px}.ui-icon-comment{background-position:-128px -96px}.ui-icon-person{background-position:-144px -96px}.ui-icon-print{background-position:-160px -96px}.ui-icon-trash{background-position:-176px -96px}.ui-icon-locked{background-position:-192px -96px}.ui-icon-unlocked{background-position:-208px -96px}.ui-icon-bookmark{background-position:-224px -96px}.ui-icon-tag{background-position:-240px -96px}.ui-icon-home{background-position:0 -112px}.ui-icon-flag{background-position:-16px -112px}.ui-icon-calendar{background-position:-32px -112px}.ui-icon-cart{background-position:-48px -112px}.ui-icon-pencil{background-position:-64px -112px}.ui-icon-clock{background-position:-80px -112px}.ui-icon-disk{background-position:-96px -112px}.ui-icon-calculator{background-position:-112px -112px}.ui-icon-zoomin{background-position:-128px -112px}.ui-icon-zoomout{background-position:-144px -112px}.ui-icon-search{background-position:-160px -112px}.ui-icon-wrench{background-position:-176px -112px}.ui-icon-gear{background-position:-192px -112px}.ui-icon-heart{background-position:-208px -112px}.ui-icon-star{background-position:-224px -112px}.ui-icon-link{background-position:-240px -112px}.ui-icon-cancel{background-position:0 -128px}.ui-icon-plus{background-position:-16px -128px}.ui-icon-plusthick{background-position:-32px -128px}.ui-icon-minus{background-position:-48px -128px}.ui-icon-minusthick{background-position:-64px -128px}.ui-icon-close{background-position:-80px -128px}.ui-icon-closethick{background-position:-96px -128px}.ui-icon-key{background-position:-112px -128px}.ui-icon-lightbulb{background-position:-128px -128px}.ui-icon-scissors{background-position:-144px -128px}.ui-icon-clipboard{background-position:-160px -128px}.ui-icon-copy{background-position:-176px -128px}.ui-icon-contact{background-position:-192px -128px}.ui-icon-image{background-position:-208px -128px}.ui-icon-video{background-position:-224px -128px}.ui-icon-script{background-position:-240px -128px}.ui-icon-alert{background-position:0 -144px}.ui-icon-info{background-position:-16px -144px}.ui-icon-notice{background-position:-32px -144px}.ui-icon-help{background-position:-48px -144px}.ui-icon-check{background-position:-64px -144px}.ui-icon-bullet{background-position:-80px -144px}.ui-icon-radio-on{background-position:-96px -144px}.ui-icon-radio-off{background-position:-112px -144px}.ui-icon-pin-w{background-position:-128px -144px}.ui-icon-pin-s{background-position:-144px -144px}.ui-icon-play{background-position:0 -160px}.ui-icon-pause{background-position:-16px -160px}.ui-icon-seek-next{background-position:-32px -160px}.ui-icon-seek-prev{background-position:-48px -160px}.ui-icon-seek-end{background-position:-64px -160px}.ui-icon-seek-start{background-position:-80px -160px}.ui-icon-seek-first{background-position:-80px -160px}.ui-icon-stop{background-position:-96px -160px}.ui-icon-eject{background-position:-112px -160px}.ui-icon-volume-off{background-position:-128px -160px}.ui-icon-volume-on{background-position:-144px -160px}.ui-icon-power{background-position:0 -176px}.ui-icon-signal-diag{background-position:-16px -176px}.ui-icon-signal{background-position:-32px -176px}.ui-icon-battery-0{background-position:-48px -176px}.ui-icon-battery-1{background-position:-64px -176px}.ui-icon-battery-2{background-position:-80px -176px}.ui-icon-battery-3{background-position:-96px -176px}.ui-icon-circle-plus{background-position:0 -192px}.ui-icon-circle-minus{background-position:-16px -192px}.ui-icon-circle-close{background-position:-32px -192px}.ui-icon-circle-triangle-e{background-position:-48px -192px}.ui-icon-circle-triangle-s{background-position:-64px -192px}.ui-icon-circle-triangle-w{background-position:-80px -192px}.ui-icon-circle-triangle-n{background-position:-96px -192px}.ui-icon-circle-arrow-e{background-position:-112px -192px}.ui-icon-circle-arrow-s{background-position:-128px -192px}.ui-icon-circle-arrow-w{background-position:-144px -192px}.ui-icon-circle-arrow-n{background-position:-160px -192px}.ui-icon-circle-zoomin{background-position:-176px -192px}.ui-icon-circle-zoomout{background-position:-192px -192px}.ui-icon-circle-check{background-position:-208px -192px}.ui-icon-circlesmall-plus{background-position:0 -208px}.ui-icon-circlesmall-minus{background-position:-16px -208px}.ui-icon-circlesmall-close{background-position:-32px -208px}.ui-icon-squaresmall-plus{background-position:-48px -208px}.ui-icon-squaresmall-minus{background-position:-64px -208px}.ui-icon-squaresmall-close{background-position:-80px -208px}.ui-icon-grip-dotted-vertical{background-position:0 -224px}.ui-icon-grip-dotted-horizontal{background-position:-16px -224px}.ui-icon-grip-solid-vertical{background-position:-32px -224px}.ui-icon-grip-solid-horizontal{background-position:-48px -224px}.ui-icon-gripsmall-diagonal-se{background-position:-64px -224px}.ui-icon-grip-diagonal-se{background-position:-80px -224px}.ui-corner-all,.ui-corner-top,.ui-corner-left,.ui-corner-tl{border-top-left-radius:3px}.ui-corner-all,.ui-corner-top,.ui-corner-right,.ui-corner-tr{border-top-right-radius:3px}.ui-corner-all,.ui-corner-bottom,.ui-corner-left,.ui-corner-bl{border-bottom-left-radius:3px}.ui-corner-all,.ui-corner-bottom,.ui-corner-right,.ui-corner-br{border-bottom-right-radius:3px}.ui-widget-overlay{background:#aaa;opacity:.3;filter:Alpha(Opacity=30)}.ui-widget-shadow{-webkit-box-shadow:0 0 5px #666;box-shadow:0 0 5px #666}</style> <style>html{ width:100%;min-width:775px;height:100%;overflow:hidden;padding:0;margin:0;background:black; }body{ width:100%;min-width:775px;height:100%;padding:0;margin:0;overflow:hidden; background:black; }p{ margin:15px 0 15px 0;}#basicUI{ position:absolute;top:53px;font-size:14px;color:#34495e;text-align:right;right:0px;width:400px;padding:20px 20px;}#showAdvancedOptions{ color:#ffffff;font-weight:900;}#hideAdvancedOptions{ font-size:14px;color:#34495e;font-weight:900;text-align:right;width:100%;display:inline-block;}#controlsBottom{ width:100%; max-width:850px;margin:auto;position:absolute;bottom:0;right:0;left:0;height:110px;font-weight:900;}#controlsBottom>div{ display:inline-block;}#bottomSliderContainer{ text-align:center;position:absolute;right:auto;left:auto;margin-top:20px;}#bottomSliderContainer>span{ font-size:14px;}#creasePercentBottom{ width:100%;margin-top:14px;margin-bottom:5px;}#creasePercentBottom>.flat-slider{ width:100%;margin:0;background:#e8e8e8;}.sliderEndPt{ text-align:center;width:100px;position:absolute;top:-30px;color:#34495e;line-height:18px;}#flatIndicator{ left:-50px;top:-15px;}.sliderEndPt>img{ width:100%;}#foldedIndicator{ right:-50px;top:-15px;}.sliderEndPt>.fui-triangle-down{ display:block;color:#34495e;margin-top:0px;}.sliderEndPtLabel{ color:#34495e;display:block; }#viewToggle{ display:none !important;left:30px;}#controlsToggle{ display:none !important;right:140px;}.preserveAspect{ width:auto;}.bigToggle{ height:90px;width:140px;text-align:center;position:absolute;font-size:14px; }.bigToggle>div{ border:2px solid #34495e;background:white;height:70px;overflow:hidden;border-radius:10px;margin-bottom:5px;}.bigToggle>div div{ padding:5px;width:50%;height:100%;display:inline-block;text-align:center;font-size:12px;color:#34495e;}.bigToggle div.active{ background:#e8e8e8;}.bigToggle .separator{ width:2px;height:68px;position:absolute;background:#34495e;padding:0;margin:0;}.bigToggle img{ display:inline-block;height:40px;}.bigToggle span{ display:block;width:100%;}#resetBottom{ display:none !important;position:absolute;right:30px;top:13px;color:#34495e;font-weight:900;}#controls{ position:absolute;top:53px;bottom:0;right:-430px;width:430px;padding:20px 20px;overflow:auto;background:rgba(10,10,10,0.1);}#controls>a{ }#controlsLeft{ position:absolute;bottom:0;left:-420px;width:420px;top:53px;padding:20px 20px;max-height:100%;overflow:auto;}#controlsLeft .radio{ width:240px;}.sliderInput{ float:right;display:inline-block;margin-bottom:15px;min-width:100px;}.sliderContainer{ display:block;margin-bottom:15px;}.indent{ padding-left:20px;}.doubleIndent{ padding-left:40px;}#gpuMathCanvas{ display:none;}a, a:hover, a:visited, a:focus{ color:#ec008b;}a.btn:visited, a.btn:focus{ color:white;}button{ border:0;outline:none;}.editable{ color:#34495e;height:42px;display:inline-block;line-height:42px;width:70px;text-overflow:ellipsis;overflow:hidden;white-space:nowrap }.editable:hover{ color:#34495e;cursor:text;}.editableInput{ display:none;outline:grey;padding:5px 7px;height:42px;line-height:42px;}.editableInput:focus{ outline:grey;border:none;}input.form-control{ width:90px;display:inline-block;}.radioSlider{ display:inline-block;float:right;}.form-control, .select2-search input[type=text]{ height:35px;}.floatRight{ float:right;}#threeContainer{ width:100%;height:100%;padding:0;position:absolute;top:0px;left:0px;} #threeContainer canvas, canvas{ background:transparent !important;background-color:transparent !important;} canvas[data-engine=\"three.js\"]{ background:none !important;opacity:1;}.slider.slider-horizontal{ width:200px;margin:0;padding:20px;top:10px;}.slider.slider-vertical{ height:200px;margin:0;padding:20px;}.flat-slider.ui-corner-all, .flat-slider .ui-corner-all{ border-radius:0;}.flat-slider.ui-slider{ border:0;background:#ffffff;border-radius:7px;}.flat-slider.ui-slider-horizontal{ height:6px;}.flat-slider.ui-slider-vertical{ width:6px;}.flat-slider .ui-slider-handle{ width:20px;height:20px;background:#666;border-radius:50%;border:none;cursor:pointer;}.flat-slider.ui-slider-horizontal .ui-slider-handle{ top:50%;margin-top:-10px;opacity:0.8;}.flat-slider.ui-slider-vertical .ui-slider-handle{ left:50%;margin-left:-10px;opacity:0.8;}.flat-slider .ui-slider-handle:hover{ opacity:0.7;}.flat-slider .ui-slider-handle:focus{ outline:none;}.flat-slider{ vertical-align:middle;display:inline-block;width:130px;position:relative;margin:10px 10px 10px 10px; }.modal-content{ border-radius:0;}.modal-body{ padding:20px 35px;}span.modal-close{ display:none;}.titleSpan{ display:inline-block;width:100%;margin-top:15px;}.form-control:focus{ border-color:#666;}.checkbox input.custom-checkbox[type=\"checkbox\"]:checked + .icons .icon-checked, .radio input.custom-checkbox[type=\"checkbox\"]:checked + .icons .icon-checked, .checkbox input.custom-radio[type=\"radio\"]:checked + .icons .icon-checked, .radio input.custom-radio[type=\"radio\"]:checked + .icons .icon-checked{ color:#666;}.checkbox .icon-checked, .radio .icon-checked, .checkbox .icon-unchecked, .radio .icon-unchecked{ color:#bdc3c7;}.radio .icon-checked{ transition-duration:0s;}.radio .icon-unchecked{ transition-duration:0s;}.sliderInput>.flat-slider{ width:90px;}.label-slider{ font-size:15px;}.extraSpace{ display:inline-block;width:100%;height:15px;}.flipped{ direction:rtl;}.flipped>div{ direction:ltr;}.paddingBottom{ margin-bottom:20px;}#svgViewer{ width:100%;height:100%;position:absolute;z-index:3;top:0px;right:0;background:white;display:none;padding-top:56px;}svg{ width:100%;height:100%;}.hexVal{ border-width:4px;}#warningMessage{ padding:30px 0;text-align:center;margin:0 18px;}.about{ margin-right:10px;color:#34495e!important;font-size:18px;line-height:18px;}#controls .about, #basicUI .about{ position:absolute;line-height:1.7;margin-top:2px;right:5px;}#aboutError{ line-height:2.0 }#aboutStiffness{ line-height:28px;}#aboutUserInteraction{ margin-top:10px!important;line-height:21px!important;}#aboutVR{ float:none;margin-left:40px;position:absolute;line-height:1.7;margin-top:2px;}#start, #stepForwardOptions{ display:none;}#stepForwardOptions{ width:100%;}#reset{ margin-left:20px;}#creasePercentNav{ margin-bottom:0;margin-top:12px;color:white;display:none;}.bigLabel{ font-size:16px;margin-top:20px;}.checkbox.bigLabel .icons, .radio .icons{ top:2px;}.smallTxt{ font-size:14px;}input.form-control.bigInput{ width:300px;}.actionButton{ min-width:110px;font-size:16px;}#unitsDropdown{ height:100px;overflow:auto;}.modal img{ width:200px;}a.seeMore{ float:none!important;color:#34495e;}a.seeMore>.fui-triangle-down{ display:inline-block;margin-right:10px;}a.seeMore.closed>.fui-triangle-down{ -ms-transform:rotate(-90deg); -webkit-transform:rotate(-90deg); transform:rotate(-90deg);}.hide{ display:none;}.inlineBlock{ display:inline-block;}.alignRight{ text-align:right;}.fullWidth{ width:100%;}#simulationSettings, #errorInfo, #animationsSettings, #cameraAngle, #edgeVisibility, #virtualReality, #materialSettings{ margin-top:15px;}.modal-body img{ margin-left:auto;margin-right:auto;display:block;}.colorSwatch{ display:inline-block;width:20px;height:10px;margin-right:10px;margin-bottom:2px;}#authorMoreInfo{ display:none;position:absolute;top:0px;left:100px;z-index:5;}#authorMoreInfo>#authorContent{ font-size:14px;background:#f5f5f5;padding:15px 25px;margin-left:20px;color:#34495e;white-space:normal;width:300px;border:2px solid #a8a6ae;}#authorMoreInfo a, #authorMoreInfo a:hover,#authorMoreInfo a:visited,#authorMoreInfo a:focus{ color:#ec008b !important;}#authorMoreInfo:after{ content:'';display:block;position:absolute;top:19px;left:11px;width:20px;height:20px;background:#f5f5f5;border-left:2px solid #a8a6ae;border-bottom:2px solid #a8a6ae;-ms-transform:rotate(45deg); -moz-transform:rotate(45deg);-webkit-transform:rotate(45deg);transform:rotate(45deg);}#helper{ display:none;position:absolute;padding:10px 15px;font-size:14px;background:#f5f5f5;margin-top:20px;opacity:0;top:54px;-webkit-transition:opacity 1s; transition:opacity 1s;left:140px;color:#34495e;white-space:normal;border:2px solid #a8a6ae; }#helper:after{ content:'';display:block;position:absolute;top:-12px;left:105px;width:20px;height:20px;background:#f5f5f5;border-left:2px solid #a8a6ae;border-top:2px solid #a8a6ae;-ms-transform:rotate(45deg); -moz-transform:rotate(45deg);-webkit-transform:rotate(45deg);transform:rotate(45deg);}#screenCaptureModal .modal-content, #animationSetupModal .modal-content{ background:rgba(255,255,255,0.9);}#recordStatus{ position:absolute;bottom:20px;width:350px;left:0;right:0;margin:0 auto;z-index:2;display:none;}#stopRecord{ display:block;margin-left:auto;margin-right:auto;}.animationStep{ margin:7px 0;display:inline-block;padding:5px 15px;background:#fff;}#animationSetupModal p, #animationSetupModal ul, #animationSetupModal div.btns{ text-align:center;padding:0;}.warning{ color:#f1970f;}.red{ color:red!important;}#coverImg{ z-index:5;position:absolute;top:0;left:0;width:100%;height:100%;}object{ width:100%;margin-bottom:10px;}#aboutCorner{ display:none;position:absolute;z-index:6;top:0;right:0;background:rgba(40, 40, 40, 0.7);width:30px;text-align:center;color:white;}#noSupportModal{ text-align:center;}#tipImportSVG{ float:left;display:inline-block;margin-top:8px;margin-left:20px;}#feedbackNotification{ position:absolute;z-index:10;right:130px;top:0;padding:5px 10px 4px;font-size:15px;font-weight:900;background:#ff64bf;display:none;flex-direction:row;align-items:center;}#feedbackNotification>span{ max-width:150px;text-align:center;display:inline-block;line-height:22px;}@media only screen and (max-width:1055px){ #feedbackNotification{ display:none;}}@media only screen and (max-width:890px){ #feedback{ display:none;}} #bottomButtonContainer{ display:flex;gap:20px;margin-left:40px;align-items:center;}#dlButton, #printButton{ color:#b0b0b0;text-decoration:bold;width:5em;text-align:center;font-size:9px;font-weight:500;cursor:pointer;transition:opacity 0.2s ease;border:none;background:none;padding:4px 8px;margin:0;white-space:nowrap;}#dlButton:hover, #printButton:hover{ opacity:0.7;text-decoration:none !important;}#dlButton:focus, #printButton:focus{ outline:none;text-decoration:none !important;}</style> <script>window.nftRenderComplete = false;\n\n        const nftData = JSON.parse(`___NFT_DATA_PLACEHOLDER___`);\n\n        const editMode = false;\n        window.editMode = editMode; \n\n        // public/svgs/SVG\n        const origamiPatterns = [\n            {\n                maxFolding: 95, \n                name: \"airplane.svg\", \n                patternType: \"Airplane\",\n                svgContent: `<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"-103.00553348064423 -102.4 974.0110632658004 1228.8\"><line stroke=\"#000\" opacity=\"1\" x1=\"384\" y1=\"0\" x2=\"0\" y2=\"0\" stroke-width=\"3.4133333333333336\"/><line stroke=\"#000\" opacity=\"1\" x1=\"384\" y1=\"0\" x2=\"768\" y2=\"0\" stroke-width=\"3.4133333333333336\"/><line stroke=\"#000\" opacity=\"1\" x1=\"768\" y1=\"256\" x2=\"768\" y2=\"384\" stroke-width=\"3.4133333333333336\"/><line stroke=\"#000\" opacity=\"1\" x1=\"768\" y1=\"160\" x2=\"768\" y2=\"256\" stroke-width=\"3.4133333333333336\"/><line stroke=\"#000\" opacity=\"1\" x1=\"768\" y1=\"160\" x2=\"768.20849609375\" y2=\"76.08484649658203\" stroke-width=\"3.4133333333333336\"/><line stroke=\"#000\" opacity=\"1\" x1=\"768\" y1=\"384\" x2=\"768.6055297851562\" y2=\"578.7706909179688\" stroke-width=\"3.4133333333333336\"/><line stroke=\"#000\" opacity=\"1\" x1=\"768.20849609375\" y1=\"76.08484649658203\" x2=\"768\" y2=\"0\" stroke-width=\"3.4133333333333336\"/><line stroke=\"#000\" opacity=\"1\" x1=\"768\" y1=\"928\" x2=\"768.6055297851562\" y2=\"578.7706909179688\" stroke-width=\"3.4133333333333336\"/><line stroke=\"#000\" opacity=\"1\" x1=\"768\" y1=\"928\" x2=\"768\" y2=\"1024\" stroke-width=\"3.4133333333333336\"/><line stroke=\"#000\" opacity=\"1\" x1=\"587.2386474609375\" y1=\"1023.8704223632812\" x2=\"768\" y2=\"1024\" stroke-width=\"3.4133333333333336\"/><line stroke=\"#000\" opacity=\"1\" x1=\"384\" y1=\"1024\" x2=\"180.76132202148438\" y2=\"1023.8704223632812\" stroke-width=\"3.4133333333333336\"/><line stroke=\"#000\" opacity=\"1\" x1=\"384\" y1=\"1024\" x2=\"587.2386474609375\" y2=\"1023.8704223632812\" stroke-width=\"3.4133333333333336\"/><line stroke=\"#000\" opacity=\"1\" x1=\"180.76132202148438\" y1=\"1023.8704223632812\" x2=\"0\" y2=\"1024\" stroke-width=\"3.4133333333333336\"/><line stroke=\"#000\" opacity=\"1\" x1=\"0\" y1=\"928\" x2=\"-0.6055334806442261\" y2=\"578.7706909179688\" stroke-width=\"3.4133333333333336\"/><line stroke=\"#000\" opacity=\"1\" x1=\"0\" y1=\"928\" x2=\"0\" y2=\"1024\" stroke-width=\"3.4133333333333336\"/><line stroke=\"#000\" opacity=\"1\" x1=\"0\" y1=\"256\" x2=\"0\" y2=\"384\" stroke-width=\"3.4133333333333336\"/><line stroke=\"#000\" opacity=\"1\" x1=\"0\" y1=\"160\" x2=\"0\" y2=\"256\" stroke-width=\"3.4133333333333336\"/><line stroke=\"#000\" opacity=\"1\" x1=\"0\" y1=\"160\" x2=\"-0.2085195928812027\" y2=\"76.08484649658203\" stroke-width=\"3.4133333333333336\"/><line stroke=\"#000\" opacity=\"1\" x1=\"0\" y1=\"384\" x2=\"-0.6055334806442261\" y2=\"578.7706909179688\" stroke-width=\"3.4133333333333336\"/><line stroke=\"#000\" opacity=\"1\" x1=\"-0.2085195928812027\" y1=\"76.08484649658203\" x2=\"0\" y2=\"0\" stroke-width=\"3.4133333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"384\" y1=\"0\" x2=\"0\" y2=\"160\" stroke-width=\"3.4133333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"384\" y1=\"0\" x2=\"768\" y2=\"160\" stroke-width=\"3.4133333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"384\" y1=\"0\" x2=\"0\" y2=\"256\" stroke-width=\"3.4133333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"384\" y1=\"0\" x2=\"768\" y2=\"256\" stroke-width=\"3.4133333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"0\" y1=\"384\" x2=\"384\" y2=\"0\" stroke-width=\"3.4133333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"768\" y1=\"384\" x2=\"384\" y2=\"0\" stroke-width=\"3.4133333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"384\" y1=\"0\" x2=\"384\" y2=\"1024\" stroke-width=\"3.4133333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"384\" y1=\"0\" x2=\"768\" y2=\"928\" stroke-width=\"3.4133333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"384\" y1=\"0\" x2=\"0\" y2=\"928\" stroke-width=\"3.4133333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"384\" y1=\"0\" x2=\"-0.2085195928812027\" y2=\"76.08484649658203\" stroke-width=\"3.4133333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"384\" y1=\"0\" x2=\"-0.6055334806442261\" y2=\"578.7706909179688\" stroke-width=\"3.4133333333333336\"/><line stroke=\"#00f\" opacity=\"0.5\" x1=\"384\" y1=\"0\" x2=\"180.76132202148438\" y2=\"1023.8704223632812\" stroke-width=\"3.4133333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"384\" y1=\"0\" x2=\"768.20849609375\" y2=\"76.08484649658203\" stroke-width=\"3.4133333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"384\" y1=\"0\" x2=\"768.6055297851562\" y2=\"578.7706909179688\" stroke-width=\"3.4133333333333336\"/><line stroke=\"#00f\" opacity=\"0.5\" x1=\"384\" y1=\"0\" x2=\"587.2386474609375\" y2=\"1023.8704223632812\" stroke-width=\"3.4133333333333336\"/></svg>`\n            },\n            {\n                maxFolding: 97, \n                name: \"traditionalCrane.svg\", \n                patternType: \"Crane\",\n                svgContent: `<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"369.5900909423828 229.02109069824218 706.2798400878906 706.3908325195313\"><line stroke=\"#000\" opacity=\"1\" x1=\"518.68798828125\" y1=\"287.8869934082031\" x2=\"428.4590148925781\" y2=\"288\" stroke-width=\"1.962196756998698\"/><line stroke=\"#000\" opacity=\"1\" x1=\"722.72900390625\" y1=\"288\" x2=\"790.1300048828125\" y2=\"288\" stroke-width=\"1.962196756998698\"/><line stroke=\"#000\" opacity=\"1\" x1=\"722.72900390625\" y1=\"288\" x2=\"518.68798828125\" y2=\"287.8869934082031\" stroke-width=\"1.962196756998698\"/><line stroke=\"#000\" opacity=\"1\" x1=\"790.1300048828125\" y1=\"288\" x2=\"1017.0029907226562\" y2=\"288\" stroke-width=\"1.962196756998698\"/><line stroke=\"#000\" opacity=\"1\" x1=\"1017.0040283203125\" y1=\"515.031982421875\" x2=\"1017.0029907226562\" y2=\"288\" stroke-width=\"1.962196756998698\"/><line stroke=\"#000\" opacity=\"1\" x1=\"1017.0009765625\" y1=\"582.27001953125\" x2=\"1017.0040283203125\" y2=\"515.031982421875\" stroke-width=\"1.962196756998698\"/><line stroke=\"#000\" opacity=\"1\" x1=\"1017.0009765625\" y1=\"582.27001953125\" x2=\"1017.0029907226562\" y2=\"876.5449829101562\" stroke-width=\"1.962196756998698\"/><line stroke=\"#000\" opacity=\"1\" x1=\"722.72900390625\" y1=\"876.5430297851562\" x2=\"655.4910278320312\" y2=\"876.5460205078125\" stroke-width=\"1.962196756998698\"/><line stroke=\"#000\" opacity=\"1\" x1=\"722.72900390625\" y1=\"876.5430297851562\" x2=\"1017.0029907226562\" y2=\"876.5449829101562\" stroke-width=\"1.962196756998698\"/><line stroke=\"#000\" opacity=\"1\" x1=\"655.4910278320312\" y1=\"876.5460205078125\" x2=\"428.4590148925781\" y2=\"876.5440063476562\" stroke-width=\"1.962196756998698\"/><line stroke=\"#000\" opacity=\"1\" x1=\"428.45599365234375\" y1=\"582.27099609375\" x2=\"428.4590148925781\" y2=\"649.6719970703125\" stroke-width=\"1.962196756998698\"/><line stroke=\"#000\" opacity=\"1\" x1=\"428.45599365234375\" y1=\"582.27099609375\" x2=\"428.4630126953125\" y2=\"379.25\" stroke-width=\"1.962196756998698\"/><line stroke=\"#000\" opacity=\"1\" x1=\"428.4590148925781\" y1=\"649.6719970703125\" x2=\"428.4590148925781\" y2=\"876.5440063476562\" stroke-width=\"1.962196756998698\"/><line stroke=\"#000\" opacity=\"1\" x1=\"428.4630126953125\" y1=\"379.25\" x2=\"428.4590148925781\" y2=\"288\" stroke-width=\"1.962196756998698\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"808.9219970703125\" y1=\"668.4619750976562\" x2=\"1017.0029907226562\" y2=\"876.5449829101562\" stroke-width=\"1.962196756998698\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"492.7040100097656\" y1=\"352.2449951171875\" x2=\"636.5369873046875\" y2=\"496.0780029296875\" stroke-width=\"1.962196756998698\"/><line stroke=\"#f00\" opacity=\"0.25\" x1=\"722.7315062710079\" y1=\"582.2720030850569\" x2=\"625.0850219726562\" y2=\"582.2750244140625\" stroke-width=\"1.962196756998698\"/><line stroke=\"#f00\" opacity=\"0.25\" x1=\"722.7315062710079\" y1=\"582.2720030850569\" x2=\"820.3790283203125\" y2=\"582.2730102539062\" stroke-width=\"1.962196756998698\"/><line stroke=\"#f00\" opacity=\"0.25\" x1=\"722.7315062710079\" y1=\"582.2720030850569\" x2=\"722.72900390625\" y2=\"484.6300048828125\" stroke-width=\"1.962196756998698\"/><line stroke=\"#f00\" opacity=\"0.25\" x1=\"722.7315062710079\" y1=\"582.2720030850569\" x2=\"722.7340087890625\" y2=\"679.9199829101562\" stroke-width=\"1.962196756998698\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"895.1110229492188\" y1=\"582.27099609375\" x2=\"1017.0029907226562\" y2=\"876.5449829101562\" stroke-width=\"1.962196756998698\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"864.2529907226562\" y1=\"647.93798828125\" x2=\"820.3790283203125\" y2=\"582.2730102539062\" stroke-width=\"1.962196756998698\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"864.2529907226562\" y1=\"647.93798828125\" x2=\"1017.0029907226562\" y2=\"876.5449829101562\" stroke-width=\"1.962196756998698\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"918.18798828125\" y1=\"526.5609741210938\" x2=\"895.1110229492188\" y2=\"582.27099609375\" stroke-width=\"1.962196756998698\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"938.052978515625\" y1=\"479.6340026855469\" x2=\"918.18798828125\" y2=\"526.5609741210938\" stroke-width=\"1.962196756998698\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"938.052978515625\" y1=\"479.6340026855469\" x2=\"1017.0029907226562\" y2=\"288\" stroke-width=\"1.962196756998698\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"778.6019897460938\" y1=\"386.81500244140625\" x2=\"722.72900390625\" y2=\"409.89300537109375\" stroke-width=\"1.962196756998698\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"825.3709716796875\" y1=\"366.95599365234375\" x2=\"778.6019897460938\" y2=\"386.81500244140625\" stroke-width=\"1.962196756998698\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"825.3709716796875\" y1=\"366.95599365234375\" x2=\"1017.0029907226562\" y2=\"288\" stroke-width=\"1.962196756998698\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"907.4730224609375\" y1=\"499.7699890136719\" x2=\"850.31201171875\" y2=\"537.4769897460938\" stroke-width=\"1.962196756998698\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"907.4730224609375\" y1=\"499.7699890136719\" x2=\"938.052978515625\" y2=\"479.6340026855469\" stroke-width=\"1.962196756998698\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"722.72998046875\" y1=\"754.6519775390625\" x2=\"1017.0029907226562\" y2=\"876.5449829101562\" stroke-width=\"1.962196756998698\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"788.3980102539062\" y1=\"723.7960205078125\" x2=\"722.7340087890625\" y2=\"679.9199829101562\" stroke-width=\"1.962196756998698\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"788.3980102539062\" y1=\"723.7960205078125\" x2=\"1017.0029907226562\" y2=\"876.5449829101562\" stroke-width=\"1.962196756998698\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"667.02001953125\" y1=\"777.72998046875\" x2=\"722.72998046875\" y2=\"754.6519775390625\" stroke-width=\"1.962196756998698\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"620.0919799804688\" y1=\"797.593994140625\" x2=\"667.02001953125\" y2=\"777.72998046875\" stroke-width=\"1.962196756998698\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"620.0919799804688\" y1=\"797.593994140625\" x2=\"428.4590148925781\" y2=\"876.5440063476562\" stroke-width=\"1.962196756998698\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"527.2730102539062\" y1=\"638.1430053710938\" x2=\"550.3469848632812\" y2=\"582.27001953125\" stroke-width=\"1.962196756998698\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"507.4100036621094\" y1=\"684.9169921875\" x2=\"527.2730102539062\" y2=\"638.1430053710938\" stroke-width=\"1.962196756998698\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"507.4100036621094\" y1=\"684.9169921875\" x2=\"428.4590148925781\" y2=\"876.5440063476562\" stroke-width=\"1.962196756998698\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"640.22900390625\" y1=\"767.0159912109375\" x2=\"677.9290161132812\" y2=\"709.85498046875\" stroke-width=\"1.962196756998698\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"640.22900390625\" y1=\"767.0159912109375\" x2=\"620.0919799804688\" y2=\"797.593994140625\" stroke-width=\"1.962196756998698\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"519.2020263671875\" y1=\"325.5920104980469\" x2=\"722.72900390625\" y2=\"409.89300537109375\" stroke-width=\"1.962196756998698\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"519.2020263671875\" y1=\"325.5920104980469\" x2=\"428.4590148925781\" y2=\"288\" stroke-width=\"1.962196756998698\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"657.0609741210938\" y1=\"440.74700927734375\" x2=\"498.7229919433594\" y2=\"335.2149963378906\" stroke-width=\"1.962196756998698\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"657.0609741210938\" y1=\"440.74700927734375\" x2=\"722.72900390625\" y2=\"484.6300048828125\" stroke-width=\"1.962196756998698\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"498.7229919433594\" y1=\"335.2149963378906\" x2=\"428.4590148925781\" y2=\"288\" stroke-width=\"1.962196756998698\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"466.218994140625\" y1=\"378.9389953613281\" x2=\"550.3469848632812\" y2=\"582.27001953125\" stroke-width=\"1.962196756998698\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"466.218994140625\" y1=\"378.9389953613281\" x2=\"428.4590148925781\" y2=\"288\" stroke-width=\"1.962196756998698\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"581.2030029296875\" y1=\"516.6019897460938\" x2=\"475.72698974609375\" y2=\"358.7080078125\" stroke-width=\"1.962196756998698\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"581.2030029296875\" y1=\"516.6019897460938\" x2=\"625.0850219726562\" y2=\"582.2750244140625\" stroke-width=\"1.962196756998698\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"475.72698974609375\" y1=\"358.7080078125\" x2=\"428.4590148925781\" y2=\"288\" stroke-width=\"1.962196756998698\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"805.3930053710938\" y1=\"397.531005859375\" x2=\"767.530029296875\" y2=\"454.6929931640625\" stroke-width=\"1.962196756998698\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"805.3930053710938\" y1=\"397.531005859375\" x2=\"825.3709716796875\" y2=\"366.95599365234375\" stroke-width=\"1.962196756998698\"/><line stroke=\"#f00\" opacity=\"0.75\" x1=\"1017.0009765625\" y1=\"582.27001953125\" x2=\"963.3629760742188\" y2=\"606.8880004882812\" stroke-width=\"1.962196756998698\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"895.1110229492188\" y1=\"582.27099609375\" x2=\"864.2529907226562\" y2=\"647.93798828125\" stroke-width=\"1.962196756998698\"/><line stroke=\"#f00\" opacity=\"0.75\" x1=\"722.72900390625\" y1=\"876.5430297851562\" x2=\"747.3469848632812\" y2=\"822.905029296875\" stroke-width=\"1.962196756998698\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"722.72998046875\" y1=\"754.6519775390625\" x2=\"788.3980102539062\" y2=\"723.7960205078125\" stroke-width=\"1.962196756998698\"/><line stroke=\"#f00\" opacity=\"0.75\" x1=\"722.72900390625\" y1=\"288\" x2=\"698.1119995117188\" y2=\"341.63800048828125\" stroke-width=\"1.962196756998698\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"722.72900390625\" y1=\"409.89300537109375\" x2=\"657.0609741210938\" y2=\"440.74700927734375\" stroke-width=\"1.962196756998698\"/><line stroke=\"#f00\" opacity=\"0.75\" x1=\"428.45599365234375\" y1=\"582.27099609375\" x2=\"482.093994140625\" y2=\"557.6539916992188\" stroke-width=\"1.962196756998698\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"550.3469848632812\" y1=\"582.27001953125\" x2=\"581.2030029296875\" y2=\"516.6019897460938\" stroke-width=\"1.962196756998698\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"537.989990234375\" y1=\"664.9340209960938\" x2=\"595.1500244140625\" y2=\"627.0770263671875\" stroke-width=\"1.962196756998698\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"537.989990234375\" y1=\"664.9340209960938\" x2=\"507.4100036621094\" y2=\"684.9169921875\" stroke-width=\"1.962196756998698\"/><line stroke=\"#f00\" opacity=\"0.25\" x1=\"537.989990234375\" y1=\"664.9340209960938\" x2=\"640.22900390625\" y2=\"767.0159912109375\" stroke-width=\"1.962196756998698\"/><line stroke=\"#f00\" opacity=\"0.25\" x1=\"667.02001953125\" y1=\"777.72998046875\" x2=\"655.4910278320312\" y2=\"804.3629760742188\" stroke-width=\"1.962196756998698\"/><line stroke=\"#f00\" opacity=\"0.25\" x1=\"527.2730102539062\" y1=\"638.1430053710938\" x2=\"500.6419982910156\" y2=\"649.6719970703125\" stroke-width=\"1.962196756998698\"/><line stroke=\"#f00\" opacity=\"0.25\" x1=\"805.3930053710938\" y1=\"397.531005859375\" x2=\"907.4730224609375\" y2=\"499.7699890136719\" stroke-width=\"1.962196756998698\"/><line stroke=\"#f00\" opacity=\"0.25\" x1=\"918.18798828125\" y1=\"526.5609741210938\" x2=\"944.8209838867188\" y2=\"515.031982421875\" stroke-width=\"1.962196756998698\"/><line stroke=\"#f00\" opacity=\"0.25\" x1=\"778.6019897460938\" y1=\"386.81500244140625\" x2=\"790.1300048828125\" y2=\"360.1830139160156\" stroke-width=\"1.962196756998698\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"511.17498779296875\" y1=\"304.2550048828125\" x2=\"519.2020263671875\" y2=\"325.5920104980469\" stroke-width=\"1.962196756998698\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"498.7229919433594\" y1=\"335.2149963378906\" x2=\"492.7040100097656\" y2=\"352.2449951171875\" stroke-width=\"1.962196756998698\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"475.72698974609375\" y1=\"358.7080078125\" x2=\"492.7040100097656\" y2=\"352.2449951171875\" stroke-width=\"1.962196756998698\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"466.218994140625\" y1=\"378.9389953613281\" x2=\"445.06201171875\" y2=\"371.6319885253906\" stroke-width=\"1.962196756998698\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"722.72900390625\" y1=\"484.6300048828125\" x2=\"722.72900390625\" y2=\"409.89300537109375\" stroke-width=\"1.962196756998698\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"625.0850219726562\" y1=\"582.2750244140625\" x2=\"550.3469848632812\" y2=\"582.27001953125\" stroke-width=\"1.962196756998698\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"820.3790283203125\" y1=\"582.2730102539062\" x2=\"895.1110229492188\" y2=\"582.27099609375\" stroke-width=\"1.962196756998698\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"722.7340087890625\" y1=\"679.9199829101562\" x2=\"722.72998046875\" y2=\"754.6519775390625\" stroke-width=\"1.962196756998698\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"944.8209838867188\" y1=\"515.031982421875\" x2=\"938.052978515625\" y2=\"479.6340026855469\" stroke-width=\"1.962196756998698\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"963.3629760742188\" y1=\"606.8880004882812\" x2=\"944.8209838867188\" y2=\"515.031982421875\" stroke-width=\"1.962196756998698\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"963.3629760742188\" y1=\"606.8880004882812\" x2=\"1017.0029907226562\" y2=\"876.5449829101562\" stroke-width=\"1.962196756998698\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"767.530029296875\" y1=\"454.6929931640625\" x2=\"722.72900390625\" y2=\"409.89300537109375\" stroke-width=\"1.962196756998698\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"850.31201171875\" y1=\"537.4769897460938\" x2=\"767.530029296875\" y2=\"454.6929931640625\" stroke-width=\"1.962196756998698\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"850.31201171875\" y1=\"537.4769897460938\" x2=\"895.1110229492188\" y2=\"582.27099609375\" stroke-width=\"1.962196756998698\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"820.3790283203125\" y1=\"582.2730102539062\" x2=\"850.31201171875\" y2=\"537.4769897460938\" stroke-width=\"1.962196756998698\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"655.4910278320312\" y1=\"804.3629760742188\" x2=\"620.0919799804688\" y2=\"797.593994140625\" stroke-width=\"1.962196756998698\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"747.3469848632812\" y1=\"822.905029296875\" x2=\"655.4910278320312\" y2=\"804.3629760742188\" stroke-width=\"1.962196756998698\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"747.3469848632812\" y1=\"822.905029296875\" x2=\"1017.0029907226562\" y2=\"876.5449829101562\" stroke-width=\"1.962196756998698\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"595.1500244140625\" y1=\"627.0770263671875\" x2=\"550.3469848632812\" y2=\"582.27001953125\" stroke-width=\"1.962196756998698\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"677.9290161132812\" y1=\"709.85498046875\" x2=\"595.1500244140625\" y2=\"627.0770263671875\" stroke-width=\"1.962196756998698\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"677.9290161132812\" y1=\"709.85498046875\" x2=\"722.72998046875\" y2=\"754.6519775390625\" stroke-width=\"1.962196756998698\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"722.7340087890625\" y1=\"679.9199829101562\" x2=\"677.9290161132812\" y2=\"709.85498046875\" stroke-width=\"1.962196756998698\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"698.1119995117188\" y1=\"341.63800048828125\" x2=\"790.1300048828125\" y2=\"360.1830139160156\" stroke-width=\"1.962196756998698\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"698.1119995117188\" y1=\"341.63800048828125\" x2=\"511.17498779296875\" y2=\"304.2550048828125\" stroke-width=\"1.962196756998698\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"790.1300048828125\" y1=\"360.1830139160156\" x2=\"825.3709716796875\" y2=\"366.95599365234375\" stroke-width=\"1.962196756998698\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"511.17498779296875\" y1=\"304.2550048828125\" x2=\"428.4590148925781\" y2=\"288\" stroke-width=\"1.962196756998698\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"482.093994140625\" y1=\"557.6539916992188\" x2=\"500.6419982910156\" y2=\"649.6719970703125\" stroke-width=\"1.962196756998698\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"482.093994140625\" y1=\"557.6539916992188\" x2=\"445.06201171875\" y2=\"371.6319885253906\" stroke-width=\"1.962196756998698\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"500.6419982910156\" y1=\"649.6719970703125\" x2=\"507.4100036621094\" y2=\"684.9169921875\" stroke-width=\"1.962196756998698\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"445.06201171875\" y1=\"371.6319885253906\" x2=\"428.4590148925781\" y2=\"288\" stroke-width=\"1.962196756998698\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"722.72900390625\" y1=\"484.6300048828125\" x2=\"767.530029296875\" y2=\"454.6929931640625\" stroke-width=\"1.962196756998698\"/><line stroke=\"#00f\" opacity=\"0.75\" x1=\"963.3629760742188\" y1=\"606.8880004882812\" x2=\"895.1110229492188\" y2=\"582.27099609375\" stroke-width=\"1.962196756998698\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"864.2529907226562\" y1=\"647.93798828125\" x2=\"808.9219970703125\" y2=\"668.4619750976562\" stroke-width=\"1.962196756998698\"/><line stroke=\"#00f\" opacity=\"0.75\" x1=\"747.3469848632812\" y1=\"822.905029296875\" x2=\"722.72998046875\" y2=\"754.6519775390625\" stroke-width=\"1.962196756998698\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"788.3980102539062\" y1=\"723.7960205078125\" x2=\"808.9219970703125\" y2=\"668.4619750976562\" stroke-width=\"1.962196756998698\"/><line stroke=\"#00f\" opacity=\"0.75\" x1=\"698.1119995117188\" y1=\"341.63800048828125\" x2=\"722.72900390625\" y2=\"409.89300537109375\" stroke-width=\"1.962196756998698\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"657.0609741210938\" y1=\"440.74700927734375\" x2=\"636.5369873046875\" y2=\"496.0780029296875\" stroke-width=\"1.962196756998698\"/><line stroke=\"#00f\" opacity=\"0.75\" x1=\"482.093994140625\" y1=\"557.6539916992188\" x2=\"550.3469848632812\" y2=\"582.27001953125\" stroke-width=\"1.962196756998698\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"581.2030029296875\" y1=\"516.6019897460938\" x2=\"636.5369873046875\" y2=\"496.0780029296875\" stroke-width=\"1.962196756998698\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"625.0850219726562\" y1=\"582.2750244140625\" x2=\"595.1500244140625\" y2=\"627.0770263671875\" stroke-width=\"1.962196756998698\"/><line stroke=\"#00f\" opacity=\"0.25\" x1=\"667.02001953125\" y1=\"777.72998046875\" x2=\"640.22900390625\" y2=\"767.0159912109375\" stroke-width=\"1.962196756998698\"/><line stroke=\"#00f\" opacity=\"0.25\" x1=\"655.4910278320312\" y1=\"876.5460205078125\" x2=\"655.4910278320312\" y2=\"804.3629760742188\" stroke-width=\"1.962196756998698\"/><line stroke=\"#00f\" opacity=\"0.25\" x1=\"527.2730102539062\" y1=\"638.1430053710938\" x2=\"537.989990234375\" y2=\"664.9340209960938\" stroke-width=\"1.962196756998698\"/><line stroke=\"#00f\" opacity=\"0.25\" x1=\"428.4590148925781\" y1=\"649.6719970703125\" x2=\"500.6419982910156\" y2=\"649.6719970703125\" stroke-width=\"1.962196756998698\"/><line stroke=\"#00f\" opacity=\"0.25\" x1=\"918.18798828125\" y1=\"526.5609741210938\" x2=\"907.4730224609375\" y2=\"499.7699890136719\" stroke-width=\"1.962196756998698\"/><line stroke=\"#00f\" opacity=\"0.25\" x1=\"1017.0040283203125\" y1=\"515.031982421875\" x2=\"944.8209838867188\" y2=\"515.031982421875\" stroke-width=\"1.962196756998698\"/><line stroke=\"#00f\" opacity=\"0.25\" x1=\"778.6019897460938\" y1=\"386.81500244140625\" x2=\"805.3930053710938\" y2=\"397.531005859375\" stroke-width=\"1.962196756998698\"/><line stroke=\"#00f\" opacity=\"0.25\" x1=\"790.1300048828125\" y1=\"288\" x2=\"790.1300048828125\" y2=\"360.1830139160156\" stroke-width=\"1.962196756998698\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"518.68798828125\" y1=\"287.8869934082031\" x2=\"511.17498779296875\" y2=\"304.2550048828125\" stroke-width=\"1.962196756998698\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"519.2020263671875\" y1=\"325.5920104980469\" x2=\"498.7229919433594\" y2=\"335.2149963378906\" stroke-width=\"1.962196756998698\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"445.06201171875\" y1=\"371.6319885253906\" x2=\"428.4630126953125\" y2=\"379.25\" stroke-width=\"1.962196756998698\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"475.72698974609375\" y1=\"358.7080078125\" x2=\"466.218994140625\" y2=\"378.9389953613281\" stroke-width=\"1.962196756998698\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"492.7040100097656\" y1=\"352.2449951171875\" x2=\"428.4590148925781\" y2=\"288\" stroke-width=\"1.962196756998698\"/><line stroke=\"#00f\" opacity=\"0.5\" x1=\"722.7315062710079\" y1=\"582.2720030850569\" x2=\"636.5369873046875\" y2=\"496.0780029296875\" stroke-width=\"1.962196756998698\"/><line stroke=\"#00f\" opacity=\"0.5\" x1=\"722.7315062710079\" y1=\"582.2720030850569\" x2=\"808.9219970703125\" y2=\"668.4619750976562\" stroke-width=\"1.962196756998698\"/><line stroke=\"#ff0\" opacity=\"1\" x1=\"625.0850219726562\" y1=\"582.2750244140625\" x2=\"722.7340087890625\" y2=\"679.9199829101562\" stroke-width=\"1.962196756998698\"/><line stroke=\"#ff0\" opacity=\"1\" x1=\"722.72900390625\" y1=\"484.6300048828125\" x2=\"820.3790283203125\" y2=\"582.2730102539062\" stroke-width=\"1.962196756998698\"/><line stroke=\"#ff0\" opacity=\"1\" x1=\"722.7340087890625\" y1=\"679.9199829101562\" x2=\"808.9219970703125\" y2=\"668.4619750976562\" stroke-width=\"1.962196756998698\"/><line stroke=\"#ff0\" opacity=\"1\" x1=\"808.9219970703125\" y1=\"668.4619750976562\" x2=\"820.3790283203125\" y2=\"582.2730102539062\" stroke-width=\"1.962196756998698\"/><line stroke=\"#ff0\" opacity=\"1\" x1=\"722.72900390625\" y1=\"484.6300048828125\" x2=\"636.5369873046875\" y2=\"496.0780029296875\" stroke-width=\"1.962196756998698\"/><line stroke=\"#ff0\" opacity=\"1\" x1=\"636.5369873046875\" y1=\"496.0780029296875\" x2=\"625.0850219726562\" y2=\"582.2750244140625\" stroke-width=\"1.962196756998698\"/><line stroke=\"#ff0\" opacity=\"1\" x1=\"428.4590148925781\" y1=\"876.5440063476562\" x2=\"537.989990234375\" y2=\"664.9340209960938\" stroke-width=\"1.962196756998698\"/><line stroke=\"#ff0\" opacity=\"1\" x1=\"640.22900390625\" y1=\"767.0159912109375\" x2=\"428.4590148925781\" y2=\"876.5440063476562\" stroke-width=\"1.962196756998698\"/><line stroke=\"#ff0\" opacity=\"1\" x1=\"907.4730224609375\" y1=\"499.7699890136719\" x2=\"1017.0029907226562\" y2=\"288\" stroke-width=\"1.962196756998698\"/><line stroke=\"#ff0\" opacity=\"1\" x1=\"805.3930053710938\" y1=\"397.531005859375\" x2=\"1017.0029907226562\" y2=\"288\" stroke-width=\"1.962196756998698\"/></svg>`\n            },\n            {\n                maxFolding: 70, \n                name: \"hypar.svg\", \n                patternType: \"Hypar\",\n                svgContent: `<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"57.599999999999994 57.599999999999994 1036.8 1036.8\"><line stroke=\"#000\" opacity=\"1\" x1=\"1008\" y1=\"1008\" x2=\"144\" y2=\"1008\" stroke-width=\"2.88\"/><line stroke=\"#000\" opacity=\"1\" x1=\"144\" y1=\"1008\" x2=\"144\" y2=\"144\" stroke-width=\"2.88\"/><line stroke=\"#000\" opacity=\"1\" x1=\"144\" y1=\"144\" x2=\"1008\" y2=\"144\" stroke-width=\"2.88\"/><line stroke=\"#000\" opacity=\"1\" x1=\"1008\" y1=\"144\" x2=\"1008\" y2=\"1008\" stroke-width=\"2.88\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"666\" y1=\"486\" x2=\"486\" y2=\"486\" stroke-width=\"2.88\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"486\" y1=\"486\" x2=\"486\" y2=\"666\" stroke-width=\"2.88\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"486\" y1=\"666\" x2=\"666\" y2=\"666\" stroke-width=\"2.88\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"666\" y1=\"666\" x2=\"666\" y2=\"486\" stroke-width=\"2.88\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"990\" y1=\"990\" x2=\"162\" y2=\"990\" stroke-width=\"2.88\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"162\" y1=\"990\" x2=\"162\" y2=\"162\" stroke-width=\"2.88\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"162\" y1=\"162\" x2=\"990\" y2=\"162\" stroke-width=\"2.88\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"990\" y1=\"162\" x2=\"990\" y2=\"990\" stroke-width=\"2.88\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"954\" y1=\"198\" x2=\"198\" y2=\"198\" stroke-width=\"2.88\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"198\" y1=\"198\" x2=\"198\" y2=\"954\" stroke-width=\"2.88\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"198\" y1=\"954\" x2=\"954\" y2=\"954\" stroke-width=\"2.88\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"954\" y1=\"954\" x2=\"954\" y2=\"198\" stroke-width=\"2.88\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"918\" y1=\"234\" x2=\"234\" y2=\"234\" stroke-width=\"2.88\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"234\" y1=\"234\" x2=\"234\" y2=\"918\" stroke-width=\"2.88\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"234\" y1=\"918\" x2=\"918\" y2=\"918\" stroke-width=\"2.88\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"918\" y1=\"918\" x2=\"918\" y2=\"234\" stroke-width=\"2.88\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"846\" y1=\"306\" x2=\"306\" y2=\"306\" stroke-width=\"2.88\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"306\" y1=\"306\" x2=\"306\" y2=\"846\" stroke-width=\"2.88\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"306\" y1=\"846\" x2=\"846\" y2=\"846\" stroke-width=\"2.88\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"846\" y1=\"846\" x2=\"846\" y2=\"306\" stroke-width=\"2.88\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"882\" y1=\"270\" x2=\"270\" y2=\"270\" stroke-width=\"2.88\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"270\" y1=\"270\" x2=\"270\" y2=\"882\" stroke-width=\"2.88\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"270\" y1=\"882\" x2=\"882\" y2=\"882\" stroke-width=\"2.88\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"882\" y1=\"882\" x2=\"882\" y2=\"270\" stroke-width=\"2.88\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"810\" y1=\"342\" x2=\"342\" y2=\"342\" stroke-width=\"2.88\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"342\" y1=\"342\" x2=\"342\" y2=\"810\" stroke-width=\"2.88\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"342\" y1=\"810\" x2=\"810\" y2=\"810\" stroke-width=\"2.88\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"810\" y1=\"810\" x2=\"810\" y2=\"342\" stroke-width=\"2.88\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"774\" y1=\"378\" x2=\"378\" y2=\"378\" stroke-width=\"2.88\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"378\" y1=\"378\" x2=\"378\" y2=\"774\" stroke-width=\"2.88\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"378\" y1=\"774\" x2=\"774\" y2=\"774\" stroke-width=\"2.88\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"774\" y1=\"774\" x2=\"774\" y2=\"378\" stroke-width=\"2.88\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"738\" y1=\"414\" x2=\"414\" y2=\"414\" stroke-width=\"2.88\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"414\" y1=\"414\" x2=\"414\" y2=\"738\" stroke-width=\"2.88\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"414\" y1=\"738\" x2=\"738\" y2=\"738\" stroke-width=\"2.88\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"738\" y1=\"738\" x2=\"738\" y2=\"414\" stroke-width=\"2.88\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"702\" y1=\"450\" x2=\"450\" y2=\"450\" stroke-width=\"2.88\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"450\" y1=\"450\" x2=\"450\" y2=\"702\" stroke-width=\"2.88\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"450\" y1=\"702\" x2=\"702\" y2=\"702\" stroke-width=\"2.88\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"702\" y1=\"702\" x2=\"702\" y2=\"450\" stroke-width=\"2.88\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"1008\" y1=\"1008\" x2=\"990\" y2=\"990\" stroke-width=\"2.88\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"972\" y1=\"972\" x2=\"954\" y2=\"954\" stroke-width=\"2.88\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"936\" y1=\"936\" x2=\"918\" y2=\"918\" stroke-width=\"2.88\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"900\" y1=\"900\" x2=\"882\" y2=\"882\" stroke-width=\"2.88\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"864\" y1=\"864\" x2=\"846\" y2=\"846\" stroke-width=\"2.88\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"828\" y1=\"828\" x2=\"810\" y2=\"810\" stroke-width=\"2.88\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"792\" y1=\"792\" x2=\"774\" y2=\"774\" stroke-width=\"2.88\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"756\" y1=\"756\" x2=\"738\" y2=\"738\" stroke-width=\"2.88\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"720\" y1=\"720\" x2=\"702\" y2=\"702\" stroke-width=\"2.88\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"486\" y1=\"486\" x2=\"468\" y2=\"468\" stroke-width=\"2.88\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"450\" y1=\"450\" x2=\"432\" y2=\"432\" stroke-width=\"2.88\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"414\" y1=\"414\" x2=\"396\" y2=\"396\" stroke-width=\"2.88\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"378\" y1=\"378\" x2=\"360\" y2=\"360\" stroke-width=\"2.88\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"342\" y1=\"342\" x2=\"324\" y2=\"324\" stroke-width=\"2.88\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"306\" y1=\"306\" x2=\"288\" y2=\"288\" stroke-width=\"2.88\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"270\" y1=\"270\" x2=\"252\" y2=\"252\" stroke-width=\"2.88\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"234\" y1=\"234\" x2=\"216\" y2=\"216\" stroke-width=\"2.88\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"198\" y1=\"198\" x2=\"180\" y2=\"180\" stroke-width=\"2.88\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"162\" y1=\"162\" x2=\"144\" y2=\"144\" stroke-width=\"2.88\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"1008\" y1=\"144\" x2=\"990\" y2=\"162\" stroke-width=\"2.88\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"972\" y1=\"180\" x2=\"954\" y2=\"198\" stroke-width=\"2.88\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"936\" y1=\"216\" x2=\"918\" y2=\"234\" stroke-width=\"2.88\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"900\" y1=\"252\" x2=\"882\" y2=\"270\" stroke-width=\"2.88\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"864\" y1=\"288\" x2=\"846\" y2=\"306\" stroke-width=\"2.88\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"828\" y1=\"324\" x2=\"810\" y2=\"342\" stroke-width=\"2.88\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"792\" y1=\"360\" x2=\"774\" y2=\"378\" stroke-width=\"2.88\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"756\" y1=\"396\" x2=\"738\" y2=\"414\" stroke-width=\"2.88\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"720\" y1=\"432\" x2=\"702\" y2=\"450\" stroke-width=\"2.88\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"684\" y1=\"468\" x2=\"666\" y2=\"486\" stroke-width=\"2.88\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"144\" y1=\"1008\" x2=\"162\" y2=\"990\" stroke-width=\"2.88\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"180\" y1=\"972\" x2=\"198\" y2=\"954\" stroke-width=\"2.88\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"216\" y1=\"936\" x2=\"234\" y2=\"918\" stroke-width=\"2.88\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"252\" y1=\"900\" x2=\"270\" y2=\"882\" stroke-width=\"2.88\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"288\" y1=\"864\" x2=\"306\" y2=\"846\" stroke-width=\"2.88\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"324\" y1=\"828\" x2=\"342\" y2=\"810\" stroke-width=\"2.88\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"360\" y1=\"792\" x2=\"378\" y2=\"774\" stroke-width=\"2.88\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"396\" y1=\"756\" x2=\"414\" y2=\"738\" stroke-width=\"2.88\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"432\" y1=\"720\" x2=\"450\" y2=\"702\" stroke-width=\"2.88\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"468\" y1=\"684\" x2=\"486\" y2=\"666\" stroke-width=\"2.88\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"666\" y1=\"666\" x2=\"684\" y2=\"684\" stroke-width=\"2.88\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"629.1680297851562\" y1=\"524.833984375\" x2=\"522\" y2=\"522\" stroke-width=\"2.88\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"522\" y1=\"522\" x2=\"522\" y2=\"630\" stroke-width=\"2.88\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"522\" y1=\"630\" x2=\"630\" y2=\"630\" stroke-width=\"2.88\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"630\" y1=\"630\" x2=\"629.1680297851562\" y2=\"524.833984375\" stroke-width=\"2.88\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"594\" y1=\"558\" x2=\"558\" y2=\"558\" stroke-width=\"2.88\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"558\" y1=\"558\" x2=\"558\" y2=\"594\" stroke-width=\"2.88\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"558\" y1=\"594\" x2=\"594\" y2=\"594\" stroke-width=\"2.88\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"594\" y1=\"594\" x2=\"594\" y2=\"558\" stroke-width=\"2.88\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"648\" y1=\"504\" x2=\"629.1680297851562\" y2=\"524.833984375\" stroke-width=\"2.88\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"612\" y1=\"540\" x2=\"594\" y2=\"558\" stroke-width=\"2.88\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"648\" y1=\"648\" x2=\"630\" y2=\"630\" stroke-width=\"2.88\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"594\" y1=\"594\" x2=\"612\" y2=\"612\" stroke-width=\"2.88\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"558\" y1=\"594\" x2=\"540\" y2=\"612\" stroke-width=\"2.88\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"504\" y1=\"648\" x2=\"522\" y2=\"630\" stroke-width=\"2.88\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"504\" y1=\"504\" x2=\"522\" y2=\"522\" stroke-width=\"2.88\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"540\" y1=\"540\" x2=\"558\" y2=\"558\" stroke-width=\"2.88\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"972\" y1=\"972\" x2=\"180\" y2=\"972\" stroke-width=\"2.88\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"180\" y1=\"972\" x2=\"180\" y2=\"180\" stroke-width=\"2.88\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"180\" y1=\"180\" x2=\"972\" y2=\"180\" stroke-width=\"2.88\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"972\" y1=\"180\" x2=\"972\" y2=\"972\" stroke-width=\"2.88\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"936\" y1=\"216\" x2=\"216\" y2=\"216\" stroke-width=\"2.88\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"216\" y1=\"216\" x2=\"216\" y2=\"936\" stroke-width=\"2.88\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"216\" y1=\"936\" x2=\"936\" y2=\"936\" stroke-width=\"2.88\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"936\" y1=\"936\" x2=\"936\" y2=\"216\" stroke-width=\"2.88\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"900\" y1=\"252\" x2=\"252\" y2=\"252\" stroke-width=\"2.88\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"252\" y1=\"252\" x2=\"252\" y2=\"900\" stroke-width=\"2.88\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"252\" y1=\"900\" x2=\"900\" y2=\"900\" stroke-width=\"2.88\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"900\" y1=\"900\" x2=\"900\" y2=\"252\" stroke-width=\"2.88\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"864\" y1=\"288\" x2=\"288\" y2=\"288\" stroke-width=\"2.88\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"288\" y1=\"288\" x2=\"288\" y2=\"864\" stroke-width=\"2.88\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"288\" y1=\"864\" x2=\"864\" y2=\"864\" stroke-width=\"2.88\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"864\" y1=\"864\" x2=\"864\" y2=\"288\" stroke-width=\"2.88\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"828\" y1=\"324\" x2=\"324\" y2=\"324\" stroke-width=\"2.88\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"324\" y1=\"324\" x2=\"324\" y2=\"828\" stroke-width=\"2.88\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"324\" y1=\"828\" x2=\"828\" y2=\"828\" stroke-width=\"2.88\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"828\" y1=\"828\" x2=\"828\" y2=\"324\" stroke-width=\"2.88\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"792\" y1=\"360\" x2=\"360\" y2=\"360\" stroke-width=\"2.88\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"360\" y1=\"360\" x2=\"360\" y2=\"792\" stroke-width=\"2.88\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"360\" y1=\"792\" x2=\"792\" y2=\"792\" stroke-width=\"2.88\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"792\" y1=\"792\" x2=\"792\" y2=\"360\" stroke-width=\"2.88\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"756\" y1=\"396\" x2=\"396\" y2=\"396\" stroke-width=\"2.88\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"396\" y1=\"396\" x2=\"396\" y2=\"756\" stroke-width=\"2.88\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"396\" y1=\"756\" x2=\"756\" y2=\"756\" stroke-width=\"2.88\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"756\" y1=\"756\" x2=\"756\" y2=\"396\" stroke-width=\"2.88\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"720\" y1=\"432\" x2=\"432\" y2=\"432\" stroke-width=\"2.88\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"432\" y1=\"432\" x2=\"432\" y2=\"720\" stroke-width=\"2.88\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"432\" y1=\"720\" x2=\"720\" y2=\"720\" stroke-width=\"2.88\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"720\" y1=\"720\" x2=\"720\" y2=\"432\" stroke-width=\"2.88\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"684\" y1=\"468\" x2=\"468\" y2=\"468\" stroke-width=\"2.88\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"468\" y1=\"468\" x2=\"468\" y2=\"684\" stroke-width=\"2.88\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"468\" y1=\"684\" x2=\"684\" y2=\"684\" stroke-width=\"2.88\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"684\" y1=\"684\" x2=\"684\" y2=\"468\" stroke-width=\"2.88\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"990\" y1=\"990\" x2=\"972\" y2=\"972\" stroke-width=\"2.88\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"954\" y1=\"954\" x2=\"936\" y2=\"936\" stroke-width=\"2.88\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"918\" y1=\"918\" x2=\"900\" y2=\"900\" stroke-width=\"2.88\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"882\" y1=\"882\" x2=\"864\" y2=\"864\" stroke-width=\"2.88\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"846\" y1=\"846\" x2=\"828\" y2=\"828\" stroke-width=\"2.88\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"810\" y1=\"810\" x2=\"792\" y2=\"792\" stroke-width=\"2.88\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"774\" y1=\"774\" x2=\"756\" y2=\"756\" stroke-width=\"2.88\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"738\" y1=\"738\" x2=\"720\" y2=\"720\" stroke-width=\"2.88\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"702\" y1=\"702\" x2=\"684\" y2=\"684\" stroke-width=\"2.88\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"468\" y1=\"468\" x2=\"450\" y2=\"450\" stroke-width=\"2.88\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"432\" y1=\"432\" x2=\"414\" y2=\"414\" stroke-width=\"2.88\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"396\" y1=\"396\" x2=\"378\" y2=\"378\" stroke-width=\"2.88\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"360\" y1=\"360\" x2=\"342\" y2=\"342\" stroke-width=\"2.88\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"324\" y1=\"324\" x2=\"306\" y2=\"306\" stroke-width=\"2.88\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"288\" y1=\"288\" x2=\"270\" y2=\"270\" stroke-width=\"2.88\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"252\" y1=\"252\" x2=\"234\" y2=\"234\" stroke-width=\"2.88\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"216\" y1=\"216\" x2=\"198\" y2=\"198\" stroke-width=\"2.88\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"180\" y1=\"180\" x2=\"162\" y2=\"162\" stroke-width=\"2.88\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"990\" y1=\"162\" x2=\"972\" y2=\"180\" stroke-width=\"2.88\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"954\" y1=\"198\" x2=\"936\" y2=\"216\" stroke-width=\"2.88\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"918\" y1=\"234\" x2=\"900\" y2=\"252\" stroke-width=\"2.88\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"882\" y1=\"270\" x2=\"864\" y2=\"288\" stroke-width=\"2.88\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"846\" y1=\"306\" x2=\"828\" y2=\"324\" stroke-width=\"2.88\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"810\" y1=\"342\" x2=\"792\" y2=\"360\" stroke-width=\"2.88\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"774\" y1=\"378\" x2=\"756\" y2=\"396\" stroke-width=\"2.88\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"738\" y1=\"414\" x2=\"720\" y2=\"432\" stroke-width=\"2.88\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"702\" y1=\"450\" x2=\"684\" y2=\"468\" stroke-width=\"2.88\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"162\" y1=\"990\" x2=\"180\" y2=\"972\" stroke-width=\"2.88\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"198\" y1=\"954\" x2=\"216\" y2=\"936\" stroke-width=\"2.88\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"234\" y1=\"918\" x2=\"252\" y2=\"900\" stroke-width=\"2.88\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"270\" y1=\"882\" x2=\"288\" y2=\"864\" stroke-width=\"2.88\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"306\" y1=\"846\" x2=\"324\" y2=\"828\" stroke-width=\"2.88\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"342\" y1=\"810\" x2=\"360\" y2=\"792\" stroke-width=\"2.88\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"378\" y1=\"774\" x2=\"396\" y2=\"756\" stroke-width=\"2.88\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"414\" y1=\"738\" x2=\"432\" y2=\"720\" stroke-width=\"2.88\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"450\" y1=\"702\" x2=\"468\" y2=\"684\" stroke-width=\"2.88\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"648\" y1=\"504\" x2=\"504\" y2=\"504\" stroke-width=\"2.88\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"504\" y1=\"504\" x2=\"504\" y2=\"648\" stroke-width=\"2.88\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"504\" y1=\"648\" x2=\"648\" y2=\"648\" stroke-width=\"2.88\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"648\" y1=\"648\" x2=\"648\" y2=\"504\" stroke-width=\"2.88\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"612\" y1=\"540\" x2=\"540\" y2=\"540\" stroke-width=\"2.88\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"540\" y1=\"540\" x2=\"540\" y2=\"612\" stroke-width=\"2.88\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"540\" y1=\"612\" x2=\"612\" y2=\"612\" stroke-width=\"2.88\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"612\" y1=\"612\" x2=\"612\" y2=\"540\" stroke-width=\"2.88\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"666\" y1=\"486\" x2=\"648\" y2=\"504\" stroke-width=\"2.88\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"629.1680297851562\" y1=\"524.833984375\" x2=\"612\" y2=\"540\" stroke-width=\"2.88\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"666\" y1=\"666\" x2=\"648\" y2=\"648\" stroke-width=\"2.88\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"630\" y1=\"630\" x2=\"612\" y2=\"612\" stroke-width=\"2.88\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"486\" y1=\"666\" x2=\"504\" y2=\"648\" stroke-width=\"2.88\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"522\" y1=\"630\" x2=\"540\" y2=\"612\" stroke-width=\"2.88\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"486\" y1=\"486\" x2=\"504\" y2=\"504\" stroke-width=\"2.88\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"522\" y1=\"522\" x2=\"540\" y2=\"540\" stroke-width=\"2.88\"/><line stroke=\"#f0f\" opacity=\"1\" x1=\"576\" y1=\"576\" x2=\"558\" y2=\"558\" stroke-width=\"2.88\"/><line stroke=\"#f0f\" opacity=\"1\" x1=\"576\" y1=\"576\" x2=\"594\" y2=\"594\" stroke-width=\"2.88\"/><line stroke=\"#f0f\" opacity=\"1\" x1=\"576\" y1=\"576\" x2=\"558\" y2=\"594\" stroke-width=\"2.88\"/><line stroke=\"#f0f\" opacity=\"1\" x1=\"576\" y1=\"576\" x2=\"594\" y2=\"558\" stroke-width=\"2.88\"/><line stroke=\"#f0f\" opacity=\"1\" x1=\"162\" y1=\"990\" x2=\"144\" y2=\"144\" stroke-width=\"2.88\"/><line stroke=\"#f0f\" opacity=\"1\" x1=\"972\" y1=\"972\" x2=\"162\" y2=\"990\" stroke-width=\"2.88\"/><line stroke=\"#f0f\" opacity=\"1\" x1=\"198\" y1=\"954\" x2=\"180\" y2=\"180\" stroke-width=\"2.88\"/><line stroke=\"#f0f\" opacity=\"1\" x1=\"936\" y1=\"936\" x2=\"198\" y2=\"954\" stroke-width=\"2.88\"/><line stroke=\"#f0f\" opacity=\"1\" x1=\"234\" y1=\"918\" x2=\"216\" y2=\"216\" stroke-width=\"2.88\"/><line stroke=\"#f0f\" opacity=\"1\" x1=\"900\" y1=\"900\" x2=\"234\" y2=\"918\" stroke-width=\"2.88\"/><line stroke=\"#f0f\" opacity=\"1\" x1=\"270\" y1=\"882\" x2=\"252\" y2=\"252\" stroke-width=\"2.88\"/><line stroke=\"#f0f\" opacity=\"1\" x1=\"864\" y1=\"864\" x2=\"270\" y2=\"882\" stroke-width=\"2.88\"/><line stroke=\"#f0f\" opacity=\"1\" x1=\"306\" y1=\"846\" x2=\"288\" y2=\"288\" stroke-width=\"2.88\"/><line stroke=\"#f0f\" opacity=\"1\" x1=\"828\" y1=\"828\" x2=\"306\" y2=\"846\" stroke-width=\"2.88\"/><line stroke=\"#f0f\" opacity=\"1\" x1=\"342\" y1=\"810\" x2=\"324\" y2=\"324\" stroke-width=\"2.88\"/><line stroke=\"#f0f\" opacity=\"1\" x1=\"792\" y1=\"792\" x2=\"342\" y2=\"810\" stroke-width=\"2.88\"/><line stroke=\"#f0f\" opacity=\"1\" x1=\"378\" y1=\"774\" x2=\"360\" y2=\"360\" stroke-width=\"2.88\"/><line stroke=\"#f0f\" opacity=\"1\" x1=\"756\" y1=\"756\" x2=\"378\" y2=\"774\" stroke-width=\"2.88\"/><line stroke=\"#f0f\" opacity=\"1\" x1=\"414\" y1=\"738\" x2=\"396\" y2=\"396\" stroke-width=\"2.88\"/><line stroke=\"#f0f\" opacity=\"1\" x1=\"720\" y1=\"720\" x2=\"414\" y2=\"738\" stroke-width=\"2.88\"/><line stroke=\"#f0f\" opacity=\"1\" x1=\"450\" y1=\"702\" x2=\"432\" y2=\"432\" stroke-width=\"2.88\"/><line stroke=\"#f0f\" opacity=\"1\" x1=\"684\" y1=\"684\" x2=\"450\" y2=\"702\" stroke-width=\"2.88\"/><line stroke=\"#f0f\" opacity=\"1\" x1=\"486\" y1=\"666\" x2=\"468\" y2=\"468\" stroke-width=\"2.88\"/><line stroke=\"#f0f\" opacity=\"1\" x1=\"144\" y1=\"144\" x2=\"990\" y2=\"162\" stroke-width=\"2.88\"/><line stroke=\"#f0f\" opacity=\"1\" x1=\"162\" y1=\"990\" x2=\"180\" y2=\"180\" stroke-width=\"2.88\"/><line stroke=\"#f0f\" opacity=\"1\" x1=\"180\" y1=\"180\" x2=\"954\" y2=\"198\" stroke-width=\"2.88\"/><line stroke=\"#f0f\" opacity=\"1\" x1=\"198\" y1=\"954\" x2=\"216\" y2=\"216\" stroke-width=\"2.88\"/><line stroke=\"#f0f\" opacity=\"1\" x1=\"216\" y1=\"216\" x2=\"918\" y2=\"234\" stroke-width=\"2.88\"/><line stroke=\"#f0f\" opacity=\"1\" x1=\"234\" y1=\"918\" x2=\"252\" y2=\"252\" stroke-width=\"2.88\"/><line stroke=\"#f0f\" opacity=\"1\" x1=\"252\" y1=\"252\" x2=\"882\" y2=\"270\" stroke-width=\"2.88\"/><line stroke=\"#f0f\" opacity=\"1\" x1=\"270\" y1=\"882\" x2=\"288\" y2=\"288\" stroke-width=\"2.88\"/><line stroke=\"#f0f\" opacity=\"1\" x1=\"288\" y1=\"288\" x2=\"846\" y2=\"306\" stroke-width=\"2.88\"/><line stroke=\"#f0f\" opacity=\"1\" x1=\"306\" y1=\"846\" x2=\"324\" y2=\"324\" stroke-width=\"2.88\"/><line stroke=\"#f0f\" opacity=\"1\" x1=\"324\" y1=\"324\" x2=\"810\" y2=\"342\" stroke-width=\"2.88\"/><line stroke=\"#f0f\" opacity=\"1\" x1=\"342\" y1=\"810\" x2=\"360\" y2=\"360\" stroke-width=\"2.88\"/><line stroke=\"#f0f\" opacity=\"1\" x1=\"360\" y1=\"360\" x2=\"774\" y2=\"378\" stroke-width=\"2.88\"/><line stroke=\"#f0f\" opacity=\"1\" x1=\"378\" y1=\"774\" x2=\"396\" y2=\"396\" stroke-width=\"2.88\"/><line stroke=\"#f0f\" opacity=\"1\" x1=\"396\" y1=\"396\" x2=\"738\" y2=\"414\" stroke-width=\"2.88\"/><line stroke=\"#f0f\" opacity=\"1\" x1=\"414\" y1=\"738\" x2=\"432\" y2=\"432\" stroke-width=\"2.88\"/><line stroke=\"#f0f\" opacity=\"1\" x1=\"432\" y1=\"432\" x2=\"702\" y2=\"450\" stroke-width=\"2.88\"/><line stroke=\"#f0f\" opacity=\"1\" x1=\"450\" y1=\"702\" x2=\"468\" y2=\"468\" stroke-width=\"2.88\"/><line stroke=\"#f0f\" opacity=\"1\" x1=\"468\" y1=\"468\" x2=\"666\" y2=\"486\" stroke-width=\"2.88\"/><line stroke=\"#f0f\" opacity=\"1\" x1=\"990\" y1=\"162\" x2=\"1008\" y2=\"1008\" stroke-width=\"2.88\"/><line stroke=\"#f0f\" opacity=\"1\" x1=\"180\" y1=\"180\" x2=\"990\" y2=\"162\" stroke-width=\"2.88\"/><line stroke=\"#f0f\" opacity=\"1\" x1=\"954\" y1=\"198\" x2=\"972\" y2=\"972\" stroke-width=\"2.88\"/><line stroke=\"#f0f\" opacity=\"1\" x1=\"216\" y1=\"216\" x2=\"954\" y2=\"198\" stroke-width=\"2.88\"/><line stroke=\"#f0f\" opacity=\"1\" x1=\"918\" y1=\"234\" x2=\"936\" y2=\"936\" stroke-width=\"2.88\"/><line stroke=\"#f0f\" opacity=\"1\" x1=\"252\" y1=\"252\" x2=\"918\" y2=\"234\" stroke-width=\"2.88\"/><line stroke=\"#f0f\" opacity=\"1\" x1=\"882\" y1=\"270\" x2=\"900\" y2=\"900\" stroke-width=\"2.88\"/><line stroke=\"#f0f\" opacity=\"1\" x1=\"288\" y1=\"288\" x2=\"882\" y2=\"270\" stroke-width=\"2.88\"/><line stroke=\"#f0f\" opacity=\"1\" x1=\"846\" y1=\"306\" x2=\"864\" y2=\"864\" stroke-width=\"2.88\"/><line stroke=\"#f0f\" opacity=\"1\" x1=\"324\" y1=\"324\" x2=\"846\" y2=\"306\" stroke-width=\"2.88\"/><line stroke=\"#f0f\" opacity=\"1\" x1=\"810\" y1=\"342\" x2=\"828\" y2=\"828\" stroke-width=\"2.88\"/><line stroke=\"#f0f\" opacity=\"1\" x1=\"360\" y1=\"360\" x2=\"810\" y2=\"342\" stroke-width=\"2.88\"/><line stroke=\"#f0f\" opacity=\"1\" x1=\"774\" y1=\"378\" x2=\"792\" y2=\"792\" stroke-width=\"2.88\"/><line stroke=\"#f0f\" opacity=\"1\" x1=\"396\" y1=\"396\" x2=\"774\" y2=\"378\" stroke-width=\"2.88\"/><line stroke=\"#f0f\" opacity=\"1\" x1=\"738\" y1=\"414\" x2=\"756\" y2=\"756\" stroke-width=\"2.88\"/><line stroke=\"#f0f\" opacity=\"1\" x1=\"432\" y1=\"432\" x2=\"738\" y2=\"414\" stroke-width=\"2.88\"/><line stroke=\"#f0f\" opacity=\"1\" x1=\"702\" y1=\"450\" x2=\"720\" y2=\"720\" stroke-width=\"2.88\"/><line stroke=\"#f0f\" opacity=\"1\" x1=\"468\" y1=\"468\" x2=\"702\" y2=\"450\" stroke-width=\"2.88\"/><line stroke=\"#f0f\" opacity=\"1\" x1=\"666\" y1=\"486\" x2=\"684\" y2=\"684\" stroke-width=\"2.88\"/><line stroke=\"#f0f\" opacity=\"1\" x1=\"1008\" y1=\"1008\" x2=\"162\" y2=\"990\" stroke-width=\"2.88\"/><line stroke=\"#f0f\" opacity=\"1\" x1=\"990\" y1=\"162\" x2=\"972\" y2=\"972\" stroke-width=\"2.88\"/><line stroke=\"#f0f\" opacity=\"1\" x1=\"972\" y1=\"972\" x2=\"198\" y2=\"954\" stroke-width=\"2.88\"/><line stroke=\"#f0f\" opacity=\"1\" x1=\"954\" y1=\"198\" x2=\"936\" y2=\"936\" stroke-width=\"2.88\"/><line stroke=\"#f0f\" opacity=\"1\" x1=\"936\" y1=\"936\" x2=\"234\" y2=\"918\" stroke-width=\"2.88\"/><line stroke=\"#f0f\" opacity=\"1\" x1=\"918\" y1=\"234\" x2=\"900\" y2=\"900\" stroke-width=\"2.88\"/><line stroke=\"#f0f\" opacity=\"1\" x1=\"900\" y1=\"900\" x2=\"270\" y2=\"882\" stroke-width=\"2.88\"/><line stroke=\"#f0f\" opacity=\"1\" x1=\"882\" y1=\"270\" x2=\"864\" y2=\"864\" stroke-width=\"2.88\"/><line stroke=\"#f0f\" opacity=\"1\" x1=\"864\" y1=\"864\" x2=\"306\" y2=\"846\" stroke-width=\"2.88\"/><line stroke=\"#f0f\" opacity=\"1\" x1=\"846\" y1=\"306\" x2=\"828\" y2=\"828\" stroke-width=\"2.88\"/><line stroke=\"#f0f\" opacity=\"1\" x1=\"828\" y1=\"828\" x2=\"342\" y2=\"810\" stroke-width=\"2.88\"/><line stroke=\"#f0f\" opacity=\"1\" x1=\"810\" y1=\"342\" x2=\"792\" y2=\"792\" stroke-width=\"2.88\"/><line stroke=\"#f0f\" opacity=\"1\" x1=\"792\" y1=\"792\" x2=\"378\" y2=\"774\" stroke-width=\"2.88\"/><line stroke=\"#f0f\" opacity=\"1\" x1=\"774\" y1=\"378\" x2=\"756\" y2=\"756\" stroke-width=\"2.88\"/><line stroke=\"#f0f\" opacity=\"1\" x1=\"756\" y1=\"756\" x2=\"414\" y2=\"738\" stroke-width=\"2.88\"/><line stroke=\"#f0f\" opacity=\"1\" x1=\"738\" y1=\"414\" x2=\"720\" y2=\"720\" stroke-width=\"2.88\"/><line stroke=\"#f0f\" opacity=\"1\" x1=\"720\" y1=\"720\" x2=\"450\" y2=\"702\" stroke-width=\"2.88\"/><line stroke=\"#f0f\" opacity=\"1\" x1=\"702\" y1=\"450\" x2=\"684\" y2=\"684\" stroke-width=\"2.88\"/><line stroke=\"#f0f\" opacity=\"1\" x1=\"684\" y1=\"684\" x2=\"486\" y2=\"666\" stroke-width=\"2.88\"/><line stroke=\"#f0f\" opacity=\"1\" x1=\"666\" y1=\"486\" x2=\"504\" y2=\"504\" stroke-width=\"2.88\"/><line stroke=\"#f0f\" opacity=\"1\" x1=\"504\" y1=\"504\" x2=\"486\" y2=\"666\" stroke-width=\"2.88\"/><line stroke=\"#f0f\" opacity=\"1\" x1=\"486\" y1=\"666\" x2=\"648\" y2=\"648\" stroke-width=\"2.88\"/><line stroke=\"#f0f\" opacity=\"1\" x1=\"648\" y1=\"648\" x2=\"666\" y2=\"486\" stroke-width=\"2.88\"/><line stroke=\"#f0f\" opacity=\"1\" x1=\"504\" y1=\"504\" x2=\"629.1680297851562\" y2=\"524.833984375\" stroke-width=\"2.88\"/><line stroke=\"#f0f\" opacity=\"1\" x1=\"629.1680297851562\" y1=\"524.833984375\" x2=\"648\" y2=\"648\" stroke-width=\"2.88\"/><line stroke=\"#f0f\" opacity=\"1\" x1=\"648\" y1=\"648\" x2=\"522\" y2=\"630\" stroke-width=\"2.88\"/><line stroke=\"#f0f\" opacity=\"1\" x1=\"522\" y1=\"630\" x2=\"504\" y2=\"504\" stroke-width=\"2.88\"/><line stroke=\"#f0f\" opacity=\"1\" x1=\"522\" y1=\"630\" x2=\"540\" y2=\"540\" stroke-width=\"2.88\"/><line stroke=\"#f0f\" opacity=\"1\" x1=\"540\" y1=\"540\" x2=\"629.1680297851562\" y2=\"524.833984375\" stroke-width=\"2.88\"/><line stroke=\"#f0f\" opacity=\"1\" x1=\"629.1680297851562\" y1=\"524.833984375\" x2=\"612\" y2=\"612\" stroke-width=\"2.88\"/><line stroke=\"#f0f\" opacity=\"1\" x1=\"612\" y1=\"612\" x2=\"522\" y2=\"630\" stroke-width=\"2.88\"/><line stroke=\"#f0f\" opacity=\"1\" x1=\"540\" y1=\"540\" x2=\"558\" y2=\"594\" stroke-width=\"2.88\"/><line stroke=\"#f0f\" opacity=\"1\" x1=\"558\" y1=\"594\" x2=\"612\" y2=\"612\" stroke-width=\"2.88\"/><line stroke=\"#f0f\" opacity=\"1\" x1=\"612\" y1=\"612\" x2=\"594\" y2=\"558\" stroke-width=\"2.88\"/><line stroke=\"#f0f\" opacity=\"1\" x1=\"594\" y1=\"558\" x2=\"540\" y2=\"540\" stroke-width=\"2.88\"/></svg>`\n            },\n            {\n                maxFolding: 80, \n                name: \"pinwheelBase.svg\", \n                patternType: \"Pinwheel\",\n                svgContent: `<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"360.5286865234375 365.8817138671875 1863.53173828125 1863.529541015625\"><line stroke=\"#00f\" x1=\"2092.0599365234375\" y1=\"1479.9112548828125\" x2=\"1862.0599365234375\" y2=\"1709.9112548828125\" stroke-width=\"2\"/><line stroke=\"#00f\" x1=\"1862.0599365234375\" y1=\"1709.9112548828125\" x2=\"1632.0599365234375\" y2=\"1479.9112548828125\" stroke-width=\"2\"/><line stroke=\"#00f\" x1=\"1632.0599365234375\" y1=\"1479.9112548828125\" x2=\"1862.0599365234375\" y2=\"1249.9112548828125\" stroke-width=\"2\"/><line stroke=\"#00f\" x1=\"1862.0599365234375\" y1=\"1249.9112548828125\" x2=\"2092.0599365234375\" y2=\"1479.9112548828125\" stroke-width=\"2\"/><line stroke=\"#f00\" x1=\"1862.0599365234375\" y1=\"1249.9112548828125\" x2=\"1862.0599365234375\" y2=\"1709.9112548828125\" stroke-width=\"2\"/><line stroke=\"#f00\" x1=\"1632.0599365234375\" y1=\"1479.9112548828125\" x2=\"2092.0599365234375\" y2=\"1479.9112548828125\" stroke-width=\"2\"/><line stroke=\"#00f\" x1=\"1862.0599365234375\" y1=\"1135.9112548828125\" x2=\"1518.0599365234375\" y2=\"1479.9112548828125\" stroke-width=\"2\"/><line stroke=\"#00f\" x1=\"1518.0599365234375\" y1=\"1479.9112548828125\" x2=\"1862.0599365234375\" y2=\"1823.9112548828125\" stroke-width=\"2\"/><line stroke=\"#00f\" x1=\"1862.0599365234375\" y1=\"1823.9112548828125\" x2=\"2206.0599365234375\" y2=\"1479.9112548828125\" stroke-width=\"2\"/><line stroke=\"#00f\" x1=\"2206.0599365234375\" y1=\"1479.9112548828125\" x2=\"1862.0599365234375\" y2=\"1135.9112548828125\" stroke-width=\"2\"/><line stroke=\"#f00\" x1=\"1862.0599365234375\" y1=\"1135.9112548828125\" x2=\"1862.0599365234375\" y2=\"1823.9112548828125\" stroke-width=\"2\"/><line stroke=\"#f00\" x1=\"1518.0599365234375\" y1=\"1479.9112548828125\" x2=\"2206.0599365234375\" y2=\"1479.9112548828125\" stroke-width=\"2\"/><line stroke=\"#00f\" x1=\"1862.0599365234375\" y1=\"1021.9112548828125\" x2=\"1404.0599365234375\" y2=\"1479.9112548828125\" stroke-width=\"2\"/><line stroke=\"#00f\" x1=\"1404.0599365234375\" y1=\"1479.9112548828125\" x2=\"1862.0599365234375\" y2=\"1937.9112548828125\" stroke-width=\"2\"/><line stroke=\"#00f\" x1=\"1862.0599365234375\" y1=\"1937.9112548828125\" x2=\"2320.0599365234375\" y2=\"1479.9112548828125\" stroke-width=\"2\"/><line stroke=\"#00f\" x1=\"2320.0599365234375\" y1=\"1479.9112548828125\" x2=\"1862.0599365234375\" y2=\"1021.9112548828125\" stroke-width=\"2\"/><line stroke=\"#f00\" x1=\"1862.0599365234375\" y1=\"1021.9112548828125\" x2=\"1862.0599365234375\" y2=\"1937.9112548828125\" stroke-width=\"2\"/><line stroke=\"#f00\" x1=\"1404.0599365234375\" y1=\"1479.9112548828125\" x2=\"2320.0599365234375\" y2=\"1479.9112548828125\" stroke-width=\"2\"/><line stroke=\"#00f\" x1=\"1862.0599365234375\" y1=\"907.9112548828125\" x2=\"1290.0599365234375\" y2=\"1479.9112548828125\" stroke-width=\"2\"/><line stroke=\"#00f\" x1=\"1290.0599365234375\" y1=\"1479.9112548828125\" x2=\"1862.0599365234375\" y2=\"2051.9111328125\" stroke-width=\"2\"/><line stroke=\"#00f\" x1=\"1862.0599365234375\" y1=\"2051.9111328125\" x2=\"2434.0599365234375\" y2=\"1479.9112548828125\" stroke-width=\"2\"/><line stroke=\"#00f\" x1=\"2434.0599365234375\" y1=\"1479.9112548828125\" x2=\"1862.0599365234375\" y2=\"907.9112548828125\" stroke-width=\"2\"/><line stroke=\"#f00\" x1=\"1862.0599365234375\" y1=\"907.9112548828125\" x2=\"1862.0599365234375\" y2=\"2051.9111328125\" stroke-width=\"2\"/><line stroke=\"#f00\" x1=\"1290.0599365234375\" y1=\"1479.9112548828125\" x2=\"2434.0599365234375\" y2=\"1479.9112548828125\" stroke-width=\"2\"/><line stroke=\"#00f\" x1=\"1862.0599365234375\" y1=\"793.9112548828125\" x2=\"1176.0599365234375\" y2=\"1479.9112548828125\" stroke-width=\"2\"/><line stroke=\"#00f\" x1=\"1176.0599365234375\" y1=\"1479.9112548828125\" x2=\"1862.0599365234375\" y2=\"2165.9111328125\" stroke-width=\"2\"/><line stroke=\"#00f\" x1=\"1862.0599365234375\" y1=\"2165.9111328125\" x2=\"2548.0599365234375\" y2=\"1479.9112548828125\" stroke-width=\"2\"/><line stroke=\"#00f\" x1=\"2548.0599365234375\" y1=\"1479.9112548828125\" x2=\"1862.0599365234375\" y2=\"793.9112548828125\" stroke-width=\"2\"/><line stroke=\"#f00\" x1=\"1862.0599365234375\" y1=\"793.9112548828125\" x2=\"1862.0599365234375\" y2=\"2165.9111328125\" stroke-width=\"2\"/><line stroke=\"#f00\" x1=\"1176.0599365234375\" y1=\"1479.9112548828125\" x2=\"2548.0599365234375\" y2=\"1479.9112548828125\" stroke-width=\"2\"/><line stroke=\"#00f\" x1=\"1862.0599365234375\" y1=\"679.9112548828125\" x2=\"1062.0599365234375\" y2=\"1479.9112548828125\" stroke-width=\"2\"/><line stroke=\"#00f\" x1=\"1062.0599365234375\" y1=\"1479.9112548828125\" x2=\"1862.0599365234375\" y2=\"2279.9111328125\" stroke-width=\"2\"/><line stroke=\"#00f\" x1=\"1862.0599365234375\" y1=\"2279.9111328125\" x2=\"2662.0599365234375\" y2=\"1479.9112548828125\" stroke-width=\"2\"/><line stroke=\"#00f\" x1=\"2662.0599365234375\" y1=\"1479.9112548828125\" x2=\"1862.0599365234375\" y2=\"679.9112548828125\" stroke-width=\"2\"/><line stroke=\"#f00\" x1=\"1862.0599365234375\" y1=\"679.9112548828125\" x2=\"1862.0599365234375\" y2=\"2279.9111328125\" stroke-width=\"2\"/><line stroke=\"#f00\" x1=\"1062.0599365234375\" y1=\"1479.9112548828125\" x2=\"2662.0599365234375\" y2=\"1479.9112548828125\" stroke-width=\"2\"/><line stroke=\"#00f\" x1=\"1862.0599365234375\" y1=\"565.9112548828125\" x2=\"948.0599365234375\" y2=\"1479.9112548828125\" stroke-width=\"2\"/><line stroke=\"#00f\" x1=\"948.0599365234375\" y1=\"1479.9112548828125\" x2=\"1862.0599365234375\" y2=\"2393.911376953125\" stroke-width=\"2\"/><line stroke=\"#00f\" x1=\"1862.0599365234375\" y1=\"2393.911376953125\" x2=\"2776.0600585937500\" y2=\"1479.9112548828125\" stroke-width=\"2\"/><line stroke=\"#00f\" x1=\"2776.0600585937500\" y1=\"1479.9112548828125\" x2=\"1862.0599365234375\" y2=\"565.9112548828125\" stroke-width=\"2\"/><line stroke=\"#f00\" x1=\"1862.0599365234375\" y1=\"565.9112548828125\" x2=\"1862.0599365234375\" y2=\"2393.911376953125\" stroke-width=\"2\"/><line stroke=\"#f00\" x1=\"948.0599365234375\" y1=\"1479.9112548828125\" x2=\"2776.0600585937500\" y2=\"1479.9112548828125\" stroke-width=\"2\"/><line stroke=\"#00f\" x1=\"1862.0599365234375\" y1=\"451.9112548828125\" x2=\"834.0599365234375\" y2=\"1479.9112548828125\" stroke-width=\"2\"/><line stroke=\"#00f\" x1=\"834.0599365234375\" y1=\"1479.9112548828125\" x2=\"1862.0599365234375\" y2=\"2507.911376953125\" stroke-width=\"2\"/><line stroke=\"#00f\" x1=\"1862.0599365234375\" y1=\"2507.911376953125\" x2=\"2890.0600585937500\" y2=\"1479.9112548828125\" stroke-width=\"2\"/><line stroke=\"#00f\" x1=\"2890.0600585937500\" y1=\"1479.9112548828125\" x2=\"1862.0599365234375\" y2=\"451.9112548828125\" stroke-width=\"2\"/><line stroke=\"#f00\" x1=\"1862.0599365234375\" y1=\"451.9112548828125\" x2=\"1862.0599365234375\" y2=\"2507.911376953125\" stroke-width=\"2\"/><line stroke=\"#f00\" x1=\"834.0599365234375\" y1=\"1479.9112548828125\" x2=\"2890.0600585937500\" y2=\"1479.9112548828125\" stroke-width=\"2\"/><line stroke=\"#00f\" x1=\"1862.0599365234375\" y1=\"365.8817138671875\" x2=\"748.0286865234375\" y2=\"1479.9112548828125\" stroke-width=\"2\"/><line stroke=\"#00f\" x1=\"748.0286865234375\" y1=\"1479.9112548828125\" x2=\"1862.0599365234375\" y2=\"2593.942871093750\" stroke-width=\"2\"/><line stroke=\"#00f\" x1=\"1862.0599365234375\" y1=\"2593.942871093750\" x2=\"2976.091064453125\" y2=\"1479.9112548828125\" stroke-width=\"2\"/><line stroke=\"#00f\" x1=\"2976.091064453125\" y1=\"1479.9112548828125\" x2=\"1862.0599365234375\" y2=\"365.8817138671875\" stroke-width=\"2\"/><line stroke=\"#f00\" x1=\"1862.0599365234375\" y1=\"365.8817138671875\" x2=\"1862.0599365234375\" y2=\"2593.942871093750\" stroke-width=\"2\"/><line stroke=\"#f00\" x1=\"748.0286865234375\" y1=\"1479.9112548828125\" x2=\"2976.091064453125\" y2=\"1479.9112548828125\" stroke-width=\"2\"/><line stroke=\"#000\" x1=\"1862.0599365234375\" y1=\"365.8817138671875\" x2=\"1862.0599365234375\" y2=\"2229.411376953125\" stroke-width=\"2\"/><line stroke=\"#000\" x1=\"360.5286865234375\" y1=\"1479.9112548828125\" x2=\"2224.060546875000\" y2=\"1479.9112548828125\" stroke-width=\"2\"/></svg>`\n            },\n            {\n                maxFolding: 70,\n                name: \"FTpoly7.svg\", \n                patternType: \"Flower\",\n                svgContent: `<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"-1000 -1000 12000 12000\"><line stroke=\"#000\" opacity=\"1\" x1=\"10000\" y1=\"3660\" x2=\"10000\" y2=\"5000\" stroke-width=\"33.333333333333336\"/><line stroke=\"#000\" opacity=\"1\" x1=\"10000\" y1=\"5000\" x2=\"9999\" y2=\"6339\" stroke-width=\"33.333333333333336\"/><line stroke=\"#000\" opacity=\"1\" x1=\"9999\" y1=\"6339\" x2=\"9330\" y2=\"7500\" stroke-width=\"33.333333333333336\"/><line stroke=\"#000\" opacity=\"1\" x1=\"9330\" y1=\"7500\" x2=\"8660\" y2=\"8660\" stroke-width=\"33.333333333333336\"/><line stroke=\"#000\" opacity=\"1\" x1=\"8660\" y1=\"8660\" x2=\"7499\" y2=\"9330\" stroke-width=\"33.333333333333336\"/><line stroke=\"#000\" opacity=\"1\" x1=\"7499\" y1=\"9330\" x2=\"6339\" y2=\"10000\" stroke-width=\"33.333333333333336\"/><line stroke=\"#000\" opacity=\"1\" x1=\"6339\" y1=\"10000\" x2=\"4999\" y2=\"10000\" stroke-width=\"33.333333333333336\"/><line stroke=\"#000\" opacity=\"1\" x1=\"4999\" y1=\"10000\" x2=\"3660\" y2=\"10000\" stroke-width=\"33.333333333333336\"/><line stroke=\"#000\" opacity=\"1\" x1=\"3660\" y1=\"10000\" x2=\"2500\" y2=\"9330\" stroke-width=\"33.333333333333336\"/><line stroke=\"#000\" opacity=\"1\" x1=\"2500\" y1=\"9330\" x2=\"1339\" y2=\"8660\" stroke-width=\"33.333333333333336\"/><line stroke=\"#000\" opacity=\"1\" x1=\"1339\" y1=\"8660\" x2=\"669\" y2=\"7500\" stroke-width=\"33.333333333333336\"/><line stroke=\"#000\" opacity=\"1\" x1=\"669\" y1=\"7500\" x2=\"0\" y2=\"6339\" stroke-width=\"33.333333333333336\"/><line stroke=\"#000\" opacity=\"1\" x1=\"0\" y1=\"6339\" x2=\"0\" y2=\"5000\" stroke-width=\"33.333333333333336\"/><line stroke=\"#000\" opacity=\"1\" x1=\"0\" y1=\"5000\" x2=\"0\" y2=\"3660\" stroke-width=\"33.333333333333336\"/><line stroke=\"#000\" opacity=\"1\" x1=\"0\" y1=\"3660\" x2=\"669\" y2=\"2500\" stroke-width=\"33.333333333333336\"/><line stroke=\"#000\" opacity=\"1\" x1=\"669\" y1=\"2500\" x2=\"1339\" y2=\"1339\" stroke-width=\"33.333333333333336\"/><line stroke=\"#000\" opacity=\"1\" x1=\"1339\" y1=\"1339\" x2=\"2500\" y2=\"669\" stroke-width=\"33.333333333333336\"/><line stroke=\"#000\" opacity=\"1\" x1=\"2500\" y1=\"669\" x2=\"3660\" y2=\"0\" stroke-width=\"33.333333333333336\"/><line stroke=\"#000\" opacity=\"1\" x1=\"3660\" y1=\"0\" x2=\"5000\" y2=\"0\" stroke-width=\"33.333333333333336\"/><line stroke=\"#000\" opacity=\"1\" x1=\"5000\" y1=\"0\" x2=\"6339\" y2=\"0\" stroke-width=\"33.333333333333336\"/><line stroke=\"#000\" opacity=\"1\" x1=\"6339\" y1=\"0\" x2=\"7500\" y2=\"669\" stroke-width=\"33.333333333333336\"/><line stroke=\"#000\" opacity=\"1\" x1=\"7500\" y1=\"669\" x2=\"8660\" y2=\"1339\" stroke-width=\"33.333333333333336\"/><line stroke=\"#000\" opacity=\"1\" x1=\"8660\" y1=\"1339\" x2=\"9330\" y2=\"2500\" stroke-width=\"33.333333333333336\"/><line stroke=\"#000\" opacity=\"1\" x1=\"9330\" y1=\"2500\" x2=\"10000\" y2=\"3660\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"9226\" y1=\"4999\" x2=\"7679\" y2=\"4999\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"9226\" y1=\"4999\" x2=\"10000\" y2=\"5000\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"8660\" y1=\"2886\" x2=\"7320\" y2=\"3660\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"8660\" y1=\"2886\" x2=\"9330\" y2=\"2500\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"7113\" y1=\"1339\" x2=\"6339\" y2=\"2679\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"7113\" y1=\"1339\" x2=\"7500\" y2=\"669\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"4999\" y1=\"773\" x2=\"4999\" y2=\"2320\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"4999\" y1=\"773\" x2=\"5000\" y2=\"0\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"2886\" y1=\"1339\" x2=\"3660\" y2=\"2679\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"2886\" y1=\"1339\" x2=\"2500\" y2=\"669\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"1339\" y1=\"2886\" x2=\"2679\" y2=\"3660\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"1339\" y1=\"2886\" x2=\"669\" y2=\"2500\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"773\" y1=\"4999\" x2=\"2320\" y2=\"4999\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"773\" y1=\"4999\" x2=\"0\" y2=\"5000\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"1339\" y1=\"7113\" x2=\"2679\" y2=\"6339\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"1339\" y1=\"7113\" x2=\"669\" y2=\"7500\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"2886\" y1=\"8660\" x2=\"3660\" y2=\"7320\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"2886\" y1=\"8660\" x2=\"2500\" y2=\"9330\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"5000\" y1=\"9226\" x2=\"5000\" y2=\"7679\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"5000\" y1=\"9226\" x2=\"4999\" y2=\"10000\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"7113\" y1=\"8660\" x2=\"6339\" y2=\"7320\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"7113\" y1=\"8660\" x2=\"7499\" y2=\"9330\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"8660\" y1=\"7113\" x2=\"7320\" y2=\"6339\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"8660\" y1=\"7113\" x2=\"9330\" y2=\"7500\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"8660\" y1=\"5980\" x2=\"8660\" y2=\"6339\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"8660\" y1=\"7113\" x2=\"7679\" y2=\"7679\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"7679\" y1=\"7679\" x2=\"7500\" y2=\"7990\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"7113\" y1=\"8660\" x2=\"5980\" y2=\"8660\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"5980\" y1=\"8660\" x2=\"5669\" y2=\"8839\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"5000\" y1=\"9226\" x2=\"4019\" y2=\"8660\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"4019\" y1=\"8660\" x2=\"3660\" y2=\"8660\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"2886\" y1=\"8660\" x2=\"2320\" y2=\"7679\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"2320\" y1=\"7679\" x2=\"2009\" y2=\"7500\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"1339\" y1=\"7113\" x2=\"1339\" y2=\"5980\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"1339\" y1=\"5980\" x2=\"1160\" y2=\"5669\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"773\" y1=\"4999\" x2=\"1339\" y2=\"4019\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"1339\" y1=\"4019\" x2=\"1339\" y2=\"3660\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"1339\" y1=\"2886\" x2=\"2320\" y2=\"2320\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"2320\" y1=\"2320\" x2=\"2500\" y2=\"2009\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"2886\" y1=\"1339\" x2=\"4019\" y2=\"1339\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"4019\" y1=\"1339\" x2=\"4330\" y2=\"1160\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"4999\" y1=\"773\" x2=\"5980\" y2=\"1339\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"5980\" y1=\"1339\" x2=\"6339\" y2=\"1339\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"7113\" y1=\"1339\" x2=\"7679\" y2=\"2320\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"7679\" y1=\"2320\" x2=\"7990\" y2=\"2499\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"8660\" y1=\"2886\" x2=\"8660\" y2=\"4019\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"8660\" y1=\"4019\" x2=\"8839\" y2=\"4330\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"9226\" y1=\"4999\" x2=\"8660\" y2=\"5980\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"7113\" y1=\"5566\" x2=\"6339\" y2=\"5358\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"6547\" y1=\"6547\" x2=\"5980\" y2=\"5980\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"5566\" y1=\"7113\" x2=\"5358\" y2=\"6339\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"4433\" y1=\"7113\" x2=\"4641\" y2=\"6339\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"3452\" y1=\"6547\" x2=\"4019\" y2=\"5980\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"2886\" y1=\"5566\" x2=\"3660\" y2=\"5358\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"2886\" y1=\"4433\" x2=\"3660\" y2=\"4641\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"3452\" y1=\"3452\" x2=\"4019\" y2=\"4019\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"4433\" y1=\"2886\" x2=\"4641\" y2=\"3660\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"5566\" y1=\"2886\" x2=\"5358\" y2=\"3660\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"6547\" y1=\"3452\" x2=\"5980\" y2=\"4019\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"7113\" y1=\"4433\" x2=\"6339\" y2=\"4641\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"6961\" y1=\"5000\" x2=\"7009\" y2=\"4820\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"7113\" y1=\"4433\" x2=\"6698\" y2=\"4019\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"6698\" y1=\"4019\" x2=\"6650\" y2=\"3839\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"6547\" y1=\"3452\" x2=\"5980\" y2=\"3301\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"5980\" y1=\"3301\" x2=\"5849\" y2=\"3169\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"5566\" y1=\"2886\" x2=\"5000\" y2=\"3038\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"5000\" y1=\"3038\" x2=\"4820\" y2=\"2990\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"4433\" y1=\"2886\" x2=\"4019\" y2=\"3301\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"4019\" y1=\"3301\" x2=\"3839\" y2=\"3349\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"3452\" y1=\"3452\" x2=\"3301\" y2=\"4019\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"3301\" y1=\"4019\" x2=\"3169\" y2=\"4150\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"2886\" y1=\"4433\" x2=\"3038\" y2=\"5000\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"3038\" y1=\"5000\" x2=\"2990\" y2=\"5179\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"2886\" y1=\"5566\" x2=\"3301\" y2=\"5980\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"3301\" y1=\"5980\" x2=\"3349\" y2=\"6160\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"3452\" y1=\"6547\" x2=\"4019\" y2=\"6698\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"4019\" y1=\"6698\" x2=\"4150\" y2=\"6830\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"4433\" y1=\"7113\" x2=\"5000\" y2=\"6961\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"5000\" y1=\"6961\" x2=\"5179\" y2=\"7009\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"5566\" y1=\"7113\" x2=\"5980\" y2=\"6698\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"5980\" y1=\"6698\" x2=\"6160\" y2=\"6650\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"6547\" y1=\"6547\" x2=\"6698\" y2=\"5980\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"6698\" y1=\"5980\" x2=\"6830\" y2=\"5849\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"7113\" y1=\"5566\" x2=\"6961\" y2=\"5000\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"6132\" y1=\"4999\" x2=\"5717\" y2=\"4999\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"5980\" y1=\"4433\" x2=\"5621\" y2=\"4641\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"5566\" y1=\"4019\" x2=\"5358\" y2=\"4378\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"5000\" y1=\"3867\" x2=\"5000\" y2=\"4282\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"4433\" y1=\"4019\" x2=\"4641\" y2=\"4378\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"4019\" y1=\"4433\" x2=\"4378\" y2=\"4641\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"3867\" y1=\"5000\" x2=\"4282\" y2=\"5000\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"4019\" y1=\"5566\" x2=\"4378\" y2=\"5358\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"4433\" y1=\"5980\" x2=\"4641\" y2=\"5621\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"5000\" y1=\"6132\" x2=\"5000\" y2=\"5717\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"5566\" y1=\"5980\" x2=\"5358\" y2=\"5621\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"5980\" y1=\"5566\" x2=\"5621\" y2=\"5358\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"5980\" y1=\"5262\" x2=\"5980\" y2=\"5358\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"5980\" y1=\"5566\" x2=\"5717\" y2=\"5717\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"5717\" y1=\"5717\" x2=\"5669\" y2=\"5801\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"5566\" y1=\"5980\" x2=\"5262\" y2=\"5980\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"5262\" y1=\"5980\" x2=\"5179\" y2=\"6028\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"5000\" y1=\"6132\" x2=\"4737\" y2=\"5980\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"4737\" y1=\"5980\" x2=\"4641\" y2=\"5980\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"4433\" y1=\"5980\" x2=\"4282\" y2=\"5717\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"4282\" y1=\"5717\" x2=\"4198\" y2=\"5669\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"4019\" y1=\"5566\" x2=\"4019\" y2=\"5262\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"4019\" y1=\"5262\" x2=\"3971\" y2=\"5179\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"3867\" y1=\"5000\" x2=\"4019\" y2=\"4737\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"4019\" y1=\"4737\" x2=\"4019\" y2=\"4641\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"4019\" y1=\"4433\" x2=\"4282\" y2=\"4282\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"4282\" y1=\"4282\" x2=\"4330\" y2=\"4198\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"4433\" y1=\"4019\" x2=\"4737\" y2=\"4019\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"4737\" y1=\"4019\" x2=\"4820\" y2=\"3971\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"5000\" y1=\"3867\" x2=\"5262\" y2=\"4019\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"5262\" y1=\"4019\" x2=\"5358\" y2=\"4019\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"5566\" y1=\"4019\" x2=\"5717\" y2=\"4282\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"5717\" y1=\"4282\" x2=\"5801\" y2=\"4330\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"5980\" y1=\"4433\" x2=\"5980\" y2=\"4737\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"5980\" y1=\"4737\" x2=\"6028\" y2=\"4820\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"6132\" y1=\"4999\" x2=\"5980\" y2=\"5262\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"5566\" y1=\"5151\" x2=\"5358\" y2=\"5096\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"5414\" y1=\"5414\" x2=\"5262\" y2=\"5262\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"5151\" y1=\"5566\" x2=\"5096\" y2=\"5358\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"4848\" y1=\"5566\" x2=\"4903\" y2=\"5358\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"4585\" y1=\"5414\" x2=\"4737\" y2=\"5262\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"4433\" y1=\"5151\" x2=\"4641\" y2=\"5096\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"4433\" y1=\"4848\" x2=\"4641\" y2=\"4903\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"4585\" y1=\"4585\" x2=\"4737\" y2=\"4737\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"4848\" y1=\"4433\" x2=\"4903\" y2=\"4641\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"5151\" y1=\"4433\" x2=\"5096\" y2=\"4641\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"5414\" y1=\"4585\" x2=\"5262\" y2=\"4737\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"5566\" y1=\"4848\" x2=\"5358\" y2=\"4903\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"5525\" y1=\"5000\" x2=\"5538\" y2=\"4951\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"5566\" y1=\"4848\" x2=\"5455\" y2=\"4737\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"5455\" y1=\"4737\" x2=\"5442\" y2=\"4689\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"5414\" y1=\"4585\" x2=\"5262\" y2=\"4544\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"5262\" y1=\"4544\" x2=\"5227\" y2=\"4509\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"5151\" y1=\"4433\" x2=\"5000\" y2=\"4474\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"5000\" y1=\"4474\" x2=\"4951\" y2=\"4461\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"4848\" y1=\"4433\" x2=\"4737\" y2=\"4544\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"4737\" y1=\"4544\" x2=\"4689\" y2=\"4557\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"4585\" y1=\"4585\" x2=\"4544\" y2=\"4737\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"4544\" y1=\"4737\" x2=\"4509\" y2=\"4772\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"4433\" y1=\"4848\" x2=\"4474\" y2=\"5000\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"4474\" y1=\"5000\" x2=\"4461\" y2=\"5048\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"4433\" y1=\"5151\" x2=\"4544\" y2=\"5262\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"4544\" y1=\"5262\" x2=\"4557\" y2=\"5310\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"4585\" y1=\"5414\" x2=\"4737\" y2=\"5455\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"4737\" y1=\"5455\" x2=\"4772\" y2=\"5490\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"4848\" y1=\"5566\" x2=\"5000\" y2=\"5525\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"5000\" y1=\"5525\" x2=\"5048\" y2=\"5538\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"5151\" y1=\"5566\" x2=\"5262\" y2=\"5455\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"5262\" y1=\"5455\" x2=\"5310\" y2=\"5442\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"5414\" y1=\"5414\" x2=\"5455\" y2=\"5262\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"5455\" y1=\"5262\" x2=\"5490\" y2=\"5227\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"5566\" y1=\"5151\" x2=\"5525\" y2=\"5000\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"5303\" y1=\"4999\" x2=\"5192\" y2=\"5000\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"5262\" y1=\"4848\" x2=\"5166\" y2=\"4903\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"5151\" y1=\"4737\" x2=\"5096\" y2=\"4833\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"5000\" y1=\"4696\" x2=\"5000\" y2=\"4807\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"4848\" y1=\"4737\" x2=\"4903\" y2=\"4833\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"4737\" y1=\"4848\" x2=\"4833\" y2=\"4903\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"4696\" y1=\"5000\" x2=\"4807\" y2=\"5000\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"4737\" y1=\"5151\" x2=\"4833\" y2=\"5096\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"4848\" y1=\"5262\" x2=\"4903\" y2=\"5166\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"5000\" y1=\"5303\" x2=\"5000\" y2=\"5192\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"5151\" y1=\"5262\" x2=\"5096\" y2=\"5166\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"5262\" y1=\"5151\" x2=\"5166\" y2=\"5096\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"5262\" y1=\"5070\" x2=\"5262\" y2=\"5096\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"5262\" y1=\"5151\" x2=\"5192\" y2=\"5192\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"5192\" y1=\"5192\" x2=\"5179\" y2=\"5214\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"5151\" y1=\"5262\" x2=\"5070\" y2=\"5262\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"5070\" y1=\"5262\" x2=\"5048\" y2=\"5275\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"5000\" y1=\"5303\" x2=\"4929\" y2=\"5262\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"4929\" y1=\"5262\" x2=\"4903\" y2=\"5262\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"4848\" y1=\"5262\" x2=\"4807\" y2=\"5192\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"4807\" y1=\"5192\" x2=\"4785\" y2=\"5179\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"4737\" y1=\"5151\" x2=\"4737\" y2=\"5070\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"4737\" y1=\"5070\" x2=\"4724\" y2=\"5048\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"4696\" y1=\"5000\" x2=\"4737\" y2=\"4929\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"4737\" y1=\"4929\" x2=\"4737\" y2=\"4903\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"4737\" y1=\"4848\" x2=\"4807\" y2=\"4807\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"4807\" y1=\"4807\" x2=\"4820\" y2=\"4785\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"4848\" y1=\"4737\" x2=\"4929\" y2=\"4737\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"4929\" y1=\"4737\" x2=\"4951\" y2=\"4724\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"5000\" y1=\"4696\" x2=\"5070\" y2=\"4737\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"5070\" y1=\"4737\" x2=\"5096\" y2=\"4737\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"5151\" y1=\"4737\" x2=\"5192\" y2=\"4807\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"5192\" y1=\"4807\" x2=\"5214\" y2=\"4820\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"5262\" y1=\"4848\" x2=\"5262\" y2=\"4929\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"5262\" y1=\"4929\" x2=\"5275\" y2=\"4951\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"5303\" y1=\"4999\" x2=\"5262\" y2=\"5070\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"5151\" y1=\"5040\" x2=\"5096\" y2=\"5025\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"5111\" y1=\"5111\" x2=\"5070\" y2=\"5070\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"5040\" y1=\"5151\" x2=\"5025\" y2=\"5096\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"4959\" y1=\"5151\" x2=\"4974\" y2=\"5096\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"4888\" y1=\"5111\" x2=\"4929\" y2=\"5070\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"4848\" y1=\"5040\" x2=\"4903\" y2=\"5025\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"4848\" y1=\"4959\" x2=\"4903\" y2=\"4974\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"4888\" y1=\"4888\" x2=\"4929\" y2=\"4929\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"4959\" y1=\"4848\" x2=\"4974\" y2=\"4903\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"5040\" y1=\"4848\" x2=\"5025\" y2=\"4903\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"5111\" y1=\"4888\" x2=\"5070\" y2=\"4929\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"5151\" y1=\"4959\" x2=\"5096\" y2=\"4974\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"5140\" y1=\"5000\" x2=\"5144\" y2=\"4987\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"5151\" y1=\"4959\" x2=\"5121\" y2=\"4929\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"5121\" y1=\"4929\" x2=\"5118\" y2=\"4916\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"5111\" y1=\"4888\" x2=\"5070\" y2=\"4878\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"5070\" y1=\"4878\" x2=\"5060\" y2=\"4868\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"5040\" y1=\"4848\" x2=\"5000\" y2=\"4859\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"5000\" y1=\"4859\" x2=\"4987\" y2=\"4855\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"4959\" y1=\"4848\" x2=\"4929\" y2=\"4878\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"4929\" y1=\"4878\" x2=\"4916\" y2=\"4881\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"4888\" y1=\"4888\" x2=\"4878\" y2=\"4929\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"4878\" y1=\"4929\" x2=\"4868\" y2=\"4939\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"4848\" y1=\"4959\" x2=\"4859\" y2=\"5000\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"4859\" y1=\"5000\" x2=\"4855\" y2=\"5012\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"4848\" y1=\"5040\" x2=\"4878\" y2=\"5070\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"4878\" y1=\"5070\" x2=\"4881\" y2=\"5083\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"4888\" y1=\"5111\" x2=\"4929\" y2=\"5121\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"4929\" y1=\"5121\" x2=\"4939\" y2=\"5131\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"4959\" y1=\"5151\" x2=\"5000\" y2=\"5140\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"5000\" y1=\"5140\" x2=\"5012\" y2=\"5144\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"5040\" y1=\"5151\" x2=\"5070\" y2=\"5121\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"5070\" y1=\"5121\" x2=\"5083\" y2=\"5118\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"5111\" y1=\"5111\" x2=\"5121\" y2=\"5070\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"5121\" y1=\"5070\" x2=\"5131\" y2=\"5060\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"5151\" y1=\"5040\" x2=\"5140\" y2=\"5000\" stroke-width=\"33.333333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"8839\" y1=\"4330\" x2=\"7679\" y2=\"4999\" stroke-width=\"33.333333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"8839\" y1=\"4330\" x2=\"10000\" y2=\"3660\" stroke-width=\"33.333333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"7990\" y1=\"2499\" x2=\"7320\" y2=\"3660\" stroke-width=\"33.333333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"7990\" y1=\"2499\" x2=\"8660\" y2=\"1339\" stroke-width=\"33.333333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"6339\" y1=\"1339\" x2=\"6339\" y2=\"2679\" stroke-width=\"33.333333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"6339\" y1=\"1339\" x2=\"6339\" y2=\"0\" stroke-width=\"33.333333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"4330\" y1=\"1160\" x2=\"4999\" y2=\"2320\" stroke-width=\"33.333333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"4330\" y1=\"1160\" x2=\"3660\" y2=\"0\" stroke-width=\"33.333333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"2500\" y1=\"2009\" x2=\"3660\" y2=\"2679\" stroke-width=\"33.333333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"2500\" y1=\"2009\" x2=\"1339\" y2=\"1339\" stroke-width=\"33.333333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"1339\" y1=\"3660\" x2=\"2679\" y2=\"3660\" stroke-width=\"33.333333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"1339\" y1=\"3660\" x2=\"0\" y2=\"3660\" stroke-width=\"33.333333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"1160\" y1=\"5669\" x2=\"2320\" y2=\"4999\" stroke-width=\"33.333333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"1160\" y1=\"5669\" x2=\"0\" y2=\"6339\" stroke-width=\"33.333333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"2009\" y1=\"7500\" x2=\"2679\" y2=\"6339\" stroke-width=\"33.333333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"2009\" y1=\"7500\" x2=\"1339\" y2=\"8660\" stroke-width=\"33.333333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"3660\" y1=\"8660\" x2=\"3660\" y2=\"7320\" stroke-width=\"33.333333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"3660\" y1=\"8660\" x2=\"3660\" y2=\"10000\" stroke-width=\"33.333333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"5669\" y1=\"8839\" x2=\"5000\" y2=\"7679\" stroke-width=\"33.333333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"5669\" y1=\"8839\" x2=\"6339\" y2=\"10000\" stroke-width=\"33.333333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"7500\" y1=\"7990\" x2=\"6339\" y2=\"7320\" stroke-width=\"33.333333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"7500\" y1=\"7990\" x2=\"8660\" y2=\"8660\" stroke-width=\"33.333333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"8660\" y1=\"6339\" x2=\"7320\" y2=\"6339\" stroke-width=\"33.333333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"8660\" y1=\"6339\" x2=\"9999\" y2=\"6339\" stroke-width=\"33.333333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"8660\" y1=\"6339\" x2=\"8660\" y2=\"7113\" stroke-width=\"33.333333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"7500\" y1=\"7990\" x2=\"7113\" y2=\"8660\" stroke-width=\"33.333333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"5669\" y1=\"8839\" x2=\"5000\" y2=\"9226\" stroke-width=\"33.333333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"3660\" y1=\"8660\" x2=\"2886\" y2=\"8660\" stroke-width=\"33.333333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"2009\" y1=\"7500\" x2=\"1339\" y2=\"7113\" stroke-width=\"33.333333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"1160\" y1=\"5669\" x2=\"773\" y2=\"4999\" stroke-width=\"33.333333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"1339\" y1=\"3660\" x2=\"1339\" y2=\"2886\" stroke-width=\"33.333333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"2500\" y1=\"2009\" x2=\"2886\" y2=\"1339\" stroke-width=\"33.333333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"4330\" y1=\"1160\" x2=\"4999\" y2=\"773\" stroke-width=\"33.333333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"6339\" y1=\"1339\" x2=\"7113\" y2=\"1339\" stroke-width=\"33.333333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"7990\" y1=\"2499\" x2=\"8660\" y2=\"2886\" stroke-width=\"33.333333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"8839\" y1=\"4330\" x2=\"9226\" y2=\"4999\" stroke-width=\"33.333333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"8660\" y1=\"5980\" x2=\"7679\" y2=\"4999\" stroke-width=\"33.333333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"6830\" y1=\"5849\" x2=\"6339\" y2=\"5358\" stroke-width=\"33.333333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"6830\" y1=\"5849\" x2=\"7320\" y2=\"6339\" stroke-width=\"33.333333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"7679\" y1=\"7679\" x2=\"7320\" y2=\"6339\" stroke-width=\"33.333333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"6160\" y1=\"6650\" x2=\"5980\" y2=\"5980\" stroke-width=\"33.333333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"6160\" y1=\"6650\" x2=\"6339\" y2=\"7320\" stroke-width=\"33.333333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"5980\" y1=\"8660\" x2=\"6339\" y2=\"7320\" stroke-width=\"33.333333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"5179\" y1=\"7009\" x2=\"5358\" y2=\"6339\" stroke-width=\"33.333333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"5179\" y1=\"7009\" x2=\"5000\" y2=\"7679\" stroke-width=\"33.333333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"4019\" y1=\"8660\" x2=\"5000\" y2=\"7679\" stroke-width=\"33.333333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"4150\" y1=\"6830\" x2=\"4641\" y2=\"6339\" stroke-width=\"33.333333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"4150\" y1=\"6830\" x2=\"3660\" y2=\"7320\" stroke-width=\"33.333333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"2320\" y1=\"7679\" x2=\"3660\" y2=\"7320\" stroke-width=\"33.333333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"3349\" y1=\"6160\" x2=\"4019\" y2=\"5980\" stroke-width=\"33.333333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"3349\" y1=\"6160\" x2=\"2679\" y2=\"6339\" stroke-width=\"33.333333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"1339\" y1=\"5980\" x2=\"2679\" y2=\"6339\" stroke-width=\"33.333333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"2990\" y1=\"5179\" x2=\"3660\" y2=\"5358\" stroke-width=\"33.333333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"2990\" y1=\"5179\" x2=\"2320\" y2=\"4999\" stroke-width=\"33.333333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"1339\" y1=\"4019\" x2=\"2320\" y2=\"4999\" stroke-width=\"33.333333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"3169\" y1=\"4150\" x2=\"3660\" y2=\"4641\" stroke-width=\"33.333333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"3169\" y1=\"4150\" x2=\"2679\" y2=\"3660\" stroke-width=\"33.333333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"2320\" y1=\"2320\" x2=\"2679\" y2=\"3660\" stroke-width=\"33.333333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"3839\" y1=\"3349\" x2=\"4019\" y2=\"4019\" stroke-width=\"33.333333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"3839\" y1=\"3349\" x2=\"3660\" y2=\"2679\" stroke-width=\"33.333333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"4019\" y1=\"1339\" x2=\"3660\" y2=\"2679\" stroke-width=\"33.333333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"4820\" y1=\"2990\" x2=\"4641\" y2=\"3660\" stroke-width=\"33.333333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"4820\" y1=\"2990\" x2=\"4999\" y2=\"2320\" stroke-width=\"33.333333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"5980\" y1=\"1339\" x2=\"4999\" y2=\"2320\" stroke-width=\"33.333333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"5849\" y1=\"3169\" x2=\"5358\" y2=\"3660\" stroke-width=\"33.333333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"5849\" y1=\"3169\" x2=\"6339\" y2=\"2679\" stroke-width=\"33.333333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"7679\" y1=\"2320\" x2=\"6339\" y2=\"2679\" stroke-width=\"33.333333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"6650\" y1=\"3839\" x2=\"5980\" y2=\"4019\" stroke-width=\"33.333333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"6650\" y1=\"3839\" x2=\"7320\" y2=\"3660\" stroke-width=\"33.333333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"8660\" y1=\"4019\" x2=\"7320\" y2=\"3660\" stroke-width=\"33.333333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"7009\" y1=\"4820\" x2=\"6339\" y2=\"4641\" stroke-width=\"33.333333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"7009\" y1=\"4820\" x2=\"7679\" y2=\"4999\" stroke-width=\"33.333333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"7009\" y1=\"4820\" x2=\"7113\" y2=\"4433\" stroke-width=\"33.333333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"6650\" y1=\"3839\" x2=\"6547\" y2=\"3452\" stroke-width=\"33.333333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"5849\" y1=\"3169\" x2=\"5566\" y2=\"2886\" stroke-width=\"33.333333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"4820\" y1=\"2990\" x2=\"4433\" y2=\"2886\" stroke-width=\"33.333333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"3839\" y1=\"3349\" x2=\"3452\" y2=\"3452\" stroke-width=\"33.333333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"3169\" y1=\"4150\" x2=\"2886\" y2=\"4433\" stroke-width=\"33.333333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"2990\" y1=\"5179\" x2=\"2886\" y2=\"5566\" stroke-width=\"33.333333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"3349\" y1=\"6160\" x2=\"3452\" y2=\"6547\" stroke-width=\"33.333333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"4150\" y1=\"6830\" x2=\"4433\" y2=\"7113\" stroke-width=\"33.333333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"5179\" y1=\"7009\" x2=\"5566\" y2=\"7113\" stroke-width=\"33.333333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"6160\" y1=\"6650\" x2=\"6547\" y2=\"6547\" stroke-width=\"33.333333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"6830\" y1=\"5849\" x2=\"7113\" y2=\"5566\" stroke-width=\"33.333333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"6961\" y1=\"5000\" x2=\"6339\" y2=\"5358\" stroke-width=\"33.333333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"6028\" y1=\"4820\" x2=\"5717\" y2=\"4999\" stroke-width=\"33.333333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"6028\" y1=\"4820\" x2=\"6339\" y2=\"4641\" stroke-width=\"33.333333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"6698\" y1=\"4019\" x2=\"6339\" y2=\"4641\" stroke-width=\"33.333333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"5801\" y1=\"4330\" x2=\"5621\" y2=\"4641\" stroke-width=\"33.333333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"5801\" y1=\"4330\" x2=\"5980\" y2=\"4019\" stroke-width=\"33.333333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"5980\" y1=\"3301\" x2=\"5980\" y2=\"4019\" stroke-width=\"33.333333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"5358\" y1=\"4019\" x2=\"5358\" y2=\"4378\" stroke-width=\"33.333333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"5358\" y1=\"4019\" x2=\"5358\" y2=\"3660\" stroke-width=\"33.333333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"5000\" y1=\"3038\" x2=\"5358\" y2=\"3660\" stroke-width=\"33.333333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"4820\" y1=\"3971\" x2=\"5000\" y2=\"4282\" stroke-width=\"33.333333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"4820\" y1=\"3971\" x2=\"4641\" y2=\"3660\" stroke-width=\"33.333333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"4019\" y1=\"3301\" x2=\"4641\" y2=\"3660\" stroke-width=\"33.333333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"4330\" y1=\"4198\" x2=\"4641\" y2=\"4378\" stroke-width=\"33.333333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"4330\" y1=\"4198\" x2=\"4019\" y2=\"4019\" stroke-width=\"33.333333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"3301\" y1=\"4019\" x2=\"4019\" y2=\"4019\" stroke-width=\"33.333333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"4019\" y1=\"4641\" x2=\"4378\" y2=\"4641\" stroke-width=\"33.333333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"4019\" y1=\"4641\" x2=\"3660\" y2=\"4641\" stroke-width=\"33.333333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"3038\" y1=\"5000\" x2=\"3660\" y2=\"4641\" stroke-width=\"33.333333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"3971\" y1=\"5179\" x2=\"4282\" y2=\"5000\" stroke-width=\"33.333333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"3971\" y1=\"5179\" x2=\"3660\" y2=\"5358\" stroke-width=\"33.333333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"3301\" y1=\"5980\" x2=\"3660\" y2=\"5358\" stroke-width=\"33.333333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"4198\" y1=\"5669\" x2=\"4378\" y2=\"5358\" stroke-width=\"33.333333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"4198\" y1=\"5669\" x2=\"4019\" y2=\"5980\" stroke-width=\"33.333333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"4019\" y1=\"6698\" x2=\"4019\" y2=\"5980\" stroke-width=\"33.333333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"4641\" y1=\"5980\" x2=\"4641\" y2=\"5621\" stroke-width=\"33.333333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"4641\" y1=\"5980\" x2=\"4641\" y2=\"6339\" stroke-width=\"33.333333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"5000\" y1=\"6961\" x2=\"4641\" y2=\"6339\" stroke-width=\"33.333333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"5179\" y1=\"6028\" x2=\"5000\" y2=\"5717\" stroke-width=\"33.333333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"5179\" y1=\"6028\" x2=\"5358\" y2=\"6339\" stroke-width=\"33.333333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"5980\" y1=\"6698\" x2=\"5358\" y2=\"6339\" stroke-width=\"33.333333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"5669\" y1=\"5801\" x2=\"5358\" y2=\"5621\" stroke-width=\"33.333333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"5669\" y1=\"5801\" x2=\"5980\" y2=\"5980\" stroke-width=\"33.333333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"6698\" y1=\"5980\" x2=\"5980\" y2=\"5980\" stroke-width=\"33.333333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"5980\" y1=\"5358\" x2=\"5621\" y2=\"5358\" stroke-width=\"33.333333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"5980\" y1=\"5358\" x2=\"6339\" y2=\"5358\" stroke-width=\"33.333333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"5980\" y1=\"5358\" x2=\"5980\" y2=\"5566\" stroke-width=\"33.333333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"5669\" y1=\"5801\" x2=\"5566\" y2=\"5980\" stroke-width=\"33.333333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"5179\" y1=\"6028\" x2=\"5000\" y2=\"6132\" stroke-width=\"33.333333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"4641\" y1=\"5980\" x2=\"4433\" y2=\"5980\" stroke-width=\"33.333333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"4198\" y1=\"5669\" x2=\"4019\" y2=\"5566\" stroke-width=\"33.333333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"3971\" y1=\"5179\" x2=\"3867\" y2=\"5000\" stroke-width=\"33.333333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"4019\" y1=\"4641\" x2=\"4019\" y2=\"4433\" stroke-width=\"33.333333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"4330\" y1=\"4198\" x2=\"4433\" y2=\"4019\" stroke-width=\"33.333333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"4820\" y1=\"3971\" x2=\"5000\" y2=\"3867\" stroke-width=\"33.333333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"5358\" y1=\"4019\" x2=\"5566\" y2=\"4019\" stroke-width=\"33.333333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"5801\" y1=\"4330\" x2=\"5980\" y2=\"4433\" stroke-width=\"33.333333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"6028\" y1=\"4820\" x2=\"6132\" y2=\"4999\" stroke-width=\"33.333333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"5980\" y1=\"5262\" x2=\"5717\" y2=\"4999\" stroke-width=\"33.333333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"5490\" y1=\"5227\" x2=\"5358\" y2=\"5096\" stroke-width=\"33.333333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"5490\" y1=\"5227\" x2=\"5621\" y2=\"5358\" stroke-width=\"33.333333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"5717\" y1=\"5717\" x2=\"5621\" y2=\"5358\" stroke-width=\"33.333333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"5310\" y1=\"5442\" x2=\"5262\" y2=\"5262\" stroke-width=\"33.333333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"5310\" y1=\"5442\" x2=\"5358\" y2=\"5621\" stroke-width=\"33.333333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"5262\" y1=\"5980\" x2=\"5358\" y2=\"5621\" stroke-width=\"33.333333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"5048\" y1=\"5538\" x2=\"5096\" y2=\"5358\" stroke-width=\"33.333333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"5048\" y1=\"5538\" x2=\"5000\" y2=\"5717\" stroke-width=\"33.333333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"4737\" y1=\"5980\" x2=\"5000\" y2=\"5717\" stroke-width=\"33.333333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"4772\" y1=\"5490\" x2=\"4903\" y2=\"5358\" stroke-width=\"33.333333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"4772\" y1=\"5490\" x2=\"4641\" y2=\"5621\" stroke-width=\"33.333333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"4282\" y1=\"5717\" x2=\"4641\" y2=\"5621\" stroke-width=\"33.333333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"4557\" y1=\"5310\" x2=\"4737\" y2=\"5262\" stroke-width=\"33.333333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"4557\" y1=\"5310\" x2=\"4378\" y2=\"5358\" stroke-width=\"33.333333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"4019\" y1=\"5262\" x2=\"4378\" y2=\"5358\" stroke-width=\"33.333333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"4461\" y1=\"5048\" x2=\"4641\" y2=\"5096\" stroke-width=\"33.333333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"4461\" y1=\"5048\" x2=\"4282\" y2=\"5000\" stroke-width=\"33.333333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"4019\" y1=\"4737\" x2=\"4282\" y2=\"5000\" stroke-width=\"33.333333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"4509\" y1=\"4772\" x2=\"4641\" y2=\"4903\" stroke-width=\"33.333333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"4509\" y1=\"4772\" x2=\"4378\" y2=\"4641\" stroke-width=\"33.333333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"4282\" y1=\"4282\" x2=\"4378\" y2=\"4641\" stroke-width=\"33.333333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"4689\" y1=\"4557\" x2=\"4737\" y2=\"4737\" stroke-width=\"33.333333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"4689\" y1=\"4557\" x2=\"4641\" y2=\"4378\" stroke-width=\"33.333333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"4737\" y1=\"4019\" x2=\"4641\" y2=\"4378\" stroke-width=\"33.333333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"4951\" y1=\"4461\" x2=\"4903\" y2=\"4641\" stroke-width=\"33.333333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"4951\" y1=\"4461\" x2=\"5000\" y2=\"4282\" stroke-width=\"33.333333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"5262\" y1=\"4019\" x2=\"5000\" y2=\"4282\" stroke-width=\"33.333333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"5227\" y1=\"4509\" x2=\"5096\" y2=\"4641\" stroke-width=\"33.333333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"5227\" y1=\"4509\" x2=\"5358\" y2=\"4378\" stroke-width=\"33.333333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"5717\" y1=\"4282\" x2=\"5358\" y2=\"4378\" stroke-width=\"33.333333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"5442\" y1=\"4689\" x2=\"5262\" y2=\"4737\" stroke-width=\"33.333333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"5442\" y1=\"4689\" x2=\"5621\" y2=\"4641\" stroke-width=\"33.333333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"5980\" y1=\"4737\" x2=\"5621\" y2=\"4641\" stroke-width=\"33.333333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"5538\" y1=\"4951\" x2=\"5358\" y2=\"4903\" stroke-width=\"33.333333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"5538\" y1=\"4951\" x2=\"5717\" y2=\"4999\" stroke-width=\"33.333333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"5538\" y1=\"4951\" x2=\"5566\" y2=\"4848\" stroke-width=\"33.333333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"5442\" y1=\"4689\" x2=\"5414\" y2=\"4585\" stroke-width=\"33.333333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"5227\" y1=\"4509\" x2=\"5151\" y2=\"4433\" stroke-width=\"33.333333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"4951\" y1=\"4461\" x2=\"4848\" y2=\"4433\" stroke-width=\"33.333333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"4689\" y1=\"4557\" x2=\"4585\" y2=\"4585\" stroke-width=\"33.333333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"4509\" y1=\"4772\" x2=\"4433\" y2=\"4848\" stroke-width=\"33.333333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"4461\" y1=\"5048\" x2=\"4433\" y2=\"5151\" stroke-width=\"33.333333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"4557\" y1=\"5310\" x2=\"4585\" y2=\"5414\" stroke-width=\"33.333333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"4772\" y1=\"5490\" x2=\"4848\" y2=\"5566\" stroke-width=\"33.333333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"5048\" y1=\"5538\" x2=\"5151\" y2=\"5566\" stroke-width=\"33.333333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"5310\" y1=\"5442\" x2=\"5414\" y2=\"5414\" stroke-width=\"33.333333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"5490\" y1=\"5227\" x2=\"5566\" y2=\"5151\" stroke-width=\"33.333333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"5525\" y1=\"5000\" x2=\"5358\" y2=\"5096\" stroke-width=\"33.333333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"5275\" y1=\"4951\" x2=\"5192\" y2=\"5000\" stroke-width=\"33.333333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"5275\" y1=\"4951\" x2=\"5358\" y2=\"4903\" stroke-width=\"33.333333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"5455\" y1=\"4737\" x2=\"5358\" y2=\"4903\" stroke-width=\"33.333333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"5214\" y1=\"4820\" x2=\"5166\" y2=\"4903\" stroke-width=\"33.333333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"5214\" y1=\"4820\" x2=\"5262\" y2=\"4737\" stroke-width=\"33.333333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"5262\" y1=\"4544\" x2=\"5262\" y2=\"4737\" stroke-width=\"33.333333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"5096\" y1=\"4737\" x2=\"5096\" y2=\"4833\" stroke-width=\"33.333333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"5096\" y1=\"4737\" x2=\"5096\" y2=\"4641\" stroke-width=\"33.333333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"5000\" y1=\"4474\" x2=\"5096\" y2=\"4641\" stroke-width=\"33.333333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"4951\" y1=\"4724\" x2=\"5000\" y2=\"4807\" stroke-width=\"33.333333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"4951\" y1=\"4724\" x2=\"4903\" y2=\"4641\" stroke-width=\"33.333333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"4737\" y1=\"4544\" x2=\"4903\" y2=\"4641\" stroke-width=\"33.333333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"4820\" y1=\"4785\" x2=\"4903\" y2=\"4833\" stroke-width=\"33.333333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"4820\" y1=\"4785\" x2=\"4737\" y2=\"4737\" stroke-width=\"33.333333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"4544\" y1=\"4737\" x2=\"4737\" y2=\"4737\" stroke-width=\"33.333333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"4737\" y1=\"4903\" x2=\"4833\" y2=\"4903\" stroke-width=\"33.333333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"4737\" y1=\"4903\" x2=\"4641\" y2=\"4903\" stroke-width=\"33.333333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"4474\" y1=\"5000\" x2=\"4641\" y2=\"4903\" stroke-width=\"33.333333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"4724\" y1=\"5048\" x2=\"4807\" y2=\"5000\" stroke-width=\"33.333333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"4724\" y1=\"5048\" x2=\"4641\" y2=\"5096\" stroke-width=\"33.333333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"4544\" y1=\"5262\" x2=\"4641\" y2=\"5096\" stroke-width=\"33.333333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"4785\" y1=\"5179\" x2=\"4833\" y2=\"5096\" stroke-width=\"33.333333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"4785\" y1=\"5179\" x2=\"4737\" y2=\"5262\" stroke-width=\"33.333333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"4737\" y1=\"5455\" x2=\"4737\" y2=\"5262\" stroke-width=\"33.333333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"4903\" y1=\"5262\" x2=\"4903\" y2=\"5166\" stroke-width=\"33.333333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"4903\" y1=\"5262\" x2=\"4903\" y2=\"5358\" stroke-width=\"33.333333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"5000\" y1=\"5525\" x2=\"4903\" y2=\"5358\" stroke-width=\"33.333333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"5048\" y1=\"5275\" x2=\"5000\" y2=\"5192\" stroke-width=\"33.333333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"5048\" y1=\"5275\" x2=\"5096\" y2=\"5358\" stroke-width=\"33.333333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"5262\" y1=\"5455\" x2=\"5096\" y2=\"5358\" stroke-width=\"33.333333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"5179\" y1=\"5214\" x2=\"5096\" y2=\"5166\" stroke-width=\"33.333333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"5179\" y1=\"5214\" x2=\"5262\" y2=\"5262\" stroke-width=\"33.333333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"5455\" y1=\"5262\" x2=\"5262\" y2=\"5262\" stroke-width=\"33.333333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"5262\" y1=\"5096\" x2=\"5166\" y2=\"5096\" stroke-width=\"33.333333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"5262\" y1=\"5096\" x2=\"5358\" y2=\"5096\" stroke-width=\"33.333333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"5262\" y1=\"5096\" x2=\"5262\" y2=\"5151\" stroke-width=\"33.333333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"5179\" y1=\"5214\" x2=\"5151\" y2=\"5262\" stroke-width=\"33.333333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"5048\" y1=\"5275\" x2=\"5000\" y2=\"5303\" stroke-width=\"33.333333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"4903\" y1=\"5262\" x2=\"4848\" y2=\"5262\" stroke-width=\"33.333333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"4785\" y1=\"5179\" x2=\"4737\" y2=\"5151\" stroke-width=\"33.333333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"4724\" y1=\"5048\" x2=\"4696\" y2=\"5000\" stroke-width=\"33.333333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"4737\" y1=\"4903\" x2=\"4737\" y2=\"4848\" stroke-width=\"33.333333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"4820\" y1=\"4785\" x2=\"4848\" y2=\"4737\" stroke-width=\"33.333333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"4951\" y1=\"4724\" x2=\"5000\" y2=\"4696\" stroke-width=\"33.333333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"5096\" y1=\"4737\" x2=\"5151\" y2=\"4737\" stroke-width=\"33.333333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"5214\" y1=\"4820\" x2=\"5262\" y2=\"4848\" stroke-width=\"33.333333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"5275\" y1=\"4951\" x2=\"5303\" y2=\"4999\" stroke-width=\"33.333333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"5262\" y1=\"5070\" x2=\"5192\" y2=\"5000\" stroke-width=\"33.333333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"5131\" y1=\"5060\" x2=\"5096\" y2=\"5025\" stroke-width=\"33.333333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"5131\" y1=\"5060\" x2=\"5166\" y2=\"5096\" stroke-width=\"33.333333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"5192\" y1=\"5192\" x2=\"5166\" y2=\"5096\" stroke-width=\"33.333333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"5083\" y1=\"5118\" x2=\"5070\" y2=\"5070\" stroke-width=\"33.333333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"5083\" y1=\"5118\" x2=\"5096\" y2=\"5166\" stroke-width=\"33.333333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"5070\" y1=\"5262\" x2=\"5096\" y2=\"5166\" stroke-width=\"33.333333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"5012\" y1=\"5144\" x2=\"5025\" y2=\"5096\" stroke-width=\"33.333333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"5012\" y1=\"5144\" x2=\"5000\" y2=\"5192\" stroke-width=\"33.333333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"4929\" y1=\"5262\" x2=\"5000\" y2=\"5192\" stroke-width=\"33.333333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"4939\" y1=\"5131\" x2=\"4974\" y2=\"5096\" stroke-width=\"33.333333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"4939\" y1=\"5131\" x2=\"4903\" y2=\"5166\" stroke-width=\"33.333333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"4807\" y1=\"5192\" x2=\"4903\" y2=\"5166\" stroke-width=\"33.333333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"4881\" y1=\"5083\" x2=\"4929\" y2=\"5070\" stroke-width=\"33.333333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"4881\" y1=\"5083\" x2=\"4833\" y2=\"5096\" stroke-width=\"33.333333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"4737\" y1=\"5070\" x2=\"4833\" y2=\"5096\" stroke-width=\"33.333333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"4855\" y1=\"5012\" x2=\"4903\" y2=\"5025\" stroke-width=\"33.333333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"4855\" y1=\"5012\" x2=\"4807\" y2=\"5000\" stroke-width=\"33.333333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"4737\" y1=\"4929\" x2=\"4807\" y2=\"5000\" stroke-width=\"33.333333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"4868\" y1=\"4939\" x2=\"4903\" y2=\"4974\" stroke-width=\"33.333333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"4868\" y1=\"4939\" x2=\"4833\" y2=\"4903\" stroke-width=\"33.333333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"4807\" y1=\"4807\" x2=\"4833\" y2=\"4903\" stroke-width=\"33.333333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"4916\" y1=\"4881\" x2=\"4929\" y2=\"4929\" stroke-width=\"33.333333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"4916\" y1=\"4881\" x2=\"4903\" y2=\"4833\" stroke-width=\"33.333333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"4929\" y1=\"4737\" x2=\"4903\" y2=\"4833\" stroke-width=\"33.333333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"4987\" y1=\"4855\" x2=\"4974\" y2=\"4903\" stroke-width=\"33.333333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"4987\" y1=\"4855\" x2=\"5000\" y2=\"4807\" stroke-width=\"33.333333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"5070\" y1=\"4737\" x2=\"5000\" y2=\"4807\" stroke-width=\"33.333333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"5060\" y1=\"4868\" x2=\"5025\" y2=\"4903\" stroke-width=\"33.333333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"5060\" y1=\"4868\" x2=\"5096\" y2=\"4833\" stroke-width=\"33.333333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"5192\" y1=\"4807\" x2=\"5096\" y2=\"4833\" stroke-width=\"33.333333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"5118\" y1=\"4916\" x2=\"5070\" y2=\"4929\" stroke-width=\"33.333333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"5118\" y1=\"4916\" x2=\"5166\" y2=\"4903\" stroke-width=\"33.333333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"5262\" y1=\"4929\" x2=\"5166\" y2=\"4903\" stroke-width=\"33.333333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"5144\" y1=\"4987\" x2=\"5096\" y2=\"4974\" stroke-width=\"33.333333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"5144\" y1=\"4987\" x2=\"5192\" y2=\"5000\" stroke-width=\"33.333333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"5144\" y1=\"4987\" x2=\"5151\" y2=\"4959\" stroke-width=\"33.333333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"5118\" y1=\"4916\" x2=\"5111\" y2=\"4888\" stroke-width=\"33.333333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"5060\" y1=\"4868\" x2=\"5040\" y2=\"4848\" stroke-width=\"33.333333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"4987\" y1=\"4855\" x2=\"4959\" y2=\"4848\" stroke-width=\"33.333333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"4916\" y1=\"4881\" x2=\"4888\" y2=\"4888\" stroke-width=\"33.333333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"4868\" y1=\"4939\" x2=\"4848\" y2=\"4959\" stroke-width=\"33.333333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"4855\" y1=\"5012\" x2=\"4848\" y2=\"5040\" stroke-width=\"33.333333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"4881\" y1=\"5083\" x2=\"4888\" y2=\"5111\" stroke-width=\"33.333333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"4939\" y1=\"5131\" x2=\"4959\" y2=\"5151\" stroke-width=\"33.333333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"5012\" y1=\"5144\" x2=\"5040\" y2=\"5151\" stroke-width=\"33.333333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"5083\" y1=\"5118\" x2=\"5111\" y2=\"5111\" stroke-width=\"33.333333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"5131\" y1=\"5060\" x2=\"5151\" y2=\"5040\" stroke-width=\"33.333333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"5140\" y1=\"5000\" x2=\"5096\" y2=\"5025\" stroke-width=\"33.333333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"5051\" y1=\"5000\" x2=\"5096\" y2=\"4974\" stroke-width=\"33.333333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"5121\" y1=\"4929\" x2=\"5096\" y2=\"4974\" stroke-width=\"33.333333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"5044\" y1=\"4974\" x2=\"5070\" y2=\"4929\" stroke-width=\"33.333333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"5070\" y1=\"4878\" x2=\"5070\" y2=\"4929\" stroke-width=\"33.333333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"5025\" y1=\"4955\" x2=\"5025\" y2=\"4903\" stroke-width=\"33.333333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"5000\" y1=\"4859\" x2=\"5025\" y2=\"4903\" stroke-width=\"33.333333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"5000\" y1=\"4948\" x2=\"4974\" y2=\"4903\" stroke-width=\"33.333333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"4929\" y1=\"4878\" x2=\"4974\" y2=\"4903\" stroke-width=\"33.333333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"4974\" y1=\"4955\" x2=\"4929\" y2=\"4929\" stroke-width=\"33.333333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"4878\" y1=\"4929\" x2=\"4929\" y2=\"4929\" stroke-width=\"33.333333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"4955\" y1=\"4974\" x2=\"4903\" y2=\"4974\" stroke-width=\"33.333333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"4859\" y1=\"5000\" x2=\"4903\" y2=\"4974\" stroke-width=\"33.333333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"4948\" y1=\"5000\" x2=\"4903\" y2=\"5025\" stroke-width=\"33.333333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"4878\" y1=\"5070\" x2=\"4903\" y2=\"5025\" stroke-width=\"33.333333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"4955\" y1=\"5025\" x2=\"4929\" y2=\"5070\" stroke-width=\"33.333333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"4929\" y1=\"5121\" x2=\"4929\" y2=\"5070\" stroke-width=\"33.333333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"4974\" y1=\"5044\" x2=\"4974\" y2=\"5096\" stroke-width=\"33.333333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"5000\" y1=\"5140\" x2=\"4974\" y2=\"5096\" stroke-width=\"33.333333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"5000\" y1=\"5051\" x2=\"5025\" y2=\"5096\" stroke-width=\"33.333333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"5070\" y1=\"5121\" x2=\"5025\" y2=\"5096\" stroke-width=\"33.333333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"5025\" y1=\"5044\" x2=\"5070\" y2=\"5070\" stroke-width=\"33.333333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"5121\" y1=\"5070\" x2=\"5070\" y2=\"5070\" stroke-width=\"33.333333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"5044\" y1=\"5025\" x2=\"5096\" y2=\"5025\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"7113\" y1=\"5566\" x2=\"8660\" y2=\"5980\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"6547\" y1=\"6547\" x2=\"7679\" y2=\"7679\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"5566\" y1=\"7113\" x2=\"5980\" y2=\"8660\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"4433\" y1=\"7113\" x2=\"4019\" y2=\"8660\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"3452\" y1=\"6547\" x2=\"2320\" y2=\"7679\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"2886\" y1=\"5566\" x2=\"1339\" y2=\"5980\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"2886\" y1=\"4433\" x2=\"1339\" y2=\"4019\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"3452\" y1=\"3452\" x2=\"2320\" y2=\"2320\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"4433\" y1=\"2886\" x2=\"4019\" y2=\"1339\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"5566\" y1=\"2886\" x2=\"5980\" y2=\"1339\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"6547\" y1=\"3452\" x2=\"7679\" y2=\"2320\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"7113\" y1=\"4433\" x2=\"8660\" y2=\"4019\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"6132\" y1=\"4999\" x2=\"6961\" y2=\"5000\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"5980\" y1=\"4433\" x2=\"6698\" y2=\"4019\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"5566\" y1=\"4019\" x2=\"5980\" y2=\"3301\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"5000\" y1=\"3867\" x2=\"5000\" y2=\"3038\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"4433\" y1=\"4019\" x2=\"4019\" y2=\"3301\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"4019\" y1=\"4433\" x2=\"3301\" y2=\"4019\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"3867\" y1=\"5000\" x2=\"3038\" y2=\"5000\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"4019\" y1=\"5566\" x2=\"3301\" y2=\"5980\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"4433\" y1=\"5980\" x2=\"4019\" y2=\"6698\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"5000\" y1=\"6132\" x2=\"5000\" y2=\"6961\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"5566\" y1=\"5980\" x2=\"5980\" y2=\"6698\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"5980\" y1=\"5566\" x2=\"6698\" y2=\"5980\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"5566\" y1=\"5151\" x2=\"5980\" y2=\"5262\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"5414\" y1=\"5414\" x2=\"5717\" y2=\"5717\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"5151\" y1=\"5566\" x2=\"5262\" y2=\"5980\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"4848\" y1=\"5566\" x2=\"4737\" y2=\"5980\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"4585\" y1=\"5414\" x2=\"4282\" y2=\"5717\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"4433\" y1=\"5151\" x2=\"4019\" y2=\"5262\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"4433\" y1=\"4848\" x2=\"4019\" y2=\"4737\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"4585\" y1=\"4585\" x2=\"4282\" y2=\"4282\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"4848\" y1=\"4433\" x2=\"4737\" y2=\"4019\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"5151\" y1=\"4433\" x2=\"5262\" y2=\"4019\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"5414\" y1=\"4585\" x2=\"5717\" y2=\"4282\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"5566\" y1=\"4848\" x2=\"5980\" y2=\"4737\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"5303\" y1=\"4999\" x2=\"5525\" y2=\"5000\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"5262\" y1=\"4848\" x2=\"5455\" y2=\"4737\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"5151\" y1=\"4737\" x2=\"5262\" y2=\"4544\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"5000\" y1=\"4696\" x2=\"5000\" y2=\"4474\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"4848\" y1=\"4737\" x2=\"4737\" y2=\"4544\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"4737\" y1=\"4848\" x2=\"4544\" y2=\"4737\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"4696\" y1=\"5000\" x2=\"4474\" y2=\"5000\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"4737\" y1=\"5151\" x2=\"4544\" y2=\"5262\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"4848\" y1=\"5262\" x2=\"4737\" y2=\"5455\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"5000\" y1=\"5303\" x2=\"5000\" y2=\"5525\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"5151\" y1=\"5262\" x2=\"5262\" y2=\"5455\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"5262\" y1=\"5151\" x2=\"5455\" y2=\"5262\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"5151\" y1=\"5040\" x2=\"5262\" y2=\"5070\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"5111\" y1=\"5111\" x2=\"5192\" y2=\"5192\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"5040\" y1=\"5151\" x2=\"5070\" y2=\"5262\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"4959\" y1=\"5151\" x2=\"4929\" y2=\"5262\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"4888\" y1=\"5111\" x2=\"4807\" y2=\"5192\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"4848\" y1=\"5040\" x2=\"4737\" y2=\"5070\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"4848\" y1=\"4959\" x2=\"4737\" y2=\"4929\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"4888\" y1=\"4888\" x2=\"4807\" y2=\"4807\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"4959\" y1=\"4848\" x2=\"4929\" y2=\"4737\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"5040\" y1=\"4848\" x2=\"5070\" y2=\"4737\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"5111\" y1=\"4888\" x2=\"5192\" y2=\"4807\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"5151\" y1=\"4959\" x2=\"5262\" y2=\"4929\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"5051\" y1=\"5000\" x2=\"5044\" y2=\"4974\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"5044\" y1=\"4974\" x2=\"5025\" y2=\"4955\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"5025\" y1=\"4955\" x2=\"5000\" y2=\"4948\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"5000\" y1=\"4948\" x2=\"4974\" y2=\"4955\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"4974\" y1=\"4955\" x2=\"4955\" y2=\"4974\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"4955\" y1=\"4974\" x2=\"4948\" y2=\"5000\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"4948\" y1=\"5000\" x2=\"4955\" y2=\"5025\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"4955\" y1=\"5025\" x2=\"4974\" y2=\"5044\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"4974\" y1=\"5044\" x2=\"5000\" y2=\"5051\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"5000\" y1=\"5051\" x2=\"5025\" y2=\"5044\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"5025\" y1=\"5044\" x2=\"5044\" y2=\"5025\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"5044\" y1=\"5025\" x2=\"5051\" y2=\"5000\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"5051\" y1=\"5000\" x2=\"5140\" y2=\"5000\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"5044\" y1=\"4974\" x2=\"5121\" y2=\"4929\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"5025\" y1=\"4955\" x2=\"5070\" y2=\"4878\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"5000\" y1=\"4948\" x2=\"5000\" y2=\"4859\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"4974\" y1=\"4955\" x2=\"4929\" y2=\"4878\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"4955\" y1=\"4974\" x2=\"4878\" y2=\"4929\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"4948\" y1=\"5000\" x2=\"4859\" y2=\"5000\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"4955\" y1=\"5025\" x2=\"4878\" y2=\"5070\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"4974\" y1=\"5044\" x2=\"4929\" y2=\"5121\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"5000\" y1=\"5051\" x2=\"5000\" y2=\"5140\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"5025\" y1=\"5044\" x2=\"5070\" y2=\"5121\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"5044\" y1=\"5025\" x2=\"5121\" y2=\"5070\" stroke-width=\"33.333333333333336\"/></svg>` \n            }\n        ];</script> <style> .edit-mode-disabled #globalNav{ display:none !important;}.edit-mode-disabled body{ padding-top:0 !important; }.edit-mode-disabled .main-content{ margin-top:0 !important; } #loadingScreen{ position:fixed;top:0;left:0;width:100%;height:100%;background-color:#000000;display:flex;justify-content:center;align-items:center;z-index:9999;font-family:'Lato', 'Helvetica', Arial, sans-serif;}#loadingText{ color:#ffffff;font-size:16px;font-weight:300;letter-spacing:2px;}.loading-dots{ display:inline-block;width:60px;text-align:left;}.loading-dots::after{ content:'';animation:loadingDots 1.5s infinite;}@keyframes loadingDots{ 0%{ content:'';}25%{ content:'.';}50%{ content:'..';}75%{ content:'...';}100%{ content:'';}} .loading-hidden #loadingScreen{ opacity:0;pointer-events:none;transition:opacity 0.5s ease-out;} .fade-out-loading #loadingScreen{ animation:fadeOutLoading 0.8s ease-out forwards;}@keyframes fadeOutLoading{ 0%{ opacity:1;visibility:visible;}100%{ opacity:0;visibility:hidden;}}</style> <script id=\"vertexShader\" type=\"x-shader/x-vertex\">\n        attribute vec2 a_position;\n        void main() {\n           gl_Position = vec4(a_position, 0, 1);\n        }\n    </script> <script id=\"packToBytesShader\" type=\"x-shader/x-fragment\">\n        precision mediump float;\n        uniform vec2 u_floatTextureDim;\n        uniform sampler2D u_floatTexture;\n        uniform float u_vectorLength;\n        float shift_right (float v, float amt) {\n            v = floor(v) + 0.5;\n            return floor(v / exp2(amt));\n        }\n        float shift_left (float v, float amt) {\n            return floor(v * exp2(amt) + 0.5);\n        }\n        float mask_last (float v, float bits) {\n            return mod(v, shift_left(1.0, bits));\n        }\n        float extract_bits (float num, float from, float to) {\n            from = floor(from + 0.5); to = floor(to + 0.5);\n            return mask_last(shift_right(num, from), to - from);\n        }\n        vec4 encode_float (float val) {\n            if (val == 0.0) return vec4(0, 0, 0, 0);\n            float sign = val > 0.0 ? 0.0 : 1.0;\n            val = abs(val);\n            float exponent = floor(log2(val));\n            float biased_exponent = exponent + 127.0;\n            float fraction = ((val / exp2(exponent)) - 1.0) * 8388608.0;\n            float t = biased_exponent / 2.0;\n            float last_bit_of_biased_exponent = fract(t) * 2.0;\n            float remaining_bits_of_biased_exponent = floor(t);\n            float byte4 = extract_bits(fraction, 0.0, 8.0) / 255.0;\n            float byte3 = extract_bits(fraction, 8.0, 16.0) / 255.0;\n            float byte2 = (last_bit_of_biased_exponent * 128.0 + extract_bits(fraction, 16.0, 23.0)) / 255.0;\n            float byte1 = (sign * 128.0 + remaining_bits_of_biased_exponent) / 255.0;\n            return vec4(byte4, byte3, byte2, byte1);\n        }\n        void main(){\n            vec2 fragCoord = gl_FragCoord.xy;\n            float textureXcoord = floor((fragCoord.x - 0.5)/u_vectorLength+0.0001) + 0.5;\n            vec4 data = texture2D(u_floatTexture, vec2(textureXcoord, fragCoord.y)/u_floatTextureDim);\n            int textureIndex = int(floor(mod(fragCoord.x-0.5+0.0001, u_vectorLength)));\n            if (textureIndex == 0) gl_FragColor = encode_float(data[0]);\n            else if (textureIndex == 1) gl_FragColor = encode_float(data[1]);\n            else if (textureIndex == 2) gl_FragColor = encode_float(data[2]);\n            else if (textureIndex == 3) gl_FragColor = encode_float(data[3]);\n        }\n    </script> <script id=\"zeroTexture\" type=\"x-shader/x-fragment\">\n        precision mediump float;\n        void main(){\n            gl_FragColor = vec4(0.0);\n        }\n    </script> <script id=\"zeroThetaTexture\" type=\"x-shader/x-fragment\">\n        precision mediump float;\n        uniform sampler2D u_theta;\n        uniform vec2 u_textureDimCreases;\n        void main(){\n            vec2 fragCoord = gl_FragCoord.xy;\n            vec2 scaledFragCoord = fragCoord/u_textureDimCreases;\n            vec4 theta = texture2D(u_theta, scaledFragCoord);\n            gl_FragColor = vec4(0.0, 0.0, theta[2], theta[3]);\n        }\n    </script> <script id=\"centerTexture\" type=\"x-shader/x-fragment\">\n        precision mediump float;\n        uniform sampler2D u_lastPosition;\n        uniform vec2 u_textureDim;\n        uniform vec3 u_center;\n        void main(){\n            vec2 fragCoord = gl_FragCoord.xy;\n            vec2 scaledFragCoord = fragCoord/u_textureDim;\n            vec3 position = texture2D(u_lastPosition, scaledFragCoord).xyz;\n            gl_FragColor = vec4(position-u_center, 0.0);\n        }\n    </script> <script id=\"copyTexture\" type=\"x-shader/x-fragment\">\n        precision mediump float;\n        uniform sampler2D u_orig;\n        uniform vec2 u_textureDim;\n        void main(){\n            gl_FragColor = texture2D(u_orig, gl_FragCoord.xy/u_textureDim);\n        }\n    </script> <script id=\"positionCalcShader\" type=\"x-shader/x-fragment\">\n        precision mediump float;\n        uniform vec2 u_textureDim;\n        uniform float u_dt;\n        uniform sampler2D u_lastPosition;\n        uniform sampler2D u_velocity;\n        uniform sampler2D u_mass;\n\n        void main(){\n            vec2 fragCoord = gl_FragCoord.xy;\n            vec2 scaledFragCoord = fragCoord/u_textureDim;\n\n            vec3 lastPosition = texture2D(u_lastPosition, scaledFragCoord).xyz;\n\n            float isFixed = texture2D(u_mass, scaledFragCoord).y;\n            if (isFixed == 1.0){\n                gl_FragColor = vec4(lastPosition, 0.0);\n                return;\n            }\n\n            vec4 velocityData = texture2D(u_velocity, scaledFragCoord);\n            vec3 position = velocityData.xyz*u_dt + lastPosition;\n            gl_FragColor = vec4(position, velocityData.a);//velocity.a has error info\n        }\n    </script> <script id=\"velocityCalcVerletShader\" type=\"x-shader/x-fragment\">\n        precision mediump float;\n        uniform vec2 u_textureDim;\n        uniform float u_dt;\n        uniform sampler2D u_position;\n        uniform sampler2D u_lastPosition;\n        uniform sampler2D u_mass;\n\n        void main(){\n            vec2 fragCoord = gl_FragCoord.xy;\n            vec2 scaledFragCoord = fragCoord/u_textureDim;\n\n            float isFixed = texture2D(u_mass, scaledFragCoord).y;\n            if (isFixed == 1.0){\n                gl_FragColor = vec4(0.0);\n                return;\n            }\n\n            vec3 position = texture2D(u_position, scaledFragCoord).xyz;\n            vec3 lastPosition = texture2D(u_lastPosition, scaledFragCoord).xyz;\n            gl_FragColor = vec4((position-lastPosition)/u_dt,0.0);\n        }\n    </script> <script id=\"velocityCalcShader\" type=\"x-shader/x-fragment\">\n        precision mediump float;\n        uniform vec2 u_textureDim;\n        uniform vec2 u_textureDimEdges;\n        uniform vec2 u_textureDimFaces;\n        uniform vec2 u_textureDimCreases;\n        uniform vec2 u_textureDimNodeCreases;\n        uniform vec2 u_textureDimNodeFaces;\n        uniform float u_creasePercent;\n        uniform float u_dt;\n        uniform float u_axialStiffness;\n        uniform float u_faceStiffness;\n        uniform sampler2D u_lastPosition;\n        uniform sampler2D u_lastVelocity;\n        uniform sampler2D u_originalPosition;\n        uniform sampler2D u_externalForces;\n        uniform sampler2D u_mass;\n        uniform sampler2D u_meta;//[beamsIndex, numBeam, nodeCreaseMetaIndex, numCreases]\n        uniform sampler2D u_beamMeta;//[k, d, length, otherNodeIndex]\n        uniform sampler2D u_creaseMeta;//[k, d, targetTheta]\n        uniform sampler2D u_nodeCreaseMeta;//[creaseIndex, nodeIndex, -, -]\n        uniform sampler2D u_normals;\n        uniform sampler2D u_theta;//[theta, z, normal1Index, normal2Index]\n        uniform sampler2D u_creaseGeo;//[h1, h2, coef1, coef2]\n        uniform sampler2D u_meta2;//[nodesFaceIndex, numFaces]\n        uniform sampler2D u_nodeFaceMeta;//[faceIndex, a, b, c]\n        uniform sampler2D u_nominalTriangles;//[angleA, angleB, angleC]\n        uniform bool u_calcFaceStrain;\n\n        vec4 getFromArray(float index1D, vec2 dimensions, sampler2D tex){\n            vec2 index = vec2(mod(index1D, dimensions.x)+0.5, floor(index1D/dimensions.x)+0.5);\n            vec2 scaledIndex = index/dimensions;\n            return texture2D(tex, scaledIndex);\n        }\n\n        vec3 getPosition(float index1D){\n            vec2 index = vec2(mod(index1D, u_textureDim.x)+0.5, floor(index1D/u_textureDim.x)+0.5);\n            vec2 scaledIndex = index/u_textureDim;\n            return texture2D(u_lastPosition, scaledIndex).xyz + texture2D(u_originalPosition, scaledIndex).xyz;\n        }\n\n        void main(){\n            vec2 fragCoord = gl_FragCoord.xy;\n            vec2 scaledFragCoord = fragCoord/u_textureDim;\n\n            vec2 mass = texture2D(u_mass, scaledFragCoord).xy;\n            if (mass[1] == 1.0){//fixed\n                gl_FragColor = vec4(0.0);\n                return;\n            }\n            vec3 force = texture2D(u_externalForces, scaledFragCoord).xyz;\n            vec3 lastPosition = texture2D(u_lastPosition, scaledFragCoord).xyz;\n            vec3 lastVelocity = texture2D(u_lastVelocity, scaledFragCoord).xyz;\n            vec3 originalPosition = texture2D(u_originalPosition, scaledFragCoord).xyz;\n\n            vec4 neighborIndices = texture2D(u_meta, scaledFragCoord);\n            vec4 meta = texture2D(u_meta, scaledFragCoord);\n            vec2 meta2 = texture2D(u_meta2, scaledFragCoord).xy;\n\n            float nodeError = 0.0;\n\n            for (int j=0;j<100;j++){//for all beams (up to 100, had to put a const int in here)\n                if (j >= int(meta[1])) break;\n\n                vec4 beamMeta = getFromArray(meta[0]+float(j), u_textureDimEdges, u_beamMeta);\n\n                float neighborIndex1D = beamMeta[3];\n                vec2 neighborIndex = vec2(mod(neighborIndex1D, u_textureDim.x)+0.5, floor(neighborIndex1D/u_textureDim.x)+0.5);\n                vec2 scaledNeighborIndex = neighborIndex/u_textureDim;\n                vec3 neighborLastPosition = texture2D(u_lastPosition, scaledNeighborIndex).xyz;\n                vec3 neighborLastVelocity = texture2D(u_lastVelocity, scaledNeighborIndex).xyz;\n                vec3 neighborOriginalPosition = texture2D(u_originalPosition, scaledNeighborIndex).xyz;\n\n                vec3 nominalDist = neighborOriginalPosition-originalPosition;\n                vec3 deltaP = neighborLastPosition-lastPosition+nominalDist;\n                float deltaPLength = length(deltaP);\n                deltaP -= deltaP*(beamMeta[2]/deltaPLength);\n                if (!u_calcFaceStrain) nodeError += abs(deltaPLength/length(nominalDist) - 1.0);\n                vec3 deltaV = neighborLastVelocity-lastVelocity;\n\n                vec3 _force = deltaP*beamMeta[0] + deltaV*beamMeta[1];\n                force += _force;\n            }\n            if (!u_calcFaceStrain) nodeError /= meta[1];\n\n            for (int j=0;j<100;j++){//for all creases (up to 100, had to put a const int in here)\n                if (j >= int(meta[3])) break;\n\n                vec4 nodeCreaseMeta = getFromArray(meta[2]+float(j), u_textureDimNodeCreases, u_nodeCreaseMeta);\n\n                float creaseIndex1D = nodeCreaseMeta[0];\n                vec2 creaseIndex = vec2(mod(creaseIndex1D, u_textureDimCreases.x)+0.5, floor(creaseIndex1D/u_textureDimCreases.x)+0.5);\n                vec2 scaledCreaseIndex = creaseIndex/u_textureDimCreases;\n\n                vec4 thetas = texture2D(u_theta, scaledCreaseIndex);\n                vec3 creaseMeta = texture2D(u_creaseMeta, scaledCreaseIndex).xyz;//[k, d, targetTheta]\n                vec4 creaseGeo = texture2D(u_creaseGeo, scaledCreaseIndex);//[h1, h2, coef1, coef2]\n                if (creaseGeo[0]< 0.0) continue;//crease disabled bc it has collapsed too much\n\n                float targetTheta = creaseMeta[2] * u_creasePercent;\n                float angForce = creaseMeta[0]*(targetTheta-thetas[0]);// + creaseMeta[1]*thetas[1];\n\n                float nodeNum = nodeCreaseMeta[1];//1, 2, 3, 4\n\n                if (nodeNum > 2.0){//crease reaction, node is on a crease\n\n                    //node #1\n                    vec3 normal1 = getFromArray(thetas[2], u_textureDimFaces, u_normals).xyz;\n\n                    //node #2\n                    vec3 normal2 = getFromArray(thetas[3], u_textureDimFaces, u_normals).xyz;\n\n                    float coef1 = creaseGeo[2];\n                    float coef2 = creaseGeo[3];\n\n                    if (nodeNum == 3.0){\n                        coef1 = 1.0-coef1;\n                        coef2 = 1.0-coef2;\n                    }\n\n                    vec3 _force = -angForce*(coef1/creaseGeo[0]*normal1 + coef2/creaseGeo[1]*normal2);\n                    force += _force;\n\n                } else {\n\n                    float normalIndex1D = thetas[2];//node #1\n                    float momentArm = creaseGeo[0];//node #1\n                    if (nodeNum == 2.0) {\n                        normalIndex1D = thetas[3];//node #2\n                        momentArm = creaseGeo[1];//node #2\n                    }\n\n                    vec3 normal = getFromArray(normalIndex1D, u_textureDimFaces, u_normals).xyz;\n\n                    vec3 _force = angForce/momentArm*normal;\n                    force += _force;\n                }\n            }\n\n            for (int j=0;j<100;j++){//for all faces (up to 100, had to put a const int in here)\n                if (j >= int(meta2[1])) break;\n\n                vec4 faceMeta = getFromArray(meta2[0]+float(j), u_textureDimNodeFaces, u_nodeFaceMeta);//[face index, a, b, c]\n                vec3 nominalAngles = getFromArray(faceMeta[0], u_textureDimFaces, u_nominalTriangles).xyz;//[angA, angB, angC]\n\n                int faceIndex = 0;\n                if (faceMeta[2] < 0.0) faceIndex = 1;\n                if (faceMeta[3] < 0.0) faceIndex = 2;\n\n                //get node positions\n                vec3 a = faceIndex == 0 ? lastPosition+originalPosition : getPosition(faceMeta[1]);\n                vec3 b = faceIndex == 1 ? lastPosition+originalPosition : getPosition(faceMeta[2]);\n                vec3 c = faceIndex == 2 ? lastPosition+originalPosition : getPosition(faceMeta[3]);\n\n                //calc angles\n                vec3 ab = b-a;\n                vec3 ac = c-a;\n                vec3 bc = c-b;\n\n                float lengthAB = length(ab);\n                float lengthAC = length(ac);\n                float lengthBC = length(bc);\n\n                float tol = 0.0000001;\n                if (abs(lengthAB) < tol || abs(lengthBC) < tol || abs(lengthAC) < tol) continue;\n\n                ab /= lengthAB;\n                ac /= lengthAC;\n                bc /= lengthBC;\n\n                vec3 angles = vec3(acos(dot(ab, ac)),\n                    acos(-1.0*dot(ab, bc)),\n                    acos(dot(ac, bc)));\n                vec3 anglesDiff = nominalAngles-angles;\n\n                vec3 normal = getFromArray(faceMeta[0], u_textureDimFaces, u_normals).xyz;\n\n                //calc forces\n                anglesDiff *= u_faceStiffness;\n                if (faceIndex == 0){//a\n                    vec3 normalCrossAC = cross(normal, ac)/lengthAC;\n                    vec3 normalCrossAB = cross(normal, ab)/lengthAB;\n                    force -= anglesDiff[0]*(normalCrossAC - normalCrossAB);\n                    if (u_calcFaceStrain) nodeError += abs((nominalAngles[0]-angles[0])/nominalAngles[0]);\n                    force -= anglesDiff[1]*normalCrossAB;\n                    force += anglesDiff[2]*normalCrossAC;\n                } else if (faceIndex == 1){\n                    vec3 normalCrossAB = cross(normal, ab)/lengthAB;\n                    vec3 normalCrossBC = cross(normal, bc)/lengthBC;\n                    force -= anglesDiff[0]*normalCrossAB;\n                    force += anglesDiff[1]*(normalCrossAB + normalCrossBC);\n                    if (u_calcFaceStrain) nodeError += abs((nominalAngles[1]-angles[1])/nominalAngles[1]);\n                    force -= anglesDiff[2]*normalCrossBC;\n                } else if (faceIndex == 2){\n                    vec3 normalCrossAC = cross(normal, ac)/lengthAC;\n                    vec3 normalCrossBC = cross(normal, bc)/lengthBC;\n                    force += anglesDiff[0]*normalCrossAC;\n                    force -= anglesDiff[1]*normalCrossBC;\n                    force += anglesDiff[2]*(normalCrossBC - normalCrossAC);\n                    if (u_calcFaceStrain) nodeError += abs((nominalAngles[2]-angles[2])/nominalAngles[2]);\n                }\n\n            }\n            if (u_calcFaceStrain) nodeError /= meta2[1];\n\n            vec3 velocity = force*u_dt/mass[0] + lastVelocity;\n            gl_FragColor = vec4(velocity,nodeError);\n        }\n    </script> <script id=\"positionCalcVerletShader\" type=\"x-shader/x-fragment\">\n        precision mediump float;\n        uniform vec2 u_textureDim;\n        uniform vec2 u_textureDimEdges;\n        uniform vec2 u_textureDimFaces;\n        uniform vec2 u_textureDimCreases;\n        uniform vec2 u_textureDimNodeCreases;\n        uniform vec2 u_textureDimNodeFaces;\n        uniform float u_creasePercent;\n        uniform float u_dt;\n        uniform float u_axialStiffness;\n        uniform float u_faceStiffness;\n        uniform sampler2D u_lastPosition;\n        uniform sampler2D u_lastLastPosition;\n        uniform sampler2D u_lastVelocity;\n        uniform sampler2D u_originalPosition;\n        uniform sampler2D u_externalForces;\n        uniform sampler2D u_mass;\n        uniform sampler2D u_meta;//[beamsIndex, numBeam, nodeCreaseMetaIndex, numCreases]\n        uniform sampler2D u_beamMeta;//[k, d, length, otherNodeIndex]\n        uniform sampler2D u_creaseMeta;//[k, d, targetTheta]\n        uniform sampler2D u_nodeCreaseMeta;//[creaseIndex, nodeIndex, -, -]\n        uniform sampler2D u_normals;\n        uniform sampler2D u_theta;//[theta, z, normal1Index, normal2Index]\n        uniform sampler2D u_creaseGeo;//[h1, h2, coef1, coef2]\n        uniform sampler2D u_meta2;//[nodesFaceIndex, numFaces]\n        uniform sampler2D u_nodeFaceMeta;//[faceIndex, a, b, c]\n        uniform sampler2D u_nominalTriangles;//[angleA, angleB, angleC]\n\n        vec4 getFromArray(float index1D, vec2 dimensions, sampler2D tex){\n            vec2 index = vec2(mod(index1D, dimensions.x)+0.5, floor(index1D/dimensions.x)+0.5);\n            vec2 scaledIndex = index/dimensions;\n            return texture2D(tex, scaledIndex);\n        }\n\n        vec3 getPosition(float index1D){\n            vec2 index = vec2(mod(index1D, u_textureDim.x)+0.5, floor(index1D/u_textureDim.x)+0.5);\n            vec2 scaledIndex = index/u_textureDim;\n            return texture2D(u_lastPosition, scaledIndex).xyz + texture2D(u_originalPosition, scaledIndex).xyz;\n        }\n\n        void main(){\n            vec2 fragCoord = gl_FragCoord.xy;\n            vec2 scaledFragCoord = fragCoord/u_textureDim;\n\n            vec3 lastPosition = texture2D(u_lastPosition, scaledFragCoord).xyz;\n\n            vec2 mass = texture2D(u_mass, scaledFragCoord).xy;\n            if (mass[1] == 1.0){//fixed\n                gl_FragColor = vec4(lastPosition, 0.0);\n                return;\n            }\n            vec3 force = texture2D(u_externalForces, scaledFragCoord).xyz;\n            vec3 lastLastPosition = texture2D(u_lastLastPosition, scaledFragCoord).xyz;\n            vec3 lastVelocity = texture2D(u_lastVelocity, scaledFragCoord).xyz;\n            vec3 originalPosition = texture2D(u_originalPosition, scaledFragCoord).xyz;\n\n            vec4 neighborIndices = texture2D(u_meta, scaledFragCoord);\n            vec4 meta = texture2D(u_meta, scaledFragCoord);\n            vec2 meta2 = texture2D(u_meta2, scaledFragCoord).xy;\n\n            float nodeError = 0.0;\n\n            for (int j=0;j<100;j++){//for all beams (up to 100, had to put a const int in here)\n                if (j >= int(meta[1])) break;\n\n                vec4 beamMeta = getFromArray(meta[0]+float(j), u_textureDimEdges, u_beamMeta);\n\n                float neighborIndex1D = beamMeta[3];\n                vec2 neighborIndex = vec2(mod(neighborIndex1D, u_textureDim.x)+0.5, floor(neighborIndex1D/u_textureDim.x)+0.5);\n                vec2 scaledNeighborIndex = neighborIndex/u_textureDim;\n                vec3 neighborLastPosition = texture2D(u_lastPosition, scaledNeighborIndex).xyz;\n                vec3 neighborLastVelocity = texture2D(u_lastVelocity, scaledNeighborIndex).xyz;\n                vec3 neighborOriginalPosition = texture2D(u_originalPosition, scaledNeighborIndex).xyz;\n\n                vec3 deltaP = neighborLastPosition+neighborOriginalPosition-lastPosition-originalPosition;\n                float deltaPLength = length(deltaP);\n                float nominalLength = beamMeta[2];\n                deltaP *= (1.0-nominalLength/deltaPLength);\n                nodeError += abs(deltaPLength/nominalLength - 1.0);\n                vec3 deltaV = neighborLastVelocity-lastVelocity;\n\n                vec3 _force = deltaP*beamMeta[0] + deltaV*beamMeta[1];\n                force += _force;\n            }\n            nodeError /= meta[1];\n\n            for (int j=0;j<100;j++){//for all creases (up to 100, had to put a const int in here)\n                if (j >= int(meta[3])) break;\n\n                vec4 nodeCreaseMeta = getFromArray(meta[2]+float(j), u_textureDimNodeCreases, u_nodeCreaseMeta);\n\n                float creaseIndex1D = nodeCreaseMeta[0];\n                vec2 creaseIndex = vec2(mod(creaseIndex1D, u_textureDimCreases.x)+0.5, floor(creaseIndex1D/u_textureDimCreases.x)+0.5);\n                vec2 scaledCreaseIndex = creaseIndex/u_textureDimCreases;\n\n                vec4 thetas = texture2D(u_theta, scaledCreaseIndex);\n                vec3 creaseMeta = texture2D(u_creaseMeta, scaledCreaseIndex).xyz;//[k, d, targetTheta]\n                vec4 creaseGeo = texture2D(u_creaseGeo, scaledCreaseIndex);//[h1, h2, coef1, coef2]\n                if (creaseGeo[0]< 0.0) continue;//crease disabled bc it has collapsed too much\n\n                float targetTheta = creaseMeta[2] * u_creasePercent;\n                float angForce = creaseMeta[0]*(targetTheta-thetas[0]);// + creaseMeta[1]*thetas[1];\n\n                float nodeNum = nodeCreaseMeta[1];//1, 2, 3, 4\n\n                if (nodeNum > 2.0){//crease reaction, node is on a crease\n\n                    //node #1\n                    vec3 normal1 = getFromArray(thetas[2], u_textureDimFaces, u_normals).xyz;\n\n                    //node #2\n                    vec3 normal2 = getFromArray(thetas[3], u_textureDimFaces, u_normals).xyz;\n\n                    float coef1 = creaseGeo[2];\n                    float coef2 = creaseGeo[3];\n\n                    if (nodeNum == 3.0){\n                        coef1 = 1.0-coef1;\n                        coef2 = 1.0-coef2;\n                    }\n\n                    vec3 _force = -angForce*(coef1/creaseGeo[0]*normal1 + coef2/creaseGeo[1]*normal2);\n                    force += _force;\n\n                } else {\n\n                    float normalIndex1D = thetas[2];//node #1\n                    float momentArm = creaseGeo[0];//node #1\n                    if (nodeNum == 2.0) {\n                        normalIndex1D = thetas[3];//node #2\n                        momentArm = creaseGeo[1];//node #2\n                    }\n\n                    vec3 normal = getFromArray(normalIndex1D, u_textureDimFaces, u_normals).xyz;\n\n                    vec3 _force = angForce/momentArm*normal;\n                    force += _force;\n                }\n            }\n\n            for (int j=0;j<100;j++){//for all faces (up to 100, had to put a const int in here)\n                if (j >= int(meta2[1])) break;\n\n                vec4 faceMeta = getFromArray(meta2[0]+float(j), u_textureDimNodeFaces, u_nodeFaceMeta);//[face index, a, b, c]\n                vec3 nominalAngles = getFromArray(faceMeta[0], u_textureDimFaces, u_nominalTriangles).xyz;//[angA, angB, angC]\n\n                int faceIndex = 0;\n                if (faceMeta[2] < 0.0) faceIndex = 1;\n                if (faceMeta[3] < 0.0) faceIndex = 2;\n\n                //get node positions\n                vec3 a = faceIndex == 0 ? lastPosition+originalPosition : getPosition(faceMeta[1]);\n                vec3 b = faceIndex == 1 ? lastPosition+originalPosition : getPosition(faceMeta[2]);\n                vec3 c = faceIndex == 2 ? lastPosition+originalPosition : getPosition(faceMeta[3]);\n\n                //calc angles\n                vec3 ab = b-a;\n                vec3 ac = c-a;\n                vec3 bc = c-b;\n\n                float lengthAB = length(ab);\n                float lengthAC = length(ac);\n                float lengthBC = length(bc);\n\n                float tol = 0.0000001;\n                if (abs(lengthAB) < tol || abs(lengthBC) < tol || abs(lengthAC) < tol) continue;\n\n                ab /= lengthAB;\n                ac /= lengthAC;\n                bc /= lengthBC;\n\n                vec3 angles = vec3(acos(dot(ab, ac)),\n                    acos(-1.0*dot(ab, bc)),\n                    acos(dot(ac, bc)));\n                vec3 anglesDiff = nominalAngles-angles;\n\n                vec3 normal = getFromArray(faceMeta[0], u_textureDimFaces, u_normals).xyz;\n\n                //calc forces\n                anglesDiff *= u_faceStiffness;\n                if (faceIndex == 0){//a\n                    vec3 normalCrossAC = cross(normal, ac)/lengthAC;\n                    vec3 normalCrossAB = cross(normal, ab)/lengthAB;\n                    force -= anglesDiff[0]*(normalCrossAC - normalCrossAB);\n                    force -= anglesDiff[1]*normalCrossAB;\n                    force += anglesDiff[2]*normalCrossAC;\n                } else if (faceIndex == 1){\n                    vec3 normalCrossAB = cross(normal, ab)/lengthAB;\n                    vec3 normalCrossBC = cross(normal, bc)/lengthBC;\n                    force -= anglesDiff[0]*normalCrossAB;\n                    force += anglesDiff[1]*(normalCrossAB + normalCrossBC);\n                    force -= anglesDiff[2]*normalCrossBC;\n                } else if (faceIndex == 2){\n                    vec3 normalCrossAC = cross(normal, ac)/lengthAC;\n                    vec3 normalCrossBC = cross(normal, bc)/lengthBC;\n                    force += anglesDiff[0]*normalCrossAC;\n                    force -= anglesDiff[1]*normalCrossBC;\n                    force += anglesDiff[2]*(normalCrossBC - normalCrossAC);\n                }\n\n            }\n\n            vec3 nextPosition = force*u_dt*u_dt/mass[0] + 2.0*lastPosition - lastLastPosition;\n            gl_FragColor = vec4(nextPosition,nodeError);//position.a has error info\n        }\n    </script> <script id=\"thetaCalcShader\" type=\"x-shader/x-fragment\">\n        #define TWO_PI 6.283185307179586476925286766559\n        precision mediump float;\n        uniform vec2 u_textureDim;\n        uniform vec2 u_textureDimFaces;\n        uniform vec2 u_textureDimCreases;\n        uniform sampler2D u_normals;\n        uniform sampler2D u_lastTheta;\n        uniform sampler2D u_creaseVectors;\n        uniform sampler2D u_lastPosition;\n        uniform sampler2D u_originalPosition;\n        uniform float u_dt;\n\n        vec4 getFromArray(float index1D, vec2 dimensions, sampler2D tex){\n            vec2 index = vec2(mod(index1D, dimensions.x)+0.5, floor(index1D/dimensions.x)+0.5);\n            vec2 scaledIndex = index/dimensions;\n            return texture2D(tex, scaledIndex);\n        }\n\n        void main(){\n\n            vec2 fragCoord = gl_FragCoord.xy;\n            vec2 scaledFragCoord = fragCoord/u_textureDimCreases;\n\n            vec4 lastTheta = texture2D(u_lastTheta, scaledFragCoord);\n\n            if (lastTheta[2]<0.0){\n                gl_FragColor = vec4(lastTheta[0], 0.0, -1.0, -1.0);\n                return;\n            }\n\n            vec3 normal1 = getFromArray(lastTheta[2], u_textureDimFaces, u_normals).xyz;\n            vec3 normal2 = getFromArray(lastTheta[3], u_textureDimFaces, u_normals).xyz;\n\n            float dotNormals = dot(normal1, normal2);//normals are already normalized, no need to divide by length\n            if (dotNormals < -1.0) dotNormals = -1.0;\n            else if (dotNormals > 1.0) dotNormals = 1.0;\n\n            vec2 creaseVectorIndices = texture2D(u_creaseVectors, scaledFragCoord).xy;\n            vec2 creaseNodeIndex = vec2(mod(creaseVectorIndices[0], u_textureDim.x)+0.5, floor(creaseVectorIndices[0]/u_textureDim.x)+0.5);\n            vec2 scaledNodeIndex = creaseNodeIndex/u_textureDim;\n            vec3 node0 = texture2D(u_lastPosition, scaledNodeIndex).xyz + texture2D(u_originalPosition, scaledNodeIndex).xyz;\n            creaseNodeIndex = vec2(mod(creaseVectorIndices[1], u_textureDim.x)+0.5, floor(creaseVectorIndices[1]/u_textureDim.x)+0.5);\n            scaledNodeIndex = creaseNodeIndex/u_textureDim;\n            vec3 node1 = texture2D(u_lastPosition, scaledNodeIndex).xyz + texture2D(u_originalPosition, scaledNodeIndex).xyz;\n\n            //https://math.stackexchange.com/questions/47059/how-do-i-calculate-a-dihedral-angle-given-cartesian-coordinates\n            vec3 creaseVector = normalize(node1-node0);\n            float x = dotNormals;\n            float y = dot(cross(normal1, creaseVector), normal2);\n\n            float theta = atan(y, x);\n\n            float diff = theta-lastTheta[0];\n            float origDiff = diff;\n            if (diff < -5.0) {\n                diff += TWO_PI;\n            } else if (diff > 5.0) {\n                diff -= TWO_PI;\n            }\n            theta = lastTheta[0] + diff;\n            gl_FragColor = vec4(theta, diff, lastTheta[2], lastTheta[3]);//[theta, w, normal1Index, normal2Index]\n        }\n    </script> <script id=\"normalCalc\" type=\"x-shader/x-fragment\">\n        precision mediump float;\n        uniform vec2 u_textureDim;\n        uniform vec2 u_textureDimFaces;\n        uniform sampler2D u_faceVertexIndices;\n        uniform sampler2D u_lastPosition;\n        uniform sampler2D u_originalPosition;\n\n        vec3 getPosition(float index1D){\n            vec2 index = vec2(mod(index1D, u_textureDim.x)+0.5, floor(index1D/u_textureDim.x)+0.5);\n            vec2 scaledIndex = index/u_textureDim;\n            return texture2D(u_lastPosition, scaledIndex).xyz + texture2D(u_originalPosition, scaledIndex).xyz;\n        }\n\n        void main(){\n            vec2 fragCoord = gl_FragCoord.xy;\n            vec2 scaledFragCoord = fragCoord/u_textureDimFaces;\n\n            vec3 indices = texture2D(u_faceVertexIndices, scaledFragCoord).xyz;\n\n            vec3 a = getPosition(indices[0]);\n            vec3 b = getPosition(indices[1]);\n            vec3 c = getPosition(indices[2]);\n\n            vec3 normal = normalize(cross(b-a, c-a));\n\n            gl_FragColor = vec4(normal, 0.0);\n        }\n    </script> <script id=\"updateCreaseGeo\" type=\"x-shader/x-fragment\">\n        precision mediump float;\n        uniform vec2 u_textureDim;\n        uniform vec2 u_textureDimCreases;\n        uniform sampler2D u_lastPosition;\n        uniform sampler2D u_originalPosition;\n        uniform sampler2D u_creaseMeta2;\n\n        vec3 getPosition(float index1D){\n            vec2 index = vec2(mod(index1D, u_textureDim.x)+0.5, floor(index1D/u_textureDim.x)+0.5);\n            vec2 scaledIndex = index/u_textureDim;\n            return texture2D(u_lastPosition, scaledIndex).xyz + texture2D(u_originalPosition, scaledIndex).xyz;\n        }\n\n        void main(){\n            vec2 fragCoord = gl_FragCoord.xy;\n            vec2 scaledFragCoord = fragCoord/u_textureDimCreases;\n\n            vec4 creaseMeta = texture2D(u_creaseMeta2, scaledFragCoord);\n\n            vec3 node1 = getPosition(creaseMeta[0]);\n            vec3 node2 = getPosition(creaseMeta[1]);\n            vec3 node3 = getPosition(creaseMeta[2]);\n            vec3 node4 = getPosition(creaseMeta[3]);\n\n            float tol = 0.000001;\n\n            vec3 creaseVector = node4-node3;\n            float creaseLength = length(creaseVector);\n\n            if (abs(creaseLength)<tol) {\n                gl_FragColor = vec4(-1);//disable crease\n                return;\n            }\n            creaseVector /= creaseLength;\n\n            vec3 vector1 = node1-node3;\n            vec3 vector2 = node2-node3;\n\n            float proj1Length = dot(creaseVector, vector1);\n            float proj2Length = dot(creaseVector, vector2);\n\n            float dist1 = sqrt(abs(vector1.x*vector1.x+vector1.y*vector1.y+vector1.z*vector1.z-proj1Length*proj1Length));\n            float dist2 = sqrt(abs(vector2.x*vector2.x+vector2.y*vector2.y+vector2.z*vector2.z-proj2Length*proj2Length));\n\n            if (dist1<tol || dist2<tol){\n                gl_FragColor = vec4(-1);//disable crease\n                return;\n            }\n\n            gl_FragColor = vec4(dist1, dist2, proj1Length/creaseLength, proj2Length/creaseLength);\n        }\n    </script> <script src=\"https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.0/jquery.min.js\" integrity=\"sha512-b6lGn9+1aD2DgwZXuSY4BhhdrDURVzu7f/PASu4H1i5+CRpEalOOz/HNhgmxZTK9lObM1Q7ZG9jONPYz8klIMg==\" crossorigin=\"anonymous\" referrerpolicy=\"no-referrer\"></script> <script src=\"https://cdnjs.cloudflare.com/ajax/libs/flat-ui/2.3.0/js/flat-ui.min.js\" integrity=\"sha512-GG/1z6B4MVJdQOw35lE4otrbjd2WYV+zhXgjUR+DTeaAc7s/ijgWsexEScSOIo8J4RlhC28CVerDjYQSH89ekQ==\" crossorigin=\"anonymous\" referrerpolicy=\"no-referrer\"></script> <script type=\"text/javascript\">// threejs.org/license\n(function(m,na){\"object\"===typeof exports&&\"undefined\"!==typeof module?na(exports):\"function\"===typeof define&&define.amd?define([\"exports\"],na):na(m.THREE=m.THREE||{})})(this,function(m){function na(){}function D(a,b){this.x=a||0;this.y=b||0}function N(a,b,c,d,e,f,g,h,k,l){Object.defineProperty(this,\"id\",{value:lf++});this.uuid=R.generateUUID();this.name=\"\";this.image=void 0!==a?a:N.DEFAULT_IMAGE;this.mipmaps=[];this.mapping=void 0!==b?b:N.DEFAULT_MAPPING;this.wrapS=void 0!==c?c:1001;this.wrapT=\nvoid 0!==d?d:1001;this.magFilter=void 0!==e?e:1006;this.minFilter=void 0!==f?f:1008;this.anisotropy=void 0!==k?k:1;this.format=void 0!==g?g:1023;this.type=void 0!==h?h:1009;this.offset=new D(0,0);this.repeat=new D(1,1);this.generateMipmaps=!0;this.premultiplyAlpha=!1;this.flipY=!0;this.unpackAlignment=4;this.encoding=void 0!==l?l:3E3;this.version=0;this.onUpdate=null}function S(a,b,c,d){this.x=a||0;this.y=b||0;this.z=c||0;this.w=void 0!==d?d:1}function Ab(a,b,c){this.uuid=R.generateUUID();this.width=\na;this.height=b;this.scissor=new S(0,0,a,b);this.scissorTest=!1;this.viewport=new S(0,0,a,b);c=c||{};void 0===c.minFilter&&(c.minFilter=1006);this.texture=new N(void 0,void 0,c.wrapS,c.wrapT,c.magFilter,c.minFilter,c.format,c.type,c.anisotropy,c.encoding);this.depthBuffer=void 0!==c.depthBuffer?c.depthBuffer:!0;this.stencilBuffer=void 0!==c.stencilBuffer?c.stencilBuffer:!0;this.depthTexture=void 0!==c.depthTexture?c.depthTexture:null}function Bb(a,b,c){Ab.call(this,a,b,c);this.activeMipMapLevel=this.activeCubeFace=\n0}function ia(a,b,c,d){this._x=a||0;this._y=b||0;this._z=c||0;this._w=void 0!==d?d:1}function n(a,b,c){this.x=a||0;this.y=b||0;this.z=c||0}function O(){this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];0<arguments.length&&console.error(\"THREE.Matrix4: the constructor no longer reads arguments. use .set() instead.\")}function bb(a,b,c,d,e,f,g,h,k,l,q,p){N.call(this,null,f,g,h,k,l,d,e,q,p);this.image={data:a,width:b,height:c};this.magFilter=void 0!==k?k:1003;this.minFilter=void 0!==l?l:1003;this.flipY=\nthis.generateMipmaps=!1;this.unpackAlignment=1}function Va(a,b,c,d,e,f,g,h,k,l){a=void 0!==a?a:[];N.call(this,a,void 0!==b?b:301,c,d,e,f,g,h,k,l);this.flipY=!1}function Cb(a,b,c){var d=a[0];if(0>=d||0<d)return a;var e=b*c,f=ye[e];void 0===f&&(f=new Float32Array(e),ye[e]=f);if(0!==b)for(d.toArray(f,0),d=1,e=0;d!==b;++d)e+=c,a[d].toArray(f,e);return f}function ze(a,b){var c=Ae[b];void 0===c&&(c=new Int32Array(b),Ae[b]=c);for(var d=0;d!==b;++d)c[d]=a.allocTextureUnit();return c}function mf(a,b){a.uniform1f(this.addr,\nb)}function nf(a,b){a.uniform1i(this.addr,b)}function of(a,b){void 0===b.x?a.uniform2fv(this.addr,b):a.uniform2f(this.addr,b.x,b.y)}function pf(a,b){void 0!==b.x?a.uniform3f(this.addr,b.x,b.y,b.z):void 0!==b.r?a.uniform3f(this.addr,b.r,b.g,b.b):a.uniform3fv(this.addr,b)}function qf(a,b){void 0===b.x?a.uniform4fv(this.addr,b):a.uniform4f(this.addr,b.x,b.y,b.z,b.w)}function rf(a,b){a.uniformMatrix2fv(this.addr,!1,b.elements||b)}function sf(a,b){void 0===b.elements?a.uniformMatrix3fv(this.addr,!1,b):\n(Be.set(b.elements),a.uniformMatrix3fv(this.addr,!1,Be))}function tf(a,b){void 0===b.elements?a.uniformMatrix4fv(this.addr,!1,b):(Ce.set(b.elements),a.uniformMatrix4fv(this.addr,!1,Ce))}function uf(a,b,c){var d=c.allocTextureUnit();a.uniform1i(this.addr,d);c.setTexture2D(b||De,d)}function vf(a,b,c){var d=c.allocTextureUnit();a.uniform1i(this.addr,d);c.setTextureCube(b||Ee,d)}function Fe(a,b){a.uniform2iv(this.addr,b)}function Ge(a,b){a.uniform3iv(this.addr,b)}function He(a,b){a.uniform4iv(this.addr,\nb)}function wf(a){switch(a){case 5126:return mf;case 35664:return of;case 35665:return pf;case 35666:return qf;case 35674:return rf;case 35675:return sf;case 35676:return tf;case 35678:case 36198:return uf;case 35680:return vf;case 5124:case 35670:return nf;case 35667:case 35671:return Fe;case 35668:case 35672:return Ge;case 35669:case 35673:return He}}function xf(a,b){a.uniform1fv(this.addr,b)}function yf(a,b){a.uniform1iv(this.addr,b)}function zf(a,b){a.uniform2fv(this.addr,Cb(b,this.size,2))}function Af(a,\nb){a.uniform3fv(this.addr,Cb(b,this.size,3))}function Bf(a,b){a.uniform4fv(this.addr,Cb(b,this.size,4))}function Cf(a,b){a.uniformMatrix2fv(this.addr,!1,Cb(b,this.size,4))}function Df(a,b){a.uniformMatrix3fv(this.addr,!1,Cb(b,this.size,9))}function Ef(a,b){a.uniformMatrix4fv(this.addr,!1,Cb(b,this.size,16))}function Ff(a,b,c){var d=b.length,e=ze(c,d);a.uniform1iv(this.addr,e);for(a=0;a!==d;++a)c.setTexture2D(b[a]||De,e[a])}function Gf(a,b,c){var d=b.length,e=ze(c,d);a.uniform1iv(this.addr,e);for(a=\n0;a!==d;++a)c.setTextureCube(b[a]||Ee,e[a])}function Hf(a){switch(a){case 5126:return xf;case 35664:return zf;case 35665:return Af;case 35666:return Bf;case 35674:return Cf;case 35675:return Df;case 35676:return Ef;case 35678:return Ff;case 35680:return Gf;case 5124:case 35670:return yf;case 35667:case 35671:return Fe;case 35668:case 35672:return Ge;case 35669:case 35673:return He}}function If(a,b,c){this.id=a;this.addr=c;this.setValue=wf(b.type)}function Jf(a,b,c){this.id=a;this.addr=c;this.size=\nb.size;this.setValue=Hf(b.type)}function Ie(a){this.id=a;this.seq=[];this.map={}}function cb(a,b,c){this.seq=[];this.map={};this.renderer=c;c=a.getProgramParameter(b,a.ACTIVE_UNIFORMS);for(var d=0;d<c;++d){var e=a.getActiveUniform(b,d),f=a.getUniformLocation(b,e.name),g=this,h=e.name,k=h.length;for(Pd.lastIndex=0;;){var l=Pd.exec(h),q=Pd.lastIndex,p=l[1],t=l[3];\"]\"===l[2]&&(p|=0);if(void 0===t||\"[\"===t&&q+2===k){h=g;e=void 0===t?new If(p,e,f):new Jf(p,e,f);h.seq.push(e);h.map[e.id]=e;break}else t=\ng.map[p],void 0===t&&(t=new Ie(p),p=g,g=t,p.seq.push(g),p.map[g.id]=g),g=t}}}function C(a,b,c){return void 0===b&&void 0===c?this.set(a):this.setRGB(a,b,c)}function id(a,b){this.min=void 0!==a?a:new D(Infinity,Infinity);this.max=void 0!==b?b:new D(-Infinity,-Infinity)}function Kf(a,b,c,d,e){var f,g,h,k,l,q,p,t,r,m,u,x,y,A,I,B;this.render=function(a,v,xa,la){if(0!==a.length){v=new n;var H=la.w/la.z,va=.5*la.z,jd=.5*la.w,J=16/la.w,Ga=new D(J*H,J),ga=new n(1,1,0),M=new D(1,1),T=new id;T.min.set(la.x,\nla.y);T.max.set(la.x+(la.z-16),la.y+(la.w-16));if(void 0===A){var J=new Float32Array([-1,-1,0,0,1,-1,1,0,1,1,1,1,-1,1,0,1]),La=new Uint16Array([0,1,2,0,2,3]);u=b.createBuffer();x=b.createBuffer();b.bindBuffer(b.ARRAY_BUFFER,u);b.bufferData(b.ARRAY_BUFFER,J,b.STATIC_DRAW);b.bindBuffer(b.ELEMENT_ARRAY_BUFFER,x);b.bufferData(b.ELEMENT_ARRAY_BUFFER,La,b.STATIC_DRAW);I=b.createTexture();B=b.createTexture();c.bindTexture(b.TEXTURE_2D,I);b.texImage2D(b.TEXTURE_2D,0,b.RGB,16,16,0,b.RGB,b.UNSIGNED_BYTE,null);\nb.texParameteri(b.TEXTURE_2D,b.TEXTURE_WRAP_S,b.CLAMP_TO_EDGE);b.texParameteri(b.TEXTURE_2D,b.TEXTURE_WRAP_T,b.CLAMP_TO_EDGE);b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MAG_FILTER,b.NEAREST);b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MIN_FILTER,b.NEAREST);c.bindTexture(b.TEXTURE_2D,B);b.texImage2D(b.TEXTURE_2D,0,b.RGBA,16,16,0,b.RGBA,b.UNSIGNED_BYTE,null);b.texParameteri(b.TEXTURE_2D,b.TEXTURE_WRAP_S,b.CLAMP_TO_EDGE);b.texParameteri(b.TEXTURE_2D,b.TEXTURE_WRAP_T,b.CLAMP_TO_EDGE);b.texParameteri(b.TEXTURE_2D,\nb.TEXTURE_MAG_FILTER,b.NEAREST);b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MIN_FILTER,b.NEAREST);var J=y={vertexShader:\"uniform lowp int renderType;\\nuniform vec3 screenPosition;\\nuniform vec2 scale;\\nuniform float rotation;\\nuniform sampler2D occlusionMap;\\nattribute vec2 position;\\nattribute vec2 uv;\\nvarying vec2 vUV;\\nvarying float vVisibility;\\nvoid main() {\\nvUV = uv;\\nvec2 pos = position;\\nif ( renderType == 2 ) {\\nvec4 visibility = texture2D( occlusionMap, vec2( 0.1, 0.1 ) );\\nvisibility += texture2D( occlusionMap, vec2( 0.5, 0.1 ) );\\nvisibility += texture2D( occlusionMap, vec2( 0.9, 0.1 ) );\\nvisibility += texture2D( occlusionMap, vec2( 0.9, 0.5 ) );\\nvisibility += texture2D( occlusionMap, vec2( 0.9, 0.9 ) );\\nvisibility += texture2D( occlusionMap, vec2( 0.5, 0.9 ) );\\nvisibility += texture2D( occlusionMap, vec2( 0.1, 0.9 ) );\\nvisibility += texture2D( occlusionMap, vec2( 0.1, 0.5 ) );\\nvisibility += texture2D( occlusionMap, vec2( 0.5, 0.5 ) );\\nvVisibility =        visibility.r / 9.0;\\nvVisibility *= 1.0 - visibility.g / 9.0;\\nvVisibility *=       visibility.b / 9.0;\\nvVisibility *= 1.0 - visibility.a / 9.0;\\npos.x = cos( rotation ) * position.x - sin( rotation ) * position.y;\\npos.y = sin( rotation ) * position.x + cos( rotation ) * position.y;\\n}\\ngl_Position = vec4( ( pos * scale + screenPosition.xy ).xy, screenPosition.z, 1.0 );\\n}\",\nfragmentShader:\"uniform lowp int renderType;\\nuniform sampler2D map;\\nuniform float opacity;\\nuniform vec3 color;\\nvarying vec2 vUV;\\nvarying float vVisibility;\\nvoid main() {\\nif ( renderType == 0 ) {\\ngl_FragColor = vec4( 1.0, 0.0, 1.0, 0.0 );\\n} else if ( renderType == 1 ) {\\ngl_FragColor = texture2D( map, vUV );\\n} else {\\nvec4 texture = texture2D( map, vUV );\\ntexture.a *= opacity * vVisibility;\\ngl_FragColor = texture;\\ngl_FragColor.rgb *= color;\\n}\\n}\"},La=b.createProgram(),z=b.createShader(b.FRAGMENT_SHADER),\nY=b.createShader(b.VERTEX_SHADER),w=\"precision \"+e.precision+\" float;\\n\";b.shaderSource(z,w+J.fragmentShader);b.shaderSource(Y,w+J.vertexShader);b.compileShader(z);b.compileShader(Y);b.attachShader(La,z);b.attachShader(La,Y);b.linkProgram(La);A=La;r=b.getAttribLocation(A,\"position\");m=b.getAttribLocation(A,\"uv\");f=b.getUniformLocation(A,\"renderType\");g=b.getUniformLocation(A,\"map\");h=b.getUniformLocation(A,\"occlusionMap\");k=b.getUniformLocation(A,\"opacity\");l=b.getUniformLocation(A,\"color\");q=b.getUniformLocation(A,\n\"scale\");p=b.getUniformLocation(A,\"rotation\");t=b.getUniformLocation(A,\"screenPosition\")}c.useProgram(A);c.initAttributes();c.enableAttribute(r);c.enableAttribute(m);c.disableUnusedAttributes();b.uniform1i(h,0);b.uniform1i(g,1);b.bindBuffer(b.ARRAY_BUFFER,u);b.vertexAttribPointer(r,2,b.FLOAT,!1,16,0);b.vertexAttribPointer(m,2,b.FLOAT,!1,16,8);b.bindBuffer(b.ELEMENT_ARRAY_BUFFER,x);c.disable(b.CULL_FACE);c.buffers.depth.setMask(!1);La=0;for(z=a.length;La<z;La++)if(J=16/la.w,Ga.set(J*H,J),Y=a[La],v.set(Y.matrixWorld.elements[12],\nY.matrixWorld.elements[13],Y.matrixWorld.elements[14]),v.applyMatrix4(xa.matrixWorldInverse),v.applyMatrix4(xa.projectionMatrix),ga.copy(v),M.x=la.x+ga.x*va+va-8,M.y=la.y+ga.y*jd+jd-8,!0===T.containsPoint(M)){c.activeTexture(b.TEXTURE0);c.bindTexture(b.TEXTURE_2D,null);c.activeTexture(b.TEXTURE1);c.bindTexture(b.TEXTURE_2D,I);b.copyTexImage2D(b.TEXTURE_2D,0,b.RGB,M.x,M.y,16,16,0);b.uniform1i(f,0);b.uniform2f(q,Ga.x,Ga.y);b.uniform3f(t,ga.x,ga.y,ga.z);c.disable(b.BLEND);c.enable(b.DEPTH_TEST);b.drawElements(b.TRIANGLES,\n6,b.UNSIGNED_SHORT,0);c.activeTexture(b.TEXTURE0);c.bindTexture(b.TEXTURE_2D,B);b.copyTexImage2D(b.TEXTURE_2D,0,b.RGBA,M.x,M.y,16,16,0);b.uniform1i(f,1);c.disable(b.DEPTH_TEST);c.activeTexture(b.TEXTURE1);c.bindTexture(b.TEXTURE_2D,I);b.drawElements(b.TRIANGLES,6,b.UNSIGNED_SHORT,0);Y.positionScreen.copy(ga);Y.customUpdateCallback?Y.customUpdateCallback(Y):Y.updateLensFlares();b.uniform1i(f,2);c.enable(b.BLEND);for(var w=0,F=Y.lensFlares.length;w<F;w++){var C=Y.lensFlares[w];.001<C.opacity&&.001<\nC.scale&&(ga.x=C.x,ga.y=C.y,ga.z=C.z,J=C.size*C.scale/la.w,Ga.x=J*H,Ga.y=J,b.uniform3f(t,ga.x,ga.y,ga.z),b.uniform2f(q,Ga.x,Ga.y),b.uniform1f(p,C.rotation),b.uniform1f(k,C.opacity),b.uniform3f(l,C.color.r,C.color.g,C.color.b),c.setBlending(C.blending,C.blendEquation,C.blendSrc,C.blendDst),d.setTexture2D(C.texture,1),b.drawElements(b.TRIANGLES,6,b.UNSIGNED_SHORT,0))}}c.enable(b.CULL_FACE);c.enable(b.DEPTH_TEST);c.buffers.depth.setMask(!0);c.reset()}}}function oc(a,b,c,d,e,f,g,h,k){N.call(this,a,b,\nc,d,e,f,g,h,k);this.needsUpdate=!0}function Lf(a,b,c,d,e){var f,g,h,k,l,q,p,t,r,m,u,x,y,A,I,B,H;function va(a,b){return a.renderOrder!==b.renderOrder?a.renderOrder-b.renderOrder:a.z!==b.z?b.z-a.z:b.id-a.id}var xa,la,ba,Je,jd=new n,J=new ia,Ga=new n;this.render=function(v,n,T){if(0!==v.length){if(void 0===ba){var M=new Float32Array([-.5,-.5,0,0,.5,-.5,1,0,.5,.5,1,1,-.5,.5,0,1]),z=new Uint16Array([0,1,2,0,2,3]);xa=b.createBuffer();la=b.createBuffer();b.bindBuffer(b.ARRAY_BUFFER,xa);b.bufferData(b.ARRAY_BUFFER,\nM,b.STATIC_DRAW);b.bindBuffer(b.ELEMENT_ARRAY_BUFFER,la);b.bufferData(b.ELEMENT_ARRAY_BUFFER,z,b.STATIC_DRAW);M=b.createProgram();z=b.createShader(b.VERTEX_SHADER);var w=b.createShader(b.FRAGMENT_SHADER);b.shaderSource(z,[\"precision \"+e.precision+\" float;\",\"#define SHADER_NAME SpriteMaterial\\nuniform mat4 modelViewMatrix;\\nuniform mat4 projectionMatrix;\\nuniform float rotation;\\nuniform vec2 scale;\\nuniform vec2 uvOffset;\\nuniform vec2 uvScale;\\nattribute vec2 position;\\nattribute vec2 uv;\\nvarying vec2 vUV;\\nvoid main() {\\nvUV = uvOffset + uv * uvScale;\\nvec2 alignedPosition = position * scale;\\nvec2 rotatedPosition;\\nrotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;\\nrotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;\\nvec4 finalPosition;\\nfinalPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );\\nfinalPosition.xy += rotatedPosition;\\nfinalPosition = projectionMatrix * finalPosition;\\ngl_Position = finalPosition;\\n}\"].join(\"\\n\"));\nb.shaderSource(w,[\"precision \"+e.precision+\" float;\",\"#define SHADER_NAME SpriteMaterial\\nuniform vec3 color;\\nuniform sampler2D map;\\nuniform float opacity;\\nuniform int fogType;\\nuniform vec3 fogColor;\\nuniform float fogDensity;\\nuniform float fogNear;\\nuniform float fogFar;\\nuniform float alphaTest;\\nvarying vec2 vUV;\\nvoid main() {\\nvec4 texture = texture2D( map, vUV );\\nif ( texture.a < alphaTest ) discard;\\ngl_FragColor = vec4( color * texture.xyz, texture.a * opacity );\\nif ( fogType > 0 ) {\\nfloat depth = gl_FragCoord.z / gl_FragCoord.w;\\nfloat fogFactor = 0.0;\\nif ( fogType == 1 ) {\\nfogFactor = smoothstep( fogNear, fogFar, depth );\\n} else {\\nconst float LOG2 = 1.442695;\\nfogFactor = exp2( - fogDensity * fogDensity * depth * depth * LOG2 );\\nfogFactor = 1.0 - clamp( fogFactor, 0.0, 1.0 );\\n}\\ngl_FragColor = mix( gl_FragColor, vec4( fogColor, gl_FragColor.w ), fogFactor );\\n}\\n}\"].join(\"\\n\"));\nb.compileShader(z);b.compileShader(w);b.attachShader(M,z);b.attachShader(M,w);b.linkProgram(M);ba=M;B=b.getAttribLocation(ba,\"position\");H=b.getAttribLocation(ba,\"uv\");f=b.getUniformLocation(ba,\"uvOffset\");g=b.getUniformLocation(ba,\"uvScale\");h=b.getUniformLocation(ba,\"rotation\");k=b.getUniformLocation(ba,\"scale\");l=b.getUniformLocation(ba,\"color\");q=b.getUniformLocation(ba,\"map\");p=b.getUniformLocation(ba,\"opacity\");t=b.getUniformLocation(ba,\"modelViewMatrix\");r=b.getUniformLocation(ba,\"projectionMatrix\");\nm=b.getUniformLocation(ba,\"fogType\");u=b.getUniformLocation(ba,\"fogDensity\");x=b.getUniformLocation(ba,\"fogNear\");y=b.getUniformLocation(ba,\"fogFar\");A=b.getUniformLocation(ba,\"fogColor\");I=b.getUniformLocation(ba,\"alphaTest\");M=document.createElementNS(\"http://www.w3.org/1999/xhtml\",\"canvas\");M.width=8;M.height=8;z=M.getContext(\"2d\");z.fillStyle=\"white\";z.fillRect(0,0,8,8);Je=new oc(M)}c.useProgram(ba);c.initAttributes();c.enableAttribute(B);c.enableAttribute(H);c.disableUnusedAttributes();c.disable(b.CULL_FACE);\nc.enable(b.BLEND);b.bindBuffer(b.ARRAY_BUFFER,xa);b.vertexAttribPointer(B,2,b.FLOAT,!1,16,0);b.vertexAttribPointer(H,2,b.FLOAT,!1,16,8);b.bindBuffer(b.ELEMENT_ARRAY_BUFFER,la);b.uniformMatrix4fv(r,!1,T.projectionMatrix.elements);c.activeTexture(b.TEXTURE0);b.uniform1i(q,0);z=M=0;(w=n.fog)?(b.uniform3f(A,w.color.r,w.color.g,w.color.b),w.isFog?(b.uniform1f(x,w.near),b.uniform1f(y,w.far),b.uniform1i(m,1),z=M=1):w.isFogExp2&&(b.uniform1f(u,w.density),b.uniform1i(m,2),z=M=2)):(b.uniform1i(m,0),z=M=0);\nfor(var D=0,C=v.length;D<C;D++)w=v[D],w.modelViewMatrix.multiplyMatrices(T.matrixWorldInverse,w.matrixWorld),w.z=-w.modelViewMatrix.elements[14];v.sort(va);for(var ga=[],D=0,C=v.length;D<C;D++){w=v[D];var G=w.material;if(!1!==G.visible){w.onBeforeRender(a,n,T,void 0,G,void 0);b.uniform1f(I,G.alphaTest);b.uniformMatrix4fv(t,!1,w.modelViewMatrix.elements);w.matrixWorld.decompose(jd,J,Ga);ga[0]=Ga.x;ga[1]=Ga.y;var F=0;n.fog&&G.fog&&(F=z);M!==F&&(b.uniform1i(m,F),M=F);null!==G.map?(b.uniform2f(f,G.map.offset.x,\nG.map.offset.y),b.uniform2f(g,G.map.repeat.x,G.map.repeat.y)):(b.uniform2f(f,0,0),b.uniform2f(g,1,1));b.uniform1f(p,G.opacity);b.uniform3f(l,G.color.r,G.color.g,G.color.b);b.uniform1f(h,G.rotation);b.uniform2fv(k,ga);c.setBlending(G.blending,G.blendEquation,G.blendSrc,G.blendDst,G.blendEquationAlpha,G.blendSrcAlpha,G.blendDstAlpha,G.premultipliedAlpha);c.buffers.depth.setTest(G.depthTest);c.buffers.depth.setMask(G.depthWrite);d.setTexture2D(G.map||Je,0);b.drawElements(b.TRIANGLES,6,b.UNSIGNED_SHORT,\n0);w.onAfterRender(a,n,T,void 0,G,void 0)}}c.enable(b.CULL_FACE);c.reset()}}}function P(){Object.defineProperty(this,\"id\",{value:Mf++});this.uuid=R.generateUUID();this.name=\"\";this.type=\"Material\";this.lights=this.fog=!0;this.blending=1;this.side=0;this.flatShading=!1;this.vertexColors=0;this.opacity=1;this.transparent=!1;this.blendSrc=204;this.blendDst=205;this.blendEquation=100;this.blendEquationAlpha=this.blendDstAlpha=this.blendSrcAlpha=null;this.depthFunc=3;this.depthWrite=this.depthTest=!0;\nthis.clippingPlanes=null;this.clipShadows=this.clipIntersection=!1;this.colorWrite=!0;this.precision=null;this.polygonOffset=!1;this.polygonOffsetUnits=this.polygonOffsetFactor=0;this.dithering=!1;this.alphaTest=0;this.premultipliedAlpha=!1;this.overdraw=0;this.visible=!0;this.userData={};this.needsUpdate=!0}function ya(a){P.call(this);this.type=\"ShaderMaterial\";this.defines={};this.uniforms={};this.vertexShader=\"void main() {\\n\\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\\n}\";\nthis.fragmentShader=\"void main() {\\n\\tgl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\\n}\";this.linewidth=1;this.wireframe=!1;this.wireframeLinewidth=1;this.morphNormals=this.morphTargets=this.skinning=this.clipping=this.lights=this.fog=!1;this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1};this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv2:[0,0]};this.index0AttributeName=void 0;void 0!==a&&(void 0!==a.attributes&&console.error(\"THREE.ShaderMaterial: attributes should now be defined in THREE.BufferGeometry instead.\"),\nthis.setValues(a))}function Wa(a){P.call(this);this.type=\"MeshDepthMaterial\";this.depthPacking=3200;this.morphTargets=this.skinning=!1;this.displacementMap=this.alphaMap=this.map=null;this.displacementScale=1;this.displacementBias=0;this.wireframe=!1;this.wireframeLinewidth=1;this.lights=this.fog=!1;this.setValues(a)}function Xa(a){P.call(this);this.type=\"MeshDistanceMaterial\";this.referencePosition=new n;this.nearDistance=1;this.farDistance=1E3;this.morphTargets=this.skinning=!1;this.displacementMap=\nthis.alphaMap=this.map=null;this.displacementScale=1;this.displacementBias=0;this.lights=this.fog=!1;this.setValues(a)}function Pa(a,b){this.min=void 0!==a?a:new n(Infinity,Infinity,Infinity);this.max=void 0!==b?b:new n(-Infinity,-Infinity,-Infinity)}function Ca(a,b){this.center=void 0!==a?a:new n;this.radius=void 0!==b?b:0}function qa(){this.elements=[1,0,0,0,1,0,0,0,1];0<arguments.length&&console.error(\"THREE.Matrix3: the constructor no longer reads arguments. use .set() instead.\")}function za(a,\nb){this.normal=void 0!==a?a:new n(1,0,0);this.constant=void 0!==b?b:0}function kd(a,b,c,d,e,f){this.planes=[void 0!==a?a:new za,void 0!==b?b:new za,void 0!==c?c:new za,void 0!==d?d:new za,void 0!==e?e:new za,void 0!==f?f:new za]}function Ke(a,b,c){function d(b,c,d,e,f,g){var h=b.geometry;var l=p;var k=b.customDepthMaterial;d&&(l=t,k=b.customDistanceMaterial);k?l=k:(k=!1,c.morphTargets&&(h&&h.isBufferGeometry?k=h.morphAttributes&&h.morphAttributes.position&&0<h.morphAttributes.position.length:h&&h.isGeometry&&\n(k=h.morphTargets&&0<h.morphTargets.length)),b.isSkinnedMesh&&!1===c.skinning&&console.warn(\"THREE.WebGLShadowMap: THREE.SkinnedMesh with material.skinning set to false:\",b),b=b.isSkinnedMesh&&c.skinning,h=0,k&&(h|=1),b&&(h|=2),l=l[h]);a.localClippingEnabled&&!0===c.clipShadows&&0!==c.clippingPlanes.length&&(h=l.uuid,k=c.uuid,b=r[h],void 0===b&&(b={},r[h]=b),h=b[k],void 0===h&&(h=l.clone(),b[k]=h),l=h);l.visible=c.visible;l.wireframe=c.wireframe;k=c.side;B.renderSingleSided&&2==k&&(k=0);B.renderReverseSided&&\n(0===k?k=1:1===k&&(k=0));l.side=k;l.clipShadows=c.clipShadows;l.clippingPlanes=c.clippingPlanes;l.clipIntersection=c.clipIntersection;l.wireframeLinewidth=c.wireframeLinewidth;l.linewidth=c.linewidth;d&&l.isMeshDistanceMaterial&&(l.referencePosition.copy(e),l.nearDistance=f,l.farDistance=g);return l}function e(c,g,h,l){var k;if(!1!==c.visible){if(c.layers.test(g.layers)&&(c.isMesh||c.isLine||c.isPoints)&&c.castShadow&&(!c.frustumCulled||f.intersectsObject(c))){c.modelViewMatrix.multiplyMatrices(h.matrixWorldInverse,\nc.matrixWorld);var p=b.update(c),t=c.material;if(Array.isArray(t))for(var r=p.groups,A=0,m=r.length;A<m;A++){var v=r[A];(k=t[v.materialIndex])&&k.visible&&(k=d(c,k,l,q,h.near,h.far),a.renderBufferDirect(h,null,p,k,c,v))}else t.visible&&(k=d(c,t,l,q,h.near,h.far),a.renderBufferDirect(h,null,p,k,c,null))}c=c.children;p=0;for(t=c.length;p<t;p++)e(c[p],g,h,l)}}var f=new kd,g=new O,h=new D,k=new D(c,c),l=new n,q=new n,p=Array(4),t=Array(4),r={},m=[new n(1,0,0),new n(-1,0,0),new n(0,0,1),new n(0,0,-1),\nnew n(0,1,0),new n(0,-1,0)],u=[new n(0,1,0),new n(0,1,0),new n(0,1,0),new n(0,1,0),new n(0,0,1),new n(0,0,-1)],x=[new S,new S,new S,new S,new S,new S];for(c=0;4!==c;++c){var y=0!==(c&1),A=0!==(c&2),I=new Wa({depthPacking:3201,morphTargets:y,skinning:A});p[c]=I;y=new Xa({morphTargets:y,skinning:A});t[c]=y}var B=this;this.enabled=!1;this.autoUpdate=!0;this.needsUpdate=!1;this.type=1;this.renderSingleSided=this.renderReverseSided=!0;this.render=function(b,c,d){if(!1!==B.enabled&&(!1!==B.autoUpdate||\n!1!==B.needsUpdate)&&0!==b.length){var p=a.state;p.disable(a.context.BLEND);p.buffers.color.setClear(1,1,1,1);p.buffers.depth.setTest(!0);p.setScissorTest(!1);for(var t,r=0,A=b.length;r<A;r++){var v=b[r];t=v.shadow;var I=v&&v.isPointLight;if(void 0===t)console.warn(\"THREE.WebGLShadowMap:\",v,\"has no shadow.\");else{var n=t.camera;h.copy(t.mapSize);h.min(k);if(I){var y=h.x,H=h.y;x[0].set(2*y,H,y,H);x[1].set(0,H,y,H);x[2].set(3*y,H,y,H);x[3].set(y,H,y,H);x[4].set(3*y,0,y,H);x[5].set(y,0,y,H);h.x*=4;h.y*=\n2}null===t.map&&(t.map=new Ab(h.x,h.y,{minFilter:1003,magFilter:1003,format:1023}),t.map.texture.name=v.name+\".shadowMap\",n.updateProjectionMatrix());t.isSpotLightShadow&&t.update(v);y=t.map;H=t.matrix;q.setFromMatrixPosition(v.matrixWorld);n.position.copy(q);I?(t=6,H.makeTranslation(-q.x,-q.y,-q.z)):(t=1,l.setFromMatrixPosition(v.target.matrixWorld),n.lookAt(l),n.updateMatrixWorld(),H.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),H.multiply(n.projectionMatrix),H.multiply(n.matrixWorldInverse));a.setRenderTarget(y);\na.clear();for(v=0;v<t;v++)I&&(l.copy(n.position),l.add(m[v]),n.up.copy(u[v]),n.lookAt(l),n.updateMatrixWorld(),p.viewport(x[v])),g.multiplyMatrices(n.projectionMatrix,n.matrixWorldInverse),f.setFromMatrix(g),e(c,d,n,I)}}B.needsUpdate=!1}}}function Nf(a){var b={};return{get:function(a){a.isInterleavedBufferAttribute&&(a=a.data);return b[a.uuid]},remove:function(c){c.isInterleavedBufferAttribute&&(c=c.data);var d=b[c.uuid];d&&(a.deleteBuffer(d.buffer),delete b[c.uuid])},update:function(c,d){c.isInterleavedBufferAttribute&&\n(c=c.data);var e=b[c.uuid];if(void 0===e){var e=c.uuid,f=c.array,g=c.dynamic?a.DYNAMIC_DRAW:a.STATIC_DRAW,h=a.createBuffer();a.bindBuffer(d,h);a.bufferData(d,f,g);c.onUploadCallback();d=a.FLOAT;f instanceof Float32Array?d=a.FLOAT:f instanceof Float64Array?console.warn(\"THREE.WebGLAttributes: Unsupported data buffer format: Float64Array.\"):f instanceof Uint16Array?d=a.UNSIGNED_SHORT:f instanceof Int16Array?d=a.SHORT:f instanceof Uint32Array?d=a.UNSIGNED_INT:f instanceof Int32Array?d=a.INT:f instanceof\nInt8Array?d=a.BYTE:f instanceof Uint8Array&&(d=a.UNSIGNED_BYTE);b[e]={buffer:h,type:d,bytesPerElement:f.BYTES_PER_ELEMENT,version:c.version}}else e.version<c.version&&(f=c,h=f.array,g=f.updateRange,a.bindBuffer(d,e.buffer),!1===f.dynamic?a.bufferData(d,h,a.STATIC_DRAW):-1===g.count?a.bufferSubData(d,0,h):0===g.count?console.error(\"THREE.WebGLObjects.updateBuffer: dynamic THREE.BufferAttribute marked as needsUpdate but updateRange.count is 0, ensure you are using set methods or updating manually.\"):\n(a.bufferSubData(d,g.offset*h.BYTES_PER_ELEMENT,h.subarray(g.offset,g.offset+g.count)),g.count=-1),e.version=c.version)}}}function Ya(a,b,c,d){this._x=a||0;this._y=b||0;this._z=c||0;this._order=d||Ya.DefaultOrder}function Qd(){this.mask=1}function w(){Object.defineProperty(this,\"id\",{value:Of++});this.uuid=R.generateUUID();this.name=\"\";this.type=\"Object3D\";this.parent=null;this.children=[];this.up=w.DefaultUp.clone();var a=new n,b=new Ya,c=new ia,d=new n(1,1,1);b.onChange(function(){c.setFromEuler(b,\n!1)});c.onChange(function(){b.setFromQuaternion(c,void 0,!1)});Object.defineProperties(this,{position:{enumerable:!0,value:a},rotation:{enumerable:!0,value:b},quaternion:{enumerable:!0,value:c},scale:{enumerable:!0,value:d},modelViewMatrix:{value:new O},normalMatrix:{value:new qa}});this.matrix=new O;this.matrixWorld=new O;this.matrixAutoUpdate=w.DefaultMatrixAutoUpdate;this.matrixWorldNeedsUpdate=!1;this.layers=new Qd;this.visible=!0;this.receiveShadow=this.castShadow=!1;this.frustumCulled=!0;this.renderOrder=\n0;this.userData={}}function Ma(){w.call(this);this.type=\"Camera\";this.matrixWorldInverse=new O;this.projectionMatrix=new O}function Db(a,b,c,d,e,f){Ma.call(this);this.type=\"OrthographicCamera\";this.zoom=1;this.view=null;this.left=a;this.right=b;this.top=c;this.bottom=d;this.near=void 0!==e?e:.1;this.far=void 0!==f?f:2E3;this.updateProjectionMatrix()}function ja(a,b,c,d){Ma.call(this);this.type=\"PerspectiveCamera\";this.fov=void 0!==a?a:50;this.zoom=1;this.near=void 0!==c?c:.1;this.far=void 0!==d?d:\n2E3;this.focus=10;this.aspect=void 0!==b?b:1;this.view=null;this.filmGauge=35;this.filmOffset=0;this.updateProjectionMatrix()}function Qa(a,b,c,d,e,f){this.a=a;this.b=b;this.c=c;this.normal=d&&d.isVector3?d:new n;this.vertexNormals=Array.isArray(d)?d:[];this.color=e&&e.isColor?e:new C;this.vertexColors=Array.isArray(e)?e:[];this.materialIndex=void 0!==f?f:0}function Q(){Object.defineProperty(this,\"id\",{value:Rd++});this.uuid=R.generateUUID();this.name=\"\";this.type=\"Geometry\";this.vertices=[];this.colors=\n[];this.faces=[];this.faceVertexUvs=[[]];this.morphTargets=[];this.morphNormals=[];this.skinWeights=[];this.skinIndices=[];this.lineDistances=[];this.boundingSphere=this.boundingBox=null;this.groupsNeedUpdate=this.lineDistancesNeedUpdate=this.colorsNeedUpdate=this.normalsNeedUpdate=this.uvsNeedUpdate=this.verticesNeedUpdate=this.elementsNeedUpdate=!1}function K(a,b,c){if(Array.isArray(a))throw new TypeError(\"THREE.BufferAttribute: array should be a Typed Array.\");this.uuid=R.generateUUID();this.name=\n\"\";this.array=a;this.itemSize=b;this.count=void 0!==a?a.length/b:0;this.normalized=!0===c;this.dynamic=!1;this.updateRange={offset:0,count:-1};this.onUploadCallback=function(){};this.version=0}function pc(a,b){K.call(this,new Int8Array(a),b)}function qc(a,b){K.call(this,new Uint8Array(a),b)}function rc(a,b){K.call(this,new Uint8ClampedArray(a),b)}function sc(a,b){K.call(this,new Int16Array(a),b)}function db(a,b){K.call(this,new Uint16Array(a),b)}function tc(a,b){K.call(this,new Int32Array(a),b)}function eb(a,\nb){K.call(this,new Uint32Array(a),b)}function z(a,b){K.call(this,new Float32Array(a),b)}function uc(a,b){K.call(this,new Float64Array(a),b)}function Le(){this.indices=[];this.vertices=[];this.normals=[];this.colors=[];this.uvs=[];this.uvs2=[];this.groups=[];this.morphTargets={};this.skinWeights=[];this.skinIndices=[];this.boundingSphere=this.boundingBox=null;this.groupsNeedUpdate=this.uvsNeedUpdate=this.colorsNeedUpdate=this.normalsNeedUpdate=this.verticesNeedUpdate=!1}function Sd(a){if(0===a.length)return-Infinity;\nfor(var b=a[0],c=1,d=a.length;c<d;++c)a[c]>b&&(b=a[c]);return b}function F(){Object.defineProperty(this,\"id\",{value:Rd++});this.uuid=R.generateUUID();this.name=\"\";this.type=\"BufferGeometry\";this.index=null;this.attributes={};this.morphAttributes={};this.groups=[];this.boundingSphere=this.boundingBox=null;this.drawRange={start:0,count:Infinity}}function Eb(a,b,c,d,e,f){Q.call(this);this.type=\"BoxGeometry\";this.parameters={width:a,height:b,depth:c,widthSegments:d,heightSegments:e,depthSegments:f};this.fromBufferGeometry(new fb(a,\nb,c,d,e,f));this.mergeVertices()}function fb(a,b,c,d,e,f){function g(a,b,c,d,e,f,g,m,va,xa,la){var A=f/va,v=g/xa,u=f/2,x=g/2,I=m/2;g=va+1;var B=xa+1,y=f=0,H,w,z=new n;for(w=0;w<B;w++){var D=w*v-x;for(H=0;H<g;H++)z[a]=(H*A-u)*d,z[b]=D*e,z[c]=I,l.push(z.x,z.y,z.z),z[a]=0,z[b]=0,z[c]=0<m?1:-1,q.push(z.x,z.y,z.z),p.push(H/va),p.push(1-w/xa),f+=1}for(w=0;w<xa;w++)for(H=0;H<va;H++)a=t+H+g*(w+1),b=t+(H+1)+g*(w+1),c=t+(H+1)+g*w,k.push(t+H+g*w,a,c),k.push(a,b,c),y+=6;h.addGroup(r,y,la);r+=y;t+=f}F.call(this);\nthis.type=\"BoxBufferGeometry\";this.parameters={width:a,height:b,depth:c,widthSegments:d,heightSegments:e,depthSegments:f};var h=this;d=Math.floor(d)||1;e=Math.floor(e)||1;f=Math.floor(f)||1;var k=[],l=[],q=[],p=[],t=0,r=0;g(\"z\",\"y\",\"x\",-1,-1,c,b,a,f,e,0);g(\"z\",\"y\",\"x\",1,-1,c,b,-a,f,e,1);g(\"x\",\"z\",\"y\",1,1,a,c,b,d,f,2);g(\"x\",\"z\",\"y\",1,-1,a,c,-b,d,f,3);g(\"x\",\"y\",\"z\",1,-1,a,b,c,d,e,4);g(\"x\",\"y\",\"z\",-1,-1,a,b,-c,d,e,5);this.setIndex(k);this.addAttribute(\"position\",new z(l,3));this.addAttribute(\"normal\",\nnew z(q,3));this.addAttribute(\"uv\",new z(p,2))}function vc(a,b,c,d){Q.call(this);this.type=\"PlaneGeometry\";this.parameters={width:a,height:b,widthSegments:c,heightSegments:d};this.fromBufferGeometry(new gb(a,b,c,d));this.mergeVertices()}function gb(a,b,c,d){F.call(this);this.type=\"PlaneBufferGeometry\";this.parameters={width:a,height:b,widthSegments:c,heightSegments:d};var e=a/2,f=b/2;c=Math.floor(c)||1;d=Math.floor(d)||1;var g=c+1,h=d+1,k=a/c,l=b/d,q=[],p=[],t=[],r=[];for(a=0;a<h;a++){var m=a*l-f;\nfor(b=0;b<g;b++)p.push(b*k-e,-m,0),t.push(0,0,1),r.push(b/c),r.push(1-a/d)}for(a=0;a<d;a++)for(b=0;b<c;b++)e=b+g*(a+1),f=b+1+g*(a+1),h=b+1+g*a,q.push(b+g*a,e,h),q.push(e,f,h);this.setIndex(q);this.addAttribute(\"position\",new z(p,3));this.addAttribute(\"normal\",new z(t,3));this.addAttribute(\"uv\",new z(r,2))}function sa(a){P.call(this);this.type=\"MeshBasicMaterial\";this.color=new C(16777215);this.lightMap=this.map=null;this.lightMapIntensity=1;this.aoMap=null;this.aoMapIntensity=1;this.envMap=this.alphaMap=\nthis.specularMap=null;this.combine=0;this.reflectivity=1;this.refractionRatio=.98;this.wireframe=!1;this.wireframeLinewidth=1;this.wireframeLinejoin=this.wireframeLinecap=\"round\";this.lights=this.morphTargets=this.skinning=!1;this.setValues(a)}function hb(a,b){this.origin=void 0!==a?a:new n;this.direction=void 0!==b?b:new n}function Fb(a,b){this.start=void 0!==a?a:new n;this.end=void 0!==b?b:new n}function Ra(a,b,c){this.a=void 0!==a?a:new n;this.b=void 0!==b?b:new n;this.c=void 0!==c?c:new n}function fa(a,\nb){w.call(this);this.type=\"Mesh\";this.geometry=void 0!==a?a:new F;this.material=void 0!==b?b:new sa({color:16777215*Math.random()});this.drawMode=0;this.updateMorphTargets()}function Pf(a,b,c,d){function e(a,c){b.buffers.color.setClear(a.r,a.g,a.b,c,d)}var f=new C(0),g=0,h,k,l;return{getClearColor:function(){return f},setClearColor:function(a,b){f.set(a);g=void 0!==b?b:1;e(f,g)},getClearAlpha:function(){return g},setClearAlpha:function(a){g=a;e(f,g)},render:function(b,d,t,r){d=d.background;null===\nd?e(f,g):d&&d.isColor&&(e(d,1),r=!0);(a.autoClear||r)&&a.clear(a.autoClearColor,a.autoClearDepth,a.autoClearStencil);d&&d.isCubeTexture?(void 0===l&&(l=new fa(new fb(1,1,1),new ya({uniforms:ib.cube.uniforms,vertexShader:ib.cube.vertexShader,fragmentShader:ib.cube.fragmentShader,side:1,depthTest:!0,depthWrite:!1,polygonOffset:!0,fog:!1})),l.geometry.removeAttribute(\"normal\"),l.geometry.removeAttribute(\"uv\"),l.onBeforeRender=function(a,b,c){a=c.far;this.matrixWorld.makeScale(a,a,a);this.matrixWorld.copyPosition(c.matrixWorld);\nthis.material.polygonOffsetUnits=10*a},c.update(l.geometry)),l.material.uniforms.tCube.value=d,b.push(l,l.geometry,l.material,0,null)):d&&d.isTexture&&(void 0===h&&(h=new Db(-1,1,1,-1,0,1),k=new fa(new gb(2,2),new sa({depthTest:!1,depthWrite:!1,fog:!1})),c.update(k.geometry)),k.material.map=d,a.renderBufferDirect(h,null,k.geometry,k.material,k,null))}}}function Qf(a,b){return a.renderOrder!==b.renderOrder?a.renderOrder-b.renderOrder:a.program&&b.program&&a.program!==b.program?a.program.id-b.program.id:\na.material.id!==b.material.id?a.material.id-b.material.id:a.z!==b.z?a.z-b.z:a.id-b.id}function Rf(a,b){return a.renderOrder!==b.renderOrder?a.renderOrder-b.renderOrder:a.z!==b.z?b.z-a.z:a.id-b.id}function Sf(){var a=[],b=0,c=[],d=[];return{opaque:c,transparent:d,init:function(){b=0;c.length=0;d.length=0},push:function(e,f,g,h,k){var l=a[b];void 0===l?(l={id:e.id,object:e,geometry:f,material:g,program:g.program,renderOrder:e.renderOrder,z:h,group:k},a[b]=l):(l.id=e.id,l.object=e,l.geometry=f,l.material=\ng,l.program=g.program,l.renderOrder=e.renderOrder,l.z=h,l.group=k);(!0===g.transparent?d:c).push(l);b++},sort:function(){1<c.length&&c.sort(Qf);1<d.length&&d.sort(Rf)}}}function Tf(){var a={};return{get:function(b,c){b=b.id+\",\"+c.id;c=a[b];void 0===c&&(c=new Sf,a[b]=c);return c},dispose:function(){a={}}}}function Uf(a,b){return Math.abs(b[1])-Math.abs(a[1])}function Vf(a){var b={},c=new Float32Array(8);return{update:function(d,e,f,g){var h=d.morphTargetInfluences,k=h.length;d=b[e.id];if(void 0===\nd){d=[];for(var l=0;l<k;l++)d[l]=[l,0];b[e.id]=d}var q=f.morphTargets&&e.morphAttributes.position;f=f.morphNormals&&e.morphAttributes.normal;for(l=0;l<k;l++){var p=d[l];0!==p[1]&&(q&&e.removeAttribute(\"morphTarget\"+l),f&&e.removeAttribute(\"morphNormal\"+l))}for(l=0;l<k;l++)p=d[l],p[0]=l,p[1]=h[l];d.sort(Uf);for(l=0;8>l;l++){if(p=d[l])if(h=p[0],p=p[1]){q&&e.addAttribute(\"morphTarget\"+l,q[h]);f&&e.addAttribute(\"morphNormal\"+l,f[h]);c[l]=p;continue}c[l]=0}g.getUniforms().setValue(a,\"morphTargetInfluences\",\nc)}}}function Wf(a,b,c){var d,e,f;this.setMode=function(a){d=a};this.setIndex=function(a){e=a.type;f=a.bytesPerElement};this.render=function(b,h){a.drawElements(d,h,e,b*f);c.calls++;c.vertices+=h;d===a.TRIANGLES?c.faces+=h/3:d===a.POINTS&&(c.points+=h)};this.renderInstances=function(g,h,k){var l=b.get(\"ANGLE_instanced_arrays\");null===l?console.error(\"THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.\"):(l.drawElementsInstancedANGLE(d,\nk,e,h*f,g.maxInstancedCount),c.calls++,c.vertices+=k*g.maxInstancedCount,d===a.TRIANGLES?c.faces+=g.maxInstancedCount*k/3:d===a.POINTS&&(c.points+=g.maxInstancedCount*k))}}function Xf(a,b,c){var d;this.setMode=function(a){d=a};this.render=function(b,f){a.drawArrays(d,b,f);c.calls++;c.vertices+=f;d===a.TRIANGLES?c.faces+=f/3:d===a.POINTS&&(c.points+=f)};this.renderInstances=function(e,f,g){var h=b.get(\"ANGLE_instanced_arrays\");if(null===h)console.error(\"THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.\");\nelse{var k=e.attributes.position;k.isInterleavedBufferAttribute?(g=k.data.count,h.drawArraysInstancedANGLE(d,0,g,e.maxInstancedCount)):h.drawArraysInstancedANGLE(d,f,g,e.maxInstancedCount);c.calls++;c.vertices+=g*e.maxInstancedCount;d===a.TRIANGLES?c.faces+=e.maxInstancedCount*g/3:d===a.POINTS&&(c.points+=e.maxInstancedCount*g)}}}function Yf(a,b,c){function d(a){a=a.target;var g=e[a.id];null!==g.index&&b.remove(g.index);for(var k in g.attributes)b.remove(g.attributes[k]);a.removeEventListener(\"dispose\",\nd);delete e[a.id];if(k=f[a.id])b.remove(k),delete f[a.id];if(k=f[g.id])b.remove(k),delete f[g.id];c.geometries--}var e={},f={};return{get:function(a,b){var f=e[b.id];if(f)return f;b.addEventListener(\"dispose\",d);b.isBufferGeometry?f=b:b.isGeometry&&(void 0===b._bufferGeometry&&(b._bufferGeometry=(new F).setFromObject(a)),f=b._bufferGeometry);e[b.id]=f;c.geometries++;return f},update:function(c){var d=c.index,e=c.attributes;null!==d&&b.update(d,a.ELEMENT_ARRAY_BUFFER);for(var f in e)b.update(e[f],\na.ARRAY_BUFFER);c=c.morphAttributes;for(f in c)for(var d=c[f],e=0,g=d.length;e<g;e++)b.update(d[e],a.ARRAY_BUFFER)},getWireframeAttribute:function(c){var d=f[c.id];if(d)return d;d=[];var e=c.index;var g=c.attributes;if(null!==e){var q=e.array;for(var p=0,t=q.length;p<t;p+=3){var r=q[p+0];g=q[p+1];e=q[p+2];d.push(r,g,g,e,e,r)}}else for(q=g.position.array,p=0,t=q.length/3-1;p<t;p+=3)r=p+0,g=p+1,e=p+2,d.push(r,g,g,e,e,r);d=new (65535<Sd(d)?eb:db)(d,1);b.update(d,a.ELEMENT_ARRAY_BUFFER);return f[c.id]=\nd}}}function Zf(){var a={};return{get:function(b){if(void 0!==a[b.id])return a[b.id];switch(b.type){case \"DirectionalLight\":var c={direction:new n,color:new C,shadow:!1,shadowBias:0,shadowRadius:1,shadowMapSize:new D};break;case \"SpotLight\":c={position:new n,direction:new n,color:new C,distance:0,coneCos:0,penumbraCos:0,decay:0,shadow:!1,shadowBias:0,shadowRadius:1,shadowMapSize:new D};break;case \"PointLight\":c={position:new n,color:new C,distance:0,decay:0,shadow:!1,shadowBias:0,shadowRadius:1,shadowMapSize:new D,\nshadowCameraNear:1,shadowCameraFar:1E3};break;case \"HemisphereLight\":c={direction:new n,skyColor:new C,groundColor:new C};break;case \"RectAreaLight\":c={color:new C,position:new n,halfWidth:new n,halfHeight:new n}}return a[b.id]=c}}}function $f(){var a=new Zf,b={hash:\"\",ambient:[0,0,0],directional:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotShadowMap:[],spotShadowMatrix:[],rectArea:[],point:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[]},c=new n,d=new O,e=new O;return{setup:function(f,\ng,h){for(var k,l=0,q=0,p=0,t=0,r=0,m=0,u=0,x=0,n=h.matrixWorldInverse,A=0,I=f.length;A<I;A++){var B=f[A];k=B.color;var H=B.intensity,va=B.distance,xa=B.shadow&&B.shadow.map?B.shadow.map.texture:null;if(B.isAmbientLight)l+=k.r*H,q+=k.g*H,p+=k.b*H;else if(B.isDirectionalLight){h=a.get(B);h.color.copy(B.color).multiplyScalar(B.intensity);h.direction.setFromMatrixPosition(B.matrixWorld);c.setFromMatrixPosition(B.target.matrixWorld);h.direction.sub(c);h.direction.transformDirection(n);if(h.shadow=B.castShadow)k=\nB.shadow,h.shadowBias=k.bias,h.shadowRadius=k.radius,h.shadowMapSize=k.mapSize;b.directionalShadowMap[t]=xa;b.directionalShadowMatrix[t]=B.shadow.matrix;b.directional[t]=h;t++}else if(B.isSpotLight){h=a.get(B);h.position.setFromMatrixPosition(B.matrixWorld);h.position.applyMatrix4(n);h.color.copy(k).multiplyScalar(H);h.distance=va;h.direction.setFromMatrixPosition(B.matrixWorld);c.setFromMatrixPosition(B.target.matrixWorld);h.direction.sub(c);h.direction.transformDirection(n);h.coneCos=Math.cos(B.angle);\nh.penumbraCos=Math.cos(B.angle*(1-B.penumbra));h.decay=0===B.distance?0:B.decay;if(h.shadow=B.castShadow)k=B.shadow,h.shadowBias=k.bias,h.shadowRadius=k.radius,h.shadowMapSize=k.mapSize;b.spotShadowMap[m]=xa;b.spotShadowMatrix[m]=B.shadow.matrix;b.spot[m]=h;m++}else if(B.isRectAreaLight)h=a.get(B),h.color.copy(k).multiplyScalar(H/(B.width*B.height)),h.position.setFromMatrixPosition(B.matrixWorld),h.position.applyMatrix4(n),e.identity(),d.copy(B.matrixWorld),d.premultiply(n),e.extractRotation(d),h.halfWidth.set(.5*\nB.width,0,0),h.halfHeight.set(0,.5*B.height,0),h.halfWidth.applyMatrix4(e),h.halfHeight.applyMatrix4(e),b.rectArea[u]=h,u++;else if(B.isPointLight){h=a.get(B);h.position.setFromMatrixPosition(B.matrixWorld);h.position.applyMatrix4(n);h.color.copy(B.color).multiplyScalar(B.intensity);h.distance=B.distance;h.decay=0===B.distance?0:B.decay;if(h.shadow=B.castShadow)k=B.shadow,h.shadowBias=k.bias,h.shadowRadius=k.radius,h.shadowMapSize=k.mapSize,h.shadowCameraNear=k.camera.near,h.shadowCameraFar=k.camera.far;\nb.pointShadowMap[r]=xa;b.pointShadowMatrix[r]=B.shadow.matrix;b.point[r]=h;r++}else B.isHemisphereLight&&(h=a.get(B),h.direction.setFromMatrixPosition(B.matrixWorld),h.direction.transformDirection(n),h.direction.normalize(),h.skyColor.copy(B.color).multiplyScalar(H),h.groundColor.copy(B.groundColor).multiplyScalar(H),b.hemi[x]=h,x++)}b.ambient[0]=l;b.ambient[1]=q;b.ambient[2]=p;b.directional.length=t;b.spot.length=m;b.rectArea.length=u;b.point.length=r;b.hemi.length=x;b.hash=t+\",\"+r+\",\"+m+\",\"+u+\",\"+\nx+\",\"+g.length},state:b}}function ag(a,b){var c={};return{update:function(d){var e=b.frame,f=d.geometry,g=a.get(d,f);c[g.id]!==e&&(f.isGeometry&&g.updateFromObject(d),a.update(g),c[g.id]=e);return g},clear:function(){c={}}}}function bg(a){a=a.split(\"\\n\");for(var b=0;b<a.length;b++)a[b]=b+1+\": \"+a[b];return a.join(\"\\n\")}function Me(a,b,c){var d=a.createShader(b);a.shaderSource(d,c);a.compileShader(d);!1===a.getShaderParameter(d,a.COMPILE_STATUS)&&console.error(\"THREE.WebGLShader: Shader couldn't compile.\");\n\"\"!==a.getShaderInfoLog(d)&&console.warn(\"THREE.WebGLShader: gl.getShaderInfoLog()\",b===a.VERTEX_SHADER?\"vertex\":\"fragment\",a.getShaderInfoLog(d),bg(c));return d}function Ne(a){switch(a){case 3E3:return[\"Linear\",\"( value )\"];case 3001:return[\"sRGB\",\"( value )\"];case 3002:return[\"RGBE\",\"( value )\"];case 3004:return[\"RGBM\",\"( value, 7.0 )\"];case 3005:return[\"RGBM\",\"( value, 16.0 )\"];case 3006:return[\"RGBD\",\"( value, 256.0 )\"];case 3007:return[\"Gamma\",\"( value, float( GAMMA_FACTOR ) )\"];default:throw Error(\"unsupported encoding: \"+\na);}}function Td(a,b){b=Ne(b);return\"vec4 \"+a+\"( vec4 value ) { return \"+b[0]+\"ToLinear\"+b[1]+\"; }\"}function cg(a,b){b=Ne(b);return\"vec4 \"+a+\"( vec4 value ) { return LinearTo\"+b[0]+b[1]+\"; }\"}function dg(a,b){switch(b){case 1:b=\"Linear\";break;case 2:b=\"Reinhard\";break;case 3:b=\"Uncharted2\";break;case 4:b=\"OptimizedCineon\";break;default:throw Error(\"unsupported toneMapping: \"+b);}return\"vec3 \"+a+\"( vec3 color ) { return \"+b+\"ToneMapping( color ); }\"}function eg(a,b,c){a=a||{};return[a.derivatives||\nb.envMapCubeUV||b.bumpMap||b.normalMap||b.flatShading?\"#extension GL_OES_standard_derivatives : enable\":\"\",(a.fragDepth||b.logarithmicDepthBuffer)&&c.get(\"EXT_frag_depth\")?\"#extension GL_EXT_frag_depth : enable\":\"\",a.drawBuffers&&c.get(\"WEBGL_draw_buffers\")?\"#extension GL_EXT_draw_buffers : require\":\"\",(a.shaderTextureLOD||b.envMap)&&c.get(\"EXT_shader_texture_lod\")?\"#extension GL_EXT_shader_texture_lod : enable\":\"\"].filter(wc).join(\"\\n\")}function fg(a){var b=[],c;for(c in a){var d=a[c];!1!==d&&b.push(\"#define \"+\nc+\" \"+d)}return b.join(\"\\n\")}function wc(a){return\"\"!==a}function Oe(a,b){return a.replace(/NUM_DIR_LIGHTS/g,b.numDirLights).replace(/NUM_SPOT_LIGHTS/g,b.numSpotLights).replace(/NUM_RECT_AREA_LIGHTS/g,b.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,b.numPointLights).replace(/NUM_HEMI_LIGHTS/g,b.numHemiLights)}function Ud(a){return a.replace(/^[ \\t]*#include +<([\\w\\d.]+)>/gm,function(a,c){a=V[c];if(void 0===a)throw Error(\"Can not resolve #include <\"+c+\">\");return Ud(a)})}function Pe(a){return a.replace(/for \\( int i \\= (\\d+)\\; i < (\\d+)\\; i \\+\\+ \\) \\{([\\s\\S]+?)(?=\\})\\}/g,\nfunction(a,c,d,e){a=\"\";for(c=parseInt(c);c<parseInt(d);c++)a+=e.replace(/\\[ i \\]/g,\"[ \"+c+\" ]\");return a})}function gg(a,b,c,d,e,f){var g=a.context,h=d.defines,k=e.vertexShader,l=e.fragmentShader,q=\"SHADOWMAP_TYPE_BASIC\";1===f.shadowMapType?q=\"SHADOWMAP_TYPE_PCF\":2===f.shadowMapType&&(q=\"SHADOWMAP_TYPE_PCF_SOFT\");var p=\"ENVMAP_TYPE_CUBE\",t=\"ENVMAP_MODE_REFLECTION\",r=\"ENVMAP_BLENDING_MULTIPLY\";if(f.envMap){switch(d.envMap.mapping){case 301:case 302:p=\"ENVMAP_TYPE_CUBE\";break;case 306:case 307:p=\"ENVMAP_TYPE_CUBE_UV\";\nbreak;case 303:case 304:p=\"ENVMAP_TYPE_EQUIREC\";break;case 305:p=\"ENVMAP_TYPE_SPHERE\"}switch(d.envMap.mapping){case 302:case 304:t=\"ENVMAP_MODE_REFRACTION\"}switch(d.combine){case 0:r=\"ENVMAP_BLENDING_MULTIPLY\";break;case 1:r=\"ENVMAP_BLENDING_MIX\";break;case 2:r=\"ENVMAP_BLENDING_ADD\"}}var m=0<a.gammaFactor?a.gammaFactor:1,u=eg(d.extensions,f,b),x=fg(h),n=g.createProgram();d.isRawShaderMaterial?(h=[x,\"\\n\"].filter(wc).join(\"\\n\"),b=[u,x,\"\\n\"].filter(wc).join(\"\\n\")):(h=[\"precision \"+f.precision+\" float;\",\n\"precision \"+f.precision+\" int;\",\"#define SHADER_NAME \"+e.name,x,f.supportsVertexTextures?\"#define VERTEX_TEXTURES\":\"\",\"#define GAMMA_FACTOR \"+m,\"#define MAX_BONES \"+f.maxBones,f.useFog&&f.fog?\"#define USE_FOG\":\"\",f.useFog&&f.fogExp?\"#define FOG_EXP2\":\"\",f.map?\"#define USE_MAP\":\"\",f.envMap?\"#define USE_ENVMAP\":\"\",f.envMap?\"#define \"+t:\"\",f.lightMap?\"#define USE_LIGHTMAP\":\"\",f.aoMap?\"#define USE_AOMAP\":\"\",f.emissiveMap?\"#define USE_EMISSIVEMAP\":\"\",f.bumpMap?\"#define USE_BUMPMAP\":\"\",f.normalMap?\"#define USE_NORMALMAP\":\n\"\",f.displacementMap&&f.supportsVertexTextures?\"#define USE_DISPLACEMENTMAP\":\"\",f.specularMap?\"#define USE_SPECULARMAP\":\"\",f.roughnessMap?\"#define USE_ROUGHNESSMAP\":\"\",f.metalnessMap?\"#define USE_METALNESSMAP\":\"\",f.alphaMap?\"#define USE_ALPHAMAP\":\"\",f.vertexColors?\"#define USE_COLOR\":\"\",f.flatShading?\"#define FLAT_SHADED\":\"\",f.skinning?\"#define USE_SKINNING\":\"\",f.useVertexTexture?\"#define BONE_TEXTURE\":\"\",f.morphTargets?\"#define USE_MORPHTARGETS\":\"\",f.morphNormals&&!1===f.flatShading?\"#define USE_MORPHNORMALS\":\n\"\",f.doubleSided?\"#define DOUBLE_SIDED\":\"\",f.flipSided?\"#define FLIP_SIDED\":\"\",\"#define NUM_CLIPPING_PLANES \"+f.numClippingPlanes,f.shadowMapEnabled?\"#define USE_SHADOWMAP\":\"\",f.shadowMapEnabled?\"#define \"+q:\"\",f.sizeAttenuation?\"#define USE_SIZEATTENUATION\":\"\",f.logarithmicDepthBuffer?\"#define USE_LOGDEPTHBUF\":\"\",f.logarithmicDepthBuffer&&b.get(\"EXT_frag_depth\")?\"#define USE_LOGDEPTHBUF_EXT\":\"\",\"uniform mat4 modelMatrix;\",\"uniform mat4 modelViewMatrix;\",\"uniform mat4 projectionMatrix;\",\"uniform mat4 viewMatrix;\",\n\"uniform mat3 normalMatrix;\",\"uniform vec3 cameraPosition;\",\"attribute vec3 position;\",\"attribute vec3 normal;\",\"attribute vec2 uv;\",\"#ifdef USE_COLOR\",\"\\tattribute vec3 color;\",\"#endif\",\"#ifdef USE_MORPHTARGETS\",\"\\tattribute vec3 morphTarget0;\",\"\\tattribute vec3 morphTarget1;\",\"\\tattribute vec3 morphTarget2;\",\"\\tattribute vec3 morphTarget3;\",\"\\t#ifdef USE_MORPHNORMALS\",\"\\t\\tattribute vec3 morphNormal0;\",\"\\t\\tattribute vec3 morphNormal1;\",\"\\t\\tattribute vec3 morphNormal2;\",\"\\t\\tattribute vec3 morphNormal3;\",\n\"\\t#else\",\"\\t\\tattribute vec3 morphTarget4;\",\"\\t\\tattribute vec3 morphTarget5;\",\"\\t\\tattribute vec3 morphTarget6;\",\"\\t\\tattribute vec3 morphTarget7;\",\"\\t#endif\",\"#endif\",\"#ifdef USE_SKINNING\",\"\\tattribute vec4 skinIndex;\",\"\\tattribute vec4 skinWeight;\",\"#endif\",\"\\n\"].filter(wc).join(\"\\n\"),b=[u,\"precision \"+f.precision+\" float;\",\"precision \"+f.precision+\" int;\",\"#define SHADER_NAME \"+e.name,x,f.alphaTest?\"#define ALPHATEST \"+f.alphaTest:\"\",\"#define GAMMA_FACTOR \"+m,f.useFog&&f.fog?\"#define USE_FOG\":\n\"\",f.useFog&&f.fogExp?\"#define FOG_EXP2\":\"\",f.map?\"#define USE_MAP\":\"\",f.envMap?\"#define USE_ENVMAP\":\"\",f.envMap?\"#define \"+p:\"\",f.envMap?\"#define \"+t:\"\",f.envMap?\"#define \"+r:\"\",f.lightMap?\"#define USE_LIGHTMAP\":\"\",f.aoMap?\"#define USE_AOMAP\":\"\",f.emissiveMap?\"#define USE_EMISSIVEMAP\":\"\",f.bumpMap?\"#define USE_BUMPMAP\":\"\",f.normalMap?\"#define USE_NORMALMAP\":\"\",f.specularMap?\"#define USE_SPECULARMAP\":\"\",f.roughnessMap?\"#define USE_ROUGHNESSMAP\":\"\",f.metalnessMap?\"#define USE_METALNESSMAP\":\"\",f.alphaMap?\n\"#define USE_ALPHAMAP\":\"\",f.vertexColors?\"#define USE_COLOR\":\"\",f.gradientMap?\"#define USE_GRADIENTMAP\":\"\",f.flatShading?\"#define FLAT_SHADED\":\"\",f.doubleSided?\"#define DOUBLE_SIDED\":\"\",f.flipSided?\"#define FLIP_SIDED\":\"\",\"#define NUM_CLIPPING_PLANES \"+f.numClippingPlanes,\"#define UNION_CLIPPING_PLANES \"+(f.numClippingPlanes-f.numClipIntersection),f.shadowMapEnabled?\"#define USE_SHADOWMAP\":\"\",f.shadowMapEnabled?\"#define \"+q:\"\",f.premultipliedAlpha?\"#define PREMULTIPLIED_ALPHA\":\"\",f.physicallyCorrectLights?\n\"#define PHYSICALLY_CORRECT_LIGHTS\":\"\",f.logarithmicDepthBuffer?\"#define USE_LOGDEPTHBUF\":\"\",f.logarithmicDepthBuffer&&b.get(\"EXT_frag_depth\")?\"#define USE_LOGDEPTHBUF_EXT\":\"\",f.envMap&&b.get(\"EXT_shader_texture_lod\")?\"#define TEXTURE_LOD_EXT\":\"\",\"uniform mat4 viewMatrix;\",\"uniform vec3 cameraPosition;\",0!==f.toneMapping?\"#define TONE_MAPPING\":\"\",0!==f.toneMapping?V.tonemapping_pars_fragment:\"\",0!==f.toneMapping?dg(\"toneMapping\",f.toneMapping):\"\",f.dithering?\"#define DITHERING\":\"\",f.outputEncoding||\nf.mapEncoding||f.envMapEncoding||f.emissiveMapEncoding?V.encodings_pars_fragment:\"\",f.mapEncoding?Td(\"mapTexelToLinear\",f.mapEncoding):\"\",f.envMapEncoding?Td(\"envMapTexelToLinear\",f.envMapEncoding):\"\",f.emissiveMapEncoding?Td(\"emissiveMapTexelToLinear\",f.emissiveMapEncoding):\"\",f.outputEncoding?cg(\"linearToOutputTexel\",f.outputEncoding):\"\",f.depthPacking?\"#define DEPTH_PACKING \"+d.depthPacking:\"\",\"\\n\"].filter(wc).join(\"\\n\"));k=Ud(k);k=Oe(k,f);l=Ud(l);l=Oe(l,f);d.isShaderMaterial||(k=Pe(k),l=Pe(l));\nl=b+l;k=Me(g,g.VERTEX_SHADER,h+k);l=Me(g,g.FRAGMENT_SHADER,l);g.attachShader(n,k);g.attachShader(n,l);void 0!==d.index0AttributeName?g.bindAttribLocation(n,0,d.index0AttributeName):!0===f.morphTargets&&g.bindAttribLocation(n,0,\"position\");g.linkProgram(n);f=g.getProgramInfoLog(n);e=g.getShaderInfoLog(k);q=g.getShaderInfoLog(l);t=p=!0;if(!1===g.getProgramParameter(n,g.LINK_STATUS))p=!1,console.error(\"THREE.WebGLProgram: shader error: \",g.getError(),\"gl.VALIDATE_STATUS\",g.getProgramParameter(n,g.VALIDATE_STATUS),\n\"gl.getProgramInfoLog\",f,e,q);else if(\"\"!==f)console.warn(\"THREE.WebGLProgram: gl.getProgramInfoLog()\",f);else if(\"\"===e||\"\"===q)t=!1;t&&(this.diagnostics={runnable:p,material:d,programLog:f,vertexShader:{log:e,prefix:h},fragmentShader:{log:q,prefix:b}});g.deleteShader(k);g.deleteShader(l);var A;this.getUniforms=function(){void 0===A&&(A=new cb(g,n,a));return A};var I;this.getAttributes=function(){if(void 0===I){for(var a={},b=g.getProgramParameter(n,g.ACTIVE_ATTRIBUTES),c=0;c<b;c++){var d=g.getActiveAttrib(n,\nc).name;a[d]=g.getAttribLocation(n,d)}I=a}return I};this.destroy=function(){g.deleteProgram(n);this.program=void 0};Object.defineProperties(this,{uniforms:{get:function(){console.warn(\"THREE.WebGLProgram: .uniforms is now .getUniforms().\");return this.getUniforms()}},attributes:{get:function(){console.warn(\"THREE.WebGLProgram: .attributes is now .getAttributes().\");return this.getAttributes()}}});this.id=hg++;this.code=c;this.usedTimes=1;this.program=n;this.vertexShader=k;this.fragmentShader=l;return this}\nfunction ig(a,b,c){function d(a,b){if(a)a.isTexture?c=a.encoding:a.isWebGLRenderTarget&&(console.warn(\"THREE.WebGLPrograms.getTextureEncodingFromMap: don't use render targets as textures. Use their .texture property instead.\"),c=a.texture.encoding);else var c=3E3;3E3===c&&b&&(c=3007);return c}var e=[],f={MeshDepthMaterial:\"depth\",MeshDistanceMaterial:\"distanceRGBA\",MeshNormalMaterial:\"normal\",MeshBasicMaterial:\"basic\",MeshLambertMaterial:\"lambert\",MeshPhongMaterial:\"phong\",MeshToonMaterial:\"phong\",\nMeshStandardMaterial:\"physical\",MeshPhysicalMaterial:\"physical\",LineBasicMaterial:\"basic\",LineDashedMaterial:\"dashed\",PointsMaterial:\"points\",ShadowMaterial:\"shadow\"},g=\"precision supportsVertexTextures map mapEncoding envMap envMapMode envMapEncoding lightMap aoMap emissiveMap emissiveMapEncoding bumpMap normalMap displacementMap specularMap roughnessMap metalnessMap gradientMap alphaMap combine vertexColors fog useFog fogExp flatShading sizeAttenuation logarithmicDepthBuffer skinning maxBones useVertexTexture morphTargets morphNormals maxMorphTargets maxMorphNormals premultipliedAlpha numDirLights numPointLights numSpotLights numHemiLights numRectAreaLights shadowMapEnabled shadowMapType toneMapping physicallyCorrectLights alphaTest doubleSided flipSided numClippingPlanes numClipIntersection depthPacking dithering\".split(\" \");\nthis.getParameters=function(b,e,g,q,p,t,r){var h=f[b.type];if(r.isSkinnedMesh){var l=r.skeleton.bones;if(c.floatVertexTextures)l=1024;else{var k=Math.min(Math.floor((c.maxVertexUniforms-20)/4),l.length);k<l.length?(console.warn(\"THREE.WebGLRenderer: Skeleton has \"+l.length+\" bones. This GPU supports \"+k+\".\"),l=0):l=k}}else l=0;k=c.precision;null!==b.precision&&(k=c.getMaxPrecision(b.precision),k!==b.precision&&console.warn(\"THREE.WebGLProgram.getParameters:\",b.precision,\"not supported, using\",k,\"instead.\"));\nvar m=a.getRenderTarget();return{shaderID:h,precision:k,supportsVertexTextures:c.vertexTextures,outputEncoding:d(m?m.texture:null,a.gammaOutput),map:!!b.map,mapEncoding:d(b.map,a.gammaInput),envMap:!!b.envMap,envMapMode:b.envMap&&b.envMap.mapping,envMapEncoding:d(b.envMap,a.gammaInput),envMapCubeUV:!!b.envMap&&(306===b.envMap.mapping||307===b.envMap.mapping),lightMap:!!b.lightMap,aoMap:!!b.aoMap,emissiveMap:!!b.emissiveMap,emissiveMapEncoding:d(b.emissiveMap,a.gammaInput),bumpMap:!!b.bumpMap,normalMap:!!b.normalMap,\ndisplacementMap:!!b.displacementMap,roughnessMap:!!b.roughnessMap,metalnessMap:!!b.metalnessMap,specularMap:!!b.specularMap,alphaMap:!!b.alphaMap,gradientMap:!!b.gradientMap,combine:b.combine,vertexColors:b.vertexColors,fog:!!q,useFog:b.fog,fogExp:q&&q.isFogExp2,flatShading:b.flatShading,sizeAttenuation:b.sizeAttenuation,logarithmicDepthBuffer:c.logarithmicDepthBuffer,skinning:b.skinning&&0<l,maxBones:l,useVertexTexture:c.floatVertexTextures,morphTargets:b.morphTargets,morphNormals:b.morphNormals,\nmaxMorphTargets:a.maxMorphTargets,maxMorphNormals:a.maxMorphNormals,numDirLights:e.directional.length,numPointLights:e.point.length,numSpotLights:e.spot.length,numRectAreaLights:e.rectArea.length,numHemiLights:e.hemi.length,numClippingPlanes:p,numClipIntersection:t,dithering:b.dithering,shadowMapEnabled:a.shadowMap.enabled&&r.receiveShadow&&0<g.length,shadowMapType:a.shadowMap.type,toneMapping:a.toneMapping,physicallyCorrectLights:a.physicallyCorrectLights,premultipliedAlpha:b.premultipliedAlpha,\nalphaTest:b.alphaTest,doubleSided:2===b.side,flipSided:1===b.side,depthPacking:void 0!==b.depthPacking?b.depthPacking:!1}};this.getProgramCode=function(b,c){var d=[];c.shaderID?d.push(c.shaderID):(d.push(b.fragmentShader),d.push(b.vertexShader));if(void 0!==b.defines)for(var e in b.defines)d.push(e),d.push(b.defines[e]);for(e=0;e<g.length;e++)d.push(c[g[e]]);d.push(b.onBeforeCompile.toString());d.push(a.gammaOutput);return d.join()};this.acquireProgram=function(c,d,f,g){for(var h,l=0,k=e.length;l<\nk;l++){var q=e[l];if(q.code===g){h=q;++h.usedTimes;break}}void 0===h&&(h=new gg(a,b,g,c,d,f),e.push(h));return h};this.releaseProgram=function(a){if(0===--a.usedTimes){var b=e.indexOf(a);e[b]=e[e.length-1];e.pop();a.destroy()}};this.programs=e}function jg(a,b,c,d,e,f,g){function h(a,b){if(a.width>b||a.height>b){b/=Math.max(a.width,a.height);var c=document.createElementNS(\"http://www.w3.org/1999/xhtml\",\"canvas\");c.width=Math.floor(a.width*b);c.height=Math.floor(a.height*b);c.getContext(\"2d\").drawImage(a,\n0,0,a.width,a.height,0,0,c.width,c.height);console.warn(\"THREE.WebGLRenderer: image is too big (\"+a.width+\"x\"+a.height+\"). Resized to \"+c.width+\"x\"+c.height,a);return c}return a}function k(a){return R.isPowerOfTwo(a.width)&&R.isPowerOfTwo(a.height)}function l(a,b){return a.generateMipmaps&&b&&1003!==a.minFilter&&1006!==a.minFilter}function q(b){return 1003===b||1004===b||1005===b?a.NEAREST:a.LINEAR}function p(b){b=b.target;b.removeEventListener(\"dispose\",p);a:{var c=d.get(b);if(b.image&&c.__image__webglTextureCube)a.deleteTexture(c.__image__webglTextureCube);\nelse{if(void 0===c.__webglInit)break a;a.deleteTexture(c.__webglTexture)}d.remove(b)}g.textures--}function t(b){b=b.target;b.removeEventListener(\"dispose\",t);var c=d.get(b),e=d.get(b.texture);if(b){void 0!==e.__webglTexture&&a.deleteTexture(e.__webglTexture);b.depthTexture&&b.depthTexture.dispose();if(b.isWebGLRenderTargetCube)for(e=0;6>e;e++)a.deleteFramebuffer(c.__webglFramebuffer[e]),c.__webglDepthbuffer&&a.deleteRenderbuffer(c.__webglDepthbuffer[e]);else a.deleteFramebuffer(c.__webglFramebuffer),\nc.__webglDepthbuffer&&a.deleteRenderbuffer(c.__webglDepthbuffer);d.remove(b.texture);d.remove(b)}g.textures--}function r(b,q){var t=d.get(b);if(0<b.version&&t.__version!==b.version){var r=b.image;if(void 0===r)console.warn(\"THREE.WebGLRenderer: Texture marked for update but image is undefined\",b);else if(!1===r.complete)console.warn(\"THREE.WebGLRenderer: Texture marked for update but image is incomplete\",b);else{void 0===t.__webglInit&&(t.__webglInit=!0,b.addEventListener(\"dispose\",p),t.__webglTexture=\na.createTexture(),g.textures++);c.activeTexture(a.TEXTURE0+q);c.bindTexture(a.TEXTURE_2D,t.__webglTexture);a.pixelStorei(a.UNPACK_FLIP_Y_WEBGL,b.flipY);a.pixelStorei(a.UNPACK_PREMULTIPLY_ALPHA_WEBGL,b.premultiplyAlpha);a.pixelStorei(a.UNPACK_ALIGNMENT,b.unpackAlignment);var v=h(b.image,e.maxTextureSize);(1001!==b.wrapS||1001!==b.wrapT||1003!==b.minFilter&&1006!==b.minFilter)&&!1===k(v)&&(q=v,q instanceof HTMLImageElement||q instanceof HTMLCanvasElement?(r=document.createElementNS(\"http://www.w3.org/1999/xhtml\",\n\"canvas\"),r.width=R.nearestPowerOfTwo(q.width),r.height=R.nearestPowerOfTwo(q.height),r.getContext(\"2d\").drawImage(q,0,0,r.width,r.height),console.warn(\"THREE.WebGLRenderer: image is not power of two (\"+q.width+\"x\"+q.height+\"). Resized to \"+r.width+\"x\"+r.height,q),v=r):v=q);q=k(v);var r=f.convert(b.format),A=f.convert(b.type);m(a.TEXTURE_2D,b,q);var n=b.mipmaps;if(b.isDepthTexture){n=a.DEPTH_COMPONENT;if(1015===b.type){if(!y)throw Error(\"Float Depth Texture only supported in WebGL2.0\");n=a.DEPTH_COMPONENT32F}else y&&\n(n=a.DEPTH_COMPONENT16);1026===b.format&&n===a.DEPTH_COMPONENT&&1012!==b.type&&1014!==b.type&&(console.warn(\"THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture.\"),b.type=1012,A=f.convert(b.type));1027===b.format&&(n=a.DEPTH_STENCIL,1020!==b.type&&(console.warn(\"THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture.\"),b.type=1020,A=f.convert(b.type)));c.texImage2D(a.TEXTURE_2D,0,n,v.width,v.height,0,r,A,null)}else if(b.isDataTexture)if(0<\nn.length&&q){for(var u=0,x=n.length;u<x;u++)v=n[u],c.texImage2D(a.TEXTURE_2D,u,r,v.width,v.height,0,r,A,v.data);b.generateMipmaps=!1}else c.texImage2D(a.TEXTURE_2D,0,r,v.width,v.height,0,r,A,v.data);else if(b.isCompressedTexture)for(u=0,x=n.length;u<x;u++)v=n[u],1023!==b.format&&1022!==b.format?-1<c.getCompressedTextureFormats().indexOf(r)?c.compressedTexImage2D(a.TEXTURE_2D,u,r,v.width,v.height,0,v.data):console.warn(\"THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()\"):\nc.texImage2D(a.TEXTURE_2D,u,r,v.width,v.height,0,r,A,v.data);else if(0<n.length&&q){u=0;for(x=n.length;u<x;u++)v=n[u],c.texImage2D(a.TEXTURE_2D,u,r,r,A,v);b.generateMipmaps=!1}else c.texImage2D(a.TEXTURE_2D,0,r,r,A,v);l(b,q)&&a.generateMipmap(a.TEXTURE_2D);t.__version=b.version;if(b.onUpdate)b.onUpdate(b);return}}c.activeTexture(a.TEXTURE0+q);c.bindTexture(a.TEXTURE_2D,t.__webglTexture)}function m(c,g,h){h?(a.texParameteri(c,a.TEXTURE_WRAP_S,f.convert(g.wrapS)),a.texParameteri(c,a.TEXTURE_WRAP_T,\nf.convert(g.wrapT)),a.texParameteri(c,a.TEXTURE_MAG_FILTER,f.convert(g.magFilter)),a.texParameteri(c,a.TEXTURE_MIN_FILTER,f.convert(g.minFilter))):(a.texParameteri(c,a.TEXTURE_WRAP_S,a.CLAMP_TO_EDGE),a.texParameteri(c,a.TEXTURE_WRAP_T,a.CLAMP_TO_EDGE),1001===g.wrapS&&1001===g.wrapT||console.warn(\"THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping.\",g),a.texParameteri(c,a.TEXTURE_MAG_FILTER,q(g.magFilter)),a.texParameteri(c,\na.TEXTURE_MIN_FILTER,q(g.minFilter)),1003!==g.minFilter&&1006!==g.minFilter&&console.warn(\"THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.\",g));!(h=b.get(\"EXT_texture_filter_anisotropic\"))||1015===g.type&&null===b.get(\"OES_texture_float_linear\")||1016===g.type&&null===b.get(\"OES_texture_half_float_linear\")||!(1<g.anisotropy||d.get(g).__currentAnisotropy)||(a.texParameterf(c,h.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(g.anisotropy,\ne.getMaxAnisotropy())),d.get(g).__currentAnisotropy=g.anisotropy)}function n(b,e,g,h){var l=f.convert(e.texture.format),k=f.convert(e.texture.type);c.texImage2D(h,0,l,e.width,e.height,0,l,k,null);a.bindFramebuffer(a.FRAMEBUFFER,b);a.framebufferTexture2D(a.FRAMEBUFFER,g,h,d.get(e.texture).__webglTexture,0);a.bindFramebuffer(a.FRAMEBUFFER,null)}function x(b,c){a.bindRenderbuffer(a.RENDERBUFFER,b);c.depthBuffer&&!c.stencilBuffer?(a.renderbufferStorage(a.RENDERBUFFER,a.DEPTH_COMPONENT16,c.width,c.height),\na.framebufferRenderbuffer(a.FRAMEBUFFER,a.DEPTH_ATTACHMENT,a.RENDERBUFFER,b)):c.depthBuffer&&c.stencilBuffer?(a.renderbufferStorage(a.RENDERBUFFER,a.DEPTH_STENCIL,c.width,c.height),a.framebufferRenderbuffer(a.FRAMEBUFFER,a.DEPTH_STENCIL_ATTACHMENT,a.RENDERBUFFER,b)):a.renderbufferStorage(a.RENDERBUFFER,a.RGBA4,c.width,c.height);a.bindRenderbuffer(a.RENDERBUFFER,null)}var y=\"undefined\"!==typeof WebGL2RenderingContext&&a instanceof WebGL2RenderingContext;this.setTexture2D=r;this.setTextureCube=function(b,\nq){var t=d.get(b);if(6===b.image.length)if(0<b.version&&t.__version!==b.version){t.__image__webglTextureCube||(b.addEventListener(\"dispose\",p),t.__image__webglTextureCube=a.createTexture(),g.textures++);c.activeTexture(a.TEXTURE0+q);c.bindTexture(a.TEXTURE_CUBE_MAP,t.__image__webglTextureCube);a.pixelStorei(a.UNPACK_FLIP_Y_WEBGL,b.flipY);q=b&&b.isCompressedTexture;for(var r=b.image[0]&&b.image[0].isDataTexture,v=[],n=0;6>n;n++)v[n]=q||r?r?b.image[n].image:b.image[n]:h(b.image[n],e.maxCubemapSize);\nvar u=k(v[0]),x=f.convert(b.format),A=f.convert(b.type);m(a.TEXTURE_CUBE_MAP,b,u);for(n=0;6>n;n++)if(q)for(var y,I=v[n].mipmaps,w=0,z=I.length;w<z;w++)y=I[w],1023!==b.format&&1022!==b.format?-1<c.getCompressedTextureFormats().indexOf(x)?c.compressedTexImage2D(a.TEXTURE_CUBE_MAP_POSITIVE_X+n,w,x,y.width,y.height,0,y.data):console.warn(\"THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()\"):c.texImage2D(a.TEXTURE_CUBE_MAP_POSITIVE_X+n,w,x,y.width,y.height,\n0,x,A,y.data);else r?c.texImage2D(a.TEXTURE_CUBE_MAP_POSITIVE_X+n,0,x,v[n].width,v[n].height,0,x,A,v[n].data):c.texImage2D(a.TEXTURE_CUBE_MAP_POSITIVE_X+n,0,x,x,A,v[n]);l(b,u)&&a.generateMipmap(a.TEXTURE_CUBE_MAP);t.__version=b.version;if(b.onUpdate)b.onUpdate(b)}else c.activeTexture(a.TEXTURE0+q),c.bindTexture(a.TEXTURE_CUBE_MAP,t.__image__webglTextureCube)};this.setTextureCubeDynamic=function(b,e){c.activeTexture(a.TEXTURE0+e);c.bindTexture(a.TEXTURE_CUBE_MAP,d.get(b).__webglTexture)};this.setupRenderTarget=\nfunction(b){var e=d.get(b),f=d.get(b.texture);b.addEventListener(\"dispose\",t);f.__webglTexture=a.createTexture();g.textures++;var h=!0===b.isWebGLRenderTargetCube,p=k(b);if(h){e.__webglFramebuffer=[];for(var q=0;6>q;q++)e.__webglFramebuffer[q]=a.createFramebuffer()}else e.__webglFramebuffer=a.createFramebuffer();if(h){c.bindTexture(a.TEXTURE_CUBE_MAP,f.__webglTexture);m(a.TEXTURE_CUBE_MAP,b.texture,p);for(q=0;6>q;q++)n(e.__webglFramebuffer[q],b,a.COLOR_ATTACHMENT0,a.TEXTURE_CUBE_MAP_POSITIVE_X+q);\nl(b.texture,p)&&a.generateMipmap(a.TEXTURE_CUBE_MAP);c.bindTexture(a.TEXTURE_CUBE_MAP,null)}else c.bindTexture(a.TEXTURE_2D,f.__webglTexture),m(a.TEXTURE_2D,b.texture,p),n(e.__webglFramebuffer,b,a.COLOR_ATTACHMENT0,a.TEXTURE_2D),l(b.texture,p)&&a.generateMipmap(a.TEXTURE_2D),c.bindTexture(a.TEXTURE_2D,null);if(b.depthBuffer){e=d.get(b);f=!0===b.isWebGLRenderTargetCube;if(b.depthTexture){if(f)throw Error(\"target.depthTexture not supported in Cube render targets\");if(b&&b.isWebGLRenderTargetCube)throw Error(\"Depth Texture with cube render targets is not supported\");\na.bindFramebuffer(a.FRAMEBUFFER,e.__webglFramebuffer);if(!b.depthTexture||!b.depthTexture.isDepthTexture)throw Error(\"renderTarget.depthTexture must be an instance of THREE.DepthTexture\");d.get(b.depthTexture).__webglTexture&&b.depthTexture.image.width===b.width&&b.depthTexture.image.height===b.height||(b.depthTexture.image.width=b.width,b.depthTexture.image.height=b.height,b.depthTexture.needsUpdate=!0);r(b.depthTexture,0);e=d.get(b.depthTexture).__webglTexture;if(1026===b.depthTexture.format)a.framebufferTexture2D(a.FRAMEBUFFER,\na.DEPTH_ATTACHMENT,a.TEXTURE_2D,e,0);else if(1027===b.depthTexture.format)a.framebufferTexture2D(a.FRAMEBUFFER,a.DEPTH_STENCIL_ATTACHMENT,a.TEXTURE_2D,e,0);else throw Error(\"Unknown depthTexture format\");}else if(f)for(e.__webglDepthbuffer=[],f=0;6>f;f++)a.bindFramebuffer(a.FRAMEBUFFER,e.__webglFramebuffer[f]),e.__webglDepthbuffer[f]=a.createRenderbuffer(),x(e.__webglDepthbuffer[f],b);else a.bindFramebuffer(a.FRAMEBUFFER,e.__webglFramebuffer),e.__webglDepthbuffer=a.createRenderbuffer(),x(e.__webglDepthbuffer,\nb);a.bindFramebuffer(a.FRAMEBUFFER,null)}};this.updateRenderTargetMipmap=function(b){var e=b.texture,f=k(b);l(e,f)&&(b=b.isWebGLRenderTargetCube?a.TEXTURE_CUBE_MAP:a.TEXTURE_2D,e=d.get(e).__webglTexture,c.bindTexture(b,e),a.generateMipmap(b),c.bindTexture(b,null))}}function kg(){var a={};return{get:function(b){b=b.uuid;var c=a[b];void 0===c&&(c={},a[b]=c);return c},remove:function(b){delete a[b.uuid]},clear:function(){a={}}}}function lg(a,b,c){function d(b,c,d){var e=new Uint8Array(4),f=a.createTexture();\na.bindTexture(b,f);a.texParameteri(b,a.TEXTURE_MIN_FILTER,a.NEAREST);a.texParameteri(b,a.TEXTURE_MAG_FILTER,a.NEAREST);for(b=0;b<d;b++)a.texImage2D(c+b,0,a.RGBA,1,1,0,a.RGBA,a.UNSIGNED_BYTE,e);return f}function e(b){!0!==A[b]&&(a.enable(b),A[b]=!0)}function f(b){!1!==A[b]&&(a.disable(b),A[b]=!1)}function g(b,d,g,h,l,k,p,q){0!==b?e(a.BLEND):f(a.BLEND);if(5!==b){if(b!==H||q!==J)switch(b){case 2:q?(a.blendEquationSeparate(a.FUNC_ADD,a.FUNC_ADD),a.blendFuncSeparate(a.ONE,a.ONE,a.ONE,a.ONE)):(a.blendEquation(a.FUNC_ADD),\na.blendFunc(a.SRC_ALPHA,a.ONE));break;case 3:q?(a.blendEquationSeparate(a.FUNC_ADD,a.FUNC_ADD),a.blendFuncSeparate(a.ZERO,a.ZERO,a.ONE_MINUS_SRC_COLOR,a.ONE_MINUS_SRC_ALPHA)):(a.blendEquation(a.FUNC_ADD),a.blendFunc(a.ZERO,a.ONE_MINUS_SRC_COLOR));break;case 4:q?(a.blendEquationSeparate(a.FUNC_ADD,a.FUNC_ADD),a.blendFuncSeparate(a.ZERO,a.SRC_COLOR,a.ZERO,a.SRC_ALPHA)):(a.blendEquation(a.FUNC_ADD),a.blendFunc(a.ZERO,a.SRC_COLOR));break;default:q?(a.blendEquationSeparate(a.FUNC_ADD,a.FUNC_ADD),a.blendFuncSeparate(a.ONE,\na.ONE_MINUS_SRC_ALPHA,a.ONE,a.ONE_MINUS_SRC_ALPHA)):(a.blendEquationSeparate(a.FUNC_ADD,a.FUNC_ADD),a.blendFuncSeparate(a.SRC_ALPHA,a.ONE_MINUS_SRC_ALPHA,a.ONE,a.ONE_MINUS_SRC_ALPHA))}C=D=ba=z=w=va=null}else{l=l||d;k=k||g;p=p||h;if(d!==va||l!==ba)a.blendEquationSeparate(c.convert(d),c.convert(l)),va=d,ba=l;if(g!==w||h!==z||k!==D||p!==C)a.blendFuncSeparate(c.convert(g),c.convert(h),c.convert(k),c.convert(p)),w=g,z=h,D=k,C=p}H=b;J=q}function h(b){F!==b&&(b?a.frontFace(a.CW):a.frontFace(a.CCW),F=b)}\nfunction k(b){0!==b?(e(a.CULL_FACE),b!==ga&&(1===b?a.cullFace(a.BACK):2===b?a.cullFace(a.FRONT):a.cullFace(a.FRONT_AND_BACK))):f(a.CULL_FACE);ga=b}function l(b,c,d){if(b){if(e(a.POLYGON_OFFSET_FILL),T!==c||L!==d)a.polygonOffset(c,d),T=c,L=d}else f(a.POLYGON_OFFSET_FILL)}function q(b){void 0===b&&(b=a.TEXTURE0+O-1);K!==b&&(a.activeTexture(b),K=b)}var p=new function(){var b=!1,c=new S,d=null,e=new S(0,0,0,0);return{setMask:function(c){d===c||b||(a.colorMask(c,c,c,c),d=c)},setLocked:function(a){b=a},\nsetClear:function(b,d,f,g,h){!0===h&&(b*=g,d*=g,f*=g);c.set(b,d,f,g);!1===e.equals(c)&&(a.clearColor(b,d,f,g),e.copy(c))},reset:function(){b=!1;d=null;e.set(-1,0,0,0)}}},t=new function(){var b=!1,c=null,d=null,g=null;return{setTest:function(b){b?e(a.DEPTH_TEST):f(a.DEPTH_TEST)},setMask:function(d){c===d||b||(a.depthMask(d),c=d)},setFunc:function(b){if(d!==b){if(b)switch(b){case 0:a.depthFunc(a.NEVER);break;case 1:a.depthFunc(a.ALWAYS);break;case 2:a.depthFunc(a.LESS);break;case 3:a.depthFunc(a.LEQUAL);\nbreak;case 4:a.depthFunc(a.EQUAL);break;case 5:a.depthFunc(a.GEQUAL);break;case 6:a.depthFunc(a.GREATER);break;case 7:a.depthFunc(a.NOTEQUAL);break;default:a.depthFunc(a.LEQUAL)}else a.depthFunc(a.LEQUAL);d=b}},setLocked:function(a){b=a},setClear:function(b){g!==b&&(a.clearDepth(b),g=b)},reset:function(){b=!1;g=d=c=null}}},r=new function(){var b=!1,c=null,d=null,g=null,h=null,l=null,k=null,p=null,q=null;return{setTest:function(b){b?e(a.STENCIL_TEST):f(a.STENCIL_TEST)},setMask:function(d){c===d||b||\n(a.stencilMask(d),c=d)},setFunc:function(b,c,e){if(d!==b||g!==c||h!==e)a.stencilFunc(b,c,e),d=b,g=c,h=e},setOp:function(b,c,d){if(l!==b||k!==c||p!==d)a.stencilOp(b,c,d),l=b,k=c,p=d},setLocked:function(a){b=a},setClear:function(b){q!==b&&(a.clearStencil(b),q=b)},reset:function(){b=!1;q=p=k=l=h=g=d=c=null}}},m=a.getParameter(a.MAX_VERTEX_ATTRIBS),n=new Uint8Array(m),x=new Uint8Array(m),y=new Uint8Array(m),A={},I=null,B=null,H=null,va=null,w=null,z=null,ba=null,D=null,C=null,J=!1,F=null,ga=null,M=null,\nT=null,L=null,O=a.getParameter(a.MAX_COMBINED_TEXTURE_IMAGE_UNITS),m=parseFloat(/^WebGL\\ ([0-9])/.exec(a.getParameter(a.VERSION))[1]),Q=1<=parseFloat(m),K=null,R={},P=new S,G=new S,U={};U[a.TEXTURE_2D]=d(a.TEXTURE_2D,a.TEXTURE_2D,1);U[a.TEXTURE_CUBE_MAP]=d(a.TEXTURE_CUBE_MAP,a.TEXTURE_CUBE_MAP_POSITIVE_X,6);p.setClear(0,0,0,1);t.setClear(1);r.setClear(0);e(a.DEPTH_TEST);t.setFunc(3);h(!1);k(1);e(a.CULL_FACE);e(a.BLEND);g(1);return{buffers:{color:p,depth:t,stencil:r},initAttributes:function(){for(var a=\n0,b=n.length;a<b;a++)n[a]=0},enableAttribute:function(c){n[c]=1;0===x[c]&&(a.enableVertexAttribArray(c),x[c]=1);0!==y[c]&&(b.get(\"ANGLE_instanced_arrays\").vertexAttribDivisorANGLE(c,0),y[c]=0)},enableAttributeAndDivisor:function(c,d){n[c]=1;0===x[c]&&(a.enableVertexAttribArray(c),x[c]=1);y[c]!==d&&(b.get(\"ANGLE_instanced_arrays\").vertexAttribDivisorANGLE(c,d),y[c]=d)},disableUnusedAttributes:function(){for(var b=0,c=x.length;b!==c;++b)x[b]!==n[b]&&(a.disableVertexAttribArray(b),x[b]=0)},enable:e,\ndisable:f,getCompressedTextureFormats:function(){if(null===I&&(I=[],b.get(\"WEBGL_compressed_texture_pvrtc\")||b.get(\"WEBGL_compressed_texture_s3tc\")||b.get(\"WEBGL_compressed_texture_etc1\")))for(var c=a.getParameter(a.COMPRESSED_TEXTURE_FORMATS),d=0;d<c.length;d++)I.push(c[d]);return I},useProgram:function(b){return B!==b?(a.useProgram(b),B=b,!0):!1},setBlending:g,setMaterial:function(b){2===b.side?f(a.CULL_FACE):e(a.CULL_FACE);h(1===b.side);!0===b.transparent?g(b.blending,b.blendEquation,b.blendSrc,\nb.blendDst,b.blendEquationAlpha,b.blendSrcAlpha,b.blendDstAlpha,b.premultipliedAlpha):g(0);t.setFunc(b.depthFunc);t.setTest(b.depthTest);t.setMask(b.depthWrite);p.setMask(b.colorWrite);l(b.polygonOffset,b.polygonOffsetFactor,b.polygonOffsetUnits)},setFlipSided:h,setCullFace:k,setLineWidth:function(b){b!==M&&(Q&&a.lineWidth(b),M=b)},setPolygonOffset:l,setScissorTest:function(b){b?e(a.SCISSOR_TEST):f(a.SCISSOR_TEST)},activeTexture:q,bindTexture:function(b,c){null===K&&q();var d=R[K];void 0===d&&(d=\n{type:void 0,texture:void 0},R[K]=d);if(d.type!==b||d.texture!==c)a.bindTexture(b,c||U[b]),d.type=b,d.texture=c},compressedTexImage2D:function(){try{a.compressedTexImage2D.apply(a,arguments)}catch(ca){console.error(\"THREE.WebGLState:\",ca)}},texImage2D:function(){try{a.texImage2D.apply(a,arguments)}catch(ca){console.error(\"THREE.WebGLState:\",ca)}},scissor:function(b){!1===P.equals(b)&&(a.scissor(b.x,b.y,b.z,b.w),P.copy(b))},viewport:function(b){!1===G.equals(b)&&(a.viewport(b.x,b.y,b.z,b.w),G.copy(b))},\nreset:function(){for(var b=0;b<x.length;b++)1===x[b]&&(a.disableVertexAttribArray(b),x[b]=0);A={};K=I=null;R={};ga=F=H=B=null;p.reset();t.reset();r.reset()}}}function mg(a,b,c){function d(b){if(\"highp\"===b){if(0<a.getShaderPrecisionFormat(a.VERTEX_SHADER,a.HIGH_FLOAT).precision&&0<a.getShaderPrecisionFormat(a.FRAGMENT_SHADER,a.HIGH_FLOAT).precision)return\"highp\";b=\"mediump\"}return\"mediump\"===b&&0<a.getShaderPrecisionFormat(a.VERTEX_SHADER,a.MEDIUM_FLOAT).precision&&0<a.getShaderPrecisionFormat(a.FRAGMENT_SHADER,\na.MEDIUM_FLOAT).precision?\"mediump\":\"lowp\"}var e,f=void 0!==c.precision?c.precision:\"highp\",g=d(f);g!==f&&(console.warn(\"THREE.WebGLRenderer:\",f,\"not supported, using\",g,\"instead.\"),f=g);c=!0===c.logarithmicDepthBuffer&&!!b.get(\"EXT_frag_depth\");var g=a.getParameter(a.MAX_TEXTURE_IMAGE_UNITS),h=a.getParameter(a.MAX_VERTEX_TEXTURE_IMAGE_UNITS),k=a.getParameter(a.MAX_TEXTURE_SIZE),l=a.getParameter(a.MAX_CUBE_MAP_TEXTURE_SIZE),q=a.getParameter(a.MAX_VERTEX_ATTRIBS),p=a.getParameter(a.MAX_VERTEX_UNIFORM_VECTORS),\nt=a.getParameter(a.MAX_VARYING_VECTORS),r=a.getParameter(a.MAX_FRAGMENT_UNIFORM_VECTORS),m=0<h,n=!!b.get(\"OES_texture_float\");return{getMaxAnisotropy:function(){if(void 0!==e)return e;var c=b.get(\"EXT_texture_filter_anisotropic\");return e=null!==c?a.getParameter(c.MAX_TEXTURE_MAX_ANISOTROPY_EXT):0},getMaxPrecision:d,precision:f,logarithmicDepthBuffer:c,maxTextures:g,maxVertexTextures:h,maxTextureSize:k,maxCubemapSize:l,maxAttributes:q,maxVertexUniforms:p,maxVaryings:t,maxFragmentUniforms:r,vertexTextures:m,\nfloatFragmentTextures:n,floatVertexTextures:m&&n}}function md(a){ja.call(this);this.cameras=a||[]}function ng(a){function b(){if(null!==d&&d.isPresenting){var b=d.getEyeParameters(\"left\"),e=b.renderWidth,b=b.renderHeight;t=a.getPixelRatio();p=a.getSize();a.setDrawingBufferSize(2*e,b,1)}else c.enabled&&a.setDrawingBufferSize(p.width,p.height,t)}var c=this,d=null,e=null;\"VRFrameData\"in window&&(e=new window.VRFrameData);var f=new O,g=new O,h=new O,k=new ja;k.bounds=new S(0,0,.5,1);k.layers.enable(1);\nvar l=new ja;l.bounds=new S(.5,0,.5,1);l.layers.enable(2);var q=new md([k,l]);q.layers.enable(1);q.layers.enable(2);var p,t;window.addEventListener(\"vrdisplaypresentchange\",b,!1);this.standing=this.enabled=!1;this.getDevice=function(){return d};this.setDevice=function(a){void 0!==a&&(d=a)};this.getCamera=function(a){if(null===d)return a;d.depthNear=a.near;d.depthFar=a.far;d.getFrameData(e);var b=e.pose;null!==b.position?a.position.fromArray(b.position):a.position.set(0,0,0);null!==b.orientation&&\na.quaternion.fromArray(b.orientation);a.updateMatrixWorld();b=d.stageParameters;this.standing&&b&&(g.fromArray(b.sittingToStandingTransform),h.getInverse(g),a.matrixWorld.multiply(g),a.matrixWorldInverse.multiply(h));if(!1===d.isPresenting)return a;k.near=a.near;l.near=a.near;k.far=a.far;l.far=a.far;q.matrixWorld.copy(a.matrixWorld);q.matrixWorldInverse.copy(a.matrixWorldInverse);k.matrixWorldInverse.fromArray(e.leftViewMatrix);l.matrixWorldInverse.fromArray(e.rightViewMatrix);this.standing&&b&&(k.matrixWorldInverse.multiply(h),\nl.matrixWorldInverse.multiply(h));a=a.parent;null!==a&&(f.getInverse(a.matrixWorld),k.matrixWorldInverse.multiply(f),l.matrixWorldInverse.multiply(f));k.matrixWorld.getInverse(k.matrixWorldInverse);l.matrixWorld.getInverse(l.matrixWorldInverse);k.projectionMatrix.fromArray(e.leftProjectionMatrix);l.projectionMatrix.fromArray(e.rightProjectionMatrix);q.projectionMatrix.copy(k.projectionMatrix);a=d.getLayers();a.length&&(a=a[0],null!==a.leftBounds&&4===a.leftBounds.length&&k.bounds.fromArray(a.leftBounds),\nnull!==a.rightBounds&&4===a.rightBounds.length&&l.bounds.fromArray(a.rightBounds));return q};this.getStandingMatrix=function(){return g};this.submitFrame=function(){d&&d.isPresenting&&d.submitFrame()};this.dispose=function(){window.removeEventListener(\"vrdisplaypresentchange\",b)}}function og(a){var b={};return{get:function(c){if(void 0!==b[c])return b[c];switch(c){case \"WEBGL_depth_texture\":var d=a.getExtension(\"WEBGL_depth_texture\")||a.getExtension(\"MOZ_WEBGL_depth_texture\")||a.getExtension(\"WEBKIT_WEBGL_depth_texture\");\nbreak;case \"EXT_texture_filter_anisotropic\":d=a.getExtension(\"EXT_texture_filter_anisotropic\")||a.getExtension(\"MOZ_EXT_texture_filter_anisotropic\")||a.getExtension(\"WEBKIT_EXT_texture_filter_anisotropic\");break;case \"WEBGL_compressed_texture_s3tc\":d=a.getExtension(\"WEBGL_compressed_texture_s3tc\")||a.getExtension(\"MOZ_WEBGL_compressed_texture_s3tc\")||a.getExtension(\"WEBKIT_WEBGL_compressed_texture_s3tc\");break;case \"WEBGL_compressed_texture_pvrtc\":d=a.getExtension(\"WEBGL_compressed_texture_pvrtc\")||\na.getExtension(\"WEBKIT_WEBGL_compressed_texture_pvrtc\");break;case \"WEBGL_compressed_texture_etc1\":d=a.getExtension(\"WEBGL_compressed_texture_etc1\");break;default:d=a.getExtension(c)}null===d&&console.warn(\"THREE.WebGLRenderer: \"+c+\" extension not supported.\");return b[c]=d}}}function pg(){function a(){l.value!==d&&(l.value=d,l.needsUpdate=0<e);c.numPlanes=e;c.numIntersection=0}function b(a,b,d,e){var f=null!==a?a.length:0,g=null;if(0!==f){g=l.value;if(!0!==e||null===g){e=d+4*f;b=b.matrixWorldInverse;\nk.getNormalMatrix(b);if(null===g||g.length<e)g=new Float32Array(e);for(e=0;e!==f;++e,d+=4)h.copy(a[e]).applyMatrix4(b,k),h.normal.toArray(g,d),g[d+3]=h.constant}l.value=g;l.needsUpdate=!0}c.numPlanes=f;return g}var c=this,d=null,e=0,f=!1,g=!1,h=new za,k=new qa,l={value:null,needsUpdate:!1};this.uniform=l;this.numIntersection=this.numPlanes=0;this.init=function(a,c,g){var h=0!==a.length||c||0!==e||f;f=c;d=b(a,g,0);e=a.length;return h};this.beginShadows=function(){g=!0;b(null)};this.endShadows=function(){g=\n!1;a()};this.setState=function(c,h,k,r,m,n){if(!f||null===c||0===c.length||g&&!k)g?b(null):a();else{k=g?0:e;var p=4*k,q=m.clippingState||null;l.value=q;q=b(c,r,p,n);for(c=0;c!==p;++c)q[c]=d[c];m.clippingState=q;this.numIntersection=h?this.numPlanes:0;this.numPlanes+=k}}}function Qe(a,b){return{convert:function(c){if(1E3===c)return a.REPEAT;if(1001===c)return a.CLAMP_TO_EDGE;if(1002===c)return a.MIRRORED_REPEAT;if(1003===c)return a.NEAREST;if(1004===c)return a.NEAREST_MIPMAP_NEAREST;if(1005===c)return a.NEAREST_MIPMAP_LINEAR;\nif(1006===c)return a.LINEAR;if(1007===c)return a.LINEAR_MIPMAP_NEAREST;if(1008===c)return a.LINEAR_MIPMAP_LINEAR;if(1009===c)return a.UNSIGNED_BYTE;if(1017===c)return a.UNSIGNED_SHORT_4_4_4_4;if(1018===c)return a.UNSIGNED_SHORT_5_5_5_1;if(1019===c)return a.UNSIGNED_SHORT_5_6_5;if(1010===c)return a.BYTE;if(1011===c)return a.SHORT;if(1012===c)return a.UNSIGNED_SHORT;if(1013===c)return a.INT;if(1014===c)return a.UNSIGNED_INT;if(1015===c)return a.FLOAT;if(1016===c){var d=b.get(\"OES_texture_half_float\");\nif(null!==d)return d.HALF_FLOAT_OES}if(1021===c)return a.ALPHA;if(1022===c)return a.RGB;if(1023===c)return a.RGBA;if(1024===c)return a.LUMINANCE;if(1025===c)return a.LUMINANCE_ALPHA;if(1026===c)return a.DEPTH_COMPONENT;if(1027===c)return a.DEPTH_STENCIL;if(100===c)return a.FUNC_ADD;if(101===c)return a.FUNC_SUBTRACT;if(102===c)return a.FUNC_REVERSE_SUBTRACT;if(200===c)return a.ZERO;if(201===c)return a.ONE;if(202===c)return a.SRC_COLOR;if(203===c)return a.ONE_MINUS_SRC_COLOR;if(204===c)return a.SRC_ALPHA;\nif(205===c)return a.ONE_MINUS_SRC_ALPHA;if(206===c)return a.DST_ALPHA;if(207===c)return a.ONE_MINUS_DST_ALPHA;if(208===c)return a.DST_COLOR;if(209===c)return a.ONE_MINUS_DST_COLOR;if(210===c)return a.SRC_ALPHA_SATURATE;if(2001===c||2002===c||2003===c||2004===c)if(d=b.get(\"WEBGL_compressed_texture_s3tc\"),null!==d){if(2001===c)return d.COMPRESSED_RGB_S3TC_DXT1_EXT;if(2002===c)return d.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(2003===c)return d.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(2004===c)return d.COMPRESSED_RGBA_S3TC_DXT5_EXT}if(2100===\nc||2101===c||2102===c||2103===c)if(d=b.get(\"WEBGL_compressed_texture_pvrtc\"),null!==d){if(2100===c)return d.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(2101===c)return d.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(2102===c)return d.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(2103===c)return d.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}if(2151===c&&(d=b.get(\"WEBGL_compressed_texture_etc1\"),null!==d))return d.COMPRESSED_RGB_ETC1_WEBGL;if(103===c||104===c)if(d=b.get(\"EXT_blend_minmax\"),null!==d){if(103===c)return d.MIN_EXT;if(104===c)return d.MAX_EXT}return 1020===\nc&&(d=b.get(\"WEBGL_depth_texture\"),null!==d)?d.UNSIGNED_INT_24_8_WEBGL:0}}}function Yd(a){function b(){ka=new og(E);ka.get(\"WEBGL_depth_texture\");ka.get(\"OES_texture_float\");ka.get(\"OES_texture_float_linear\");ka.get(\"OES_texture_half_float\");ka.get(\"OES_texture_half_float_linear\");ka.get(\"OES_standard_derivatives\");ka.get(\"ANGLE_instanced_arrays\");ka.get(\"OES_element_index_uint\")&&(F.MaxIndex=4294967296);qa=new Qe(E,ka);ea=new mg(E,ka,a);Z=new lg(E,ka,qa);Z.scissor(W.copy(ia).multiplyScalar(N));Z.viewport(V.copy(aa).multiplyScalar(N));\nda=new kg;fa=new jg(E,ka,Z,da,ea,qa,Xd);pa=new Nf(E);ra=new Yf(E,pa,Xd);ua=new ag(ra,Sa);wa=new Vf(E);na=new ig(J,ka,ea);ta=new $f;sa=new Tf;oa=new Pf(J,Z,ra,H);ya=new Xf(E,ka,Sa);za=new Wf(E,ka,Sa);Ba=new Kf(J,E,Z,fa,ea);Ca=new Lf(J,E,Z,fa,ea);J.info.programs=na.programs;J.context=E;J.capabilities=ea;J.extensions=ka;J.properties=da;J.renderLists=sa;J.state=Z}function c(a){a.preventDefault();console.log(\"THREE.WebGLRenderer: Context Lost.\");Q=!0}function d(a){console.log(\"THREE.WebGLRenderer: Context Restored.\");\nQ=!1;b()}function e(a){a=a.target;a.removeEventListener(\"dispose\",e);f(a);da.remove(a)}function f(a){var b=da.get(a).program;a.program=void 0;void 0!==b&&na.releaseProgram(b)}function g(a,b,c){a.render(function(a){J.renderBufferImmediate(a,b,c)})}function h(a){null!==Aa&&Aa(a);(ma.getDevice()||window).requestAnimationFrame(h)}function k(a,b,c){if(a.visible){if(a.layers.test(b.layers))if(a.isLight)w.push(a),a.castShadow&&z.push(a);else if(a.isSprite)a.frustumCulled&&!Vd.intersectsSprite(a)||D.push(a);\nelse if(a.isLensFlare)C.push(a);else if(a.isImmediateRenderObject)c&&Gb.setFromMatrixPosition(a.matrixWorld).applyMatrix4(ld),ba.push(a,null,a.material,Gb.z,null);else if(a.isMesh||a.isLine||a.isPoints)if(a.isSkinnedMesh&&a.skeleton.update(),!a.frustumCulled||Vd.intersectsObject(a)){c&&Gb.setFromMatrixPosition(a.matrixWorld).applyMatrix4(ld);var d=ua.update(a),e=a.material;if(Array.isArray(e))for(var f=d.groups,g=0,h=f.length;g<h;g++){var l=f[g],p=e[l.materialIndex];p&&p.visible&&ba.push(a,d,p,Gb.z,\nl)}else e.visible&&ba.push(a,d,e,Gb.z,null)}a=a.children;g=0;for(h=a.length;g<h;g++)k(a[g],b,c)}}function l(a,b,c,d){for(var e=0,f=a.length;e<f;e++){var g=a[e],h=g.object,l=g.geometry,k=void 0===d?g.material:d,g=g.group;if(c.isArrayCamera){Y=c;for(var p=c.cameras,t=0,r=p.length;t<r;t++){var m=p[t];if(h.layers.test(m.layers)){var v=m.bounds;Z.viewport(V.set(v.x*U,v.y*ca,v.z*U,v.w*ca).multiplyScalar(N));q(h,b,m,l,k,g)}}}else Y=null,q(h,b,c,l,k,g)}}function q(a,b,c,d,e,f){a.onBeforeRender(J,b,c,d,e,\nf);a.modelViewMatrix.multiplyMatrices(c.matrixWorldInverse,a.matrixWorld);a.normalMatrix.getNormalMatrix(a.modelViewMatrix);if(a.isImmediateRenderObject){Z.setMaterial(e);var h=t(c,b.fog,e,a);K=\"\";g(a,h,e)}else J.renderBufferDirect(c,b.fog,d,e,a,f);a.onAfterRender(J,b,c,d,e,f)}function p(a,b,c){var d=da.get(a);c=na.getParameters(a,ta.state,z,b,Ha.numPlanes,Ha.numIntersection,c);var g=na.getProgramCode(a,c),h=d.program,l=!0;if(void 0===h)a.addEventListener(\"dispose\",e);else if(h.code!==g)f(a);else{if(void 0!==\nc.shaderID)return;l=!1}l&&(c.shaderID?(h=ib[c.shaderID],d.shader={name:a.type,uniforms:Da.clone(h.uniforms),vertexShader:h.vertexShader,fragmentShader:h.fragmentShader}):d.shader={name:a.type,uniforms:a.uniforms,vertexShader:a.vertexShader,fragmentShader:a.fragmentShader},a.onBeforeCompile(d.shader),h=na.acquireProgram(a,d.shader,c,g),d.program=h,a.program=h);c=h.getAttributes();if(a.morphTargets)for(g=a.numSupportedMorphTargets=0;g<J.maxMorphTargets;g++)0<=c[\"morphTarget\"+g]&&a.numSupportedMorphTargets++;\nif(a.morphNormals)for(g=a.numSupportedMorphNormals=0;g<J.maxMorphNormals;g++)0<=c[\"morphNormal\"+g]&&a.numSupportedMorphNormals++;c=d.shader.uniforms;if(!a.isShaderMaterial&&!a.isRawShaderMaterial||!0===a.clipping)d.numClippingPlanes=Ha.numPlanes,d.numIntersection=Ha.numIntersection,c.clippingPlanes=Ha.uniform;d.fog=b;d.lightsHash=ta.state.hash;a.lights&&(c.ambientLightColor.value=ta.state.ambient,c.directionalLights.value=ta.state.directional,c.spotLights.value=ta.state.spot,c.rectAreaLights.value=\nta.state.rectArea,c.pointLights.value=ta.state.point,c.hemisphereLights.value=ta.state.hemi,c.directionalShadowMap.value=ta.state.directionalShadowMap,c.directionalShadowMatrix.value=ta.state.directionalShadowMatrix,c.spotShadowMap.value=ta.state.spotShadowMap,c.spotShadowMatrix.value=ta.state.spotShadowMatrix,c.pointShadowMap.value=ta.state.pointShadowMap,c.pointShadowMatrix.value=ta.state.pointShadowMatrix);a=d.program.getUniforms();a=cb.seqWithValue(a.seq,c);d.uniformsList=a}function t(a,b,c,d){G=\n0;var e=da.get(c);ja&&(Wd||a!==P)&&Ha.setState(c.clippingPlanes,c.clipIntersection,c.clipShadows,a,e,a===P&&c.id===T);!1===c.needsUpdate&&(void 0===e.program?c.needsUpdate=!0:c.fog&&e.fog!==b?c.needsUpdate=!0:c.lights&&e.lightsHash!==ta.state.hash?c.needsUpdate=!0:void 0===e.numClippingPlanes||e.numClippingPlanes===Ha.numPlanes&&e.numIntersection===Ha.numIntersection||(c.needsUpdate=!0));c.needsUpdate&&(p(c,b,d),c.needsUpdate=!1);var f=!1,g=!1,h=!1,l=e.program,k=l.getUniforms(),q=e.shader.uniforms;\nZ.useProgram(l.program)&&(h=g=f=!0);c.id!==T&&(T=c.id,g=!0);if(f||a!==P){k.setValue(E,\"projectionMatrix\",a.projectionMatrix);ea.logarithmicDepthBuffer&&k.setValue(E,\"logDepthBufFC\",2/(Math.log(a.far+1)/Math.LN2));P!==(Y||a)&&(P=Y||a,h=g=!0);if(c.isShaderMaterial||c.isMeshPhongMaterial||c.isMeshStandardMaterial||c.envMap)f=k.map.cameraPosition,void 0!==f&&f.setValue(E,Gb.setFromMatrixPosition(a.matrixWorld));(c.isMeshPhongMaterial||c.isMeshLambertMaterial||c.isMeshBasicMaterial||c.isMeshStandardMaterial||\nc.isShaderMaterial||c.skinning)&&k.setValue(E,\"viewMatrix\",a.matrixWorldInverse)}if(c.skinning&&(k.setOptional(E,d,\"bindMatrix\"),k.setOptional(E,d,\"bindMatrixInverse\"),a=d.skeleton))if(f=a.bones,ea.floatVertexTextures){if(void 0===a.boneTexture){var f=Math.sqrt(4*f.length),f=R.nextPowerOfTwo(Math.ceil(f)),f=Math.max(f,4),t=new Float32Array(f*f*4);t.set(a.boneMatrices);var v=new bb(t,f,f,1023,1015);a.boneMatrices=t;a.boneTexture=v;a.boneTextureSize=f}k.setValue(E,\"boneTexture\",a.boneTexture);k.setValue(E,\n\"boneTextureSize\",a.boneTextureSize)}else k.setOptional(E,a,\"boneMatrices\");g&&(k.setValue(E,\"toneMappingExposure\",J.toneMappingExposure),k.setValue(E,\"toneMappingWhitePoint\",J.toneMappingWhitePoint),c.lights&&(g=h,q.ambientLightColor.needsUpdate=g,q.directionalLights.needsUpdate=g,q.pointLights.needsUpdate=g,q.spotLights.needsUpdate=g,q.rectAreaLights.needsUpdate=g,q.hemisphereLights.needsUpdate=g),b&&c.fog&&(q.fogColor.value=b.color,b.isFog?(q.fogNear.value=b.near,q.fogFar.value=b.far):b.isFogExp2&&\n(q.fogDensity.value=b.density)),c.isMeshBasicMaterial?r(q,c):c.isMeshLambertMaterial?(r(q,c),c.emissiveMap&&(q.emissiveMap.value=c.emissiveMap)):c.isMeshPhongMaterial?(r(q,c),c.isMeshToonMaterial?(m(q,c),c.gradientMap&&(q.gradientMap.value=c.gradientMap)):m(q,c)):c.isMeshStandardMaterial?(r(q,c),c.isMeshPhysicalMaterial&&(q.clearCoat.value=c.clearCoat,q.clearCoatRoughness.value=c.clearCoatRoughness),q.roughness.value=c.roughness,q.metalness.value=c.metalness,c.roughnessMap&&(q.roughnessMap.value=\nc.roughnessMap),c.metalnessMap&&(q.metalnessMap.value=c.metalnessMap),c.emissiveMap&&(q.emissiveMap.value=c.emissiveMap),c.bumpMap&&(q.bumpMap.value=c.bumpMap,q.bumpScale.value=c.bumpScale),c.normalMap&&(q.normalMap.value=c.normalMap,q.normalScale.value.copy(c.normalScale)),c.displacementMap&&(q.displacementMap.value=c.displacementMap,q.displacementScale.value=c.displacementScale,q.displacementBias.value=c.displacementBias),c.envMap&&(q.envMapIntensity.value=c.envMapIntensity)):c.isMeshDepthMaterial?\n(r(q,c),c.displacementMap&&(q.displacementMap.value=c.displacementMap,q.displacementScale.value=c.displacementScale,q.displacementBias.value=c.displacementBias)):c.isMeshDistanceMaterial?(r(q,c),c.displacementMap&&(q.displacementMap.value=c.displacementMap,q.displacementScale.value=c.displacementScale,q.displacementBias.value=c.displacementBias),q.referencePosition.value.copy(c.referencePosition),q.nearDistance.value=c.nearDistance,q.farDistance.value=c.farDistance):c.isMeshNormalMaterial?(r(q,c),\nc.bumpMap&&(q.bumpMap.value=c.bumpMap,q.bumpScale.value=c.bumpScale),c.normalMap&&(q.normalMap.value=c.normalMap,q.normalScale.value.copy(c.normalScale)),c.displacementMap&&(q.displacementMap.value=c.displacementMap,q.displacementScale.value=c.displacementScale,q.displacementBias.value=c.displacementBias)):c.isLineBasicMaterial?(q.diffuse.value=c.color,q.opacity.value=c.opacity,c.isLineDashedMaterial&&(q.dashSize.value=c.dashSize,q.totalSize.value=c.dashSize+c.gapSize,q.scale.value=c.scale)):c.isPointsMaterial?\n(q.diffuse.value=c.color,q.opacity.value=c.opacity,q.size.value=c.size*N,q.scale.value=.5*ca,q.map.value=c.map,null!==c.map&&(b=c.map.offset,c=c.map.repeat,q.offsetRepeat.value.set(b.x,b.y,c.x,c.y))):c.isShadowMaterial&&(q.color.value=c.color,q.opacity.value=c.opacity),void 0!==q.ltcMat&&(q.ltcMat.value=L.LTC_MAT_TEXTURE),void 0!==q.ltcMag&&(q.ltcMag.value=L.LTC_MAG_TEXTURE),cb.upload(E,e.uniformsList,q,J));k.setValue(E,\"modelViewMatrix\",d.modelViewMatrix);k.setValue(E,\"normalMatrix\",d.normalMatrix);\nk.setValue(E,\"modelMatrix\",d.matrixWorld);return l}function r(a,b){a.opacity.value=b.opacity;b.color&&(a.diffuse.value=b.color);b.emissive&&a.emissive.value.copy(b.emissive).multiplyScalar(b.emissiveIntensity);b.map&&(a.map.value=b.map);b.alphaMap&&(a.alphaMap.value=b.alphaMap);b.specularMap&&(a.specularMap.value=b.specularMap);b.envMap&&(a.envMap.value=b.envMap,a.flipEnvMap.value=b.envMap&&b.envMap.isCubeTexture?-1:1,a.reflectivity.value=b.reflectivity,a.refractionRatio.value=b.refractionRatio);\nb.lightMap&&(a.lightMap.value=b.lightMap,a.lightMapIntensity.value=b.lightMapIntensity);b.aoMap&&(a.aoMap.value=b.aoMap,a.aoMapIntensity.value=b.aoMapIntensity);if(b.map)var c=b.map;else b.specularMap?c=b.specularMap:b.displacementMap?c=b.displacementMap:b.normalMap?c=b.normalMap:b.bumpMap?c=b.bumpMap:b.roughnessMap?c=b.roughnessMap:b.metalnessMap?c=b.metalnessMap:b.alphaMap?c=b.alphaMap:b.emissiveMap&&(c=b.emissiveMap);void 0!==c&&(c.isWebGLRenderTarget&&(c=c.texture),b=c.offset,c=c.repeat,a.offsetRepeat.value.set(b.x,\nb.y,c.x,c.y))}function m(a,b){a.specular.value=b.specular;a.shininess.value=Math.max(b.shininess,1E-4);b.emissiveMap&&(a.emissiveMap.value=b.emissiveMap);b.bumpMap&&(a.bumpMap.value=b.bumpMap,a.bumpScale.value=b.bumpScale);b.normalMap&&(a.normalMap.value=b.normalMap,a.normalScale.value.copy(b.normalScale));b.displacementMap&&(a.displacementMap.value=b.displacementMap,a.displacementScale.value=b.displacementScale,a.displacementBias.value=b.displacementBias)}console.log(\"THREE.WebGLRenderer\",\"87\");\na=a||{};var u=void 0!==a.canvas?a.canvas:document.createElementNS(\"http://www.w3.org/1999/xhtml\",\"canvas\"),x=void 0!==a.context?a.context:null,y=void 0!==a.alpha?a.alpha:!1,A=void 0!==a.depth?a.depth:!0,I=void 0!==a.stencil?a.stencil:!0,B=void 0!==a.antialias?a.antialias:!1,H=void 0!==a.premultipliedAlpha?a.premultipliedAlpha:!0,va=void 0!==a.preserveDrawingBuffer?a.preserveDrawingBuffer:!1,w=[],z=[],ba=null,D=[],C=[];this.domElement=u;this.context=null;this.sortObjects=this.autoClearStencil=this.autoClearDepth=\nthis.autoClearColor=this.autoClear=!0;this.clippingPlanes=[];this.localClippingEnabled=!1;this.gammaFactor=2;this.physicallyCorrectLights=this.gammaOutput=this.gammaInput=!1;this.toneMappingWhitePoint=this.toneMappingExposure=this.toneMapping=1;this.maxMorphTargets=8;this.maxMorphNormals=4;var J=this,Q=!1,ga=null,M=null,T=-1,K=\"\",P=null,Y=null,V=new S,W=new S,X=null,G=0,U=u.width,ca=u.height,N=1,aa=new S(0,0,U,ca),ia=new S(0,0,U,ca),ha=!1,Vd=new kd,Ha=new pg,ja=!1,Wd=!1,ld=new O,Gb=new n,Xd={geometries:0,\ntextures:0},Sa={frame:0,calls:0,vertices:0,faces:0,points:0};this.info={render:Sa,memory:Xd,programs:null};try{y={alpha:y,depth:A,stencil:I,antialias:B,premultipliedAlpha:H,preserveDrawingBuffer:va};var E=x||u.getContext(\"webgl\",y)||u.getContext(\"experimental-webgl\",y);if(null===E){if(null!==u.getContext(\"webgl\"))throw\"Error creating WebGL context with your selected attributes.\";throw\"Error creating WebGL context.\";}void 0===E.getShaderPrecisionFormat&&(E.getShaderPrecisionFormat=function(){return{rangeMin:1,\nrangeMax:1,precision:1}});u.addEventListener(\"webglcontextlost\",c,!1);u.addEventListener(\"webglcontextrestored\",d,!1)}catch(qg){console.error(\"THREE.WebGLRenderer: \"+qg)}var ka,ea,Z,da,fa,pa,ra,ua,ta,na,sa,oa,wa,ya,za,Ba,Ca,qa;b();var ma=new ng(J);this.vr=ma;var Ea=new Ke(J,ua,ea.maxTextureSize);this.shadowMap=Ea;this.getContext=function(){return E};this.getContextAttributes=function(){return E.getContextAttributes()};this.forceContextLoss=function(){var a=ka.get(\"WEBGL_lose_context\");a&&a.loseContext()};\nthis.forceContextRestore=function(){var a=ka.get(\"WEBGL_lose_context\");a&&a.restoreContext()};this.getPixelRatio=function(){return N};this.setPixelRatio=function(a){void 0!==a&&(N=a,this.setSize(U,ca,!1))};this.getSize=function(){return{width:U,height:ca}};this.setSize=function(a,b,c){var d=ma.getDevice();d&&d.isPresenting?console.warn(\"THREE.WebGLRenderer: Can't change size while VR device is presenting.\"):(U=a,ca=b,u.width=a*N,u.height=b*N,!1!==c&&(u.style.width=a+\"px\",u.style.height=b+\"px\"),this.setViewport(0,\n0,a,b))};this.getDrawingBufferSize=function(){return{width:U*N,height:ca*N}};this.setDrawingBufferSize=function(a,b,c){U=a;ca=b;N=c;u.width=a*c;u.height=b*c;this.setViewport(0,0,a,b)};this.setViewport=function(a,b,c,d){aa.set(a,ca-b-d,c,d);Z.viewport(V.copy(aa).multiplyScalar(N))};this.setScissor=function(a,b,c,d){ia.set(a,ca-b-d,c,d);Z.scissor(W.copy(ia).multiplyScalar(N))};this.setScissorTest=function(a){Z.setScissorTest(ha=a)};this.getClearColor=oa.getClearColor;this.setClearColor=oa.setClearColor;\nthis.getClearAlpha=oa.getClearAlpha;this.setClearAlpha=oa.setClearAlpha;this.clear=function(a,b,c){var d=0;if(void 0===a||a)d|=E.COLOR_BUFFER_BIT;if(void 0===b||b)d|=E.DEPTH_BUFFER_BIT;if(void 0===c||c)d|=E.STENCIL_BUFFER_BIT;E.clear(d)};this.clearColor=function(){this.clear(!0,!1,!1)};this.clearDepth=function(){this.clear(!1,!0,!1)};this.clearStencil=function(){this.clear(!1,!1,!0)};this.clearTarget=function(a,b,c,d){this.setRenderTarget(a);this.clear(b,c,d)};this.dispose=function(){u.removeEventListener(\"webglcontextlost\",\nc,!1);u.removeEventListener(\"webglcontextrestored\",d,!1);sa.dispose();ma.dispose()};this.renderBufferImmediate=function(a,b,c){Z.initAttributes();var d=da.get(a);a.hasPositions&&!d.position&&(d.position=E.createBuffer());a.hasNormals&&!d.normal&&(d.normal=E.createBuffer());a.hasUvs&&!d.uv&&(d.uv=E.createBuffer());a.hasColors&&!d.color&&(d.color=E.createBuffer());b=b.getAttributes();a.hasPositions&&(E.bindBuffer(E.ARRAY_BUFFER,d.position),E.bufferData(E.ARRAY_BUFFER,a.positionArray,E.DYNAMIC_DRAW),\nZ.enableAttribute(b.position),E.vertexAttribPointer(b.position,3,E.FLOAT,!1,0,0));if(a.hasNormals){E.bindBuffer(E.ARRAY_BUFFER,d.normal);if(!c.isMeshPhongMaterial&&!c.isMeshStandardMaterial&&!c.isMeshNormalMaterial&&!0===c.flatShading)for(var e=0,f=3*a.count;e<f;e+=9){var g=a.normalArray,h=(g[e+0]+g[e+3]+g[e+6])/3,l=(g[e+1]+g[e+4]+g[e+7])/3,k=(g[e+2]+g[e+5]+g[e+8])/3;g[e+0]=h;g[e+1]=l;g[e+2]=k;g[e+3]=h;g[e+4]=l;g[e+5]=k;g[e+6]=h;g[e+7]=l;g[e+8]=k}E.bufferData(E.ARRAY_BUFFER,a.normalArray,E.DYNAMIC_DRAW);\nZ.enableAttribute(b.normal);E.vertexAttribPointer(b.normal,3,E.FLOAT,!1,0,0)}a.hasUvs&&c.map&&(E.bindBuffer(E.ARRAY_BUFFER,d.uv),E.bufferData(E.ARRAY_BUFFER,a.uvArray,E.DYNAMIC_DRAW),Z.enableAttribute(b.uv),E.vertexAttribPointer(b.uv,2,E.FLOAT,!1,0,0));a.hasColors&&0!==c.vertexColors&&(E.bindBuffer(E.ARRAY_BUFFER,d.color),E.bufferData(E.ARRAY_BUFFER,a.colorArray,E.DYNAMIC_DRAW),Z.enableAttribute(b.color),E.vertexAttribPointer(b.color,3,E.FLOAT,!1,0,0));Z.disableUnusedAttributes();E.drawArrays(E.TRIANGLES,\n0,a.count);a.count=0};this.renderBufferDirect=function(a,b,c,d,e,f){Z.setMaterial(d);var g=t(a,b,d,e);a=c.id+\"_\"+g.id+\"_\"+(!0===d.wireframe);var h=!1;a!==K&&(K=a,h=!0);e.morphTargetInfluences&&(wa.update(e,c,d,g),h=!0);var l=c.index,k=c.attributes.position;b=1;!0===d.wireframe&&(l=ra.getWireframeAttribute(c),b=2);a=ya;if(null!==l){var q=pa.get(l);a=za;a.setIndex(q)}if(h){h=void 0;if(c&&c.isInstancedBufferGeometry&&null===ka.get(\"ANGLE_instanced_arrays\"))console.error(\"THREE.WebGLRenderer.setupVertexAttributes: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.\");\nelse{void 0===h&&(h=0);Z.initAttributes();var p=c.attributes,g=g.getAttributes(),r=d.defaultAttributeValues;for(H in g){var m=g[H];if(0<=m){var v=p[H];if(void 0!==v){var n=v.normalized,x=v.itemSize,u=pa.get(v);if(void 0!==u){var A=u.buffer,B=u.type,u=u.bytesPerElement;if(v.isInterleavedBufferAttribute){var y=v.data,I=y.stride,v=v.offset;y&&y.isInstancedInterleavedBuffer?(Z.enableAttributeAndDivisor(m,y.meshPerAttribute),void 0===c.maxInstancedCount&&(c.maxInstancedCount=y.meshPerAttribute*y.count)):\nZ.enableAttribute(m);E.bindBuffer(E.ARRAY_BUFFER,A);E.vertexAttribPointer(m,x,B,n,I*u,(h*I+v)*u)}else v.isInstancedBufferAttribute?(Z.enableAttributeAndDivisor(m,v.meshPerAttribute),void 0===c.maxInstancedCount&&(c.maxInstancedCount=v.meshPerAttribute*v.count)):Z.enableAttribute(m),E.bindBuffer(E.ARRAY_BUFFER,A),E.vertexAttribPointer(m,x,B,n,0,h*x*u)}}else if(void 0!==r&&(n=r[H],void 0!==n))switch(n.length){case 2:E.vertexAttrib2fv(m,n);break;case 3:E.vertexAttrib3fv(m,n);break;case 4:E.vertexAttrib4fv(m,\nn);break;default:E.vertexAttrib1fv(m,n)}}}Z.disableUnusedAttributes()}null!==l&&E.bindBuffer(E.ELEMENT_ARRAY_BUFFER,q.buffer)}q=0;null!==l?q=l.count:void 0!==k&&(q=k.count);l=c.drawRange.start*b;k=null!==f?f.start*b:0;var H=Math.max(l,k);f=Math.max(0,Math.min(q,l+c.drawRange.count*b,k+(null!==f?f.count*b:Infinity))-1-H+1);if(0!==f){if(e.isMesh)if(!0===d.wireframe)Z.setLineWidth(d.wireframeLinewidth*(null===ga?N:1)),a.setMode(E.LINES);else switch(e.drawMode){case 0:a.setMode(E.TRIANGLES);break;case 1:a.setMode(E.TRIANGLE_STRIP);\nbreak;case 2:a.setMode(E.TRIANGLE_FAN)}else e.isLine?(d=d.linewidth,void 0===d&&(d=1),Z.setLineWidth(d*(null===ga?N:1)),e.isLineSegments?a.setMode(E.LINES):e.isLineLoop?a.setMode(E.LINE_LOOP):a.setMode(E.LINE_STRIP)):e.isPoints&&a.setMode(E.POINTS);c&&c.isInstancedBufferGeometry?0<c.maxInstancedCount&&a.renderInstances(c,H,f):a.render(H,f)}};this.compile=function(a,b){w.length=0;z.length=0;a.traverse(function(a){a.isLight&&(w.push(a),a.castShadow&&z.push(a))});ta.setup(w,z,b);a.traverse(function(b){if(b.material)if(Array.isArray(b.material))for(var c=\n0;c<b.material.length;c++)p(b.material[c],a.fog,b);else p(b.material,a.fog,b)})};var Fa=!1,Aa=null;this.animate=function(a){Aa=a;Fa||((ma.getDevice()||window).requestAnimationFrame(h),Fa=!0)};this.render=function(a,b,c,d){if(!b||!b.isCamera)console.error(\"THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.\");else if(!Q){K=\"\";T=-1;P=null;!0===a.autoUpdate&&a.updateMatrixWorld();null===b.parent&&b.updateMatrixWorld();ma.enabled&&(b=ma.getCamera(b));ld.multiplyMatrices(b.projectionMatrix,\nb.matrixWorldInverse);Vd.setFromMatrix(ld);w.length=0;z.length=0;D.length=0;C.length=0;Wd=this.localClippingEnabled;ja=Ha.init(this.clippingPlanes,Wd,b);ba=sa.get(a,b);ba.init();k(a,b,J.sortObjects);!0===J.sortObjects&&ba.sort();ja&&Ha.beginShadows();Ea.render(z,a,b);ta.setup(w,z,b);ja&&Ha.endShadows();Sa.frame++;Sa.calls=0;Sa.vertices=0;Sa.faces=0;Sa.points=0;void 0===c&&(c=null);this.setRenderTarget(c);oa.render(ba,a,b,d);d=ba.opaque;var e=ba.transparent;if(a.overrideMaterial){var f=a.overrideMaterial;\nd.length&&l(d,a,b,f);e.length&&l(e,a,b,f)}else d.length&&l(d,a,b),e.length&&l(e,a,b);Ca.render(D,a,b);Ba.render(C,a,b,V);c&&fa.updateRenderTargetMipmap(c);Z.buffers.depth.setTest(!0);Z.buffers.depth.setMask(!0);Z.buffers.color.setMask(!0);Z.setPolygonOffset(!1);ma.enabled&&ma.submitFrame()}};this.setFaceCulling=function(a,b){Z.setCullFace(a);Z.setFlipSided(0===b)};this.allocTextureUnit=function(){var a=G;a>=ea.maxTextures&&console.warn(\"THREE.WebGLRenderer: Trying to use \"+a+\" texture units while this GPU supports only \"+\nea.maxTextures);G+=1;return a};this.setTexture2D=function(){var a=!1;return function(b,c){b&&b.isWebGLRenderTarget&&(a||(console.warn(\"THREE.WebGLRenderer.setTexture2D: don't use render targets as textures. Use their .texture property instead.\"),a=!0),b=b.texture);fa.setTexture2D(b,c)}}();this.setTexture=function(){var a=!1;return function(b,c){a||(console.warn(\"THREE.WebGLRenderer: .setTexture is deprecated, use setTexture2D instead.\"),a=!0);fa.setTexture2D(b,c)}}();this.setTextureCube=function(){var a=\n!1;return function(b,c){b&&b.isWebGLRenderTargetCube&&(a||(console.warn(\"THREE.WebGLRenderer.setTextureCube: don't use cube render targets as textures. Use their .texture property instead.\"),a=!0),b=b.texture);b&&b.isCubeTexture||Array.isArray(b.image)&&6===b.image.length?fa.setTextureCube(b,c):fa.setTextureCubeDynamic(b,c)}}();this.getRenderTarget=function(){return ga};this.setRenderTarget=function(a){(ga=a)&&void 0===da.get(a).__webglFramebuffer&&fa.setupRenderTarget(a);var b=null,c=!1;a?(b=da.get(a).__webglFramebuffer,\na.isWebGLRenderTargetCube&&(b=b[a.activeCubeFace],c=!0),V.copy(a.viewport),W.copy(a.scissor),X=a.scissorTest):(V.copy(aa).multiplyScalar(N),W.copy(ia).multiplyScalar(N),X=ha);M!==b&&(E.bindFramebuffer(E.FRAMEBUFFER,b),M=b);Z.viewport(V);Z.scissor(W);Z.setScissorTest(X);c&&(c=da.get(a.texture),E.framebufferTexture2D(E.FRAMEBUFFER,E.COLOR_ATTACHMENT0,E.TEXTURE_CUBE_MAP_POSITIVE_X+a.activeCubeFace,c.__webglTexture,a.activeMipMapLevel))};this.readRenderTargetPixels=function(a,b,c,d,e,f){if(a&&a.isWebGLRenderTarget){var g=\nda.get(a).__webglFramebuffer;if(g){var h=!1;g!==M&&(E.bindFramebuffer(E.FRAMEBUFFER,g),h=!0);try{var l=a.texture,k=l.format,q=l.type;1023!==k&&qa.convert(k)!==E.getParameter(E.IMPLEMENTATION_COLOR_READ_FORMAT)?console.error(\"THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.\"):1009===q||qa.convert(q)===E.getParameter(E.IMPLEMENTATION_COLOR_READ_TYPE)||1015===q&&(ka.get(\"OES_texture_float\")||ka.get(\"WEBGL_color_buffer_float\"))||1016===q&&ka.get(\"EXT_color_buffer_half_float\")?\nE.checkFramebufferStatus(E.FRAMEBUFFER)===E.FRAMEBUFFER_COMPLETE?0<=b&&b<=a.width-d&&0<=c&&c<=a.height-e&&E.readPixels(b,c,d,e,qa.convert(k),qa.convert(q),f):console.error(\"THREE.WebGLRenderer.readRenderTargetPixels: readPixels from renderTarget failed. Framebuffer not complete.\"):console.error(\"THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.\")}finally{h&&E.bindFramebuffer(E.FRAMEBUFFER,M)}}}else console.error(\"THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.\")}}\nfunction Hb(a,b){this.name=\"\";this.color=new C(a);this.density=void 0!==b?b:2.5E-4}function Ib(a,b,c){this.name=\"\";this.color=new C(a);this.near=void 0!==b?b:1;this.far=void 0!==c?c:1E3}function nd(){w.call(this);this.type=\"Scene\";this.overrideMaterial=this.fog=this.background=null;this.autoUpdate=!0}function Zd(a,b,c,d,e){w.call(this);this.lensFlares=[];this.positionScreen=new n;this.customUpdateCallback=void 0;void 0!==a&&this.add(a,b,c,d,e)}function Za(a){P.call(this);this.type=\"SpriteMaterial\";\nthis.color=new C(16777215);this.map=null;this.rotation=0;this.lights=this.fog=!1;this.setValues(a)}function xc(a){w.call(this);this.type=\"Sprite\";this.material=void 0!==a?a:new Za}function yc(){w.call(this);this.type=\"LOD\";Object.defineProperties(this,{levels:{enumerable:!0,value:[]}})}function zc(a,b){a=a||[];this.bones=a.slice(0);this.boneMatrices=new Float32Array(16*this.bones.length);if(void 0===b)this.calculateInverses();else if(this.bones.length===b.length)this.boneInverses=b.slice(0);else for(console.warn(\"THREE.Skeleton boneInverses is the wrong length.\"),\nthis.boneInverses=[],a=0,b=this.bones.length;a<b;a++)this.boneInverses.push(new O)}function od(){w.call(this);this.type=\"Bone\"}function pd(a,b){fa.call(this,a,b);this.type=\"SkinnedMesh\";this.bindMode=\"attached\";this.bindMatrix=new O;this.bindMatrixInverse=new O;a=this.initBones();a=new zc(a);this.bind(a,this.matrixWorld);this.normalizeSkinWeights()}function W(a){P.call(this);this.type=\"LineBasicMaterial\";this.color=new C(16777215);this.linewidth=1;this.linejoin=this.linecap=\"round\";this.lights=!1;\nthis.setValues(a)}function ra(a,b,c){if(1===c)return console.warn(\"THREE.Line: parameter THREE.LinePieces no longer supported. Created THREE.LineSegments instead.\"),new X(a,b);w.call(this);this.type=\"Line\";this.geometry=void 0!==a?a:new F;this.material=void 0!==b?b:new W({color:16777215*Math.random()})}function X(a,b){ra.call(this,a,b);this.type=\"LineSegments\"}function qd(a,b){ra.call(this,a,b);this.type=\"LineLoop\"}function ma(a){P.call(this);this.type=\"PointsMaterial\";this.color=new C(16777215);\nthis.map=null;this.size=1;this.sizeAttenuation=!0;this.lights=!1;this.setValues(a)}function Jb(a,b){w.call(this);this.type=\"Points\";this.geometry=void 0!==a?a:new F;this.material=void 0!==b?b:new ma({color:16777215*Math.random()})}function Ac(){w.call(this);this.type=\"Group\"}function rd(a,b,c,d,e,f,g,h,k){function l(){requestAnimationFrame(l);a.readyState>=a.HAVE_CURRENT_DATA&&(q.needsUpdate=!0)}N.call(this,a,b,c,d,e,f,g,h,k);this.generateMipmaps=!1;var q=this;l()}function Kb(a,b,c,d,e,f,g,h,k,l,\nq,p){N.call(this,null,f,g,h,k,l,d,e,q,p);this.image={width:b,height:c};this.mipmaps=a;this.generateMipmaps=this.flipY=!1}function Bc(a,b,c,d,e,f,g,h,k,l){l=void 0!==l?l:1026;if(1026!==l&&1027!==l)throw Error(\"DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat\");void 0===c&&1026===l&&(c=1012);void 0===c&&1027===l&&(c=1020);N.call(this,null,d,e,f,g,h,l,c,k);this.image={width:a,height:b};this.magFilter=void 0!==g?g:1003;this.minFilter=void 0!==h?h:1003;this.generateMipmaps=\nthis.flipY=!1}function Lb(a){F.call(this);this.type=\"WireframeGeometry\";var b=[],c,d,e,f=[0,0],g={},h=[\"a\",\"b\",\"c\"];if(a&&a.isGeometry){var k=a.faces;var l=0;for(d=k.length;l<d;l++){var q=k[l];for(c=0;3>c;c++){var p=q[h[c]];var t=q[h[(c+1)%3]];f[0]=Math.min(p,t);f[1]=Math.max(p,t);p=f[0]+\",\"+f[1];void 0===g[p]&&(g[p]={index1:f[0],index2:f[1]})}}for(p in g)l=g[p],h=a.vertices[l.index1],b.push(h.x,h.y,h.z),h=a.vertices[l.index2],b.push(h.x,h.y,h.z)}else if(a&&a.isBufferGeometry){var h=new n;if(null!==\na.index){k=a.attributes.position;q=a.index;var r=a.groups;0===r.length&&(r=[{start:0,count:q.count,materialIndex:0}]);a=0;for(e=r.length;a<e;++a)for(l=r[a],c=l.start,d=l.count,l=c,d=c+d;l<d;l+=3)for(c=0;3>c;c++)p=q.getX(l+c),t=q.getX(l+(c+1)%3),f[0]=Math.min(p,t),f[1]=Math.max(p,t),p=f[0]+\",\"+f[1],void 0===g[p]&&(g[p]={index1:f[0],index2:f[1]});for(p in g)l=g[p],h.fromBufferAttribute(k,l.index1),b.push(h.x,h.y,h.z),h.fromBufferAttribute(k,l.index2),b.push(h.x,h.y,h.z)}else for(k=a.attributes.position,\nl=0,d=k.count/3;l<d;l++)for(c=0;3>c;c++)g=3*l+c,h.fromBufferAttribute(k,g),b.push(h.x,h.y,h.z),g=3*l+(c+1)%3,h.fromBufferAttribute(k,g),b.push(h.x,h.y,h.z)}this.addAttribute(\"position\",new z(b,3))}function Cc(a,b,c){Q.call(this);this.type=\"ParametricGeometry\";this.parameters={func:a,slices:b,stacks:c};this.fromBufferGeometry(new Mb(a,b,c));this.mergeVertices()}function Mb(a,b,c){F.call(this);this.type=\"ParametricBufferGeometry\";this.parameters={func:a,slices:b,stacks:c};var d=[],e=[],f=[],g=[],h=\nnew n,k=new n,l=new n,q=new n,p=new n,t,r,m=b+1;for(t=0;t<=c;t++){var u=t/c;for(r=0;r<=b;r++){var x=r/b,k=a(x,u,k);e.push(k.x,k.y,k.z);0<=x-1E-5?(l=a(x-1E-5,u,l),q.subVectors(k,l)):(l=a(x+1E-5,u,l),q.subVectors(l,k));0<=u-1E-5?(l=a(x,u-1E-5,l),p.subVectors(k,l)):(l=a(x,u+1E-5,l),p.subVectors(l,k));h.crossVectors(q,p).normalize();f.push(h.x,h.y,h.z);g.push(x,u)}}for(t=0;t<c;t++)for(r=0;r<b;r++)a=t*m+r+1,h=(t+1)*m+r+1,k=(t+1)*m+r,d.push(t*m+r,a,k),d.push(a,h,k);this.setIndex(d);this.addAttribute(\"position\",\nnew z(e,3));this.addAttribute(\"normal\",new z(f,3));this.addAttribute(\"uv\",new z(g,2))}function Dc(a,b,c,d){Q.call(this);this.type=\"PolyhedronGeometry\";this.parameters={vertices:a,indices:b,radius:c,detail:d};this.fromBufferGeometry(new ua(a,b,c,d));this.mergeVertices()}function ua(a,b,c,d){function e(a){h.push(a.x,a.y,a.z)}function f(b,c){b*=3;c.x=a[b+0];c.y=a[b+1];c.z=a[b+2]}function g(a,b,c,d){0>d&&1===a.x&&(k[b]=a.x-1);0===c.x&&0===c.z&&(k[b]=d/2/Math.PI+.5)}F.call(this);this.type=\"PolyhedronBufferGeometry\";\nthis.parameters={vertices:a,indices:b,radius:c,detail:d};c=c||1;d=d||0;var h=[],k=[];(function(a){for(var c=new n,d=new n,g=new n,h=0;h<b.length;h+=3){f(b[h+0],c);f(b[h+1],d);f(b[h+2],g);var l,k,m=c,y=d,A=g,I=Math.pow(2,a),B=[];for(k=0;k<=I;k++){B[k]=[];var H=m.clone().lerp(A,k/I),w=y.clone().lerp(A,k/I),z=I-k;for(l=0;l<=z;l++)B[k][l]=0===l&&k===I?H:H.clone().lerp(w,l/z)}for(k=0;k<I;k++)for(l=0;l<2*(I-k)-1;l++)m=Math.floor(l/2),0===l%2?(e(B[k][m+1]),e(B[k+1][m]),e(B[k][m])):(e(B[k][m+1]),e(B[k+1][m+\n1]),e(B[k+1][m]))}})(d);(function(a){for(var b=new n,c=0;c<h.length;c+=3)b.x=h[c+0],b.y=h[c+1],b.z=h[c+2],b.normalize().multiplyScalar(a),h[c+0]=b.x,h[c+1]=b.y,h[c+2]=b.z})(c);(function(){for(var a=new n,b=0;b<h.length;b+=3)a.x=h[b+0],a.y=h[b+1],a.z=h[b+2],k.push(Math.atan2(a.z,-a.x)/2/Math.PI+.5,1-(Math.atan2(-a.y,Math.sqrt(a.x*a.x+a.z*a.z))/Math.PI+.5));for(var a=new n,b=new n,c=new n,d=new n,e=new D,f=new D,m=new D,x=0,y=0;x<h.length;x+=9,y+=6){a.set(h[x+0],h[x+1],h[x+2]);b.set(h[x+3],h[x+4],h[x+\n5]);c.set(h[x+6],h[x+7],h[x+8]);e.set(k[y+0],k[y+1]);f.set(k[y+2],k[y+3]);m.set(k[y+4],k[y+5]);d.copy(a).add(b).add(c).divideScalar(3);var A=Math.atan2(d.z,-d.x);g(e,y+0,a,A);g(f,y+2,b,A);g(m,y+4,c,A)}for(a=0;a<k.length;a+=6)b=k[a+0],c=k[a+2],d=k[a+4],e=Math.min(b,c,d),.9<Math.max(b,c,d)&&.1>e&&(.2>b&&(k[a+0]+=1),.2>c&&(k[a+2]+=1),.2>d&&(k[a+4]+=1))})();this.addAttribute(\"position\",new z(h,3));this.addAttribute(\"normal\",new z(h.slice(),3));this.addAttribute(\"uv\",new z(k,2));0===d?this.computeVertexNormals():\nthis.normalizeNormals()}function Ec(a,b){Q.call(this);this.type=\"TetrahedronGeometry\";this.parameters={radius:a,detail:b};this.fromBufferGeometry(new Nb(a,b));this.mergeVertices()}function Nb(a,b){ua.call(this,[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],[2,1,0,0,3,2,1,3,0,2,3,1],a,b);this.type=\"TetrahedronBufferGeometry\";this.parameters={radius:a,detail:b}}function Fc(a,b){Q.call(this);this.type=\"OctahedronGeometry\";this.parameters={radius:a,detail:b};this.fromBufferGeometry(new jb(a,b));this.mergeVertices()}\nfunction jb(a,b){ua.call(this,[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2],a,b);this.type=\"OctahedronBufferGeometry\";this.parameters={radius:a,detail:b}}function Gc(a,b){Q.call(this);this.type=\"IcosahedronGeometry\";this.parameters={radius:a,detail:b};this.fromBufferGeometry(new Ob(a,b));this.mergeVertices()}function Ob(a,b){var c=(1+Math.sqrt(5))/2;ua.call(this,[-1,c,0,1,c,0,-1,-c,0,1,-c,0,0,-1,c,0,1,c,0,-1,-c,0,1,-c,c,0,-1,c,0,1,-c,0,-1,-c,0,1],[0,11,\n5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1],a,b);this.type=\"IcosahedronBufferGeometry\";this.parameters={radius:a,detail:b}}function Hc(a,b){Q.call(this);this.type=\"DodecahedronGeometry\";this.parameters={radius:a,detail:b};this.fromBufferGeometry(new Pb(a,b));this.mergeVertices()}function Pb(a,b){var c=(1+Math.sqrt(5))/2,d=1/c;ua.call(this,[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-d,-c,0,-d,c,0,\nd,-c,0,d,c,-d,-c,0,-d,c,0,d,-c,0,d,c,0,-c,0,-d,c,0,-d,-c,0,d,c,0,d],[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9],a,b);this.type=\"DodecahedronBufferGeometry\";this.parameters={radius:a,detail:b}}function Ic(a,b,c,d,e,f){Q.call(this);this.type=\"TubeGeometry\";this.parameters={path:a,\ntubularSegments:b,radius:c,radialSegments:d,closed:e};void 0!==f&&console.warn(\"THREE.TubeGeometry: taper has been removed.\");a=new Qb(a,b,c,d,e);this.tangents=a.tangents;this.normals=a.normals;this.binormals=a.binormals;this.fromBufferGeometry(a);this.mergeVertices()}function Qb(a,b,c,d,e){function f(e){var f=a.getPointAt(e/b),l=g.normals[e];e=g.binormals[e];for(p=0;p<=d;p++){var q=p/d*Math.PI*2,r=Math.sin(q),q=-Math.cos(q);k.x=q*l.x+r*e.x;k.y=q*l.y+r*e.y;k.z=q*l.z+r*e.z;k.normalize();m.push(k.x,\nk.y,k.z);h.x=f.x+c*k.x;h.y=f.y+c*k.y;h.z=f.z+c*k.z;t.push(h.x,h.y,h.z)}}F.call(this);this.type=\"TubeBufferGeometry\";this.parameters={path:a,tubularSegments:b,radius:c,radialSegments:d,closed:e};b=b||64;c=c||1;d=d||8;e=e||!1;var g=a.computeFrenetFrames(b,e);this.tangents=g.tangents;this.normals=g.normals;this.binormals=g.binormals;var h=new n,k=new n,l=new D,q,p,t=[],m=[],v=[],u=[];for(q=0;q<b;q++)f(q);f(!1===e?b:0);for(q=0;q<=b;q++)for(p=0;p<=d;p++)l.x=q/b,l.y=p/d,v.push(l.x,l.y);(function(){for(p=\n1;p<=b;p++)for(q=1;q<=d;q++){var a=(d+1)*p+(q-1),c=(d+1)*p+q,e=(d+1)*(p-1)+q;u.push((d+1)*(p-1)+(q-1),a,e);u.push(a,c,e)}})();this.setIndex(u);this.addAttribute(\"position\",new z(t,3));this.addAttribute(\"normal\",new z(m,3));this.addAttribute(\"uv\",new z(v,2))}function Jc(a,b,c,d,e,f,g){Q.call(this);this.type=\"TorusKnotGeometry\";this.parameters={radius:a,tube:b,tubularSegments:c,radialSegments:d,p:e,q:f};void 0!==g&&console.warn(\"THREE.TorusKnotGeometry: heightScale has been deprecated. Use .scale( x, y, z ) instead.\");\nthis.fromBufferGeometry(new Rb(a,b,c,d,e,f));this.mergeVertices()}function Rb(a,b,c,d,e,f){function g(a,b,c,d,e){var f=Math.sin(a);b=c/b*a;c=Math.cos(b);e.x=d*(2+c)*.5*Math.cos(a);e.y=d*(2+c)*f*.5;e.z=d*Math.sin(b)*.5}F.call(this);this.type=\"TorusKnotBufferGeometry\";this.parameters={radius:a,tube:b,tubularSegments:c,radialSegments:d,p:e,q:f};a=a||100;b=b||40;c=Math.floor(c)||64;d=Math.floor(d)||8;e=e||2;f=f||3;var h=[],k=[],l=[],q=[],p,t=new n,m=new n,v=new n,u=new n,x=new n,y=new n,A=new n;for(p=\n0;p<=c;++p){var I=p/c*e*Math.PI*2;g(I,e,f,a,v);g(I+.01,e,f,a,u);y.subVectors(u,v);A.addVectors(u,v);x.crossVectors(y,A);A.crossVectors(x,y);x.normalize();A.normalize();for(I=0;I<=d;++I){var B=I/d*Math.PI*2,H=-b*Math.cos(B),B=b*Math.sin(B);t.x=v.x+(H*A.x+B*x.x);t.y=v.y+(H*A.y+B*x.y);t.z=v.z+(H*A.z+B*x.z);k.push(t.x,t.y,t.z);m.subVectors(t,v).normalize();l.push(m.x,m.y,m.z);q.push(p/c);q.push(I/d)}}for(I=1;I<=c;I++)for(p=1;p<=d;p++)a=(d+1)*I+(p-1),b=(d+1)*I+p,e=(d+1)*(I-1)+p,h.push((d+1)*(I-1)+(p-1),\na,e),h.push(a,b,e);this.setIndex(h);this.addAttribute(\"position\",new z(k,3));this.addAttribute(\"normal\",new z(l,3));this.addAttribute(\"uv\",new z(q,2))}function Kc(a,b,c,d,e){Q.call(this);this.type=\"TorusGeometry\";this.parameters={radius:a,tube:b,radialSegments:c,tubularSegments:d,arc:e};this.fromBufferGeometry(new Sb(a,b,c,d,e));this.mergeVertices()}function Sb(a,b,c,d,e){F.call(this);this.type=\"TorusBufferGeometry\";this.parameters={radius:a,tube:b,radialSegments:c,tubularSegments:d,arc:e};a=a||100;\nb=b||40;c=Math.floor(c)||8;d=Math.floor(d)||6;e=e||2*Math.PI;var f=[],g=[],h=[],k=[],l=new n,q=new n,p=new n,t,m;for(t=0;t<=c;t++)for(m=0;m<=d;m++){var v=m/d*e,u=t/c*Math.PI*2;q.x=(a+b*Math.cos(u))*Math.cos(v);q.y=(a+b*Math.cos(u))*Math.sin(v);q.z=b*Math.sin(u);g.push(q.x,q.y,q.z);l.x=a*Math.cos(v);l.y=a*Math.sin(v);p.subVectors(q,l).normalize();h.push(p.x,p.y,p.z);k.push(m/d);k.push(t/c)}for(t=1;t<=c;t++)for(m=1;m<=d;m++)a=(d+1)*(t-1)+m-1,b=(d+1)*(t-1)+m,e=(d+1)*t+m,f.push((d+1)*t+m-1,a,e),f.push(a,\nb,e);this.setIndex(f);this.addAttribute(\"position\",new z(g,3));this.addAttribute(\"normal\",new z(h,3));this.addAttribute(\"uv\",new z(k,2))}function $a(a,b){Q.call(this);this.type=\"ExtrudeGeometry\";this.parameters={shapes:a,options:b};this.fromBufferGeometry(new Ea(a,b));this.mergeVertices()}function Ea(a,b){\"undefined\"!==typeof a&&(F.call(this),this.type=\"ExtrudeBufferGeometry\",a=Array.isArray(a)?a:[a],this.addShapeList(a,b),this.computeVertexNormals())}function Lc(a,b){Q.call(this);this.type=\"TextGeometry\";\nthis.parameters={text:a,parameters:b};this.fromBufferGeometry(new Tb(a,b));this.mergeVertices()}function Tb(a,b){b=b||{};var c=b.font;if(!c||!c.isFont)return console.error(\"THREE.TextGeometry: font parameter is not an instance of THREE.Font.\"),new Q;a=c.generateShapes(a,b.size,b.curveSegments);b.amount=void 0!==b.height?b.height:50;void 0===b.bevelThickness&&(b.bevelThickness=10);void 0===b.bevelSize&&(b.bevelSize=8);void 0===b.bevelEnabled&&(b.bevelEnabled=!1);Ea.call(this,a,b);this.type=\"TextBufferGeometry\"}\nfunction Mc(a,b,c,d,e,f,g){Q.call(this);this.type=\"SphereGeometry\";this.parameters={radius:a,widthSegments:b,heightSegments:c,phiStart:d,phiLength:e,thetaStart:f,thetaLength:g};this.fromBufferGeometry(new kb(a,b,c,d,e,f,g));this.mergeVertices()}function kb(a,b,c,d,e,f,g){F.call(this);this.type=\"SphereBufferGeometry\";this.parameters={radius:a,widthSegments:b,heightSegments:c,phiStart:d,phiLength:e,thetaStart:f,thetaLength:g};a=a||50;b=Math.max(3,Math.floor(b)||8);c=Math.max(2,Math.floor(c)||6);d=void 0!==\nd?d:0;e=void 0!==e?e:2*Math.PI;f=void 0!==f?f:0;g=void 0!==g?g:Math.PI;var h=f+g,k,l,q=0,p=[],t=new n,m=new n,v=[],u=[],x=[],y=[];for(l=0;l<=c;l++){var A=[],I=l/c;for(k=0;k<=b;k++){var B=k/b;t.x=-a*Math.cos(d+B*e)*Math.sin(f+I*g);t.y=a*Math.cos(f+I*g);t.z=a*Math.sin(d+B*e)*Math.sin(f+I*g);u.push(t.x,t.y,t.z);m.set(t.x,t.y,t.z).normalize();x.push(m.x,m.y,m.z);y.push(B,1-I);A.push(q++)}p.push(A)}for(l=0;l<c;l++)for(k=0;k<b;k++)a=p[l][k+1],d=p[l][k],e=p[l+1][k],g=p[l+1][k+1],(0!==l||0<f)&&v.push(a,d,\ng),(l!==c-1||h<Math.PI)&&v.push(d,e,g);this.setIndex(v);this.addAttribute(\"position\",new z(u,3));this.addAttribute(\"normal\",new z(x,3));this.addAttribute(\"uv\",new z(y,2))}function Nc(a,b,c,d,e,f){Q.call(this);this.type=\"RingGeometry\";this.parameters={innerRadius:a,outerRadius:b,thetaSegments:c,phiSegments:d,thetaStart:e,thetaLength:f};this.fromBufferGeometry(new Ub(a,b,c,d,e,f));this.mergeVertices()}function Ub(a,b,c,d,e,f){F.call(this);this.type=\"RingBufferGeometry\";this.parameters={innerRadius:a,\nouterRadius:b,thetaSegments:c,phiSegments:d,thetaStart:e,thetaLength:f};a=a||20;b=b||50;e=void 0!==e?e:0;f=void 0!==f?f:2*Math.PI;c=void 0!==c?Math.max(3,c):8;d=void 0!==d?Math.max(1,d):1;var g=[],h=[],k=[],l=[],q=a,p=(b-a)/d,t=new n,m=new D,v,u;for(v=0;v<=d;v++){for(u=0;u<=c;u++)a=e+u/c*f,t.x=q*Math.cos(a),t.y=q*Math.sin(a),h.push(t.x,t.y,t.z),k.push(0,0,1),m.x=(t.x/b+1)/2,m.y=(t.y/b+1)/2,l.push(m.x,m.y);q+=p}for(v=0;v<d;v++)for(b=v*(c+1),u=0;u<c;u++)a=u+b,e=a+c+1,f=a+c+2,q=a+1,g.push(a,e,q),g.push(e,\nf,q);this.setIndex(g);this.addAttribute(\"position\",new z(h,3));this.addAttribute(\"normal\",new z(k,3));this.addAttribute(\"uv\",new z(l,2))}function Oc(a,b,c,d){Q.call(this);this.type=\"LatheGeometry\";this.parameters={points:a,segments:b,phiStart:c,phiLength:d};this.fromBufferGeometry(new Vb(a,b,c,d));this.mergeVertices()}function Vb(a,b,c,d){F.call(this);this.type=\"LatheBufferGeometry\";this.parameters={points:a,segments:b,phiStart:c,phiLength:d};b=Math.floor(b)||12;c=c||0;d=d||2*Math.PI;d=R.clamp(d,\n0,2*Math.PI);var e=[],f=[],g=[],h=1/b,k=new n,l=new D,q;for(q=0;q<=b;q++){var p=c+q*h*d;var t=Math.sin(p),m=Math.cos(p);for(p=0;p<=a.length-1;p++)k.x=a[p].x*t,k.y=a[p].y,k.z=a[p].x*m,f.push(k.x,k.y,k.z),l.x=q/b,l.y=p/(a.length-1),g.push(l.x,l.y)}for(q=0;q<b;q++)for(p=0;p<a.length-1;p++)c=p+q*a.length,h=c+a.length,k=c+a.length+1,l=c+1,e.push(c,h,l),e.push(h,k,l);this.setIndex(e);this.addAttribute(\"position\",new z(f,3));this.addAttribute(\"uv\",new z(g,2));this.computeVertexNormals();if(d===2*Math.PI)for(d=\nthis.attributes.normal.array,e=new n,f=new n,g=new n,c=b*a.length*3,p=q=0;q<a.length;q++,p+=3)e.x=d[p+0],e.y=d[p+1],e.z=d[p+2],f.x=d[c+p+0],f.y=d[c+p+1],f.z=d[c+p+2],g.addVectors(e,f).normalize(),d[p+0]=d[c+p+0]=g.x,d[p+1]=d[c+p+1]=g.y,d[p+2]=d[c+p+2]=g.z}function Wb(a,b){Q.call(this);this.type=\"ShapeGeometry\";\"object\"===typeof b&&(console.warn(\"THREE.ShapeGeometry: Options parameter has been removed.\"),b=b.curveSegments);this.parameters={shapes:a,curveSegments:b};this.fromBufferGeometry(new Xb(a,\nb));this.mergeVertices()}function Xb(a,b){function c(a){var c,h=e.length/3;a=a.extractPoints(b);var l=a.shape,q=a.holes;if(!1===Fa.isClockWise(l))for(l=l.reverse(),a=0,c=q.length;a<c;a++){var m=q[a];!0===Fa.isClockWise(m)&&(q[a]=m.reverse())}var n=Fa.triangulateShape(l,q);a=0;for(c=q.length;a<c;a++)m=q[a],l=l.concat(m);a=0;for(c=l.length;a<c;a++)m=l[a],e.push(m.x,m.y,0),f.push(0,0,1),g.push(m.x,m.y);a=0;for(c=n.length;a<c;a++)l=n[a],d.push(l[0]+h,l[1]+h,l[2]+h),k+=3}F.call(this);this.type=\"ShapeBufferGeometry\";\nthis.parameters={shapes:a,curveSegments:b};b=b||12;var d=[],e=[],f=[],g=[],h=0,k=0;if(!1===Array.isArray(a))c(a);else for(var l=0;l<a.length;l++)c(a[l]),this.addGroup(h,k,l),h+=k,k=0;this.setIndex(d);this.addAttribute(\"position\",new z(e,3));this.addAttribute(\"normal\",new z(f,3));this.addAttribute(\"uv\",new z(g,2))}function Yb(a,b){F.call(this);this.type=\"EdgesGeometry\";this.parameters={thresholdAngle:b};var c=[];b=Math.cos(R.DEG2RAD*(void 0!==b?b:1));var d=[0,0],e={},f=[\"a\",\"b\",\"c\"];if(a.isBufferGeometry){var g=\nnew Q;g.fromBufferGeometry(a)}else g=a.clone();g.mergeVertices();g.computeFaceNormals();a=g.vertices;g=g.faces;for(var h=0,k=g.length;h<k;h++)for(var l=g[h],q=0;3>q;q++){var p=l[f[q]];var t=l[f[(q+1)%3]];d[0]=Math.min(p,t);d[1]=Math.max(p,t);p=d[0]+\",\"+d[1];void 0===e[p]?e[p]={index1:d[0],index2:d[1],face1:h,face2:void 0}:e[p].face2=h}for(p in e)if(d=e[p],void 0===d.face2||g[d.face1].normal.dot(g[d.face2].normal)<=b)f=a[d.index1],c.push(f.x,f.y,f.z),f=a[d.index2],c.push(f.x,f.y,f.z);this.addAttribute(\"position\",\nnew z(c,3))}function lb(a,b,c,d,e,f,g,h){Q.call(this);this.type=\"CylinderGeometry\";this.parameters={radiusTop:a,radiusBottom:b,height:c,radialSegments:d,heightSegments:e,openEnded:f,thetaStart:g,thetaLength:h};this.fromBufferGeometry(new Ta(a,b,c,d,e,f,g,h));this.mergeVertices()}function Ta(a,b,c,d,e,f,g,h){function k(c){var e,f=new D,k=new n,r=0,u=!0===c?a:b,A=!0===c?1:-1;var w=v;for(e=1;e<=d;e++)p.push(0,x*A,0),t.push(0,A,0),m.push(.5,.5),v++;var z=v;for(e=0;e<=d;e++){var C=e/d*h+g,J=Math.cos(C),\nC=Math.sin(C);k.x=u*C;k.y=x*A;k.z=u*J;p.push(k.x,k.y,k.z);t.push(0,A,0);f.x=.5*J+.5;f.y=.5*C*A+.5;m.push(f.x,f.y);v++}for(e=0;e<d;e++)f=w+e,k=z+e,!0===c?q.push(k,k+1,f):q.push(k+1,k,f),r+=3;l.addGroup(y,r,!0===c?1:2);y+=r}F.call(this);this.type=\"CylinderBufferGeometry\";this.parameters={radiusTop:a,radiusBottom:b,height:c,radialSegments:d,heightSegments:e,openEnded:f,thetaStart:g,thetaLength:h};var l=this;a=void 0!==a?a:20;b=void 0!==b?b:20;c=void 0!==c?c:100;d=Math.floor(d)||8;e=Math.floor(e)||1;\nf=void 0!==f?f:!1;g=void 0!==g?g:0;h=void 0!==h?h:2*Math.PI;var q=[],p=[],t=[],m=[],v=0,u=[],x=c/2,y=0;(function(){var f,k,r=new n,H=new n,w=0,z=(b-a)/c;for(k=0;k<=e;k++){var D=[],C=k/e,F=C*(b-a)+a;for(f=0;f<=d;f++){var L=f/d,J=L*h+g,K=Math.sin(J),J=Math.cos(J);H.x=F*K;H.y=-C*c+x;H.z=F*J;p.push(H.x,H.y,H.z);r.set(K,z,J).normalize();t.push(r.x,r.y,r.z);m.push(L,1-C);D.push(v++)}u.push(D)}for(f=0;f<d;f++)for(k=0;k<e;k++)r=u[k+1][f],H=u[k+1][f+1],z=u[k][f+1],q.push(u[k][f],r,z),q.push(r,H,z),w+=6;l.addGroup(y,\nw,0);y+=w})();!1===f&&(0<a&&k(!0),0<b&&k(!1));this.setIndex(q);this.addAttribute(\"position\",new z(p,3));this.addAttribute(\"normal\",new z(t,3));this.addAttribute(\"uv\",new z(m,2))}function Pc(a,b,c,d,e,f,g){lb.call(this,0,a,b,c,d,e,f,g);this.type=\"ConeGeometry\";this.parameters={radius:a,height:b,radialSegments:c,heightSegments:d,openEnded:e,thetaStart:f,thetaLength:g}}function Qc(a,b,c,d,e,f,g){Ta.call(this,0,a,b,c,d,e,f,g);this.type=\"ConeBufferGeometry\";this.parameters={radius:a,height:b,radialSegments:c,\nheightSegments:d,openEnded:e,thetaStart:f,thetaLength:g}}function Rc(a,b,c,d){Q.call(this);this.type=\"CircleGeometry\";this.parameters={radius:a,segments:b,thetaStart:c,thetaLength:d};this.fromBufferGeometry(new Zb(a,b,c,d));this.mergeVertices()}function Zb(a,b,c,d){F.call(this);this.type=\"CircleBufferGeometry\";this.parameters={radius:a,segments:b,thetaStart:c,thetaLength:d};a=a||50;b=void 0!==b?Math.max(3,b):8;c=void 0!==c?c:0;d=void 0!==d?d:2*Math.PI;var e=[],f=[],g=[],h=[],k,l=new n,q=new D;f.push(0,\n0,0);g.push(0,0,1);h.push(.5,.5);var p=0;for(k=3;p<=b;p++,k+=3){var t=c+p/b*d;l.x=a*Math.cos(t);l.y=a*Math.sin(t);f.push(l.x,l.y,l.z);g.push(0,0,1);q.x=(f[k]/a+1)/2;q.y=(f[k+1]/a+1)/2;h.push(q.x,q.y)}for(k=1;k<=b;k++)e.push(k,k+1,0);this.setIndex(e);this.addAttribute(\"position\",new z(f,3));this.addAttribute(\"normal\",new z(g,3));this.addAttribute(\"uv\",new z(h,2))}function $b(a){P.call(this);this.type=\"ShadowMaterial\";this.color=new C(0);this.opacity=1;this.transparent=this.lights=!0;this.setValues(a)}\nfunction ac(a){ya.call(this,a);this.type=\"RawShaderMaterial\"}function Na(a){P.call(this);this.defines={STANDARD:\"\"};this.type=\"MeshStandardMaterial\";this.color=new C(16777215);this.metalness=this.roughness=.5;this.lightMap=this.map=null;this.lightMapIntensity=1;this.aoMap=null;this.aoMapIntensity=1;this.emissive=new C(0);this.emissiveIntensity=1;this.bumpMap=this.emissiveMap=null;this.bumpScale=1;this.normalMap=null;this.normalScale=new D(1,1);this.displacementMap=null;this.displacementScale=1;this.displacementBias=\n0;this.envMap=this.alphaMap=this.metalnessMap=this.roughnessMap=null;this.envMapIntensity=1;this.refractionRatio=.98;this.wireframe=!1;this.wireframeLinewidth=1;this.wireframeLinejoin=this.wireframeLinecap=\"round\";this.morphNormals=this.morphTargets=this.skinning=!1;this.setValues(a)}function mb(a){Na.call(this);this.defines={PHYSICAL:\"\"};this.type=\"MeshPhysicalMaterial\";this.reflectivity=.5;this.clearCoatRoughness=this.clearCoat=0;this.setValues(a)}function Aa(a){P.call(this);this.type=\"MeshPhongMaterial\";\nthis.color=new C(16777215);this.specular=new C(1118481);this.shininess=30;this.lightMap=this.map=null;this.lightMapIntensity=1;this.aoMap=null;this.aoMapIntensity=1;this.emissive=new C(0);this.emissiveIntensity=1;this.bumpMap=this.emissiveMap=null;this.bumpScale=1;this.normalMap=null;this.normalScale=new D(1,1);this.displacementMap=null;this.displacementScale=1;this.displacementBias=0;this.envMap=this.alphaMap=this.specularMap=null;this.combine=0;this.reflectivity=1;this.refractionRatio=.98;this.wireframe=\n!1;this.wireframeLinewidth=1;this.wireframeLinejoin=this.wireframeLinecap=\"round\";this.morphNormals=this.morphTargets=this.skinning=!1;this.setValues(a)}function nb(a){Aa.call(this);this.defines={TOON:\"\"};this.type=\"MeshToonMaterial\";this.gradientMap=null;this.setValues(a)}function ob(a){P.call(this);this.type=\"MeshNormalMaterial\";this.bumpMap=null;this.bumpScale=1;this.normalMap=null;this.normalScale=new D(1,1);this.displacementMap=null;this.displacementScale=1;this.displacementBias=0;this.wireframe=\n!1;this.wireframeLinewidth=1;this.morphNormals=this.morphTargets=this.skinning=this.lights=this.fog=!1;this.setValues(a)}function pb(a){P.call(this);this.type=\"MeshLambertMaterial\";this.color=new C(16777215);this.lightMap=this.map=null;this.lightMapIntensity=1;this.aoMap=null;this.aoMapIntensity=1;this.emissive=new C(0);this.emissiveIntensity=1;this.envMap=this.alphaMap=this.specularMap=this.emissiveMap=null;this.combine=0;this.reflectivity=1;this.refractionRatio=.98;this.wireframe=!1;this.wireframeLinewidth=\n1;this.wireframeLinejoin=this.wireframeLinecap=\"round\";this.morphNormals=this.morphTargets=this.skinning=!1;this.setValues(a)}function qb(a){W.call(this);this.type=\"LineDashedMaterial\";this.scale=1;this.dashSize=3;this.gapSize=1;this.setValues(a)}function $d(a,b,c){var d=this,e=!1,f=0,g=0;this.onStart=void 0;this.onLoad=a;this.onProgress=b;this.onError=c;this.itemStart=function(a){g++;if(!1===e&&void 0!==d.onStart)d.onStart(a,f,g);e=!0};this.itemEnd=function(a){f++;if(void 0!==d.onProgress)d.onProgress(a,\nf,g);if(f===g&&(e=!1,void 0!==d.onLoad))d.onLoad()};this.itemError=function(a){if(void 0!==d.onError)d.onError(a)}}function Ia(a){this.manager=void 0!==a?a:oa}function Re(a){this.manager=void 0!==a?a:oa;this._parser=null}function ae(a){this.manager=void 0!==a?a:oa;this._parser=null}function Sc(a){this.manager=void 0!==a?a:oa}function be(a){this.manager=void 0!==a?a:oa}function sd(a){this.manager=void 0!==a?a:oa}function aa(a,b){w.call(this);this.type=\"Light\";this.color=new C(a);this.intensity=void 0!==\nb?b:1;this.receiveShadow=void 0}function td(a,b,c){aa.call(this,a,c);this.type=\"HemisphereLight\";this.castShadow=void 0;this.position.copy(w.DefaultUp);this.updateMatrix();this.groundColor=new C(b)}function rb(a){this.camera=a;this.bias=0;this.radius=1;this.mapSize=new D(512,512);this.map=null;this.matrix=new O}function ud(){rb.call(this,new ja(50,1,.5,500))}function vd(a,b,c,d,e,f){aa.call(this,a,b);this.type=\"SpotLight\";this.position.copy(w.DefaultUp);this.updateMatrix();this.target=new w;Object.defineProperty(this,\n\"power\",{get:function(){return this.intensity*Math.PI},set:function(a){this.intensity=a/Math.PI}});this.distance=void 0!==c?c:0;this.angle=void 0!==d?d:Math.PI/3;this.penumbra=void 0!==e?e:0;this.decay=void 0!==f?f:1;this.shadow=new ud}function wd(a,b,c,d){aa.call(this,a,b);this.type=\"PointLight\";Object.defineProperty(this,\"power\",{get:function(){return 4*this.intensity*Math.PI},set:function(a){this.intensity=a/(4*Math.PI)}});this.distance=void 0!==c?c:0;this.decay=void 0!==d?d:1;this.shadow=new rb(new ja(90,\n1,.5,500))}function xd(){rb.call(this,new Db(-5,5,5,-5,.5,500))}function yd(a,b){aa.call(this,a,b);this.type=\"DirectionalLight\";this.position.copy(w.DefaultUp);this.updateMatrix();this.target=new w;this.shadow=new xd}function zd(a,b){aa.call(this,a,b);this.type=\"AmbientLight\";this.castShadow=void 0}function Ad(a,b,c,d){aa.call(this,a,b);this.type=\"RectAreaLight\";this.position.set(0,1,0);this.updateMatrix();this.width=void 0!==c?c:10;this.height=void 0!==d?d:10}function wa(a,b,c,d){this.parameterPositions=\na;this._cachedIndex=0;this.resultBuffer=void 0!==d?d:new b.constructor(c);this.sampleValues=b;this.valueSize=c}function Bd(a,b,c,d){wa.call(this,a,b,c,d);this._offsetNext=this._weightNext=this._offsetPrev=this._weightPrev=-0}function Tc(a,b,c,d){wa.call(this,a,b,c,d)}function Cd(a,b,c,d){wa.call(this,a,b,c,d)}function sb(a,b,c,d){if(void 0===a)throw Error(\"track name is undefined\");if(void 0===b||0===b.length)throw Error(\"no keyframes in track named \"+a);this.name=a;this.times=ea.convertArray(b,this.TimeBufferType);\nthis.values=ea.convertArray(c,this.ValueBufferType);this.setInterpolation(d||this.DefaultInterpolation);this.validate();this.optimize()}function bc(a,b,c,d){sb.call(this,a,b,c,d)}function Dd(a,b,c,d){wa.call(this,a,b,c,d)}function Uc(a,b,c,d){sb.call(this,a,b,c,d)}function cc(a,b,c,d){sb.call(this,a,b,c,d)}function Ed(a,b,c,d){sb.call(this,a,b,c,d)}function Fd(a,b,c){sb.call(this,a,b,c)}function Gd(a,b,c,d){sb.call(this,a,b,c,d)}function tb(a,b,c,d){sb.apply(this,arguments)}function Ba(a,b,c){this.name=\na;this.tracks=c;this.duration=void 0!==b?b:-1;this.uuid=R.generateUUID();0>this.duration&&this.resetDuration();this.optimize()}function Hd(a){this.manager=void 0!==a?a:oa;this.textures={}}function ce(a){this.manager=void 0!==a?a:oa}function dc(){this.onLoadStart=function(){};this.onLoadProgress=function(){};this.onLoadComplete=function(){}}function de(a){\"boolean\"===typeof a&&(console.warn(\"THREE.JSONLoader: showStatus parameter has been removed from constructor.\"),a=void 0);this.manager=void 0!==\na?a:oa;this.withCredentials=!1}function Se(a){this.manager=void 0!==a?a:oa;this.texturePath=\"\"}function Te(a,b,c,d,e){b=.5*(d-b);e=.5*(e-c);var f=a*a;return(2*c-2*d+b+e)*a*f+(-3*c+3*d-2*b-e)*f+b*a+c}function ub(a,b,c,d){var e=1-a;return e*e*b+2*(1-a)*a*c+a*a*d}function vb(a,b,c,d,e){var f=1-a,g=1-a;return f*f*f*b+3*g*g*a*c+3*(1-a)*a*a*d+a*a*a*e}function pa(){this.arcLengthDivisions=200}function Oa(a,b){this.arcLengthDivisions=200;this.v1=a;this.v2=b}function Vc(){this.arcLengthDivisions=200;this.curves=\n[];this.autoClose=!1}function Ua(a,b,c,d,e,f,g,h){this.arcLengthDivisions=200;this.aX=a;this.aY=b;this.xRadius=c;this.yRadius=d;this.aStartAngle=e;this.aEndAngle=f;this.aClockwise=g;this.aRotation=h||0}function wb(a){this.arcLengthDivisions=200;this.points=void 0===a?[]:a}function ec(a,b,c,d){this.arcLengthDivisions=200;this.v0=a;this.v1=b;this.v2=c;this.v3=d}function fc(a,b,c){this.arcLengthDivisions=200;this.v0=a;this.v1=b;this.v2=c}function Wc(a){Vc.call(this);this.currentPoint=new D;a&&this.fromPoints(a)}\nfunction xb(){Wc.apply(this,arguments);this.holes=[]}function ee(){this.subPaths=[];this.currentPath=null}function fe(a){this.data=a}function Ue(a){this.manager=void 0!==a?a:oa}function ge(a){this.manager=void 0!==a?a:oa}function Ve(){this.type=\"StereoCamera\";this.aspect=1;this.eyeSep=.064;this.cameraL=new ja;this.cameraL.layers.enable(1);this.cameraL.matrixAutoUpdate=!1;this.cameraR=new ja;this.cameraR.layers.enable(2);this.cameraR.matrixAutoUpdate=!1}function Xc(a,b,c){w.call(this);this.type=\"CubeCamera\";\nvar d=new ja(90,1,a,b);d.up.set(0,-1,0);d.lookAt(new n(1,0,0));this.add(d);var e=new ja(90,1,a,b);e.up.set(0,-1,0);e.lookAt(new n(-1,0,0));this.add(e);var f=new ja(90,1,a,b);f.up.set(0,0,1);f.lookAt(new n(0,1,0));this.add(f);var g=new ja(90,1,a,b);g.up.set(0,0,-1);g.lookAt(new n(0,-1,0));this.add(g);var h=new ja(90,1,a,b);h.up.set(0,-1,0);h.lookAt(new n(0,0,1));this.add(h);var k=new ja(90,1,a,b);k.up.set(0,-1,0);k.lookAt(new n(0,0,-1));this.add(k);this.renderTarget=new Bb(c,c,{format:1022,magFilter:1006,\nminFilter:1006});this.renderTarget.texture.name=\"CubeCamera\";this.update=function(a,b){null===this.parent&&this.updateMatrixWorld();var c=this.renderTarget,l=c.texture.generateMipmaps;c.texture.generateMipmaps=!1;c.activeCubeFace=0;a.render(b,d,c);c.activeCubeFace=1;a.render(b,e,c);c.activeCubeFace=2;a.render(b,f,c);c.activeCubeFace=3;a.render(b,g,c);c.activeCubeFace=4;a.render(b,h,c);c.texture.generateMipmaps=l;c.activeCubeFace=5;a.render(b,k,c);a.setRenderTarget(null)};this.clear=function(a,b,c,\nd){for(var e=this.renderTarget,f=0;6>f;f++)e.activeCubeFace=f,a.setRenderTarget(e),a.clear(b,c,d);a.setRenderTarget(null)}}function he(){w.call(this);this.type=\"AudioListener\";this.context=ie.getContext();this.gain=this.context.createGain();this.gain.connect(this.context.destination);this.filter=null}function gc(a){w.call(this);this.type=\"Audio\";this.context=a.context;this.gain=this.context.createGain();this.gain.connect(a.getInput());this.autoplay=!1;this.buffer=null;this.loop=!1;this.startTime=\n0;this.playbackRate=1;this.isPlaying=!1;this.hasPlaybackControl=!0;this.sourceType=\"empty\";this.filters=[]}function je(a){gc.call(this,a);this.panner=this.context.createPanner();this.panner.connect(this.gain)}function ke(a,b){this.analyser=a.context.createAnalyser();this.analyser.fftSize=void 0!==b?b:2048;this.data=new Uint8Array(this.analyser.frequencyBinCount);a.getOutput().connect(this.analyser)}function le(a,b,c){this.binding=a;this.valueSize=c;a=Float64Array;switch(b){case \"quaternion\":b=this._slerp;\nbreak;case \"string\":case \"bool\":a=Array;b=this._select;break;default:b=this._lerp}this.buffer=new a(4*c);this._mixBufferRegion=b;this.referenceCount=this.useCount=this.cumulativeWeight=0}function We(a,b,c){c=c||da.parseTrackName(b);this._targetGroup=a;this._bindings=a.subscribe_(b,c)}function da(a,b,c){this.path=b;this.parsedPath=c||da.parseTrackName(b);this.node=da.findNode(a,this.parsedPath.nodeName)||a;this.rootNode=a}function Xe(a){this.uuid=R.generateUUID();this._objects=Array.prototype.slice.call(arguments);\nthis.nCachedObjects_=0;var b={};this._indicesByUUID=b;for(var c=0,d=arguments.length;c!==d;++c)b[arguments[c].uuid]=c;this._paths=[];this._parsedPaths=[];this._bindings=[];this._bindingsIndicesByPath={};var e=this;this.stats={objects:{get total(){return e._objects.length},get inUse(){return this.total-e.nCachedObjects_}},get bindingsPerObject(){return e._bindings.length}}}function Ye(a,b,c){this._mixer=a;this._clip=b;this._localRoot=c||null;a=b.tracks;b=a.length;c=Array(b);for(var d={endingStart:2400,\nendingEnd:2400},e=0;e!==b;++e){var f=a[e].createInterpolant(null);c[e]=f;f.settings=d}this._interpolantSettings=d;this._interpolants=c;this._propertyBindings=Array(b);this._weightInterpolant=this._timeScaleInterpolant=this._byClipCacheIndex=this._cacheIndex=null;this.loop=2201;this._loopCount=-1;this._startTime=null;this.time=0;this._effectiveWeight=this.weight=this._effectiveTimeScale=this.timeScale=1;this.repetitions=Infinity;this.paused=!1;this.enabled=!0;this.clampWhenFinished=!1;this.zeroSlopeAtEnd=\nthis.zeroSlopeAtStart=!0}function Ze(a){this._root=a;this._initMemoryManager();this.time=this._accuIndex=0;this.timeScale=1}function Id(a,b){\"string\"===typeof a&&(console.warn(\"THREE.Uniform: Type parameter is no longer needed.\"),a=b);this.value=a}function me(){F.call(this);this.type=\"InstancedBufferGeometry\";this.maxInstancedCount=void 0}function ne(a,b,c,d){this.uuid=R.generateUUID();this.data=a;this.itemSize=b;this.offset=c;this.normalized=!0===d}function hc(a,b){this.uuid=R.generateUUID();this.array=\na;this.stride=b;this.count=void 0!==a?a.length/b:0;this.dynamic=!1;this.updateRange={offset:0,count:-1};this.onUploadCallback=function(){};this.version=0}function oe(a,b,c){hc.call(this,a,b);this.meshPerAttribute=c||1}function pe(a,b,c){K.call(this,a,b);this.meshPerAttribute=c||1}function $e(a,b,c,d){this.ray=new hb(a,b);this.near=c||0;this.far=d||Infinity;this.params={Mesh:{},Line:{},LOD:{},Points:{threshold:1},Sprite:{}};Object.defineProperties(this.params,{PointCloud:{get:function(){console.warn(\"THREE.Raycaster: params.PointCloud has been renamed to params.Points.\");\nreturn this.Points}}})}function af(a,b){return a.distance-b.distance}function qe(a,b,c,d){if(!1!==a.visible&&(a.raycast(b,c),!0===d)){a=a.children;d=0;for(var e=a.length;d<e;d++)qe(a[d],b,c,!0)}}function bf(a){this.autoStart=void 0!==a?a:!0;this.elapsedTime=this.oldTime=this.startTime=0;this.running=!1}function cf(a,b,c){this.radius=void 0!==a?a:1;this.phi=void 0!==b?b:0;this.theta=void 0!==c?c:0;return this}function df(a,b,c){this.radius=void 0!==a?a:1;this.theta=void 0!==b?b:0;this.y=void 0!==c?\nc:0;return this}function Yc(a){w.call(this);this.material=a;this.render=function(a){}}function Zc(a,b,c,d){this.object=a;this.size=void 0!==b?b:1;a=void 0!==c?c:16711680;d=void 0!==d?d:1;b=0;(c=this.object.geometry)&&c.isGeometry?b=3*c.faces.length:c&&c.isBufferGeometry&&(b=c.attributes.normal.count);c=new F;b=new z(6*b,3);c.addAttribute(\"position\",b);X.call(this,c,new W({color:a,linewidth:d}));this.matrixAutoUpdate=!1;this.update()}function ic(a,b){w.call(this);this.light=a;this.light.updateMatrixWorld();\nthis.matrix=a.matrixWorld;this.matrixAutoUpdate=!1;this.color=b;a=new F;b=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1];for(var c=0,d=1;32>c;c++,d++){var e=c/32*Math.PI*2,f=d/32*Math.PI*2;b.push(Math.cos(e),Math.sin(e),1,Math.cos(f),Math.sin(f),1)}a.addAttribute(\"position\",new z(b,3));b=new W({fog:!1});this.cone=new X(a,b);this.add(this.cone);this.update()}function ef(a){var b=[];a&&a.isBone&&b.push(a);for(var c=0;c<a.children.length;c++)b.push.apply(b,ef(a.children[c]));return b}\nfunction jc(a){for(var b=ef(a),c=new F,d=[],e=[],f=new C(0,0,1),g=new C(0,1,0),h=0;h<b.length;h++){var k=b[h];k.parent&&k.parent.isBone&&(d.push(0,0,0),d.push(0,0,0),e.push(f.r,f.g,f.b),e.push(g.r,g.g,g.b))}c.addAttribute(\"position\",new z(d,3));c.addAttribute(\"color\",new z(e,3));d=new W({vertexColors:2,depthTest:!1,depthWrite:!1,transparent:!0});X.call(this,c,d);this.root=a;this.bones=b;this.matrix=a.matrixWorld;this.matrixAutoUpdate=!1;this.onBeforeRender()}function kc(a,b,c){this.light=a;this.light.updateMatrixWorld();\nthis.color=c;a=new kb(b,4,2);b=new sa({wireframe:!0,fog:!1});fa.call(this,a,b);this.matrix=this.light.matrixWorld;this.matrixAutoUpdate=!1;this.update()}function lc(a,b){w.call(this);this.light=a;this.light.updateMatrixWorld();this.matrix=a.matrixWorld;this.matrixAutoUpdate=!1;this.color=b;a=new W({fog:!1});b=new F;b.addAttribute(\"position\",new K(new Float32Array(15),3));this.line=new ra(b,a);this.add(this.line);this.update()}function mc(a,b,c){w.call(this);this.light=a;this.light.updateMatrixWorld();\nthis.matrix=a.matrixWorld;this.matrixAutoUpdate=!1;this.color=c;a=new jb(b);a.rotateY(.5*Math.PI);this.material=new sa({wireframe:!0,fog:!1});void 0===this.color&&(this.material.vertexColors=2);b=a.getAttribute(\"position\");b=new Float32Array(3*b.count);a.addAttribute(\"color\",new K(b,3));this.add(new fa(a,this.material));this.update()}function $c(a,b,c,d){a=a||10;b=b||10;c=new C(void 0!==c?c:4473924);d=new C(void 0!==d?d:8947848);var e=b/2,f=a/b,g=a/2;a=[];for(var h=[],k=0,l=0,q=-g;k<=b;k++,q+=f){a.push(-g,\n0,q,g,0,q);a.push(q,0,-g,q,0,g);var p=k===e?c:d;p.toArray(h,l);l+=3;p.toArray(h,l);l+=3;p.toArray(h,l);l+=3;p.toArray(h,l);l+=3}b=new F;b.addAttribute(\"position\",new z(a,3));b.addAttribute(\"color\",new z(h,3));c=new W({vertexColors:2});X.call(this,b,c)}function Jd(a,b,c,d,e,f){a=a||10;b=b||16;c=c||8;d=d||64;e=new C(void 0!==e?e:4473924);f=new C(void 0!==f?f:8947848);var g=[],h=[],k;for(k=0;k<=b;k++){var l=k/b*2*Math.PI;var q=Math.sin(l)*a;l=Math.cos(l)*a;g.push(0,0,0);g.push(q,0,l);var p=k&1?e:f;h.push(p.r,\np.g,p.b);h.push(p.r,p.g,p.b)}for(k=0;k<=c;k++){p=k&1?e:f;var m=a-a/c*k;for(b=0;b<d;b++)l=b/d*2*Math.PI,q=Math.sin(l)*m,l=Math.cos(l)*m,g.push(q,0,l),h.push(p.r,p.g,p.b),l=(b+1)/d*2*Math.PI,q=Math.sin(l)*m,l=Math.cos(l)*m,g.push(q,0,l),h.push(p.r,p.g,p.b)}a=new F;a.addAttribute(\"position\",new z(g,3));a.addAttribute(\"color\",new z(h,3));g=new W({vertexColors:2});X.call(this,a,g)}function ad(a,b,c,d){this.object=a;this.size=void 0!==b?b:1;a=void 0!==c?c:16776960;d=void 0!==d?d:1;b=0;(c=this.object.geometry)&&\nc.isGeometry?b=c.faces.length:console.warn(\"THREE.FaceNormalsHelper: only THREE.Geometry is supported. Use THREE.VertexNormalsHelper, instead.\");c=new F;b=new z(6*b,3);c.addAttribute(\"position\",b);X.call(this,c,new W({color:a,linewidth:d}));this.matrixAutoUpdate=!1;this.update()}function nc(a,b,c){w.call(this);this.light=a;this.light.updateMatrixWorld();this.matrix=a.matrixWorld;this.matrixAutoUpdate=!1;this.color=c;void 0===b&&(b=1);a=new F;a.addAttribute(\"position\",new z([-b,b,0,b,b,0,b,-b,0,-b,\n-b,0,-b,b,0],3));b=new W({fog:!1});this.lightPlane=new ra(a,b);this.add(this.lightPlane);a=new F;a.addAttribute(\"position\",new z([0,0,0,0,0,1],3));this.targetLine=new ra(a,b);this.add(this.targetLine);this.update()}function bd(a){function b(a,b,d){c(a,d);c(b,d)}function c(a,b){f.push(0,0,0);g.push(b.r,b.g,b.b);void 0===h[a]&&(h[a]=[]);h[a].push(f.length/3-1)}var d=new F,e=new W({color:16777215,vertexColors:1}),f=[],g=[],h={},k=new C(16755200),l=new C(16711680),q=new C(43775),p=new C(16777215),m=new C(3355443);\nb(\"n1\",\"n2\",k);b(\"n2\",\"n4\",k);b(\"n4\",\"n3\",k);b(\"n3\",\"n1\",k);b(\"f1\",\"f2\",k);b(\"f2\",\"f4\",k);b(\"f4\",\"f3\",k);b(\"f3\",\"f1\",k);b(\"n1\",\"f1\",k);b(\"n2\",\"f2\",k);b(\"n3\",\"f3\",k);b(\"n4\",\"f4\",k);b(\"p\",\"n1\",l);b(\"p\",\"n2\",l);b(\"p\",\"n3\",l);b(\"p\",\"n4\",l);b(\"u1\",\"u2\",q);b(\"u2\",\"u3\",q);b(\"u3\",\"u1\",q);b(\"c\",\"t\",p);b(\"p\",\"c\",m);b(\"cn1\",\"cn2\",m);b(\"cn3\",\"cn4\",m);b(\"cf1\",\"cf2\",m);b(\"cf3\",\"cf4\",m);d.addAttribute(\"position\",new z(f,3));d.addAttribute(\"color\",new z(g,3));X.call(this,d,e);this.camera=a;this.camera.updateProjectionMatrix&&\nthis.camera.updateProjectionMatrix();this.matrix=a.matrixWorld;this.matrixAutoUpdate=!1;this.pointMap=h;this.update()}function yb(a,b){this.object=a;void 0===b&&(b=16776960);a=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]);var c=new Float32Array(24),d=new F;d.setIndex(new K(a,1));d.addAttribute(\"position\",new K(c,3));X.call(this,d,new W({color:b}));this.matrixAutoUpdate=!1;this.update()}function cd(a,b){this.type=\"Box3Helper\";this.box=a;a=void 0!==b?b:16776960;b=new Uint16Array([0,\n1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]);var c=new F;c.setIndex(new K(b,1));c.addAttribute(\"position\",new z([1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],3));X.call(this,c,new W({color:a}));this.geometry.computeBoundingSphere();this.onBeforeRender()}function dd(a,b,c){this.type=\"PlaneHelper\";this.plane=a;this.size=void 0===b?1:b;a=void 0!==c?c:16776960;b=new F;b.addAttribute(\"position\",new z([1,-1,1,-1,1,1,-1,-1,1,1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,1,0,0,1,0,0,0],3));b.computeBoundingSphere();\nra.call(this,b,new W({color:a}));b=new F;b.addAttribute(\"position\",new z([1,1,1,-1,1,1,-1,-1,1,1,1,1,-1,-1,1,1,-1,1],3));b.computeBoundingSphere();this.add(new fa(b,new sa({color:a,opacity:.2,transparent:!0,depthWrite:!1})));this.onBeforeRender()}function zb(a,b,c,d,e,f){w.call(this);void 0===d&&(d=16776960);void 0===c&&(c=1);void 0===e&&(e=.2*c);void 0===f&&(f=.2*e);void 0===Kd&&(Kd=new F,Kd.addAttribute(\"position\",new z([0,0,0,0,1,0],3)),re=new Ta(0,.5,1,5,1),re.translate(0,-.5,0));this.position.copy(b);\nthis.line=new ra(Kd,new W({color:d}));this.line.matrixAutoUpdate=!1;this.add(this.line);this.cone=new fa(re,new sa({color:d}));this.cone.matrixAutoUpdate=!1;this.add(this.cone);this.setDirection(a);this.setLength(c,e,f)}function Ld(a){a=a||1;var b=[0,0,0,a,0,0,0,0,0,0,a,0,0,0,0,0,0,a];a=new F;a.addAttribute(\"position\",new z(b,3));a.addAttribute(\"color\",new z([1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],3));b=new W({vertexColors:2});X.call(this,a,b)}function se(){var a=0,b=0,c=0,d=0;return{initCatmullRom:function(e,\nf,g,h,k){e=k*(g-e);h=k*(h-f);a=f;b=e;c=-3*f+3*g-2*e-h;d=2*f-2*g+e+h},initNonuniformCatmullRom:function(e,f,g,h,k,l,q){e=((f-e)/k-(g-e)/(k+l)+(g-f)/l)*l;h=((g-f)/l-(h-f)/(l+q)+(h-g)/q)*l;a=f;b=e;c=-3*f+3*g-2*e-h;d=2*f-2*g+e+h},calc:function(e){var f=e*e;return a+b*e+c*f+d*f*e}}}function Ja(a){this.arcLengthDivisions=200;2>a.length&&console.warn(\"THREE.CatmullRomCurve3: Points array needs at least two entries.\");this.points=a||[];this.closed=!1}function ed(a,b,c,d){this.arcLengthDivisions=200;this.v0=\na;this.v1=b;this.v2=c;this.v3=d}function fd(a,b,c){this.arcLengthDivisions=200;this.v0=a;this.v1=b;this.v2=c}function gd(a,b){this.arcLengthDivisions=200;this.v1=a;this.v2=b}function Md(a,b,c,d,e,f){Ua.call(this,a,b,c,c,d,e,f)}function ff(a){console.warn(\"THREE.ClosedSplineCurve3 has been deprecated. Use THREE.CatmullRomCurve3 instead.\");Ja.call(this,a);this.type=\"catmullrom\";this.closed=!0}function gf(a){console.warn(\"THREE.SplineCurve3 has been deprecated. Use THREE.CatmullRomCurve3 instead.\");\nJa.call(this,a);this.type=\"catmullrom\"}function te(a){console.warn(\"THREE.Spline has been removed. Use THREE.CatmullRomCurve3 instead.\");Ja.call(this,a);this.type=\"catmullrom\"}void 0===Number.EPSILON&&(Number.EPSILON=Math.pow(2,-52));void 0===Number.isInteger&&(Number.isInteger=function(a){return\"number\"===typeof a&&isFinite(a)&&Math.floor(a)===a});void 0===Math.sign&&(Math.sign=function(a){return 0>a?-1:0<a?1:+a});void 0===Function.prototype.name&&Object.defineProperty(Function.prototype,\"name\",\n{get:function(){return this.toString().match(/^\\s*function\\s*([^\\(\\s]*)/)[1]}});void 0===Object.assign&&function(){Object.assign=function(a){if(void 0===a||null===a)throw new TypeError(\"Cannot convert undefined or null to object\");for(var b=Object(a),c=1;c<arguments.length;c++){var d=arguments[c];if(void 0!==d&&null!==d)for(var e in d)Object.prototype.hasOwnProperty.call(d,e)&&(b[e]=d[e])}return b}}();Object.assign(na.prototype,{addEventListener:function(a,b){void 0===this._listeners&&(this._listeners=\n{});var c=this._listeners;void 0===c[a]&&(c[a]=[]);-1===c[a].indexOf(b)&&c[a].push(b)},hasEventListener:function(a,b){if(void 0===this._listeners)return!1;var c=this._listeners;return void 0!==c[a]&&-1!==c[a].indexOf(b)},removeEventListener:function(a,b){void 0!==this._listeners&&(a=this._listeners[a],void 0!==a&&(b=a.indexOf(b),-1!==b&&a.splice(b,1)))},dispatchEvent:function(a){if(void 0!==this._listeners){var b=this._listeners[a.type];if(void 0!==b){a.target=this;for(var b=b.slice(0),c=0,d=b.length;c<\nd;c++)b[c].call(this,a)}}}});var R={DEG2RAD:Math.PI/180,RAD2DEG:180/Math.PI,generateUUID:function(){var a=\"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz\".split(\"\"),b=Array(36),c=0,d;return function(){for(var e=0;36>e;e++)8===e||13===e||18===e||23===e?b[e]=\"-\":14===e?b[e]=\"4\":(2>=c&&(c=33554432+16777216*Math.random()|0),d=c&15,c>>=4,b[e]=a[19===e?d&3|8:d]);return b.join(\"\")}}(),clamp:function(a,b,c){return Math.max(b,Math.min(c,a))},euclideanModulo:function(a,b){return(a%b+b)%b},mapLinear:function(a,\nb,c,d,e){return d+(a-b)*(e-d)/(c-b)},lerp:function(a,b,c){return(1-c)*a+c*b},smoothstep:function(a,b,c){if(a<=b)return 0;if(a>=c)return 1;a=(a-b)/(c-b);return a*a*(3-2*a)},smootherstep:function(a,b,c){if(a<=b)return 0;if(a>=c)return 1;a=(a-b)/(c-b);return a*a*a*(a*(6*a-15)+10)},randInt:function(a,b){return a+Math.floor(Math.random()*(b-a+1))},randFloat:function(a,b){return a+Math.random()*(b-a)},randFloatSpread:function(a){return a*(.5-Math.random())},degToRad:function(a){return a*R.DEG2RAD},radToDeg:function(a){return a*\nR.RAD2DEG},isPowerOfTwo:function(a){return 0===(a&a-1)&&0!==a},nearestPowerOfTwo:function(a){return Math.pow(2,Math.round(Math.log(a)/Math.LN2))},nextPowerOfTwo:function(a){a--;a|=a>>1;a|=a>>2;a|=a>>4;a|=a>>8;a|=a>>16;a++;return a}};Object.defineProperties(D.prototype,{width:{get:function(){return this.x},set:function(a){this.x=a}},height:{get:function(){return this.y},set:function(a){this.y=a}}});Object.assign(D.prototype,{isVector2:!0,set:function(a,b){this.x=a;this.y=b;return this},setScalar:function(a){this.y=\nthis.x=a;return this},setX:function(a){this.x=a;return this},setY:function(a){this.y=a;return this},setComponent:function(a,b){switch(a){case 0:this.x=b;break;case 1:this.y=b;break;default:throw Error(\"index is out of range: \"+a);}return this},getComponent:function(a){switch(a){case 0:return this.x;case 1:return this.y;default:throw Error(\"index is out of range: \"+a);}},clone:function(){return new this.constructor(this.x,this.y)},copy:function(a){this.x=a.x;this.y=a.y;return this},add:function(a,\nb){if(void 0!==b)return console.warn(\"THREE.Vector2: .add() now only accepts one argument. Use .addVectors( a, b ) instead.\"),this.addVectors(a,b);this.x+=a.x;this.y+=a.y;return this},addScalar:function(a){this.x+=a;this.y+=a;return this},addVectors:function(a,b){this.x=a.x+b.x;this.y=a.y+b.y;return this},addScaledVector:function(a,b){this.x+=a.x*b;this.y+=a.y*b;return this},sub:function(a,b){if(void 0!==b)return console.warn(\"THREE.Vector2: .sub() now only accepts one argument. Use .subVectors( a, b ) instead.\"),\nthis.subVectors(a,b);this.x-=a.x;this.y-=a.y;return this},subScalar:function(a){this.x-=a;this.y-=a;return this},subVectors:function(a,b){this.x=a.x-b.x;this.y=a.y-b.y;return this},multiply:function(a){this.x*=a.x;this.y*=a.y;return this},multiplyScalar:function(a){this.x*=a;this.y*=a;return this},divide:function(a){this.x/=a.x;this.y/=a.y;return this},divideScalar:function(a){return this.multiplyScalar(1/a)},min:function(a){this.x=Math.min(this.x,a.x);this.y=Math.min(this.y,a.y);return this},max:function(a){this.x=\nMath.max(this.x,a.x);this.y=Math.max(this.y,a.y);return this},clamp:function(a,b){this.x=Math.max(a.x,Math.min(b.x,this.x));this.y=Math.max(a.y,Math.min(b.y,this.y));return this},clampScalar:function(){var a=new D,b=new D;return function(c,d){a.set(c,c);b.set(d,d);return this.clamp(a,b)}}(),clampLength:function(a,b){var c=this.length();return this.divideScalar(c||1).multiplyScalar(Math.max(a,Math.min(b,c)))},floor:function(){this.x=Math.floor(this.x);this.y=Math.floor(this.y);return this},ceil:function(){this.x=\nMath.ceil(this.x);this.y=Math.ceil(this.y);return this},round:function(){this.x=Math.round(this.x);this.y=Math.round(this.y);return this},roundToZero:function(){this.x=0>this.x?Math.ceil(this.x):Math.floor(this.x);this.y=0>this.y?Math.ceil(this.y):Math.floor(this.y);return this},negate:function(){this.x=-this.x;this.y=-this.y;return this},dot:function(a){return this.x*a.x+this.y*a.y},lengthSq:function(){return this.x*this.x+this.y*this.y},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},\nlengthManhattan:function(){return Math.abs(this.x)+Math.abs(this.y)},normalize:function(){return this.divideScalar(this.length()||1)},angle:function(){var a=Math.atan2(this.y,this.x);0>a&&(a+=2*Math.PI);return a},distanceTo:function(a){return Math.sqrt(this.distanceToSquared(a))},distanceToSquared:function(a){var b=this.x-a.x;a=this.y-a.y;return b*b+a*a},distanceToManhattan:function(a){return Math.abs(this.x-a.x)+Math.abs(this.y-a.y)},setLength:function(a){return this.normalize().multiplyScalar(a)},\nlerp:function(a,b){this.x+=(a.x-this.x)*b;this.y+=(a.y-this.y)*b;return this},lerpVectors:function(a,b,c){return this.subVectors(b,a).multiplyScalar(c).add(a)},equals:function(a){return a.x===this.x&&a.y===this.y},fromArray:function(a,b){void 0===b&&(b=0);this.x=a[b];this.y=a[b+1];return this},toArray:function(a,b){void 0===a&&(a=[]);void 0===b&&(b=0);a[b]=this.x;a[b+1]=this.y;return a},fromBufferAttribute:function(a,b,c){void 0!==c&&console.warn(\"THREE.Vector2: offset has been removed from .fromBufferAttribute().\");\nthis.x=a.getX(b);this.y=a.getY(b);return this},rotateAround:function(a,b){var c=Math.cos(b);b=Math.sin(b);var d=this.x-a.x,e=this.y-a.y;this.x=d*c-e*b+a.x;this.y=d*b+e*c+a.y;return this}});var lf=0;N.DEFAULT_IMAGE=void 0;N.DEFAULT_MAPPING=300;Object.defineProperty(N.prototype,\"needsUpdate\",{set:function(a){!0===a&&this.version++}});Object.assign(N.prototype,na.prototype,{constructor:N,isTexture:!0,clone:function(){return(new this.constructor).copy(this)},copy:function(a){this.name=a.name;this.image=\na.image;this.mipmaps=a.mipmaps.slice(0);this.mapping=a.mapping;this.wrapS=a.wrapS;this.wrapT=a.wrapT;this.magFilter=a.magFilter;this.minFilter=a.minFilter;this.anisotropy=a.anisotropy;this.format=a.format;this.type=a.type;this.offset.copy(a.offset);this.repeat.copy(a.repeat);this.generateMipmaps=a.generateMipmaps;this.premultiplyAlpha=a.premultiplyAlpha;this.flipY=a.flipY;this.unpackAlignment=a.unpackAlignment;this.encoding=a.encoding;return this},toJSON:function(a){if(void 0!==a.textures[this.uuid])return a.textures[this.uuid];\nvar b={metadata:{version:4.5,type:\"Texture\",generator:\"Texture.toJSON\"},uuid:this.uuid,name:this.name,mapping:this.mapping,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],wrap:[this.wrapS,this.wrapT],minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY};if(void 0!==this.image){var c=this.image;void 0===c.uuid&&(c.uuid=R.generateUUID());if(void 0===a.images[c.uuid]){var d=a.images,e=c.uuid,f=c.uuid;if(c instanceof HTMLCanvasElement)var g=\nc;else{g=document.createElementNS(\"http://www.w3.org/1999/xhtml\",\"canvas\");g.width=c.width;g.height=c.height;var h=g.getContext(\"2d\");c instanceof ImageData?h.putImageData(c,0,0):h.drawImage(c,0,0,c.width,c.height)}g=2048<g.width||2048<g.height?g.toDataURL(\"image/jpeg\",.6):g.toDataURL(\"image/png\");d[e]={uuid:f,url:g}}b.image=c.uuid}return a.textures[this.uuid]=b},dispose:function(){this.dispatchEvent({type:\"dispose\"})},transformUv:function(a){if(300===this.mapping){a.multiply(this.repeat);a.add(this.offset);\nif(0>a.x||1<a.x)switch(this.wrapS){case 1E3:a.x-=Math.floor(a.x);break;case 1001:a.x=0>a.x?0:1;break;case 1002:a.x=1===Math.abs(Math.floor(a.x)%2)?Math.ceil(a.x)-a.x:a.x-Math.floor(a.x)}if(0>a.y||1<a.y)switch(this.wrapT){case 1E3:a.y-=Math.floor(a.y);break;case 1001:a.y=0>a.y?0:1;break;case 1002:a.y=1===Math.abs(Math.floor(a.y)%2)?Math.ceil(a.y)-a.y:a.y-Math.floor(a.y)}this.flipY&&(a.y=1-a.y)}}});Object.assign(S.prototype,{isVector4:!0,set:function(a,b,c,d){this.x=a;this.y=b;this.z=c;this.w=d;return this},\nsetScalar:function(a){this.w=this.z=this.y=this.x=a;return this},setX:function(a){this.x=a;return this},setY:function(a){this.y=a;return this},setZ:function(a){this.z=a;return this},setW:function(a){this.w=a;return this},setComponent:function(a,b){switch(a){case 0:this.x=b;break;case 1:this.y=b;break;case 2:this.z=b;break;case 3:this.w=b;break;default:throw Error(\"index is out of range: \"+a);}return this},getComponent:function(a){switch(a){case 0:return this.x;case 1:return this.y;case 2:return this.z;\ncase 3:return this.w;default:throw Error(\"index is out of range: \"+a);}},clone:function(){return new this.constructor(this.x,this.y,this.z,this.w)},copy:function(a){this.x=a.x;this.y=a.y;this.z=a.z;this.w=void 0!==a.w?a.w:1;return this},add:function(a,b){if(void 0!==b)return console.warn(\"THREE.Vector4: .add() now only accepts one argument. Use .addVectors( a, b ) instead.\"),this.addVectors(a,b);this.x+=a.x;this.y+=a.y;this.z+=a.z;this.w+=a.w;return this},addScalar:function(a){this.x+=a;this.y+=a;\nthis.z+=a;this.w+=a;return this},addVectors:function(a,b){this.x=a.x+b.x;this.y=a.y+b.y;this.z=a.z+b.z;this.w=a.w+b.w;return this},addScaledVector:function(a,b){this.x+=a.x*b;this.y+=a.y*b;this.z+=a.z*b;this.w+=a.w*b;return this},sub:function(a,b){if(void 0!==b)return console.warn(\"THREE.Vector4: .sub() now only accepts one argument. Use .subVectors( a, b ) instead.\"),this.subVectors(a,b);this.x-=a.x;this.y-=a.y;this.z-=a.z;this.w-=a.w;return this},subScalar:function(a){this.x-=a;this.y-=a;this.z-=\na;this.w-=a;return this},subVectors:function(a,b){this.x=a.x-b.x;this.y=a.y-b.y;this.z=a.z-b.z;this.w=a.w-b.w;return this},multiplyScalar:function(a){this.x*=a;this.y*=a;this.z*=a;this.w*=a;return this},applyMatrix4:function(a){var b=this.x,c=this.y,d=this.z,e=this.w;a=a.elements;this.x=a[0]*b+a[4]*c+a[8]*d+a[12]*e;this.y=a[1]*b+a[5]*c+a[9]*d+a[13]*e;this.z=a[2]*b+a[6]*c+a[10]*d+a[14]*e;this.w=a[3]*b+a[7]*c+a[11]*d+a[15]*e;return this},divideScalar:function(a){return this.multiplyScalar(1/a)},setAxisAngleFromQuaternion:function(a){this.w=\n2*Math.acos(a.w);var b=Math.sqrt(1-a.w*a.w);1E-4>b?(this.x=1,this.z=this.y=0):(this.x=a.x/b,this.y=a.y/b,this.z=a.z/b);return this},setAxisAngleFromRotationMatrix:function(a){a=a.elements;var b=a[0];var c=a[4];var d=a[8],e=a[1],f=a[5],g=a[9];var h=a[2];var k=a[6];var l=a[10];if(.01>Math.abs(c-e)&&.01>Math.abs(d-h)&&.01>Math.abs(g-k)){if(.1>Math.abs(c+e)&&.1>Math.abs(d+h)&&.1>Math.abs(g+k)&&.1>Math.abs(b+f+l-3))return this.set(1,0,0,0),this;a=Math.PI;b=(b+1)/2;f=(f+1)/2;l=(l+1)/2;c=(c+e)/4;d=(d+h)/\n4;g=(g+k)/4;b>f&&b>l?.01>b?(k=0,c=h=.707106781):(k=Math.sqrt(b),h=c/k,c=d/k):f>l?.01>f?(k=.707106781,h=0,c=.707106781):(h=Math.sqrt(f),k=c/h,c=g/h):.01>l?(h=k=.707106781,c=0):(c=Math.sqrt(l),k=d/c,h=g/c);this.set(k,h,c,a);return this}a=Math.sqrt((k-g)*(k-g)+(d-h)*(d-h)+(e-c)*(e-c));.001>Math.abs(a)&&(a=1);this.x=(k-g)/a;this.y=(d-h)/a;this.z=(e-c)/a;this.w=Math.acos((b+f+l-1)/2);return this},min:function(a){this.x=Math.min(this.x,a.x);this.y=Math.min(this.y,a.y);this.z=Math.min(this.z,a.z);this.w=\nMath.min(this.w,a.w);return this},max:function(a){this.x=Math.max(this.x,a.x);this.y=Math.max(this.y,a.y);this.z=Math.max(this.z,a.z);this.w=Math.max(this.w,a.w);return this},clamp:function(a,b){this.x=Math.max(a.x,Math.min(b.x,this.x));this.y=Math.max(a.y,Math.min(b.y,this.y));this.z=Math.max(a.z,Math.min(b.z,this.z));this.w=Math.max(a.w,Math.min(b.w,this.w));return this},clampScalar:function(){var a,b;return function(c,d){void 0===a&&(a=new S,b=new S);a.set(c,c,c,c);b.set(d,d,d,d);return this.clamp(a,\nb)}}(),clampLength:function(a,b){var c=this.length();return this.divideScalar(c||1).multiplyScalar(Math.max(a,Math.min(b,c)))},floor:function(){this.x=Math.floor(this.x);this.y=Math.floor(this.y);this.z=Math.floor(this.z);this.w=Math.floor(this.w);return this},ceil:function(){this.x=Math.ceil(this.x);this.y=Math.ceil(this.y);this.z=Math.ceil(this.z);this.w=Math.ceil(this.w);return this},round:function(){this.x=Math.round(this.x);this.y=Math.round(this.y);this.z=Math.round(this.z);this.w=Math.round(this.w);\nreturn this},roundToZero:function(){this.x=0>this.x?Math.ceil(this.x):Math.floor(this.x);this.y=0>this.y?Math.ceil(this.y):Math.floor(this.y);this.z=0>this.z?Math.ceil(this.z):Math.floor(this.z);this.w=0>this.w?Math.ceil(this.w):Math.floor(this.w);return this},negate:function(){this.x=-this.x;this.y=-this.y;this.z=-this.z;this.w=-this.w;return this},dot:function(a){return this.x*a.x+this.y*a.y+this.z*a.z+this.w*a.w},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w},\nlength:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)},lengthManhattan:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)},normalize:function(){return this.divideScalar(this.length()||1)},setLength:function(a){return this.normalize().multiplyScalar(a)},lerp:function(a,b){this.x+=(a.x-this.x)*b;this.y+=(a.y-this.y)*b;this.z+=(a.z-this.z)*b;this.w+=(a.w-this.w)*b;return this},lerpVectors:function(a,b,c){return this.subVectors(b,\na).multiplyScalar(c).add(a)},equals:function(a){return a.x===this.x&&a.y===this.y&&a.z===this.z&&a.w===this.w},fromArray:function(a,b){void 0===b&&(b=0);this.x=a[b];this.y=a[b+1];this.z=a[b+2];this.w=a[b+3];return this},toArray:function(a,b){void 0===a&&(a=[]);void 0===b&&(b=0);a[b]=this.x;a[b+1]=this.y;a[b+2]=this.z;a[b+3]=this.w;return a},fromBufferAttribute:function(a,b,c){void 0!==c&&console.warn(\"THREE.Vector4: offset has been removed from .fromBufferAttribute().\");this.x=a.getX(b);this.y=a.getY(b);\nthis.z=a.getZ(b);this.w=a.getW(b);return this}});Object.assign(Ab.prototype,na.prototype,{isWebGLRenderTarget:!0,setSize:function(a,b){if(this.width!==a||this.height!==b)this.width=a,this.height=b,this.dispose();this.viewport.set(0,0,a,b);this.scissor.set(0,0,a,b)},clone:function(){return(new this.constructor).copy(this)},copy:function(a){this.width=a.width;this.height=a.height;this.viewport.copy(a.viewport);this.texture=a.texture.clone();this.depthBuffer=a.depthBuffer;this.stencilBuffer=a.stencilBuffer;\nthis.depthTexture=a.depthTexture;return this},dispose:function(){this.dispatchEvent({type:\"dispose\"})}});Bb.prototype=Object.create(Ab.prototype);Bb.prototype.constructor=Bb;Bb.prototype.isWebGLRenderTargetCube=!0;Object.assign(ia,{slerp:function(a,b,c,d){return c.copy(a).slerp(b,d)},slerpFlat:function(a,b,c,d,e,f,g){var h=c[d+0],k=c[d+1],l=c[d+2];c=c[d+3];d=e[f+0];var q=e[f+1],p=e[f+2];e=e[f+3];if(c!==e||h!==d||k!==q||l!==p){f=1-g;var m=h*d+k*q+l*p+c*e,r=0<=m?1:-1,n=1-m*m;n>Number.EPSILON&&(n=Math.sqrt(n),\nm=Math.atan2(n,m*r),f=Math.sin(f*m)/n,g=Math.sin(g*m)/n);r*=g;h=h*f+d*r;k=k*f+q*r;l=l*f+p*r;c=c*f+e*r;f===1-g&&(g=1/Math.sqrt(h*h+k*k+l*l+c*c),h*=g,k*=g,l*=g,c*=g)}a[b]=h;a[b+1]=k;a[b+2]=l;a[b+3]=c}});Object.defineProperties(ia.prototype,{x:{get:function(){return this._x},set:function(a){this._x=a;this.onChangeCallback()}},y:{get:function(){return this._y},set:function(a){this._y=a;this.onChangeCallback()}},z:{get:function(){return this._z},set:function(a){this._z=a;this.onChangeCallback()}},w:{get:function(){return this._w},\nset:function(a){this._w=a;this.onChangeCallback()}}});Object.assign(ia.prototype,{set:function(a,b,c,d){this._x=a;this._y=b;this._z=c;this._w=d;this.onChangeCallback();return this},clone:function(){return new this.constructor(this._x,this._y,this._z,this._w)},copy:function(a){this._x=a.x;this._y=a.y;this._z=a.z;this._w=a.w;this.onChangeCallback();return this},setFromEuler:function(a,b){if(!a||!a.isEuler)throw Error(\"THREE.Quaternion: .setFromEuler() now expects an Euler rotation rather than a Vector3 and order.\");\nvar c=a._x,d=a._y,e=a._z;a=a.order;var f=Math.cos,g=Math.sin,h=f(c/2),k=f(d/2),f=f(e/2),c=g(c/2),d=g(d/2),e=g(e/2);\"XYZ\"===a?(this._x=c*k*f+h*d*e,this._y=h*d*f-c*k*e,this._z=h*k*e+c*d*f,this._w=h*k*f-c*d*e):\"YXZ\"===a?(this._x=c*k*f+h*d*e,this._y=h*d*f-c*k*e,this._z=h*k*e-c*d*f,this._w=h*k*f+c*d*e):\"ZXY\"===a?(this._x=c*k*f-h*d*e,this._y=h*d*f+c*k*e,this._z=h*k*e+c*d*f,this._w=h*k*f-c*d*e):\"ZYX\"===a?(this._x=c*k*f-h*d*e,this._y=h*d*f+c*k*e,this._z=h*k*e-c*d*f,this._w=h*k*f+c*d*e):\"YZX\"===a?(this._x=\nc*k*f+h*d*e,this._y=h*d*f+c*k*e,this._z=h*k*e-c*d*f,this._w=h*k*f-c*d*e):\"XZY\"===a&&(this._x=c*k*f-h*d*e,this._y=h*d*f-c*k*e,this._z=h*k*e+c*d*f,this._w=h*k*f+c*d*e);if(!1!==b)this.onChangeCallback();return this},setFromAxisAngle:function(a,b){b/=2;var c=Math.sin(b);this._x=a.x*c;this._y=a.y*c;this._z=a.z*c;this._w=Math.cos(b);this.onChangeCallback();return this},setFromRotationMatrix:function(a){var b=a.elements,c=b[0];a=b[4];var d=b[8],e=b[1],f=b[5],g=b[9],h=b[2],k=b[6],b=b[10],l=c+f+b;0<l?(c=.5/\nMath.sqrt(l+1),this._w=.25/c,this._x=(k-g)*c,this._y=(d-h)*c,this._z=(e-a)*c):c>f&&c>b?(c=2*Math.sqrt(1+c-f-b),this._w=(k-g)/c,this._x=.25*c,this._y=(a+e)/c,this._z=(d+h)/c):f>b?(c=2*Math.sqrt(1+f-c-b),this._w=(d-h)/c,this._x=(a+e)/c,this._y=.25*c,this._z=(g+k)/c):(c=2*Math.sqrt(1+b-c-f),this._w=(e-a)/c,this._x=(d+h)/c,this._y=(g+k)/c,this._z=.25*c);this.onChangeCallback();return this},setFromUnitVectors:function(){var a=new n,b;return function(c,d){void 0===a&&(a=new n);b=c.dot(d)+1;1E-6>b?(b=0,\nMath.abs(c.x)>Math.abs(c.z)?a.set(-c.y,c.x,0):a.set(0,-c.z,c.y)):a.crossVectors(c,d);this._x=a.x;this._y=a.y;this._z=a.z;this._w=b;return this.normalize()}}(),inverse:function(){return this.conjugate().normalize()},conjugate:function(){this._x*=-1;this._y*=-1;this._z*=-1;this.onChangeCallback();return this},dot:function(a){return this._x*a._x+this._y*a._y+this._z*a._z+this._w*a._w},lengthSq:function(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w},length:function(){return Math.sqrt(this._x*\nthis._x+this._y*this._y+this._z*this._z+this._w*this._w)},normalize:function(){var a=this.length();0===a?(this._z=this._y=this._x=0,this._w=1):(a=1/a,this._x*=a,this._y*=a,this._z*=a,this._w*=a);this.onChangeCallback();return this},multiply:function(a,b){return void 0!==b?(console.warn(\"THREE.Quaternion: .multiply() now only accepts one argument. Use .multiplyQuaternions( a, b ) instead.\"),this.multiplyQuaternions(a,b)):this.multiplyQuaternions(this,a)},premultiply:function(a){return this.multiplyQuaternions(a,\nthis)},multiplyQuaternions:function(a,b){var c=a._x,d=a._y,e=a._z;a=a._w;var f=b._x,g=b._y,h=b._z;b=b._w;this._x=c*b+a*f+d*h-e*g;this._y=d*b+a*g+e*f-c*h;this._z=e*b+a*h+c*g-d*f;this._w=a*b-c*f-d*g-e*h;this.onChangeCallback();return this},slerp:function(a,b){if(0===b)return this;if(1===b)return this.copy(a);var c=this._x,d=this._y,e=this._z,f=this._w,g=f*a._w+c*a._x+d*a._y+e*a._z;0>g?(this._w=-a._w,this._x=-a._x,this._y=-a._y,this._z=-a._z,g=-g):this.copy(a);if(1<=g)return this._w=f,this._x=c,this._y=\nd,this._z=e,this;a=Math.sqrt(1-g*g);if(.001>Math.abs(a))return this._w=.5*(f+this._w),this._x=.5*(c+this._x),this._y=.5*(d+this._y),this._z=.5*(e+this._z),this;var h=Math.atan2(a,g),g=Math.sin((1-b)*h)/a;b=Math.sin(b*h)/a;this._w=f*g+this._w*b;this._x=c*g+this._x*b;this._y=d*g+this._y*b;this._z=e*g+this._z*b;this.onChangeCallback();return this},equals:function(a){return a._x===this._x&&a._y===this._y&&a._z===this._z&&a._w===this._w},fromArray:function(a,b){void 0===b&&(b=0);this._x=a[b];this._y=a[b+\n1];this._z=a[b+2];this._w=a[b+3];this.onChangeCallback();return this},toArray:function(a,b){void 0===a&&(a=[]);void 0===b&&(b=0);a[b]=this._x;a[b+1]=this._y;a[b+2]=this._z;a[b+3]=this._w;return a},onChange:function(a){this.onChangeCallback=a;return this},onChangeCallback:function(){}});Object.assign(n.prototype,{isVector3:!0,set:function(a,b,c){this.x=a;this.y=b;this.z=c;return this},setScalar:function(a){this.z=this.y=this.x=a;return this},setX:function(a){this.x=a;return this},setY:function(a){this.y=\na;return this},setZ:function(a){this.z=a;return this},setComponent:function(a,b){switch(a){case 0:this.x=b;break;case 1:this.y=b;break;case 2:this.z=b;break;default:throw Error(\"index is out of range: \"+a);}return this},getComponent:function(a){switch(a){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw Error(\"index is out of range: \"+a);}},clone:function(){return new this.constructor(this.x,this.y,this.z)},copy:function(a){this.x=a.x;this.y=a.y;this.z=a.z;return this},\nadd:function(a,b){if(void 0!==b)return console.warn(\"THREE.Vector3: .add() now only accepts one argument. Use .addVectors( a, b ) instead.\"),this.addVectors(a,b);this.x+=a.x;this.y+=a.y;this.z+=a.z;return this},addScalar:function(a){this.x+=a;this.y+=a;this.z+=a;return this},addVectors:function(a,b){this.x=a.x+b.x;this.y=a.y+b.y;this.z=a.z+b.z;return this},addScaledVector:function(a,b){this.x+=a.x*b;this.y+=a.y*b;this.z+=a.z*b;return this},sub:function(a,b){if(void 0!==b)return console.warn(\"THREE.Vector3: .sub() now only accepts one argument. Use .subVectors( a, b ) instead.\"),\nthis.subVectors(a,b);this.x-=a.x;this.y-=a.y;this.z-=a.z;return this},subScalar:function(a){this.x-=a;this.y-=a;this.z-=a;return this},subVectors:function(a,b){this.x=a.x-b.x;this.y=a.y-b.y;this.z=a.z-b.z;return this},multiply:function(a,b){if(void 0!==b)return console.warn(\"THREE.Vector3: .multiply() now only accepts one argument. Use .multiplyVectors( a, b ) instead.\"),this.multiplyVectors(a,b);this.x*=a.x;this.y*=a.y;this.z*=a.z;return this},multiplyScalar:function(a){this.x*=a;this.y*=a;this.z*=\na;return this},multiplyVectors:function(a,b){this.x=a.x*b.x;this.y=a.y*b.y;this.z=a.z*b.z;return this},applyEuler:function(){var a=new ia;return function(b){b&&b.isEuler||console.error(\"THREE.Vector3: .applyEuler() now expects an Euler rotation rather than a Vector3 and order.\");return this.applyQuaternion(a.setFromEuler(b))}}(),applyAxisAngle:function(){var a=new ia;return function(b,c){return this.applyQuaternion(a.setFromAxisAngle(b,c))}}(),applyMatrix3:function(a){var b=this.x,c=this.y,d=this.z;\na=a.elements;this.x=a[0]*b+a[3]*c+a[6]*d;this.y=a[1]*b+a[4]*c+a[7]*d;this.z=a[2]*b+a[5]*c+a[8]*d;return this},applyMatrix4:function(a){var b=this.x,c=this.y,d=this.z;a=a.elements;var e=1/(a[3]*b+a[7]*c+a[11]*d+a[15]);this.x=(a[0]*b+a[4]*c+a[8]*d+a[12])*e;this.y=(a[1]*b+a[5]*c+a[9]*d+a[13])*e;this.z=(a[2]*b+a[6]*c+a[10]*d+a[14])*e;return this},applyQuaternion:function(a){var b=this.x,c=this.y,d=this.z,e=a.x,f=a.y,g=a.z;a=a.w;var h=a*b+f*d-g*c,k=a*c+g*b-e*d,l=a*d+e*c-f*b,b=-e*b-f*c-g*d;this.x=h*a+b*\n-e+k*-g-l*-f;this.y=k*a+b*-f+l*-e-h*-g;this.z=l*a+b*-g+h*-f-k*-e;return this},project:function(){var a=new O;return function(b){a.multiplyMatrices(b.projectionMatrix,a.getInverse(b.matrixWorld));return this.applyMatrix4(a)}}(),unproject:function(){var a=new O;return function(b){a.multiplyMatrices(b.matrixWorld,a.getInverse(b.projectionMatrix));return this.applyMatrix4(a)}}(),transformDirection:function(a){var b=this.x,c=this.y,d=this.z;a=a.elements;this.x=a[0]*b+a[4]*c+a[8]*d;this.y=a[1]*b+a[5]*c+\na[9]*d;this.z=a[2]*b+a[6]*c+a[10]*d;return this.normalize()},divide:function(a){this.x/=a.x;this.y/=a.y;this.z/=a.z;return this},divideScalar:function(a){return this.multiplyScalar(1/a)},min:function(a){this.x=Math.min(this.x,a.x);this.y=Math.min(this.y,a.y);this.z=Math.min(this.z,a.z);return this},max:function(a){this.x=Math.max(this.x,a.x);this.y=Math.max(this.y,a.y);this.z=Math.max(this.z,a.z);return this},clamp:function(a,b){this.x=Math.max(a.x,Math.min(b.x,this.x));this.y=Math.max(a.y,Math.min(b.y,\nthis.y));this.z=Math.max(a.z,Math.min(b.z,this.z));return this},clampScalar:function(){var a=new n,b=new n;return function(c,d){a.set(c,c,c);b.set(d,d,d);return this.clamp(a,b)}}(),clampLength:function(a,b){var c=this.length();return this.divideScalar(c||1).multiplyScalar(Math.max(a,Math.min(b,c)))},floor:function(){this.x=Math.floor(this.x);this.y=Math.floor(this.y);this.z=Math.floor(this.z);return this},ceil:function(){this.x=Math.ceil(this.x);this.y=Math.ceil(this.y);this.z=Math.ceil(this.z);return this},\nround:function(){this.x=Math.round(this.x);this.y=Math.round(this.y);this.z=Math.round(this.z);return this},roundToZero:function(){this.x=0>this.x?Math.ceil(this.x):Math.floor(this.x);this.y=0>this.y?Math.ceil(this.y):Math.floor(this.y);this.z=0>this.z?Math.ceil(this.z):Math.floor(this.z);return this},negate:function(){this.x=-this.x;this.y=-this.y;this.z=-this.z;return this},dot:function(a){return this.x*a.x+this.y*a.y+this.z*a.z},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z},\nlength:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)},lengthManhattan:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)},normalize:function(){return this.divideScalar(this.length()||1)},setLength:function(a){return this.normalize().multiplyScalar(a)},lerp:function(a,b){this.x+=(a.x-this.x)*b;this.y+=(a.y-this.y)*b;this.z+=(a.z-this.z)*b;return this},lerpVectors:function(a,b,c){return this.subVectors(b,a).multiplyScalar(c).add(a)},cross:function(a,b){if(void 0!==\nb)return console.warn(\"THREE.Vector3: .cross() now only accepts one argument. Use .crossVectors( a, b ) instead.\"),this.crossVectors(a,b);b=this.x;var c=this.y,d=this.z;this.x=c*a.z-d*a.y;this.y=d*a.x-b*a.z;this.z=b*a.y-c*a.x;return this},crossVectors:function(a,b){var c=a.x,d=a.y;a=a.z;var e=b.x,f=b.y;b=b.z;this.x=d*b-a*f;this.y=a*e-c*b;this.z=c*f-d*e;return this},projectOnVector:function(a){var b=a.dot(this)/a.lengthSq();return this.copy(a).multiplyScalar(b)},projectOnPlane:function(){var a=new n;\nreturn function(b){a.copy(this).projectOnVector(b);return this.sub(a)}}(),reflect:function(){var a=new n;return function(b){return this.sub(a.copy(b).multiplyScalar(2*this.dot(b)))}}(),angleTo:function(a){a=this.dot(a)/Math.sqrt(this.lengthSq()*a.lengthSq());return Math.acos(R.clamp(a,-1,1))},distanceTo:function(a){return Math.sqrt(this.distanceToSquared(a))},distanceToSquared:function(a){var b=this.x-a.x,c=this.y-a.y;a=this.z-a.z;return b*b+c*c+a*a},distanceToManhattan:function(a){return Math.abs(this.x-\na.x)+Math.abs(this.y-a.y)+Math.abs(this.z-a.z)},setFromSpherical:function(a){var b=Math.sin(a.phi)*a.radius;this.x=b*Math.sin(a.theta);this.y=Math.cos(a.phi)*a.radius;this.z=b*Math.cos(a.theta);return this},setFromCylindrical:function(a){this.x=a.radius*Math.sin(a.theta);this.y=a.y;this.z=a.radius*Math.cos(a.theta);return this},setFromMatrixPosition:function(a){a=a.elements;this.x=a[12];this.y=a[13];this.z=a[14];return this},setFromMatrixScale:function(a){var b=this.setFromMatrixColumn(a,0).length(),\nc=this.setFromMatrixColumn(a,1).length();a=this.setFromMatrixColumn(a,2).length();this.x=b;this.y=c;this.z=a;return this},setFromMatrixColumn:function(a,b){return this.fromArray(a.elements,4*b)},equals:function(a){return a.x===this.x&&a.y===this.y&&a.z===this.z},fromArray:function(a,b){void 0===b&&(b=0);this.x=a[b];this.y=a[b+1];this.z=a[b+2];return this},toArray:function(a,b){void 0===a&&(a=[]);void 0===b&&(b=0);a[b]=this.x;a[b+1]=this.y;a[b+2]=this.z;return a},fromBufferAttribute:function(a,b,c){void 0!==\nc&&console.warn(\"THREE.Vector3: offset has been removed from .fromBufferAttribute().\");this.x=a.getX(b);this.y=a.getY(b);this.z=a.getZ(b);return this}});Object.assign(O.prototype,{isMatrix4:!0,set:function(a,b,c,d,e,f,g,h,k,l,q,p,m,r,n,u){var t=this.elements;t[0]=a;t[4]=b;t[8]=c;t[12]=d;t[1]=e;t[5]=f;t[9]=g;t[13]=h;t[2]=k;t[6]=l;t[10]=q;t[14]=p;t[3]=m;t[7]=r;t[11]=n;t[15]=u;return this},identity:function(){this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1);return this},clone:function(){return(new O).fromArray(this.elements)},\ncopy:function(a){var b=this.elements;a=a.elements;b[0]=a[0];b[1]=a[1];b[2]=a[2];b[3]=a[3];b[4]=a[4];b[5]=a[5];b[6]=a[6];b[7]=a[7];b[8]=a[8];b[9]=a[9];b[10]=a[10];b[11]=a[11];b[12]=a[12];b[13]=a[13];b[14]=a[14];b[15]=a[15];return this},copyPosition:function(a){var b=this.elements;a=a.elements;b[12]=a[12];b[13]=a[13];b[14]=a[14];return this},extractBasis:function(a,b,c){a.setFromMatrixColumn(this,0);b.setFromMatrixColumn(this,1);c.setFromMatrixColumn(this,2);return this},makeBasis:function(a,b,c){this.set(a.x,\nb.x,c.x,0,a.y,b.y,c.y,0,a.z,b.z,c.z,0,0,0,0,1);return this},extractRotation:function(){var a=new n;return function(b){var c=this.elements,d=b.elements,e=1/a.setFromMatrixColumn(b,0).length(),f=1/a.setFromMatrixColumn(b,1).length();b=1/a.setFromMatrixColumn(b,2).length();c[0]=d[0]*e;c[1]=d[1]*e;c[2]=d[2]*e;c[4]=d[4]*f;c[5]=d[5]*f;c[6]=d[6]*f;c[8]=d[8]*b;c[9]=d[9]*b;c[10]=d[10]*b;return this}}(),makeRotationFromEuler:function(a){a&&a.isEuler||console.error(\"THREE.Matrix4: .makeRotationFromEuler() now expects a Euler rotation rather than a Vector3 and order.\");\nvar b=this.elements,c=a.x,d=a.y,e=a.z,f=Math.cos(c),c=Math.sin(c),g=Math.cos(d),d=Math.sin(d),h=Math.cos(e),e=Math.sin(e);if(\"XYZ\"===a.order){var k=f*h;var l=f*e;var q=c*h;a=c*e;b[0]=g*h;b[4]=-g*e;b[8]=d;b[1]=l+q*d;b[5]=k-a*d;b[9]=-c*g;b[2]=a-k*d;b[6]=q+l*d;b[10]=f*g}else\"YXZ\"===a.order?(k=g*h,l=g*e,q=d*h,a=d*e,b[0]=k+a*c,b[4]=q*c-l,b[8]=f*d,b[1]=f*e,b[5]=f*h,b[9]=-c,b[2]=l*c-q,b[6]=a+k*c,b[10]=f*g):\"ZXY\"===a.order?(k=g*h,l=g*e,q=d*h,a=d*e,b[0]=k-a*c,b[4]=-f*e,b[8]=q+l*c,b[1]=l+q*c,b[5]=f*h,b[9]=\na-k*c,b[2]=-f*d,b[6]=c,b[10]=f*g):\"ZYX\"===a.order?(k=f*h,l=f*e,q=c*h,a=c*e,b[0]=g*h,b[4]=q*d-l,b[8]=k*d+a,b[1]=g*e,b[5]=a*d+k,b[9]=l*d-q,b[2]=-d,b[6]=c*g,b[10]=f*g):\"YZX\"===a.order?(k=f*g,l=f*d,q=c*g,a=c*d,b[0]=g*h,b[4]=a-k*e,b[8]=q*e+l,b[1]=e,b[5]=f*h,b[9]=-c*h,b[2]=-d*h,b[6]=l*e+q,b[10]=k-a*e):\"XZY\"===a.order&&(k=f*g,l=f*d,q=c*g,a=c*d,b[0]=g*h,b[4]=-e,b[8]=d*h,b[1]=k*e+a,b[5]=f*h,b[9]=l*e-q,b[2]=q*e-l,b[6]=c*h,b[10]=a*e+k);b[3]=0;b[7]=0;b[11]=0;b[12]=0;b[13]=0;b[14]=0;b[15]=1;return this},makeRotationFromQuaternion:function(a){var b=\nthis.elements,c=a._x,d=a._y,e=a._z,f=a._w,g=c+c,h=d+d,k=e+e;a=c*g;var l=c*h,c=c*k,q=d*h,d=d*k,e=e*k,g=f*g,h=f*h,f=f*k;b[0]=1-(q+e);b[4]=l-f;b[8]=c+h;b[1]=l+f;b[5]=1-(a+e);b[9]=d-g;b[2]=c-h;b[6]=d+g;b[10]=1-(a+q);b[3]=0;b[7]=0;b[11]=0;b[12]=0;b[13]=0;b[14]=0;b[15]=1;return this},lookAt:function(){var a=new n,b=new n,c=new n;return function(d,e,f){var g=this.elements;c.subVectors(d,e);0===c.lengthSq()&&(c.z=1);c.normalize();a.crossVectors(f,c);0===a.lengthSq()&&(1===Math.abs(f.z)?c.x+=1E-4:c.z+=1E-4,\nc.normalize(),a.crossVectors(f,c));a.normalize();b.crossVectors(c,a);g[0]=a.x;g[4]=b.x;g[8]=c.x;g[1]=a.y;g[5]=b.y;g[9]=c.y;g[2]=a.z;g[6]=b.z;g[10]=c.z;return this}}(),multiply:function(a,b){return void 0!==b?(console.warn(\"THREE.Matrix4: .multiply() now only accepts one argument. Use .multiplyMatrices( a, b ) instead.\"),this.multiplyMatrices(a,b)):this.multiplyMatrices(this,a)},premultiply:function(a){return this.multiplyMatrices(a,this)},multiplyMatrices:function(a,b){var c=a.elements,d=b.elements;\nb=this.elements;a=c[0];var e=c[4],f=c[8],g=c[12],h=c[1],k=c[5],l=c[9],q=c[13],p=c[2],m=c[6],r=c[10],n=c[14],u=c[3],x=c[7],y=c[11],c=c[15],A=d[0],I=d[4],B=d[8],H=d[12],w=d[1],z=d[5],D=d[9],C=d[13],F=d[2],L=d[6],J=d[10],K=d[14],ga=d[3],M=d[7],T=d[11],d=d[15];b[0]=a*A+e*w+f*F+g*ga;b[4]=a*I+e*z+f*L+g*M;b[8]=a*B+e*D+f*J+g*T;b[12]=a*H+e*C+f*K+g*d;b[1]=h*A+k*w+l*F+q*ga;b[5]=h*I+k*z+l*L+q*M;b[9]=h*B+k*D+l*J+q*T;b[13]=h*H+k*C+l*K+q*d;b[2]=p*A+m*w+r*F+n*ga;b[6]=p*I+m*z+r*L+n*M;b[10]=p*B+m*D+r*J+n*T;b[14]=p*\nH+m*C+r*K+n*d;b[3]=u*A+x*w+y*F+c*ga;b[7]=u*I+x*z+y*L+c*M;b[11]=u*B+x*D+y*J+c*T;b[15]=u*H+x*C+y*K+c*d;return this},multiplyScalar:function(a){var b=this.elements;b[0]*=a;b[4]*=a;b[8]*=a;b[12]*=a;b[1]*=a;b[5]*=a;b[9]*=a;b[13]*=a;b[2]*=a;b[6]*=a;b[10]*=a;b[14]*=a;b[3]*=a;b[7]*=a;b[11]*=a;b[15]*=a;return this},applyToBufferAttribute:function(){var a=new n;return function(b){for(var c=0,d=b.count;c<d;c++)a.x=b.getX(c),a.y=b.getY(c),a.z=b.getZ(c),a.applyMatrix4(this),b.setXYZ(c,a.x,a.y,a.z);return b}}(),\ndeterminant:function(){var a=this.elements,b=a[0],c=a[4],d=a[8],e=a[12],f=a[1],g=a[5],h=a[9],k=a[13],l=a[2],q=a[6],p=a[10],m=a[14];return a[3]*(+e*h*q-d*k*q-e*g*p+c*k*p+d*g*m-c*h*m)+a[7]*(+b*h*m-b*k*p+e*f*p-d*f*m+d*k*l-e*h*l)+a[11]*(+b*k*q-b*g*m-e*f*q+c*f*m+e*g*l-c*k*l)+a[15]*(-d*g*l-b*h*q+b*g*p+d*f*q-c*f*p+c*h*l)},transpose:function(){var a=this.elements;var b=a[1];a[1]=a[4];a[4]=b;b=a[2];a[2]=a[8];a[8]=b;b=a[6];a[6]=a[9];a[9]=b;b=a[3];a[3]=a[12];a[12]=b;b=a[7];a[7]=a[13];a[13]=b;b=a[11];a[11]=a[14];\na[14]=b;return this},setPosition:function(a){var b=this.elements;b[12]=a.x;b[13]=a.y;b[14]=a.z;return this},getInverse:function(a,b){var c=this.elements,d=a.elements;a=d[0];var e=d[1],f=d[2],g=d[3],h=d[4],k=d[5],l=d[6],q=d[7],p=d[8],m=d[9],r=d[10],n=d[11],u=d[12],x=d[13],y=d[14],d=d[15],A=m*y*q-x*r*q+x*l*n-k*y*n-m*l*d+k*r*d,I=u*r*q-p*y*q-u*l*n+h*y*n+p*l*d-h*r*d,B=p*x*q-u*m*q+u*k*n-h*x*n-p*k*d+h*m*d,H=u*m*l-p*x*l-u*k*r+h*x*r+p*k*y-h*m*y,w=a*A+e*I+f*B+g*H;if(0===w){if(!0===b)throw Error(\"THREE.Matrix4: .getInverse() can't invert matrix, determinant is 0\");\nconsole.warn(\"THREE.Matrix4: .getInverse() can't invert matrix, determinant is 0\");return this.identity()}b=1/w;c[0]=A*b;c[1]=(x*r*g-m*y*g-x*f*n+e*y*n+m*f*d-e*r*d)*b;c[2]=(k*y*g-x*l*g+x*f*q-e*y*q-k*f*d+e*l*d)*b;c[3]=(m*l*g-k*r*g-m*f*q+e*r*q+k*f*n-e*l*n)*b;c[4]=I*b;c[5]=(p*y*g-u*r*g+u*f*n-a*y*n-p*f*d+a*r*d)*b;c[6]=(u*l*g-h*y*g-u*f*q+a*y*q+h*f*d-a*l*d)*b;c[7]=(h*r*g-p*l*g+p*f*q-a*r*q-h*f*n+a*l*n)*b;c[8]=B*b;c[9]=(u*m*g-p*x*g-u*e*n+a*x*n+p*e*d-a*m*d)*b;c[10]=(h*x*g-u*k*g+u*e*q-a*x*q-h*e*d+a*k*d)*b;c[11]=\n(p*k*g-h*m*g-p*e*q+a*m*q+h*e*n-a*k*n)*b;c[12]=H*b;c[13]=(p*x*f-u*m*f+u*e*r-a*x*r-p*e*y+a*m*y)*b;c[14]=(u*k*f-h*x*f-u*e*l+a*x*l+h*e*y-a*k*y)*b;c[15]=(h*m*f-p*k*f+p*e*l-a*m*l-h*e*r+a*k*r)*b;return this},scale:function(a){var b=this.elements,c=a.x,d=a.y;a=a.z;b[0]*=c;b[4]*=d;b[8]*=a;b[1]*=c;b[5]*=d;b[9]*=a;b[2]*=c;b[6]*=d;b[10]*=a;b[3]*=c;b[7]*=d;b[11]*=a;return this},getMaxScaleOnAxis:function(){var a=this.elements;return Math.sqrt(Math.max(a[0]*a[0]+a[1]*a[1]+a[2]*a[2],a[4]*a[4]+a[5]*a[5]+a[6]*a[6],\na[8]*a[8]+a[9]*a[9]+a[10]*a[10]))},makeTranslation:function(a,b,c){this.set(1,0,0,a,0,1,0,b,0,0,1,c,0,0,0,1);return this},makeRotationX:function(a){var b=Math.cos(a);a=Math.sin(a);this.set(1,0,0,0,0,b,-a,0,0,a,b,0,0,0,0,1);return this},makeRotationY:function(a){var b=Math.cos(a);a=Math.sin(a);this.set(b,0,a,0,0,1,0,0,-a,0,b,0,0,0,0,1);return this},makeRotationZ:function(a){var b=Math.cos(a);a=Math.sin(a);this.set(b,-a,0,0,a,b,0,0,0,0,1,0,0,0,0,1);return this},makeRotationAxis:function(a,b){var c=\nMath.cos(b);b=Math.sin(b);var d=1-c,e=a.x,f=a.y;a=a.z;var g=d*e,h=d*f;this.set(g*e+c,g*f-b*a,g*a+b*f,0,g*f+b*a,h*f+c,h*a-b*e,0,g*a-b*f,h*a+b*e,d*a*a+c,0,0,0,0,1);return this},makeScale:function(a,b,c){this.set(a,0,0,0,0,b,0,0,0,0,c,0,0,0,0,1);return this},makeShear:function(a,b,c){this.set(1,b,c,0,a,1,c,0,a,b,1,0,0,0,0,1);return this},compose:function(a,b,c){this.makeRotationFromQuaternion(b);this.scale(c);this.setPosition(a);return this},decompose:function(){var a=new n,b=new O;return function(c,\nd,e){var f=this.elements,g=a.set(f[0],f[1],f[2]).length(),h=a.set(f[4],f[5],f[6]).length(),k=a.set(f[8],f[9],f[10]).length();0>this.determinant()&&(g=-g);c.x=f[12];c.y=f[13];c.z=f[14];b.copy(this);c=1/g;var f=1/h,l=1/k;b.elements[0]*=c;b.elements[1]*=c;b.elements[2]*=c;b.elements[4]*=f;b.elements[5]*=f;b.elements[6]*=f;b.elements[8]*=l;b.elements[9]*=l;b.elements[10]*=l;d.setFromRotationMatrix(b);e.x=g;e.y=h;e.z=k;return this}}(),makePerspective:function(a,b,c,d,e,f){void 0===f&&console.warn(\"THREE.Matrix4: .makePerspective() has been redefined and has a new signature. Please check the docs.\");\nvar g=this.elements;g[0]=2*e/(b-a);g[4]=0;g[8]=(b+a)/(b-a);g[12]=0;g[1]=0;g[5]=2*e/(c-d);g[9]=(c+d)/(c-d);g[13]=0;g[2]=0;g[6]=0;g[10]=-(f+e)/(f-e);g[14]=-2*f*e/(f-e);g[3]=0;g[7]=0;g[11]=-1;g[15]=0;return this},makeOrthographic:function(a,b,c,d,e,f){var g=this.elements,h=1/(b-a),k=1/(c-d),l=1/(f-e);g[0]=2*h;g[4]=0;g[8]=0;g[12]=-((b+a)*h);g[1]=0;g[5]=2*k;g[9]=0;g[13]=-((c+d)*k);g[2]=0;g[6]=0;g[10]=-2*l;g[14]=-((f+e)*l);g[3]=0;g[7]=0;g[11]=0;g[15]=1;return this},equals:function(a){var b=this.elements;\na=a.elements;for(var c=0;16>c;c++)if(b[c]!==a[c])return!1;return!0},fromArray:function(a,b){void 0===b&&(b=0);for(var c=0;16>c;c++)this.elements[c]=a[c+b];return this},toArray:function(a,b){void 0===a&&(a=[]);void 0===b&&(b=0);var c=this.elements;a[b]=c[0];a[b+1]=c[1];a[b+2]=c[2];a[b+3]=c[3];a[b+4]=c[4];a[b+5]=c[5];a[b+6]=c[6];a[b+7]=c[7];a[b+8]=c[8];a[b+9]=c[9];a[b+10]=c[10];a[b+11]=c[11];a[b+12]=c[12];a[b+13]=c[13];a[b+14]=c[14];a[b+15]=c[15];return a}});bb.prototype=Object.create(N.prototype);\nbb.prototype.constructor=bb;bb.prototype.isDataTexture=!0;Va.prototype=Object.create(N.prototype);Va.prototype.constructor=Va;Va.prototype.isCubeTexture=!0;Object.defineProperty(Va.prototype,\"images\",{get:function(){return this.image},set:function(a){this.image=a}});var De=new N,Ee=new Va,ye=[],Ae=[],Ce=new Float32Array(16),Be=new Float32Array(9);Ie.prototype.setValue=function(a,b){for(var c=this.seq,d=0,e=c.length;d!==e;++d){var f=c[d];f.setValue(a,b[f.id])}};var Pd=/([\\w\\d_]+)(\\])?(\\[|\\.)?/g;cb.prototype.setValue=\nfunction(a,b,c){b=this.map[b];void 0!==b&&b.setValue(a,c,this.renderer)};cb.prototype.setOptional=function(a,b,c){b=b[c];void 0!==b&&this.setValue(a,c,b)};cb.upload=function(a,b,c,d){for(var e=0,f=b.length;e!==f;++e){var g=b[e],h=c[g.id];!1!==h.needsUpdate&&g.setValue(a,h.value,d)}};cb.seqWithValue=function(a,b){for(var c=[],d=0,e=a.length;d!==e;++d){var f=a[d];f.id in b&&c.push(f)}return c};var rg={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,\nbisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,\ndarkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,\nlavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,\nmediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,\nplum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,\nyellow:16776960,yellowgreen:10145074};Object.assign(C.prototype,{isColor:!0,r:1,g:1,b:1,set:function(a){a&&a.isColor?this.copy(a):\"number\"===typeof a?this.setHex(a):\"string\"===typeof a&&this.setStyle(a);return this},setScalar:function(a){this.b=this.g=this.r=a;return this},setHex:function(a){a=Math.floor(a);this.r=(a>>16&255)/255;this.g=(a>>8&255)/255;this.b=(a&255)/255;return this},setRGB:function(a,b,c){this.r=a;this.g=b;this.b=c;return this},setHSL:function(){function a(a,c,d){0>d&&(d+=1);1<d&&\n--d;return d<1/6?a+6*(c-a)*d:.5>d?c:d<2/3?a+6*(c-a)*(2/3-d):a}return function(b,c,d){b=R.euclideanModulo(b,1);c=R.clamp(c,0,1);d=R.clamp(d,0,1);0===c?this.r=this.g=this.b=d:(c=.5>=d?d*(1+c):d+c-d*c,d=2*d-c,this.r=a(d,c,b+1/3),this.g=a(d,c,b),this.b=a(d,c,b-1/3));return this}}(),setStyle:function(a){function b(b){void 0!==b&&1>parseFloat(b)&&console.warn(\"THREE.Color: Alpha component of \"+a+\" will be ignored.\")}var c;if(c=/^((?:rgb|hsl)a?)\\(\\s*([^\\)]*)\\)/.exec(a)){var d=c[2];switch(c[1]){case \"rgb\":case \"rgba\":if(c=\n/^(\\d+)\\s*,\\s*(\\d+)\\s*,\\s*(\\d+)\\s*(,\\s*([0-9]*\\.?[0-9]+)\\s*)?$/.exec(d))return this.r=Math.min(255,parseInt(c[1],10))/255,this.g=Math.min(255,parseInt(c[2],10))/255,this.b=Math.min(255,parseInt(c[3],10))/255,b(c[5]),this;if(c=/^(\\d+)\\%\\s*,\\s*(\\d+)\\%\\s*,\\s*(\\d+)\\%\\s*(,\\s*([0-9]*\\.?[0-9]+)\\s*)?$/.exec(d))return this.r=Math.min(100,parseInt(c[1],10))/100,this.g=Math.min(100,parseInt(c[2],10))/100,this.b=Math.min(100,parseInt(c[3],10))/100,b(c[5]),this;break;case \"hsl\":case \"hsla\":if(c=/^([0-9]*\\.?[0-9]+)\\s*,\\s*(\\d+)\\%\\s*,\\s*(\\d+)\\%\\s*(,\\s*([0-9]*\\.?[0-9]+)\\s*)?$/.exec(d)){var d=\nparseFloat(c[1])/360,e=parseInt(c[2],10)/100,f=parseInt(c[3],10)/100;b(c[5]);return this.setHSL(d,e,f)}}}else if(c=/^\\#([A-Fa-f0-9]+)$/.exec(a)){c=c[1];d=c.length;if(3===d)return this.r=parseInt(c.charAt(0)+c.charAt(0),16)/255,this.g=parseInt(c.charAt(1)+c.charAt(1),16)/255,this.b=parseInt(c.charAt(2)+c.charAt(2),16)/255,this;if(6===d)return this.r=parseInt(c.charAt(0)+c.charAt(1),16)/255,this.g=parseInt(c.charAt(2)+c.charAt(3),16)/255,this.b=parseInt(c.charAt(4)+c.charAt(5),16)/255,this}a&&0<a.length&&\n(c=rg[a],void 0!==c?this.setHex(c):console.warn(\"THREE.Color: Unknown color \"+a));return this},clone:function(){return new this.constructor(this.r,this.g,this.b)},copy:function(a){this.r=a.r;this.g=a.g;this.b=a.b;return this},copyGammaToLinear:function(a,b){void 0===b&&(b=2);this.r=Math.pow(a.r,b);this.g=Math.pow(a.g,b);this.b=Math.pow(a.b,b);return this},copyLinearToGamma:function(a,b){void 0===b&&(b=2);b=0<b?1/b:1;this.r=Math.pow(a.r,b);this.g=Math.pow(a.g,b);this.b=Math.pow(a.b,b);return this},\nconvertGammaToLinear:function(){var a=this.r,b=this.g,c=this.b;this.r=a*a;this.g=b*b;this.b=c*c;return this},convertLinearToGamma:function(){this.r=Math.sqrt(this.r);this.g=Math.sqrt(this.g);this.b=Math.sqrt(this.b);return this},getHex:function(){return 255*this.r<<16^255*this.g<<8^255*this.b<<0},getHexString:function(){return(\"000000\"+this.getHex().toString(16)).slice(-6)},getHSL:function(a){a=a||{h:0,s:0,l:0};var b=this.r,c=this.g,d=this.b,e=Math.max(b,c,d),f=Math.min(b,c,d),g,h=(f+e)/2;if(f===\ne)f=g=0;else{var k=e-f,f=.5>=h?k/(e+f):k/(2-e-f);switch(e){case b:g=(c-d)/k+(c<d?6:0);break;case c:g=(d-b)/k+2;break;case d:g=(b-c)/k+4}g/=6}a.h=g;a.s=f;a.l=h;return a},getStyle:function(){return\"rgb(\"+(255*this.r|0)+\",\"+(255*this.g|0)+\",\"+(255*this.b|0)+\")\"},offsetHSL:function(a,b,c){var d=this.getHSL();d.h+=a;d.s+=b;d.l+=c;this.setHSL(d.h,d.s,d.l);return this},add:function(a){this.r+=a.r;this.g+=a.g;this.b+=a.b;return this},addColors:function(a,b){this.r=a.r+b.r;this.g=a.g+b.g;this.b=a.b+b.b;return this},\naddScalar:function(a){this.r+=a;this.g+=a;this.b+=a;return this},sub:function(a){this.r=Math.max(0,this.r-a.r);this.g=Math.max(0,this.g-a.g);this.b=Math.max(0,this.b-a.b);return this},multiply:function(a){this.r*=a.r;this.g*=a.g;this.b*=a.b;return this},multiplyScalar:function(a){this.r*=a;this.g*=a;this.b*=a;return this},lerp:function(a,b){this.r+=(a.r-this.r)*b;this.g+=(a.g-this.g)*b;this.b+=(a.b-this.b)*b;return this},equals:function(a){return a.r===this.r&&a.g===this.g&&a.b===this.b},fromArray:function(a,\nb){void 0===b&&(b=0);this.r=a[b];this.g=a[b+1];this.b=a[b+2];return this},toArray:function(a,b){void 0===a&&(a=[]);void 0===b&&(b=0);a[b]=this.r;a[b+1]=this.g;a[b+2]=this.b;return a},toJSON:function(){return this.getHex()}});var L={common:{diffuse:{value:new C(15658734)},opacity:{value:1},map:{value:null},offsetRepeat:{value:new S(0,0,1,1)},alphaMap:{value:null}},specularmap:{specularMap:{value:null}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},refractionRatio:{value:.98}},\naomap:{aoMap:{value:null},aoMapIntensity:{value:1}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1}},emissivemap:{emissiveMap:{value:null}},bumpmap:{bumpMap:{value:null},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalScale:{value:new D(1,1)}},displacementmap:{displacementMap:{value:null},displacementScale:{value:1},displacementBias:{value:0}},roughnessmap:{roughnessMap:{value:null}},metalnessmap:{metalnessMap:{value:null}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:2.5E-4},\nfogNear:{value:1},fogFar:{value:2E3},fogColor:{value:new C(16777215)}},lights:{ambientLightColor:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{},shadow:{},shadowBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{},shadow:{},shadowBias:{},shadowRadius:{},shadowMapSize:{}}},spotShadowMap:{value:[]},spotShadowMatrix:{value:[]},\npointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{},shadow:{},shadowBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}}},points:{diffuse:{value:new C(15658734)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},offsetRepeat:{value:new S(0,\n0,1,1)}}},Da={merge:function(a){for(var b={},c=0;c<a.length;c++){var d=this.clone(a[c]),e;for(e in d)b[e]=d[e]}return b},clone:function(a){var b={},c;for(c in a){b[c]={};for(var d in a[c]){var e=a[c][d];e&&(e.isColor||e.isMatrix3||e.isMatrix4||e.isVector2||e.isVector3||e.isVector4||e.isTexture)?b[c][d]=e.clone():Array.isArray(e)?b[c][d]=e.slice():b[c][d]=e}}return b}},V={alphamap_fragment:\"#ifdef USE_ALPHAMAP\\n\\tdiffuseColor.a *= texture2D( alphaMap, vUv ).g;\\n#endif\\n\",alphamap_pars_fragment:\"#ifdef USE_ALPHAMAP\\n\\tuniform sampler2D alphaMap;\\n#endif\\n\",\nalphatest_fragment:\"#ifdef ALPHATEST\\n\\tif ( diffuseColor.a < ALPHATEST ) discard;\\n#endif\\n\",aomap_fragment:\"#ifdef USE_AOMAP\\n\\tfloat ambientOcclusion = ( texture2D( aoMap, vUv2 ).r - 1.0 ) * aoMapIntensity + 1.0;\\n\\treflectedLight.indirectDiffuse *= ambientOcclusion;\\n\\t#if defined( USE_ENVMAP ) && defined( PHYSICAL )\\n\\t\\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\\n\\t\\treflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.specularRoughness );\\n\\t#endif\\n#endif\\n\",\naomap_pars_fragment:\"#ifdef USE_AOMAP\\n\\tuniform sampler2D aoMap;\\n\\tuniform float aoMapIntensity;\\n#endif\",begin_vertex:\"\\nvec3 transformed = vec3( position );\\n\",beginnormal_vertex:\"\\nvec3 objectNormal = vec3( normal );\\n\",bsdfs:\"float punctualLightIntensityToIrradianceFactor( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {\\n\\tif( decayExponent > 0.0 ) {\\n#if defined ( PHYSICALLY_CORRECT_LIGHTS )\\n\\t\\tfloat distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );\\n\\t\\tfloat maxDistanceCutoffFactor = pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );\\n\\t\\treturn distanceFalloff * maxDistanceCutoffFactor;\\n#else\\n\\t\\treturn pow( saturate( -lightDistance / cutoffDistance + 1.0 ), decayExponent );\\n#endif\\n\\t}\\n\\treturn 1.0;\\n}\\nvec3 BRDF_Diffuse_Lambert( const in vec3 diffuseColor ) {\\n\\treturn RECIPROCAL_PI * diffuseColor;\\n}\\nvec3 F_Schlick( const in vec3 specularColor, const in float dotLH ) {\\n\\tfloat fresnel = exp2( ( -5.55473 * dotLH - 6.98316 ) * dotLH );\\n\\treturn ( 1.0 - specularColor ) * fresnel + specularColor;\\n}\\nfloat G_GGX_Smith( const in float alpha, const in float dotNL, const in float dotNV ) {\\n\\tfloat a2 = pow2( alpha );\\n\\tfloat gl = dotNL + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\\n\\tfloat gv = dotNV + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\\n\\treturn 1.0 / ( gl * gv );\\n}\\nfloat G_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {\\n\\tfloat a2 = pow2( alpha );\\n\\tfloat gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\\n\\tfloat gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\\n\\treturn 0.5 / max( gv + gl, EPSILON );\\n}\\nfloat D_GGX( const in float alpha, const in float dotNH ) {\\n\\tfloat a2 = pow2( alpha );\\n\\tfloat denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;\\n\\treturn RECIPROCAL_PI * a2 / pow2( denom );\\n}\\nvec3 BRDF_Specular_GGX( const in IncidentLight incidentLight, const in GeometricContext geometry, const in vec3 specularColor, const in float roughness ) {\\n\\tfloat alpha = pow2( roughness );\\n\\tvec3 halfDir = normalize( incidentLight.direction + geometry.viewDir );\\n\\tfloat dotNL = saturate( dot( geometry.normal, incidentLight.direction ) );\\n\\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\\n\\tfloat dotNH = saturate( dot( geometry.normal, halfDir ) );\\n\\tfloat dotLH = saturate( dot( incidentLight.direction, halfDir ) );\\n\\tvec3 F = F_Schlick( specularColor, dotLH );\\n\\tfloat G = G_GGX_SmithCorrelated( alpha, dotNL, dotNV );\\n\\tfloat D = D_GGX( alpha, dotNH );\\n\\treturn F * ( G * D );\\n}\\nvec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {\\n\\tconst float LUT_SIZE  = 64.0;\\n\\tconst float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;\\n\\tconst float LUT_BIAS  = 0.5 / LUT_SIZE;\\n\\tfloat theta = acos( dot( N, V ) );\\n\\tvec2 uv = vec2(\\n\\t\\tsqrt( saturate( roughness ) ),\\n\\t\\tsaturate( theta / ( 0.5 * PI ) ) );\\n\\tuv = uv * LUT_SCALE + LUT_BIAS;\\n\\treturn uv;\\n}\\nfloat LTC_ClippedSphereFormFactor( const in vec3 f ) {\\n\\tfloat l = length( f );\\n\\treturn max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );\\n}\\nvec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {\\n\\tfloat x = dot( v1, v2 );\\n\\tfloat y = abs( x );\\n\\tfloat a = 0.86267 + (0.49788 + 0.01436 * y ) * y;\\n\\tfloat b = 3.45068 + (4.18814 + y) * y;\\n\\tfloat v = a / b;\\n\\tfloat theta_sintheta = (x > 0.0) ? v : 0.5 * inversesqrt( 1.0 - x * x ) - v;\\n\\treturn cross( v1, v2 ) * theta_sintheta;\\n}\\nvec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {\\n\\tvec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];\\n\\tvec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];\\n\\tvec3 lightNormal = cross( v1, v2 );\\n\\tif( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );\\n\\tvec3 T1, T2;\\n\\tT1 = normalize( V - N * dot( V, N ) );\\n\\tT2 = - cross( N, T1 );\\n\\tmat3 mat = mInv * transpose( mat3( T1, T2, N ) );\\n\\tvec3 coords[ 4 ];\\n\\tcoords[ 0 ] = mat * ( rectCoords[ 0 ] - P );\\n\\tcoords[ 1 ] = mat * ( rectCoords[ 1 ] - P );\\n\\tcoords[ 2 ] = mat * ( rectCoords[ 2 ] - P );\\n\\tcoords[ 3 ] = mat * ( rectCoords[ 3 ] - P );\\n\\tcoords[ 0 ] = normalize( coords[ 0 ] );\\n\\tcoords[ 1 ] = normalize( coords[ 1 ] );\\n\\tcoords[ 2 ] = normalize( coords[ 2 ] );\\n\\tcoords[ 3 ] = normalize( coords[ 3 ] );\\n\\tvec3 vectorFormFactor = vec3( 0.0 );\\n\\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );\\n\\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );\\n\\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );\\n\\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );\\n\\tvec3 result = vec3( LTC_ClippedSphereFormFactor( vectorFormFactor ) );\\n\\treturn result;\\n}\\nvec3 BRDF_Specular_GGX_Environment( const in GeometricContext geometry, const in vec3 specularColor, const in float roughness ) {\\n\\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\\n\\tconst vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );\\n\\tconst vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );\\n\\tvec4 r = roughness * c0 + c1;\\n\\tfloat a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;\\n\\tvec2 AB = vec2( -1.04, 1.04 ) * a004 + r.zw;\\n\\treturn specularColor * AB.x + AB.y;\\n}\\nfloat G_BlinnPhong_Implicit( ) {\\n\\treturn 0.25;\\n}\\nfloat D_BlinnPhong( const in float shininess, const in float dotNH ) {\\n\\treturn RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );\\n}\\nvec3 BRDF_Specular_BlinnPhong( const in IncidentLight incidentLight, const in GeometricContext geometry, const in vec3 specularColor, const in float shininess ) {\\n\\tvec3 halfDir = normalize( incidentLight.direction + geometry.viewDir );\\n\\tfloat dotNH = saturate( dot( geometry.normal, halfDir ) );\\n\\tfloat dotLH = saturate( dot( incidentLight.direction, halfDir ) );\\n\\tvec3 F = F_Schlick( specularColor, dotLH );\\n\\tfloat G = G_BlinnPhong_Implicit( );\\n\\tfloat D = D_BlinnPhong( shininess, dotNH );\\n\\treturn F * ( G * D );\\n}\\nfloat GGXRoughnessToBlinnExponent( const in float ggxRoughness ) {\\n\\treturn ( 2.0 / pow2( ggxRoughness + 0.0001 ) - 2.0 );\\n}\\nfloat BlinnExponentToGGXRoughness( const in float blinnExponent ) {\\n\\treturn sqrt( 2.0 / ( blinnExponent + 2.0 ) );\\n}\\n\",\nbumpmap_pars_fragment:\"#ifdef USE_BUMPMAP\\n\\tuniform sampler2D bumpMap;\\n\\tuniform float bumpScale;\\n\\tvec2 dHdxy_fwd() {\\n\\t\\tvec2 dSTdx = dFdx( vUv );\\n\\t\\tvec2 dSTdy = dFdy( vUv );\\n\\t\\tfloat Hll = bumpScale * texture2D( bumpMap, vUv ).x;\\n\\t\\tfloat dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;\\n\\t\\tfloat dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;\\n\\t\\treturn vec2( dBx, dBy );\\n\\t}\\n\\tvec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy ) {\\n\\t\\tvec3 vSigmaX = vec3( dFdx( surf_pos.x ), dFdx( surf_pos.y ), dFdx( surf_pos.z ) );\\n\\t\\tvec3 vSigmaY = vec3( dFdy( surf_pos.x ), dFdy( surf_pos.y ), dFdy( surf_pos.z ) );\\n\\t\\tvec3 vN = surf_norm;\\n\\t\\tvec3 R1 = cross( vSigmaY, vN );\\n\\t\\tvec3 R2 = cross( vN, vSigmaX );\\n\\t\\tfloat fDet = dot( vSigmaX, R1 );\\n\\t\\tvec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\\n\\t\\treturn normalize( abs( fDet ) * surf_norm - vGrad );\\n\\t}\\n#endif\\n\",\nclipping_planes_fragment:\"#if NUM_CLIPPING_PLANES > 0\\n\\tfor ( int i = 0; i < UNION_CLIPPING_PLANES; ++ i ) {\\n\\t\\tvec4 plane = clippingPlanes[ i ];\\n\\t\\tif ( dot( vViewPosition, plane.xyz ) > plane.w ) discard;\\n\\t}\\n\\t\\t\\n\\t#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES\\n\\t\\tbool clipped = true;\\n\\t\\tfor ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; ++ i ) {\\n\\t\\t\\tvec4 plane = clippingPlanes[ i ];\\n\\t\\t\\tclipped = ( dot( vViewPosition, plane.xyz ) > plane.w ) && clipped;\\n\\t\\t}\\n\\t\\tif ( clipped ) discard;\\n\\t\\n\\t#endif\\n#endif\\n\",\nclipping_planes_pars_fragment:\"#if NUM_CLIPPING_PLANES > 0\\n\\t#if ! defined( PHYSICAL ) && ! defined( PHONG )\\n\\t\\tvarying vec3 vViewPosition;\\n\\t#endif\\n\\tuniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];\\n#endif\\n\",clipping_planes_pars_vertex:\"#if NUM_CLIPPING_PLANES > 0 && ! defined( PHYSICAL ) && ! defined( PHONG )\\n\\tvarying vec3 vViewPosition;\\n#endif\\n\",clipping_planes_vertex:\"#if NUM_CLIPPING_PLANES > 0 && ! defined( PHYSICAL ) && ! defined( PHONG )\\n\\tvViewPosition = - mvPosition.xyz;\\n#endif\\n\",\ncolor_fragment:\"#ifdef USE_COLOR\\n\\tdiffuseColor.rgb *= vColor;\\n#endif\",color_pars_fragment:\"#ifdef USE_COLOR\\n\\tvarying vec3 vColor;\\n#endif\\n\",color_pars_vertex:\"#ifdef USE_COLOR\\n\\tvarying vec3 vColor;\\n#endif\",color_vertex:\"#ifdef USE_COLOR\\n\\tvColor.xyz = color.xyz;\\n#endif\",common:\"#define PI 3.14159265359\\n#define PI2 6.28318530718\\n#define PI_HALF 1.5707963267949\\n#define RECIPROCAL_PI 0.31830988618\\n#define RECIPROCAL_PI2 0.15915494\\n#define LOG2 1.442695\\n#define EPSILON 1e-6\\n#define saturate(a) clamp( a, 0.0, 1.0 )\\n#define whiteCompliment(a) ( 1.0 - saturate( a ) )\\nfloat pow2( const in float x ) { return x*x; }\\nfloat pow3( const in float x ) { return x*x*x; }\\nfloat pow4( const in float x ) { float x2 = x*x; return x2*x2; }\\nfloat average( const in vec3 color ) { return dot( color, vec3( 0.3333 ) ); }\\nhighp float rand( const in vec2 uv ) {\\n\\tconst highp float a = 12.9898, b = 78.233, c = 43758.5453;\\n\\thighp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );\\n\\treturn fract(sin(sn) * c);\\n}\\nstruct IncidentLight {\\n\\tvec3 color;\\n\\tvec3 direction;\\n\\tbool visible;\\n};\\nstruct ReflectedLight {\\n\\tvec3 directDiffuse;\\n\\tvec3 directSpecular;\\n\\tvec3 indirectDiffuse;\\n\\tvec3 indirectSpecular;\\n};\\nstruct GeometricContext {\\n\\tvec3 position;\\n\\tvec3 normal;\\n\\tvec3 viewDir;\\n};\\nvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\\n\\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\\n}\\nvec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {\\n\\treturn normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );\\n}\\nvec3 projectOnPlane(in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {\\n\\tfloat distance = dot( planeNormal, point - pointOnPlane );\\n\\treturn - distance * planeNormal + point;\\n}\\nfloat sideOfPlane( in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {\\n\\treturn sign( dot( point - pointOnPlane, planeNormal ) );\\n}\\nvec3 linePlaneIntersect( in vec3 pointOnLine, in vec3 lineDirection, in vec3 pointOnPlane, in vec3 planeNormal ) {\\n\\treturn lineDirection * ( dot( planeNormal, pointOnPlane - pointOnLine ) / dot( planeNormal, lineDirection ) ) + pointOnLine;\\n}\\nmat3 transpose( const in mat3 v ) {\\n\\tmat3 tmp;\\n\\ttmp[0] = vec3(v[0].x, v[1].x, v[2].x);\\n\\ttmp[1] = vec3(v[0].y, v[1].y, v[2].y);\\n\\ttmp[2] = vec3(v[0].z, v[1].z, v[2].z);\\n\\treturn tmp;\\n}\\n\",\ncube_uv_reflection_fragment:\"#ifdef ENVMAP_TYPE_CUBE_UV\\n#define cubeUV_textureSize (1024.0)\\nint getFaceFromDirection(vec3 direction) {\\n\\tvec3 absDirection = abs(direction);\\n\\tint face = -1;\\n\\tif( absDirection.x > absDirection.z ) {\\n\\t\\tif(absDirection.x > absDirection.y )\\n\\t\\t\\tface = direction.x > 0.0 ? 0 : 3;\\n\\t\\telse\\n\\t\\t\\tface = direction.y > 0.0 ? 1 : 4;\\n\\t}\\n\\telse {\\n\\t\\tif(absDirection.z > absDirection.y )\\n\\t\\t\\tface = direction.z > 0.0 ? 2 : 5;\\n\\t\\telse\\n\\t\\t\\tface = direction.y > 0.0 ? 1 : 4;\\n\\t}\\n\\treturn face;\\n}\\n#define cubeUV_maxLods1  (log2(cubeUV_textureSize*0.25) - 1.0)\\n#define cubeUV_rangeClamp (exp2((6.0 - 1.0) * 2.0))\\nvec2 MipLevelInfo( vec3 vec, float roughnessLevel, float roughness ) {\\n\\tfloat scale = exp2(cubeUV_maxLods1 - roughnessLevel);\\n\\tfloat dxRoughness = dFdx(roughness);\\n\\tfloat dyRoughness = dFdy(roughness);\\n\\tvec3 dx = dFdx( vec * scale * dxRoughness );\\n\\tvec3 dy = dFdy( vec * scale * dyRoughness );\\n\\tfloat d = max( dot( dx, dx ), dot( dy, dy ) );\\n\\td = clamp(d, 1.0, cubeUV_rangeClamp);\\n\\tfloat mipLevel = 0.5 * log2(d);\\n\\treturn vec2(floor(mipLevel), fract(mipLevel));\\n}\\n#define cubeUV_maxLods2 (log2(cubeUV_textureSize*0.25) - 2.0)\\n#define cubeUV_rcpTextureSize (1.0 / cubeUV_textureSize)\\nvec2 getCubeUV(vec3 direction, float roughnessLevel, float mipLevel) {\\n\\tmipLevel = roughnessLevel > cubeUV_maxLods2 - 3.0 ? 0.0 : mipLevel;\\n\\tfloat a = 16.0 * cubeUV_rcpTextureSize;\\n\\tvec2 exp2_packed = exp2( vec2( roughnessLevel, mipLevel ) );\\n\\tvec2 rcp_exp2_packed = vec2( 1.0 ) / exp2_packed;\\n\\tfloat powScale = exp2_packed.x * exp2_packed.y;\\n\\tfloat scale = rcp_exp2_packed.x * rcp_exp2_packed.y * 0.25;\\n\\tfloat mipOffset = 0.75*(1.0 - rcp_exp2_packed.y) * rcp_exp2_packed.x;\\n\\tbool bRes = mipLevel == 0.0;\\n\\tscale =  bRes && (scale < a) ? a : scale;\\n\\tvec3 r;\\n\\tvec2 offset;\\n\\tint face = getFaceFromDirection(direction);\\n\\tfloat rcpPowScale = 1.0 / powScale;\\n\\tif( face == 0) {\\n\\t\\tr = vec3(direction.x, -direction.z, direction.y);\\n\\t\\toffset = vec2(0.0+mipOffset,0.75 * rcpPowScale);\\n\\t\\toffset.y = bRes && (offset.y < 2.0*a) ? a : offset.y;\\n\\t}\\n\\telse if( face == 1) {\\n\\t\\tr = vec3(direction.y, direction.x, direction.z);\\n\\t\\toffset = vec2(scale+mipOffset, 0.75 * rcpPowScale);\\n\\t\\toffset.y = bRes && (offset.y < 2.0*a) ? a : offset.y;\\n\\t}\\n\\telse if( face == 2) {\\n\\t\\tr = vec3(direction.z, direction.x, direction.y);\\n\\t\\toffset = vec2(2.0*scale+mipOffset, 0.75 * rcpPowScale);\\n\\t\\toffset.y = bRes && (offset.y < 2.0*a) ? a : offset.y;\\n\\t}\\n\\telse if( face == 3) {\\n\\t\\tr = vec3(direction.x, direction.z, direction.y);\\n\\t\\toffset = vec2(0.0+mipOffset,0.5 * rcpPowScale);\\n\\t\\toffset.y = bRes && (offset.y < 2.0*a) ? 0.0 : offset.y;\\n\\t}\\n\\telse if( face == 4) {\\n\\t\\tr = vec3(direction.y, direction.x, -direction.z);\\n\\t\\toffset = vec2(scale+mipOffset, 0.5 * rcpPowScale);\\n\\t\\toffset.y = bRes && (offset.y < 2.0*a) ? 0.0 : offset.y;\\n\\t}\\n\\telse {\\n\\t\\tr = vec3(direction.z, -direction.x, direction.y);\\n\\t\\toffset = vec2(2.0*scale+mipOffset, 0.5 * rcpPowScale);\\n\\t\\toffset.y = bRes && (offset.y < 2.0*a) ? 0.0 : offset.y;\\n\\t}\\n\\tr = normalize(r);\\n\\tfloat texelOffset = 0.5 * cubeUV_rcpTextureSize;\\n\\tvec2 s = ( r.yz / abs( r.x ) + vec2( 1.0 ) ) * 0.5;\\n\\tvec2 base = offset + vec2( texelOffset );\\n\\treturn base + s * ( scale - 2.0 * texelOffset );\\n}\\n#define cubeUV_maxLods3 (log2(cubeUV_textureSize*0.25) - 3.0)\\nvec4 textureCubeUV(vec3 reflectedDirection, float roughness ) {\\n\\tfloat roughnessVal = roughness* cubeUV_maxLods3;\\n\\tfloat r1 = floor(roughnessVal);\\n\\tfloat r2 = r1 + 1.0;\\n\\tfloat t = fract(roughnessVal);\\n\\tvec2 mipInfo = MipLevelInfo(reflectedDirection, r1, roughness);\\n\\tfloat s = mipInfo.y;\\n\\tfloat level0 = mipInfo.x;\\n\\tfloat level1 = level0 + 1.0;\\n\\tlevel1 = level1 > 5.0 ? 5.0 : level1;\\n\\tlevel0 += min( floor( s + 0.5 ), 5.0 );\\n\\tvec2 uv_10 = getCubeUV(reflectedDirection, r1, level0);\\n\\tvec4 color10 = envMapTexelToLinear(texture2D(envMap, uv_10));\\n\\tvec2 uv_20 = getCubeUV(reflectedDirection, r2, level0);\\n\\tvec4 color20 = envMapTexelToLinear(texture2D(envMap, uv_20));\\n\\tvec4 result = mix(color10, color20, t);\\n\\treturn vec4(result.rgb, 1.0);\\n}\\n#endif\\n\",\ndefaultnormal_vertex:\"vec3 transformedNormal = normalMatrix * objectNormal;\\n#ifdef FLIP_SIDED\\n\\ttransformedNormal = - transformedNormal;\\n#endif\\n\",displacementmap_pars_vertex:\"#ifdef USE_DISPLACEMENTMAP\\n\\tuniform sampler2D displacementMap;\\n\\tuniform float displacementScale;\\n\\tuniform float displacementBias;\\n#endif\\n\",displacementmap_vertex:\"#ifdef USE_DISPLACEMENTMAP\\n\\ttransformed += normalize( objectNormal ) * ( texture2D( displacementMap, uv ).x * displacementScale + displacementBias );\\n#endif\\n\",\nemissivemap_fragment:\"#ifdef USE_EMISSIVEMAP\\n\\tvec4 emissiveColor = texture2D( emissiveMap, vUv );\\n\\temissiveColor.rgb = emissiveMapTexelToLinear( emissiveColor ).rgb;\\n\\ttotalEmissiveRadiance *= emissiveColor.rgb;\\n#endif\\n\",emissivemap_pars_fragment:\"#ifdef USE_EMISSIVEMAP\\n\\tuniform sampler2D emissiveMap;\\n#endif\\n\",encodings_fragment:\"  gl_FragColor = linearToOutputTexel( gl_FragColor );\\n\",encodings_pars_fragment:\"\\nvec4 LinearToLinear( in vec4 value ) {\\n\\treturn value;\\n}\\nvec4 GammaToLinear( in vec4 value, in float gammaFactor ) {\\n\\treturn vec4( pow( value.xyz, vec3( gammaFactor ) ), value.w );\\n}\\nvec4 LinearToGamma( in vec4 value, in float gammaFactor ) {\\n\\treturn vec4( pow( value.xyz, vec3( 1.0 / gammaFactor ) ), value.w );\\n}\\nvec4 sRGBToLinear( in vec4 value ) {\\n\\treturn vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.w );\\n}\\nvec4 LinearTosRGB( in vec4 value ) {\\n\\treturn vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.w );\\n}\\nvec4 RGBEToLinear( in vec4 value ) {\\n\\treturn vec4( value.rgb * exp2( value.a * 255.0 - 128.0 ), 1.0 );\\n}\\nvec4 LinearToRGBE( in vec4 value ) {\\n\\tfloat maxComponent = max( max( value.r, value.g ), value.b );\\n\\tfloat fExp = clamp( ceil( log2( maxComponent ) ), -128.0, 127.0 );\\n\\treturn vec4( value.rgb / exp2( fExp ), ( fExp + 128.0 ) / 255.0 );\\n}\\nvec4 RGBMToLinear( in vec4 value, in float maxRange ) {\\n\\treturn vec4( value.xyz * value.w * maxRange, 1.0 );\\n}\\nvec4 LinearToRGBM( in vec4 value, in float maxRange ) {\\n\\tfloat maxRGB = max( value.x, max( value.g, value.b ) );\\n\\tfloat M      = clamp( maxRGB / maxRange, 0.0, 1.0 );\\n\\tM            = ceil( M * 255.0 ) / 255.0;\\n\\treturn vec4( value.rgb / ( M * maxRange ), M );\\n}\\nvec4 RGBDToLinear( in vec4 value, in float maxRange ) {\\n\\treturn vec4( value.rgb * ( ( maxRange / 255.0 ) / value.a ), 1.0 );\\n}\\nvec4 LinearToRGBD( in vec4 value, in float maxRange ) {\\n\\tfloat maxRGB = max( value.x, max( value.g, value.b ) );\\n\\tfloat D      = max( maxRange / maxRGB, 1.0 );\\n\\tD            = min( floor( D ) / 255.0, 1.0 );\\n\\treturn vec4( value.rgb * ( D * ( 255.0 / maxRange ) ), D );\\n}\\nconst mat3 cLogLuvM = mat3( 0.2209, 0.3390, 0.4184, 0.1138, 0.6780, 0.7319, 0.0102, 0.1130, 0.2969 );\\nvec4 LinearToLogLuv( in vec4 value )  {\\n\\tvec3 Xp_Y_XYZp = value.rgb * cLogLuvM;\\n\\tXp_Y_XYZp = max(Xp_Y_XYZp, vec3(1e-6, 1e-6, 1e-6));\\n\\tvec4 vResult;\\n\\tvResult.xy = Xp_Y_XYZp.xy / Xp_Y_XYZp.z;\\n\\tfloat Le = 2.0 * log2(Xp_Y_XYZp.y) + 127.0;\\n\\tvResult.w = fract(Le);\\n\\tvResult.z = (Le - (floor(vResult.w*255.0))/255.0)/255.0;\\n\\treturn vResult;\\n}\\nconst mat3 cLogLuvInverseM = mat3( 6.0014, -2.7008, -1.7996, -1.3320, 3.1029, -5.7721, 0.3008, -1.0882, 5.6268 );\\nvec4 LogLuvToLinear( in vec4 value ) {\\n\\tfloat Le = value.z * 255.0 + value.w;\\n\\tvec3 Xp_Y_XYZp;\\n\\tXp_Y_XYZp.y = exp2((Le - 127.0) / 2.0);\\n\\tXp_Y_XYZp.z = Xp_Y_XYZp.y / value.y;\\n\\tXp_Y_XYZp.x = value.x * Xp_Y_XYZp.z;\\n\\tvec3 vRGB = Xp_Y_XYZp.rgb * cLogLuvInverseM;\\n\\treturn vec4( max(vRGB, 0.0), 1.0 );\\n}\\n\",\nenvmap_fragment:\"#ifdef USE_ENVMAP\\n\\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\\n\\t\\tvec3 cameraToVertex = normalize( vWorldPosition - cameraPosition );\\n\\t\\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\\n\\t\\t#ifdef ENVMAP_MODE_REFLECTION\\n\\t\\t\\tvec3 reflectVec = reflect( cameraToVertex, worldNormal );\\n\\t\\t#else\\n\\t\\t\\tvec3 reflectVec = refract( cameraToVertex, worldNormal, refractionRatio );\\n\\t\\t#endif\\n\\t#else\\n\\t\\tvec3 reflectVec = vReflect;\\n\\t#endif\\n\\t#ifdef ENVMAP_TYPE_CUBE\\n\\t\\tvec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\\n\\t#elif defined( ENVMAP_TYPE_EQUIREC )\\n\\t\\tvec2 sampleUV;\\n\\t\\treflectVec = normalize( reflectVec );\\n\\t\\tsampleUV.y = asin( clamp( reflectVec.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\\n\\t\\tsampleUV.x = atan( reflectVec.z, reflectVec.x ) * RECIPROCAL_PI2 + 0.5;\\n\\t\\tvec4 envColor = texture2D( envMap, sampleUV );\\n\\t#elif defined( ENVMAP_TYPE_SPHERE )\\n\\t\\treflectVec = normalize( reflectVec );\\n\\t\\tvec3 reflectView = normalize( ( viewMatrix * vec4( reflectVec, 0.0 ) ).xyz + vec3( 0.0, 0.0, 1.0 ) );\\n\\t\\tvec4 envColor = texture2D( envMap, reflectView.xy * 0.5 + 0.5 );\\n\\t#else\\n\\t\\tvec4 envColor = vec4( 0.0 );\\n\\t#endif\\n\\tenvColor = envMapTexelToLinear( envColor );\\n\\t#ifdef ENVMAP_BLENDING_MULTIPLY\\n\\t\\toutgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );\\n\\t#elif defined( ENVMAP_BLENDING_MIX )\\n\\t\\toutgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );\\n\\t#elif defined( ENVMAP_BLENDING_ADD )\\n\\t\\toutgoingLight += envColor.xyz * specularStrength * reflectivity;\\n\\t#endif\\n#endif\\n\",\nenvmap_pars_fragment:\"#if defined( USE_ENVMAP ) || defined( PHYSICAL )\\n\\tuniform float reflectivity;\\n\\tuniform float envMapIntensity;\\n#endif\\n#ifdef USE_ENVMAP\\n\\t#if ! defined( PHYSICAL ) && ( defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) )\\n\\t\\tvarying vec3 vWorldPosition;\\n\\t#endif\\n\\t#ifdef ENVMAP_TYPE_CUBE\\n\\t\\tuniform samplerCube envMap;\\n\\t#else\\n\\t\\tuniform sampler2D envMap;\\n\\t#endif\\n\\tuniform float flipEnvMap;\\n\\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( PHYSICAL )\\n\\t\\tuniform float refractionRatio;\\n\\t#else\\n\\t\\tvarying vec3 vReflect;\\n\\t#endif\\n#endif\\n\",\nenvmap_pars_vertex:\"#ifdef USE_ENVMAP\\n\\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\\n\\t\\tvarying vec3 vWorldPosition;\\n\\t#else\\n\\t\\tvarying vec3 vReflect;\\n\\t\\tuniform float refractionRatio;\\n\\t#endif\\n#endif\\n\",envmap_vertex:\"#ifdef USE_ENVMAP\\n\\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\\n\\t\\tvWorldPosition = worldPosition.xyz;\\n\\t#else\\n\\t\\tvec3 cameraToVertex = normalize( worldPosition.xyz - cameraPosition );\\n\\t\\tvec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\\n\\t\\t#ifdef ENVMAP_MODE_REFLECTION\\n\\t\\t\\tvReflect = reflect( cameraToVertex, worldNormal );\\n\\t\\t#else\\n\\t\\t\\tvReflect = refract( cameraToVertex, worldNormal, refractionRatio );\\n\\t\\t#endif\\n\\t#endif\\n#endif\\n\",\nfog_vertex:\"\\n#ifdef USE_FOG\\nfogDepth = -mvPosition.z;\\n#endif\",fog_pars_vertex:\"#ifdef USE_FOG\\n  varying float fogDepth;\\n#endif\\n\",fog_fragment:\"#ifdef USE_FOG\\n\\t#ifdef FOG_EXP2\\n\\t\\tfloat fogFactor = whiteCompliment( exp2( - fogDensity * fogDensity * fogDepth * fogDepth * LOG2 ) );\\n\\t#else\\n\\t\\tfloat fogFactor = smoothstep( fogNear, fogFar, fogDepth );\\n\\t#endif\\n\\tgl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );\\n#endif\\n\",fog_pars_fragment:\"#ifdef USE_FOG\\n\\tuniform vec3 fogColor;\\n\\tvarying float fogDepth;\\n\\t#ifdef FOG_EXP2\\n\\t\\tuniform float fogDensity;\\n\\t#else\\n\\t\\tuniform float fogNear;\\n\\t\\tuniform float fogFar;\\n\\t#endif\\n#endif\\n\",\ngradientmap_pars_fragment:\"#ifdef TOON\\n\\tuniform sampler2D gradientMap;\\n\\tvec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {\\n\\t\\tfloat dotNL = dot( normal, lightDirection );\\n\\t\\tvec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );\\n\\t\\t#ifdef USE_GRADIENTMAP\\n\\t\\t\\treturn texture2D( gradientMap, coord ).rgb;\\n\\t\\t#else\\n\\t\\t\\treturn ( coord.x < 0.7 ) ? vec3( 0.7 ) : vec3( 1.0 );\\n\\t\\t#endif\\n\\t}\\n#endif\\n\",lightmap_fragment:\"#ifdef USE_LIGHTMAP\\n\\treflectedLight.indirectDiffuse += PI * texture2D( lightMap, vUv2 ).xyz * lightMapIntensity;\\n#endif\\n\",\nlightmap_pars_fragment:\"#ifdef USE_LIGHTMAP\\n\\tuniform sampler2D lightMap;\\n\\tuniform float lightMapIntensity;\\n#endif\",lights_lambert_vertex:\"vec3 diffuse = vec3( 1.0 );\\nGeometricContext geometry;\\ngeometry.position = mvPosition.xyz;\\ngeometry.normal = normalize( transformedNormal );\\ngeometry.viewDir = normalize( -mvPosition.xyz );\\nGeometricContext backGeometry;\\nbackGeometry.position = geometry.position;\\nbackGeometry.normal = -geometry.normal;\\nbackGeometry.viewDir = geometry.viewDir;\\nvLightFront = vec3( 0.0 );\\n#ifdef DOUBLE_SIDED\\n\\tvLightBack = vec3( 0.0 );\\n#endif\\nIncidentLight directLight;\\nfloat dotNL;\\nvec3 directLightColor_Diffuse;\\n#if NUM_POINT_LIGHTS > 0\\n\\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\\n\\t\\tgetPointDirectLightIrradiance( pointLights[ i ], geometry, directLight );\\n\\t\\tdotNL = dot( geometry.normal, directLight.direction );\\n\\t\\tdirectLightColor_Diffuse = PI * directLight.color;\\n\\t\\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\\n\\t\\t#ifdef DOUBLE_SIDED\\n\\t\\t\\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\\n\\t\\t#endif\\n\\t}\\n#endif\\n#if NUM_SPOT_LIGHTS > 0\\n\\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\\n\\t\\tgetSpotDirectLightIrradiance( spotLights[ i ], geometry, directLight );\\n\\t\\tdotNL = dot( geometry.normal, directLight.direction );\\n\\t\\tdirectLightColor_Diffuse = PI * directLight.color;\\n\\t\\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\\n\\t\\t#ifdef DOUBLE_SIDED\\n\\t\\t\\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\\n\\t\\t#endif\\n\\t}\\n#endif\\n#if NUM_DIR_LIGHTS > 0\\n\\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\\n\\t\\tgetDirectionalDirectLightIrradiance( directionalLights[ i ], geometry, directLight );\\n\\t\\tdotNL = dot( geometry.normal, directLight.direction );\\n\\t\\tdirectLightColor_Diffuse = PI * directLight.color;\\n\\t\\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\\n\\t\\t#ifdef DOUBLE_SIDED\\n\\t\\t\\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\\n\\t\\t#endif\\n\\t}\\n#endif\\n#if NUM_HEMI_LIGHTS > 0\\n\\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\\n\\t\\tvLightFront += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );\\n\\t\\t#ifdef DOUBLE_SIDED\\n\\t\\t\\tvLightBack += getHemisphereLightIrradiance( hemisphereLights[ i ], backGeometry );\\n\\t\\t#endif\\n\\t}\\n#endif\\n\",\nlights_pars:\"uniform vec3 ambientLightColor;\\nvec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {\\n\\tvec3 irradiance = ambientLightColor;\\n\\t#ifndef PHYSICALLY_CORRECT_LIGHTS\\n\\t\\tirradiance *= PI;\\n\\t#endif\\n\\treturn irradiance;\\n}\\n#if NUM_DIR_LIGHTS > 0\\n\\tstruct DirectionalLight {\\n\\t\\tvec3 direction;\\n\\t\\tvec3 color;\\n\\t\\tint shadow;\\n\\t\\tfloat shadowBias;\\n\\t\\tfloat shadowRadius;\\n\\t\\tvec2 shadowMapSize;\\n\\t};\\n\\tuniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];\\n\\tvoid getDirectionalDirectLightIrradiance( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight directLight ) {\\n\\t\\tdirectLight.color = directionalLight.color;\\n\\t\\tdirectLight.direction = directionalLight.direction;\\n\\t\\tdirectLight.visible = true;\\n\\t}\\n#endif\\n#if NUM_POINT_LIGHTS > 0\\n\\tstruct PointLight {\\n\\t\\tvec3 position;\\n\\t\\tvec3 color;\\n\\t\\tfloat distance;\\n\\t\\tfloat decay;\\n\\t\\tint shadow;\\n\\t\\tfloat shadowBias;\\n\\t\\tfloat shadowRadius;\\n\\t\\tvec2 shadowMapSize;\\n\\t\\tfloat shadowCameraNear;\\n\\t\\tfloat shadowCameraFar;\\n\\t};\\n\\tuniform PointLight pointLights[ NUM_POINT_LIGHTS ];\\n\\tvoid getPointDirectLightIrradiance( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight directLight ) {\\n\\t\\tvec3 lVector = pointLight.position - geometry.position;\\n\\t\\tdirectLight.direction = normalize( lVector );\\n\\t\\tfloat lightDistance = length( lVector );\\n\\t\\tdirectLight.color = pointLight.color;\\n\\t\\tdirectLight.color *= punctualLightIntensityToIrradianceFactor( lightDistance, pointLight.distance, pointLight.decay );\\n\\t\\tdirectLight.visible = ( directLight.color != vec3( 0.0 ) );\\n\\t}\\n#endif\\n#if NUM_SPOT_LIGHTS > 0\\n\\tstruct SpotLight {\\n\\t\\tvec3 position;\\n\\t\\tvec3 direction;\\n\\t\\tvec3 color;\\n\\t\\tfloat distance;\\n\\t\\tfloat decay;\\n\\t\\tfloat coneCos;\\n\\t\\tfloat penumbraCos;\\n\\t\\tint shadow;\\n\\t\\tfloat shadowBias;\\n\\t\\tfloat shadowRadius;\\n\\t\\tvec2 shadowMapSize;\\n\\t};\\n\\tuniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];\\n\\tvoid getSpotDirectLightIrradiance( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight directLight  ) {\\n\\t\\tvec3 lVector = spotLight.position - geometry.position;\\n\\t\\tdirectLight.direction = normalize( lVector );\\n\\t\\tfloat lightDistance = length( lVector );\\n\\t\\tfloat angleCos = dot( directLight.direction, spotLight.direction );\\n\\t\\tif ( angleCos > spotLight.coneCos ) {\\n\\t\\t\\tfloat spotEffect = smoothstep( spotLight.coneCos, spotLight.penumbraCos, angleCos );\\n\\t\\t\\tdirectLight.color = spotLight.color;\\n\\t\\t\\tdirectLight.color *= spotEffect * punctualLightIntensityToIrradianceFactor( lightDistance, spotLight.distance, spotLight.decay );\\n\\t\\t\\tdirectLight.visible = true;\\n\\t\\t} else {\\n\\t\\t\\tdirectLight.color = vec3( 0.0 );\\n\\t\\t\\tdirectLight.visible = false;\\n\\t\\t}\\n\\t}\\n#endif\\n#if NUM_RECT_AREA_LIGHTS > 0\\n\\tstruct RectAreaLight {\\n\\t\\tvec3 color;\\n\\t\\tvec3 position;\\n\\t\\tvec3 halfWidth;\\n\\t\\tvec3 halfHeight;\\n\\t};\\n\\tuniform sampler2D ltcMat;\\tuniform sampler2D ltcMag;\\n\\tuniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];\\n#endif\\n#if NUM_HEMI_LIGHTS > 0\\n\\tstruct HemisphereLight {\\n\\t\\tvec3 direction;\\n\\t\\tvec3 skyColor;\\n\\t\\tvec3 groundColor;\\n\\t};\\n\\tuniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];\\n\\tvec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in GeometricContext geometry ) {\\n\\t\\tfloat dotNL = dot( geometry.normal, hemiLight.direction );\\n\\t\\tfloat hemiDiffuseWeight = 0.5 * dotNL + 0.5;\\n\\t\\tvec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );\\n\\t\\t#ifndef PHYSICALLY_CORRECT_LIGHTS\\n\\t\\t\\tirradiance *= PI;\\n\\t\\t#endif\\n\\t\\treturn irradiance;\\n\\t}\\n#endif\\n#if defined( USE_ENVMAP ) && defined( PHYSICAL )\\n\\tvec3 getLightProbeIndirectIrradiance( const in GeometricContext geometry, const in int maxMIPLevel ) {\\n\\t\\tvec3 worldNormal = inverseTransformDirection( geometry.normal, viewMatrix );\\n\\t\\t#ifdef ENVMAP_TYPE_CUBE\\n\\t\\t\\tvec3 queryVec = vec3( flipEnvMap * worldNormal.x, worldNormal.yz );\\n\\t\\t\\t#ifdef TEXTURE_LOD_EXT\\n\\t\\t\\t\\tvec4 envMapColor = textureCubeLodEXT( envMap, queryVec, float( maxMIPLevel ) );\\n\\t\\t\\t#else\\n\\t\\t\\t\\tvec4 envMapColor = textureCube( envMap, queryVec, float( maxMIPLevel ) );\\n\\t\\t\\t#endif\\n\\t\\t\\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\\n\\t\\t#elif defined( ENVMAP_TYPE_CUBE_UV )\\n\\t\\t\\tvec3 queryVec = vec3( flipEnvMap * worldNormal.x, worldNormal.yz );\\n\\t\\t\\tvec4 envMapColor = textureCubeUV( queryVec, 1.0 );\\n\\t\\t#else\\n\\t\\t\\tvec4 envMapColor = vec4( 0.0 );\\n\\t\\t#endif\\n\\t\\treturn PI * envMapColor.rgb * envMapIntensity;\\n\\t}\\n\\tfloat getSpecularMIPLevel( const in float blinnShininessExponent, const in int maxMIPLevel ) {\\n\\t\\tfloat maxMIPLevelScalar = float( maxMIPLevel );\\n\\t\\tfloat desiredMIPLevel = maxMIPLevelScalar - 0.79248 - 0.5 * log2( pow2( blinnShininessExponent ) + 1.0 );\\n\\t\\treturn clamp( desiredMIPLevel, 0.0, maxMIPLevelScalar );\\n\\t}\\n\\tvec3 getLightProbeIndirectRadiance( const in GeometricContext geometry, const in float blinnShininessExponent, const in int maxMIPLevel ) {\\n\\t\\t#ifdef ENVMAP_MODE_REFLECTION\\n\\t\\t\\tvec3 reflectVec = reflect( -geometry.viewDir, geometry.normal );\\n\\t\\t#else\\n\\t\\t\\tvec3 reflectVec = refract( -geometry.viewDir, geometry.normal, refractionRatio );\\n\\t\\t#endif\\n\\t\\treflectVec = inverseTransformDirection( reflectVec, viewMatrix );\\n\\t\\tfloat specularMIPLevel = getSpecularMIPLevel( blinnShininessExponent, maxMIPLevel );\\n\\t\\t#ifdef ENVMAP_TYPE_CUBE\\n\\t\\t\\tvec3 queryReflectVec = vec3( flipEnvMap * reflectVec.x, reflectVec.yz );\\n\\t\\t\\t#ifdef TEXTURE_LOD_EXT\\n\\t\\t\\t\\tvec4 envMapColor = textureCubeLodEXT( envMap, queryReflectVec, specularMIPLevel );\\n\\t\\t\\t#else\\n\\t\\t\\t\\tvec4 envMapColor = textureCube( envMap, queryReflectVec, specularMIPLevel );\\n\\t\\t\\t#endif\\n\\t\\t\\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\\n\\t\\t#elif defined( ENVMAP_TYPE_CUBE_UV )\\n\\t\\t\\tvec3 queryReflectVec = vec3( flipEnvMap * reflectVec.x, reflectVec.yz );\\n\\t\\t\\tvec4 envMapColor = textureCubeUV(queryReflectVec, BlinnExponentToGGXRoughness(blinnShininessExponent));\\n\\t\\t#elif defined( ENVMAP_TYPE_EQUIREC )\\n\\t\\t\\tvec2 sampleUV;\\n\\t\\t\\tsampleUV.y = asin( clamp( reflectVec.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\\n\\t\\t\\tsampleUV.x = atan( reflectVec.z, reflectVec.x ) * RECIPROCAL_PI2 + 0.5;\\n\\t\\t\\t#ifdef TEXTURE_LOD_EXT\\n\\t\\t\\t\\tvec4 envMapColor = texture2DLodEXT( envMap, sampleUV, specularMIPLevel );\\n\\t\\t\\t#else\\n\\t\\t\\t\\tvec4 envMapColor = texture2D( envMap, sampleUV, specularMIPLevel );\\n\\t\\t\\t#endif\\n\\t\\t\\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\\n\\t\\t#elif defined( ENVMAP_TYPE_SPHERE )\\n\\t\\t\\tvec3 reflectView = normalize( ( viewMatrix * vec4( reflectVec, 0.0 ) ).xyz + vec3( 0.0,0.0,1.0 ) );\\n\\t\\t\\t#ifdef TEXTURE_LOD_EXT\\n\\t\\t\\t\\tvec4 envMapColor = texture2DLodEXT( envMap, reflectView.xy * 0.5 + 0.5, specularMIPLevel );\\n\\t\\t\\t#else\\n\\t\\t\\t\\tvec4 envMapColor = texture2D( envMap, reflectView.xy * 0.5 + 0.5, specularMIPLevel );\\n\\t\\t\\t#endif\\n\\t\\t\\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\\n\\t\\t#endif\\n\\t\\treturn envMapColor.rgb * envMapIntensity;\\n\\t}\\n#endif\\n\",\nlights_phong_fragment:\"BlinnPhongMaterial material;\\nmaterial.diffuseColor = diffuseColor.rgb;\\nmaterial.specularColor = specular;\\nmaterial.specularShininess = shininess;\\nmaterial.specularStrength = specularStrength;\\n\",lights_phong_pars_fragment:\"varying vec3 vViewPosition;\\n#ifndef FLAT_SHADED\\n\\tvarying vec3 vNormal;\\n#endif\\nstruct BlinnPhongMaterial {\\n\\tvec3\\tdiffuseColor;\\n\\tvec3\\tspecularColor;\\n\\tfloat\\tspecularShininess;\\n\\tfloat\\tspecularStrength;\\n};\\nvoid RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\\n\\t#ifdef TOON\\n\\t\\tvec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;\\n\\t#else\\n\\t\\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\\n\\t\\tvec3 irradiance = dotNL * directLight.color;\\n\\t#endif\\n\\t#ifndef PHYSICALLY_CORRECT_LIGHTS\\n\\t\\tirradiance *= PI;\\n\\t#endif\\n\\treflectedLight.directDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\\n\\treflectedLight.directSpecular += irradiance * BRDF_Specular_BlinnPhong( directLight, geometry, material.specularColor, material.specularShininess ) * material.specularStrength;\\n}\\nvoid RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\\n\\treflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\\n}\\n#define RE_Direct\\t\\t\\t\\tRE_Direct_BlinnPhong\\n#define RE_IndirectDiffuse\\t\\tRE_IndirectDiffuse_BlinnPhong\\n#define Material_LightProbeLOD( material )\\t(0)\\n\",\nlights_physical_fragment:\"PhysicalMaterial material;\\nmaterial.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );\\nmaterial.specularRoughness = clamp( roughnessFactor, 0.04, 1.0 );\\n#ifdef STANDARD\\n\\tmaterial.specularColor = mix( vec3( DEFAULT_SPECULAR_COEFFICIENT ), diffuseColor.rgb, metalnessFactor );\\n#else\\n\\tmaterial.specularColor = mix( vec3( MAXIMUM_SPECULAR_COEFFICIENT * pow2( reflectivity ) ), diffuseColor.rgb, metalnessFactor );\\n\\tmaterial.clearCoat = saturate( clearCoat );\\tmaterial.clearCoatRoughness = clamp( clearCoatRoughness, 0.04, 1.0 );\\n#endif\\n\",\nlights_physical_pars_fragment:\"struct PhysicalMaterial {\\n\\tvec3\\tdiffuseColor;\\n\\tfloat\\tspecularRoughness;\\n\\tvec3\\tspecularColor;\\n\\t#ifndef STANDARD\\n\\t\\tfloat clearCoat;\\n\\t\\tfloat clearCoatRoughness;\\n\\t#endif\\n};\\n#define MAXIMUM_SPECULAR_COEFFICIENT 0.16\\n#define DEFAULT_SPECULAR_COEFFICIENT 0.04\\nfloat clearCoatDHRApprox( const in float roughness, const in float dotNL ) {\\n\\treturn DEFAULT_SPECULAR_COEFFICIENT + ( 1.0 - DEFAULT_SPECULAR_COEFFICIENT ) * ( pow( 1.0 - dotNL, 5.0 ) * pow( 1.0 - roughness, 2.0 ) );\\n}\\n#if NUM_RECT_AREA_LIGHTS > 0\\n\\tvoid RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\\n\\t\\tvec3 normal = geometry.normal;\\n\\t\\tvec3 viewDir = geometry.viewDir;\\n\\t\\tvec3 position = geometry.position;\\n\\t\\tvec3 lightPos = rectAreaLight.position;\\n\\t\\tvec3 halfWidth = rectAreaLight.halfWidth;\\n\\t\\tvec3 halfHeight = rectAreaLight.halfHeight;\\n\\t\\tvec3 lightColor = rectAreaLight.color;\\n\\t\\tfloat roughness = material.specularRoughness;\\n\\t\\tvec3 rectCoords[ 4 ];\\n\\t\\trectCoords[ 0 ] = lightPos - halfWidth - halfHeight;\\t\\trectCoords[ 1 ] = lightPos + halfWidth - halfHeight;\\n\\t\\trectCoords[ 2 ] = lightPos + halfWidth + halfHeight;\\n\\t\\trectCoords[ 3 ] = lightPos - halfWidth + halfHeight;\\n\\t\\tvec2 uv = LTC_Uv( normal, viewDir, roughness );\\n\\t\\tfloat norm = texture2D( ltcMag, uv ).a;\\n\\t\\tvec4 t = texture2D( ltcMat, uv );\\n\\t\\tmat3 mInv = mat3(\\n\\t\\t\\tvec3(   1,   0, t.y ),\\n\\t\\t\\tvec3(   0, t.z,   0 ),\\n\\t\\t\\tvec3( t.w,   0, t.x )\\n\\t\\t);\\n\\t\\treflectedLight.directSpecular += lightColor * material.specularColor * norm * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );\\n\\t\\treflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1 ), rectCoords );\\n\\t}\\n#endif\\nvoid RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\\n\\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\\n\\tvec3 irradiance = dotNL * directLight.color;\\n\\t#ifndef PHYSICALLY_CORRECT_LIGHTS\\n\\t\\tirradiance *= PI;\\n\\t#endif\\n\\t#ifndef STANDARD\\n\\t\\tfloat clearCoatDHR = material.clearCoat * clearCoatDHRApprox( material.clearCoatRoughness, dotNL );\\n\\t#else\\n\\t\\tfloat clearCoatDHR = 0.0;\\n\\t#endif\\n\\treflectedLight.directSpecular += ( 1.0 - clearCoatDHR ) * irradiance * BRDF_Specular_GGX( directLight, geometry, material.specularColor, material.specularRoughness );\\n\\treflectedLight.directDiffuse += ( 1.0 - clearCoatDHR ) * irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\\n\\t#ifndef STANDARD\\n\\t\\treflectedLight.directSpecular += irradiance * material.clearCoat * BRDF_Specular_GGX( directLight, geometry, vec3( DEFAULT_SPECULAR_COEFFICIENT ), material.clearCoatRoughness );\\n\\t#endif\\n}\\nvoid RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\\n\\treflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\\n}\\nvoid RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 clearCoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\\n\\t#ifndef STANDARD\\n\\t\\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\\n\\t\\tfloat dotNL = dotNV;\\n\\t\\tfloat clearCoatDHR = material.clearCoat * clearCoatDHRApprox( material.clearCoatRoughness, dotNL );\\n\\t#else\\n\\t\\tfloat clearCoatDHR = 0.0;\\n\\t#endif\\n\\treflectedLight.indirectSpecular += ( 1.0 - clearCoatDHR ) * radiance * BRDF_Specular_GGX_Environment( geometry, material.specularColor, material.specularRoughness );\\n\\t#ifndef STANDARD\\n\\t\\treflectedLight.indirectSpecular += clearCoatRadiance * material.clearCoat * BRDF_Specular_GGX_Environment( geometry, vec3( DEFAULT_SPECULAR_COEFFICIENT ), material.clearCoatRoughness );\\n\\t#endif\\n}\\n#define RE_Direct\\t\\t\\t\\tRE_Direct_Physical\\n#define RE_Direct_RectArea\\t\\tRE_Direct_RectArea_Physical\\n#define RE_IndirectDiffuse\\t\\tRE_IndirectDiffuse_Physical\\n#define RE_IndirectSpecular\\t\\tRE_IndirectSpecular_Physical\\n#define Material_BlinnShininessExponent( material )   GGXRoughnessToBlinnExponent( material.specularRoughness )\\n#define Material_ClearCoat_BlinnShininessExponent( material )   GGXRoughnessToBlinnExponent( material.clearCoatRoughness )\\nfloat computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {\\n\\treturn saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );\\n}\\n\",\nlights_template:\"\\nGeometricContext geometry;\\ngeometry.position = - vViewPosition;\\ngeometry.normal = normal;\\ngeometry.viewDir = normalize( vViewPosition );\\nIncidentLight directLight;\\n#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )\\n\\tPointLight pointLight;\\n\\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\\n\\t\\tpointLight = pointLights[ i ];\\n\\t\\tgetPointDirectLightIrradiance( pointLight, geometry, directLight );\\n\\t\\t#ifdef USE_SHADOWMAP\\n\\t\\tdirectLight.color *= all( bvec2( pointLight.shadow, directLight.visible ) ) ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\\n\\t\\t#endif\\n\\t\\tRE_Direct( directLight, geometry, material, reflectedLight );\\n\\t}\\n#endif\\n#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )\\n\\tSpotLight spotLight;\\n\\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\\n\\t\\tspotLight = spotLights[ i ];\\n\\t\\tgetSpotDirectLightIrradiance( spotLight, geometry, directLight );\\n\\t\\t#ifdef USE_SHADOWMAP\\n\\t\\tdirectLight.color *= all( bvec2( spotLight.shadow, directLight.visible ) ) ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\\n\\t\\t#endif\\n\\t\\tRE_Direct( directLight, geometry, material, reflectedLight );\\n\\t}\\n#endif\\n#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )\\n\\tDirectionalLight directionalLight;\\n\\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\\n\\t\\tdirectionalLight = directionalLights[ i ];\\n\\t\\tgetDirectionalDirectLightIrradiance( directionalLight, geometry, directLight );\\n\\t\\t#ifdef USE_SHADOWMAP\\n\\t\\tdirectLight.color *= all( bvec2( directionalLight.shadow, directLight.visible ) ) ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\\n\\t\\t#endif\\n\\t\\tRE_Direct( directLight, geometry, material, reflectedLight );\\n\\t}\\n#endif\\n#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )\\n\\tRectAreaLight rectAreaLight;\\n\\tfor ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {\\n\\t\\trectAreaLight = rectAreaLights[ i ];\\n\\t\\tRE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );\\n\\t}\\n#endif\\n#if defined( RE_IndirectDiffuse )\\n\\tvec3 irradiance = getAmbientLightIrradiance( ambientLightColor );\\n\\t#ifdef USE_LIGHTMAP\\n\\t\\tvec3 lightMapIrradiance = texture2D( lightMap, vUv2 ).xyz * lightMapIntensity;\\n\\t\\t#ifndef PHYSICALLY_CORRECT_LIGHTS\\n\\t\\t\\tlightMapIrradiance *= PI;\\n\\t\\t#endif\\n\\t\\tirradiance += lightMapIrradiance;\\n\\t#endif\\n\\t#if ( NUM_HEMI_LIGHTS > 0 )\\n\\t\\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\\n\\t\\t\\tirradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );\\n\\t\\t}\\n\\t#endif\\n\\t#if defined( USE_ENVMAP ) && defined( PHYSICAL ) && defined( ENVMAP_TYPE_CUBE_UV )\\n\\t\\tirradiance += getLightProbeIndirectIrradiance( geometry, 8 );\\n\\t#endif\\n\\tRE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );\\n#endif\\n#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )\\n\\tvec3 radiance = getLightProbeIndirectRadiance( geometry, Material_BlinnShininessExponent( material ), 8 );\\n\\t#ifndef STANDARD\\n\\t\\tvec3 clearCoatRadiance = getLightProbeIndirectRadiance( geometry, Material_ClearCoat_BlinnShininessExponent( material ), 8 );\\n\\t#else\\n\\t\\tvec3 clearCoatRadiance = vec3( 0.0 );\\n\\t#endif\\n\\tRE_IndirectSpecular( radiance, clearCoatRadiance, geometry, material, reflectedLight );\\n#endif\\n\",\nlogdepthbuf_fragment:\"#if defined(USE_LOGDEPTHBUF) && defined(USE_LOGDEPTHBUF_EXT)\\n\\tgl_FragDepthEXT = log2(vFragDepth) * logDepthBufFC * 0.5;\\n#endif\",logdepthbuf_pars_fragment:\"#ifdef USE_LOGDEPTHBUF\\n\\tuniform float logDepthBufFC;\\n\\t#ifdef USE_LOGDEPTHBUF_EXT\\n\\t\\tvarying float vFragDepth;\\n\\t#endif\\n#endif\\n\",logdepthbuf_pars_vertex:\"#ifdef USE_LOGDEPTHBUF\\n\\t#ifdef USE_LOGDEPTHBUF_EXT\\n\\t\\tvarying float vFragDepth;\\n\\t#endif\\n\\tuniform float logDepthBufFC;\\n#endif\",logdepthbuf_vertex:\"#ifdef USE_LOGDEPTHBUF\\n\\tgl_Position.z = log2(max( EPSILON, gl_Position.w + 1.0 )) * logDepthBufFC;\\n\\t#ifdef USE_LOGDEPTHBUF_EXT\\n\\t\\tvFragDepth = 1.0 + gl_Position.w;\\n\\t#else\\n\\t\\tgl_Position.z = (gl_Position.z - 1.0) * gl_Position.w;\\n\\t#endif\\n#endif\\n\",\nmap_fragment:\"#ifdef USE_MAP\\n\\tvec4 texelColor = texture2D( map, vUv );\\n\\ttexelColor = mapTexelToLinear( texelColor );\\n\\tdiffuseColor *= texelColor;\\n#endif\\n\",map_pars_fragment:\"#ifdef USE_MAP\\n\\tuniform sampler2D map;\\n#endif\\n\",map_particle_fragment:\"#ifdef USE_MAP\\n\\tvec4 mapTexel = texture2D( map, vec2( gl_PointCoord.x, 1.0 - gl_PointCoord.y ) * offsetRepeat.zw + offsetRepeat.xy );\\n\\tdiffuseColor *= mapTexelToLinear( mapTexel );\\n#endif\\n\",map_particle_pars_fragment:\"#ifdef USE_MAP\\n\\tuniform vec4 offsetRepeat;\\n\\tuniform sampler2D map;\\n#endif\\n\",\nmetalnessmap_fragment:\"float metalnessFactor = metalness;\\n#ifdef USE_METALNESSMAP\\n\\tvec4 texelMetalness = texture2D( metalnessMap, vUv );\\n\\tmetalnessFactor *= texelMetalness.b;\\n#endif\\n\",metalnessmap_pars_fragment:\"#ifdef USE_METALNESSMAP\\n\\tuniform sampler2D metalnessMap;\\n#endif\",morphnormal_vertex:\"#ifdef USE_MORPHNORMALS\\n\\tobjectNormal += ( morphNormal0 - normal ) * morphTargetInfluences[ 0 ];\\n\\tobjectNormal += ( morphNormal1 - normal ) * morphTargetInfluences[ 1 ];\\n\\tobjectNormal += ( morphNormal2 - normal ) * morphTargetInfluences[ 2 ];\\n\\tobjectNormal += ( morphNormal3 - normal ) * morphTargetInfluences[ 3 ];\\n#endif\\n\",\nmorphtarget_pars_vertex:\"#ifdef USE_MORPHTARGETS\\n\\t#ifndef USE_MORPHNORMALS\\n\\tuniform float morphTargetInfluences[ 8 ];\\n\\t#else\\n\\tuniform float morphTargetInfluences[ 4 ];\\n\\t#endif\\n#endif\",morphtarget_vertex:\"#ifdef USE_MORPHTARGETS\\n\\ttransformed += ( morphTarget0 - position ) * morphTargetInfluences[ 0 ];\\n\\ttransformed += ( morphTarget1 - position ) * morphTargetInfluences[ 1 ];\\n\\ttransformed += ( morphTarget2 - position ) * morphTargetInfluences[ 2 ];\\n\\ttransformed += ( morphTarget3 - position ) * morphTargetInfluences[ 3 ];\\n\\t#ifndef USE_MORPHNORMALS\\n\\ttransformed += ( morphTarget4 - position ) * morphTargetInfluences[ 4 ];\\n\\ttransformed += ( morphTarget5 - position ) * morphTargetInfluences[ 5 ];\\n\\ttransformed += ( morphTarget6 - position ) * morphTargetInfluences[ 6 ];\\n\\ttransformed += ( morphTarget7 - position ) * morphTargetInfluences[ 7 ];\\n\\t#endif\\n#endif\\n\",\nnormal_fragment:\"#ifdef FLAT_SHADED\\n\\tvec3 fdx = vec3( dFdx( vViewPosition.x ), dFdx( vViewPosition.y ), dFdx( vViewPosition.z ) );\\n\\tvec3 fdy = vec3( dFdy( vViewPosition.x ), dFdy( vViewPosition.y ), dFdy( vViewPosition.z ) );\\n\\tvec3 normal = normalize( cross( fdx, fdy ) );\\n#else\\n\\tvec3 normal = normalize( vNormal );\\n\\t#ifdef DOUBLE_SIDED\\n\\t\\tnormal = normal * ( float( gl_FrontFacing ) * 2.0 - 1.0 );\\n\\t#endif\\n#endif\\n#ifdef USE_NORMALMAP\\n\\tnormal = perturbNormal2Arb( -vViewPosition, normal );\\n#elif defined( USE_BUMPMAP )\\n\\tnormal = perturbNormalArb( -vViewPosition, normal, dHdxy_fwd() );\\n#endif\\n\",\nnormalmap_pars_fragment:\"#ifdef USE_NORMALMAP\\n\\tuniform sampler2D normalMap;\\n\\tuniform vec2 normalScale;\\n\\tvec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm ) {\\n\\t\\tvec3 q0 = vec3( dFdx( eye_pos.x ), dFdx( eye_pos.y ), dFdx( eye_pos.z ) );\\n\\t\\tvec3 q1 = vec3( dFdy( eye_pos.x ), dFdy( eye_pos.y ), dFdy( eye_pos.z ) );\\n\\t\\tvec2 st0 = dFdx( vUv.st );\\n\\t\\tvec2 st1 = dFdy( vUv.st );\\n\\t\\tvec3 S = normalize( q0 * st1.t - q1 * st0.t );\\n\\t\\tvec3 T = normalize( -q0 * st1.s + q1 * st0.s );\\n\\t\\tvec3 N = normalize( surf_norm );\\n\\t\\tvec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\\n\\t\\tmapN.xy = normalScale * mapN.xy;\\n\\t\\tmat3 tsn = mat3( S, T, N );\\n\\t\\treturn normalize( tsn * mapN );\\n\\t}\\n#endif\\n\",\npacking:\"vec3 packNormalToRGB( const in vec3 normal ) {\\n\\treturn normalize( normal ) * 0.5 + 0.5;\\n}\\nvec3 unpackRGBToNormal( const in vec3 rgb ) {\\n\\treturn 1.0 - 2.0 * rgb.xyz;\\n}\\nconst float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;\\nconst vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256.,  256. );\\nconst vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );\\nconst float ShiftRight8 = 1. / 256.;\\nvec4 packDepthToRGBA( const in float v ) {\\n\\tvec4 r = vec4( fract( v * PackFactors ), v );\\n\\tr.yzw -= r.xyz * ShiftRight8;\\treturn r * PackUpscale;\\n}\\nfloat unpackRGBAToDepth( const in vec4 v ) {\\n\\treturn dot( v, UnpackFactors );\\n}\\nfloat viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {\\n\\treturn ( viewZ + near ) / ( near - far );\\n}\\nfloat orthographicDepthToViewZ( const in float linearClipZ, const in float near, const in float far ) {\\n\\treturn linearClipZ * ( near - far ) - near;\\n}\\nfloat viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {\\n\\treturn (( near + viewZ ) * far ) / (( far - near ) * viewZ );\\n}\\nfloat perspectiveDepthToViewZ( const in float invClipZ, const in float near, const in float far ) {\\n\\treturn ( near * far ) / ( ( far - near ) * invClipZ - far );\\n}\\n\",\npremultiplied_alpha_fragment:\"#ifdef PREMULTIPLIED_ALPHA\\n\\tgl_FragColor.rgb *= gl_FragColor.a;\\n#endif\\n\",project_vertex:\"vec4 mvPosition = modelViewMatrix * vec4( transformed, 1.0 );\\ngl_Position = projectionMatrix * mvPosition;\\n\",dithering_fragment:\"#if defined( DITHERING )\\n  gl_FragColor.rgb = dithering( gl_FragColor.rgb );\\n#endif\\n\",dithering_pars_fragment:\"#if defined( DITHERING )\\n\\tvec3 dithering( vec3 color ) {\\n\\t\\tfloat grid_position = rand( gl_FragCoord.xy );\\n\\t\\tvec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );\\n\\t\\tdither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );\\n\\t\\treturn color + dither_shift_RGB;\\n\\t}\\n#endif\\n\",\nroughnessmap_fragment:\"float roughnessFactor = roughness;\\n#ifdef USE_ROUGHNESSMAP\\n\\tvec4 texelRoughness = texture2D( roughnessMap, vUv );\\n\\troughnessFactor *= texelRoughness.g;\\n#endif\\n\",roughnessmap_pars_fragment:\"#ifdef USE_ROUGHNESSMAP\\n\\tuniform sampler2D roughnessMap;\\n#endif\",shadowmap_pars_fragment:\"#ifdef USE_SHADOWMAP\\n\\t#if NUM_DIR_LIGHTS > 0\\n\\t\\tuniform sampler2D directionalShadowMap[ NUM_DIR_LIGHTS ];\\n\\t\\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHTS ];\\n\\t#endif\\n\\t#if NUM_SPOT_LIGHTS > 0\\n\\t\\tuniform sampler2D spotShadowMap[ NUM_SPOT_LIGHTS ];\\n\\t\\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHTS ];\\n\\t#endif\\n\\t#if NUM_POINT_LIGHTS > 0\\n\\t\\tuniform sampler2D pointShadowMap[ NUM_POINT_LIGHTS ];\\n\\t\\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHTS ];\\n\\t#endif\\n\\tfloat texture2DCompare( sampler2D depths, vec2 uv, float compare ) {\\n\\t\\treturn step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );\\n\\t}\\n\\tfloat texture2DShadowLerp( sampler2D depths, vec2 size, vec2 uv, float compare ) {\\n\\t\\tconst vec2 offset = vec2( 0.0, 1.0 );\\n\\t\\tvec2 texelSize = vec2( 1.0 ) / size;\\n\\t\\tvec2 centroidUV = floor( uv * size + 0.5 ) / size;\\n\\t\\tfloat lb = texture2DCompare( depths, centroidUV + texelSize * offset.xx, compare );\\n\\t\\tfloat lt = texture2DCompare( depths, centroidUV + texelSize * offset.xy, compare );\\n\\t\\tfloat rb = texture2DCompare( depths, centroidUV + texelSize * offset.yx, compare );\\n\\t\\tfloat rt = texture2DCompare( depths, centroidUV + texelSize * offset.yy, compare );\\n\\t\\tvec2 f = fract( uv * size + 0.5 );\\n\\t\\tfloat a = mix( lb, lt, f.y );\\n\\t\\tfloat b = mix( rb, rt, f.y );\\n\\t\\tfloat c = mix( a, b, f.x );\\n\\t\\treturn c;\\n\\t}\\n\\tfloat getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\\n\\t\\tfloat shadow = 1.0;\\n\\t\\tshadowCoord.xyz /= shadowCoord.w;\\n\\t\\tshadowCoord.z += shadowBias;\\n\\t\\tbvec4 inFrustumVec = bvec4 ( shadowCoord.x >= 0.0, shadowCoord.x <= 1.0, shadowCoord.y >= 0.0, shadowCoord.y <= 1.0 );\\n\\t\\tbool inFrustum = all( inFrustumVec );\\n\\t\\tbvec2 frustumTestVec = bvec2( inFrustum, shadowCoord.z <= 1.0 );\\n\\t\\tbool frustumTest = all( frustumTestVec );\\n\\t\\tif ( frustumTest ) {\\n\\t\\t#if defined( SHADOWMAP_TYPE_PCF )\\n\\t\\t\\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\\n\\t\\t\\tfloat dx0 = - texelSize.x * shadowRadius;\\n\\t\\t\\tfloat dy0 = - texelSize.y * shadowRadius;\\n\\t\\t\\tfloat dx1 = + texelSize.x * shadowRadius;\\n\\t\\t\\tfloat dy1 = + texelSize.y * shadowRadius;\\n\\t\\t\\tshadow = (\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\\n\\t\\t\\t) * ( 1.0 / 9.0 );\\n\\t\\t#elif defined( SHADOWMAP_TYPE_PCF_SOFT )\\n\\t\\t\\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\\n\\t\\t\\tfloat dx0 = - texelSize.x * shadowRadius;\\n\\t\\t\\tfloat dy0 = - texelSize.y * shadowRadius;\\n\\t\\t\\tfloat dx1 = + texelSize.x * shadowRadius;\\n\\t\\t\\tfloat dy1 = + texelSize.y * shadowRadius;\\n\\t\\t\\tshadow = (\\n\\t\\t\\t\\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy, shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\\n\\t\\t\\t) * ( 1.0 / 9.0 );\\n\\t\\t#else\\n\\t\\t\\tshadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );\\n\\t\\t#endif\\n\\t\\t}\\n\\t\\treturn shadow;\\n\\t}\\n\\tvec2 cubeToUV( vec3 v, float texelSizeY ) {\\n\\t\\tvec3 absV = abs( v );\\n\\t\\tfloat scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );\\n\\t\\tabsV *= scaleToCube;\\n\\t\\tv *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );\\n\\t\\tvec2 planar = v.xy;\\n\\t\\tfloat almostATexel = 1.5 * texelSizeY;\\n\\t\\tfloat almostOne = 1.0 - almostATexel;\\n\\t\\tif ( absV.z >= almostOne ) {\\n\\t\\t\\tif ( v.z > 0.0 )\\n\\t\\t\\t\\tplanar.x = 4.0 - v.x;\\n\\t\\t} else if ( absV.x >= almostOne ) {\\n\\t\\t\\tfloat signX = sign( v.x );\\n\\t\\t\\tplanar.x = v.z * signX + 2.0 * signX;\\n\\t\\t} else if ( absV.y >= almostOne ) {\\n\\t\\t\\tfloat signY = sign( v.y );\\n\\t\\t\\tplanar.x = v.x + 2.0 * signY + 2.0;\\n\\t\\t\\tplanar.y = v.z * signY - 2.0;\\n\\t\\t}\\n\\t\\treturn vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );\\n\\t}\\n\\tfloat getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {\\n\\t\\tvec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );\\n\\t\\tvec3 lightToPosition = shadowCoord.xyz;\\n\\t\\tfloat dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );\\t\\tdp += shadowBias;\\n\\t\\tvec3 bd3D = normalize( lightToPosition );\\n\\t\\t#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT )\\n\\t\\t\\tvec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;\\n\\t\\t\\treturn (\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )\\n\\t\\t\\t) * ( 1.0 / 9.0 );\\n\\t\\t#else\\n\\t\\t\\treturn texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );\\n\\t\\t#endif\\n\\t}\\n#endif\\n\",\nshadowmap_pars_vertex:\"#ifdef USE_SHADOWMAP\\n\\t#if NUM_DIR_LIGHTS > 0\\n\\t\\tuniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHTS ];\\n\\t\\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHTS ];\\n\\t#endif\\n\\t#if NUM_SPOT_LIGHTS > 0\\n\\t\\tuniform mat4 spotShadowMatrix[ NUM_SPOT_LIGHTS ];\\n\\t\\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHTS ];\\n\\t#endif\\n\\t#if NUM_POINT_LIGHTS > 0\\n\\t\\tuniform mat4 pointShadowMatrix[ NUM_POINT_LIGHTS ];\\n\\t\\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHTS ];\\n\\t#endif\\n#endif\\n\",\nshadowmap_vertex:\"#ifdef USE_SHADOWMAP\\n\\t#if NUM_DIR_LIGHTS > 0\\n\\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\\n\\t\\tvDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * worldPosition;\\n\\t}\\n\\t#endif\\n\\t#if NUM_SPOT_LIGHTS > 0\\n\\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\\n\\t\\tvSpotShadowCoord[ i ] = spotShadowMatrix[ i ] * worldPosition;\\n\\t}\\n\\t#endif\\n\\t#if NUM_POINT_LIGHTS > 0\\n\\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\\n\\t\\tvPointShadowCoord[ i ] = pointShadowMatrix[ i ] * worldPosition;\\n\\t}\\n\\t#endif\\n#endif\\n\",\nshadowmask_pars_fragment:\"float getShadowMask() {\\n\\tfloat shadow = 1.0;\\n\\t#ifdef USE_SHADOWMAP\\n\\t#if NUM_DIR_LIGHTS > 0\\n\\tDirectionalLight directionalLight;\\n\\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\\n\\t\\tdirectionalLight = directionalLights[ i ];\\n\\t\\tshadow *= bool( directionalLight.shadow ) ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\\n\\t}\\n\\t#endif\\n\\t#if NUM_SPOT_LIGHTS > 0\\n\\tSpotLight spotLight;\\n\\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\\n\\t\\tspotLight = spotLights[ i ];\\n\\t\\tshadow *= bool( spotLight.shadow ) ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\\n\\t}\\n\\t#endif\\n\\t#if NUM_POINT_LIGHTS > 0\\n\\tPointLight pointLight;\\n\\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\\n\\t\\tpointLight = pointLights[ i ];\\n\\t\\tshadow *= bool( pointLight.shadow ) ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\\n\\t}\\n\\t#endif\\n\\t#endif\\n\\treturn shadow;\\n}\\n\",\nskinbase_vertex:\"#ifdef USE_SKINNING\\n\\tmat4 boneMatX = getBoneMatrix( skinIndex.x );\\n\\tmat4 boneMatY = getBoneMatrix( skinIndex.y );\\n\\tmat4 boneMatZ = getBoneMatrix( skinIndex.z );\\n\\tmat4 boneMatW = getBoneMatrix( skinIndex.w );\\n#endif\",skinning_pars_vertex:\"#ifdef USE_SKINNING\\n\\tuniform mat4 bindMatrix;\\n\\tuniform mat4 bindMatrixInverse;\\n\\t#ifdef BONE_TEXTURE\\n\\t\\tuniform sampler2D boneTexture;\\n\\t\\tuniform int boneTextureSize;\\n\\t\\tmat4 getBoneMatrix( const in float i ) {\\n\\t\\t\\tfloat j = i * 4.0;\\n\\t\\t\\tfloat x = mod( j, float( boneTextureSize ) );\\n\\t\\t\\tfloat y = floor( j / float( boneTextureSize ) );\\n\\t\\t\\tfloat dx = 1.0 / float( boneTextureSize );\\n\\t\\t\\tfloat dy = 1.0 / float( boneTextureSize );\\n\\t\\t\\ty = dy * ( y + 0.5 );\\n\\t\\t\\tvec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );\\n\\t\\t\\tvec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );\\n\\t\\t\\tvec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );\\n\\t\\t\\tvec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );\\n\\t\\t\\tmat4 bone = mat4( v1, v2, v3, v4 );\\n\\t\\t\\treturn bone;\\n\\t\\t}\\n\\t#else\\n\\t\\tuniform mat4 boneMatrices[ MAX_BONES ];\\n\\t\\tmat4 getBoneMatrix( const in float i ) {\\n\\t\\t\\tmat4 bone = boneMatrices[ int(i) ];\\n\\t\\t\\treturn bone;\\n\\t\\t}\\n\\t#endif\\n#endif\\n\",\nskinning_vertex:\"#ifdef USE_SKINNING\\n\\tvec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );\\n\\tvec4 skinned = vec4( 0.0 );\\n\\tskinned += boneMatX * skinVertex * skinWeight.x;\\n\\tskinned += boneMatY * skinVertex * skinWeight.y;\\n\\tskinned += boneMatZ * skinVertex * skinWeight.z;\\n\\tskinned += boneMatW * skinVertex * skinWeight.w;\\n\\ttransformed = ( bindMatrixInverse * skinned ).xyz;\\n#endif\\n\",skinnormal_vertex:\"#ifdef USE_SKINNING\\n\\tmat4 skinMatrix = mat4( 0.0 );\\n\\tskinMatrix += skinWeight.x * boneMatX;\\n\\tskinMatrix += skinWeight.y * boneMatY;\\n\\tskinMatrix += skinWeight.z * boneMatZ;\\n\\tskinMatrix += skinWeight.w * boneMatW;\\n\\tskinMatrix  = bindMatrixInverse * skinMatrix * bindMatrix;\\n\\tobjectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;\\n#endif\\n\",\nspecularmap_fragment:\"float specularStrength;\\n#ifdef USE_SPECULARMAP\\n\\tvec4 texelSpecular = texture2D( specularMap, vUv );\\n\\tspecularStrength = texelSpecular.r;\\n#else\\n\\tspecularStrength = 1.0;\\n#endif\",specularmap_pars_fragment:\"#ifdef USE_SPECULARMAP\\n\\tuniform sampler2D specularMap;\\n#endif\",tonemapping_fragment:\"#if defined( TONE_MAPPING )\\n  gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );\\n#endif\\n\",tonemapping_pars_fragment:\"#define saturate(a) clamp( a, 0.0, 1.0 )\\nuniform float toneMappingExposure;\\nuniform float toneMappingWhitePoint;\\nvec3 LinearToneMapping( vec3 color ) {\\n\\treturn toneMappingExposure * color;\\n}\\nvec3 ReinhardToneMapping( vec3 color ) {\\n\\tcolor *= toneMappingExposure;\\n\\treturn saturate( color / ( vec3( 1.0 ) + color ) );\\n}\\n#define Uncharted2Helper( x ) max( ( ( x * ( 0.15 * x + 0.10 * 0.50 ) + 0.20 * 0.02 ) / ( x * ( 0.15 * x + 0.50 ) + 0.20 * 0.30 ) ) - 0.02 / 0.30, vec3( 0.0 ) )\\nvec3 Uncharted2ToneMapping( vec3 color ) {\\n\\tcolor *= toneMappingExposure;\\n\\treturn saturate( Uncharted2Helper( color ) / Uncharted2Helper( vec3( toneMappingWhitePoint ) ) );\\n}\\nvec3 OptimizedCineonToneMapping( vec3 color ) {\\n\\tcolor *= toneMappingExposure;\\n\\tcolor = max( vec3( 0.0 ), color - 0.004 );\\n\\treturn pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );\\n}\\n\",\nuv_pars_fragment:\"#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP ) || defined( USE_EMISSIVEMAP ) || defined( USE_ROUGHNESSMAP ) || defined( USE_METALNESSMAP )\\n\\tvarying vec2 vUv;\\n#endif\",uv_pars_vertex:\"#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP ) || defined( USE_EMISSIVEMAP ) || defined( USE_ROUGHNESSMAP ) || defined( USE_METALNESSMAP )\\n\\tvarying vec2 vUv;\\n\\tuniform vec4 offsetRepeat;\\n#endif\\n\",\nuv_vertex:\"#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP ) || defined( USE_EMISSIVEMAP ) || defined( USE_ROUGHNESSMAP ) || defined( USE_METALNESSMAP )\\n\\tvUv = uv * offsetRepeat.zw + offsetRepeat.xy;\\n#endif\",uv2_pars_fragment:\"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\\n\\tvarying vec2 vUv2;\\n#endif\",uv2_pars_vertex:\"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\\n\\tattribute vec2 uv2;\\n\\tvarying vec2 vUv2;\\n#endif\",\nuv2_vertex:\"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\\n\\tvUv2 = uv2;\\n#endif\",worldpos_vertex:\"#if defined( USE_ENVMAP ) || defined( PHONG ) || defined( PHYSICAL ) || defined( LAMBERT ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP )\\n\\tvec4 worldPosition = modelMatrix * vec4( transformed, 1.0 );\\n#endif\\n\",cube_frag:\"uniform samplerCube tCube;\\nuniform float tFlip;\\nuniform float opacity;\\nvarying vec3 vWorldPosition;\\nvoid main() {\\n\\tgl_FragColor = textureCube( tCube, vec3( tFlip * vWorldPosition.x, vWorldPosition.yz ) );\\n\\tgl_FragColor.a *= opacity;\\n}\\n\",\ncube_vert:\"varying vec3 vWorldPosition;\\n#include <common>\\nvoid main() {\\n\\tvWorldPosition = transformDirection( position, modelMatrix );\\n\\t#include <begin_vertex>\\n\\t#include <project_vertex>\\n}\\n\",depth_frag:\"#if DEPTH_PACKING == 3200\\n\\tuniform float opacity;\\n#endif\\n#include <common>\\n#include <packing>\\n#include <uv_pars_fragment>\\n#include <map_pars_fragment>\\n#include <alphamap_pars_fragment>\\n#include <logdepthbuf_pars_fragment>\\n#include <clipping_planes_pars_fragment>\\nvoid main() {\\n\\t#include <clipping_planes_fragment>\\n\\tvec4 diffuseColor = vec4( 1.0 );\\n\\t#if DEPTH_PACKING == 3200\\n\\t\\tdiffuseColor.a = opacity;\\n\\t#endif\\n\\t#include <map_fragment>\\n\\t#include <alphamap_fragment>\\n\\t#include <alphatest_fragment>\\n\\t#include <logdepthbuf_fragment>\\n\\t#if DEPTH_PACKING == 3200\\n\\t\\tgl_FragColor = vec4( vec3( gl_FragCoord.z ), opacity );\\n\\t#elif DEPTH_PACKING == 3201\\n\\t\\tgl_FragColor = packDepthToRGBA( gl_FragCoord.z );\\n\\t#endif\\n}\\n\",\ndepth_vert:\"#include <common>\\n#include <uv_pars_vertex>\\n#include <displacementmap_pars_vertex>\\n#include <morphtarget_pars_vertex>\\n#include <skinning_pars_vertex>\\n#include <logdepthbuf_pars_vertex>\\n#include <clipping_planes_pars_vertex>\\nvoid main() {\\n\\t#include <uv_vertex>\\n\\t#include <skinbase_vertex>\\n\\t#ifdef USE_DISPLACEMENTMAP\\n\\t\\t#include <beginnormal_vertex>\\n\\t\\t#include <morphnormal_vertex>\\n\\t\\t#include <skinnormal_vertex>\\n\\t#endif\\n\\t#include <begin_vertex>\\n\\t#include <morphtarget_vertex>\\n\\t#include <skinning_vertex>\\n\\t#include <displacementmap_vertex>\\n\\t#include <project_vertex>\\n\\t#include <logdepthbuf_vertex>\\n\\t#include <clipping_planes_vertex>\\n}\\n\",\ndistanceRGBA_frag:\"#define DISTANCE\\nuniform vec3 referencePosition;\\nuniform float nearDistance;\\nuniform float farDistance;\\nvarying vec3 vWorldPosition;\\n#include <common>\\n#include <packing>\\n#include <uv_pars_fragment>\\n#include <map_pars_fragment>\\n#include <alphamap_pars_fragment>\\n#include <clipping_planes_pars_fragment>\\nvoid main () {\\n\\t#include <clipping_planes_fragment>\\n\\tvec4 diffuseColor = vec4( 1.0 );\\n\\t#include <map_fragment>\\n\\t#include <alphamap_fragment>\\n\\t#include <alphatest_fragment>\\n\\tfloat dist = length( vWorldPosition - referencePosition );\\n\\tdist = ( dist - nearDistance ) / ( farDistance - nearDistance );\\n\\tdist = saturate( dist );\\n\\tgl_FragColor = packDepthToRGBA( dist );\\n}\\n\",\ndistanceRGBA_vert:\"#define DISTANCE\\nvarying vec3 vWorldPosition;\\n#include <common>\\n#include <uv_pars_vertex>\\n#include <displacementmap_pars_vertex>\\n#include <morphtarget_pars_vertex>\\n#include <skinning_pars_vertex>\\n#include <clipping_planes_pars_vertex>\\nvoid main() {\\n\\t#include <uv_vertex>\\n\\t#include <skinbase_vertex>\\n\\t#ifdef USE_DISPLACEMENTMAP\\n\\t\\t#include <beginnormal_vertex>\\n\\t\\t#include <morphnormal_vertex>\\n\\t\\t#include <skinnormal_vertex>\\n\\t#endif\\n\\t#include <begin_vertex>\\n\\t#include <morphtarget_vertex>\\n\\t#include <skinning_vertex>\\n\\t#include <displacementmap_vertex>\\n\\t#include <project_vertex>\\n\\t#include <worldpos_vertex>\\n\\t#include <clipping_planes_vertex>\\n\\tvWorldPosition = worldPosition.xyz;\\n}\\n\",\nequirect_frag:\"uniform sampler2D tEquirect;\\nvarying vec3 vWorldPosition;\\n#include <common>\\nvoid main() {\\n\\tvec3 direction = normalize( vWorldPosition );\\n\\tvec2 sampleUV;\\n\\tsampleUV.y = asin( clamp( direction.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\\n\\tsampleUV.x = atan( direction.z, direction.x ) * RECIPROCAL_PI2 + 0.5;\\n\\tgl_FragColor = texture2D( tEquirect, sampleUV );\\n}\\n\",equirect_vert:\"varying vec3 vWorldPosition;\\n#include <common>\\nvoid main() {\\n\\tvWorldPosition = transformDirection( position, modelMatrix );\\n\\t#include <begin_vertex>\\n\\t#include <project_vertex>\\n}\\n\",\nlinedashed_frag:\"uniform vec3 diffuse;\\nuniform float opacity;\\nuniform float dashSize;\\nuniform float totalSize;\\nvarying float vLineDistance;\\n#include <common>\\n#include <color_pars_fragment>\\n#include <fog_pars_fragment>\\n#include <logdepthbuf_pars_fragment>\\n#include <clipping_planes_pars_fragment>\\nvoid main() {\\n\\t#include <clipping_planes_fragment>\\n\\tif ( mod( vLineDistance, totalSize ) > dashSize ) {\\n\\t\\tdiscard;\\n\\t}\\n\\tvec3 outgoingLight = vec3( 0.0 );\\n\\tvec4 diffuseColor = vec4( diffuse, opacity );\\n\\t#include <logdepthbuf_fragment>\\n\\t#include <color_fragment>\\n\\toutgoingLight = diffuseColor.rgb;\\n\\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\\n\\t#include <premultiplied_alpha_fragment>\\n\\t#include <tonemapping_fragment>\\n\\t#include <encodings_fragment>\\n\\t#include <fog_fragment>\\n}\\n\",\nlinedashed_vert:\"uniform float scale;\\nattribute float lineDistance;\\nvarying float vLineDistance;\\n#include <common>\\n#include <color_pars_vertex>\\n#include <fog_pars_vertex>\\n#include <logdepthbuf_pars_vertex>\\n#include <clipping_planes_pars_vertex>\\nvoid main() {\\n\\t#include <color_vertex>\\n\\tvLineDistance = scale * lineDistance;\\n\\tvec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );\\n\\tgl_Position = projectionMatrix * mvPosition;\\n\\t#include <logdepthbuf_vertex>\\n\\t#include <clipping_planes_vertex>\\n\\t#include <fog_vertex>\\n}\\n\",\nmeshbasic_frag:\"uniform vec3 diffuse;\\nuniform float opacity;\\n#ifndef FLAT_SHADED\\n\\tvarying vec3 vNormal;\\n#endif\\n#include <common>\\n#include <color_pars_fragment>\\n#include <uv_pars_fragment>\\n#include <uv2_pars_fragment>\\n#include <map_pars_fragment>\\n#include <alphamap_pars_fragment>\\n#include <aomap_pars_fragment>\\n#include <lightmap_pars_fragment>\\n#include <envmap_pars_fragment>\\n#include <fog_pars_fragment>\\n#include <specularmap_pars_fragment>\\n#include <logdepthbuf_pars_fragment>\\n#include <clipping_planes_pars_fragment>\\nvoid main() {\\n\\t#include <clipping_planes_fragment>\\n\\tvec4 diffuseColor = vec4( diffuse, opacity );\\n\\t#include <logdepthbuf_fragment>\\n\\t#include <map_fragment>\\n\\t#include <color_fragment>\\n\\t#include <alphamap_fragment>\\n\\t#include <alphatest_fragment>\\n\\t#include <specularmap_fragment>\\n\\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\\n\\t#ifdef USE_LIGHTMAP\\n\\t\\treflectedLight.indirectDiffuse += texture2D( lightMap, vUv2 ).xyz * lightMapIntensity;\\n\\t#else\\n\\t\\treflectedLight.indirectDiffuse += vec3( 1.0 );\\n\\t#endif\\n\\t#include <aomap_fragment>\\n\\treflectedLight.indirectDiffuse *= diffuseColor.rgb;\\n\\tvec3 outgoingLight = reflectedLight.indirectDiffuse;\\n\\t#include <envmap_fragment>\\n\\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\\n\\t#include <premultiplied_alpha_fragment>\\n\\t#include <tonemapping_fragment>\\n\\t#include <encodings_fragment>\\n\\t#include <fog_fragment>\\n}\\n\",\nmeshbasic_vert:\"#include <common>\\n#include <uv_pars_vertex>\\n#include <uv2_pars_vertex>\\n#include <envmap_pars_vertex>\\n#include <color_pars_vertex>\\n#include <fog_pars_vertex>\\n#include <morphtarget_pars_vertex>\\n#include <skinning_pars_vertex>\\n#include <logdepthbuf_pars_vertex>\\n#include <clipping_planes_pars_vertex>\\nvoid main() {\\n\\t#include <uv_vertex>\\n\\t#include <uv2_vertex>\\n\\t#include <color_vertex>\\n\\t#include <skinbase_vertex>\\n\\t#ifdef USE_ENVMAP\\n\\t#include <beginnormal_vertex>\\n\\t#include <morphnormal_vertex>\\n\\t#include <skinnormal_vertex>\\n\\t#include <defaultnormal_vertex>\\n\\t#endif\\n\\t#include <begin_vertex>\\n\\t#include <morphtarget_vertex>\\n\\t#include <skinning_vertex>\\n\\t#include <project_vertex>\\n\\t#include <logdepthbuf_vertex>\\n\\t#include <worldpos_vertex>\\n\\t#include <clipping_planes_vertex>\\n\\t#include <envmap_vertex>\\n\\t#include <fog_vertex>\\n}\\n\",\nmeshlambert_frag:\"uniform vec3 diffuse;\\nuniform vec3 emissive;\\nuniform float opacity;\\nvarying vec3 vLightFront;\\n#ifdef DOUBLE_SIDED\\n\\tvarying vec3 vLightBack;\\n#endif\\n#include <common>\\n#include <packing>\\n#include <dithering_pars_fragment>\\n#include <color_pars_fragment>\\n#include <uv_pars_fragment>\\n#include <uv2_pars_fragment>\\n#include <map_pars_fragment>\\n#include <alphamap_pars_fragment>\\n#include <aomap_pars_fragment>\\n#include <lightmap_pars_fragment>\\n#include <emissivemap_pars_fragment>\\n#include <envmap_pars_fragment>\\n#include <bsdfs>\\n#include <lights_pars>\\n#include <fog_pars_fragment>\\n#include <shadowmap_pars_fragment>\\n#include <shadowmask_pars_fragment>\\n#include <specularmap_pars_fragment>\\n#include <logdepthbuf_pars_fragment>\\n#include <clipping_planes_pars_fragment>\\nvoid main() {\\n\\t#include <clipping_planes_fragment>\\n\\tvec4 diffuseColor = vec4( diffuse, opacity );\\n\\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\\n\\tvec3 totalEmissiveRadiance = emissive;\\n\\t#include <logdepthbuf_fragment>\\n\\t#include <map_fragment>\\n\\t#include <color_fragment>\\n\\t#include <alphamap_fragment>\\n\\t#include <alphatest_fragment>\\n\\t#include <specularmap_fragment>\\n\\t#include <emissivemap_fragment>\\n\\treflectedLight.indirectDiffuse = getAmbientLightIrradiance( ambientLightColor );\\n\\t#include <lightmap_fragment>\\n\\treflectedLight.indirectDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb );\\n\\t#ifdef DOUBLE_SIDED\\n\\t\\treflectedLight.directDiffuse = ( gl_FrontFacing ) ? vLightFront : vLightBack;\\n\\t#else\\n\\t\\treflectedLight.directDiffuse = vLightFront;\\n\\t#endif\\n\\treflectedLight.directDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb ) * getShadowMask();\\n\\t#include <aomap_fragment>\\n\\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\\n\\t#include <envmap_fragment>\\n\\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\\n\\t#include <tonemapping_fragment>\\n\\t#include <encodings_fragment>\\n\\t#include <fog_fragment>\\n\\t#include <premultiplied_alpha_fragment>\\n\\t#include <dithering_fragment>\\n}\\n\",\nmeshlambert_vert:\"#define LAMBERT\\nvarying vec3 vLightFront;\\n#ifdef DOUBLE_SIDED\\n\\tvarying vec3 vLightBack;\\n#endif\\n#include <common>\\n#include <uv_pars_vertex>\\n#include <uv2_pars_vertex>\\n#include <envmap_pars_vertex>\\n#include <bsdfs>\\n#include <lights_pars>\\n#include <color_pars_vertex>\\n#include <fog_pars_vertex>\\n#include <morphtarget_pars_vertex>\\n#include <skinning_pars_vertex>\\n#include <shadowmap_pars_vertex>\\n#include <logdepthbuf_pars_vertex>\\n#include <clipping_planes_pars_vertex>\\nvoid main() {\\n\\t#include <uv_vertex>\\n\\t#include <uv2_vertex>\\n\\t#include <color_vertex>\\n\\t#include <beginnormal_vertex>\\n\\t#include <morphnormal_vertex>\\n\\t#include <skinbase_vertex>\\n\\t#include <skinnormal_vertex>\\n\\t#include <defaultnormal_vertex>\\n\\t#include <begin_vertex>\\n\\t#include <morphtarget_vertex>\\n\\t#include <skinning_vertex>\\n\\t#include <project_vertex>\\n\\t#include <logdepthbuf_vertex>\\n\\t#include <clipping_planes_vertex>\\n\\t#include <worldpos_vertex>\\n\\t#include <envmap_vertex>\\n\\t#include <lights_lambert_vertex>\\n\\t#include <shadowmap_vertex>\\n\\t#include <fog_vertex>\\n}\\n\",\nmeshphong_frag:\"#define PHONG\\nuniform vec3 diffuse;\\nuniform vec3 emissive;\\nuniform vec3 specular;\\nuniform float shininess;\\nuniform float opacity;\\n#include <common>\\n#include <packing>\\n#include <dithering_pars_fragment>\\n#include <color_pars_fragment>\\n#include <uv_pars_fragment>\\n#include <uv2_pars_fragment>\\n#include <map_pars_fragment>\\n#include <alphamap_pars_fragment>\\n#include <aomap_pars_fragment>\\n#include <lightmap_pars_fragment>\\n#include <emissivemap_pars_fragment>\\n#include <envmap_pars_fragment>\\n#include <gradientmap_pars_fragment>\\n#include <fog_pars_fragment>\\n#include <bsdfs>\\n#include <lights_pars>\\n#include <lights_phong_pars_fragment>\\n#include <shadowmap_pars_fragment>\\n#include <bumpmap_pars_fragment>\\n#include <normalmap_pars_fragment>\\n#include <specularmap_pars_fragment>\\n#include <logdepthbuf_pars_fragment>\\n#include <clipping_planes_pars_fragment>\\nvoid main() {\\n\\t#include <clipping_planes_fragment>\\n\\tvec4 diffuseColor = vec4( diffuse, opacity );\\n\\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\\n\\tvec3 totalEmissiveRadiance = emissive;\\n\\t#include <logdepthbuf_fragment>\\n\\t#include <map_fragment>\\n\\t#include <color_fragment>\\n\\t#include <alphamap_fragment>\\n\\t#include <alphatest_fragment>\\n\\t#include <specularmap_fragment>\\n\\t#include <normal_fragment>\\n\\t#include <emissivemap_fragment>\\n\\t#include <lights_phong_fragment>\\n\\t#include <lights_template>\\n\\t#include <aomap_fragment>\\n\\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\\n\\t#include <envmap_fragment>\\n\\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\\n\\t#include <tonemapping_fragment>\\n\\t#include <encodings_fragment>\\n\\t#include <fog_fragment>\\n\\t#include <premultiplied_alpha_fragment>\\n\\t#include <dithering_fragment>\\n}\\n\",\nmeshphong_vert:\"#define PHONG\\nvarying vec3 vViewPosition;\\n#ifndef FLAT_SHADED\\n\\tvarying vec3 vNormal;\\n#endif\\n#include <common>\\n#include <uv_pars_vertex>\\n#include <uv2_pars_vertex>\\n#include <displacementmap_pars_vertex>\\n#include <envmap_pars_vertex>\\n#include <color_pars_vertex>\\n#include <fog_pars_vertex>\\n#include <morphtarget_pars_vertex>\\n#include <skinning_pars_vertex>\\n#include <shadowmap_pars_vertex>\\n#include <logdepthbuf_pars_vertex>\\n#include <clipping_planes_pars_vertex>\\nvoid main() {\\n\\t#include <uv_vertex>\\n\\t#include <uv2_vertex>\\n\\t#include <color_vertex>\\n\\t#include <beginnormal_vertex>\\n\\t#include <morphnormal_vertex>\\n\\t#include <skinbase_vertex>\\n\\t#include <skinnormal_vertex>\\n\\t#include <defaultnormal_vertex>\\n#ifndef FLAT_SHADED\\n\\tvNormal = normalize( transformedNormal );\\n#endif\\n\\t#include <begin_vertex>\\n\\t#include <morphtarget_vertex>\\n\\t#include <skinning_vertex>\\n\\t#include <displacementmap_vertex>\\n\\t#include <project_vertex>\\n\\t#include <logdepthbuf_vertex>\\n\\t#include <clipping_planes_vertex>\\n\\tvViewPosition = - mvPosition.xyz;\\n\\t#include <worldpos_vertex>\\n\\t#include <envmap_vertex>\\n\\t#include <shadowmap_vertex>\\n\\t#include <fog_vertex>\\n}\\n\",\nmeshphysical_frag:\"#define PHYSICAL\\nuniform vec3 diffuse;\\nuniform vec3 emissive;\\nuniform float roughness;\\nuniform float metalness;\\nuniform float opacity;\\n#ifndef STANDARD\\n\\tuniform float clearCoat;\\n\\tuniform float clearCoatRoughness;\\n#endif\\nvarying vec3 vViewPosition;\\n#ifndef FLAT_SHADED\\n\\tvarying vec3 vNormal;\\n#endif\\n#include <common>\\n#include <packing>\\n#include <dithering_pars_fragment>\\n#include <color_pars_fragment>\\n#include <uv_pars_fragment>\\n#include <uv2_pars_fragment>\\n#include <map_pars_fragment>\\n#include <alphamap_pars_fragment>\\n#include <aomap_pars_fragment>\\n#include <lightmap_pars_fragment>\\n#include <emissivemap_pars_fragment>\\n#include <envmap_pars_fragment>\\n#include <fog_pars_fragment>\\n#include <bsdfs>\\n#include <cube_uv_reflection_fragment>\\n#include <lights_pars>\\n#include <lights_physical_pars_fragment>\\n#include <shadowmap_pars_fragment>\\n#include <bumpmap_pars_fragment>\\n#include <normalmap_pars_fragment>\\n#include <roughnessmap_pars_fragment>\\n#include <metalnessmap_pars_fragment>\\n#include <logdepthbuf_pars_fragment>\\n#include <clipping_planes_pars_fragment>\\nvoid main() {\\n\\t#include <clipping_planes_fragment>\\n\\tvec4 diffuseColor = vec4( diffuse, opacity );\\n\\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\\n\\tvec3 totalEmissiveRadiance = emissive;\\n\\t#include <logdepthbuf_fragment>\\n\\t#include <map_fragment>\\n\\t#include <color_fragment>\\n\\t#include <alphamap_fragment>\\n\\t#include <alphatest_fragment>\\n\\t#include <roughnessmap_fragment>\\n\\t#include <metalnessmap_fragment>\\n\\t#include <normal_fragment>\\n\\t#include <emissivemap_fragment>\\n\\t#include <lights_physical_fragment>\\n\\t#include <lights_template>\\n\\t#include <aomap_fragment>\\n\\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\\n\\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\\n\\t#include <tonemapping_fragment>\\n\\t#include <encodings_fragment>\\n\\t#include <fog_fragment>\\n\\t#include <premultiplied_alpha_fragment>\\n\\t#include <dithering_fragment>\\n}\\n\",\nmeshphysical_vert:\"#define PHYSICAL\\nvarying vec3 vViewPosition;\\n#ifndef FLAT_SHADED\\n\\tvarying vec3 vNormal;\\n#endif\\n#include <common>\\n#include <uv_pars_vertex>\\n#include <uv2_pars_vertex>\\n#include <displacementmap_pars_vertex>\\n#include <color_pars_vertex>\\n#include <fog_pars_vertex>\\n#include <morphtarget_pars_vertex>\\n#include <skinning_pars_vertex>\\n#include <shadowmap_pars_vertex>\\n#include <logdepthbuf_pars_vertex>\\n#include <clipping_planes_pars_vertex>\\nvoid main() {\\n\\t#include <uv_vertex>\\n\\t#include <uv2_vertex>\\n\\t#include <color_vertex>\\n\\t#include <beginnormal_vertex>\\n\\t#include <morphnormal_vertex>\\n\\t#include <skinbase_vertex>\\n\\t#include <skinnormal_vertex>\\n\\t#include <defaultnormal_vertex>\\n#ifndef FLAT_SHADED\\n\\tvNormal = normalize( transformedNormal );\\n#endif\\n\\t#include <begin_vertex>\\n\\t#include <morphtarget_vertex>\\n\\t#include <skinning_vertex>\\n\\t#include <displacementmap_vertex>\\n\\t#include <project_vertex>\\n\\t#include <logdepthbuf_vertex>\\n\\t#include <clipping_planes_vertex>\\n\\tvViewPosition = - mvPosition.xyz;\\n\\t#include <worldpos_vertex>\\n\\t#include <shadowmap_vertex>\\n\\t#include <fog_vertex>\\n}\\n\",\nnormal_frag:\"#define NORMAL\\nuniform float opacity;\\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP )\\n\\tvarying vec3 vViewPosition;\\n#endif\\n#ifndef FLAT_SHADED\\n\\tvarying vec3 vNormal;\\n#endif\\n#include <packing>\\n#include <uv_pars_fragment>\\n#include <bumpmap_pars_fragment>\\n#include <normalmap_pars_fragment>\\n#include <logdepthbuf_pars_fragment>\\nvoid main() {\\n\\t#include <logdepthbuf_fragment>\\n\\t#include <normal_fragment>\\n\\tgl_FragColor = vec4( packNormalToRGB( normal ), opacity );\\n}\\n\",\nnormal_vert:\"#define NORMAL\\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP )\\n\\tvarying vec3 vViewPosition;\\n#endif\\n#ifndef FLAT_SHADED\\n\\tvarying vec3 vNormal;\\n#endif\\n#include <uv_pars_vertex>\\n#include <displacementmap_pars_vertex>\\n#include <morphtarget_pars_vertex>\\n#include <skinning_pars_vertex>\\n#include <logdepthbuf_pars_vertex>\\nvoid main() {\\n\\t#include <uv_vertex>\\n\\t#include <beginnormal_vertex>\\n\\t#include <morphnormal_vertex>\\n\\t#include <skinbase_vertex>\\n\\t#include <skinnormal_vertex>\\n\\t#include <defaultnormal_vertex>\\n#ifndef FLAT_SHADED\\n\\tvNormal = normalize( transformedNormal );\\n#endif\\n\\t#include <begin_vertex>\\n\\t#include <morphtarget_vertex>\\n\\t#include <skinning_vertex>\\n\\t#include <displacementmap_vertex>\\n\\t#include <project_vertex>\\n\\t#include <logdepthbuf_vertex>\\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP )\\n\\tvViewPosition = - mvPosition.xyz;\\n#endif\\n}\\n\",\npoints_frag:\"uniform vec3 diffuse;\\nuniform float opacity;\\n#include <common>\\n#include <packing>\\n#include <color_pars_fragment>\\n#include <map_particle_pars_fragment>\\n#include <fog_pars_fragment>\\n#include <shadowmap_pars_fragment>\\n#include <logdepthbuf_pars_fragment>\\n#include <clipping_planes_pars_fragment>\\nvoid main() {\\n\\t#include <clipping_planes_fragment>\\n\\tvec3 outgoingLight = vec3( 0.0 );\\n\\tvec4 diffuseColor = vec4( diffuse, opacity );\\n\\t#include <logdepthbuf_fragment>\\n\\t#include <map_particle_fragment>\\n\\t#include <color_fragment>\\n\\t#include <alphatest_fragment>\\n\\toutgoingLight = diffuseColor.rgb;\\n\\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\\n\\t#include <premultiplied_alpha_fragment>\\n\\t#include <tonemapping_fragment>\\n\\t#include <encodings_fragment>\\n\\t#include <fog_fragment>\\n}\\n\",\npoints_vert:\"uniform float size;\\nuniform float scale;\\n#include <common>\\n#include <color_pars_vertex>\\n#include <fog_pars_vertex>\\n#include <shadowmap_pars_vertex>\\n#include <logdepthbuf_pars_vertex>\\n#include <clipping_planes_pars_vertex>\\nvoid main() {\\n\\t#include <color_vertex>\\n\\t#include <begin_vertex>\\n\\t#include <project_vertex>\\n\\t#ifdef USE_SIZEATTENUATION\\n\\t\\tgl_PointSize = size * ( scale / - mvPosition.z );\\n\\t#else\\n\\t\\tgl_PointSize = size;\\n\\t#endif\\n\\t#include <logdepthbuf_vertex>\\n\\t#include <clipping_planes_vertex>\\n\\t#include <worldpos_vertex>\\n\\t#include <shadowmap_vertex>\\n\\t#include <fog_vertex>\\n}\\n\",\nshadow_frag:\"uniform vec3 color;\\nuniform float opacity;\\n#include <common>\\n#include <packing>\\n#include <bsdfs>\\n#include <lights_pars>\\n#include <shadowmap_pars_fragment>\\n#include <shadowmask_pars_fragment>\\nvoid main() {\\n\\tgl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );\\n}\\n\",shadow_vert:\"#include <shadowmap_pars_vertex>\\nvoid main() {\\n\\t#include <begin_vertex>\\n\\t#include <project_vertex>\\n\\t#include <worldpos_vertex>\\n\\t#include <shadowmap_vertex>\\n}\\n\"},ib={basic:{uniforms:Da.merge([L.common,\nL.specularmap,L.envmap,L.aomap,L.lightmap,L.fog]),vertexShader:V.meshbasic_vert,fragmentShader:V.meshbasic_frag},lambert:{uniforms:Da.merge([L.common,L.specularmap,L.envmap,L.aomap,L.lightmap,L.emissivemap,L.fog,L.lights,{emissive:{value:new C(0)}}]),vertexShader:V.meshlambert_vert,fragmentShader:V.meshlambert_frag},phong:{uniforms:Da.merge([L.common,L.specularmap,L.envmap,L.aomap,L.lightmap,L.emissivemap,L.bumpmap,L.normalmap,L.displacementmap,L.gradientmap,L.fog,L.lights,{emissive:{value:new C(0)},\nspecular:{value:new C(1118481)},shininess:{value:30}}]),vertexShader:V.meshphong_vert,fragmentShader:V.meshphong_frag},standard:{uniforms:Da.merge([L.common,L.envmap,L.aomap,L.lightmap,L.emissivemap,L.bumpmap,L.normalmap,L.displacementmap,L.roughnessmap,L.metalnessmap,L.fog,L.lights,{emissive:{value:new C(0)},roughness:{value:.5},metalness:{value:.5},envMapIntensity:{value:1}}]),vertexShader:V.meshphysical_vert,fragmentShader:V.meshphysical_frag},points:{uniforms:Da.merge([L.points,L.fog]),vertexShader:V.points_vert,\nfragmentShader:V.points_frag},dashed:{uniforms:Da.merge([L.common,L.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:V.linedashed_vert,fragmentShader:V.linedashed_frag},depth:{uniforms:Da.merge([L.common,L.displacementmap]),vertexShader:V.depth_vert,fragmentShader:V.depth_frag},normal:{uniforms:Da.merge([L.common,L.bumpmap,L.normalmap,L.displacementmap,{opacity:{value:1}}]),vertexShader:V.normal_vert,fragmentShader:V.normal_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},\nopacity:{value:1}},vertexShader:V.cube_vert,fragmentShader:V.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:V.equirect_vert,fragmentShader:V.equirect_frag},distanceRGBA:{uniforms:Da.merge([L.common,L.displacementmap,{referencePosition:{value:new n},nearDistance:{value:1},farDistance:{value:1E3}}]),vertexShader:V.distanceRGBA_vert,fragmentShader:V.distanceRGBA_frag},shadow:{uniforms:Da.merge([L.lights,{color:{value:new C(0)},opacity:{value:1}}]),vertexShader:V.shadow_vert,fragmentShader:V.shadow_frag}};\nib.physical={uniforms:Da.merge([ib.standard.uniforms,{clearCoat:{value:0},clearCoatRoughness:{value:0}}]),vertexShader:V.meshphysical_vert,fragmentShader:V.meshphysical_frag};Object.assign(id.prototype,{set:function(a,b){this.min.copy(a);this.max.copy(b);return this},setFromPoints:function(a){this.makeEmpty();for(var b=0,c=a.length;b<c;b++)this.expandByPoint(a[b]);return this},setFromCenterAndSize:function(){var a=new D;return function(b,c){c=a.copy(c).multiplyScalar(.5);this.min.copy(b).sub(c);this.max.copy(b).add(c);\nreturn this}}(),clone:function(){return(new this.constructor).copy(this)},copy:function(a){this.min.copy(a.min);this.max.copy(a.max);return this},makeEmpty:function(){this.min.x=this.min.y=Infinity;this.max.x=this.max.y=-Infinity;return this},isEmpty:function(){return this.max.x<this.min.x||this.max.y<this.min.y},getCenter:function(a){a=a||new D;return this.isEmpty()?a.set(0,0):a.addVectors(this.min,this.max).multiplyScalar(.5)},getSize:function(a){a=a||new D;return this.isEmpty()?a.set(0,0):a.subVectors(this.max,\nthis.min)},expandByPoint:function(a){this.min.min(a);this.max.max(a);return this},expandByVector:function(a){this.min.sub(a);this.max.add(a);return this},expandByScalar:function(a){this.min.addScalar(-a);this.max.addScalar(a);return this},containsPoint:function(a){return a.x<this.min.x||a.x>this.max.x||a.y<this.min.y||a.y>this.max.y?!1:!0},containsBox:function(a){return this.min.x<=a.min.x&&a.max.x<=this.max.x&&this.min.y<=a.min.y&&a.max.y<=this.max.y},getParameter:function(a,b){return(b||new D).set((a.x-\nthis.min.x)/(this.max.x-this.min.x),(a.y-this.min.y)/(this.max.y-this.min.y))},intersectsBox:function(a){return a.max.x<this.min.x||a.min.x>this.max.x||a.max.y<this.min.y||a.min.y>this.max.y?!1:!0},clampPoint:function(a,b){return(b||new D).copy(a).clamp(this.min,this.max)},distanceToPoint:function(){var a=new D;return function(b){return a.copy(b).clamp(this.min,this.max).sub(b).length()}}(),intersect:function(a){this.min.max(a.min);this.max.min(a.max);return this},union:function(a){this.min.min(a.min);\nthis.max.max(a.max);return this},translate:function(a){this.min.add(a);this.max.add(a);return this},equals:function(a){return a.min.equals(this.min)&&a.max.equals(this.max)}});oc.prototype=Object.create(N.prototype);oc.prototype.constructor=oc;var Mf=0;Object.assign(P.prototype,na.prototype,{isMaterial:!0,onBeforeCompile:function(){},setValues:function(a){if(void 0!==a)for(var b in a){var c=a[b];if(void 0===c)console.warn(\"THREE.Material: '\"+b+\"' parameter is undefined.\");else if(\"shading\"===b)console.warn(\"THREE.\"+\nthis.type+\": .shading has been removed. Use the boolean .flatShading instead.\"),this.flatShading=1===c?!0:!1;else{var d=this[b];void 0===d?console.warn(\"THREE.\"+this.type+\": '\"+b+\"' is not a property of this material.\"):d&&d.isColor?d.set(c):d&&d.isVector3&&c&&c.isVector3?d.copy(c):this[b]=\"overdraw\"===b?Number(c):c}}},toJSON:function(a){function b(a){var b=[],c;for(c in a){var d=a[c];delete d.metadata;b.push(d)}return b}var c=void 0===a;c&&(a={textures:{},images:{}});var d={metadata:{version:4.5,\ntype:\"Material\",generator:\"Material.toJSON\"}};d.uuid=this.uuid;d.type=this.type;\"\"!==this.name&&(d.name=this.name);this.color&&this.color.isColor&&(d.color=this.color.getHex());void 0!==this.roughness&&(d.roughness=this.roughness);void 0!==this.metalness&&(d.metalness=this.metalness);this.emissive&&this.emissive.isColor&&(d.emissive=this.emissive.getHex());this.specular&&this.specular.isColor&&(d.specular=this.specular.getHex());void 0!==this.shininess&&(d.shininess=this.shininess);void 0!==this.clearCoat&&\n(d.clearCoat=this.clearCoat);void 0!==this.clearCoatRoughness&&(d.clearCoatRoughness=this.clearCoatRoughness);this.map&&this.map.isTexture&&(d.map=this.map.toJSON(a).uuid);this.alphaMap&&this.alphaMap.isTexture&&(d.alphaMap=this.alphaMap.toJSON(a).uuid);this.lightMap&&this.lightMap.isTexture&&(d.lightMap=this.lightMap.toJSON(a).uuid);this.bumpMap&&this.bumpMap.isTexture&&(d.bumpMap=this.bumpMap.toJSON(a).uuid,d.bumpScale=this.bumpScale);this.normalMap&&this.normalMap.isTexture&&(d.normalMap=this.normalMap.toJSON(a).uuid,\nd.normalScale=this.normalScale.toArray());this.displacementMap&&this.displacementMap.isTexture&&(d.displacementMap=this.displacementMap.toJSON(a).uuid,d.displacementScale=this.displacementScale,d.displacementBias=this.displacementBias);this.roughnessMap&&this.roughnessMap.isTexture&&(d.roughnessMap=this.roughnessMap.toJSON(a).uuid);this.metalnessMap&&this.metalnessMap.isTexture&&(d.metalnessMap=this.metalnessMap.toJSON(a).uuid);this.emissiveMap&&this.emissiveMap.isTexture&&(d.emissiveMap=this.emissiveMap.toJSON(a).uuid);\nthis.specularMap&&this.specularMap.isTexture&&(d.specularMap=this.specularMap.toJSON(a).uuid);this.envMap&&this.envMap.isTexture&&(d.envMap=this.envMap.toJSON(a).uuid,d.reflectivity=this.reflectivity);this.gradientMap&&this.gradientMap.isTexture&&(d.gradientMap=this.gradientMap.toJSON(a).uuid);void 0!==this.size&&(d.size=this.size);void 0!==this.sizeAttenuation&&(d.sizeAttenuation=this.sizeAttenuation);1!==this.blending&&(d.blending=this.blending);!0===this.flatShading&&(d.flatShading=this.flatShading);\n0!==this.side&&(d.side=this.side);0!==this.vertexColors&&(d.vertexColors=this.vertexColors);1>this.opacity&&(d.opacity=this.opacity);!0===this.transparent&&(d.transparent=this.transparent);d.depthFunc=this.depthFunc;d.depthTest=this.depthTest;d.depthWrite=this.depthWrite;!0===this.dithering&&(d.dithering=!0);0<this.alphaTest&&(d.alphaTest=this.alphaTest);!0===this.premultipliedAlpha&&(d.premultipliedAlpha=this.premultipliedAlpha);!0===this.wireframe&&(d.wireframe=this.wireframe);1<this.wireframeLinewidth&&\n(d.wireframeLinewidth=this.wireframeLinewidth);\"round\"!==this.wireframeLinecap&&(d.wireframeLinecap=this.wireframeLinecap);\"round\"!==this.wireframeLinejoin&&(d.wireframeLinejoin=this.wireframeLinejoin);!0===this.morphTargets&&(d.morphTargets=!0);!0===this.skinning&&(d.skinning=!0);!1===this.visible&&(d.visible=!1);\"{}\"!==JSON.stringify(this.userData)&&(d.userData=this.userData);c&&(c=b(a.textures),a=b(a.images),0<c.length&&(d.textures=c),0<a.length&&(d.images=a));return d},clone:function(){return(new this.constructor).copy(this)},\ncopy:function(a){this.name=a.name;this.fog=a.fog;this.lights=a.lights;this.blending=a.blending;this.side=a.side;this.flatShading=a.flatShading;this.vertexColors=a.vertexColors;this.opacity=a.opacity;this.transparent=a.transparent;this.blendSrc=a.blendSrc;this.blendDst=a.blendDst;this.blendEquation=a.blendEquation;this.blendSrcAlpha=a.blendSrcAlpha;this.blendDstAlpha=a.blendDstAlpha;this.blendEquationAlpha=a.blendEquationAlpha;this.depthFunc=a.depthFunc;this.depthTest=a.depthTest;this.depthWrite=a.depthWrite;\nthis.colorWrite=a.colorWrite;this.precision=a.precision;this.polygonOffset=a.polygonOffset;this.polygonOffsetFactor=a.polygonOffsetFactor;this.polygonOffsetUnits=a.polygonOffsetUnits;this.dithering=a.dithering;this.alphaTest=a.alphaTest;this.premultipliedAlpha=a.premultipliedAlpha;this.overdraw=a.overdraw;this.visible=a.visible;this.userData=JSON.parse(JSON.stringify(a.userData));this.clipShadows=a.clipShadows;this.clipIntersection=a.clipIntersection;a=a.clippingPlanes;var b=null;if(null!==a)for(var c=\na.length,b=Array(c),d=0;d!==c;++d)b[d]=a[d].clone();this.clippingPlanes=b;return this},dispose:function(){this.dispatchEvent({type:\"dispose\"})}});ya.prototype=Object.create(P.prototype);ya.prototype.constructor=ya;ya.prototype.isShaderMaterial=!0;ya.prototype.copy=function(a){P.prototype.copy.call(this,a);this.fragmentShader=a.fragmentShader;this.vertexShader=a.vertexShader;this.uniforms=Da.clone(a.uniforms);this.defines=a.defines;this.wireframe=a.wireframe;this.wireframeLinewidth=a.wireframeLinewidth;\nthis.lights=a.lights;this.clipping=a.clipping;this.skinning=a.skinning;this.morphTargets=a.morphTargets;this.morphNormals=a.morphNormals;this.extensions=a.extensions;return this};ya.prototype.toJSON=function(a){a=P.prototype.toJSON.call(this,a);a.uniforms=this.uniforms;a.vertexShader=this.vertexShader;a.fragmentShader=this.fragmentShader;return a};Wa.prototype=Object.create(P.prototype);Wa.prototype.constructor=Wa;Wa.prototype.isMeshDepthMaterial=!0;Wa.prototype.copy=function(a){P.prototype.copy.call(this,\na);this.depthPacking=a.depthPacking;this.skinning=a.skinning;this.morphTargets=a.morphTargets;this.map=a.map;this.alphaMap=a.alphaMap;this.displacementMap=a.displacementMap;this.displacementScale=a.displacementScale;this.displacementBias=a.displacementBias;this.wireframe=a.wireframe;this.wireframeLinewidth=a.wireframeLinewidth;return this};Xa.prototype=Object.create(P.prototype);Xa.prototype.constructor=Xa;Xa.prototype.isMeshDistanceMaterial=!0;Xa.prototype.copy=function(a){P.prototype.copy.call(this,\na);this.referencePosition.copy(a.referencePosition);this.nearDistance=a.nearDistance;this.farDistance=a.farDistance;this.skinning=a.skinning;this.morphTargets=a.morphTargets;this.map=a.map;this.alphaMap=a.alphaMap;this.displacementMap=a.displacementMap;this.displacementScale=a.displacementScale;this.displacementBias=a.displacementBias;return this};Object.assign(Pa.prototype,{isBox3:!0,set:function(a,b){this.min.copy(a);this.max.copy(b);return this},setFromArray:function(a){for(var b=Infinity,c=Infinity,\nd=Infinity,e=-Infinity,f=-Infinity,g=-Infinity,h=0,k=a.length;h<k;h+=3){var l=a[h],q=a[h+1],p=a[h+2];l<b&&(b=l);q<c&&(c=q);p<d&&(d=p);l>e&&(e=l);q>f&&(f=q);p>g&&(g=p)}this.min.set(b,c,d);this.max.set(e,f,g);return this},setFromBufferAttribute:function(a){for(var b=Infinity,c=Infinity,d=Infinity,e=-Infinity,f=-Infinity,g=-Infinity,h=0,k=a.count;h<k;h++){var l=a.getX(h),q=a.getY(h),p=a.getZ(h);l<b&&(b=l);q<c&&(c=q);p<d&&(d=p);l>e&&(e=l);q>f&&(f=q);p>g&&(g=p)}this.min.set(b,c,d);this.max.set(e,f,g);\nreturn this},setFromPoints:function(a){this.makeEmpty();for(var b=0,c=a.length;b<c;b++)this.expandByPoint(a[b]);return this},setFromCenterAndSize:function(){var a=new n;return function(b,c){c=a.copy(c).multiplyScalar(.5);this.min.copy(b).sub(c);this.max.copy(b).add(c);return this}}(),setFromObject:function(a){this.makeEmpty();return this.expandByObject(a)},clone:function(){return(new this.constructor).copy(this)},copy:function(a){this.min.copy(a.min);this.max.copy(a.max);return this},makeEmpty:function(){this.min.x=\nthis.min.y=this.min.z=Infinity;this.max.x=this.max.y=this.max.z=-Infinity;return this},isEmpty:function(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z},getCenter:function(a){a=a||new n;return this.isEmpty()?a.set(0,0,0):a.addVectors(this.min,this.max).multiplyScalar(.5)},getSize:function(a){a=a||new n;return this.isEmpty()?a.set(0,0,0):a.subVectors(this.max,this.min)},expandByPoint:function(a){this.min.min(a);this.max.max(a);return this},expandByVector:function(a){this.min.sub(a);\nthis.max.add(a);return this},expandByScalar:function(a){this.min.addScalar(-a);this.max.addScalar(a);return this},expandByObject:function(){var a=new n;return function(b){var c=this;b.updateMatrixWorld(!0);b.traverse(function(b){var d;var f=b.geometry;if(void 0!==f)if(f.isGeometry){var g=f.vertices;f=0;for(d=g.length;f<d;f++)a.copy(g[f]),a.applyMatrix4(b.matrixWorld),c.expandByPoint(a)}else if(f.isBufferGeometry&&(g=f.attributes.position,void 0!==g))for(f=0,d=g.count;f<d;f++)a.fromBufferAttribute(g,\nf).applyMatrix4(b.matrixWorld),c.expandByPoint(a)});return this}}(),containsPoint:function(a){return a.x<this.min.x||a.x>this.max.x||a.y<this.min.y||a.y>this.max.y||a.z<this.min.z||a.z>this.max.z?!1:!0},containsBox:function(a){return this.min.x<=a.min.x&&a.max.x<=this.max.x&&this.min.y<=a.min.y&&a.max.y<=this.max.y&&this.min.z<=a.min.z&&a.max.z<=this.max.z},getParameter:function(a,b){return(b||new n).set((a.x-this.min.x)/(this.max.x-this.min.x),(a.y-this.min.y)/(this.max.y-this.min.y),(a.z-this.min.z)/\n(this.max.z-this.min.z))},intersectsBox:function(a){return a.max.x<this.min.x||a.min.x>this.max.x||a.max.y<this.min.y||a.min.y>this.max.y||a.max.z<this.min.z||a.min.z>this.max.z?!1:!0},intersectsSphere:function(){var a=new n;return function(b){this.clampPoint(b.center,a);return a.distanceToSquared(b.center)<=b.radius*b.radius}}(),intersectsPlane:function(a){if(0<a.normal.x){var b=a.normal.x*this.min.x;var c=a.normal.x*this.max.x}else b=a.normal.x*this.max.x,c=a.normal.x*this.min.x;0<a.normal.y?(b+=\na.normal.y*this.min.y,c+=a.normal.y*this.max.y):(b+=a.normal.y*this.max.y,c+=a.normal.y*this.min.y);0<a.normal.z?(b+=a.normal.z*this.min.z,c+=a.normal.z*this.max.z):(b+=a.normal.z*this.max.z,c+=a.normal.z*this.min.z);return b<=a.constant&&c>=a.constant},clampPoint:function(a,b){return(b||new n).copy(a).clamp(this.min,this.max)},distanceToPoint:function(){var a=new n;return function(b){return a.copy(b).clamp(this.min,this.max).sub(b).length()}}(),getBoundingSphere:function(){var a=new n;return function(b){b=\nb||new Ca;this.getCenter(b.center);b.radius=.5*this.getSize(a).length();return b}}(),intersect:function(a){this.min.max(a.min);this.max.min(a.max);this.isEmpty()&&this.makeEmpty();return this},union:function(a){this.min.min(a.min);this.max.max(a.max);return this},applyMatrix4:function(){var a=[new n,new n,new n,new n,new n,new n,new n,new n];return function(b){if(this.isEmpty())return this;a[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(b);a[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(b);\na[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(b);a[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(b);a[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(b);a[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(b);a[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(b);a[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(b);this.setFromPoints(a);return this}}(),translate:function(a){this.min.add(a);this.max.add(a);return this},equals:function(a){return a.min.equals(this.min)&&\na.max.equals(this.max)}});Object.assign(Ca.prototype,{set:function(a,b){this.center.copy(a);this.radius=b;return this},setFromPoints:function(){var a=new Pa;return function(b,c){var d=this.center;void 0!==c?d.copy(c):a.setFromPoints(b).getCenter(d);for(var e=c=0,f=b.length;e<f;e++)c=Math.max(c,d.distanceToSquared(b[e]));this.radius=Math.sqrt(c);return this}}(),clone:function(){return(new this.constructor).copy(this)},copy:function(a){this.center.copy(a.center);this.radius=a.radius;return this},empty:function(){return 0>=\nthis.radius},containsPoint:function(a){return a.distanceToSquared(this.center)<=this.radius*this.radius},distanceToPoint:function(a){return a.distanceTo(this.center)-this.radius},intersectsSphere:function(a){var b=this.radius+a.radius;return a.center.distanceToSquared(this.center)<=b*b},intersectsBox:function(a){return a.intersectsSphere(this)},intersectsPlane:function(a){return Math.abs(a.distanceToPoint(this.center))<=this.radius},clampPoint:function(a,b){var c=this.center.distanceToSquared(a);\nb=b||new n;b.copy(a);c>this.radius*this.radius&&(b.sub(this.center).normalize(),b.multiplyScalar(this.radius).add(this.center));return b},getBoundingBox:function(a){a=a||new Pa;a.set(this.center,this.center);a.expandByScalar(this.radius);return a},applyMatrix4:function(a){this.center.applyMatrix4(a);this.radius*=a.getMaxScaleOnAxis();return this},translate:function(a){this.center.add(a);return this},equals:function(a){return a.center.equals(this.center)&&a.radius===this.radius}});Object.assign(qa.prototype,\n{isMatrix3:!0,set:function(a,b,c,d,e,f,g,h,k){var l=this.elements;l[0]=a;l[1]=d;l[2]=g;l[3]=b;l[4]=e;l[5]=h;l[6]=c;l[7]=f;l[8]=k;return this},identity:function(){this.set(1,0,0,0,1,0,0,0,1);return this},clone:function(){return(new this.constructor).fromArray(this.elements)},copy:function(a){var b=this.elements;a=a.elements;b[0]=a[0];b[1]=a[1];b[2]=a[2];b[3]=a[3];b[4]=a[4];b[5]=a[5];b[6]=a[6];b[7]=a[7];b[8]=a[8];return this},setFromMatrix4:function(a){a=a.elements;this.set(a[0],a[4],a[8],a[1],a[5],\na[9],a[2],a[6],a[10]);return this},applyToBufferAttribute:function(){var a=new n;return function(b){for(var c=0,d=b.count;c<d;c++)a.x=b.getX(c),a.y=b.getY(c),a.z=b.getZ(c),a.applyMatrix3(this),b.setXYZ(c,a.x,a.y,a.z);return b}}(),multiply:function(a){return this.multiplyMatrices(this,a)},premultiply:function(a){return this.multiplyMatrices(a,this)},multiplyMatrices:function(a,b){var c=a.elements,d=b.elements;b=this.elements;a=c[0];var e=c[3],f=c[6],g=c[1],h=c[4],k=c[7],l=c[2],q=c[5],c=c[8],p=d[0],\nm=d[3],r=d[6],n=d[1],u=d[4],x=d[7],y=d[2],A=d[5],d=d[8];b[0]=a*p+e*n+f*y;b[3]=a*m+e*u+f*A;b[6]=a*r+e*x+f*d;b[1]=g*p+h*n+k*y;b[4]=g*m+h*u+k*A;b[7]=g*r+h*x+k*d;b[2]=l*p+q*n+c*y;b[5]=l*m+q*u+c*A;b[8]=l*r+q*x+c*d;return this},multiplyScalar:function(a){var b=this.elements;b[0]*=a;b[3]*=a;b[6]*=a;b[1]*=a;b[4]*=a;b[7]*=a;b[2]*=a;b[5]*=a;b[8]*=a;return this},determinant:function(){var a=this.elements,b=a[0],c=a[1],d=a[2],e=a[3],f=a[4],g=a[5],h=a[6],k=a[7],a=a[8];return b*f*a-b*g*k-c*e*a+c*g*h+d*e*k-d*f*\nh},getInverse:function(a,b){a&&a.isMatrix4&&console.error(\"THREE.Matrix3: .getInverse() no longer takes a Matrix4 argument.\");var c=a.elements;a=this.elements;var d=c[0],e=c[1],f=c[2],g=c[3],h=c[4],k=c[5],l=c[6],q=c[7],c=c[8],p=c*h-k*q,m=k*l-c*g,r=q*g-h*l,n=d*p+e*m+f*r;if(0===n){if(!0===b)throw Error(\"THREE.Matrix3: .getInverse() can't invert matrix, determinant is 0\");console.warn(\"THREE.Matrix3: .getInverse() can't invert matrix, determinant is 0\");return this.identity()}b=1/n;a[0]=p*b;a[1]=(f*\nq-c*e)*b;a[2]=(k*e-f*h)*b;a[3]=m*b;a[4]=(c*d-f*l)*b;a[5]=(f*g-k*d)*b;a[6]=r*b;a[7]=(e*l-q*d)*b;a[8]=(h*d-e*g)*b;return this},transpose:function(){var a=this.elements;var b=a[1];a[1]=a[3];a[3]=b;b=a[2];a[2]=a[6];a[6]=b;b=a[5];a[5]=a[7];a[7]=b;return this},getNormalMatrix:function(a){return this.setFromMatrix4(a).getInverse(this).transpose()},transposeIntoArray:function(a){var b=this.elements;a[0]=b[0];a[1]=b[3];a[2]=b[6];a[3]=b[1];a[4]=b[4];a[5]=b[7];a[6]=b[2];a[7]=b[5];a[8]=b[8];return this},equals:function(a){var b=\nthis.elements;a=a.elements;for(var c=0;9>c;c++)if(b[c]!==a[c])return!1;return!0},fromArray:function(a,b){void 0===b&&(b=0);for(var c=0;9>c;c++)this.elements[c]=a[c+b];return this},toArray:function(a,b){void 0===a&&(a=[]);void 0===b&&(b=0);var c=this.elements;a[b]=c[0];a[b+1]=c[1];a[b+2]=c[2];a[b+3]=c[3];a[b+4]=c[4];a[b+5]=c[5];a[b+6]=c[6];a[b+7]=c[7];a[b+8]=c[8];return a}});Object.assign(za.prototype,{set:function(a,b){this.normal.copy(a);this.constant=b;return this},setComponents:function(a,b,c,\nd){this.normal.set(a,b,c);this.constant=d;return this},setFromNormalAndCoplanarPoint:function(a,b){this.normal.copy(a);this.constant=-b.dot(this.normal);return this},setFromCoplanarPoints:function(){var a=new n,b=new n;return function(c,d,e){d=a.subVectors(e,d).cross(b.subVectors(c,d)).normalize();this.setFromNormalAndCoplanarPoint(d,c);return this}}(),clone:function(){return(new this.constructor).copy(this)},copy:function(a){this.normal.copy(a.normal);this.constant=a.constant;return this},normalize:function(){var a=\n1/this.normal.length();this.normal.multiplyScalar(a);this.constant*=a;return this},negate:function(){this.constant*=-1;this.normal.negate();return this},distanceToPoint:function(a){return this.normal.dot(a)+this.constant},distanceToSphere:function(a){return this.distanceToPoint(a.center)-a.radius},projectPoint:function(a,b){return(b||new n).copy(this.normal).multiplyScalar(-this.distanceToPoint(a)).add(a)},intersectLine:function(){var a=new n;return function(b,c){c=c||new n;var d=b.delta(a),e=this.normal.dot(d);\nif(0===e){if(0===this.distanceToPoint(b.start))return c.copy(b.start)}else if(e=-(b.start.dot(this.normal)+this.constant)/e,!(0>e||1<e))return c.copy(d).multiplyScalar(e).add(b.start)}}(),intersectsLine:function(a){var b=this.distanceToPoint(a.start);a=this.distanceToPoint(a.end);return 0>b&&0<a||0>a&&0<b},intersectsBox:function(a){return a.intersectsPlane(this)},intersectsSphere:function(a){return a.intersectsPlane(this)},coplanarPoint:function(a){return(a||new n).copy(this.normal).multiplyScalar(-this.constant)},\napplyMatrix4:function(){var a=new n,b=new qa;return function(c,d){d=d||b.getNormalMatrix(c);c=this.coplanarPoint(a).applyMatrix4(c);d=this.normal.applyMatrix3(d).normalize();this.constant=-c.dot(d);return this}}(),translate:function(a){this.constant-=a.dot(this.normal);return this},equals:function(a){return a.normal.equals(this.normal)&&a.constant===this.constant}});Object.assign(kd.prototype,{set:function(a,b,c,d,e,f){var g=this.planes;g[0].copy(a);g[1].copy(b);g[2].copy(c);g[3].copy(d);g[4].copy(e);\ng[5].copy(f);return this},clone:function(){return(new this.constructor).copy(this)},copy:function(a){for(var b=this.planes,c=0;6>c;c++)b[c].copy(a.planes[c]);return this},setFromMatrix:function(a){var b=this.planes,c=a.elements;a=c[0];var d=c[1],e=c[2],f=c[3],g=c[4],h=c[5],k=c[6],l=c[7],q=c[8],p=c[9],m=c[10],r=c[11],n=c[12],u=c[13],x=c[14],c=c[15];b[0].setComponents(f-a,l-g,r-q,c-n).normalize();b[1].setComponents(f+a,l+g,r+q,c+n).normalize();b[2].setComponents(f+d,l+h,r+p,c+u).normalize();b[3].setComponents(f-\nd,l-h,r-p,c-u).normalize();b[4].setComponents(f-e,l-k,r-m,c-x).normalize();b[5].setComponents(f+e,l+k,r+m,c+x).normalize();return this},intersectsObject:function(){var a=new Ca;return function(b){var c=b.geometry;null===c.boundingSphere&&c.computeBoundingSphere();a.copy(c.boundingSphere).applyMatrix4(b.matrixWorld);return this.intersectsSphere(a)}}(),intersectsSprite:function(){var a=new Ca;return function(b){a.center.set(0,0,0);a.radius=.7071067811865476;a.applyMatrix4(b.matrixWorld);return this.intersectsSphere(a)}}(),\nintersectsSphere:function(a){var b=this.planes,c=a.center;a=-a.radius;for(var d=0;6>d;d++)if(b[d].distanceToPoint(c)<a)return!1;return!0},intersectsBox:function(){var a=new n,b=new n;return function(c){for(var d=this.planes,e=0;6>e;e++){var f=d[e];a.x=0<f.normal.x?c.min.x:c.max.x;b.x=0<f.normal.x?c.max.x:c.min.x;a.y=0<f.normal.y?c.min.y:c.max.y;b.y=0<f.normal.y?c.max.y:c.min.y;a.z=0<f.normal.z?c.min.z:c.max.z;b.z=0<f.normal.z?c.max.z:c.min.z;var g=f.distanceToPoint(a),f=f.distanceToPoint(b);if(0>\ng&&0>f)return!1}return!0}}(),containsPoint:function(a){for(var b=this.planes,c=0;6>c;c++)if(0>b[c].distanceToPoint(a))return!1;return!0}});Ya.RotationOrders=\"XYZ YZX ZXY XZY YXZ ZYX\".split(\" \");Ya.DefaultOrder=\"XYZ\";Object.defineProperties(Ya.prototype,{x:{get:function(){return this._x},set:function(a){this._x=a;this.onChangeCallback()}},y:{get:function(){return this._y},set:function(a){this._y=a;this.onChangeCallback()}},z:{get:function(){return this._z},set:function(a){this._z=a;this.onChangeCallback()}},\norder:{get:function(){return this._order},set:function(a){this._order=a;this.onChangeCallback()}}});Object.assign(Ya.prototype,{isEuler:!0,set:function(a,b,c,d){this._x=a;this._y=b;this._z=c;this._order=d||this._order;this.onChangeCallback();return this},clone:function(){return new this.constructor(this._x,this._y,this._z,this._order)},copy:function(a){this._x=a._x;this._y=a._y;this._z=a._z;this._order=a._order;this.onChangeCallback();return this},setFromRotationMatrix:function(a,b,c){var d=R.clamp,\ne=a.elements;a=e[0];var f=e[4],g=e[8],h=e[1],k=e[5],l=e[9],q=e[2],p=e[6],e=e[10];b=b||this._order;\"XYZ\"===b?(this._y=Math.asin(d(g,-1,1)),.99999>Math.abs(g)?(this._x=Math.atan2(-l,e),this._z=Math.atan2(-f,a)):(this._x=Math.atan2(p,k),this._z=0)):\"YXZ\"===b?(this._x=Math.asin(-d(l,-1,1)),.99999>Math.abs(l)?(this._y=Math.atan2(g,e),this._z=Math.atan2(h,k)):(this._y=Math.atan2(-q,a),this._z=0)):\"ZXY\"===b?(this._x=Math.asin(d(p,-1,1)),.99999>Math.abs(p)?(this._y=Math.atan2(-q,e),this._z=Math.atan2(-f,\nk)):(this._y=0,this._z=Math.atan2(h,a))):\"ZYX\"===b?(this._y=Math.asin(-d(q,-1,1)),.99999>Math.abs(q)?(this._x=Math.atan2(p,e),this._z=Math.atan2(h,a)):(this._x=0,this._z=Math.atan2(-f,k))):\"YZX\"===b?(this._z=Math.asin(d(h,-1,1)),.99999>Math.abs(h)?(this._x=Math.atan2(-l,k),this._y=Math.atan2(-q,a)):(this._x=0,this._y=Math.atan2(g,e))):\"XZY\"===b?(this._z=Math.asin(-d(f,-1,1)),.99999>Math.abs(f)?(this._x=Math.atan2(p,k),this._y=Math.atan2(g,a)):(this._x=Math.atan2(-l,e),this._y=0)):console.warn(\"THREE.Euler: .setFromRotationMatrix() given unsupported order: \"+\nb);this._order=b;if(!1!==c)this.onChangeCallback();return this},setFromQuaternion:function(){var a=new O;return function(b,c,d){a.makeRotationFromQuaternion(b);return this.setFromRotationMatrix(a,c,d)}}(),setFromVector3:function(a,b){return this.set(a.x,a.y,a.z,b||this._order)},reorder:function(){var a=new ia;return function(b){a.setFromEuler(this);return this.setFromQuaternion(a,b)}}(),equals:function(a){return a._x===this._x&&a._y===this._y&&a._z===this._z&&a._order===this._order},fromArray:function(a){this._x=\na[0];this._y=a[1];this._z=a[2];void 0!==a[3]&&(this._order=a[3]);this.onChangeCallback();return this},toArray:function(a,b){void 0===a&&(a=[]);void 0===b&&(b=0);a[b]=this._x;a[b+1]=this._y;a[b+2]=this._z;a[b+3]=this._order;return a},toVector3:function(a){return a?a.set(this._x,this._y,this._z):new n(this._x,this._y,this._z)},onChange:function(a){this.onChangeCallback=a;return this},onChangeCallback:function(){}});Object.assign(Qd.prototype,{set:function(a){this.mask=1<<a|0},enable:function(a){this.mask=\nthis.mask|1<<a|0},toggle:function(a){this.mask^=1<<a|0},disable:function(a){this.mask&=~(1<<a|0)},test:function(a){return 0!==(this.mask&a.mask)}});var Of=0;w.DefaultUp=new n(0,1,0);w.DefaultMatrixAutoUpdate=!0;Object.assign(w.prototype,na.prototype,{isObject3D:!0,onBeforeRender:function(){},onAfterRender:function(){},applyMatrix:function(a){this.matrix.multiplyMatrices(a,this.matrix);this.matrix.decompose(this.position,this.quaternion,this.scale)},applyQuaternion:function(a){this.quaternion.premultiply(a);\nreturn this},setRotationFromAxisAngle:function(a,b){this.quaternion.setFromAxisAngle(a,b)},setRotationFromEuler:function(a){this.quaternion.setFromEuler(a,!0)},setRotationFromMatrix:function(a){this.quaternion.setFromRotationMatrix(a)},setRotationFromQuaternion:function(a){this.quaternion.copy(a)},rotateOnAxis:function(){var a=new ia;return function(b,c){a.setFromAxisAngle(b,c);this.quaternion.multiply(a);return this}}(),rotateX:function(){var a=new n(1,0,0);return function(b){return this.rotateOnAxis(a,\nb)}}(),rotateY:function(){var a=new n(0,1,0);return function(b){return this.rotateOnAxis(a,b)}}(),rotateZ:function(){var a=new n(0,0,1);return function(b){return this.rotateOnAxis(a,b)}}(),translateOnAxis:function(){var a=new n;return function(b,c){a.copy(b).applyQuaternion(this.quaternion);this.position.add(a.multiplyScalar(c));return this}}(),translateX:function(){var a=new n(1,0,0);return function(b){return this.translateOnAxis(a,b)}}(),translateY:function(){var a=new n(0,1,0);return function(b){return this.translateOnAxis(a,\nb)}}(),translateZ:function(){var a=new n(0,0,1);return function(b){return this.translateOnAxis(a,b)}}(),localToWorld:function(a){return a.applyMatrix4(this.matrixWorld)},worldToLocal:function(){var a=new O;return function(b){return b.applyMatrix4(a.getInverse(this.matrixWorld))}}(),lookAt:function(){var a=new O;return function(b){this.isCamera?a.lookAt(this.position,b,this.up):a.lookAt(b,this.position,this.up);this.quaternion.setFromRotationMatrix(a)}}(),add:function(a){if(1<arguments.length){for(var b=\n0;b<arguments.length;b++)this.add(arguments[b]);return this}if(a===this)return console.error(\"THREE.Object3D.add: object can't be added as a child of itself.\",a),this;a&&a.isObject3D?(null!==a.parent&&a.parent.remove(a),a.parent=this,a.dispatchEvent({type:\"added\"}),this.children.push(a)):console.error(\"THREE.Object3D.add: object not an instance of THREE.Object3D.\",a);return this},remove:function(a){if(1<arguments.length){for(var b=0;b<arguments.length;b++)this.remove(arguments[b]);return this}b=this.children.indexOf(a);\n-1!==b&&(a.parent=null,a.dispatchEvent({type:\"removed\"}),this.children.splice(b,1));return this},getObjectById:function(a){return this.getObjectByProperty(\"id\",a)},getObjectByName:function(a){return this.getObjectByProperty(\"name\",a)},getObjectByProperty:function(a,b){if(this[a]===b)return this;for(var c=0,d=this.children.length;c<d;c++){var e=this.children[c].getObjectByProperty(a,b);if(void 0!==e)return e}},getWorldPosition:function(a){a=a||new n;this.updateMatrixWorld(!0);return a.setFromMatrixPosition(this.matrixWorld)},\ngetWorldQuaternion:function(){var a=new n,b=new n;return function(c){c=c||new ia;this.updateMatrixWorld(!0);this.matrixWorld.decompose(a,c,b);return c}}(),getWorldRotation:function(){var a=new ia;return function(b){b=b||new Ya;this.getWorldQuaternion(a);return b.setFromQuaternion(a,this.rotation.order,!1)}}(),getWorldScale:function(){var a=new n,b=new ia;return function(c){c=c||new n;this.updateMatrixWorld(!0);this.matrixWorld.decompose(a,b,c);return c}}(),getWorldDirection:function(){var a=new ia;\nreturn function(b){b=b||new n;this.getWorldQuaternion(a);return b.set(0,0,1).applyQuaternion(a)}}(),raycast:function(){},traverse:function(a){a(this);for(var b=this.children,c=0,d=b.length;c<d;c++)b[c].traverse(a)},traverseVisible:function(a){if(!1!==this.visible){a(this);for(var b=this.children,c=0,d=b.length;c<d;c++)b[c].traverseVisible(a)}},traverseAncestors:function(a){var b=this.parent;null!==b&&(a(b),b.traverseAncestors(a))},updateMatrix:function(){this.matrix.compose(this.position,this.quaternion,\nthis.scale);this.matrixWorldNeedsUpdate=!0},updateMatrixWorld:function(a){this.matrixAutoUpdate&&this.updateMatrix();if(this.matrixWorldNeedsUpdate||a)null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,a=!0;for(var b=this.children,c=0,d=b.length;c<d;c++)b[c].updateMatrixWorld(a)},toJSON:function(a){function b(b,c){void 0===b[c.uuid]&&(b[c.uuid]=c.toJSON(a));return c.uuid}function c(a){var b=[],\nc;for(c in a){var d=a[c];delete d.metadata;b.push(d)}return b}var d=void 0===a||\"\"===a,e={};d&&(a={geometries:{},materials:{},textures:{},images:{}},e.metadata={version:4.5,type:\"Object\",generator:\"Object3D.toJSON\"});var f={};f.uuid=this.uuid;f.type=this.type;\"\"!==this.name&&(f.name=this.name);!0===this.castShadow&&(f.castShadow=!0);!0===this.receiveShadow&&(f.receiveShadow=!0);!1===this.visible&&(f.visible=!1);\"{}\"!==JSON.stringify(this.userData)&&(f.userData=this.userData);f.matrix=this.matrix.toArray();\nvoid 0!==this.geometry&&(f.geometry=b(a.geometries,this.geometry));if(void 0!==this.material)if(Array.isArray(this.material)){for(var g=[],h=0,k=this.material.length;h<k;h++)g.push(b(a.materials,this.material[h]));f.material=g}else f.material=b(a.materials,this.material);if(0<this.children.length)for(f.children=[],h=0;h<this.children.length;h++)f.children.push(this.children[h].toJSON(a).object);d&&(d=c(a.geometries),g=c(a.materials),h=c(a.textures),k=c(a.images),0<d.length&&(e.geometries=d),0<g.length&&\n(e.materials=g),0<h.length&&(e.textures=h),0<k.length&&(e.images=k));e.object=f;return e},clone:function(a){return(new this.constructor).copy(this,a)},copy:function(a,b){void 0===b&&(b=!0);this.name=a.name;this.up.copy(a.up);this.position.copy(a.position);this.quaternion.copy(a.quaternion);this.scale.copy(a.scale);this.matrix.copy(a.matrix);this.matrixWorld.copy(a.matrixWorld);this.matrixAutoUpdate=a.matrixAutoUpdate;this.matrixWorldNeedsUpdate=a.matrixWorldNeedsUpdate;this.layers.mask=a.layers.mask;\nthis.visible=a.visible;this.castShadow=a.castShadow;this.receiveShadow=a.receiveShadow;this.frustumCulled=a.frustumCulled;this.renderOrder=a.renderOrder;this.userData=JSON.parse(JSON.stringify(a.userData));if(!0===b)for(b=0;b<a.children.length;b++)this.add(a.children[b].clone());return this}});Ma.prototype=Object.assign(Object.create(w.prototype),{constructor:Ma,isCamera:!0,copy:function(a,b){w.prototype.copy.call(this,a,b);this.matrixWorldInverse.copy(a.matrixWorldInverse);this.projectionMatrix.copy(a.projectionMatrix);\nreturn this},getWorldDirection:function(){var a=new ia;return function(b){b=b||new n;this.getWorldQuaternion(a);return b.set(0,0,-1).applyQuaternion(a)}}(),updateMatrixWorld:function(a){w.prototype.updateMatrixWorld.call(this,a);this.matrixWorldInverse.getInverse(this.matrixWorld)},clone:function(){return(new this.constructor).copy(this)}});Db.prototype=Object.assign(Object.create(Ma.prototype),{constructor:Db,isOrthographicCamera:!0,copy:function(a,b){Ma.prototype.copy.call(this,a,b);this.left=a.left;\nthis.right=a.right;this.top=a.top;this.bottom=a.bottom;this.near=a.near;this.far=a.far;this.zoom=a.zoom;this.view=null===a.view?null:Object.assign({},a.view);return this},setViewOffset:function(a,b,c,d,e,f){this.view={fullWidth:a,fullHeight:b,offsetX:c,offsetY:d,width:e,height:f};this.updateProjectionMatrix()},clearViewOffset:function(){this.view=null;this.updateProjectionMatrix()},updateProjectionMatrix:function(){var a=(this.right-this.left)/(2*this.zoom),b=(this.top-this.bottom)/(2*this.zoom),\nc=(this.right+this.left)/2,d=(this.top+this.bottom)/2,e=c-a,c=c+a,a=d+b,b=d-b;if(null!==this.view)var c=this.zoom/(this.view.width/this.view.fullWidth),b=this.zoom/(this.view.height/this.view.fullHeight),f=(this.right-this.left)/this.view.width,d=(this.top-this.bottom)/this.view.height,e=e+this.view.offsetX/c*f,c=e+this.view.width/c*f,a=a-this.view.offsetY/b*d,b=a-this.view.height/b*d;this.projectionMatrix.makeOrthographic(e,c,a,b,this.near,this.far)},toJSON:function(a){a=w.prototype.toJSON.call(this,\na);a.object.zoom=this.zoom;a.object.left=this.left;a.object.right=this.right;a.object.top=this.top;a.object.bottom=this.bottom;a.object.near=this.near;a.object.far=this.far;null!==this.view&&(a.object.view=Object.assign({},this.view));return a}});ja.prototype=Object.assign(Object.create(Ma.prototype),{constructor:ja,isPerspectiveCamera:!0,copy:function(a,b){Ma.prototype.copy.call(this,a,b);this.fov=a.fov;this.zoom=a.zoom;this.near=a.near;this.far=a.far;this.focus=a.focus;this.aspect=a.aspect;this.view=\nnull===a.view?null:Object.assign({},a.view);this.filmGauge=a.filmGauge;this.filmOffset=a.filmOffset;return this},setFocalLength:function(a){a=.5*this.getFilmHeight()/a;this.fov=2*R.RAD2DEG*Math.atan(a);this.updateProjectionMatrix()},getFocalLength:function(){var a=Math.tan(.5*R.DEG2RAD*this.fov);return.5*this.getFilmHeight()/a},getEffectiveFOV:function(){return 2*R.RAD2DEG*Math.atan(Math.tan(.5*R.DEG2RAD*this.fov)/this.zoom)},getFilmWidth:function(){return this.filmGauge*Math.min(this.aspect,1)},\ngetFilmHeight:function(){return this.filmGauge/Math.max(this.aspect,1)},setViewOffset:function(a,b,c,d,e,f){this.aspect=a/b;this.view={fullWidth:a,fullHeight:b,offsetX:c,offsetY:d,width:e,height:f};this.updateProjectionMatrix()},clearViewOffset:function(){this.view=null;this.updateProjectionMatrix()},updateProjectionMatrix:function(){var a=this.near,b=a*Math.tan(.5*R.DEG2RAD*this.fov)/this.zoom,c=2*b,d=this.aspect*c,e=-.5*d,f=this.view;if(null!==f)var g=f.fullWidth,h=f.fullHeight,e=e+f.offsetX*d/\ng,b=b-f.offsetY*c/h,d=f.width/g*d,c=f.height/h*c;f=this.filmOffset;0!==f&&(e+=a*f/this.getFilmWidth());this.projectionMatrix.makePerspective(e,e+d,b,b-c,a,this.far)},toJSON:function(a){a=w.prototype.toJSON.call(this,a);a.object.fov=this.fov;a.object.zoom=this.zoom;a.object.near=this.near;a.object.far=this.far;a.object.focus=this.focus;a.object.aspect=this.aspect;null!==this.view&&(a.object.view=Object.assign({},this.view));a.object.filmGauge=this.filmGauge;a.object.filmOffset=this.filmOffset;return a}});\nObject.assign(Qa.prototype,{clone:function(){return(new this.constructor).copy(this)},copy:function(a){this.a=a.a;this.b=a.b;this.c=a.c;this.normal.copy(a.normal);this.color.copy(a.color);this.materialIndex=a.materialIndex;for(var b=0,c=a.vertexNormals.length;b<c;b++)this.vertexNormals[b]=a.vertexNormals[b].clone();b=0;for(c=a.vertexColors.length;b<c;b++)this.vertexColors[b]=a.vertexColors[b].clone();return this}});var Rd=0;Object.assign(Q.prototype,na.prototype,{isGeometry:!0,applyMatrix:function(a){for(var b=\n(new qa).getNormalMatrix(a),c=0,d=this.vertices.length;c<d;c++)this.vertices[c].applyMatrix4(a);c=0;for(d=this.faces.length;c<d;c++){a=this.faces[c];a.normal.applyMatrix3(b).normalize();for(var e=0,f=a.vertexNormals.length;e<f;e++)a.vertexNormals[e].applyMatrix3(b).normalize()}null!==this.boundingBox&&this.computeBoundingBox();null!==this.boundingSphere&&this.computeBoundingSphere();this.normalsNeedUpdate=this.verticesNeedUpdate=!0;return this},rotateX:function(){var a=new O;return function(b){a.makeRotationX(b);\nthis.applyMatrix(a);return this}}(),rotateY:function(){var a=new O;return function(b){a.makeRotationY(b);this.applyMatrix(a);return this}}(),rotateZ:function(){var a=new O;return function(b){a.makeRotationZ(b);this.applyMatrix(a);return this}}(),translate:function(){var a=new O;return function(b,c,d){a.makeTranslation(b,c,d);this.applyMatrix(a);return this}}(),scale:function(){var a=new O;return function(b,c,d){a.makeScale(b,c,d);this.applyMatrix(a);return this}}(),lookAt:function(){var a=new w;return function(b){a.lookAt(b);\na.updateMatrix();this.applyMatrix(a.matrix)}}(),fromBufferGeometry:function(a){function b(a,b,d,e){var f=void 0!==g?[q[a].clone(),q[b].clone(),q[d].clone()]:[],t=void 0!==h?[c.colors[a].clone(),c.colors[b].clone(),c.colors[d].clone()]:[];e=new Qa(a,b,d,f,t,e);c.faces.push(e);void 0!==k&&c.faceVertexUvs[0].push([p[a].clone(),p[b].clone(),p[d].clone()]);void 0!==l&&c.faceVertexUvs[1].push([m[a].clone(),m[b].clone(),m[d].clone()])}var c=this,d=null!==a.index?a.index.array:void 0,e=a.attributes,f=e.position.array,\ng=void 0!==e.normal?e.normal.array:void 0,h=void 0!==e.color?e.color.array:void 0,k=void 0!==e.uv?e.uv.array:void 0,l=void 0!==e.uv2?e.uv2.array:void 0;void 0!==l&&(this.faceVertexUvs[1]=[]);for(var q=[],p=[],m=[],r=e=0;e<f.length;e+=3,r+=2)c.vertices.push(new n(f[e],f[e+1],f[e+2])),void 0!==g&&q.push(new n(g[e],g[e+1],g[e+2])),void 0!==h&&c.colors.push(new C(h[e],h[e+1],h[e+2])),void 0!==k&&p.push(new D(k[r],k[r+1])),void 0!==l&&m.push(new D(l[r],l[r+1]));var v=a.groups;if(0<v.length)for(e=0;e<v.length;e++)for(var f=\nv[e],u=f.start,x=f.count,r=u,u=u+x;r<u;r+=3)void 0!==d?b(d[r],d[r+1],d[r+2],f.materialIndex):b(r,r+1,r+2,f.materialIndex);else if(void 0!==d)for(e=0;e<d.length;e+=3)b(d[e],d[e+1],d[e+2]);else for(e=0;e<f.length/3;e+=3)b(e,e+1,e+2);this.computeFaceNormals();null!==a.boundingBox&&(this.boundingBox=a.boundingBox.clone());null!==a.boundingSphere&&(this.boundingSphere=a.boundingSphere.clone());return this},center:function(){this.computeBoundingBox();var a=this.boundingBox.getCenter().negate();this.translate(a.x,\na.y,a.z);return a},normalize:function(){this.computeBoundingSphere();var a=this.boundingSphere.center,b=this.boundingSphere.radius,b=0===b?1:1/b,c=new O;c.set(b,0,0,-b*a.x,0,b,0,-b*a.y,0,0,b,-b*a.z,0,0,0,1);this.applyMatrix(c);return this},computeFaceNormals:function(){for(var a=new n,b=new n,c=0,d=this.faces.length;c<d;c++){var e=this.faces[c],f=this.vertices[e.a],g=this.vertices[e.b];a.subVectors(this.vertices[e.c],g);b.subVectors(f,g);a.cross(b);a.normalize();e.normal.copy(a)}},computeVertexNormals:function(a){void 0===\na&&(a=!0);var b;var c=Array(this.vertices.length);var d=0;for(b=this.vertices.length;d<b;d++)c[d]=new n;if(a){var e=new n,f=new n;a=0;for(d=this.faces.length;a<d;a++){b=this.faces[a];var g=this.vertices[b.a];var h=this.vertices[b.b];var k=this.vertices[b.c];e.subVectors(k,h);f.subVectors(g,h);e.cross(f);c[b.a].add(e);c[b.b].add(e);c[b.c].add(e)}}else for(this.computeFaceNormals(),a=0,d=this.faces.length;a<d;a++)b=this.faces[a],c[b.a].add(b.normal),c[b.b].add(b.normal),c[b.c].add(b.normal);d=0;for(b=\nthis.vertices.length;d<b;d++)c[d].normalize();a=0;for(d=this.faces.length;a<d;a++)b=this.faces[a],g=b.vertexNormals,3===g.length?(g[0].copy(c[b.a]),g[1].copy(c[b.b]),g[2].copy(c[b.c])):(g[0]=c[b.a].clone(),g[1]=c[b.b].clone(),g[2]=c[b.c].clone());0<this.faces.length&&(this.normalsNeedUpdate=!0)},computeFlatVertexNormals:function(){var a;this.computeFaceNormals();var b=0;for(a=this.faces.length;b<a;b++){var c=this.faces[b];var d=c.vertexNormals;3===d.length?(d[0].copy(c.normal),d[1].copy(c.normal),\nd[2].copy(c.normal)):(d[0]=c.normal.clone(),d[1]=c.normal.clone(),d[2]=c.normal.clone())}0<this.faces.length&&(this.normalsNeedUpdate=!0)},computeMorphNormals:function(){var a,b;var c=0;for(b=this.faces.length;c<b;c++){var d=this.faces[c];d.__originalFaceNormal?d.__originalFaceNormal.copy(d.normal):d.__originalFaceNormal=d.normal.clone();d.__originalVertexNormals||(d.__originalVertexNormals=[]);var e=0;for(a=d.vertexNormals.length;e<a;e++)d.__originalVertexNormals[e]?d.__originalVertexNormals[e].copy(d.vertexNormals[e]):\nd.__originalVertexNormals[e]=d.vertexNormals[e].clone()}var f=new Q;f.faces=this.faces;e=0;for(a=this.morphTargets.length;e<a;e++){if(!this.morphNormals[e]){this.morphNormals[e]={};this.morphNormals[e].faceNormals=[];this.morphNormals[e].vertexNormals=[];d=this.morphNormals[e].faceNormals;var g=this.morphNormals[e].vertexNormals;c=0;for(b=this.faces.length;c<b;c++){var h=new n;var k={a:new n,b:new n,c:new n};d.push(h);g.push(k)}}g=this.morphNormals[e];f.vertices=this.morphTargets[e].vertices;f.computeFaceNormals();\nf.computeVertexNormals();c=0;for(b=this.faces.length;c<b;c++)d=this.faces[c],h=g.faceNormals[c],k=g.vertexNormals[c],h.copy(d.normal),k.a.copy(d.vertexNormals[0]),k.b.copy(d.vertexNormals[1]),k.c.copy(d.vertexNormals[2])}c=0;for(b=this.faces.length;c<b;c++)d=this.faces[c],d.normal=d.__originalFaceNormal,d.vertexNormals=d.__originalVertexNormals},computeLineDistances:function(){for(var a=0,b=this.vertices,c=0,d=b.length;c<d;c++)0<c&&(a+=b[c].distanceTo(b[c-1])),this.lineDistances[c]=a},computeBoundingBox:function(){null===\nthis.boundingBox&&(this.boundingBox=new Pa);this.boundingBox.setFromPoints(this.vertices)},computeBoundingSphere:function(){null===this.boundingSphere&&(this.boundingSphere=new Ca);this.boundingSphere.setFromPoints(this.vertices)},merge:function(a,b,c){if(a&&a.isGeometry){var d,e=this.vertices.length,f=this.vertices,g=a.vertices,h=this.faces,k=a.faces,l=this.faceVertexUvs[0],q=a.faceVertexUvs[0],p=this.colors,m=a.colors;void 0===c&&(c=0);void 0!==b&&(d=(new qa).getNormalMatrix(b));a=0;for(var r=g.length;a<\nr;a++){var n=g[a].clone();void 0!==b&&n.applyMatrix4(b);f.push(n)}a=0;for(r=m.length;a<r;a++)p.push(m[a].clone());a=0;for(r=k.length;a<r;a++){var g=k[a],u=g.vertexNormals,m=g.vertexColors,p=new Qa(g.a+e,g.b+e,g.c+e);p.normal.copy(g.normal);void 0!==d&&p.normal.applyMatrix3(d).normalize();b=0;for(f=u.length;b<f;b++)n=u[b].clone(),void 0!==d&&n.applyMatrix3(d).normalize(),p.vertexNormals.push(n);p.color.copy(g.color);b=0;for(f=m.length;b<f;b++)n=m[b],p.vertexColors.push(n.clone());p.materialIndex=g.materialIndex+\nc;h.push(p)}a=0;for(r=q.length;a<r;a++)if(c=q[a],d=[],void 0!==c){b=0;for(f=c.length;b<f;b++)d.push(c[b].clone());l.push(d)}}else console.error(\"THREE.Geometry.merge(): geometry not an instance of THREE.Geometry.\",a)},mergeMesh:function(a){a&&a.isMesh?(a.matrixAutoUpdate&&a.updateMatrix(),this.merge(a.geometry,a.matrix)):console.error(\"THREE.Geometry.mergeMesh(): mesh not an instance of THREE.Mesh.\",a)},mergeVertices:function(){var a={},b=[],c=[],d=Math.pow(10,4),e;var f=0;for(e=this.vertices.length;f<\ne;f++){var g=this.vertices[f];g=Math.round(g.x*d)+\"_\"+Math.round(g.y*d)+\"_\"+Math.round(g.z*d);void 0===a[g]?(a[g]=f,b.push(this.vertices[f]),c[f]=b.length-1):c[f]=c[a[g]]}a=[];f=0;for(e=this.faces.length;f<e;f++)for(d=this.faces[f],d.a=c[d.a],d.b=c[d.b],d.c=c[d.c],d=[d.a,d.b,d.c],g=0;3>g;g++)if(d[g]===d[(g+1)%3]){a.push(f);break}for(f=a.length-1;0<=f;f--)for(d=a[f],this.faces.splice(d,1),c=0,e=this.faceVertexUvs.length;c<e;c++)this.faceVertexUvs[c].splice(d,1);f=this.vertices.length-b.length;this.vertices=\nb;return f},sortFacesByMaterialIndex:function(){for(var a=this.faces,b=a.length,c=0;c<b;c++)a[c]._id=c;a.sort(function(a,b){return a.materialIndex-b.materialIndex});var d=this.faceVertexUvs[0],e=this.faceVertexUvs[1],f,g;d&&d.length===b&&(f=[]);e&&e.length===b&&(g=[]);for(c=0;c<b;c++){var h=a[c]._id;f&&f.push(d[h]);g&&g.push(e[h])}f&&(this.faceVertexUvs[0]=f);g&&(this.faceVertexUvs[1]=g)},toJSON:function(){function a(a,b,c){return c?a|1<<b:a&~(1<<b)}function b(a){var b=a.x.toString()+a.y.toString()+\na.z.toString();if(void 0!==l[b])return l[b];l[b]=k.length/3;k.push(a.x,a.y,a.z);return l[b]}function c(a){var b=a.r.toString()+a.g.toString()+a.b.toString();if(void 0!==p[b])return p[b];p[b]=q.length;q.push(a.getHex());return p[b]}function d(a){var b=a.x.toString()+a.y.toString();if(void 0!==r[b])return r[b];r[b]=m.length/2;m.push(a.x,a.y);return r[b]}var e={metadata:{version:4.5,type:\"Geometry\",generator:\"Geometry.toJSON\"}};e.uuid=this.uuid;e.type=this.type;\"\"!==this.name&&(e.name=this.name);if(void 0!==\nthis.parameters){var f=this.parameters,g;for(g in f)void 0!==f[g]&&(e[g]=f[g]);return e}f=[];for(g=0;g<this.vertices.length;g++){var h=this.vertices[g];f.push(h.x,h.y,h.z)}var h=[],k=[],l={},q=[],p={},m=[],r={};for(g=0;g<this.faces.length;g++){var n=this.faces[g],u=void 0!==this.faceVertexUvs[0][g],x=0<n.normal.length(),y=0<n.vertexNormals.length,A=1!==n.color.r||1!==n.color.g||1!==n.color.b,I=0<n.vertexColors.length,B=0,B=a(B,0,0),B=a(B,1,!0),B=a(B,2,!1),B=a(B,3,u),B=a(B,4,x),B=a(B,5,y),B=a(B,6,\nA),B=a(B,7,I);h.push(B);h.push(n.a,n.b,n.c);h.push(n.materialIndex);u&&(u=this.faceVertexUvs[0][g],h.push(d(u[0]),d(u[1]),d(u[2])));x&&h.push(b(n.normal));y&&(x=n.vertexNormals,h.push(b(x[0]),b(x[1]),b(x[2])));A&&h.push(c(n.color));I&&(n=n.vertexColors,h.push(c(n[0]),c(n[1]),c(n[2])))}e.data={};e.data.vertices=f;e.data.normals=k;0<q.length&&(e.data.colors=q);0<m.length&&(e.data.uvs=[m]);e.data.faces=h;return e},clone:function(){return(new Q).copy(this)},copy:function(a){var b,c,d;this.vertices=[];\nthis.colors=[];this.faces=[];this.faceVertexUvs=[[]];this.morphTargets=[];this.morphNormals=[];this.skinWeights=[];this.skinIndices=[];this.lineDistances=[];this.boundingSphere=this.boundingBox=null;this.name=a.name;var e=a.vertices;var f=0;for(b=e.length;f<b;f++)this.vertices.push(e[f].clone());e=a.colors;f=0;for(b=e.length;f<b;f++)this.colors.push(e[f].clone());e=a.faces;f=0;for(b=e.length;f<b;f++)this.faces.push(e[f].clone());f=0;for(b=a.faceVertexUvs.length;f<b;f++){var g=a.faceVertexUvs[f];void 0===\nthis.faceVertexUvs[f]&&(this.faceVertexUvs[f]=[]);e=0;for(c=g.length;e<c;e++){var h=g[e],k=[];var l=0;for(d=h.length;l<d;l++)k.push(h[l].clone());this.faceVertexUvs[f].push(k)}}l=a.morphTargets;f=0;for(b=l.length;f<b;f++){d={};d.name=l[f].name;if(void 0!==l[f].vertices)for(d.vertices=[],e=0,c=l[f].vertices.length;e<c;e++)d.vertices.push(l[f].vertices[e].clone());if(void 0!==l[f].normals)for(d.normals=[],e=0,c=l[f].normals.length;e<c;e++)d.normals.push(l[f].normals[e].clone());this.morphTargets.push(d)}l=\na.morphNormals;f=0;for(b=l.length;f<b;f++){d={};if(void 0!==l[f].vertexNormals)for(d.vertexNormals=[],e=0,c=l[f].vertexNormals.length;e<c;e++)g=l[f].vertexNormals[e],h={},h.a=g.a.clone(),h.b=g.b.clone(),h.c=g.c.clone(),d.vertexNormals.push(h);if(void 0!==l[f].faceNormals)for(d.faceNormals=[],e=0,c=l[f].faceNormals.length;e<c;e++)d.faceNormals.push(l[f].faceNormals[e].clone());this.morphNormals.push(d)}e=a.skinWeights;f=0;for(b=e.length;f<b;f++)this.skinWeights.push(e[f].clone());e=a.skinIndices;f=\n0;for(b=e.length;f<b;f++)this.skinIndices.push(e[f].clone());e=a.lineDistances;f=0;for(b=e.length;f<b;f++)this.lineDistances.push(e[f]);f=a.boundingBox;null!==f&&(this.boundingBox=f.clone());f=a.boundingSphere;null!==f&&(this.boundingSphere=f.clone());this.elementsNeedUpdate=a.elementsNeedUpdate;this.verticesNeedUpdate=a.verticesNeedUpdate;this.uvsNeedUpdate=a.uvsNeedUpdate;this.normalsNeedUpdate=a.normalsNeedUpdate;this.colorsNeedUpdate=a.colorsNeedUpdate;this.lineDistancesNeedUpdate=a.lineDistancesNeedUpdate;\nthis.groupsNeedUpdate=a.groupsNeedUpdate;return this},dispose:function(){this.dispatchEvent({type:\"dispose\"})}});Object.defineProperty(K.prototype,\"needsUpdate\",{set:function(a){!0===a&&this.version++}});Object.assign(K.prototype,{isBufferAttribute:!0,setArray:function(a){if(Array.isArray(a))throw new TypeError(\"THREE.BufferAttribute: array should be a Typed Array.\");this.count=void 0!==a?a.length/this.itemSize:0;this.array=a},setDynamic:function(a){this.dynamic=a;return this},copy:function(a){this.array=\nnew a.array.constructor(a.array);this.itemSize=a.itemSize;this.count=a.count;this.normalized=a.normalized;this.dynamic=a.dynamic;return this},copyAt:function(a,b,c){a*=this.itemSize;c*=b.itemSize;for(var d=0,e=this.itemSize;d<e;d++)this.array[a+d]=b.array[c+d];return this},copyArray:function(a){this.array.set(a);return this},copyColorsArray:function(a){for(var b=this.array,c=0,d=0,e=a.length;d<e;d++){var f=a[d];void 0===f&&(console.warn(\"THREE.BufferAttribute.copyColorsArray(): color is undefined\",\nd),f=new C);b[c++]=f.r;b[c++]=f.g;b[c++]=f.b}return this},copyIndicesArray:function(a){for(var b=this.array,c=0,d=0,e=a.length;d<e;d++){var f=a[d];b[c++]=f.a;b[c++]=f.b;b[c++]=f.c}return this},copyVector2sArray:function(a){for(var b=this.array,c=0,d=0,e=a.length;d<e;d++){var f=a[d];void 0===f&&(console.warn(\"THREE.BufferAttribute.copyVector2sArray(): vector is undefined\",d),f=new D);b[c++]=f.x;b[c++]=f.y}return this},copyVector3sArray:function(a){for(var b=this.array,c=0,d=0,e=a.length;d<e;d++){var f=\na[d];void 0===f&&(console.warn(\"THREE.BufferAttribute.copyVector3sArray(): vector is undefined\",d),f=new n);b[c++]=f.x;b[c++]=f.y;b[c++]=f.z}return this},copyVector4sArray:function(a){for(var b=this.array,c=0,d=0,e=a.length;d<e;d++){var f=a[d];void 0===f&&(console.warn(\"THREE.BufferAttribute.copyVector4sArray(): vector is undefined\",d),f=new S);b[c++]=f.x;b[c++]=f.y;b[c++]=f.z;b[c++]=f.w}return this},set:function(a,b){void 0===b&&(b=0);this.array.set(a,b);return this},getX:function(a){return this.array[a*\nthis.itemSize]},setX:function(a,b){this.array[a*this.itemSize]=b;return this},getY:function(a){return this.array[a*this.itemSize+1]},setY:function(a,b){this.array[a*this.itemSize+1]=b;return this},getZ:function(a){return this.array[a*this.itemSize+2]},setZ:function(a,b){this.array[a*this.itemSize+2]=b;return this},getW:function(a){return this.array[a*this.itemSize+3]},setW:function(a,b){this.array[a*this.itemSize+3]=b;return this},setXY:function(a,b,c){a*=this.itemSize;this.array[a+0]=b;this.array[a+\n1]=c;return this},setXYZ:function(a,b,c,d){a*=this.itemSize;this.array[a+0]=b;this.array[a+1]=c;this.array[a+2]=d;return this},setXYZW:function(a,b,c,d,e){a*=this.itemSize;this.array[a+0]=b;this.array[a+1]=c;this.array[a+2]=d;this.array[a+3]=e;return this},onUpload:function(a){this.onUploadCallback=a;return this},clone:function(){return(new this.constructor(this.array,this.itemSize)).copy(this)}});pc.prototype=Object.create(K.prototype);pc.prototype.constructor=pc;qc.prototype=Object.create(K.prototype);\nqc.prototype.constructor=qc;rc.prototype=Object.create(K.prototype);rc.prototype.constructor=rc;sc.prototype=Object.create(K.prototype);sc.prototype.constructor=sc;db.prototype=Object.create(K.prototype);db.prototype.constructor=db;tc.prototype=Object.create(K.prototype);tc.prototype.constructor=tc;eb.prototype=Object.create(K.prototype);eb.prototype.constructor=eb;z.prototype=Object.create(K.prototype);z.prototype.constructor=z;uc.prototype=Object.create(K.prototype);uc.prototype.constructor=uc;\nObject.assign(Le.prototype,{computeGroups:function(a){var b=[],c=void 0;a=a.faces;for(var d=0;d<a.length;d++){var e=a[d];if(e.materialIndex!==c){c=e.materialIndex;void 0!==f&&(f.count=3*d-f.start,b.push(f));var f={start:3*d,materialIndex:c}}}void 0!==f&&(f.count=3*d-f.start,b.push(f));this.groups=b},fromGeometry:function(a){var b=a.faces,c=a.vertices,d=a.faceVertexUvs,e=d[0]&&0<d[0].length,f=d[1]&&0<d[1].length,g=a.morphTargets,h=g.length;if(0<h){var k=[];for(var l=0;l<h;l++)k[l]=[];this.morphTargets.position=\nk}var q=a.morphNormals,p=q.length;if(0<p){var m=[];for(l=0;l<p;l++)m[l]=[];this.morphTargets.normal=m}for(var n=a.skinIndices,v=a.skinWeights,u=n.length===c.length,x=v.length===c.length,l=0;l<b.length;l++){var y=b[l];this.vertices.push(c[y.a],c[y.b],c[y.c]);var A=y.vertexNormals;3===A.length?this.normals.push(A[0],A[1],A[2]):(A=y.normal,this.normals.push(A,A,A));A=y.vertexColors;3===A.length?this.colors.push(A[0],A[1],A[2]):(A=y.color,this.colors.push(A,A,A));!0===e&&(A=d[0][l],void 0!==A?this.uvs.push(A[0],\nA[1],A[2]):(console.warn(\"THREE.DirectGeometry.fromGeometry(): Undefined vertexUv \",l),this.uvs.push(new D,new D,new D)));!0===f&&(A=d[1][l],void 0!==A?this.uvs2.push(A[0],A[1],A[2]):(console.warn(\"THREE.DirectGeometry.fromGeometry(): Undefined vertexUv2 \",l),this.uvs2.push(new D,new D,new D)));for(A=0;A<h;A++){var I=g[A].vertices;k[A].push(I[y.a],I[y.b],I[y.c])}for(A=0;A<p;A++)I=q[A].vertexNormals[l],m[A].push(I.a,I.b,I.c);u&&this.skinIndices.push(n[y.a],n[y.b],n[y.c]);x&&this.skinWeights.push(v[y.a],\nv[y.b],v[y.c])}this.computeGroups(a);this.verticesNeedUpdate=a.verticesNeedUpdate;this.normalsNeedUpdate=a.normalsNeedUpdate;this.colorsNeedUpdate=a.colorsNeedUpdate;this.uvsNeedUpdate=a.uvsNeedUpdate;this.groupsNeedUpdate=a.groupsNeedUpdate;return this}});F.MaxIndex=65535;Object.assign(F.prototype,na.prototype,{isBufferGeometry:!0,getIndex:function(){return this.index},setIndex:function(a){Array.isArray(a)?this.index=new (65535<Sd(a)?eb:db)(a,1):this.index=a},addAttribute:function(a,b,c){if(b&&b.isBufferAttribute||\nb&&b.isInterleavedBufferAttribute)if(\"index\"===a)console.warn(\"THREE.BufferGeometry.addAttribute: Use .setIndex() for index attribute.\"),this.setIndex(b);else return this.attributes[a]=b,this;else console.warn(\"THREE.BufferGeometry: .addAttribute() now expects ( name, attribute ).\"),this.addAttribute(a,new K(b,c))},getAttribute:function(a){return this.attributes[a]},removeAttribute:function(a){delete this.attributes[a];return this},addGroup:function(a,b,c){this.groups.push({start:a,count:b,materialIndex:void 0!==\nc?c:0})},clearGroups:function(){this.groups=[]},setDrawRange:function(a,b){this.drawRange.start=a;this.drawRange.count=b},applyMatrix:function(a){var b=this.attributes.position;void 0!==b&&(a.applyToBufferAttribute(b),b.needsUpdate=!0);b=this.attributes.normal;void 0!==b&&((new qa).getNormalMatrix(a).applyToBufferAttribute(b),b.needsUpdate=!0);null!==this.boundingBox&&this.computeBoundingBox();null!==this.boundingSphere&&this.computeBoundingSphere();return this},rotateX:function(){var a=new O;return function(b){a.makeRotationX(b);\nthis.applyMatrix(a);return this}}(),rotateY:function(){var a=new O;return function(b){a.makeRotationY(b);this.applyMatrix(a);return this}}(),rotateZ:function(){var a=new O;return function(b){a.makeRotationZ(b);this.applyMatrix(a);return this}}(),translate:function(){var a=new O;return function(b,c,d){a.makeTranslation(b,c,d);this.applyMatrix(a);return this}}(),scale:function(){var a=new O;return function(b,c,d){a.makeScale(b,c,d);this.applyMatrix(a);return this}}(),lookAt:function(){var a=new w;return function(b){a.lookAt(b);\na.updateMatrix();this.applyMatrix(a.matrix)}}(),center:function(){this.computeBoundingBox();var a=this.boundingBox.getCenter().negate();this.translate(a.x,a.y,a.z);return a},setFromObject:function(a){var b=a.geometry;if(a.isPoints||a.isLine){a=new z(3*b.vertices.length,3);var c=new z(3*b.colors.length,3);this.addAttribute(\"position\",a.copyVector3sArray(b.vertices));this.addAttribute(\"color\",c.copyColorsArray(b.colors));b.lineDistances&&b.lineDistances.length===b.vertices.length&&(a=new z(b.lineDistances.length,\n1),this.addAttribute(\"lineDistance\",a.copyArray(b.lineDistances)));null!==b.boundingSphere&&(this.boundingSphere=b.boundingSphere.clone());null!==b.boundingBox&&(this.boundingBox=b.boundingBox.clone())}else a.isMesh&&b&&b.isGeometry&&this.fromGeometry(b);return this},updateFromObject:function(a){var b=a.geometry;if(a.isMesh){var c=b.__directGeometry;!0===b.elementsNeedUpdate&&(c=void 0,b.elementsNeedUpdate=!1);if(void 0===c)return this.fromGeometry(b);c.verticesNeedUpdate=b.verticesNeedUpdate;c.normalsNeedUpdate=\nb.normalsNeedUpdate;c.colorsNeedUpdate=b.colorsNeedUpdate;c.uvsNeedUpdate=b.uvsNeedUpdate;c.groupsNeedUpdate=b.groupsNeedUpdate;b.verticesNeedUpdate=!1;b.normalsNeedUpdate=!1;b.colorsNeedUpdate=!1;b.uvsNeedUpdate=!1;b.groupsNeedUpdate=!1;b=c}!0===b.verticesNeedUpdate&&(c=this.attributes.position,void 0!==c&&(c.copyVector3sArray(b.vertices),c.needsUpdate=!0),b.verticesNeedUpdate=!1);!0===b.normalsNeedUpdate&&(c=this.attributes.normal,void 0!==c&&(c.copyVector3sArray(b.normals),c.needsUpdate=!0),b.normalsNeedUpdate=\n!1);!0===b.colorsNeedUpdate&&(c=this.attributes.color,void 0!==c&&(c.copyColorsArray(b.colors),c.needsUpdate=!0),b.colorsNeedUpdate=!1);b.uvsNeedUpdate&&(c=this.attributes.uv,void 0!==c&&(c.copyVector2sArray(b.uvs),c.needsUpdate=!0),b.uvsNeedUpdate=!1);b.lineDistancesNeedUpdate&&(c=this.attributes.lineDistance,void 0!==c&&(c.copyArray(b.lineDistances),c.needsUpdate=!0),b.lineDistancesNeedUpdate=!1);b.groupsNeedUpdate&&(b.computeGroups(a.geometry),this.groups=b.groups,b.groupsNeedUpdate=!1);return this},\nfromGeometry:function(a){a.__directGeometry=(new Le).fromGeometry(a);return this.fromDirectGeometry(a.__directGeometry)},fromDirectGeometry:function(a){var b=new Float32Array(3*a.vertices.length);this.addAttribute(\"position\",(new K(b,3)).copyVector3sArray(a.vertices));0<a.normals.length&&(b=new Float32Array(3*a.normals.length),this.addAttribute(\"normal\",(new K(b,3)).copyVector3sArray(a.normals)));0<a.colors.length&&(b=new Float32Array(3*a.colors.length),this.addAttribute(\"color\",(new K(b,3)).copyColorsArray(a.colors)));\n0<a.uvs.length&&(b=new Float32Array(2*a.uvs.length),this.addAttribute(\"uv\",(new K(b,2)).copyVector2sArray(a.uvs)));0<a.uvs2.length&&(b=new Float32Array(2*a.uvs2.length),this.addAttribute(\"uv2\",(new K(b,2)).copyVector2sArray(a.uvs2)));0<a.indices.length&&(b=new (65535<Sd(a.indices)?Uint32Array:Uint16Array)(3*a.indices.length),this.setIndex((new K(b,1)).copyIndicesArray(a.indices)));this.groups=a.groups;for(var c in a.morphTargets){for(var b=[],d=a.morphTargets[c],e=0,f=d.length;e<f;e++){var g=d[e],\nh=new z(3*g.length,3);b.push(h.copyVector3sArray(g))}this.morphAttributes[c]=b}0<a.skinIndices.length&&(c=new z(4*a.skinIndices.length,4),this.addAttribute(\"skinIndex\",c.copyVector4sArray(a.skinIndices)));0<a.skinWeights.length&&(c=new z(4*a.skinWeights.length,4),this.addAttribute(\"skinWeight\",c.copyVector4sArray(a.skinWeights)));null!==a.boundingSphere&&(this.boundingSphere=a.boundingSphere.clone());null!==a.boundingBox&&(this.boundingBox=a.boundingBox.clone());return this},computeBoundingBox:function(){null===\nthis.boundingBox&&(this.boundingBox=new Pa);var a=this.attributes.position;void 0!==a?this.boundingBox.setFromBufferAttribute(a):this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox: Computed min/max have NaN values. The \"position\" attribute is likely to have NaN values.',this)},computeBoundingSphere:function(){var a=new Pa,b=new n;return function(){null===this.boundingSphere&&\n(this.boundingSphere=new Ca);var c=this.attributes.position;if(c){var d=this.boundingSphere.center;a.setFromBufferAttribute(c);a.getCenter(d);for(var e=0,f=0,g=c.count;f<g;f++)b.x=c.getX(f),b.y=c.getY(f),b.z=c.getZ(f),e=Math.max(e,d.distanceToSquared(b));this.boundingSphere.radius=Math.sqrt(e);isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The \"position\" attribute is likely to have NaN values.',this)}}}(),computeFaceNormals:function(){},\ncomputeVertexNormals:function(){var a=this.index,b=this.attributes,c=this.groups;if(b.position){var d=b.position.array;if(void 0===b.normal)this.addAttribute(\"normal\",new K(new Float32Array(d.length),3));else for(var e=b.normal.array,f=0,g=e.length;f<g;f++)e[f]=0;var e=b.normal.array,h=new n,k=new n,l=new n,q=new n,p=new n;if(a){a=a.array;0===c.length&&this.addGroup(0,a.length);for(var m=0,r=c.length;m<r;++m){f=c[m];g=f.start;var v=f.count;f=g;for(g+=v;f<g;f+=3){v=3*a[f+0];var u=3*a[f+1];var x=3*\na[f+2];h.fromArray(d,v);k.fromArray(d,u);l.fromArray(d,x);q.subVectors(l,k);p.subVectors(h,k);q.cross(p);e[v]+=q.x;e[v+1]+=q.y;e[v+2]+=q.z;e[u]+=q.x;e[u+1]+=q.y;e[u+2]+=q.z;e[x]+=q.x;e[x+1]+=q.y;e[x+2]+=q.z}}}else for(f=0,g=d.length;f<g;f+=9)h.fromArray(d,f),k.fromArray(d,f+3),l.fromArray(d,f+6),q.subVectors(l,k),p.subVectors(h,k),q.cross(p),e[f]=q.x,e[f+1]=q.y,e[f+2]=q.z,e[f+3]=q.x,e[f+4]=q.y,e[f+5]=q.z,e[f+6]=q.x,e[f+7]=q.y,e[f+8]=q.z;this.normalizeNormals();b.normal.needsUpdate=!0}},merge:function(a,\nb){if(a&&a.isBufferGeometry){void 0===b&&(b=0);var c=this.attributes,d;for(d in c)if(void 0!==a.attributes[d])for(var e=c[d].array,f=a.attributes[d],g=f.array,h=0,f=f.itemSize*b;h<g.length;h++,f++)e[f]=g[h];return this}console.error(\"THREE.BufferGeometry.merge(): geometry not an instance of THREE.BufferGeometry.\",a)},normalizeNormals:function(){var a=new n;return function(){for(var b=this.attributes.normal,c=0,d=b.count;c<d;c++)a.x=b.getX(c),a.y=b.getY(c),a.z=b.getZ(c),a.normalize(),b.setXYZ(c,a.x,\na.y,a.z)}}(),toNonIndexed:function(){if(null===this.index)return console.warn(\"THREE.BufferGeometry.toNonIndexed(): Geometry is already non-indexed.\"),this;var a=new F,b=this.index.array,c=this.attributes,d;for(d in c){for(var e=c[d],f=e.array,e=e.itemSize,g=new f.constructor(b.length*e),h,k=0,l=0,q=b.length;l<q;l++){h=b[l]*e;for(var m=0;m<e;m++)g[k++]=f[h++]}a.addAttribute(d,new K(g,e))}return a},toJSON:function(){var a={metadata:{version:4.5,type:\"BufferGeometry\",generator:\"BufferGeometry.toJSON\"}};\na.uuid=this.uuid;a.type=this.type;\"\"!==this.name&&(a.name=this.name);if(void 0!==this.parameters){var b=this.parameters;for(var c in b)void 0!==b[c]&&(a[c]=b[c]);return a}a.data={attributes:{}};var d=this.index;null!==d&&(b=Array.prototype.slice.call(d.array),a.data.index={type:d.array.constructor.name,array:b});d=this.attributes;for(c in d){var e=d[c];b=Array.prototype.slice.call(e.array);a.data.attributes[c]={itemSize:e.itemSize,type:e.array.constructor.name,array:b,normalized:e.normalized}}c=this.groups;\n0<c.length&&(a.data.groups=JSON.parse(JSON.stringify(c)));c=this.boundingSphere;null!==c&&(a.data.boundingSphere={center:c.center.toArray(),radius:c.radius});return a},clone:function(){return(new F).copy(this)},copy:function(a){var b;this.index=null;this.attributes={};this.morphAttributes={};this.groups=[];this.boundingSphere=this.boundingBox=null;this.name=a.name;var c=a.index;null!==c&&this.setIndex(c.clone());c=a.attributes;for(g in c)this.addAttribute(g,c[g].clone());var d=a.morphAttributes;for(g in d){var e=\n[],f=d[g];c=0;for(b=f.length;c<b;c++)e.push(f[c].clone());this.morphAttributes[g]=e}var g=a.groups;c=0;for(b=g.length;c<b;c++)d=g[c],this.addGroup(d.start,d.count,d.materialIndex);g=a.boundingBox;null!==g&&(this.boundingBox=g.clone());g=a.boundingSphere;null!==g&&(this.boundingSphere=g.clone());this.drawRange.start=a.drawRange.start;this.drawRange.count=a.drawRange.count;return this},dispose:function(){this.dispatchEvent({type:\"dispose\"})}});Eb.prototype=Object.create(Q.prototype);Eb.prototype.constructor=\nEb;fb.prototype=Object.create(F.prototype);fb.prototype.constructor=fb;vc.prototype=Object.create(Q.prototype);vc.prototype.constructor=vc;gb.prototype=Object.create(F.prototype);gb.prototype.constructor=gb;sa.prototype=Object.create(P.prototype);sa.prototype.constructor=sa;sa.prototype.isMeshBasicMaterial=!0;sa.prototype.copy=function(a){P.prototype.copy.call(this,a);this.color.copy(a.color);this.map=a.map;this.lightMap=a.lightMap;this.lightMapIntensity=a.lightMapIntensity;this.aoMap=a.aoMap;this.aoMapIntensity=\na.aoMapIntensity;this.specularMap=a.specularMap;this.alphaMap=a.alphaMap;this.envMap=a.envMap;this.combine=a.combine;this.reflectivity=a.reflectivity;this.refractionRatio=a.refractionRatio;this.wireframe=a.wireframe;this.wireframeLinewidth=a.wireframeLinewidth;this.wireframeLinecap=a.wireframeLinecap;this.wireframeLinejoin=a.wireframeLinejoin;this.skinning=a.skinning;this.morphTargets=a.morphTargets;return this};Object.assign(hb.prototype,{set:function(a,b){this.origin.copy(a);this.direction.copy(b);\nreturn this},clone:function(){return(new this.constructor).copy(this)},copy:function(a){this.origin.copy(a.origin);this.direction.copy(a.direction);return this},at:function(a,b){return(b||new n).copy(this.direction).multiplyScalar(a).add(this.origin)},lookAt:function(a){this.direction.copy(a).sub(this.origin).normalize();return this},recast:function(){var a=new n;return function(b){this.origin.copy(this.at(b,a));return this}}(),closestPointToPoint:function(a,b){b=b||new n;b.subVectors(a,this.origin);\na=b.dot(this.direction);return 0>a?b.copy(this.origin):b.copy(this.direction).multiplyScalar(a).add(this.origin)},distanceToPoint:function(a){return Math.sqrt(this.distanceSqToPoint(a))},distanceSqToPoint:function(){var a=new n;return function(b){var c=a.subVectors(b,this.origin).dot(this.direction);if(0>c)return this.origin.distanceToSquared(b);a.copy(this.direction).multiplyScalar(c).add(this.origin);return a.distanceToSquared(b)}}(),distanceSqToSegment:function(){var a=new n,b=new n,c=new n;return function(d,\ne,f,g){a.copy(d).add(e).multiplyScalar(.5);b.copy(e).sub(d).normalize();c.copy(this.origin).sub(a);var h=.5*d.distanceTo(e),k=-this.direction.dot(b),l=c.dot(this.direction),q=-c.dot(b),m=c.lengthSq(),t=Math.abs(1-k*k);if(0<t){d=k*q-l;e=k*l-q;var n=h*t;0<=d?e>=-n?e<=n?(h=1/t,d*=h,e*=h,k=d*(d+k*e+2*l)+e*(k*d+e+2*q)+m):(e=h,d=Math.max(0,-(k*e+l)),k=-d*d+e*(e+2*q)+m):(e=-h,d=Math.max(0,-(k*e+l)),k=-d*d+e*(e+2*q)+m):e<=-n?(d=Math.max(0,-(-k*h+l)),e=0<d?-h:Math.min(Math.max(-h,-q),h),k=-d*d+e*(e+2*q)+m):\ne<=n?(d=0,e=Math.min(Math.max(-h,-q),h),k=e*(e+2*q)+m):(d=Math.max(0,-(k*h+l)),e=0<d?h:Math.min(Math.max(-h,-q),h),k=-d*d+e*(e+2*q)+m)}else e=0<k?-h:h,d=Math.max(0,-(k*e+l)),k=-d*d+e*(e+2*q)+m;f&&f.copy(this.direction).multiplyScalar(d).add(this.origin);g&&g.copy(b).multiplyScalar(e).add(a);return k}}(),intersectSphere:function(){var a=new n;return function(b,c){a.subVectors(b.center,this.origin);var d=a.dot(this.direction),e=a.dot(a)-d*d;b=b.radius*b.radius;if(e>b)return null;b=Math.sqrt(b-e);e=\nd-b;d+=b;return 0>e&&0>d?null:0>e?this.at(d,c):this.at(e,c)}}(),intersectsSphere:function(a){return this.distanceToPoint(a.center)<=a.radius},distanceToPlane:function(a){var b=a.normal.dot(this.direction);if(0===b)return 0===a.distanceToPoint(this.origin)?0:null;a=-(this.origin.dot(a.normal)+a.constant)/b;return 0<=a?a:null},intersectPlane:function(a,b){a=this.distanceToPlane(a);return null===a?null:this.at(a,b)},intersectsPlane:function(a){var b=a.distanceToPoint(this.origin);return 0===b||0>a.normal.dot(this.direction)*\nb?!0:!1},intersectBox:function(a,b){var c=1/this.direction.x;var d=1/this.direction.y;var e=1/this.direction.z,f=this.origin;if(0<=c){var g=(a.min.x-f.x)*c;c*=a.max.x-f.x}else g=(a.max.x-f.x)*c,c*=a.min.x-f.x;if(0<=d){var h=(a.min.y-f.y)*d;d*=a.max.y-f.y}else h=(a.max.y-f.y)*d,d*=a.min.y-f.y;if(g>d||h>c)return null;if(h>g||g!==g)g=h;if(d<c||c!==c)c=d;0<=e?(h=(a.min.z-f.z)*e,a=(a.max.z-f.z)*e):(h=(a.max.z-f.z)*e,a=(a.min.z-f.z)*e);if(g>a||h>c)return null;if(h>g||g!==g)g=h;if(a<c||c!==c)c=a;return 0>\nc?null:this.at(0<=g?g:c,b)},intersectsBox:function(){var a=new n;return function(b){return null!==this.intersectBox(b,a)}}(),intersectTriangle:function(){var a=new n,b=new n,c=new n,d=new n;return function(e,f,g,h,k){b.subVectors(f,e);c.subVectors(g,e);d.crossVectors(b,c);f=this.direction.dot(d);if(0<f){if(h)return null;h=1}else if(0>f)h=-1,f=-f;else return null;a.subVectors(this.origin,e);e=h*this.direction.dot(c.crossVectors(a,c));if(0>e)return null;g=h*this.direction.dot(b.cross(a));if(0>g||e+\ng>f)return null;e=-h*a.dot(d);return 0>e?null:this.at(e/f,k)}}(),applyMatrix4:function(a){this.origin.applyMatrix4(a);this.direction.transformDirection(a);return this},equals:function(a){return a.origin.equals(this.origin)&&a.direction.equals(this.direction)}});Object.assign(Fb.prototype,{set:function(a,b){this.start.copy(a);this.end.copy(b);return this},clone:function(){return(new this.constructor).copy(this)},copy:function(a){this.start.copy(a.start);this.end.copy(a.end);return this},getCenter:function(a){return(a||\nnew n).addVectors(this.start,this.end).multiplyScalar(.5)},delta:function(a){return(a||new n).subVectors(this.end,this.start)},distanceSq:function(){return this.start.distanceToSquared(this.end)},distance:function(){return this.start.distanceTo(this.end)},at:function(a,b){b=b||new n;return this.delta(b).multiplyScalar(a).add(this.start)},closestPointToPointParameter:function(){var a=new n,b=new n;return function(c,d){a.subVectors(c,this.start);b.subVectors(this.end,this.start);c=b.dot(b);c=b.dot(a)/\nc;d&&(c=R.clamp(c,0,1));return c}}(),closestPointToPoint:function(a,b,c){a=this.closestPointToPointParameter(a,b);c=c||new n;return this.delta(c).multiplyScalar(a).add(this.start)},applyMatrix4:function(a){this.start.applyMatrix4(a);this.end.applyMatrix4(a);return this},equals:function(a){return a.start.equals(this.start)&&a.end.equals(this.end)}});Object.assign(Ra,{normal:function(){var a=new n;return function(b,c,d,e){e=e||new n;e.subVectors(d,c);a.subVectors(b,c);e.cross(a);b=e.lengthSq();return 0<\nb?e.multiplyScalar(1/Math.sqrt(b)):e.set(0,0,0)}}(),barycoordFromPoint:function(){var a=new n,b=new n,c=new n;return function(d,e,f,g,h){a.subVectors(g,e);b.subVectors(f,e);c.subVectors(d,e);d=a.dot(a);e=a.dot(b);f=a.dot(c);var k=b.dot(b);g=b.dot(c);var l=d*k-e*e;h=h||new n;if(0===l)return h.set(-2,-1,-1);l=1/l;k=(k*f-e*g)*l;d=(d*g-e*f)*l;return h.set(1-k-d,d,k)}}(),containsPoint:function(){var a=new n;return function(b,c,d,e){b=Ra.barycoordFromPoint(b,c,d,e,a);return 0<=b.x&&0<=b.y&&1>=b.x+b.y}}()});\nObject.assign(Ra.prototype,{set:function(a,b,c){this.a.copy(a);this.b.copy(b);this.c.copy(c);return this},setFromPointsAndIndices:function(a,b,c,d){this.a.copy(a[b]);this.b.copy(a[c]);this.c.copy(a[d]);return this},clone:function(){return(new this.constructor).copy(this)},copy:function(a){this.a.copy(a.a);this.b.copy(a.b);this.c.copy(a.c);return this},area:function(){var a=new n,b=new n;return function(){a.subVectors(this.c,this.b);b.subVectors(this.a,this.b);return.5*a.cross(b).length()}}(),midpoint:function(a){return(a||\nnew n).addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)},normal:function(a){return Ra.normal(this.a,this.b,this.c,a)},plane:function(a){return(a||new za).setFromCoplanarPoints(this.a,this.b,this.c)},barycoordFromPoint:function(a,b){return Ra.barycoordFromPoint(a,this.a,this.b,this.c,b)},containsPoint:function(a){return Ra.containsPoint(a,this.a,this.b,this.c)},closestPointToPoint:function(){var a=new za,b=[new Fb,new Fb,new Fb],c=new n,d=new n;return function(e,f){f=f||new n;var g=Infinity;\na.setFromCoplanarPoints(this.a,this.b,this.c);a.projectPoint(e,c);if(!0===this.containsPoint(c))f.copy(c);else for(b[0].set(this.a,this.b),b[1].set(this.b,this.c),b[2].set(this.c,this.a),e=0;e<b.length;e++){b[e].closestPointToPoint(c,!0,d);var h=c.distanceToSquared(d);h<g&&(g=h,f.copy(d))}return f}}(),equals:function(a){return a.a.equals(this.a)&&a.b.equals(this.b)&&a.c.equals(this.c)}});fa.prototype=Object.assign(Object.create(w.prototype),{constructor:fa,isMesh:!0,setDrawMode:function(a){this.drawMode=\na},copy:function(a){w.prototype.copy.call(this,a);this.drawMode=a.drawMode;return this},updateMorphTargets:function(){var a=this.geometry;if(a.isBufferGeometry){a=a.morphAttributes;var b=Object.keys(a);if(0<b.length){var c=a[b[0]];if(void 0!==c)for(this.morphTargetInfluences=[],this.morphTargetDictionary={},a=0,b=c.length;a<b;a++){var d=c[a].name||String(a);this.morphTargetInfluences.push(0);this.morphTargetDictionary[d]=a}}}else if(c=a.morphTargets,void 0!==c&&0<c.length)for(this.morphTargetInfluences=\n[],this.morphTargetDictionary={},a=0,b=c.length;a<b;a++)d=c[a].name||String(a),this.morphTargetInfluences.push(0),this.morphTargetDictionary[d]=a},raycast:function(){function a(a,b,c,d,e,f,g){Ra.barycoordFromPoint(a,b,c,d,u);e.multiplyScalar(u.x);f.multiplyScalar(u.y);g.multiplyScalar(u.z);e.add(f).add(g);return e.clone()}function b(a,b,c,d,e,f,g,h){if(null===(1===b.side?d.intersectTriangle(g,f,e,!0,h):d.intersectTriangle(e,f,g,2!==b.side,h)))return null;y.copy(h);y.applyMatrix4(a.matrixWorld);b=\nc.ray.origin.distanceTo(y);return b<c.near||b>c.far?null:{distance:b,point:y.clone(),object:a}}function c(c,d,e,f,l,q,m,p){g.fromBufferAttribute(f,q);h.fromBufferAttribute(f,m);k.fromBufferAttribute(f,p);if(c=b(c,c.material,d,e,g,h,k,x))l&&(t.fromBufferAttribute(l,q),r.fromBufferAttribute(l,m),v.fromBufferAttribute(l,p),c.uv=a(x,g,h,k,t,r,v)),c.face=new Qa(q,m,p,Ra.normal(g,h,k)),c.faceIndex=q;return c}var d=new O,e=new hb,f=new Ca,g=new n,h=new n,k=new n,l=new n,q=new n,m=new n,t=new D,r=new D,v=\nnew D,u=new n,x=new n,y=new n;return function(p,n){var u=this.geometry,y=this.material,A=this.matrixWorld;if(void 0!==y&&(null===u.boundingSphere&&u.computeBoundingSphere(),f.copy(u.boundingSphere),f.applyMatrix4(A),!1!==p.ray.intersectsSphere(f)&&(d.getInverse(A),e.copy(p.ray).applyMatrix4(d),null===u.boundingBox||!1!==e.intersectsBox(u.boundingBox)))){var w;if(u.isBufferGeometry){var y=u.index,I=u.attributes.position,A=u.attributes.uv,z;if(null!==y){var D=0;for(z=y.count;D<z;D+=3){u=y.getX(D);var C=\ny.getX(D+1);var J=y.getX(D+2);if(w=c(this,p,e,I,A,u,C,J))w.faceIndex=Math.floor(D/3),n.push(w)}}else for(D=0,z=I.count;D<z;D+=3)if(u=D,C=D+1,J=D+2,w=c(this,p,e,I,A,u,C,J))w.index=u,n.push(w)}else if(u.isGeometry){var A=Array.isArray(y);D=u.vertices;z=u.faces;C=u.faceVertexUvs[0];0<C.length&&(I=C);for(var F=0,L=z.length;F<L;F++){var M=z[F];w=A?y[M.materialIndex]:y;if(void 0!==w){C=D[M.a];J=D[M.b];var T=D[M.c];if(!0===w.morphTargets){var K=u.morphTargets,Q=this.morphTargetInfluences;g.set(0,0,0);h.set(0,\n0,0);k.set(0,0,0);for(var O=0,P=K.length;O<P;O++){var R=Q[O];if(0!==R){var N=K[O].vertices;g.addScaledVector(l.subVectors(N[M.a],C),R);h.addScaledVector(q.subVectors(N[M.b],J),R);k.addScaledVector(m.subVectors(N[M.c],T),R)}}g.add(C);h.add(J);k.add(T);C=g;J=h;T=k}if(w=b(this,w,p,e,C,J,T,x))I&&I[F]&&(K=I[F],t.copy(K[0]),r.copy(K[1]),v.copy(K[2]),w.uv=a(x,C,J,T,t,r,v)),w.face=M,w.faceIndex=F,n.push(w)}}}}}}(),clone:function(){return(new this.constructor(this.geometry,this.material)).copy(this)}});var hg=\n0;md.prototype=Object.assign(Object.create(ja.prototype),{constructor:md,isArrayCamera:!0});Hb.prototype.isFogExp2=!0;Hb.prototype.clone=function(){return new Hb(this.color.getHex(),this.density)};Hb.prototype.toJSON=function(a){return{type:\"FogExp2\",color:this.color.getHex(),density:this.density}};Ib.prototype.isFog=!0;Ib.prototype.clone=function(){return new Ib(this.color.getHex(),this.near,this.far)};Ib.prototype.toJSON=function(a){return{type:\"Fog\",color:this.color.getHex(),near:this.near,far:this.far}};\nnd.prototype=Object.assign(Object.create(w.prototype),{constructor:nd,copy:function(a,b){w.prototype.copy.call(this,a,b);null!==a.background&&(this.background=a.background.clone());null!==a.fog&&(this.fog=a.fog.clone());null!==a.overrideMaterial&&(this.overrideMaterial=a.overrideMaterial.clone());this.autoUpdate=a.autoUpdate;this.matrixAutoUpdate=a.matrixAutoUpdate;return this},toJSON:function(a){var b=w.prototype.toJSON.call(this,a);null!==this.background&&(b.object.background=this.background.toJSON(a));\nnull!==this.fog&&(b.object.fog=this.fog.toJSON());return b}});Zd.prototype=Object.assign(Object.create(w.prototype),{constructor:Zd,isLensFlare:!0,copy:function(a){w.prototype.copy.call(this,a);this.positionScreen.copy(a.positionScreen);this.customUpdateCallback=a.customUpdateCallback;for(var b=0,c=a.lensFlares.length;b<c;b++)this.lensFlares.push(a.lensFlares[b]);return this},add:function(a,b,c,d,e,f){void 0===b&&(b=-1);void 0===c&&(c=0);void 0===f&&(f=1);void 0===e&&(e=new C(16777215));void 0===\nd&&(d=1);c=Math.min(c,Math.max(0,c));this.lensFlares.push({texture:a,size:b,distance:c,x:0,y:0,z:0,scale:1,rotation:0,opacity:f,color:e,blending:d})},updateLensFlares:function(){var a,b=this.lensFlares.length,c=2*-this.positionScreen.x,d=2*-this.positionScreen.y;for(a=0;a<b;a++){var e=this.lensFlares[a];e.x=this.positionScreen.x+c*e.distance;e.y=this.positionScreen.y+d*e.distance;e.wantedRotation=e.x*Math.PI*.25;e.rotation+=.25*(e.wantedRotation-e.rotation)}}});Za.prototype=Object.create(P.prototype);\nZa.prototype.constructor=Za;Za.prototype.isSpriteMaterial=!0;Za.prototype.copy=function(a){P.prototype.copy.call(this,a);this.color.copy(a.color);this.map=a.map;this.rotation=a.rotation;return this};xc.prototype=Object.assign(Object.create(w.prototype),{constructor:xc,isSprite:!0,raycast:function(){var a=new n,b=new n,c=new n;return function(d,e){b.setFromMatrixPosition(this.matrixWorld);d.ray.closestPointToPoint(b,a);c.setFromMatrixScale(this.matrixWorld);var f=c.x*c.y/4;b.distanceToSquared(a)>f||\n(f=d.ray.origin.distanceTo(a),f<d.near||f>d.far||e.push({distance:f,point:a.clone(),face:null,object:this}))}}(),clone:function(){return(new this.constructor(this.material)).copy(this)}});yc.prototype=Object.assign(Object.create(w.prototype),{constructor:yc,copy:function(a){w.prototype.copy.call(this,a,!1);a=a.levels;for(var b=0,c=a.length;b<c;b++){var d=a[b];this.addLevel(d.object.clone(),d.distance)}return this},addLevel:function(a,b){void 0===b&&(b=0);b=Math.abs(b);for(var c=this.levels,d=0;d<\nc.length&&!(b<c[d].distance);d++);c.splice(d,0,{distance:b,object:a});this.add(a)},getObjectForDistance:function(a){for(var b=this.levels,c=1,d=b.length;c<d&&!(a<b[c].distance);c++);return b[c-1].object},raycast:function(){var a=new n;return function(b,c){a.setFromMatrixPosition(this.matrixWorld);var d=b.ray.origin.distanceTo(a);this.getObjectForDistance(d).raycast(b,c)}}(),update:function(){var a=new n,b=new n;return function(c){var d=this.levels;if(1<d.length){a.setFromMatrixPosition(c.matrixWorld);\nb.setFromMatrixPosition(this.matrixWorld);c=a.distanceTo(b);d[0].object.visible=!0;for(var e=1,f=d.length;e<f;e++)if(c>=d[e].distance)d[e-1].object.visible=!1,d[e].object.visible=!0;else break;for(;e<f;e++)d[e].object.visible=!1}}}(),toJSON:function(a){a=w.prototype.toJSON.call(this,a);a.object.levels=[];for(var b=this.levels,c=0,d=b.length;c<d;c++){var e=b[c];a.object.levels.push({object:e.object.uuid,distance:e.distance})}return a}});Object.assign(zc.prototype,{calculateInverses:function(){this.boneInverses=\n[];for(var a=0,b=this.bones.length;a<b;a++){var c=new O;this.bones[a]&&c.getInverse(this.bones[a].matrixWorld);this.boneInverses.push(c)}},pose:function(){var a,b;var c=0;for(b=this.bones.length;c<b;c++)(a=this.bones[c])&&a.matrixWorld.getInverse(this.boneInverses[c]);c=0;for(b=this.bones.length;c<b;c++)if(a=this.bones[c])a.parent&&a.parent.isBone?(a.matrix.getInverse(a.parent.matrixWorld),a.matrix.multiply(a.matrixWorld)):a.matrix.copy(a.matrixWorld),a.matrix.decompose(a.position,a.quaternion,a.scale)},\nupdate:function(){var a=new O,b=new O;return function(){for(var c=this.bones,d=this.boneInverses,e=this.boneMatrices,f=this.boneTexture,g=0,h=c.length;g<h;g++)a.multiplyMatrices(c[g]?c[g].matrixWorld:b,d[g]),a.toArray(e,16*g);void 0!==f&&(f.needsUpdate=!0)}}(),clone:function(){return new zc(this.bones,this.boneInverses)}});od.prototype=Object.assign(Object.create(w.prototype),{constructor:od,isBone:!0});pd.prototype=Object.assign(Object.create(fa.prototype),{constructor:pd,isSkinnedMesh:!0,initBones:function(){var a=\n[],b;if(this.geometry&&void 0!==this.geometry.bones){var c=0;for(b=this.geometry.bones.length;c<b;c++){var d=this.geometry.bones[c];var e=new od;a.push(e);e.name=d.name;e.position.fromArray(d.pos);e.quaternion.fromArray(d.rotq);void 0!==d.scl&&e.scale.fromArray(d.scl)}c=0;for(b=this.geometry.bones.length;c<b;c++)d=this.geometry.bones[c],-1!==d.parent&&null!==d.parent&&void 0!==a[d.parent]?a[d.parent].add(a[c]):this.add(a[c])}this.updateMatrixWorld(!0);return a},bind:function(a,b){this.skeleton=a;\nvoid 0===b&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),b=this.matrixWorld);this.bindMatrix.copy(b);this.bindMatrixInverse.getInverse(b)},pose:function(){this.skeleton.pose()},normalizeSkinWeights:function(){var a;if(this.geometry&&this.geometry.isGeometry)for(a=0;a<this.geometry.skinWeights.length;a++){var b=this.geometry.skinWeights[a];var c=1/b.lengthManhattan();Infinity!==c?b.multiplyScalar(c):b.set(1,0,0,0)}else if(this.geometry&&this.geometry.isBufferGeometry){var b=new S,\nd=this.geometry.attributes.skinWeight;for(a=0;a<d.count;a++)b.x=d.getX(a),b.y=d.getY(a),b.z=d.getZ(a),b.w=d.getW(a),c=1/b.lengthManhattan(),Infinity!==c?b.multiplyScalar(c):b.set(1,0,0,0),d.setXYZW(a,b.x,b.y,b.z,b.w)}},updateMatrixWorld:function(a){fa.prototype.updateMatrixWorld.call(this,a);\"attached\"===this.bindMode?this.bindMatrixInverse.getInverse(this.matrixWorld):\"detached\"===this.bindMode?this.bindMatrixInverse.getInverse(this.bindMatrix):console.warn(\"THREE.SkinnedMesh: Unrecognized bindMode: \"+\nthis.bindMode)},clone:function(){return(new this.constructor(this.geometry,this.material)).copy(this)}});W.prototype=Object.create(P.prototype);W.prototype.constructor=W;W.prototype.isLineBasicMaterial=!0;W.prototype.copy=function(a){P.prototype.copy.call(this,a);this.color.copy(a.color);this.linewidth=a.linewidth;this.linecap=a.linecap;this.linejoin=a.linejoin;return this};ra.prototype=Object.assign(Object.create(w.prototype),{constructor:ra,isLine:!0,raycast:function(){var a=new O,b=new hb,c=new Ca;\nreturn function(d,e){var f=d.linePrecision,f=f*f,g=this.geometry,h=this.matrixWorld;null===g.boundingSphere&&g.computeBoundingSphere();c.copy(g.boundingSphere);c.applyMatrix4(h);if(!1!==d.ray.intersectsSphere(c)){a.getInverse(h);b.copy(d.ray).applyMatrix4(a);var k=new n,l=new n,h=new n,q=new n,m=this&&this.isLineSegments?2:1;if(g.isBufferGeometry){var t=g.index;var r=g.attributes.position.array;if(null!==t)for(var v=t.array,g=0,u=v.length-1;g<u;g+=m)t=v[g+1],k.fromArray(r,3*v[g]),l.fromArray(r,3*\nt),t=b.distanceSqToSegment(k,l,q,h),t>f||(q.applyMatrix4(this.matrixWorld),t=d.ray.origin.distanceTo(q),t<d.near||t>d.far||e.push({distance:t,point:h.clone().applyMatrix4(this.matrixWorld),index:g,face:null,faceIndex:null,object:this}));else for(g=0,u=r.length/3-1;g<u;g+=m)k.fromArray(r,3*g),l.fromArray(r,3*g+3),t=b.distanceSqToSegment(k,l,q,h),t>f||(q.applyMatrix4(this.matrixWorld),t=d.ray.origin.distanceTo(q),t<d.near||t>d.far||e.push({distance:t,point:h.clone().applyMatrix4(this.matrixWorld),index:g,\nface:null,faceIndex:null,object:this}))}else if(g.isGeometry)for(k=g.vertices,l=k.length,g=0;g<l-1;g+=m)t=b.distanceSqToSegment(k[g],k[g+1],q,h),t>f||(q.applyMatrix4(this.matrixWorld),t=d.ray.origin.distanceTo(q),t<d.near||t>d.far||e.push({distance:t,point:h.clone().applyMatrix4(this.matrixWorld),index:g,face:null,faceIndex:null,object:this}))}}}(),clone:function(){return(new this.constructor(this.geometry,this.material)).copy(this)}});X.prototype=Object.assign(Object.create(ra.prototype),{constructor:X,\nisLineSegments:!0});qd.prototype=Object.assign(Object.create(ra.prototype),{constructor:qd,isLineLoop:!0});ma.prototype=Object.create(P.prototype);ma.prototype.constructor=ma;ma.prototype.isPointsMaterial=!0;ma.prototype.copy=function(a){P.prototype.copy.call(this,a);this.color.copy(a.color);this.map=a.map;this.size=a.size;this.sizeAttenuation=a.sizeAttenuation;return this};Jb.prototype=Object.assign(Object.create(w.prototype),{constructor:Jb,isPoints:!0,raycast:function(){var a=new O,b=new hb,c=\nnew Ca;return function(d,e){function f(a,c){var f=b.distanceSqToPoint(a);if(f<q){a=b.closestPointToPoint(a);a.applyMatrix4(k);var h=d.ray.origin.distanceTo(a);h<d.near||h>d.far||e.push({distance:h,distanceToRay:Math.sqrt(f),point:a.clone(),index:c,face:null,object:g})}}var g=this,h=this.geometry,k=this.matrixWorld,l=d.params.Points.threshold;null===h.boundingSphere&&h.computeBoundingSphere();c.copy(h.boundingSphere);c.applyMatrix4(k);c.radius+=l;if(!1!==d.ray.intersectsSphere(c)){a.getInverse(k);\nb.copy(d.ray).applyMatrix4(a);var l=l/((this.scale.x+this.scale.y+this.scale.z)/3),q=l*l,l=new n;if(h.isBufferGeometry){var m=h.index,h=h.attributes.position.array;if(null!==m)for(var t=m.array,m=0,r=t.length;m<r;m++){var v=t[m];l.fromArray(h,3*v);f(l,v)}else for(m=0,t=h.length/3;m<t;m++)l.fromArray(h,3*m),f(l,m)}else for(l=h.vertices,m=0,t=l.length;m<t;m++)f(l[m],m)}}}(),clone:function(){return(new this.constructor(this.geometry,this.material)).copy(this)}});Ac.prototype=Object.assign(Object.create(w.prototype),\n{constructor:Ac});rd.prototype=Object.create(N.prototype);rd.prototype.constructor=rd;Kb.prototype=Object.create(N.prototype);Kb.prototype.constructor=Kb;Kb.prototype.isCompressedTexture=!0;Bc.prototype=Object.create(N.prototype);Bc.prototype.constructor=Bc;Bc.prototype.isDepthTexture=!0;Lb.prototype=Object.create(F.prototype);Lb.prototype.constructor=Lb;Cc.prototype=Object.create(Q.prototype);Cc.prototype.constructor=Cc;Mb.prototype=Object.create(F.prototype);Mb.prototype.constructor=Mb;Dc.prototype=\nObject.create(Q.prototype);Dc.prototype.constructor=Dc;ua.prototype=Object.create(F.prototype);ua.prototype.constructor=ua;Ec.prototype=Object.create(Q.prototype);Ec.prototype.constructor=Ec;Nb.prototype=Object.create(ua.prototype);Nb.prototype.constructor=Nb;Fc.prototype=Object.create(Q.prototype);Fc.prototype.constructor=Fc;jb.prototype=Object.create(ua.prototype);jb.prototype.constructor=jb;Gc.prototype=Object.create(Q.prototype);Gc.prototype.constructor=Gc;Ob.prototype=Object.create(ua.prototype);\nOb.prototype.constructor=Ob;Hc.prototype=Object.create(Q.prototype);Hc.prototype.constructor=Hc;Pb.prototype=Object.create(ua.prototype);Pb.prototype.constructor=Pb;Ic.prototype=Object.create(Q.prototype);Ic.prototype.constructor=Ic;Qb.prototype=Object.create(F.prototype);Qb.prototype.constructor=Qb;Jc.prototype=Object.create(Q.prototype);Jc.prototype.constructor=Jc;Rb.prototype=Object.create(F.prototype);Rb.prototype.constructor=Rb;Kc.prototype=Object.create(Q.prototype);Kc.prototype.constructor=\nKc;Sb.prototype=Object.create(F.prototype);Sb.prototype.constructor=Sb;var Fa={area:function(a){for(var b=a.length,c=0,d=b-1,e=0;e<b;d=e++)c+=a[d].x*a[e].y-a[e].x*a[d].y;return.5*c},triangulate:function(){return function(a,b){var c=a.length;if(3>c)return null;var d=[],e=[],f=[],g;if(0<Fa.area(a))for(g=0;g<c;g++)e[g]=g;else for(g=0;g<c;g++)e[g]=c-1-g;var h=2*c;for(g=c-1;2<c;){if(0>=h--){console.warn(\"THREE.ShapeUtils: Unable to triangulate polygon! in triangulate()\");break}var k=g;c<=k&&(k=0);g=k+\n1;c<=g&&(g=0);var l=g+1;c<=l&&(l=0);a:{var m;var p=a[e[k]].x;var t=a[e[k]].y;var n=a[e[g]].x;var v=a[e[g]].y;var u=a[e[l]].x;var x=a[e[l]].y;if(0>=(n-p)*(x-t)-(v-t)*(u-p))var y=!1;else{var A=u-n;var w=x-v;var B=p-u;var z=t-x;var D=n-p;y=v-t;for(m=0;m<c;m++){var C=a[e[m]].x;var F=a[e[m]].y;if(!(C===p&&F===t||C===n&&F===v||C===u&&F===x)){var K=C-p;var L=F-t;var O=C-n;var J=F-v;C-=u;F-=x;J=A*J-w*O;L=D*L-y*K;C=B*F-z*C;if(J>=-Number.EPSILON&&C>=-Number.EPSILON&&L>=-Number.EPSILON){y=!1;break a}}}y=!0}}if(y){d.push([a[e[k]],\na[e[g]],a[e[l]]]);f.push([e[k],e[g],e[l]]);k=g;for(l=g+1;l<c;k++,l++)e[k]=e[l];c--;h=2*c}}return b?f:d}}(),triangulateShape:function(a,b){function c(a){var b=a.length;2<b&&a[b-1].equals(a[0])&&a.pop()}function d(a,b,c){return a.x!==b.x?a.x<b.x?a.x<=c.x&&c.x<=b.x:b.x<=c.x&&c.x<=a.x:a.y<b.y?a.y<=c.y&&c.y<=b.y:b.y<=c.y&&c.y<=a.y}function e(a,b,c,e,f){var g=b.x-a.x,h=b.y-a.y,k=e.x-c.x,l=e.y-c.y,m=a.x-c.x,q=a.y-c.y,p=h*k-g*l,n=h*m-g*q;if(Math.abs(p)>Number.EPSILON){if(0<p){if(0>n||n>p)return[];k=l*m-k*\nq;if(0>k||k>p)return[]}else{if(0<n||n<p)return[];k=l*m-k*q;if(0<k||k<p)return[]}if(0===k)return!f||0!==n&&n!==p?[a]:[];if(k===p)return!f||0!==n&&n!==p?[b]:[];if(0===n)return[c];if(n===p)return[e];f=k/p;return[{x:a.x+f*g,y:a.y+f*h}]}if(0!==n||l*m!==k*q)return[];h=0===g&&0===h;k=0===k&&0===l;if(h&&k)return a.x!==c.x||a.y!==c.y?[]:[a];if(h)return d(c,e,a)?[a]:[];if(k)return d(a,b,c)?[c]:[];0!==g?(a.x<b.x?(g=a,k=a.x,h=b,a=b.x):(g=b,k=b.x,h=a,a=a.x),c.x<e.x?(b=c,p=c.x,l=e,c=e.x):(b=e,p=e.x,l=c,c=c.x)):\n(a.y<b.y?(g=a,k=a.y,h=b,a=b.y):(g=b,k=b.y,h=a,a=a.y),c.y<e.y?(b=c,p=c.y,l=e,c=e.y):(b=e,p=e.y,l=c,c=c.y));return k<=p?a<p?[]:a===p?f?[]:[b]:a<=c?[b,h]:[b,l]:k>c?[]:k===c?f?[]:[g]:a<=c?[g,h]:[g,l]}function f(a,b,c,d){var e=b.x-a.x,f=b.y-a.y;b=c.x-a.x;c=c.y-a.y;var g=d.x-a.x;d=d.y-a.y;a=e*c-f*b;e=e*d-f*g;return Math.abs(a)>Number.EPSILON?(b=g*c-d*b,0<a?0<=e&&0<=b:0<=e||0<=b):0<e}c(a);b.forEach(c);var g,h={},k=a.concat();var l=0;for(g=b.length;l<g;l++)Array.prototype.push.apply(k,b[l]);l=0;for(g=k.length;l<\ng;l++){var m=k[l].x+\":\"+k[l].y;void 0!==h[m]&&console.warn(\"THREE.ShapeUtils: Duplicate point\",m,l);h[m]=l}l=function(a,b){function c(a,b){var c=h.length-1,d=a-1;0>d&&(d=c);var e=a+1;e>c&&(e=0);c=f(h[a],h[d],h[e],D[b]);if(!c)return!1;c=D.length-1;d=b-1;0>d&&(d=c);e=b+1;e>c&&(e=0);return(c=f(D[b],D[d],D[e],h[a]))?!0:!1}function d(a,b){var c;for(c=0;c<h.length;c++){var d=c+1;d%=h.length;d=e(a,b,h[c],h[d],!0);if(0<d.length)return!0}return!1}function g(a,c){var d,f;for(d=0;d<k.length;d++){var g=b[k[d]];\nfor(f=0;f<g.length;f++){var h=f+1;h%=g.length;h=e(a,c,g[f],g[h],!0);if(0<h.length)return!0}}return!1}var h=a.concat(),k=[],l,m;a=[];var q,p=0;for(l=b.length;p<l;p++)k.push(p);var n=0;for(var t=2*k.length;0<k.length;){t--;if(0>t){console.log('THREE.ShapeUtils: Infinite Loop! Holes left:\" + indepHoles.length + \", Probably Hole outside Shape!');break}for(m=n;m<h.length;m++){var w=h[m];l=-1;for(p=0;p<k.length;p++){var z=k[p];var C=w.x+\":\"+w.y+\":\"+z;if(void 0===a[C]){var D=b[z];for(q=0;q<D.length;q++)if(z=\nD[q],c(m,q)&&!d(w,z)&&!g(w,z)){l=q;k.splice(p,1);n=h.slice(0,m+1);z=h.slice(m);q=D.slice(l);var F=D.slice(0,l+1);h=n.concat(q).concat(F).concat(z);n=m;break}if(0<=l)break;a[C]=!0}}if(0<=l)break}}return h}(a,b);k=Fa.triangulate(l,!1);l=0;for(g=k.length;l<g;l++)for(b=k[l],a=0;3>a;a++)m=b[a].x+\":\"+b[a].y,m=h[m],void 0!==m&&(b[a]=m);return k.concat()},isClockWise:function(a){return 0>Fa.area(a)}};$a.prototype=Object.create(Q.prototype);$a.prototype.constructor=$a;Ea.prototype=Object.create(F.prototype);\nEa.prototype.constructor=Ea;Ea.prototype.getArrays=function(){var a=this.getAttribute(\"position\"),a=a?Array.prototype.slice.call(a.array):[],b=this.getAttribute(\"uv\"),b=b?Array.prototype.slice.call(b.array):[],c=this.index,c=c?Array.prototype.slice.call(c.array):[];return{position:a,uv:b,index:c}};Ea.prototype.addShapeList=function(a,b){var c=a.length;b.arrays=this.getArrays();for(var d=0;d<c;d++)this.addShape(a[d],b);this.setIndex(b.arrays.index);this.addAttribute(\"position\",new z(b.arrays.position,\n3));this.addAttribute(\"uv\",new z(b.arrays.uv,2))};Ea.prototype.addShape=function(a,b){function c(a,b,c){b||console.error(\"THREE.ExtrudeGeometry: vec does not exist\");return b.clone().multiplyScalar(c).add(a)}function d(a,b,c){var d=a.x-b.x;var e=a.y-b.y;var f=c.x-a.x;var g=c.y-a.y,h=d*d+e*e;if(Math.abs(d*g-e*f)>Number.EPSILON){var k=Math.sqrt(h),l=Math.sqrt(f*f+g*g),h=b.x-e/k;b=b.y+d/k;g=((c.x-g/l-h)*g-(c.y+f/l-b)*f)/(d*g-e*f);f=h+d*g-a.x;d=b+e*g-a.y;e=f*f+d*d;if(2>=e)return new D(f,d);e=Math.sqrt(e/\n2)}else a=!1,d>Number.EPSILON?f>Number.EPSILON&&(a=!0):d<-Number.EPSILON?f<-Number.EPSILON&&(a=!0):Math.sign(e)===Math.sign(g)&&(a=!0),a?(f=-e,e=Math.sqrt(h)):(f=d,d=e,e=Math.sqrt(h/2));return new D(f/e,d/e)}function e(a,b){for(G=a.length;0<=--G;){var c=G;var d=G-1;0>d&&(d=a.length-1);var e,f=w+2*x;for(e=0;e<f;e++){var g=X*e,l=X*(e+1),q=b+d+g,p=b+d+l,l=b+c+l;h(b+c+g);h(q);h(l);h(q);h(p);h(l);g=m.length/3;g=F.generateSideWallUV(R,m,g-6,g-3,g-2,g-1);k(g[0]);k(g[1]);k(g[3]);k(g[1]);k(g[2]);k(g[3])}}}\nfunction f(a,b,c){r.push(a);r.push(b);r.push(c)}function g(a,b,c){h(a);h(b);h(c);a=m.length/3;a=F.generateTopUV(R,m,a-3,a-2,a-1);k(a[0]);k(a[1]);k(a[2])}function h(a){p.push(m.length/3);m.push(r[3*a+0]);m.push(r[3*a+1]);m.push(r[3*a+2])}function k(a){t.push(a.x);t.push(a.y)}var l=b.arrays?b.arrays:this.getArrays(),m=l.position,p=l.index,t=l.uv,r=[],l=void 0!==b.amount?b.amount:100,v=void 0!==b.bevelThickness?b.bevelThickness:6,u=void 0!==b.bevelSize?b.bevelSize:v-2,x=void 0!==b.bevelSegments?b.bevelSegments:\n3,y=void 0!==b.bevelEnabled?b.bevelEnabled:!0,A=void 0!==b.curveSegments?b.curveSegments:12,w=void 0!==b.steps?b.steps:1,B=b.extrudePath,C=!1,F=void 0!==b.UVGenerator?b.UVGenerator:$a.WorldUVGenerator;if(B){var K=B.getSpacedPoints(w);C=!0;y=!1;var L=void 0!==b.frames?b.frames:B.computeFrenetFrames(w,!1);var O=new n;var Q=new n;var P=new n}y||(u=v=x=0);var J,R=this,A=a.extractPoints(A);a=A.shape;var N=A.holes;if(!Fa.isClockWise(a)){a=a.reverse();var M=0;for(J=N.length;M<J;M++){var T=N[M];Fa.isClockWise(T)&&\n(N[M]=T.reverse())}}var V=Fa.triangulateShape(a,N),W=a;M=0;for(J=N.length;M<J;M++)T=N[M],a=a.concat(T);var Y,X=a.length,S,da=V.length,A=[],G=0;var U=W.length;var ca=U-1;for(Y=G+1;G<U;G++,ca++,Y++)ca===U&&(ca=0),Y===U&&(Y=0),A[G]=d(W[G],W[ca],W[Y]);var B=[],ea=A.concat();M=0;for(J=N.length;M<J;M++){T=N[M];var aa=[];G=0;U=T.length;ca=U-1;for(Y=G+1;G<U;G++,ca++,Y++)ca===U&&(ca=0),Y===U&&(Y=0),aa[G]=d(T[G],T[ca],T[Y]);B.push(aa);ea=ea.concat(aa)}for(ca=0;ca<x;ca++){U=ca/x;var fa=v*Math.cos(U*Math.PI/\n2);Y=u*Math.sin(U*Math.PI/2);G=0;for(U=W.length;G<U;G++){var ha=c(W[G],A[G],Y);f(ha.x,ha.y,-fa)}M=0;for(J=N.length;M<J;M++)for(T=N[M],aa=B[M],G=0,U=T.length;G<U;G++)ha=c(T[G],aa[G],Y),f(ha.x,ha.y,-fa)}Y=u;for(G=0;G<X;G++)ha=y?c(a[G],ea[G],Y):a[G],C?(Q.copy(L.normals[0]).multiplyScalar(ha.x),O.copy(L.binormals[0]).multiplyScalar(ha.y),P.copy(K[0]).add(Q).add(O),f(P.x,P.y,P.z)):f(ha.x,ha.y,0);for(U=1;U<=w;U++)for(G=0;G<X;G++)ha=y?c(a[G],ea[G],Y):a[G],C?(Q.copy(L.normals[U]).multiplyScalar(ha.x),O.copy(L.binormals[U]).multiplyScalar(ha.y),\nP.copy(K[U]).add(Q).add(O),f(P.x,P.y,P.z)):f(ha.x,ha.y,l/w*U);for(ca=x-1;0<=ca;ca--){U=ca/x;fa=v*Math.cos(U*Math.PI/2);Y=u*Math.sin(U*Math.PI/2);G=0;for(U=W.length;G<U;G++)ha=c(W[G],A[G],Y),f(ha.x,ha.y,l+fa);M=0;for(J=N.length;M<J;M++)for(T=N[M],aa=B[M],G=0,U=T.length;G<U;G++)ha=c(T[G],aa[G],Y),C?f(ha.x,ha.y+K[w-1].y,K[w-1].x+fa):f(ha.x,ha.y,l+fa)}(function(){var a=m.length/3;if(y){var c=0*X;for(G=0;G<da;G++)S=V[G],g(S[2]+c,S[1]+c,S[0]+c);c=X*(w+2*x);for(G=0;G<da;G++)S=V[G],g(S[0]+c,S[1]+c,S[2]+c)}else{for(G=\n0;G<da;G++)S=V[G],g(S[2],S[1],S[0]);for(G=0;G<da;G++)S=V[G],g(S[0]+X*w,S[1]+X*w,S[2]+X*w)}R.addGroup(a,m.length/3-a,void 0!==b.material?b.material:0)})();(function(){var a=m.length/3,c=0;e(W,c);c+=W.length;M=0;for(J=N.length;M<J;M++)T=N[M],e(T,c),c+=T.length;R.addGroup(a,m.length/3-a,void 0!==b.extrudeMaterial?b.extrudeMaterial:1)})();b.arrays||(this.setIndex(p),this.addAttribute(\"position\",new z(m,3)),this.addAttribute(\"uv\",new z(b.arrays.uv,2)))};$a.WorldUVGenerator={generateTopUV:function(a,b,\nc,d,e){a=b[3*d];d=b[3*d+1];var f=b[3*e];e=b[3*e+1];return[new D(b[3*c],b[3*c+1]),new D(a,d),new D(f,e)]},generateSideWallUV:function(a,b,c,d,e,f){a=b[3*c];var g=b[3*c+1];c=b[3*c+2];var h=b[3*d],k=b[3*d+1];d=b[3*d+2];var l=b[3*e],m=b[3*e+1];e=b[3*e+2];var p=b[3*f],n=b[3*f+1];b=b[3*f+2];return.01>Math.abs(g-k)?[new D(a,1-c),new D(h,1-d),new D(l,1-e),new D(p,1-b)]:[new D(g,1-c),new D(k,1-d),new D(m,1-e),new D(n,1-b)]}};Lc.prototype=Object.create(Q.prototype);Lc.prototype.constructor=Lc;Tb.prototype=\nObject.create(Ea.prototype);Tb.prototype.constructor=Tb;Mc.prototype=Object.create(Q.prototype);Mc.prototype.constructor=Mc;kb.prototype=Object.create(F.prototype);kb.prototype.constructor=kb;Nc.prototype=Object.create(Q.prototype);Nc.prototype.constructor=Nc;Ub.prototype=Object.create(F.prototype);Ub.prototype.constructor=Ub;Oc.prototype=Object.create(Q.prototype);Oc.prototype.constructor=Oc;Vb.prototype=Object.create(F.prototype);Vb.prototype.constructor=Vb;Wb.prototype=Object.create(Q.prototype);\nWb.prototype.constructor=Wb;Xb.prototype=Object.create(F.prototype);Xb.prototype.constructor=Xb;Yb.prototype=Object.create(F.prototype);Yb.prototype.constructor=Yb;lb.prototype=Object.create(Q.prototype);lb.prototype.constructor=lb;Ta.prototype=Object.create(F.prototype);Ta.prototype.constructor=Ta;Pc.prototype=Object.create(lb.prototype);Pc.prototype.constructor=Pc;Qc.prototype=Object.create(Ta.prototype);Qc.prototype.constructor=Qc;Rc.prototype=Object.create(Q.prototype);Rc.prototype.constructor=\nRc;Zb.prototype=Object.create(F.prototype);Zb.prototype.constructor=Zb;var Ka=Object.freeze({WireframeGeometry:Lb,ParametricGeometry:Cc,ParametricBufferGeometry:Mb,TetrahedronGeometry:Ec,TetrahedronBufferGeometry:Nb,OctahedronGeometry:Fc,OctahedronBufferGeometry:jb,IcosahedronGeometry:Gc,IcosahedronBufferGeometry:Ob,DodecahedronGeometry:Hc,DodecahedronBufferGeometry:Pb,PolyhedronGeometry:Dc,PolyhedronBufferGeometry:ua,TubeGeometry:Ic,TubeBufferGeometry:Qb,TorusKnotGeometry:Jc,TorusKnotBufferGeometry:Rb,\nTorusGeometry:Kc,TorusBufferGeometry:Sb,TextGeometry:Lc,TextBufferGeometry:Tb,SphereGeometry:Mc,SphereBufferGeometry:kb,RingGeometry:Nc,RingBufferGeometry:Ub,PlaneGeometry:vc,PlaneBufferGeometry:gb,LatheGeometry:Oc,LatheBufferGeometry:Vb,ShapeGeometry:Wb,ShapeBufferGeometry:Xb,ExtrudeGeometry:$a,ExtrudeBufferGeometry:Ea,EdgesGeometry:Yb,ConeGeometry:Pc,ConeBufferGeometry:Qc,CylinderGeometry:lb,CylinderBufferGeometry:Ta,CircleGeometry:Rc,CircleBufferGeometry:Zb,BoxGeometry:Eb,BoxBufferGeometry:fb});\n$b.prototype=Object.create(P.prototype);$b.prototype.constructor=$b;$b.prototype.isShadowMaterial=!0;ac.prototype=Object.create(ya.prototype);ac.prototype.constructor=ac;ac.prototype.isRawShaderMaterial=!0;Na.prototype=Object.create(P.prototype);Na.prototype.constructor=Na;Na.prototype.isMeshStandardMaterial=!0;Na.prototype.copy=function(a){P.prototype.copy.call(this,a);this.defines={STANDARD:\"\"};this.color.copy(a.color);this.roughness=a.roughness;this.metalness=a.metalness;this.map=a.map;this.lightMap=\na.lightMap;this.lightMapIntensity=a.lightMapIntensity;this.aoMap=a.aoMap;this.aoMapIntensity=a.aoMapIntensity;this.emissive.copy(a.emissive);this.emissiveMap=a.emissiveMap;this.emissiveIntensity=a.emissiveIntensity;this.bumpMap=a.bumpMap;this.bumpScale=a.bumpScale;this.normalMap=a.normalMap;this.normalScale.copy(a.normalScale);this.displacementMap=a.displacementMap;this.displacementScale=a.displacementScale;this.displacementBias=a.displacementBias;this.roughnessMap=a.roughnessMap;this.metalnessMap=\na.metalnessMap;this.alphaMap=a.alphaMap;this.envMap=a.envMap;this.envMapIntensity=a.envMapIntensity;this.refractionRatio=a.refractionRatio;this.wireframe=a.wireframe;this.wireframeLinewidth=a.wireframeLinewidth;this.wireframeLinecap=a.wireframeLinecap;this.wireframeLinejoin=a.wireframeLinejoin;this.skinning=a.skinning;this.morphTargets=a.morphTargets;this.morphNormals=a.morphNormals;return this};mb.prototype=Object.create(Na.prototype);mb.prototype.constructor=mb;mb.prototype.isMeshPhysicalMaterial=\n!0;mb.prototype.copy=function(a){Na.prototype.copy.call(this,a);this.defines={PHYSICAL:\"\"};this.reflectivity=a.reflectivity;this.clearCoat=a.clearCoat;this.clearCoatRoughness=a.clearCoatRoughness;return this};Aa.prototype=Object.create(P.prototype);Aa.prototype.constructor=Aa;Aa.prototype.isMeshPhongMaterial=!0;Aa.prototype.copy=function(a){P.prototype.copy.call(this,a);this.color.copy(a.color);this.specular.copy(a.specular);this.shininess=a.shininess;this.map=a.map;this.lightMap=a.lightMap;this.lightMapIntensity=\na.lightMapIntensity;this.aoMap=a.aoMap;this.aoMapIntensity=a.aoMapIntensity;this.emissive.copy(a.emissive);this.emissiveMap=a.emissiveMap;this.emissiveIntensity=a.emissiveIntensity;this.bumpMap=a.bumpMap;this.bumpScale=a.bumpScale;this.normalMap=a.normalMap;this.normalScale.copy(a.normalScale);this.displacementMap=a.displacementMap;this.displacementScale=a.displacementScale;this.displacementBias=a.displacementBias;this.specularMap=a.specularMap;this.alphaMap=a.alphaMap;this.envMap=a.envMap;this.combine=\na.combine;this.reflectivity=a.reflectivity;this.refractionRatio=a.refractionRatio;this.wireframe=a.wireframe;this.wireframeLinewidth=a.wireframeLinewidth;this.wireframeLinecap=a.wireframeLinecap;this.wireframeLinejoin=a.wireframeLinejoin;this.skinning=a.skinning;this.morphTargets=a.morphTargets;this.morphNormals=a.morphNormals;return this};nb.prototype=Object.create(Aa.prototype);nb.prototype.constructor=nb;nb.prototype.isMeshToonMaterial=!0;nb.prototype.copy=function(a){Aa.prototype.copy.call(this,\na);this.gradientMap=a.gradientMap;return this};ob.prototype=Object.create(P.prototype);ob.prototype.constructor=ob;ob.prototype.isMeshNormalMaterial=!0;ob.prototype.copy=function(a){P.prototype.copy.call(this,a);this.bumpMap=a.bumpMap;this.bumpScale=a.bumpScale;this.normalMap=a.normalMap;this.normalScale.copy(a.normalScale);this.displacementMap=a.displacementMap;this.displacementScale=a.displacementScale;this.displacementBias=a.displacementBias;this.wireframe=a.wireframe;this.wireframeLinewidth=a.wireframeLinewidth;\nthis.skinning=a.skinning;this.morphTargets=a.morphTargets;this.morphNormals=a.morphNormals;return this};pb.prototype=Object.create(P.prototype);pb.prototype.constructor=pb;pb.prototype.isMeshLambertMaterial=!0;pb.prototype.copy=function(a){P.prototype.copy.call(this,a);this.color.copy(a.color);this.map=a.map;this.lightMap=a.lightMap;this.lightMapIntensity=a.lightMapIntensity;this.aoMap=a.aoMap;this.aoMapIntensity=a.aoMapIntensity;this.emissive.copy(a.emissive);this.emissiveMap=a.emissiveMap;this.emissiveIntensity=\na.emissiveIntensity;this.specularMap=a.specularMap;this.alphaMap=a.alphaMap;this.envMap=a.envMap;this.combine=a.combine;this.reflectivity=a.reflectivity;this.refractionRatio=a.refractionRatio;this.wireframe=a.wireframe;this.wireframeLinewidth=a.wireframeLinewidth;this.wireframeLinecap=a.wireframeLinecap;this.wireframeLinejoin=a.wireframeLinejoin;this.skinning=a.skinning;this.morphTargets=a.morphTargets;this.morphNormals=a.morphNormals;return this};qb.prototype=Object.create(W.prototype);qb.prototype.constructor=\nqb;qb.prototype.isLineDashedMaterial=!0;qb.prototype.copy=function(a){W.prototype.copy.call(this,a);this.scale=a.scale;this.dashSize=a.dashSize;this.gapSize=a.gapSize;return this};var sg=Object.freeze({ShadowMaterial:$b,SpriteMaterial:Za,RawShaderMaterial:ac,ShaderMaterial:ya,PointsMaterial:ma,MeshPhysicalMaterial:mb,MeshStandardMaterial:Na,MeshPhongMaterial:Aa,MeshToonMaterial:nb,MeshNormalMaterial:ob,MeshLambertMaterial:pb,MeshDepthMaterial:Wa,MeshDistanceMaterial:Xa,MeshBasicMaterial:sa,LineDashedMaterial:qb,\nLineBasicMaterial:W,Material:P}),hd={enabled:!1,files:{},add:function(a,b){!1!==this.enabled&&(this.files[a]=b)},get:function(a){if(!1!==this.enabled)return this.files[a]},remove:function(a){delete this.files[a]},clear:function(){this.files={}}},oa=new $d;Object.assign(Ia.prototype,{load:function(a,b,c,d){void 0===a&&(a=\"\");void 0!==this.path&&(a=this.path+a);var e=this,f=hd.get(a);if(void 0!==f)return e.manager.itemStart(a),setTimeout(function(){b&&b(f);e.manager.itemEnd(a)},0),f;var g=a.match(/^data:(.*?)(;base64)?,(.*)$/);\nif(g){var h=g[1],k=!!g[2],g=g[3],g=window.decodeURIComponent(g);k&&(g=window.atob(g));try{var l=(this.responseType||\"\").toLowerCase();switch(l){case \"arraybuffer\":case \"blob\":var m=new ArrayBuffer(g.length);for(var p=new Uint8Array(m),k=0;k<g.length;k++)p[k]=g.charCodeAt(k);\"blob\"===l&&(m=new Blob([m],{type:h}));break;case \"document\":m=(new DOMParser).parseFromString(g,h);break;case \"json\":m=JSON.parse(g);break;default:m=g}window.setTimeout(function(){b&&b(m);e.manager.itemEnd(a)},0)}catch(r){window.setTimeout(function(){d&&\nd(r);e.manager.itemEnd(a);e.manager.itemError(a)},0)}}else{var n=new XMLHttpRequest;n.open(\"GET\",a,!0);n.addEventListener(\"load\",function(c){var f=c.target.response;hd.add(a,f);200===this.status?(b&&b(f),e.manager.itemEnd(a)):0===this.status?(console.warn(\"THREE.FileLoader: HTTP Status 0 received.\"),b&&b(f),e.manager.itemEnd(a)):(d&&d(c),e.manager.itemEnd(a),e.manager.itemError(a))},!1);void 0!==c&&n.addEventListener(\"progress\",function(a){c(a)},!1);n.addEventListener(\"error\",function(b){d&&d(b);\ne.manager.itemEnd(a);e.manager.itemError(a)},!1);void 0!==this.responseType&&(n.responseType=this.responseType);void 0!==this.withCredentials&&(n.withCredentials=this.withCredentials);n.overrideMimeType&&n.overrideMimeType(void 0!==this.mimeType?this.mimeType:\"text/plain\");for(h in this.requestHeader)n.setRequestHeader(h,this.requestHeader[h]);n.send(null)}e.manager.itemStart(a);return n},setPath:function(a){this.path=a;return this},setResponseType:function(a){this.responseType=a;return this},setWithCredentials:function(a){this.withCredentials=\na;return this},setMimeType:function(a){this.mimeType=a;return this},setRequestHeader:function(a){this.requestHeader=a;return this}});Object.assign(Re.prototype,{load:function(a,b,c,d){function e(e){l.load(a[e],function(a){a=g._parser(a,!0);h[e]={width:a.width,height:a.height,format:a.format,mipmaps:a.mipmaps};f+=1;6===f&&(1===a.mipmapCount&&(k.minFilter=1006),k.format=a.format,k.needsUpdate=!0,b&&b(k))},c,d)}var f,g=this,h=[],k=new Kb;k.image=h;var l=new Ia(this.manager);l.setPath(this.path);l.setResponseType(\"arraybuffer\");\nif(Array.isArray(a))for(var m=f=0,p=a.length;m<p;++m)e(m);else l.load(a,function(a){a=g._parser(a,!0);if(a.isCubemap)for(var c=a.mipmaps.length/a.mipmapCount,d=0;d<c;d++){h[d]={mipmaps:[]};for(var e=0;e<a.mipmapCount;e++)h[d].mipmaps.push(a.mipmaps[d*a.mipmapCount+e]),h[d].format=a.format,h[d].width=a.width,h[d].height=a.height}else k.image.width=a.width,k.image.height=a.height,k.mipmaps=a.mipmaps;1===a.mipmapCount&&(k.minFilter=1006);k.format=a.format;k.needsUpdate=!0;b&&b(k)},c,d);return k},setPath:function(a){this.path=\na;return this}});Object.assign(ae.prototype,{load:function(a,b,c,d){var e=this,f=new bb,g=new Ia(this.manager);g.setResponseType(\"arraybuffer\");g.load(a,function(a){if(a=e._parser(a))void 0!==a.image?f.image=a.image:void 0!==a.data&&(f.image.width=a.width,f.image.height=a.height,f.image.data=a.data),f.wrapS=void 0!==a.wrapS?a.wrapS:1001,f.wrapT=void 0!==a.wrapT?a.wrapT:1001,f.magFilter=void 0!==a.magFilter?a.magFilter:1006,f.minFilter=void 0!==a.minFilter?a.minFilter:1008,f.anisotropy=void 0!==a.anisotropy?\na.anisotropy:1,void 0!==a.format&&(f.format=a.format),void 0!==a.type&&(f.type=a.type),void 0!==a.mipmaps&&(f.mipmaps=a.mipmaps),1===a.mipmapCount&&(f.minFilter=1006),f.needsUpdate=!0,b&&b(f,a)},c,d);return f}});Object.assign(Sc.prototype,{crossOrigin:\"Anonymous\",load:function(a,b,c,d){void 0===a&&(a=\"\");void 0!==this.path&&(a=this.path+a);var e=this,f=hd.get(a);if(void 0!==f)return e.manager.itemStart(a),setTimeout(function(){b&&b(f);e.manager.itemEnd(a)},0),f;c=document.createElementNS(\"http://www.w3.org/1999/xhtml\",\n\"img\");c.addEventListener(\"load\",function(){hd.add(a,this);b&&b(this);e.manager.itemEnd(a)},!1);c.addEventListener(\"error\",function(b){d&&d(b);e.manager.itemEnd(a);e.manager.itemError(a)},!1);\"data:\"!==a.substr(0,5)&&void 0!==this.crossOrigin&&(c.crossOrigin=this.crossOrigin);e.manager.itemStart(a);c.src=a;return c},setCrossOrigin:function(a){this.crossOrigin=a;return this},setPath:function(a){this.path=a;return this}});Object.assign(be.prototype,{crossOrigin:\"Anonymous\",load:function(a,b,c,d){function e(c){g.load(a[c],\nfunction(a){f.images[c]=a;h++;6===h&&(f.needsUpdate=!0,b&&b(f))},void 0,d)}var f=new Va,g=new Sc(this.manager);g.setCrossOrigin(this.crossOrigin);g.setPath(this.path);var h=0;for(c=0;c<a.length;++c)e(c);return f},setCrossOrigin:function(a){this.crossOrigin=a;return this},setPath:function(a){this.path=a;return this}});Object.assign(sd.prototype,{crossOrigin:\"Anonymous\",load:function(a,b,c,d){var e=new Sc(this.manager);e.setCrossOrigin(this.crossOrigin);e.setPath(this.path);var f=new N;f.image=e.load(a,\nfunction(){var c=0<a.search(/\\.(jpg|jpeg)$/)||0===a.search(/^data\\:image\\/jpeg/);f.format=c?1022:1023;f.needsUpdate=!0;void 0!==b&&b(f)},c,d);return f},setCrossOrigin:function(a){this.crossOrigin=a;return this},setPath:function(a){this.path=a;return this}});aa.prototype=Object.assign(Object.create(w.prototype),{constructor:aa,isLight:!0,copy:function(a){w.prototype.copy.call(this,a);this.color.copy(a.color);this.intensity=a.intensity;return this},toJSON:function(a){a=w.prototype.toJSON.call(this,\na);a.object.color=this.color.getHex();a.object.intensity=this.intensity;void 0!==this.groundColor&&(a.object.groundColor=this.groundColor.getHex());void 0!==this.distance&&(a.object.distance=this.distance);void 0!==this.angle&&(a.object.angle=this.angle);void 0!==this.decay&&(a.object.decay=this.decay);void 0!==this.penumbra&&(a.object.penumbra=this.penumbra);void 0!==this.shadow&&(a.object.shadow=this.shadow.toJSON());return a}});td.prototype=Object.assign(Object.create(aa.prototype),{constructor:td,\nisHemisphereLight:!0,copy:function(a){aa.prototype.copy.call(this,a);this.groundColor.copy(a.groundColor);return this}});Object.assign(rb.prototype,{copy:function(a){this.camera=a.camera.clone();this.bias=a.bias;this.radius=a.radius;this.mapSize.copy(a.mapSize);return this},clone:function(){return(new this.constructor).copy(this)},toJSON:function(){var a={};0!==this.bias&&(a.bias=this.bias);1!==this.radius&&(a.radius=this.radius);if(512!==this.mapSize.x||512!==this.mapSize.y)a.mapSize=this.mapSize.toArray();\na.camera=this.camera.toJSON(!1).object;delete a.camera.matrix;return a}});ud.prototype=Object.assign(Object.create(rb.prototype),{constructor:ud,isSpotLightShadow:!0,update:function(a){var b=this.camera,c=2*R.RAD2DEG*a.angle,d=this.mapSize.width/this.mapSize.height;a=a.distance||b.far;if(c!==b.fov||d!==b.aspect||a!==b.far)b.fov=c,b.aspect=d,b.far=a,b.updateProjectionMatrix()}});vd.prototype=Object.assign(Object.create(aa.prototype),{constructor:vd,isSpotLight:!0,copy:function(a){aa.prototype.copy.call(this,\na);this.distance=a.distance;this.angle=a.angle;this.penumbra=a.penumbra;this.decay=a.decay;this.target=a.target.clone();this.shadow=a.shadow.clone();return this}});wd.prototype=Object.assign(Object.create(aa.prototype),{constructor:wd,isPointLight:!0,copy:function(a){aa.prototype.copy.call(this,a);this.distance=a.distance;this.decay=a.decay;this.shadow=a.shadow.clone();return this}});xd.prototype=Object.assign(Object.create(rb.prototype),{constructor:xd});yd.prototype=Object.assign(Object.create(aa.prototype),\n{constructor:yd,isDirectionalLight:!0,copy:function(a){aa.prototype.copy.call(this,a);this.target=a.target.clone();this.shadow=a.shadow.clone();return this}});zd.prototype=Object.assign(Object.create(aa.prototype),{constructor:zd,isAmbientLight:!0});Ad.prototype=Object.assign(Object.create(aa.prototype),{constructor:Ad,isRectAreaLight:!0,copy:function(a){aa.prototype.copy.call(this,a);this.width=a.width;this.height=a.height;return this},toJSON:function(a){a=aa.prototype.toJSON.call(this,a);a.object.width=\nthis.width;a.object.height=this.height;return a}});var ea={arraySlice:function(a,b,c){return ea.isTypedArray(a)?new a.constructor(a.subarray(b,void 0!==c?c:a.length)):a.slice(b,c)},convertArray:function(a,b,c){return!a||!c&&a.constructor===b?a:\"number\"===typeof b.BYTES_PER_ELEMENT?new b(a):Array.prototype.slice.call(a)},isTypedArray:function(a){return ArrayBuffer.isView(a)&&!(a instanceof DataView)},getKeyframeOrder:function(a){for(var b=a.length,c=Array(b),d=0;d!==b;++d)c[d]=d;c.sort(function(b,\nc){return a[b]-a[c]});return c},sortedArray:function(a,b,c){for(var d=a.length,e=new a.constructor(d),f=0,g=0;g!==d;++f)for(var h=c[f]*b,k=0;k!==b;++k)e[g++]=a[h+k];return e},flattenJSON:function(a,b,c,d){for(var e=1,f=a[0];void 0!==f&&void 0===f[d];)f=a[e++];if(void 0!==f){var g=f[d];if(void 0!==g)if(Array.isArray(g)){do g=f[d],void 0!==g&&(b.push(f.time),c.push.apply(c,g)),f=a[e++];while(void 0!==f)}else if(void 0!==g.toArray){do g=f[d],void 0!==g&&(b.push(f.time),g.toArray(c,c.length)),f=a[e++];\nwhile(void 0!==f)}else{do g=f[d],void 0!==g&&(b.push(f.time),c.push(g)),f=a[e++];while(void 0!==f)}}}};Object.assign(wa.prototype,{evaluate:function(a){var b=this.parameterPositions,c=this._cachedIndex,d=b[c],e=b[c-1];a:{b:{c:{d:if(!(a<d)){for(var f=c+2;;){if(void 0===d){if(a<e)break d;this._cachedIndex=c=b.length;return this.afterEnd_(c-1,a,e)}if(c===f)break;e=d;d=b[++c];if(a<d)break b}d=b.length;break c}if(a>=e)break a;else{f=b[1];a<f&&(c=2,e=f);for(f=c-2;;){if(void 0===e)return this._cachedIndex=\n0,this.beforeStart_(0,a,d);if(c===f)break;d=e;e=b[--c-1];if(a>=e)break b}d=c;c=0}}for(;c<d;)e=c+d>>>1,a<b[e]?d=e:c=e+1;d=b[c];e=b[c-1];if(void 0===e)return this._cachedIndex=0,this.beforeStart_(0,a,d);if(void 0===d)return this._cachedIndex=c=b.length,this.afterEnd_(c-1,e,a)}this._cachedIndex=c;this.intervalChanged_(c,e,d)}return this.interpolate_(c,e,a,d)},settings:null,DefaultSettings_:{},getSettings_:function(){return this.settings||this.DefaultSettings_},copySampleValue_:function(a){var b=this.resultBuffer,\nc=this.sampleValues,d=this.valueSize;a*=d;for(var e=0;e!==d;++e)b[e]=c[a+e];return b},interpolate_:function(a,b,c,d){throw Error(\"call to abstract method\");},intervalChanged_:function(a,b,c){}});Object.assign(wa.prototype,{beforeStart_:wa.prototype.copySampleValue_,afterEnd_:wa.prototype.copySampleValue_});Bd.prototype=Object.assign(Object.create(wa.prototype),{constructor:Bd,DefaultSettings_:{endingStart:2400,endingEnd:2400},intervalChanged_:function(a,b,c){var d=this.parameterPositions,e=a-2,f=\na+1,g=d[e],h=d[f];if(void 0===g)switch(this.getSettings_().endingStart){case 2401:e=a;g=2*b-c;break;case 2402:e=d.length-2;g=b+d[e]-d[e+1];break;default:e=a,g=c}if(void 0===h)switch(this.getSettings_().endingEnd){case 2401:f=a;h=2*c-b;break;case 2402:f=1;h=c+d[1]-d[0];break;default:f=a-1,h=b}a=.5*(c-b);d=this.valueSize;this._weightPrev=a/(b-g);this._weightNext=a/(h-c);this._offsetPrev=e*d;this._offsetNext=f*d},interpolate_:function(a,b,c,d){var e=this.resultBuffer,f=this.sampleValues,g=this.valueSize;\na*=g;var h=a-g,k=this._offsetPrev,l=this._offsetNext,m=this._weightPrev,p=this._weightNext,n=(c-b)/(d-b);c=n*n;d=c*n;b=-m*d+2*m*c-m*n;m=(1+m)*d+(-1.5-2*m)*c+(-.5+m)*n+1;n=(-1-p)*d+(1.5+p)*c+.5*n;p=p*d-p*c;for(c=0;c!==g;++c)e[c]=b*f[k+c]+m*f[h+c]+n*f[a+c]+p*f[l+c];return e}});Tc.prototype=Object.assign(Object.create(wa.prototype),{constructor:Tc,interpolate_:function(a,b,c,d){var e=this.resultBuffer,f=this.sampleValues,g=this.valueSize;a*=g;var h=a-g;b=(c-b)/(d-b);c=1-b;for(d=0;d!==g;++d)e[d]=f[h+\nd]*c+f[a+d]*b;return e}});Cd.prototype=Object.assign(Object.create(wa.prototype),{constructor:Cd,interpolate_:function(a,b,c,d){return this.copySampleValue_(a-1)}});var ab={TimeBufferType:Float32Array,ValueBufferType:Float32Array,DefaultInterpolation:2301,InterpolantFactoryMethodDiscrete:function(a){return new Cd(this.times,this.values,this.getValueSize(),a)},InterpolantFactoryMethodLinear:function(a){return new Tc(this.times,this.values,this.getValueSize(),a)},InterpolantFactoryMethodSmooth:function(a){return new Bd(this.times,\nthis.values,this.getValueSize(),a)},setInterpolation:function(a){switch(a){case 2300:var b=this.InterpolantFactoryMethodDiscrete;break;case 2301:b=this.InterpolantFactoryMethodLinear;break;case 2302:b=this.InterpolantFactoryMethodSmooth}if(void 0===b){b=\"unsupported interpolation for \"+this.ValueTypeName+\" keyframe track named \"+this.name;if(void 0===this.createInterpolant)if(a!==this.DefaultInterpolation)this.setInterpolation(this.DefaultInterpolation);else throw Error(b);console.warn(\"THREE.KeyframeTrackPrototype:\",\nb)}else this.createInterpolant=b},getInterpolation:function(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return 2300;case this.InterpolantFactoryMethodLinear:return 2301;case this.InterpolantFactoryMethodSmooth:return 2302}},getValueSize:function(){return this.values.length/this.times.length},shift:function(a){if(0!==a)for(var b=this.times,c=0,d=b.length;c!==d;++c)b[c]+=a;return this},scale:function(a){if(1!==a)for(var b=this.times,c=0,d=b.length;c!==d;++c)b[c]*=a;return this},\ntrim:function(a,b){for(var c=this.times,d=c.length,e=0,f=d-1;e!==d&&c[e]<a;)++e;for(;-1!==f&&c[f]>b;)--f;++f;if(0!==e||f!==d)e>=f&&(f=Math.max(f,1),e=f-1),a=this.getValueSize(),this.times=ea.arraySlice(c,e,f),this.values=ea.arraySlice(this.values,e*a,f*a);return this},validate:function(){var a=!0,b=this.getValueSize();0!==b-Math.floor(b)&&(console.error(\"THREE.KeyframeTrackPrototype: Invalid value size in track.\",this),a=!1);var c=this.times,b=this.values,d=c.length;0===d&&(console.error(\"THREE.KeyframeTrackPrototype: Track is empty.\",\nthis),a=!1);for(var e=null,f=0;f!==d;f++){var g=c[f];if(\"number\"===typeof g&&isNaN(g)){console.error(\"THREE.KeyframeTrackPrototype: Time is not a valid number.\",this,f,g);a=!1;break}if(null!==e&&e>g){console.error(\"THREE.KeyframeTrackPrototype: Out of order keys.\",this,f,g,e);a=!1;break}e=g}if(void 0!==b&&ea.isTypedArray(b))for(f=0,c=b.length;f!==c;++f)if(d=b[f],isNaN(d)){console.error(\"THREE.KeyframeTrackPrototype: Value is not a valid number.\",this,f,d);a=!1;break}return a},optimize:function(){for(var a,\nb,c=this.times,d=this.values,e=this.getValueSize(),f=2302===this.getInterpolation(),g=1,h=c.length-1,k=1;k<h;++k){a=!1;var l=c[k];if(l!==c[k+1]&&(1!==k||l!==l[0]))if(f)a=!0;else{b=k*e;for(var m=b-e,p=b+e,l=0;l!==e;++l){var n=d[b+l];if(n!==d[m+l]||n!==d[p+l]){a=!0;break}}}if(a){if(k!==g)for(c[g]=c[k],b=k*e,a=g*e,l=0;l!==e;++l)d[a+l]=d[b+l];++g}}if(0<h){c[g]=c[h];b=h*e;a=g*e;for(l=0;l!==e;++l)d[a+l]=d[b+l];++g}g!==c.length&&(this.times=ea.arraySlice(c,0,g),this.values=ea.arraySlice(d,0,g*e));return this}};\nbc.prototype=Object.assign(Object.create(ab),{constructor:bc,ValueTypeName:\"vector\"});Dd.prototype=Object.assign(Object.create(wa.prototype),{constructor:Dd,interpolate_:function(a,b,c,d){var e=this.resultBuffer,f=this.sampleValues,g=this.valueSize;a*=g;b=(c-b)/(d-b);for(c=a+g;a!==c;a+=4)ia.slerpFlat(e,0,f,a-g,f,a,b);return e}});Uc.prototype=Object.assign(Object.create(ab),{constructor:Uc,ValueTypeName:\"quaternion\",DefaultInterpolation:2301,InterpolantFactoryMethodLinear:function(a){return new Dd(this.times,\nthis.values,this.getValueSize(),a)},InterpolantFactoryMethodSmooth:void 0});cc.prototype=Object.assign(Object.create(ab),{constructor:cc,ValueTypeName:\"number\"});Ed.prototype=Object.assign(Object.create(ab),{constructor:Ed,ValueTypeName:\"string\",ValueBufferType:Array,DefaultInterpolation:2300,InterpolantFactoryMethodLinear:void 0,InterpolantFactoryMethodSmooth:void 0});Fd.prototype=Object.assign(Object.create(ab),{constructor:Fd,ValueTypeName:\"bool\",ValueBufferType:Array,DefaultInterpolation:2300,\nInterpolantFactoryMethodLinear:void 0,InterpolantFactoryMethodSmooth:void 0});Gd.prototype=Object.assign(Object.create(ab),{constructor:Gd,ValueTypeName:\"color\"});tb.prototype=ab;ab.constructor=tb;Object.assign(tb,{parse:function(a){if(void 0===a.type)throw Error(\"track type undefined, can not parse\");var b=tb._getTrackTypeForValueTypeName(a.type);if(void 0===a.times){var c=[],d=[];ea.flattenJSON(a.keys,c,d,\"value\");a.times=c;a.values=d}return void 0!==b.parse?b.parse(a):new b(a.name,a.times,a.values,\na.interpolation)},toJSON:function(a){var b=a.constructor;if(void 0!==b.toJSON)b=b.toJSON(a);else{var b={name:a.name,times:ea.convertArray(a.times,Array),values:ea.convertArray(a.values,Array)},c=a.getInterpolation();c!==a.DefaultInterpolation&&(b.interpolation=c)}b.type=a.ValueTypeName;return b},_getTrackTypeForValueTypeName:function(a){switch(a.toLowerCase()){case \"scalar\":case \"double\":case \"float\":case \"number\":case \"integer\":return cc;case \"vector\":case \"vector2\":case \"vector3\":case \"vector4\":return bc;\ncase \"color\":return Gd;case \"quaternion\":return Uc;case \"bool\":case \"boolean\":return Fd;case \"string\":return Ed}throw Error(\"Unsupported typeName: \"+a);}});Object.assign(Ba,{parse:function(a){for(var b=[],c=a.tracks,d=1/(a.fps||1),e=0,f=c.length;e!==f;++e)b.push(tb.parse(c[e]).scale(d));return new Ba(a.name,a.duration,b)},toJSON:function(a){var b=[],c=a.tracks;a={name:a.name,duration:a.duration,tracks:b};for(var d=0,e=c.length;d!==e;++d)b.push(tb.toJSON(c[d]));return a},CreateFromMorphTargetSequence:function(a,\nb,c,d){for(var e=b.length,f=[],g=0;g<e;g++){var h=[],k=[];h.push((g+e-1)%e,g,(g+1)%e);k.push(0,1,0);var l=ea.getKeyframeOrder(h),h=ea.sortedArray(h,1,l),k=ea.sortedArray(k,1,l);d||0!==h[0]||(h.push(e),k.push(k[0]));f.push((new cc(\".morphTargetInfluences[\"+b[g].name+\"]\",h,k)).scale(1/c))}return new Ba(a,-1,f)},findByName:function(a,b){var c=a;Array.isArray(a)||(c=a.geometry&&a.geometry.animations||a.animations);for(a=0;a<c.length;a++)if(c[a].name===b)return c[a];return null},CreateClipsFromMorphTargetSequences:function(a,\nb,c){for(var d,e={},f=/^([\\w-]*?)([\\d]+)$/,g=0,h=a.length;g<h;g++){var k=a[g],l=k.name.match(f);l&&1<l.length&&(d=l[1],(l=e[d])||(e[d]=l=[]),l.push(k))}a=[];for(d in e)a.push(Ba.CreateFromMorphTargetSequence(d,e[d],b,c));return a},parseAnimation:function(a,b){if(!a)return console.error(\"THREE.AnimationClip: No animation in JSONLoader data.\"),null;var c=function(a,b,c,d,e){if(0!==c.length){var f=[],g=[];ea.flattenJSON(c,f,g,d);0!==f.length&&e.push(new a(b,f,g))}},d=[],e=a.name||\"default\",f=a.length||\n-1,g=a.fps||30;a=a.hierarchy||[];for(var h=0;h<a.length;h++){var k=a[h].keys;if(k&&0!==k.length)if(k[0].morphTargets){for(var f={},l=0;l<k.length;l++)if(k[l].morphTargets)for(var m=0;m<k[l].morphTargets.length;m++)f[k[l].morphTargets[m]]=-1;for(var p in f){for(var n=[],r=[],m=0;m!==k[l].morphTargets.length;++m){var v=k[l];n.push(v.time);r.push(v.morphTarget===p?1:0)}d.push(new cc(\".morphTargetInfluence[\"+p+\"]\",n,r))}f=f.length*(g||1)}else l=\".bones[\"+b[h].name+\"]\",c(bc,l+\".position\",k,\"pos\",d),c(Uc,\nl+\".quaternion\",k,\"rot\",d),c(bc,l+\".scale\",k,\"scl\",d)}return 0===d.length?null:new Ba(e,f,d)}});Object.assign(Ba.prototype,{resetDuration:function(){for(var a=0,b=0,c=this.tracks.length;b!==c;++b)var d=this.tracks[b],a=Math.max(a,d.times[d.times.length-1]);this.duration=a},trim:function(){for(var a=0;a<this.tracks.length;a++)this.tracks[a].trim(0,this.duration);return this},optimize:function(){for(var a=0;a<this.tracks.length;a++)this.tracks[a].optimize();return this}});Object.assign(Hd.prototype,\n{load:function(a,b,c,d){var e=this;(new Ia(e.manager)).load(a,function(a){b(e.parse(JSON.parse(a)))},c,d)},setTextures:function(a){this.textures=a},parse:function(a){function b(a){void 0===c[a]&&console.warn(\"THREE.MaterialLoader: Undefined texture\",a);return c[a]}var c=this.textures,d=new sg[a.type];void 0!==a.uuid&&(d.uuid=a.uuid);void 0!==a.name&&(d.name=a.name);void 0!==a.color&&d.color.setHex(a.color);void 0!==a.roughness&&(d.roughness=a.roughness);void 0!==a.metalness&&(d.metalness=a.metalness);\nvoid 0!==a.emissive&&d.emissive.setHex(a.emissive);void 0!==a.specular&&d.specular.setHex(a.specular);void 0!==a.shininess&&(d.shininess=a.shininess);void 0!==a.clearCoat&&(d.clearCoat=a.clearCoat);void 0!==a.clearCoatRoughness&&(d.clearCoatRoughness=a.clearCoatRoughness);void 0!==a.uniforms&&(d.uniforms=a.uniforms);void 0!==a.vertexShader&&(d.vertexShader=a.vertexShader);void 0!==a.fragmentShader&&(d.fragmentShader=a.fragmentShader);void 0!==a.vertexColors&&(d.vertexColors=a.vertexColors);void 0!==\na.fog&&(d.fog=a.fog);void 0!==a.flatShading&&(d.flatShading=a.flatShading);void 0!==a.blending&&(d.blending=a.blending);void 0!==a.side&&(d.side=a.side);void 0!==a.opacity&&(d.opacity=a.opacity);void 0!==a.transparent&&(d.transparent=a.transparent);void 0!==a.alphaTest&&(d.alphaTest=a.alphaTest);void 0!==a.depthTest&&(d.depthTest=a.depthTest);void 0!==a.depthWrite&&(d.depthWrite=a.depthWrite);void 0!==a.colorWrite&&(d.colorWrite=a.colorWrite);void 0!==a.wireframe&&(d.wireframe=a.wireframe);void 0!==\na.wireframeLinewidth&&(d.wireframeLinewidth=a.wireframeLinewidth);void 0!==a.wireframeLinecap&&(d.wireframeLinecap=a.wireframeLinecap);void 0!==a.wireframeLinejoin&&(d.wireframeLinejoin=a.wireframeLinejoin);void 0!==a.skinning&&(d.skinning=a.skinning);void 0!==a.morphTargets&&(d.morphTargets=a.morphTargets);void 0!==a.dithering&&(d.dithering=a.dithering);void 0!==a.visible&&(d.visible=a.visible);void 0!==a.userData&&(d.userData=a.userData);void 0!==a.shading&&(d.flatShading=1===a.shading);void 0!==\na.size&&(d.size=a.size);void 0!==a.sizeAttenuation&&(d.sizeAttenuation=a.sizeAttenuation);void 0!==a.map&&(d.map=b(a.map));void 0!==a.alphaMap&&(d.alphaMap=b(a.alphaMap),d.transparent=!0);void 0!==a.bumpMap&&(d.bumpMap=b(a.bumpMap));void 0!==a.bumpScale&&(d.bumpScale=a.bumpScale);void 0!==a.normalMap&&(d.normalMap=b(a.normalMap));if(void 0!==a.normalScale){var e=a.normalScale;!1===Array.isArray(e)&&(e=[e,e]);d.normalScale=(new D).fromArray(e)}void 0!==a.displacementMap&&(d.displacementMap=b(a.displacementMap));\nvoid 0!==a.displacementScale&&(d.displacementScale=a.displacementScale);void 0!==a.displacementBias&&(d.displacementBias=a.displacementBias);void 0!==a.roughnessMap&&(d.roughnessMap=b(a.roughnessMap));void 0!==a.metalnessMap&&(d.metalnessMap=b(a.metalnessMap));void 0!==a.emissiveMap&&(d.emissiveMap=b(a.emissiveMap));void 0!==a.emissiveIntensity&&(d.emissiveIntensity=a.emissiveIntensity);void 0!==a.specularMap&&(d.specularMap=b(a.specularMap));void 0!==a.envMap&&(d.envMap=b(a.envMap));void 0!==a.reflectivity&&\n(d.reflectivity=a.reflectivity);void 0!==a.lightMap&&(d.lightMap=b(a.lightMap));void 0!==a.lightMapIntensity&&(d.lightMapIntensity=a.lightMapIntensity);void 0!==a.aoMap&&(d.aoMap=b(a.aoMap));void 0!==a.aoMapIntensity&&(d.aoMapIntensity=a.aoMapIntensity);void 0!==a.gradientMap&&(d.gradientMap=b(a.gradientMap));return d}});Object.assign(ce.prototype,{load:function(a,b,c,d){var e=this;(new Ia(e.manager)).load(a,function(a){b(e.parse(JSON.parse(a)))},c,d)},parse:function(a){var b=new F;var c=a.data.index;\nvoid 0!==c&&(c=new hf[c.type](c.array),b.setIndex(new K(c,1)));var d=a.data.attributes;for(f in d){var e=d[f];c=new hf[e.type](e.array);b.addAttribute(f,new K(c,e.itemSize,e.normalized))}var f=a.data.groups||a.data.drawcalls||a.data.offsets;if(void 0!==f)for(c=0,d=f.length;c!==d;++c)e=f[c],b.addGroup(e.start,e.count,e.materialIndex);a=a.data.boundingSphere;void 0!==a&&(f=new n,void 0!==a.center&&f.fromArray(a.center),b.boundingSphere=new Ca(f,a.radius));return b}});var hf={Int8Array:Int8Array,Uint8Array:Uint8Array,\nUint8ClampedArray:\"undefined\"!==typeof Uint8ClampedArray?Uint8ClampedArray:Uint8Array,Int16Array:Int16Array,Uint16Array:Uint16Array,Int32Array:Int32Array,Uint32Array:Uint32Array,Float32Array:Float32Array,Float64Array:Float64Array};dc.Handlers={handlers:[],add:function(a,b){this.handlers.push(a,b)},get:function(a){for(var b=this.handlers,c=0,d=b.length;c<d;c+=2){var e=b[c+1];if(b[c].test(a))return e}return null}};Object.assign(dc.prototype,{crossOrigin:void 0,extractUrlBase:function(a){a=a.split(\"/\");\nif(1===a.length)return\"./\";a.pop();return a.join(\"/\")+\"/\"},initMaterials:function(a,b,c){for(var d=[],e=0;e<a.length;++e)d[e]=this.createMaterial(a[e],b,c);return d},createMaterial:function(){var a={NoBlending:0,NormalBlending:1,AdditiveBlending:2,SubtractiveBlending:3,MultiplyBlending:4,CustomBlending:5},b=new C,c=new sd,d=new Hd;return function(e,f,g){function h(a,b,d,e,h){a=f+a;var l=dc.Handlers.get(a);null!==l?a=l.load(a):(c.setCrossOrigin(g),a=c.load(a));void 0!==b&&(a.repeat.fromArray(b),1!==\nb[0]&&(a.wrapS=1E3),1!==b[1]&&(a.wrapT=1E3));void 0!==d&&a.offset.fromArray(d);void 0!==e&&(\"repeat\"===e[0]&&(a.wrapS=1E3),\"mirror\"===e[0]&&(a.wrapS=1002),\"repeat\"===e[1]&&(a.wrapT=1E3),\"mirror\"===e[1]&&(a.wrapT=1002));void 0!==h&&(a.anisotropy=h);b=R.generateUUID();k[b]=a;return b}var k={},l={uuid:R.generateUUID(),type:\"MeshLambertMaterial\"},m;for(m in e){var p=e[m];switch(m){case \"DbgColor\":case \"DbgIndex\":case \"opticalDensity\":case \"illumination\":break;case \"DbgName\":l.name=p;break;case \"blending\":l.blending=\na[p];break;case \"colorAmbient\":case \"mapAmbient\":console.warn(\"THREE.Loader.createMaterial:\",m,\"is no longer supported.\");break;case \"colorDiffuse\":l.color=b.fromArray(p).getHex();break;case \"colorSpecular\":l.specular=b.fromArray(p).getHex();break;case \"colorEmissive\":l.emissive=b.fromArray(p).getHex();break;case \"specularCoef\":l.shininess=p;break;case \"shading\":\"basic\"===p.toLowerCase()&&(l.type=\"MeshBasicMaterial\");\"phong\"===p.toLowerCase()&&(l.type=\"MeshPhongMaterial\");\"standard\"===p.toLowerCase()&&\n(l.type=\"MeshStandardMaterial\");break;case \"mapDiffuse\":l.map=h(p,e.mapDiffuseRepeat,e.mapDiffuseOffset,e.mapDiffuseWrap,e.mapDiffuseAnisotropy);break;case \"mapDiffuseRepeat\":case \"mapDiffuseOffset\":case \"mapDiffuseWrap\":case \"mapDiffuseAnisotropy\":break;case \"mapEmissive\":l.emissiveMap=h(p,e.mapEmissiveRepeat,e.mapEmissiveOffset,e.mapEmissiveWrap,e.mapEmissiveAnisotropy);break;case \"mapEmissiveRepeat\":case \"mapEmissiveOffset\":case \"mapEmissiveWrap\":case \"mapEmissiveAnisotropy\":break;case \"mapLight\":l.lightMap=\nh(p,e.mapLightRepeat,e.mapLightOffset,e.mapLightWrap,e.mapLightAnisotropy);break;case \"mapLightRepeat\":case \"mapLightOffset\":case \"mapLightWrap\":case \"mapLightAnisotropy\":break;case \"mapAO\":l.aoMap=h(p,e.mapAORepeat,e.mapAOOffset,e.mapAOWrap,e.mapAOAnisotropy);break;case \"mapAORepeat\":case \"mapAOOffset\":case \"mapAOWrap\":case \"mapAOAnisotropy\":break;case \"mapBump\":l.bumpMap=h(p,e.mapBumpRepeat,e.mapBumpOffset,e.mapBumpWrap,e.mapBumpAnisotropy);break;case \"mapBumpScale\":l.bumpScale=p;break;case \"mapBumpRepeat\":case \"mapBumpOffset\":case \"mapBumpWrap\":case \"mapBumpAnisotropy\":break;\ncase \"mapNormal\":l.normalMap=h(p,e.mapNormalRepeat,e.mapNormalOffset,e.mapNormalWrap,e.mapNormalAnisotropy);break;case \"mapNormalFactor\":l.normalScale=[p,p];break;case \"mapNormalRepeat\":case \"mapNormalOffset\":case \"mapNormalWrap\":case \"mapNormalAnisotropy\":break;case \"mapSpecular\":l.specularMap=h(p,e.mapSpecularRepeat,e.mapSpecularOffset,e.mapSpecularWrap,e.mapSpecularAnisotropy);break;case \"mapSpecularRepeat\":case \"mapSpecularOffset\":case \"mapSpecularWrap\":case \"mapSpecularAnisotropy\":break;case \"mapMetalness\":l.metalnessMap=\nh(p,e.mapMetalnessRepeat,e.mapMetalnessOffset,e.mapMetalnessWrap,e.mapMetalnessAnisotropy);break;case \"mapMetalnessRepeat\":case \"mapMetalnessOffset\":case \"mapMetalnessWrap\":case \"mapMetalnessAnisotropy\":break;case \"mapRoughness\":l.roughnessMap=h(p,e.mapRoughnessRepeat,e.mapRoughnessOffset,e.mapRoughnessWrap,e.mapRoughnessAnisotropy);break;case \"mapRoughnessRepeat\":case \"mapRoughnessOffset\":case \"mapRoughnessWrap\":case \"mapRoughnessAnisotropy\":break;case \"mapAlpha\":l.alphaMap=h(p,e.mapAlphaRepeat,\ne.mapAlphaOffset,e.mapAlphaWrap,e.mapAlphaAnisotropy);break;case \"mapAlphaRepeat\":case \"mapAlphaOffset\":case \"mapAlphaWrap\":case \"mapAlphaAnisotropy\":break;case \"flipSided\":l.side=1;break;case \"doubleSided\":l.side=2;break;case \"transparency\":console.warn(\"THREE.Loader.createMaterial: transparency has been renamed to opacity\");l.opacity=p;break;case \"depthTest\":case \"depthWrite\":case \"colorWrite\":case \"opacity\":case \"reflectivity\":case \"transparent\":case \"visible\":case \"wireframe\":l[m]=p;break;case \"vertexColors\":!0===\np&&(l.vertexColors=2);\"face\"===p&&(l.vertexColors=1);break;default:console.error(\"THREE.Loader.createMaterial: Unsupported\",m,p)}}\"MeshBasicMaterial\"===l.type&&delete l.emissive;\"MeshPhongMaterial\"!==l.type&&delete l.specular;1>l.opacity&&(l.transparent=!0);d.setTextures(k);return d.parse(l)}}()});Object.assign(de.prototype,{load:function(a,b,c,d){var e=this,f=this.texturePath&&\"string\"===typeof this.texturePath?this.texturePath:dc.prototype.extractUrlBase(a),g=new Ia(this.manager);g.setWithCredentials(this.withCredentials);\ng.load(a,function(c){c=JSON.parse(c);var d=c.metadata;if(void 0!==d&&(d=d.type,void 0!==d)){if(\"object\"===d.toLowerCase()){console.error(\"THREE.JSONLoader: \"+a+\" should be loaded with THREE.ObjectLoader instead.\");return}if(\"scene\"===d.toLowerCase()){console.error(\"THREE.JSONLoader: \"+a+\" should be loaded with THREE.SceneLoader instead.\");return}}c=e.parse(c,f);b(c.geometry,c.materials)},c,d)},setTexturePath:function(a){this.texturePath=a},parse:function(){return function(a,b){void 0!==a.data&&(a=\na.data);a.scale=void 0!==a.scale?1/a.scale:1;var c=new Q,d=a,e,f,g,h=d.faces;var k=d.vertices;var l=d.normals,m=d.colors;var p=d.scale;var t=0;if(void 0!==d.uvs){for(e=0;e<d.uvs.length;e++)d.uvs[e].length&&t++;for(e=0;e<t;e++)c.faceVertexUvs[e]=[]}var r=0;for(g=k.length;r<g;)e=new n,e.x=k[r++]*p,e.y=k[r++]*p,e.z=k[r++]*p,c.vertices.push(e);r=0;for(g=h.length;r<g;){k=h[r++];var v=k&1;var u=k&2;e=k&8;var x=k&16;var y=k&32;p=k&64;k&=128;if(v){v=new Qa;v.a=h[r];v.b=h[r+1];v.c=h[r+3];var w=new Qa;w.a=\nh[r+1];w.b=h[r+2];w.c=h[r+3];r+=4;u&&(u=h[r++],v.materialIndex=u,w.materialIndex=u);u=c.faces.length;if(e)for(e=0;e<t;e++){var z=d.uvs[e];c.faceVertexUvs[e][u]=[];c.faceVertexUvs[e][u+1]=[];for(f=0;4>f;f++){var B=h[r++];var H=z[2*B];B=z[2*B+1];H=new D(H,B);2!==f&&c.faceVertexUvs[e][u].push(H);0!==f&&c.faceVertexUvs[e][u+1].push(H)}}x&&(x=3*h[r++],v.normal.set(l[x++],l[x++],l[x]),w.normal.copy(v.normal));if(y)for(e=0;4>e;e++)x=3*h[r++],y=new n(l[x++],l[x++],l[x]),2!==e&&v.vertexNormals.push(y),0!==\ne&&w.vertexNormals.push(y);p&&(p=h[r++],p=m[p],v.color.setHex(p),w.color.setHex(p));if(k)for(e=0;4>e;e++)p=h[r++],p=m[p],2!==e&&v.vertexColors.push(new C(p)),0!==e&&w.vertexColors.push(new C(p));c.faces.push(v);c.faces.push(w)}else{v=new Qa;v.a=h[r++];v.b=h[r++];v.c=h[r++];u&&(u=h[r++],v.materialIndex=u);u=c.faces.length;if(e)for(e=0;e<t;e++)for(z=d.uvs[e],c.faceVertexUvs[e][u]=[],f=0;3>f;f++)B=h[r++],H=z[2*B],B=z[2*B+1],H=new D(H,B),c.faceVertexUvs[e][u].push(H);x&&(x=3*h[r++],v.normal.set(l[x++],\nl[x++],l[x]));if(y)for(e=0;3>e;e++)x=3*h[r++],y=new n(l[x++],l[x++],l[x]),v.vertexNormals.push(y);p&&(p=h[r++],v.color.setHex(m[p]));if(k)for(e=0;3>e;e++)p=h[r++],v.vertexColors.push(new C(m[p]));c.faces.push(v)}}d=a;r=void 0!==d.influencesPerVertex?d.influencesPerVertex:2;if(d.skinWeights)for(g=0,h=d.skinWeights.length;g<h;g+=r)c.skinWeights.push(new S(d.skinWeights[g],1<r?d.skinWeights[g+1]:0,2<r?d.skinWeights[g+2]:0,3<r?d.skinWeights[g+3]:0));if(d.skinIndices)for(g=0,h=d.skinIndices.length;g<h;g+=\nr)c.skinIndices.push(new S(d.skinIndices[g],1<r?d.skinIndices[g+1]:0,2<r?d.skinIndices[g+2]:0,3<r?d.skinIndices[g+3]:0));c.bones=d.bones;c.bones&&0<c.bones.length&&(c.skinWeights.length!==c.skinIndices.length||c.skinIndices.length!==c.vertices.length)&&console.warn(\"When skinning, number of vertices (\"+c.vertices.length+\"), skinIndices (\"+c.skinIndices.length+\"), and skinWeights (\"+c.skinWeights.length+\") should match.\");g=a;h=g.scale;if(void 0!==g.morphTargets)for(d=0,r=g.morphTargets.length;d<r;d++)for(c.morphTargets[d]=\n{},c.morphTargets[d].name=g.morphTargets[d].name,c.morphTargets[d].vertices=[],l=c.morphTargets[d].vertices,m=g.morphTargets[d].vertices,t=0,k=m.length;t<k;t+=3)p=new n,p.x=m[t]*h,p.y=m[t+1]*h,p.z=m[t+2]*h,l.push(p);if(void 0!==g.morphColors&&0<g.morphColors.length)for(console.warn('THREE.JSONLoader: \"morphColors\" no longer supported. Using them as face colors.'),h=c.faces,g=g.morphColors[0].colors,d=0,r=h.length;d<r;d++)h[d].color.fromArray(g,3*d);g=a;d=[];r=[];void 0!==g.animation&&r.push(g.animation);\nvoid 0!==g.animations&&(g.animations.length?r=r.concat(g.animations):r.push(g.animations));for(g=0;g<r.length;g++)(h=Ba.parseAnimation(r[g],c.bones))&&d.push(h);c.morphTargets&&(r=Ba.CreateClipsFromMorphTargetSequences(c.morphTargets,10),d=d.concat(r));0<d.length&&(c.animations=d);c.computeFaceNormals();c.computeBoundingSphere();if(void 0===a.materials||0===a.materials.length)return{geometry:c};a=dc.prototype.initMaterials(a.materials,b,this.crossOrigin);return{geometry:c,materials:a}}}()});Object.assign(Se.prototype,\n{load:function(a,b,c,d){\"\"===this.texturePath&&(this.texturePath=a.substring(0,a.lastIndexOf(\"/\")+1));var e=this;(new Ia(e.manager)).load(a,function(c){var f=null;try{f=JSON.parse(c)}catch(h){void 0!==d&&d(h);console.error(\"THREE:ObjectLoader: Can't parse \"+a+\".\",h.message);return}c=f.metadata;void 0===c||void 0===c.type||\"geometry\"===c.type.toLowerCase()?console.error(\"THREE.ObjectLoader: Can't load \"+a+\". Use THREE.JSONLoader instead.\"):e.parse(f,b)},c,d)},setTexturePath:function(a){this.texturePath=\na},setCrossOrigin:function(a){this.crossOrigin=a},parse:function(a,b){var c=this.parseGeometries(a.geometries),d=this.parseImages(a.images,function(){void 0!==b&&b(e)}),d=this.parseTextures(a.textures,d),d=this.parseMaterials(a.materials,d),e=this.parseObject(a.object,c,d);a.animations&&(e.animations=this.parseAnimations(a.animations));void 0!==a.images&&0!==a.images.length||void 0===b||b(e);return e},parseGeometries:function(a){var b={};if(void 0!==a)for(var c=new de,d=new ce,e=0,f=a.length;e<f;e++){var g=\na[e];switch(g.type){case \"PlaneGeometry\":case \"PlaneBufferGeometry\":var h=new Ka[g.type](g.width,g.height,g.widthSegments,g.heightSegments);break;case \"BoxGeometry\":case \"BoxBufferGeometry\":case \"CubeGeometry\":h=new Ka[g.type](g.width,g.height,g.depth,g.widthSegments,g.heightSegments,g.depthSegments);break;case \"CircleGeometry\":case \"CircleBufferGeometry\":h=new Ka[g.type](g.radius,g.segments,g.thetaStart,g.thetaLength);break;case \"CylinderGeometry\":case \"CylinderBufferGeometry\":h=new Ka[g.type](g.radiusTop,\ng.radiusBottom,g.height,g.radialSegments,g.heightSegments,g.openEnded,g.thetaStart,g.thetaLength);break;case \"ConeGeometry\":case \"ConeBufferGeometry\":h=new Ka[g.type](g.radius,g.height,g.radialSegments,g.heightSegments,g.openEnded,g.thetaStart,g.thetaLength);break;case \"SphereGeometry\":case \"SphereBufferGeometry\":h=new Ka[g.type](g.radius,g.widthSegments,g.heightSegments,g.phiStart,g.phiLength,g.thetaStart,g.thetaLength);break;case \"DodecahedronGeometry\":case \"IcosahedronGeometry\":case \"OctahedronGeometry\":case \"TetrahedronGeometry\":h=\nnew Ka[g.type](g.radius,g.detail);break;case \"RingGeometry\":case \"RingBufferGeometry\":h=new Ka[g.type](g.innerRadius,g.outerRadius,g.thetaSegments,g.phiSegments,g.thetaStart,g.thetaLength);break;case \"TorusGeometry\":case \"TorusBufferGeometry\":h=new Ka[g.type](g.radius,g.tube,g.radialSegments,g.tubularSegments,g.arc);break;case \"TorusKnotGeometry\":case \"TorusKnotBufferGeometry\":h=new Ka[g.type](g.radius,g.tube,g.tubularSegments,g.radialSegments,g.p,g.q);break;case \"LatheGeometry\":case \"LatheBufferGeometry\":h=\nnew Ka[g.type](g.points,g.segments,g.phiStart,g.phiLength);break;case \"BufferGeometry\":h=d.parse(g);break;case \"Geometry\":h=c.parse(g,this.texturePath).geometry;break;default:console.warn('THREE.ObjectLoader: Unsupported geometry type \"'+g.type+'\"');continue}h.uuid=g.uuid;void 0!==g.name&&(h.name=g.name);b[g.uuid]=h}return b},parseMaterials:function(a,b){var c={};if(void 0!==a){var d=new Hd;d.setTextures(b);b=0;for(var e=a.length;b<e;b++){var f=a[b];if(\"MultiMaterial\"===f.type){for(var g=[],h=0;h<\nf.materials.length;h++)g.push(d.parse(f.materials[h]));c[f.uuid]=g}else c[f.uuid]=d.parse(f)}}return c},parseAnimations:function(a){for(var b=[],c=0;c<a.length;c++){var d=Ba.parse(a[c]);b.push(d)}return b},parseImages:function(a,b){function c(a){d.manager.itemStart(a);return f.load(a,function(){d.manager.itemEnd(a)},void 0,function(){d.manager.itemEnd(a);d.manager.itemError(a)})}var d=this,e={};if(void 0!==a&&0<a.length){b=new $d(b);var f=new Sc(b);f.setCrossOrigin(this.crossOrigin);b=0;for(var g=\na.length;b<g;b++){var h=a[b],k=/^(\\/\\/)|([a-z]+:(\\/\\/)?)/i.test(h.url)?h.url:d.texturePath+h.url;e[h.uuid]=c(k)}}return e},parseTextures:function(a,b){function c(a,b){if(\"number\"===typeof a)return a;console.warn(\"THREE.ObjectLoader.parseTexture: Constant should be in numeric form.\",a);return b[a]}var d={};if(void 0!==a)for(var e=0,f=a.length;e<f;e++){var g=a[e];void 0===g.image&&console.warn('THREE.ObjectLoader: No \"image\" specified for',g.uuid);void 0===b[g.image]&&console.warn(\"THREE.ObjectLoader: Undefined image\",\ng.image);var h=new N(b[g.image]);h.needsUpdate=!0;h.uuid=g.uuid;void 0!==g.name&&(h.name=g.name);void 0!==g.mapping&&(h.mapping=c(g.mapping,tg));void 0!==g.offset&&h.offset.fromArray(g.offset);void 0!==g.repeat&&h.repeat.fromArray(g.repeat);void 0!==g.wrap&&(h.wrapS=c(g.wrap[0],jf),h.wrapT=c(g.wrap[1],jf));void 0!==g.minFilter&&(h.minFilter=c(g.minFilter,kf));void 0!==g.magFilter&&(h.magFilter=c(g.magFilter,kf));void 0!==g.anisotropy&&(h.anisotropy=g.anisotropy);void 0!==g.flipY&&(h.flipY=g.flipY);\nd[g.uuid]=h}return d},parseObject:function(){var a=new O;return function(b,c,d){function e(a){void 0===c[a]&&console.warn(\"THREE.ObjectLoader: Undefined geometry\",a);return c[a]}function f(a){if(void 0!==a){if(Array.isArray(a)){for(var b=[],c=0,e=a.length;c<e;c++){var f=a[c];void 0===d[f]&&console.warn(\"THREE.ObjectLoader: Undefined material\",f);b.push(d[f])}return b}void 0===d[a]&&console.warn(\"THREE.ObjectLoader: Undefined material\",a);return d[a]}}switch(b.type){case \"Scene\":var g=new nd;void 0!==\nb.background&&Number.isInteger(b.background)&&(g.background=new C(b.background));void 0!==b.fog&&(\"Fog\"===b.fog.type?g.fog=new Ib(b.fog.color,b.fog.near,b.fog.far):\"FogExp2\"===b.fog.type&&(g.fog=new Hb(b.fog.color,b.fog.density)));break;case \"PerspectiveCamera\":g=new ja(b.fov,b.aspect,b.near,b.far);void 0!==b.focus&&(g.focus=b.focus);void 0!==b.zoom&&(g.zoom=b.zoom);void 0!==b.filmGauge&&(g.filmGauge=b.filmGauge);void 0!==b.filmOffset&&(g.filmOffset=b.filmOffset);void 0!==b.view&&(g.view=Object.assign({},\nb.view));break;case \"OrthographicCamera\":g=new Db(b.left,b.right,b.top,b.bottom,b.near,b.far);break;case \"AmbientLight\":g=new zd(b.color,b.intensity);break;case \"DirectionalLight\":g=new yd(b.color,b.intensity);break;case \"PointLight\":g=new wd(b.color,b.intensity,b.distance,b.decay);break;case \"RectAreaLight\":g=new Ad(b.color,b.intensity,b.width,b.height);break;case \"SpotLight\":g=new vd(b.color,b.intensity,b.distance,b.angle,b.penumbra,b.decay);break;case \"HemisphereLight\":g=new td(b.color,b.groundColor,\nb.intensity);break;case \"SkinnedMesh\":console.warn(\"THREE.ObjectLoader.parseObject() does not support SkinnedMesh yet.\");case \"Mesh\":g=e(b.geometry);var h=f(b.material);g=g.bones&&0<g.bones.length?new pd(g,h):new fa(g,h);break;case \"LOD\":g=new yc;break;case \"Line\":g=new ra(e(b.geometry),f(b.material),b.mode);break;case \"LineLoop\":g=new qd(e(b.geometry),f(b.material));break;case \"LineSegments\":g=new X(e(b.geometry),f(b.material));break;case \"PointCloud\":case \"Points\":g=new Jb(e(b.geometry),f(b.material));\nbreak;case \"Sprite\":g=new xc(f(b.material));break;case \"Group\":g=new Ac;break;default:g=new w}g.uuid=b.uuid;void 0!==b.name&&(g.name=b.name);void 0!==b.matrix?(a.fromArray(b.matrix),a.decompose(g.position,g.quaternion,g.scale)):(void 0!==b.position&&g.position.fromArray(b.position),void 0!==b.rotation&&g.rotation.fromArray(b.rotation),void 0!==b.quaternion&&g.quaternion.fromArray(b.quaternion),void 0!==b.scale&&g.scale.fromArray(b.scale));void 0!==b.castShadow&&(g.castShadow=b.castShadow);void 0!==\nb.receiveShadow&&(g.receiveShadow=b.receiveShadow);b.shadow&&(void 0!==b.shadow.bias&&(g.shadow.bias=b.shadow.bias),void 0!==b.shadow.radius&&(g.shadow.radius=b.shadow.radius),void 0!==b.shadow.mapSize&&g.shadow.mapSize.fromArray(b.shadow.mapSize),void 0!==b.shadow.camera&&(g.shadow.camera=this.parseObject(b.shadow.camera)));void 0!==b.visible&&(g.visible=b.visible);void 0!==b.userData&&(g.userData=b.userData);if(void 0!==b.children)for(var h=b.children,k=0;k<h.length;k++)g.add(this.parseObject(h[k],\nc,d));if(\"LOD\"===b.type)for(b=b.levels,h=0;h<b.length;h++){var k=b[h],l=g.getObjectByProperty(\"uuid\",k.object);void 0!==l&&g.addLevel(l,k.distance)}return g}}()});var tg={UVMapping:300,CubeReflectionMapping:301,CubeRefractionMapping:302,EquirectangularReflectionMapping:303,EquirectangularRefractionMapping:304,SphericalReflectionMapping:305,CubeUVReflectionMapping:306,CubeUVRefractionMapping:307},jf={RepeatWrapping:1E3,ClampToEdgeWrapping:1001,MirroredRepeatWrapping:1002},kf={NearestFilter:1003,NearestMipMapNearestFilter:1004,\nNearestMipMapLinearFilter:1005,LinearFilter:1006,LinearMipMapNearestFilter:1007,LinearMipMapLinearFilter:1008};Object.assign(pa.prototype,{getPoint:function(){console.warn(\"THREE.Curve: .getPoint() not implemented.\");return null},getPointAt:function(a){a=this.getUtoTmapping(a);return this.getPoint(a)},getPoints:function(a){void 0===a&&(a=5);for(var b=[],c=0;c<=a;c++)b.push(this.getPoint(c/a));return b},getSpacedPoints:function(a){void 0===a&&(a=5);for(var b=[],c=0;c<=a;c++)b.push(this.getPointAt(c/\na));return b},getLength:function(){var a=this.getLengths();return a[a.length-1]},getLengths:function(a){void 0===a&&(a=this.arcLengthDivisions);if(this.cacheArcLengths&&this.cacheArcLengths.length===a+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;var b=[],c=this.getPoint(0),d,e=0;b.push(0);for(d=1;d<=a;d++){var f=this.getPoint(d/a);e+=f.distanceTo(c);b.push(e);c=f}return this.cacheArcLengths=b},updateArcLengths:function(){this.needsUpdate=!0;this.getLengths()},getUtoTmapping:function(a,\nb){var c=this.getLengths(),d=c.length;b=b?b:a*c[d-1];for(var e=0,f=d-1,g;e<=f;)if(a=Math.floor(e+(f-e)/2),g=c[a]-b,0>g)e=a+1;else if(0<g)f=a-1;else{f=a;break}a=f;if(c[a]===b)return a/(d-1);e=c[a];return(a+(b-e)/(c[a+1]-e))/(d-1)},getTangent:function(a){var b=a-1E-4;a+=1E-4;0>b&&(b=0);1<a&&(a=1);b=this.getPoint(b);return this.getPoint(a).clone().sub(b).normalize()},getTangentAt:function(a){a=this.getUtoTmapping(a);return this.getTangent(a)},computeFrenetFrames:function(a,b){var c=new n,d=[],e=[],f=\n[],g=new n,h=new O,k;for(k=0;k<=a;k++){var l=k/a;d[k]=this.getTangentAt(l);d[k].normalize()}e[0]=new n;f[0]=new n;k=Number.MAX_VALUE;l=Math.abs(d[0].x);var m=Math.abs(d[0].y),p=Math.abs(d[0].z);l<=k&&(k=l,c.set(1,0,0));m<=k&&(k=m,c.set(0,1,0));p<=k&&c.set(0,0,1);g.crossVectors(d[0],c).normalize();e[0].crossVectors(d[0],g);f[0].crossVectors(d[0],e[0]);for(k=1;k<=a;k++)e[k]=e[k-1].clone(),f[k]=f[k-1].clone(),g.crossVectors(d[k-1],d[k]),g.length()>Number.EPSILON&&(g.normalize(),c=Math.acos(R.clamp(d[k-\n1].dot(d[k]),-1,1)),e[k].applyMatrix4(h.makeRotationAxis(g,c))),f[k].crossVectors(d[k],e[k]);if(!0===b)for(c=Math.acos(R.clamp(e[0].dot(e[a]),-1,1)),c/=a,0<d[0].dot(g.crossVectors(e[0],e[a]))&&(c=-c),k=1;k<=a;k++)e[k].applyMatrix4(h.makeRotationAxis(d[k],c*k)),f[k].crossVectors(d[k],e[k]);return{tangents:d,normals:e,binormals:f}}});Oa.prototype=Object.create(pa.prototype);Oa.prototype.constructor=Oa;Oa.prototype.isLineCurve=!0;Oa.prototype.getPoint=function(a){if(1===a)return this.v2.clone();var b=\nthis.v2.clone().sub(this.v1);b.multiplyScalar(a).add(this.v1);return b};Oa.prototype.getPointAt=function(a){return this.getPoint(a)};Oa.prototype.getTangent=function(a){return this.v2.clone().sub(this.v1).normalize()};Vc.prototype=Object.assign(Object.create(pa.prototype),{constructor:Vc,add:function(a){this.curves.push(a)},closePath:function(){var a=this.curves[0].getPoint(0),b=this.curves[this.curves.length-1].getPoint(1);a.equals(b)||this.curves.push(new Oa(b,a))},getPoint:function(a){var b=a*\nthis.getLength(),c=this.getCurveLengths();for(a=0;a<c.length;){if(c[a]>=b)return b=c[a]-b,a=this.curves[a],c=a.getLength(),a.getPointAt(0===c?0:1-b/c);a++}return null},getLength:function(){var a=this.getCurveLengths();return a[a.length-1]},updateArcLengths:function(){this.needsUpdate=!0;this.cacheLengths=null;this.getCurveLengths()},getCurveLengths:function(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;for(var a=[],b=0,c=0,d=this.curves.length;c<d;c++)b+=\nthis.curves[c].getLength(),a.push(b);return this.cacheLengths=a},getSpacedPoints:function(a){void 0===a&&(a=40);for(var b=[],c=0;c<=a;c++)b.push(this.getPoint(c/a));this.autoClose&&b.push(b[0]);return b},getPoints:function(a){a=a||12;for(var b=[],c,d=0,e=this.curves;d<e.length;d++)for(var f=e[d],f=f.getPoints(f&&f.isEllipseCurve?2*a:f&&f.isLineCurve?1:f&&f.isSplineCurve?a*f.points.length:a),g=0;g<f.length;g++){var h=f[g];c&&c.equals(h)||(b.push(h),c=h)}this.autoClose&&1<b.length&&!b[b.length-1].equals(b[0])&&\nb.push(b[0]);return b},createPointsGeometry:function(a){a=this.getPoints(a);return this.createGeometry(a)},createSpacedPointsGeometry:function(a){a=this.getSpacedPoints(a);return this.createGeometry(a)},createGeometry:function(a){for(var b=new Q,c=0,d=a.length;c<d;c++){var e=a[c];b.vertices.push(new n(e.x,e.y,e.z||0))}return b}});Ua.prototype=Object.create(pa.prototype);Ua.prototype.constructor=Ua;Ua.prototype.isEllipseCurve=!0;Ua.prototype.getPoint=function(a){for(var b=2*Math.PI,c=this.aEndAngle-\nthis.aStartAngle,d=Math.abs(c)<Number.EPSILON;0>c;)c+=b;for(;c>b;)c-=b;c<Number.EPSILON&&(c=d?0:b);!0!==this.aClockwise||d||(c=c===b?-b:c-b);b=this.aStartAngle+a*c;a=this.aX+this.xRadius*Math.cos(b);var e=this.aY+this.yRadius*Math.sin(b);0!==this.aRotation&&(b=Math.cos(this.aRotation),c=Math.sin(this.aRotation),d=a-this.aX,e-=this.aY,a=d*b-e*c+this.aX,e=d*c+e*b+this.aY);return new D(a,e)};wb.prototype=Object.create(pa.prototype);wb.prototype.constructor=wb;wb.prototype.isSplineCurve=!0;wb.prototype.getPoint=\nfunction(a){var b=this.points,c=(b.length-1)*a;a=Math.floor(c);var c=c-a,d=b[0===a?a:a-1],e=b[a],f=b[a>b.length-2?b.length-1:a+1],b=b[a>b.length-3?b.length-1:a+2];return new D(Te(c,d.x,e.x,f.x,b.x),Te(c,d.y,e.y,f.y,b.y))};ec.prototype=Object.create(pa.prototype);ec.prototype.constructor=ec;ec.prototype.getPoint=function(a){var b=this.v0,c=this.v1,d=this.v2,e=this.v3;return new D(vb(a,b.x,c.x,d.x,e.x),vb(a,b.y,c.y,d.y,e.y))};fc.prototype=Object.create(pa.prototype);fc.prototype.constructor=fc;fc.prototype.getPoint=\nfunction(a){var b=this.v0,c=this.v1,d=this.v2;return new D(ub(a,b.x,c.x,d.x),ub(a,b.y,c.y,d.y))};var ue=Object.assign(Object.create(Vc.prototype),{fromPoints:function(a){this.moveTo(a[0].x,a[0].y);for(var b=1,c=a.length;b<c;b++)this.lineTo(a[b].x,a[b].y)},moveTo:function(a,b){this.currentPoint.set(a,b)},lineTo:function(a,b){var c=new Oa(this.currentPoint.clone(),new D(a,b));this.curves.push(c);this.currentPoint.set(a,b)},quadraticCurveTo:function(a,b,c,d){a=new fc(this.currentPoint.clone(),new D(a,\nb),new D(c,d));this.curves.push(a);this.currentPoint.set(c,d)},bezierCurveTo:function(a,b,c,d,e,f){a=new ec(this.currentPoint.clone(),new D(a,b),new D(c,d),new D(e,f));this.curves.push(a);this.currentPoint.set(e,f)},splineThru:function(a){var b=[this.currentPoint.clone()].concat(a),b=new wb(b);this.curves.push(b);this.currentPoint.copy(a[a.length-1])},arc:function(a,b,c,d,e,f){this.absarc(a+this.currentPoint.x,b+this.currentPoint.y,c,d,e,f)},absarc:function(a,b,c,d,e,f){this.absellipse(a,b,c,c,d,\ne,f)},ellipse:function(a,b,c,d,e,f,g,h){this.absellipse(a+this.currentPoint.x,b+this.currentPoint.y,c,d,e,f,g,h)},absellipse:function(a,b,c,d,e,f,g,h){a=new Ua(a,b,c,d,e,f,g,h);0<this.curves.length&&(b=a.getPoint(0),b.equals(this.currentPoint)||this.lineTo(b.x,b.y));this.curves.push(a);a=a.getPoint(1);this.currentPoint.copy(a)}});Wc.prototype=ue;ue.constructor=Wc;xb.prototype=Object.assign(Object.create(ue),{constructor:xb,getPointsHoles:function(a){for(var b=[],c=0,d=this.holes.length;c<d;c++)b[c]=\nthis.holes[c].getPoints(a);return b},extractAllPoints:function(a){return{shape:this.getPoints(a),holes:this.getPointsHoles(a)}},extractPoints:function(a){return this.extractAllPoints(a)}});Object.assign(ee.prototype,{moveTo:function(a,b){this.currentPath=new Wc;this.subPaths.push(this.currentPath);this.currentPath.moveTo(a,b)},lineTo:function(a,b){this.currentPath.lineTo(a,b)},quadraticCurveTo:function(a,b,c,d){this.currentPath.quadraticCurveTo(a,b,c,d)},bezierCurveTo:function(a,b,c,d,e,f){this.currentPath.bezierCurveTo(a,\nb,c,d,e,f)},splineThru:function(a){this.currentPath.splineThru(a)},toShapes:function(a,b){function c(a){for(var b=[],c=0,d=a.length;c<d;c++){var e=a[c],f=new xb;f.curves=e.curves;b.push(f)}return b}function d(a,b){for(var c=b.length,d=!1,e=c-1,f=0;f<c;e=f++){var g=b[e],h=b[f],k=h.x-g.x,l=h.y-g.y;if(Math.abs(l)>Number.EPSILON){if(0>l&&(g=b[f],k=-k,h=b[e],l=-l),!(a.y<g.y||a.y>h.y))if(a.y===g.y){if(a.x===g.x)return!0}else{e=l*(a.x-g.x)-k*(a.y-g.y);if(0===e)return!0;0>e||(d=!d)}}else if(a.y===g.y&&(h.x<=\na.x&&a.x<=g.x||g.x<=a.x&&a.x<=h.x))return!0}return d}var e=Fa.isClockWise,f=this.subPaths;if(0===f.length)return[];if(!0===b)return c(f);b=[];if(1===f.length){var g=f[0];var h=new xb;h.curves=g.curves;b.push(h);return b}var k=!e(f[0].getPoints()),k=a?!k:k;h=[];var l=[],m=[],p=0;l[p]=void 0;m[p]=[];for(var n=0,r=f.length;n<r;n++){g=f[n];var v=g.getPoints();var u=e(v);(u=a?!u:u)?(!k&&l[p]&&p++,l[p]={s:new xb,p:v},l[p].s.curves=g.curves,k&&p++,m[p]=[]):m[p].push({h:g,p:v[0]})}if(!l[0])return c(f);if(1<\nl.length){n=!1;a=[];e=0;for(f=l.length;e<f;e++)h[e]=[];e=0;for(f=l.length;e<f;e++)for(g=m[e],u=0;u<g.length;u++){k=g[u];p=!0;for(v=0;v<l.length;v++)d(k.p,l[v].p)&&(e!==v&&a.push({froms:e,tos:v,hole:u}),p?(p=!1,h[v].push(k)):n=!0);p&&h[e].push(k)}0<a.length&&(n||(m=h))}n=0;for(e=l.length;n<e;n++)for(h=l[n].s,b.push(h),a=m[n],f=0,g=a.length;f<g;f++)h.holes.push(a[f].h);return b}});Object.assign(fe.prototype,{isFont:!0,generateShapes:function(a,b,c){void 0===b&&(b=100);void 0===c&&(c=4);var d=this.data;\na=String(a).split(\"\");var e=b/d.resolution,f=(d.boundingBox.yMax-d.boundingBox.yMin+d.underlineThickness)*e,g=0,h=0;b=[];for(var k=0;k<a.length;k++){var l=a[k];if(\"\\n\"===l)g=0,h-=f;else{var m;var p=e;var n=g,r=h;if(l=d.glyphs[l]||d.glyphs[\"?\"]){var v=new ee,u=[];if(l.o)for(var x=l._cachedOutline||(l._cachedOutline=l.o.split(\" \")),w=0,z=x.length;w<z;)switch(x[w++]){case \"m\":var C=x[w++]*p+n;var B=x[w++]*p+r;v.moveTo(C,B);break;case \"l\":C=x[w++]*p+n;B=x[w++]*p+r;v.lineTo(C,B);break;case \"q\":var D=x[w++]*\np+n;var F=x[w++]*p+r;var K=x[w++]*p+n;var L=x[w++]*p+r;v.quadraticCurveTo(K,L,D,F);if(m=u[u.length-1]){var O=m.x;m=m.y;for(var N=1;N<=c;N++){var P=N/c;ub(P,O,K,D);ub(P,m,L,F)}}break;case \"b\":if(D=x[w++]*p+n,F=x[w++]*p+r,K=x[w++]*p+n,L=x[w++]*p+r,C=x[w++]*p+n,B=x[w++]*p+r,v.bezierCurveTo(K,L,C,B,D,F),m=u[u.length-1])for(O=m.x,m=m.y,N=1;N<=c;N++)P=N/c,vb(P,O,K,C,D),vb(P,m,L,B,F)}p={offsetX:l.ha*p,path:v}}else p=void 0;g+=p.offsetX;b.push(p.path)}}c=[];d=0;for(a=b.length;d<a;d++)Array.prototype.push.apply(c,\nb[d].toShapes());return c}});Object.assign(Ue.prototype,{load:function(a,b,c,d){var e=this;(new Ia(this.manager)).load(a,function(a){try{var c=JSON.parse(a)}catch(h){console.warn(\"THREE.FontLoader: typeface.js support is being deprecated. Use typeface.json instead.\"),c=JSON.parse(a.substring(65,a.length-2))}a=e.parse(c);b&&b(a)},c,d)},parse:function(a){return new fe(a)}});var Nd,ie={getContext:function(){void 0===Nd&&(Nd=new (window.AudioContext||window.webkitAudioContext));return Nd},setContext:function(a){Nd=\na}};Object.assign(ge.prototype,{load:function(a,b,c,d){var e=new Ia(this.manager);e.setResponseType(\"arraybuffer\");e.load(a,function(a){ie.getContext().decodeAudioData(a,function(a){b(a)})},c,d)}});Object.assign(Ve.prototype,{update:function(){var a,b,c,d,e,f,g,h,k=new O,l=new O;return function(m){if(a!==this||b!==m.focus||c!==m.fov||d!==m.aspect*this.aspect||e!==m.near||f!==m.far||g!==m.zoom||h!==this.eyeSep){a=this;b=m.focus;c=m.fov;d=m.aspect*this.aspect;e=m.near;f=m.far;g=m.zoom;var p=m.projectionMatrix.clone();\nh=this.eyeSep/2;var q=h*e/b,n=e*Math.tan(R.DEG2RAD*c*.5)/g;l.elements[12]=-h;k.elements[12]=h;var v=-n*d+q;var u=n*d+q;p.elements[0]=2*e/(u-v);p.elements[8]=(u+v)/(u-v);this.cameraL.projectionMatrix.copy(p);v=-n*d-q;u=n*d-q;p.elements[0]=2*e/(u-v);p.elements[8]=(u+v)/(u-v);this.cameraR.projectionMatrix.copy(p)}this.cameraL.matrixWorld.copy(m.matrixWorld).multiply(l);this.cameraR.matrixWorld.copy(m.matrixWorld).multiply(k)}}()});Xc.prototype=Object.create(w.prototype);Xc.prototype.constructor=Xc;he.prototype=\nObject.assign(Object.create(w.prototype),{constructor:he,getInput:function(){return this.gain},removeFilter:function(){null!==this.filter&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null)},getFilter:function(){return this.filter},setFilter:function(a){null!==this.filter?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination);this.filter=\na;this.gain.connect(this.filter);this.filter.connect(this.context.destination)},getMasterVolume:function(){return this.gain.gain.value},setMasterVolume:function(a){this.gain.gain.value=a},updateMatrixWorld:function(){var a=new n,b=new ia,c=new n,d=new n;return function(e){w.prototype.updateMatrixWorld.call(this,e);e=this.context.listener;var f=this.up;this.matrixWorld.decompose(a,b,c);d.set(0,0,-1).applyQuaternion(b);e.positionX?(e.positionX.setValueAtTime(a.x,this.context.currentTime),e.positionY.setValueAtTime(a.y,\nthis.context.currentTime),e.positionZ.setValueAtTime(a.z,this.context.currentTime),e.forwardX.setValueAtTime(d.x,this.context.currentTime),e.forwardY.setValueAtTime(d.y,this.context.currentTime),e.forwardZ.setValueAtTime(d.z,this.context.currentTime),e.upX.setValueAtTime(f.x,this.context.currentTime),e.upY.setValueAtTime(f.y,this.context.currentTime),e.upZ.setValueAtTime(f.z,this.context.currentTime)):(e.setPosition(a.x,a.y,a.z),e.setOrientation(d.x,d.y,d.z,f.x,f.y,f.z))}}()});gc.prototype=Object.assign(Object.create(w.prototype),\n{constructor:gc,getOutput:function(){return this.gain},setNodeSource:function(a){this.hasPlaybackControl=!1;this.sourceType=\"audioNode\";this.source=a;this.connect();return this},setBuffer:function(a){this.buffer=a;this.sourceType=\"buffer\";this.autoplay&&this.play();return this},play:function(){if(!0===this.isPlaying)console.warn(\"THREE.Audio: Audio is already playing.\");else if(!1===this.hasPlaybackControl)console.warn(\"THREE.Audio: this Audio has no playback control.\");else{var a=this.context.createBufferSource();\na.buffer=this.buffer;a.loop=this.loop;a.onended=this.onEnded.bind(this);a.playbackRate.setValueAtTime(this.playbackRate,this.startTime);a.start(0,this.startTime);this.isPlaying=!0;this.source=a;return this.connect()}},pause:function(){if(!1===this.hasPlaybackControl)console.warn(\"THREE.Audio: this Audio has no playback control.\");else return this.source.stop(),this.startTime=this.context.currentTime,this.isPlaying=!1,this},stop:function(){if(!1===this.hasPlaybackControl)console.warn(\"THREE.Audio: this Audio has no playback control.\");\nelse return this.source.stop(),this.startTime=0,this.isPlaying=!1,this},connect:function(){if(0<this.filters.length){this.source.connect(this.filters[0]);for(var a=1,b=this.filters.length;a<b;a++)this.filters[a-1].connect(this.filters[a]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this},disconnect:function(){if(0<this.filters.length){this.source.disconnect(this.filters[0]);for(var a=1,b=this.filters.length;a<b;a++)this.filters[a-\n1].disconnect(this.filters[a]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this},getFilters:function(){return this.filters},setFilters:function(a){a||(a=[]);!0===this.isPlaying?(this.disconnect(),this.filters=a,this.connect()):this.filters=a;return this},getFilter:function(){return this.getFilters()[0]},setFilter:function(a){return this.setFilters(a?[a]:[])},setPlaybackRate:function(a){if(!1===this.hasPlaybackControl)console.warn(\"THREE.Audio: this Audio has no playback control.\");\nelse return this.playbackRate=a,!0===this.isPlaying&&this.source.playbackRate.setValueAtTime(this.playbackRate,this.context.currentTime),this},getPlaybackRate:function(){return this.playbackRate},onEnded:function(){this.isPlaying=!1},getLoop:function(){return!1===this.hasPlaybackControl?(console.warn(\"THREE.Audio: this Audio has no playback control.\"),!1):this.loop},setLoop:function(a){if(!1===this.hasPlaybackControl)console.warn(\"THREE.Audio: this Audio has no playback control.\");else return this.loop=\na,!0===this.isPlaying&&(this.source.loop=this.loop),this},getVolume:function(){return this.gain.gain.value},setVolume:function(a){this.gain.gain.value=a;return this}});je.prototype=Object.assign(Object.create(gc.prototype),{constructor:je,getOutput:function(){return this.panner},getRefDistance:function(){return this.panner.refDistance},setRefDistance:function(a){this.panner.refDistance=a},getRolloffFactor:function(){return this.panner.rolloffFactor},setRolloffFactor:function(a){this.panner.rolloffFactor=\na},getDistanceModel:function(){return this.panner.distanceModel},setDistanceModel:function(a){this.panner.distanceModel=a},getMaxDistance:function(){return this.panner.maxDistance},setMaxDistance:function(a){this.panner.maxDistance=a},updateMatrixWorld:function(){var a=new n;return function(b){w.prototype.updateMatrixWorld.call(this,b);a.setFromMatrixPosition(this.matrixWorld);this.panner.setPosition(a.x,a.y,a.z)}}()});Object.assign(ke.prototype,{getFrequencyData:function(){this.analyser.getByteFrequencyData(this.data);\nreturn this.data},getAverageFrequency:function(){for(var a=0,b=this.getFrequencyData(),c=0;c<b.length;c++)a+=b[c];return a/b.length}});Object.assign(le.prototype,{accumulate:function(a,b){var c=this.buffer,d=this.valueSize;a=a*d+d;var e=this.cumulativeWeight;if(0===e){for(e=0;e!==d;++e)c[a+e]=c[e];e=b}else e+=b,this._mixBufferRegion(c,a,0,b/e,d);this.cumulativeWeight=e},apply:function(a){var b=this.valueSize,c=this.buffer;a=a*b+b;var d=this.cumulativeWeight,e=this.binding;this.cumulativeWeight=0;\n1>d&&this._mixBufferRegion(c,a,3*b,1-d,b);for(var d=b,f=b+b;d!==f;++d)if(c[d]!==c[d+b]){e.setValue(c,a);break}},saveOriginalState:function(){var a=this.buffer,b=this.valueSize,c=3*b;this.binding.getValue(a,c);for(var d=b;d!==c;++d)a[d]=a[c+d%b];this.cumulativeWeight=0},restoreOriginalState:function(){this.binding.setValue(this.buffer,3*this.valueSize)},_select:function(a,b,c,d,e){if(.5<=d)for(d=0;d!==e;++d)a[b+d]=a[c+d]},_slerp:function(a,b,c,d){ia.slerpFlat(a,b,a,b,a,c,d)},_lerp:function(a,b,c,d,\ne){for(var f=1-d,g=0;g!==e;++g){var h=b+g;a[h]=a[h]*f+a[c+g]*d}}});Object.assign(We.prototype,{getValue:function(a,b){this.bind();var c=this._bindings[this._targetGroup.nCachedObjects_];void 0!==c&&c.getValue(a,b)},setValue:function(a,b){for(var c=this._bindings,d=this._targetGroup.nCachedObjects_,e=c.length;d!==e;++d)c[d].setValue(a,b)},bind:function(){for(var a=this._bindings,b=this._targetGroup.nCachedObjects_,c=a.length;b!==c;++b)a[b].bind()},unbind:function(){for(var a=this._bindings,b=this._targetGroup.nCachedObjects_,\nc=a.length;b!==c;++b)a[b].unbind()}});Object.assign(da,{Composite:We,create:function(a,b,c){return a&&a.isAnimationObjectGroup?new da.Composite(a,b,c):new da(a,b,c)},sanitizeNodeName:function(a){return a.replace(/\\s/g,\"_\").replace(/[^\\w-]/g,\"\")},parseTrackName:function(){var a=new RegExp(\"^\"+/((?:[\\w-]+[\\/:])*)/.source+/([\\w-\\.]+)?/.source+/(?:\\.([\\w-]+)(?:\\[(.+)\\])?)?/.source+/\\.([\\w-]+)(?:\\[(.+)\\])?/.source+\"$\"),b=[\"material\",\"materials\",\"bones\"];return function(c){var d=a.exec(c);if(!d)throw Error(\"PropertyBinding: Cannot parse trackName: \"+\nc);var d={nodeName:d[2],objectName:d[3],objectIndex:d[4],propertyName:d[5],propertyIndex:d[6]},e=d.nodeName&&d.nodeName.lastIndexOf(\".\");if(void 0!==e&&-1!==e){var f=d.nodeName.substring(e+1);-1!==b.indexOf(f)&&(d.nodeName=d.nodeName.substring(0,e),d.objectName=f)}if(null===d.propertyName||0===d.propertyName.length)throw Error(\"PropertyBinding: can not parse propertyName from trackName: \"+c);return d}}(),findNode:function(a,b){if(!b||\"\"===b||\"root\"===b||\".\"===b||-1===b||b===a.name||b===a.uuid)return a;\nif(a.skeleton){var c=function(a){for(var c=0;c<a.bones.length;c++){var d=a.bones[c];if(d.name===b)return d}return null}(a.skeleton);if(c)return c}if(a.children){var d=function(a){for(var c=0;c<a.length;c++){var e=a[c];if(e.name===b||e.uuid===b||(e=d(e.children)))return e}return null};if(a=d(a.children))return a}return null}});Object.assign(da.prototype,{_getValue_unavailable:function(){},_setValue_unavailable:function(){},BindingType:{Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3},Versioning:{None:0,\nNeedsUpdate:1,MatrixWorldNeedsUpdate:2},GetterByBindingType:[function(a,b){a[b]=this.node[this.propertyName]},function(a,b){for(var c=this.resolvedProperty,d=0,e=c.length;d!==e;++d)a[b++]=c[d]},function(a,b){a[b]=this.resolvedProperty[this.propertyIndex]},function(a,b){this.resolvedProperty.toArray(a,b)}],SetterByBindingTypeAndVersioning:[[function(a,b){this.node[this.propertyName]=a[b]},function(a,b){this.node[this.propertyName]=a[b];this.targetObject.needsUpdate=!0},function(a,b){this.node[this.propertyName]=\na[b];this.targetObject.matrixWorldNeedsUpdate=!0}],[function(a,b){for(var c=this.resolvedProperty,d=0,e=c.length;d!==e;++d)c[d]=a[b++]},function(a,b){for(var c=this.resolvedProperty,d=0,e=c.length;d!==e;++d)c[d]=a[b++];this.targetObject.needsUpdate=!0},function(a,b){for(var c=this.resolvedProperty,d=0,e=c.length;d!==e;++d)c[d]=a[b++];this.targetObject.matrixWorldNeedsUpdate=!0}],[function(a,b){this.resolvedProperty[this.propertyIndex]=a[b]},function(a,b){this.resolvedProperty[this.propertyIndex]=\na[b];this.targetObject.needsUpdate=!0},function(a,b){this.resolvedProperty[this.propertyIndex]=a[b];this.targetObject.matrixWorldNeedsUpdate=!0}],[function(a,b){this.resolvedProperty.fromArray(a,b)},function(a,b){this.resolvedProperty.fromArray(a,b);this.targetObject.needsUpdate=!0},function(a,b){this.resolvedProperty.fromArray(a,b);this.targetObject.matrixWorldNeedsUpdate=!0}]],getValue:function(a,b){this.bind();this.getValue(a,b)},setValue:function(a,b){this.bind();this.setValue(a,b)},bind:function(){var a=\nthis.node,b=this.parsedPath,c=b.objectName,d=b.propertyName,e=b.propertyIndex;a||(this.node=a=da.findNode(this.rootNode,b.nodeName)||this.rootNode);this.getValue=this._getValue_unavailable;this.setValue=this._setValue_unavailable;if(a){if(c){var f=b.objectIndex;switch(c){case \"materials\":if(!a.material){console.error(\"THREE.PropertyBinding: Can not bind to material as node does not have a material.\",this);return}if(!a.material.materials){console.error(\"THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.\",\nthis);return}a=a.material.materials;break;case \"bones\":if(!a.skeleton){console.error(\"THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.\",this);return}a=a.skeleton.bones;for(c=0;c<a.length;c++)if(a[c].name===f){f=c;break}break;default:if(void 0===a[c]){console.error(\"THREE.PropertyBinding: Can not bind to objectName of node undefined.\",this);return}a=a[c]}if(void 0!==f){if(void 0===a[f]){console.error(\"THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.\",\nthis,a);return}a=a[f]}}f=a[d];if(void 0===f)console.error(\"THREE.PropertyBinding: Trying to update property for track: \"+b.nodeName+\".\"+d+\" but it wasn't found.\",a);else{b=this.Versioning.None;void 0!==a.needsUpdate?(b=this.Versioning.NeedsUpdate,this.targetObject=a):void 0!==a.matrixWorldNeedsUpdate&&(b=this.Versioning.MatrixWorldNeedsUpdate,this.targetObject=a);c=this.BindingType.Direct;if(void 0!==e){if(\"morphTargetInfluences\"===d){if(!a.geometry){console.error(\"THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.\",\nthis);return}if(a.geometry.isBufferGeometry){if(!a.geometry.morphAttributes){console.error(\"THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.\",this);return}for(c=0;c<this.node.geometry.morphAttributes.position.length;c++)if(a.geometry.morphAttributes.position[c].name===e){e=c;break}}else{if(!a.geometry.morphTargets){console.error(\"THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphTargets.\",\nthis);return}for(c=0;c<this.node.geometry.morphTargets.length;c++)if(a.geometry.morphTargets[c].name===e){e=c;break}}}c=this.BindingType.ArrayElement;this.resolvedProperty=f;this.propertyIndex=e}else void 0!==f.fromArray&&void 0!==f.toArray?(c=this.BindingType.HasFromToArray,this.resolvedProperty=f):Array.isArray(f)?(c=this.BindingType.EntireArray,this.resolvedProperty=f):this.propertyName=d;this.getValue=this.GetterByBindingType[c];this.setValue=this.SetterByBindingTypeAndVersioning[c][b]}}else console.error(\"THREE.PropertyBinding: Trying to update node for track: \"+\nthis.path+\" but it wasn't found.\")},unbind:function(){this.node=null;this.getValue=this._getValue_unbound;this.setValue=this._setValue_unbound}});Object.assign(da.prototype,{_getValue_unbound:da.prototype.getValue,_setValue_unbound:da.prototype.setValue});Object.assign(Xe.prototype,{isAnimationObjectGroup:!0,add:function(a){for(var b=this._objects,c=b.length,d=this.nCachedObjects_,e=this._indicesByUUID,f=this._paths,g=this._parsedPaths,h=this._bindings,k=h.length,l=0,m=arguments.length;l!==m;++l){var p=\narguments[l],n=p.uuid,r=e[n];if(void 0===r){r=c++;e[n]=r;b.push(p);for(var n=0,v=k;n!==v;++n)h[n].push(new da(p,f[n],g[n]))}else if(r<d){var u=--d,v=b[u];e[v.uuid]=r;b[r]=v;e[n]=u;b[u]=p;n=0;for(v=k;n!==v;++n){var w=h[n],y=w[r];w[r]=w[u];void 0===y&&(y=new da(p,f[n],g[n]));w[u]=y}}else void 0!==b[r]&&console.error(\"THREE.AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes.\")}this.nCachedObjects_=d},remove:function(a){for(var b=\nthis._objects,c=this.nCachedObjects_,d=this._indicesByUUID,e=this._bindings,f=e.length,g=0,h=arguments.length;g!==h;++g){var k=arguments[g],l=k.uuid,m=d[l];if(void 0!==m&&m>=c){var p=c++,n=b[p];d[n.uuid]=m;b[m]=n;d[l]=p;b[p]=k;k=0;for(l=f;k!==l;++k){var n=e[k],r=n[m];n[m]=n[p];n[p]=r}}}this.nCachedObjects_=c},uncache:function(a){for(var b,c,d=this._objects,e=d.length,f=this.nCachedObjects_,g=this._indicesByUUID,h=this._bindings,k=h.length,l=0,m=arguments.length;l!==m;++l){c=arguments[l].uuid;var p=\ng[c];if(void 0!==p)if(delete g[c],p<f){var n=--f,r=d[n];c=--e;b=d[c];g[r.uuid]=p;d[p]=r;g[b.uuid]=n;d[n]=b;d.pop();for(var r=0,v=k;r!==v;++r){b=h[r];var u=b[c];b[p]=b[n];b[n]=u;b.pop()}}else for(c=--e,b=d[c],g[b.uuid]=p,d[p]=b,d.pop(),r=0,v=k;r!==v;++r)b=h[r],b[p]=b[c],b.pop()}this.nCachedObjects_=f},subscribe_:function(a,b){var c=this._bindingsIndicesByPath,d=c[a],e=this._bindings;if(void 0!==d)return e[d];var f=this._paths,g=this._parsedPaths,h=this._objects,k=this.nCachedObjects_,l=Array(h.length),\nd=e.length;c[a]=d;f.push(a);g.push(b);e.push(l);c=k;for(d=h.length;c!==d;++c)l[c]=new da(h[c],a,b);return l},unsubscribe_:function(a){var b=this._bindingsIndicesByPath,c=b[a];if(void 0!==c){var d=this._paths,e=this._parsedPaths,f=this._bindings,g=f.length-1,h=f[g];b[a[g]]=c;f[c]=h;f.pop();e[c]=e[g];e.pop();d[c]=d[g];d.pop()}}});Object.assign(Ye.prototype,{play:function(){this._mixer._activateAction(this);return this},stop:function(){this._mixer._deactivateAction(this);return this.reset()},reset:function(){this.paused=\n!1;this.enabled=!0;this.time=0;this._loopCount=-1;this._startTime=null;return this.stopFading().stopWarping()},isRunning:function(){return this.enabled&&!this.paused&&0!==this.timeScale&&null===this._startTime&&this._mixer._isActiveAction(this)},isScheduled:function(){return this._mixer._isActiveAction(this)},startAt:function(a){this._startTime=a;return this},setLoop:function(a,b){this.loop=a;this.repetitions=b;return this},setEffectiveWeight:function(a){this.weight=a;this._effectiveWeight=this.enabled?\na:0;return this.stopFading()},getEffectiveWeight:function(){return this._effectiveWeight},fadeIn:function(a){return this._scheduleFading(a,0,1)},fadeOut:function(a){return this._scheduleFading(a,1,0)},crossFadeFrom:function(a,b,c){a.fadeOut(b);this.fadeIn(b);if(c){c=this._clip.duration;var d=a._clip.duration,e=c/d;a.warp(1,d/c,b);this.warp(e,1,b)}return this},crossFadeTo:function(a,b,c){return a.crossFadeFrom(this,b,c)},stopFading:function(){var a=this._weightInterpolant;null!==a&&(this._weightInterpolant=\nnull,this._mixer._takeBackControlInterpolant(a));return this},setEffectiveTimeScale:function(a){this.timeScale=a;this._effectiveTimeScale=this.paused?0:a;return this.stopWarping()},getEffectiveTimeScale:function(){return this._effectiveTimeScale},setDuration:function(a){this.timeScale=this._clip.duration/a;return this.stopWarping()},syncWith:function(a){this.time=a.time;this.timeScale=a.timeScale;return this.stopWarping()},halt:function(a){return this.warp(this._effectiveTimeScale,0,a)},warp:function(a,\nb,c){var d=this._mixer,e=d.time,f=this._timeScaleInterpolant,g=this.timeScale;null===f&&(this._timeScaleInterpolant=f=d._lendControlInterpolant());d=f.parameterPositions;f=f.sampleValues;d[0]=e;d[1]=e+c;f[0]=a/g;f[1]=b/g;return this},stopWarping:function(){var a=this._timeScaleInterpolant;null!==a&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(a));return this},getMixer:function(){return this._mixer},getClip:function(){return this._clip},getRoot:function(){return this._localRoot||\nthis._mixer._root},_update:function(a,b,c,d){if(this.enabled){var e=this._startTime;if(null!==e){b=(a-e)*c;if(0>b||0===c)return;this._startTime=null;b*=c}b*=this._updateTimeScale(a);c=this._updateTime(b);a=this._updateWeight(a);if(0<a){b=this._interpolants;for(var e=this._propertyBindings,f=0,g=b.length;f!==g;++f)b[f].evaluate(c),e[f].accumulate(d,a)}}else this._updateWeight(a)},_updateWeight:function(a){var b=0;if(this.enabled){var b=this.weight,c=this._weightInterpolant;if(null!==c){var d=c.evaluate(a)[0],\nb=b*d;a>c.parameterPositions[1]&&(this.stopFading(),0===d&&(this.enabled=!1))}}return this._effectiveWeight=b},_updateTimeScale:function(a){var b=0;if(!this.paused){var b=this.timeScale,c=this._timeScaleInterpolant;if(null!==c){var d=c.evaluate(a)[0],b=b*d;a>c.parameterPositions[1]&&(this.stopWarping(),0===b?this.paused=!0:this.timeScale=b)}}return this._effectiveTimeScale=b},_updateTime:function(a){var b=this.time+a;if(0===a)return b;var c=this._clip.duration,d=this.loop,e=this._loopCount;if(2200===\nd)a:{if(-1===e&&(this._loopCount=0,this._setEndings(!0,!0,!1)),b>=c)b=c;else if(0>b)b=0;else break a;this.clampWhenFinished?this.paused=!0:this.enabled=!1;this._mixer.dispatchEvent({type:\"finished\",action:this,direction:0>a?-1:1})}else{d=2202===d;-1===e&&(0<=a?(e=0,this._setEndings(!0,0===this.repetitions,d)):this._setEndings(0===this.repetitions,!0,d));if(b>=c||0>b){var f=Math.floor(b/c),b=b-c*f,e=e+Math.abs(f),g=this.repetitions-e;0>g?(this.clampWhenFinished?this.paused=!0:this.enabled=!1,b=0<a?\nc:0,this._mixer.dispatchEvent({type:\"finished\",action:this,direction:0<a?1:-1})):(0===g?(a=0>a,this._setEndings(a,!a,d)):this._setEndings(!1,!1,d),this._loopCount=e,this._mixer.dispatchEvent({type:\"loop\",action:this,loopDelta:f}))}if(d&&1===(e&1))return this.time=b,c-b}return this.time=b},_setEndings:function(a,b,c){var d=this._interpolantSettings;c?(d.endingStart=2401,d.endingEnd=2401):(d.endingStart=a?this.zeroSlopeAtStart?2401:2400:2402,d.endingEnd=b?this.zeroSlopeAtEnd?2401:2400:2402)},_scheduleFading:function(a,\nb,c){var d=this._mixer,e=d.time,f=this._weightInterpolant;null===f&&(this._weightInterpolant=f=d._lendControlInterpolant());d=f.parameterPositions;f=f.sampleValues;d[0]=e;f[0]=b;d[1]=e+a;f[1]=c;return this}});Object.assign(Ze.prototype,na.prototype,{_bindAction:function(a,b){var c=a._localRoot||this._root,d=a._clip.tracks,e=d.length,f=a._propertyBindings;a=a._interpolants;var g=c.uuid,h=this._bindingsByRootAndName,k=h[g];void 0===k&&(k={},h[g]=k);for(h=0;h!==e;++h){var l=d[h],m=l.name,n=k[m];if(void 0===\nn){n=f[h];if(void 0!==n){null===n._cacheIndex&&(++n.referenceCount,this._addInactiveBinding(n,g,m));continue}n=new le(da.create(c,m,b&&b._propertyBindings[h].binding.parsedPath),l.ValueTypeName,l.getValueSize());++n.referenceCount;this._addInactiveBinding(n,g,m)}f[h]=n;a[h].resultBuffer=n.buffer}},_activateAction:function(a){if(!this._isActiveAction(a)){if(null===a._cacheIndex){var b=(a._localRoot||this._root).uuid,c=a._clip.uuid,d=this._actionsByClip[c];this._bindAction(a,d&&d.knownActions[0]);this._addInactiveAction(a,\nc,b)}b=a._propertyBindings;c=0;for(d=b.length;c!==d;++c){var e=b[c];0===e.useCount++&&(this._lendBinding(e),e.saveOriginalState())}this._lendAction(a)}},_deactivateAction:function(a){if(this._isActiveAction(a)){for(var b=a._propertyBindings,c=0,d=b.length;c!==d;++c){var e=b[c];0===--e.useCount&&(e.restoreOriginalState(),this._takeBackBinding(e))}this._takeBackAction(a)}},_initMemoryManager:function(){this._actions=[];this._nActiveActions=0;this._actionsByClip={};this._bindings=[];this._nActiveBindings=\n0;this._bindingsByRootAndName={};this._controlInterpolants=[];this._nActiveControlInterpolants=0;var a=this;this.stats={actions:{get total(){return a._actions.length},get inUse(){return a._nActiveActions}},bindings:{get total(){return a._bindings.length},get inUse(){return a._nActiveBindings}},controlInterpolants:{get total(){return a._controlInterpolants.length},get inUse(){return a._nActiveControlInterpolants}}}},_isActiveAction:function(a){a=a._cacheIndex;return null!==a&&a<this._nActiveActions},\n_addInactiveAction:function(a,b,c){var d=this._actions,e=this._actionsByClip,f=e[b];void 0===f?(f={knownActions:[a],actionByRoot:{}},a._byClipCacheIndex=0,e[b]=f):(b=f.knownActions,a._byClipCacheIndex=b.length,b.push(a));a._cacheIndex=d.length;d.push(a);f.actionByRoot[c]=a},_removeInactiveAction:function(a){var b=this._actions,c=b[b.length-1],d=a._cacheIndex;c._cacheIndex=d;b[d]=c;b.pop();a._cacheIndex=null;var b=a._clip.uuid,c=this._actionsByClip,d=c[b],e=d.knownActions,f=e[e.length-1],g=a._byClipCacheIndex;\nf._byClipCacheIndex=g;e[g]=f;e.pop();a._byClipCacheIndex=null;delete d.actionByRoot[(a._localRoot||this._root).uuid];0===e.length&&delete c[b];this._removeInactiveBindingsForAction(a)},_removeInactiveBindingsForAction:function(a){a=a._propertyBindings;for(var b=0,c=a.length;b!==c;++b){var d=a[b];0===--d.referenceCount&&this._removeInactiveBinding(d)}},_lendAction:function(a){var b=this._actions,c=a._cacheIndex,d=this._nActiveActions++,e=b[d];a._cacheIndex=d;b[d]=a;e._cacheIndex=c;b[c]=e},_takeBackAction:function(a){var b=\nthis._actions,c=a._cacheIndex,d=--this._nActiveActions,e=b[d];a._cacheIndex=d;b[d]=a;e._cacheIndex=c;b[c]=e},_addInactiveBinding:function(a,b,c){var d=this._bindingsByRootAndName,e=d[b],f=this._bindings;void 0===e&&(e={},d[b]=e);e[c]=a;a._cacheIndex=f.length;f.push(a)},_removeInactiveBinding:function(a){var b=this._bindings,c=a.binding,d=c.rootNode.uuid,c=c.path,e=this._bindingsByRootAndName,f=e[d],g=b[b.length-1];a=a._cacheIndex;g._cacheIndex=a;b[a]=g;b.pop();delete f[c];a:{for(var h in f)break a;\ndelete e[d]}},_lendBinding:function(a){var b=this._bindings,c=a._cacheIndex,d=this._nActiveBindings++,e=b[d];a._cacheIndex=d;b[d]=a;e._cacheIndex=c;b[c]=e},_takeBackBinding:function(a){var b=this._bindings,c=a._cacheIndex,d=--this._nActiveBindings,e=b[d];a._cacheIndex=d;b[d]=a;e._cacheIndex=c;b[c]=e},_lendControlInterpolant:function(){var a=this._controlInterpolants,b=this._nActiveControlInterpolants++,c=a[b];void 0===c&&(c=new Tc(new Float32Array(2),new Float32Array(2),1,this._controlInterpolantsResultBuffer),\nc.__cacheIndex=b,a[b]=c);return c},_takeBackControlInterpolant:function(a){var b=this._controlInterpolants,c=a.__cacheIndex,d=--this._nActiveControlInterpolants,e=b[d];a.__cacheIndex=d;b[d]=a;e.__cacheIndex=c;b[c]=e},_controlInterpolantsResultBuffer:new Float32Array(1),clipAction:function(a,b){var c=b||this._root,d=c.uuid,c=\"string\"===typeof a?Ba.findByName(c,a):a;a=null!==c?c.uuid:a;var e=this._actionsByClip[a],f=null;if(void 0!==e){f=e.actionByRoot[d];if(void 0!==f)return f;f=e.knownActions[0];\nnull===c&&(c=f._clip)}if(null===c)return null;b=new Ye(this,c,b);this._bindAction(b,f);this._addInactiveAction(b,a,d);return b},existingAction:function(a,b){var c=b||this._root;b=c.uuid;c=\"string\"===typeof a?Ba.findByName(c,a):a;a=this._actionsByClip[c?c.uuid:a];return void 0!==a?a.actionByRoot[b]||null:null},stopAllAction:function(){for(var a=this._actions,b=this._nActiveActions,c=this._bindings,d=this._nActiveBindings,e=this._nActiveBindings=this._nActiveActions=0;e!==b;++e)a[e].reset();for(e=0;e!==\nd;++e)c[e].useCount=0;return this},update:function(a){a*=this.timeScale;for(var b=this._actions,c=this._nActiveActions,d=this.time+=a,e=Math.sign(a),f=this._accuIndex^=1,g=0;g!==c;++g)b[g]._update(d,a,e,f);a=this._bindings;b=this._nActiveBindings;for(g=0;g!==b;++g)a[g].apply(f);return this},getRoot:function(){return this._root},uncacheClip:function(a){var b=this._actions;a=a.uuid;var c=this._actionsByClip,d=c[a];if(void 0!==d){for(var d=d.knownActions,e=0,f=d.length;e!==f;++e){var g=d[e];this._deactivateAction(g);\nvar h=g._cacheIndex,k=b[b.length-1];g._cacheIndex=null;g._byClipCacheIndex=null;k._cacheIndex=h;b[h]=k;b.pop();this._removeInactiveBindingsForAction(g)}delete c[a]}},uncacheRoot:function(a){a=a.uuid;var b=this._actionsByClip;for(d in b){var c=b[d].actionByRoot[a];void 0!==c&&(this._deactivateAction(c),this._removeInactiveAction(c))}var d=this._bindingsByRootAndName[a];if(void 0!==d)for(var e in d)a=d[e],a.restoreOriginalState(),this._removeInactiveBinding(a)},uncacheAction:function(a,b){a=this.existingAction(a,\nb);null!==a&&(this._deactivateAction(a),this._removeInactiveAction(a))}});Id.prototype.clone=function(){return new Id(void 0===this.value.clone?this.value:this.value.clone())};me.prototype=Object.assign(Object.create(F.prototype),{constructor:me,isInstancedBufferGeometry:!0,addGroup:function(a,b,c){this.groups.push({start:a,count:b,materialIndex:c})},copy:function(a){var b=a.index;null!==b&&this.setIndex(b.clone());var b=a.attributes;for(c in b)this.addAttribute(c,b[c].clone());a=a.groups;var c=0;\nfor(b=a.length;c<b;c++){var d=a[c];this.addGroup(d.start,d.count,d.materialIndex)}return this}});Object.defineProperties(ne.prototype,{count:{get:function(){return this.data.count}},array:{get:function(){return this.data.array}}});Object.assign(ne.prototype,{isInterleavedBufferAttribute:!0,setX:function(a,b){this.data.array[a*this.data.stride+this.offset]=b;return this},setY:function(a,b){this.data.array[a*this.data.stride+this.offset+1]=b;return this},setZ:function(a,b){this.data.array[a*this.data.stride+\nthis.offset+2]=b;return this},setW:function(a,b){this.data.array[a*this.data.stride+this.offset+3]=b;return this},getX:function(a){return this.data.array[a*this.data.stride+this.offset]},getY:function(a){return this.data.array[a*this.data.stride+this.offset+1]},getZ:function(a){return this.data.array[a*this.data.stride+this.offset+2]},getW:function(a){return this.data.array[a*this.data.stride+this.offset+3]},setXY:function(a,b,c){a=a*this.data.stride+this.offset;this.data.array[a+0]=b;this.data.array[a+\n1]=c;return this},setXYZ:function(a,b,c,d){a=a*this.data.stride+this.offset;this.data.array[a+0]=b;this.data.array[a+1]=c;this.data.array[a+2]=d;return this},setXYZW:function(a,b,c,d,e){a=a*this.data.stride+this.offset;this.data.array[a+0]=b;this.data.array[a+1]=c;this.data.array[a+2]=d;this.data.array[a+3]=e;return this}});Object.defineProperty(hc.prototype,\"needsUpdate\",{set:function(a){!0===a&&this.version++}});Object.assign(hc.prototype,{isInterleavedBuffer:!0,setArray:function(a){if(Array.isArray(a))throw new TypeError(\"THREE.BufferAttribute: array should be a Typed Array.\");\nthis.count=void 0!==a?a.length/this.stride:0;this.array=a},setDynamic:function(a){this.dynamic=a;return this},copy:function(a){this.array=new a.array.constructor(a.array);this.count=a.count;this.stride=a.stride;this.dynamic=a.dynamic;return this},copyAt:function(a,b,c){a*=this.stride;c*=b.stride;for(var d=0,e=this.stride;d<e;d++)this.array[a+d]=b.array[c+d];return this},set:function(a,b){void 0===b&&(b=0);this.array.set(a,b);return this},clone:function(){return(new this.constructor).copy(this)},onUpload:function(a){this.onUploadCallback=\na;return this}});oe.prototype=Object.assign(Object.create(hc.prototype),{constructor:oe,isInstancedInterleavedBuffer:!0,copy:function(a){hc.prototype.copy.call(this,a);this.meshPerAttribute=a.meshPerAttribute;return this}});pe.prototype=Object.assign(Object.create(K.prototype),{constructor:pe,isInstancedBufferAttribute:!0,copy:function(a){K.prototype.copy.call(this,a);this.meshPerAttribute=a.meshPerAttribute;return this}});Object.assign($e.prototype,{linePrecision:1,set:function(a,b){this.ray.set(a,\nb)},setFromCamera:function(a,b){b&&b.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(b.matrixWorld),this.ray.direction.set(a.x,a.y,.5).unproject(b).sub(this.ray.origin).normalize()):b&&b.isOrthographicCamera?(this.ray.origin.set(a.x,a.y,(b.near+b.far)/(b.near-b.far)).unproject(b),this.ray.direction.set(0,0,-1).transformDirection(b.matrixWorld)):console.error(\"THREE.Raycaster: Unsupported camera type.\")},intersectObject:function(a,b){var c=[];qe(a,this,c,b);c.sort(af);return c},intersectObjects:function(a,\nb){var c=[];if(!1===Array.isArray(a))return console.warn(\"THREE.Raycaster.intersectObjects: objects is not an Array.\"),c;for(var d=0,e=a.length;d<e;d++)qe(a[d],this,c,b);c.sort(af);return c}});Object.assign(bf.prototype,{start:function(){this.oldTime=this.startTime=(\"undefined\"===typeof performance?Date:performance).now();this.elapsedTime=0;this.running=!0},stop:function(){this.getElapsedTime();this.autoStart=this.running=!1},getElapsedTime:function(){this.getDelta();return this.elapsedTime},getDelta:function(){var a=\n0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){var b=(\"undefined\"===typeof performance?Date:performance).now(),a=(b-this.oldTime)/1E3;this.oldTime=b;this.elapsedTime+=a}return a}});Object.assign(cf.prototype,{set:function(a,b,c){this.radius=a;this.phi=b;this.theta=c;return this},clone:function(){return(new this.constructor).copy(this)},copy:function(a){this.radius=a.radius;this.phi=a.phi;this.theta=a.theta;return this},makeSafe:function(){this.phi=Math.max(1E-6,Math.min(Math.PI-\n1E-6,this.phi));return this},setFromVector3:function(a){this.radius=a.length();0===this.radius?this.phi=this.theta=0:(this.theta=Math.atan2(a.x,a.z),this.phi=Math.acos(R.clamp(a.y/this.radius,-1,1)));return this}});Object.assign(df.prototype,{set:function(a,b,c){this.radius=a;this.theta=b;this.y=c;return this},clone:function(){return(new this.constructor).copy(this)},copy:function(a){this.radius=a.radius;this.theta=a.theta;this.y=a.y;return this},setFromVector3:function(a){this.radius=Math.sqrt(a.x*\na.x+a.z*a.z);this.theta=Math.atan2(a.x,a.z);this.y=a.y;return this}});Yc.prototype=Object.create(w.prototype);Yc.prototype.constructor=Yc;Yc.prototype.isImmediateRenderObject=!0;Zc.prototype=Object.create(X.prototype);Zc.prototype.constructor=Zc;Zc.prototype.update=function(){var a=new n,b=new n,c=new qa;return function(){var d,e=[\"a\",\"b\",\"c\"];this.object.updateMatrixWorld(!0);c.getNormalMatrix(this.object.matrixWorld);var f=this.object.matrixWorld,g=this.geometry.attributes.position;if((d=this.object.geometry)&&\nd.isGeometry)for(var h=d.vertices,k=d.faces,l=d=0,m=k.length;l<m;l++)for(var n=k[l],t=0,r=n.vertexNormals.length;t<r;t++){var v=n.vertexNormals[t];a.copy(h[n[e[t]]]).applyMatrix4(f);b.copy(v).applyMatrix3(c).normalize().multiplyScalar(this.size).add(a);g.setXYZ(d,a.x,a.y,a.z);d+=1;g.setXYZ(d,b.x,b.y,b.z);d+=1}else if(d&&d.isBufferGeometry)for(e=d.attributes.position,h=d.attributes.normal,t=d=0,r=e.count;t<r;t++)a.set(e.getX(t),e.getY(t),e.getZ(t)).applyMatrix4(f),b.set(h.getX(t),h.getY(t),h.getZ(t)),\nb.applyMatrix3(c).normalize().multiplyScalar(this.size).add(a),g.setXYZ(d,a.x,a.y,a.z),d+=1,g.setXYZ(d,b.x,b.y,b.z),d+=1;g.needsUpdate=!0}}();ic.prototype=Object.create(w.prototype);ic.prototype.constructor=ic;ic.prototype.dispose=function(){this.cone.geometry.dispose();this.cone.material.dispose()};ic.prototype.update=function(){var a=new n,b=new n;return function(){this.light.updateMatrixWorld();var c=this.light.distance?this.light.distance:1E3,d=c*Math.tan(this.light.angle);this.cone.scale.set(d,\nd,c);a.setFromMatrixPosition(this.light.matrixWorld);b.setFromMatrixPosition(this.light.target.matrixWorld);this.cone.lookAt(b.sub(a));void 0!==this.color?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)}}();jc.prototype=Object.create(X.prototype);jc.prototype.constructor=jc;jc.prototype.onBeforeRender=function(){var a=new n,b=new O,c=new O;return function(){var d=this.bones,e=this.geometry,f=e.getAttribute(\"position\");c.getInverse(this.root.matrixWorld);for(var g=\n0,h=0;g<d.length;g++){var k=d[g];k.parent&&k.parent.isBone&&(b.multiplyMatrices(c,k.matrixWorld),a.setFromMatrixPosition(b),f.setXYZ(h,a.x,a.y,a.z),b.multiplyMatrices(c,k.parent.matrixWorld),a.setFromMatrixPosition(b),f.setXYZ(h+1,a.x,a.y,a.z),h+=2)}e.getAttribute(\"position\").needsUpdate=!0}}();kc.prototype=Object.create(fa.prototype);kc.prototype.constructor=kc;kc.prototype.dispose=function(){this.geometry.dispose();this.material.dispose()};kc.prototype.update=function(){void 0!==this.color?this.material.color.set(this.color):\nthis.material.color.copy(this.light.color)};lc.prototype=Object.create(w.prototype);lc.prototype.constructor=lc;lc.prototype.dispose=function(){this.children[0].geometry.dispose();this.children[0].material.dispose()};lc.prototype.update=function(){var a=.5*this.light.width,b=.5*this.light.height,c=this.line.geometry.attributes.position,d=c.array;d[0]=a;d[1]=-b;d[2]=0;d[3]=a;d[4]=b;d[5]=0;d[6]=-a;d[7]=b;d[8]=0;d[9]=-a;d[10]=-b;d[11]=0;d[12]=a;d[13]=-b;d[14]=0;c.needsUpdate=!0;void 0!==this.color?this.line.material.color.set(this.color):\nthis.line.material.color.copy(this.light.color)};mc.prototype=Object.create(w.prototype);mc.prototype.constructor=mc;mc.prototype.dispose=function(){this.children[0].geometry.dispose();this.children[0].material.dispose()};mc.prototype.update=function(){var a=new n,b=new C,c=new C;return function(){var d=this.children[0];if(void 0!==this.color)this.material.color.set(this.color);else{var e=d.geometry.getAttribute(\"color\");b.copy(this.light.color);c.copy(this.light.groundColor);for(var f=0,g=e.count;f<\ng;f++){var h=f<g/2?b:c;e.setXYZ(f,h.r,h.g,h.b)}e.needsUpdate=!0}d.lookAt(a.setFromMatrixPosition(this.light.matrixWorld).negate())}}();$c.prototype=Object.create(X.prototype);$c.prototype.constructor=$c;Jd.prototype=Object.create(X.prototype);Jd.prototype.constructor=Jd;ad.prototype=Object.create(X.prototype);ad.prototype.constructor=ad;ad.prototype.update=function(){var a=new n,b=new n,c=new qa;return function(){this.object.updateMatrixWorld(!0);c.getNormalMatrix(this.object.matrixWorld);for(var d=\nthis.object.matrixWorld,e=this.geometry.attributes.position,f=this.object.geometry,g=f.vertices,f=f.faces,h=0,k=0,l=f.length;k<l;k++){var m=f[k],n=m.normal;a.copy(g[m.a]).add(g[m.b]).add(g[m.c]).divideScalar(3).applyMatrix4(d);b.copy(n).applyMatrix3(c).normalize().multiplyScalar(this.size).add(a);e.setXYZ(h,a.x,a.y,a.z);h+=1;e.setXYZ(h,b.x,b.y,b.z);h+=1}e.needsUpdate=!0}}();nc.prototype=Object.create(w.prototype);nc.prototype.constructor=nc;nc.prototype.dispose=function(){this.lightPlane.geometry.dispose();\nthis.lightPlane.material.dispose();this.targetLine.geometry.dispose();this.targetLine.material.dispose()};nc.prototype.update=function(){var a=new n,b=new n,c=new n;return function(){a.setFromMatrixPosition(this.light.matrixWorld);b.setFromMatrixPosition(this.light.target.matrixWorld);c.subVectors(b,a);this.lightPlane.lookAt(c);void 0!==this.color?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),\nthis.targetLine.material.color.copy(this.light.color));this.targetLine.lookAt(c);this.targetLine.scale.z=c.length()}}();bd.prototype=Object.create(X.prototype);bd.prototype.constructor=bd;bd.prototype.update=function(){function a(a,g,h,k){d.set(g,h,k).unproject(e);a=c[a];if(void 0!==a)for(g=b.getAttribute(\"position\"),h=0,k=a.length;h<k;h++)g.setXYZ(a[h],d.x,d.y,d.z)}var b,c,d=new n,e=new Ma;return function(){b=this.geometry;c=this.pointMap;e.projectionMatrix.copy(this.camera.projectionMatrix);a(\"c\",\n0,0,-1);a(\"t\",0,0,1);a(\"n1\",-1,-1,-1);a(\"n2\",1,-1,-1);a(\"n3\",-1,1,-1);a(\"n4\",1,1,-1);a(\"f1\",-1,-1,1);a(\"f2\",1,-1,1);a(\"f3\",-1,1,1);a(\"f4\",1,1,1);a(\"u1\",.7,1.1,-1);a(\"u2\",-.7,1.1,-1);a(\"u3\",0,2,-1);a(\"cf1\",-1,0,1);a(\"cf2\",1,0,1);a(\"cf3\",0,-1,1);a(\"cf4\",0,1,1);a(\"cn1\",-1,0,-1);a(\"cn2\",1,0,-1);a(\"cn3\",0,-1,-1);a(\"cn4\",0,1,-1);b.getAttribute(\"position\").needsUpdate=!0}}();yb.prototype=Object.create(X.prototype);yb.prototype.constructor=yb;yb.prototype.update=function(){var a=new Pa;return function(b){void 0!==\nb&&console.warn(\"THREE.BoxHelper: .update() has no longer arguments.\");void 0!==this.object&&a.setFromObject(this.object);if(!a.isEmpty()){b=a.min;var c=a.max,d=this.geometry.attributes.position,e=d.array;e[0]=c.x;e[1]=c.y;e[2]=c.z;e[3]=b.x;e[4]=c.y;e[5]=c.z;e[6]=b.x;e[7]=b.y;e[8]=c.z;e[9]=c.x;e[10]=b.y;e[11]=c.z;e[12]=c.x;e[13]=c.y;e[14]=b.z;e[15]=b.x;e[16]=c.y;e[17]=b.z;e[18]=b.x;e[19]=b.y;e[20]=b.z;e[21]=c.x;e[22]=b.y;e[23]=b.z;d.needsUpdate=!0;this.geometry.computeBoundingSphere()}}}();yb.prototype.setFromObject=\nfunction(a){this.object=a;this.update();return this};cd.prototype=Object.create(X.prototype);cd.prototype.constructor=cd;cd.prototype.onBeforeRender=function(){var a=this.box;a.isEmpty()||(a.getCenter(this.position),a.getSize(this.scale),this.scale.multiplyScalar(.5))};dd.prototype=Object.create(ra.prototype);dd.prototype.constructor=dd;dd.prototype.onBeforeRender=function(){var a=-this.plane.constant;1E-8>Math.abs(a)&&(a=1E-8);this.scale.set(.5*this.size,.5*this.size,a);this.lookAt(this.plane.normal);\nthis.updateMatrixWorld()};var Kd,re;zb.prototype=Object.create(w.prototype);zb.prototype.constructor=zb;zb.prototype.setDirection=function(){var a=new n,b;return function(c){.99999<c.y?this.quaternion.set(0,0,0,1):-.99999>c.y?this.quaternion.set(1,0,0,0):(a.set(c.z,0,-c.x).normalize(),b=Math.acos(c.y),this.quaternion.setFromAxisAngle(a,b))}}();zb.prototype.setLength=function(a,b,c){void 0===b&&(b=.2*a);void 0===c&&(c=.2*b);this.line.scale.set(1,Math.max(0,a-b),1);this.line.updateMatrix();this.cone.scale.set(c,\nb,c);this.cone.position.y=a;this.cone.updateMatrix()};zb.prototype.setColor=function(a){this.line.material.color.copy(a);this.cone.material.color.copy(a)};Ld.prototype=Object.create(X.prototype);Ld.prototype.constructor=Ld;var Od=new n,ve=new se,we=new se,xe=new se;Ja.prototype=Object.create(pa.prototype);Ja.prototype.constructor=Ja;Ja.prototype.getPoint=function(a){var b=this.points,c=b.length;a*=c-(this.closed?0:1);var d=Math.floor(a);a-=d;this.closed?d+=0<d?0:(Math.floor(Math.abs(d)/b.length)+\n1)*b.length:0===a&&d===c-1&&(d=c-2,a=1);if(this.closed||0<d)var e=b[(d-1)%c];else Od.subVectors(b[0],b[1]).add(b[0]),e=Od;var f=b[d%c];var g=b[(d+1)%c];this.closed||d+2<c?b=b[(d+2)%c]:(Od.subVectors(b[c-1],b[c-2]).add(b[c-1]),b=Od);if(void 0===this.type||\"centripetal\"===this.type||\"chordal\"===this.type){var h=\"chordal\"===this.type?.5:.25,c=Math.pow(e.distanceToSquared(f),h),d=Math.pow(f.distanceToSquared(g),h),h=Math.pow(g.distanceToSquared(b),h);1E-4>d&&(d=1);1E-4>c&&(c=d);1E-4>h&&(h=d);ve.initNonuniformCatmullRom(e.x,\nf.x,g.x,b.x,c,d,h);we.initNonuniformCatmullRom(e.y,f.y,g.y,b.y,c,d,h);xe.initNonuniformCatmullRom(e.z,f.z,g.z,b.z,c,d,h)}else\"catmullrom\"===this.type&&(c=void 0!==this.tension?this.tension:.5,ve.initCatmullRom(e.x,f.x,g.x,b.x,c),we.initCatmullRom(e.y,f.y,g.y,b.y,c),xe.initCatmullRom(e.z,f.z,g.z,b.z,c));return new n(ve.calc(a),we.calc(a),xe.calc(a))};ed.prototype=Object.create(pa.prototype);ed.prototype.constructor=ed;ed.prototype.getPoint=function(a){var b=this.v0,c=this.v1,d=this.v2,e=this.v3;return new n(vb(a,\nb.x,c.x,d.x,e.x),vb(a,b.y,c.y,d.y,e.y),vb(a,b.z,c.z,d.z,e.z))};fd.prototype=Object.create(pa.prototype);fd.prototype.constructor=fd;fd.prototype.getPoint=function(a){var b=this.v0,c=this.v1,d=this.v2;return new n(ub(a,b.x,c.x,d.x),ub(a,b.y,c.y,d.y),ub(a,b.z,c.z,d.z))};gd.prototype=Object.create(pa.prototype);gd.prototype.constructor=gd;gd.prototype.getPoint=function(a){if(1===a)return this.v2.clone();var b=new n;b.subVectors(this.v2,this.v1);b.multiplyScalar(a);b.add(this.v1);return b};Md.prototype=\nObject.create(Ua.prototype);Md.prototype.constructor=Md;pa.create=function(a,b){console.log(\"THREE.Curve.create() has been deprecated\");a.prototype=Object.create(pa.prototype);a.prototype.constructor=a;a.prototype.getPoint=b;return a};ff.prototype=Object.create(Ja.prototype);gf.prototype=Object.create(Ja.prototype);te.prototype=Object.create(Ja.prototype);Object.assign(te.prototype,{initFromArray:function(a){console.error(\"THREE.Spline: .initFromArray() has been removed.\")},getControlPointsArray:function(a){console.error(\"THREE.Spline: .getControlPointsArray() has been removed.\")},\nreparametrizeByArcLength:function(a){console.error(\"THREE.Spline: .reparametrizeByArcLength() has been removed.\")}});$c.prototype.setColors=function(){console.error(\"THREE.GridHelper: setColors() has been deprecated, pass them in the constructor instead.\")};jc.prototype.update=function(){console.error(\"THREE.SkeletonHelper: update() no longer needs to be called.\")};Object.assign(id.prototype,{center:function(a){console.warn(\"THREE.Box2: .center() has been renamed to .getCenter().\");return this.getCenter(a)},\nempty:function(){console.warn(\"THREE.Box2: .empty() has been renamed to .isEmpty().\");return this.isEmpty()},isIntersectionBox:function(a){console.warn(\"THREE.Box2: .isIntersectionBox() has been renamed to .intersectsBox().\");return this.intersectsBox(a)},size:function(a){console.warn(\"THREE.Box2: .size() has been renamed to .getSize().\");return this.getSize(a)}});Object.assign(Pa.prototype,{center:function(a){console.warn(\"THREE.Box3: .center() has been renamed to .getCenter().\");return this.getCenter(a)},\nempty:function(){console.warn(\"THREE.Box3: .empty() has been renamed to .isEmpty().\");return this.isEmpty()},isIntersectionBox:function(a){console.warn(\"THREE.Box3: .isIntersectionBox() has been renamed to .intersectsBox().\");return this.intersectsBox(a)},isIntersectionSphere:function(a){console.warn(\"THREE.Box3: .isIntersectionSphere() has been renamed to .intersectsSphere().\");return this.intersectsSphere(a)},size:function(a){console.warn(\"THREE.Box3: .size() has been renamed to .getSize().\");return this.getSize(a)}});\nFb.prototype.center=function(a){console.warn(\"THREE.Line3: .center() has been renamed to .getCenter().\");return this.getCenter(a)};R.random16=function(){console.warn(\"THREE.Math.random16() has been deprecated. Use Math.random() instead.\");return Math.random()};Object.assign(qa.prototype,{flattenToArrayOffset:function(a,b){console.warn(\"THREE.Matrix3: .flattenToArrayOffset() has been deprecated. Use .toArray() instead.\");return this.toArray(a,b)},multiplyVector3:function(a){console.warn(\"THREE.Matrix3: .multiplyVector3() has been removed. Use vector.applyMatrix3( matrix ) instead.\");\nreturn a.applyMatrix3(this)},multiplyVector3Array:function(a){console.error(\"THREE.Matrix3: .multiplyVector3Array() has been removed.\")},applyToBuffer:function(a,b,c){console.warn(\"THREE.Matrix3: .applyToBuffer() has been removed. Use matrix.applyToBufferAttribute( attribute ) instead.\");return this.applyToBufferAttribute(a)},applyToVector3Array:function(a,b,c){console.error(\"THREE.Matrix3: .applyToVector3Array() has been removed.\")}});Object.assign(O.prototype,{extractPosition:function(a){console.warn(\"THREE.Matrix4: .extractPosition() has been renamed to .copyPosition().\");\nreturn this.copyPosition(a)},flattenToArrayOffset:function(a,b){console.warn(\"THREE.Matrix4: .flattenToArrayOffset() has been deprecated. Use .toArray() instead.\");return this.toArray(a,b)},getPosition:function(){var a;return function(){void 0===a&&(a=new n);console.warn(\"THREE.Matrix4: .getPosition() has been removed. Use Vector3.setFromMatrixPosition( matrix ) instead.\");return a.setFromMatrixColumn(this,3)}}(),setRotationFromQuaternion:function(a){console.warn(\"THREE.Matrix4: .setRotationFromQuaternion() has been renamed to .makeRotationFromQuaternion().\");\nreturn this.makeRotationFromQuaternion(a)},multiplyToArray:function(){console.warn(\"THREE.Matrix4: .multiplyToArray() has been removed.\")},multiplyVector3:function(a){console.warn(\"THREE.Matrix4: .multiplyVector3() has been removed. Use vector.applyMatrix4( matrix ) instead.\");return a.applyMatrix4(this)},multiplyVector4:function(a){console.warn(\"THREE.Matrix4: .multiplyVector4() has been removed. Use vector.applyMatrix4( matrix ) instead.\");return a.applyMatrix4(this)},multiplyVector3Array:function(a){console.error(\"THREE.Matrix4: .multiplyVector3Array() has been removed.\")},\nrotateAxis:function(a){console.warn(\"THREE.Matrix4: .rotateAxis() has been removed. Use Vector3.transformDirection( matrix ) instead.\");a.transformDirection(this)},crossVector:function(a){console.warn(\"THREE.Matrix4: .crossVector() has been removed. Use vector.applyMatrix4( matrix ) instead.\");return a.applyMatrix4(this)},translate:function(){console.error(\"THREE.Matrix4: .translate() has been removed.\")},rotateX:function(){console.error(\"THREE.Matrix4: .rotateX() has been removed.\")},rotateY:function(){console.error(\"THREE.Matrix4: .rotateY() has been removed.\")},\nrotateZ:function(){console.error(\"THREE.Matrix4: .rotateZ() has been removed.\")},rotateByAxis:function(){console.error(\"THREE.Matrix4: .rotateByAxis() has been removed.\")},applyToBuffer:function(a,b,c){console.warn(\"THREE.Matrix4: .applyToBuffer() has been removed. Use matrix.applyToBufferAttribute( attribute ) instead.\");return this.applyToBufferAttribute(a)},applyToVector3Array:function(a,b,c){console.error(\"THREE.Matrix4: .applyToVector3Array() has been removed.\")},makeFrustum:function(a,b,c,d,\ne,f){console.warn(\"THREE.Matrix4: .makeFrustum() has been removed. Use .makePerspective( left, right, top, bottom, near, far ) instead.\");return this.makePerspective(a,b,d,c,e,f)}});za.prototype.isIntersectionLine=function(a){console.warn(\"THREE.Plane: .isIntersectionLine() has been renamed to .intersectsLine().\");return this.intersectsLine(a)};ia.prototype.multiplyVector3=function(a){console.warn(\"THREE.Quaternion: .multiplyVector3() has been removed. Use is now vector.applyQuaternion( quaternion ) instead.\");\nreturn a.applyQuaternion(this)};Object.assign(hb.prototype,{isIntersectionBox:function(a){console.warn(\"THREE.Ray: .isIntersectionBox() has been renamed to .intersectsBox().\");return this.intersectsBox(a)},isIntersectionPlane:function(a){console.warn(\"THREE.Ray: .isIntersectionPlane() has been renamed to .intersectsPlane().\");return this.intersectsPlane(a)},isIntersectionSphere:function(a){console.warn(\"THREE.Ray: .isIntersectionSphere() has been renamed to .intersectsSphere().\");return this.intersectsSphere(a)}});\nObject.assign(xb.prototype,{extrude:function(a){console.warn(\"THREE.Shape: .extrude() has been removed. Use ExtrudeGeometry() instead.\");return new $a(this,a)},makeGeometry:function(a){console.warn(\"THREE.Shape: .makeGeometry() has been removed. Use ShapeGeometry() instead.\");return new Wb(this,a)}});Object.assign(D.prototype,{fromAttribute:function(a,b,c){console.error(\"THREE.Vector2: .fromAttribute() has been renamed to .fromBufferAttribute().\");return this.fromBufferAttribute(a,b,c)}});Object.assign(n.prototype,\n{setEulerFromRotationMatrix:function(){console.error(\"THREE.Vector3: .setEulerFromRotationMatrix() has been removed. Use Euler.setFromRotationMatrix() instead.\")},setEulerFromQuaternion:function(){console.error(\"THREE.Vector3: .setEulerFromQuaternion() has been removed. Use Euler.setFromQuaternion() instead.\")},getPositionFromMatrix:function(a){console.warn(\"THREE.Vector3: .getPositionFromMatrix() has been renamed to .setFromMatrixPosition().\");return this.setFromMatrixPosition(a)},getScaleFromMatrix:function(a){console.warn(\"THREE.Vector3: .getScaleFromMatrix() has been renamed to .setFromMatrixScale().\");\nreturn this.setFromMatrixScale(a)},getColumnFromMatrix:function(a,b){console.warn(\"THREE.Vector3: .getColumnFromMatrix() has been renamed to .setFromMatrixColumn().\");return this.setFromMatrixColumn(b,a)},applyProjection:function(a){console.warn(\"THREE.Vector3: .applyProjection() has been removed. Use .applyMatrix4( m ) instead.\");return this.applyMatrix4(a)},fromAttribute:function(a,b,c){console.error(\"THREE.Vector3: .fromAttribute() has been renamed to .fromBufferAttribute().\");return this.fromBufferAttribute(a,\nb,c)}});Object.assign(S.prototype,{fromAttribute:function(a,b,c){console.error(\"THREE.Vector4: .fromAttribute() has been renamed to .fromBufferAttribute().\");return this.fromBufferAttribute(a,b,c)}});Q.prototype.computeTangents=function(){console.warn(\"THREE.Geometry: .computeTangents() has been removed.\")};Object.assign(w.prototype,{getChildByName:function(a){console.warn(\"THREE.Object3D: .getChildByName() has been renamed to .getObjectByName().\");return this.getObjectByName(a)},renderDepth:function(){console.warn(\"THREE.Object3D: .renderDepth has been removed. Use .renderOrder, instead.\")},\ntranslate:function(a,b){console.warn(\"THREE.Object3D: .translate() has been removed. Use .translateOnAxis( axis, distance ) instead.\");return this.translateOnAxis(b,a)}});Object.defineProperties(w.prototype,{eulerOrder:{get:function(){console.warn(\"THREE.Object3D: .eulerOrder is now .rotation.order.\");return this.rotation.order},set:function(a){console.warn(\"THREE.Object3D: .eulerOrder is now .rotation.order.\");this.rotation.order=a}},useQuaternion:{get:function(){console.warn(\"THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.\")},\nset:function(){console.warn(\"THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.\")}}});Object.defineProperties(yc.prototype,{objects:{get:function(){console.warn(\"THREE.LOD: .objects has been renamed to .levels.\");return this.levels}}});Object.defineProperty(zc.prototype,\"useVertexTexture\",{get:function(){console.warn(\"THREE.Skeleton: useVertexTexture has been removed.\")},set:function(){console.warn(\"THREE.Skeleton: useVertexTexture has been removed.\")}});\nObject.defineProperty(pa.prototype,\"__arcLengthDivisions\",{get:function(){console.warn(\"THREE.Curve: .__arcLengthDivisions is now .arcLengthDivisions.\");return this.arcLengthDivisions},set:function(a){console.warn(\"THREE.Curve: .__arcLengthDivisions is now .arcLengthDivisions.\");this.arcLengthDivisions=a}});ja.prototype.setLens=function(a,b){console.warn(\"THREE.PerspectiveCamera.setLens is deprecated. Use .setFocalLength and .filmGauge for a photographic setup.\");void 0!==b&&(this.filmGauge=b);this.setFocalLength(a)};\nObject.defineProperties(aa.prototype,{onlyShadow:{set:function(){console.warn(\"THREE.Light: .onlyShadow has been removed.\")}},shadowCameraFov:{set:function(a){console.warn(\"THREE.Light: .shadowCameraFov is now .shadow.camera.fov.\");this.shadow.camera.fov=a}},shadowCameraLeft:{set:function(a){console.warn(\"THREE.Light: .shadowCameraLeft is now .shadow.camera.left.\");this.shadow.camera.left=a}},shadowCameraRight:{set:function(a){console.warn(\"THREE.Light: .shadowCameraRight is now .shadow.camera.right.\");\nthis.shadow.camera.right=a}},shadowCameraTop:{set:function(a){console.warn(\"THREE.Light: .shadowCameraTop is now .shadow.camera.top.\");this.shadow.camera.top=a}},shadowCameraBottom:{set:function(a){console.warn(\"THREE.Light: .shadowCameraBottom is now .shadow.camera.bottom.\");this.shadow.camera.bottom=a}},shadowCameraNear:{set:function(a){console.warn(\"THREE.Light: .shadowCameraNear is now .shadow.camera.near.\");this.shadow.camera.near=a}},shadowCameraFar:{set:function(a){console.warn(\"THREE.Light: .shadowCameraFar is now .shadow.camera.far.\");\nthis.shadow.camera.far=a}},shadowCameraVisible:{set:function(){console.warn(\"THREE.Light: .shadowCameraVisible has been removed. Use new THREE.CameraHelper( light.shadow.camera ) instead.\")}},shadowBias:{set:function(a){console.warn(\"THREE.Light: .shadowBias is now .shadow.bias.\");this.shadow.bias=a}},shadowDarkness:{set:function(){console.warn(\"THREE.Light: .shadowDarkness has been removed.\")}},shadowMapWidth:{set:function(a){console.warn(\"THREE.Light: .shadowMapWidth is now .shadow.mapSize.width.\");\nthis.shadow.mapSize.width=a}},shadowMapHeight:{set:function(a){console.warn(\"THREE.Light: .shadowMapHeight is now .shadow.mapSize.height.\");this.shadow.mapSize.height=a}}});Object.defineProperties(K.prototype,{length:{get:function(){console.warn(\"THREE.BufferAttribute: .length has been deprecated. Use .count instead.\");return this.array.length}}});Object.assign(F.prototype,{addIndex:function(a){console.warn(\"THREE.BufferGeometry: .addIndex() has been renamed to .setIndex().\");this.setIndex(a)},addDrawCall:function(a,\nb,c){void 0!==c&&console.warn(\"THREE.BufferGeometry: .addDrawCall() no longer supports indexOffset.\");console.warn(\"THREE.BufferGeometry: .addDrawCall() is now .addGroup().\");this.addGroup(a,b)},clearDrawCalls:function(){console.warn(\"THREE.BufferGeometry: .clearDrawCalls() is now .clearGroups().\");this.clearGroups()},computeTangents:function(){console.warn(\"THREE.BufferGeometry: .computeTangents() has been removed.\")},computeOffsets:function(){console.warn(\"THREE.BufferGeometry: .computeOffsets() has been removed.\")}});\nObject.defineProperties(F.prototype,{drawcalls:{get:function(){console.error(\"THREE.BufferGeometry: .drawcalls has been renamed to .groups.\");return this.groups}},offsets:{get:function(){console.warn(\"THREE.BufferGeometry: .offsets has been renamed to .groups.\");return this.groups}}});Object.defineProperties(Id.prototype,{dynamic:{set:function(){console.warn(\"THREE.Uniform: .dynamic has been removed. Use object.onBeforeRender() instead.\")}},onUpdate:{value:function(){console.warn(\"THREE.Uniform: .onUpdate() has been removed. Use object.onBeforeRender() instead.\");\nreturn this}}});Object.defineProperties(P.prototype,{wrapAround:{get:function(){console.warn(\"THREE.Material: .wrapAround has been removed.\")},set:function(){console.warn(\"THREE.Material: .wrapAround has been removed.\")}},wrapRGB:{get:function(){console.warn(\"THREE.Material: .wrapRGB has been removed.\");return new C}},shading:{get:function(){console.error(\"THREE.\"+this.type+\": .shading has been removed. Use the boolean .flatShading instead.\")},set:function(a){console.warn(\"THREE.\"+this.type+\": .shading has been removed. Use the boolean .flatShading instead.\");\nthis.flatShading=1===a}}});Object.defineProperties(Aa.prototype,{metal:{get:function(){console.warn(\"THREE.MeshPhongMaterial: .metal has been removed. Use THREE.MeshStandardMaterial instead.\");return!1},set:function(){console.warn(\"THREE.MeshPhongMaterial: .metal has been removed. Use THREE.MeshStandardMaterial instead\")}}});Object.defineProperties(ya.prototype,{derivatives:{get:function(){console.warn(\"THREE.ShaderMaterial: .derivatives has been moved to .extensions.derivatives.\");return this.extensions.derivatives},\nset:function(a){console.warn(\"THREE. ShaderMaterial: .derivatives has been moved to .extensions.derivatives.\");this.extensions.derivatives=a}}});Object.assign(Yd.prototype,{getCurrentRenderTarget:function(){console.warn(\"THREE.WebGLRenderer: .getCurrentRenderTarget() is now .getRenderTarget().\");return this.getRenderTarget()},getMaxAnisotropy:function(){console.warn(\"THREE.WebGLRenderer: .getMaxAnisotropy() is now .capabilities.getMaxAnisotropy().\");return this.capabilities.getMaxAnisotropy()},getPrecision:function(){console.warn(\"THREE.WebGLRenderer: .getPrecision() is now .capabilities.precision.\");\nreturn this.capabilities.precision},supportsFloatTextures:function(){console.warn(\"THREE.WebGLRenderer: .supportsFloatTextures() is now .extensions.get( 'OES_texture_float' ).\");return this.extensions.get(\"OES_texture_float\")},supportsHalfFloatTextures:function(){console.warn(\"THREE.WebGLRenderer: .supportsHalfFloatTextures() is now .extensions.get( 'OES_texture_half_float' ).\");return this.extensions.get(\"OES_texture_half_float\")},supportsStandardDerivatives:function(){console.warn(\"THREE.WebGLRenderer: .supportsStandardDerivatives() is now .extensions.get( 'OES_standard_derivatives' ).\");\nreturn this.extensions.get(\"OES_standard_derivatives\")},supportsCompressedTextureS3TC:function(){console.warn(\"THREE.WebGLRenderer: .supportsCompressedTextureS3TC() is now .extensions.get( 'WEBGL_compressed_texture_s3tc' ).\");return this.extensions.get(\"WEBGL_compressed_texture_s3tc\")},supportsCompressedTexturePVRTC:function(){console.warn(\"THREE.WebGLRenderer: .supportsCompressedTexturePVRTC() is now .extensions.get( 'WEBGL_compressed_texture_pvrtc' ).\");return this.extensions.get(\"WEBGL_compressed_texture_pvrtc\")},\nsupportsBlendMinMax:function(){console.warn(\"THREE.WebGLRenderer: .supportsBlendMinMax() is now .extensions.get( 'EXT_blend_minmax' ).\");return this.extensions.get(\"EXT_blend_minmax\")},supportsVertexTextures:function(){console.warn(\"THREE.WebGLRenderer: .supportsVertexTextures() is now .capabilities.vertexTextures.\");return this.capabilities.vertexTextures},supportsInstancedArrays:function(){console.warn(\"THREE.WebGLRenderer: .supportsInstancedArrays() is now .extensions.get( 'ANGLE_instanced_arrays' ).\");\nreturn this.extensions.get(\"ANGLE_instanced_arrays\")},enableScissorTest:function(a){console.warn(\"THREE.WebGLRenderer: .enableScissorTest() is now .setScissorTest().\");this.setScissorTest(a)},initMaterial:function(){console.warn(\"THREE.WebGLRenderer: .initMaterial() has been removed.\")},addPrePlugin:function(){console.warn(\"THREE.WebGLRenderer: .addPrePlugin() has been removed.\")},addPostPlugin:function(){console.warn(\"THREE.WebGLRenderer: .addPostPlugin() has been removed.\")},updateShadowMap:function(){console.warn(\"THREE.WebGLRenderer: .updateShadowMap() has been removed.\")}});\nObject.defineProperties(Yd.prototype,{shadowMapEnabled:{get:function(){return this.shadowMap.enabled},set:function(a){console.warn(\"THREE.WebGLRenderer: .shadowMapEnabled is now .shadowMap.enabled.\");this.shadowMap.enabled=a}},shadowMapType:{get:function(){return this.shadowMap.type},set:function(a){console.warn(\"THREE.WebGLRenderer: .shadowMapType is now .shadowMap.type.\");this.shadowMap.type=a}},shadowMapCullFace:{get:function(){return this.shadowMap.cullFace},set:function(a){console.warn(\"THREE.WebGLRenderer: .shadowMapCullFace is now .shadowMap.cullFace.\");\nthis.shadowMap.cullFace=a}}});Object.defineProperties(Ke.prototype,{cullFace:{get:function(){return this.renderReverseSided?2:1},set:function(a){a=1!==a;console.warn(\"WebGLRenderer: .shadowMap.cullFace is deprecated. Set .shadowMap.renderReverseSided to \"+a+\".\");this.renderReverseSided=a}}});Object.defineProperties(Ab.prototype,{wrapS:{get:function(){console.warn(\"THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS.\");return this.texture.wrapS},set:function(a){console.warn(\"THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS.\");\nthis.texture.wrapS=a}},wrapT:{get:function(){console.warn(\"THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT.\");return this.texture.wrapT},set:function(a){console.warn(\"THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT.\");this.texture.wrapT=a}},magFilter:{get:function(){console.warn(\"THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter.\");return this.texture.magFilter},set:function(a){console.warn(\"THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter.\");this.texture.magFilter=\na}},minFilter:{get:function(){console.warn(\"THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter.\");return this.texture.minFilter},set:function(a){console.warn(\"THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter.\");this.texture.minFilter=a}},anisotropy:{get:function(){console.warn(\"THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy.\");return this.texture.anisotropy},set:function(a){console.warn(\"THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy.\");this.texture.anisotropy=\na}},offset:{get:function(){console.warn(\"THREE.WebGLRenderTarget: .offset is now .texture.offset.\");return this.texture.offset},set:function(a){console.warn(\"THREE.WebGLRenderTarget: .offset is now .texture.offset.\");this.texture.offset=a}},repeat:{get:function(){console.warn(\"THREE.WebGLRenderTarget: .repeat is now .texture.repeat.\");return this.texture.repeat},set:function(a){console.warn(\"THREE.WebGLRenderTarget: .repeat is now .texture.repeat.\");this.texture.repeat=a}},format:{get:function(){console.warn(\"THREE.WebGLRenderTarget: .format is now .texture.format.\");\nreturn this.texture.format},set:function(a){console.warn(\"THREE.WebGLRenderTarget: .format is now .texture.format.\");this.texture.format=a}},type:{get:function(){console.warn(\"THREE.WebGLRenderTarget: .type is now .texture.type.\");return this.texture.type},set:function(a){console.warn(\"THREE.WebGLRenderTarget: .type is now .texture.type.\");this.texture.type=a}},generateMipmaps:{get:function(){console.warn(\"THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps.\");return this.texture.generateMipmaps},\nset:function(a){console.warn(\"THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps.\");this.texture.generateMipmaps=a}}});gc.prototype.load=function(a){console.warn(\"THREE.Audio: .load has been deprecated. Use THREE.AudioLoader instead.\");var b=this;(new ge).load(a,function(a){b.setBuffer(a)});return this};ke.prototype.getData=function(){console.warn(\"THREE.AudioAnalyser: .getData() is now .getFrequencyData().\");return this.getFrequencyData()};Xc.prototype.updateCubeMap=function(a,\nb){console.warn(\"THREE.CubeCamera: .updateCubeMap() is now .update().\");return this.update(a,b)};m.WebGLRenderTargetCube=Bb;m.WebGLRenderTarget=Ab;m.WebGLRenderer=Yd;m.ShaderLib=ib;m.UniformsLib=L;m.UniformsUtils=Da;m.ShaderChunk=V;m.FogExp2=Hb;m.Fog=Ib;m.Scene=nd;m.LensFlare=Zd;m.Sprite=xc;m.LOD=yc;m.SkinnedMesh=pd;m.Skeleton=zc;m.Bone=od;m.Mesh=fa;m.LineSegments=X;m.LineLoop=qd;m.Line=ra;m.Points=Jb;m.Group=Ac;m.VideoTexture=rd;m.DataTexture=bb;m.CompressedTexture=Kb;m.CubeTexture=Va;m.CanvasTexture=\noc;m.DepthTexture=Bc;m.Texture=N;m.CompressedTextureLoader=Re;m.DataTextureLoader=ae;m.CubeTextureLoader=be;m.TextureLoader=sd;m.ObjectLoader=Se;m.MaterialLoader=Hd;m.BufferGeometryLoader=ce;m.DefaultLoadingManager=oa;m.LoadingManager=$d;m.JSONLoader=de;m.ImageLoader=Sc;m.FontLoader=Ue;m.FileLoader=Ia;m.Loader=dc;m.Cache=hd;m.AudioLoader=ge;m.SpotLightShadow=ud;m.SpotLight=vd;m.PointLight=wd;m.RectAreaLight=Ad;m.HemisphereLight=td;m.DirectionalLightShadow=xd;m.DirectionalLight=yd;m.AmbientLight=zd;\nm.LightShadow=rb;m.Light=aa;m.StereoCamera=Ve;m.PerspectiveCamera=ja;m.OrthographicCamera=Db;m.CubeCamera=Xc;m.ArrayCamera=md;m.Camera=Ma;m.AudioListener=he;m.PositionalAudio=je;m.AudioContext=ie;m.AudioAnalyser=ke;m.Audio=gc;m.VectorKeyframeTrack=bc;m.StringKeyframeTrack=Ed;m.QuaternionKeyframeTrack=Uc;m.NumberKeyframeTrack=cc;m.ColorKeyframeTrack=Gd;m.BooleanKeyframeTrack=Fd;m.PropertyMixer=le;m.PropertyBinding=da;m.KeyframeTrack=tb;m.AnimationUtils=ea;m.AnimationObjectGroup=Xe;m.AnimationMixer=\nZe;m.AnimationClip=Ba;m.Uniform=Id;m.InstancedBufferGeometry=me;m.BufferGeometry=F;m.GeometryIdCount=function(){return Rd++};m.Geometry=Q;m.InterleavedBufferAttribute=ne;m.InstancedInterleavedBuffer=oe;m.InterleavedBuffer=hc;m.InstancedBufferAttribute=pe;m.Face3=Qa;m.Object3D=w;m.Raycaster=$e;m.Layers=Qd;m.EventDispatcher=na;m.Clock=bf;m.QuaternionLinearInterpolant=Dd;m.LinearInterpolant=Tc;m.DiscreteInterpolant=Cd;m.CubicInterpolant=Bd;m.Interpolant=wa;m.Triangle=Ra;m.Math=R;m.Spherical=cf;m.Cylindrical=\ndf;m.Plane=za;m.Frustum=kd;m.Sphere=Ca;m.Ray=hb;m.Matrix4=O;m.Matrix3=qa;m.Box3=Pa;m.Box2=id;m.Line3=Fb;m.Euler=Ya;m.Vector4=S;m.Vector3=n;m.Vector2=D;m.Quaternion=ia;m.Color=C;m.ImmediateRenderObject=Yc;m.VertexNormalsHelper=Zc;m.SpotLightHelper=ic;m.SkeletonHelper=jc;m.PointLightHelper=kc;m.RectAreaLightHelper=lc;m.HemisphereLightHelper=mc;m.GridHelper=$c;m.PolarGridHelper=Jd;m.FaceNormalsHelper=ad;m.DirectionalLightHelper=nc;m.CameraHelper=bd;m.BoxHelper=yb;m.Box3Helper=cd;m.PlaneHelper=dd;m.ArrowHelper=\nzb;m.AxisHelper=Ld;m.CatmullRomCurve3=Ja;m.CubicBezierCurve3=ed;m.QuadraticBezierCurve3=fd;m.LineCurve3=gd;m.ArcCurve=Md;m.EllipseCurve=Ua;m.SplineCurve=wb;m.CubicBezierCurve=ec;m.QuadraticBezierCurve=fc;m.LineCurve=Oa;m.Shape=xb;m.Path=Wc;m.ShapePath=ee;m.Font=fe;m.CurvePath=Vc;m.Curve=pa;m.ShapeUtils=Fa;m.SceneUtils={createMultiMaterialObject:function(a,b){for(var c=new Ac,d=0,e=b.length;d<e;d++)c.add(new fa(a,b[d]));return c},detach:function(a,b,c){a.applyMatrix(b.matrixWorld);b.remove(a);c.add(a)},\nattach:function(a,b,c){a.applyMatrix((new O).getInverse(c.matrixWorld));b.remove(a);c.add(a)}};m.WebGLUtils=Qe;m.WireframeGeometry=Lb;m.ParametricGeometry=Cc;m.ParametricBufferGeometry=Mb;m.TetrahedronGeometry=Ec;m.TetrahedronBufferGeometry=Nb;m.OctahedronGeometry=Fc;m.OctahedronBufferGeometry=jb;m.IcosahedronGeometry=Gc;m.IcosahedronBufferGeometry=Ob;m.DodecahedronGeometry=Hc;m.DodecahedronBufferGeometry=Pb;m.PolyhedronGeometry=Dc;m.PolyhedronBufferGeometry=ua;m.TubeGeometry=Ic;m.TubeBufferGeometry=\nQb;m.TorusKnotGeometry=Jc;m.TorusKnotBufferGeometry=Rb;m.TorusGeometry=Kc;m.TorusBufferGeometry=Sb;m.TextGeometry=Lc;m.TextBufferGeometry=Tb;m.SphereGeometry=Mc;m.SphereBufferGeometry=kb;m.RingGeometry=Nc;m.RingBufferGeometry=Ub;m.PlaneGeometry=vc;m.PlaneBufferGeometry=gb;m.LatheGeometry=Oc;m.LatheBufferGeometry=Vb;m.ShapeGeometry=Wb;m.ShapeBufferGeometry=Xb;m.ExtrudeGeometry=$a;m.ExtrudeBufferGeometry=Ea;m.EdgesGeometry=Yb;m.ConeGeometry=Pc;m.ConeBufferGeometry=Qc;m.CylinderGeometry=lb;m.CylinderBufferGeometry=\nTa;m.CircleGeometry=Rc;m.CircleBufferGeometry=Zb;m.BoxGeometry=Eb;m.BoxBufferGeometry=fb;m.ShadowMaterial=$b;m.SpriteMaterial=Za;m.RawShaderMaterial=ac;m.ShaderMaterial=ya;m.PointsMaterial=ma;m.MeshPhysicalMaterial=mb;m.MeshStandardMaterial=Na;m.MeshPhongMaterial=Aa;m.MeshToonMaterial=nb;m.MeshNormalMaterial=ob;m.MeshLambertMaterial=pb;m.MeshDepthMaterial=Wa;m.MeshDistanceMaterial=Xa;m.MeshBasicMaterial=sa;m.LineDashedMaterial=qb;m.LineBasicMaterial=W;m.Material=P;m.Float64BufferAttribute=uc;m.Float32BufferAttribute=\nz;m.Uint32BufferAttribute=eb;m.Int32BufferAttribute=tc;m.Uint16BufferAttribute=db;m.Int16BufferAttribute=sc;m.Uint8ClampedBufferAttribute=rc;m.Uint8BufferAttribute=qc;m.Int8BufferAttribute=pc;m.BufferAttribute=K;m.REVISION=\"87\";m.MOUSE={LEFT:0,MIDDLE:1,RIGHT:2};m.CullFaceNone=0;m.CullFaceBack=1;m.CullFaceFront=2;m.CullFaceFrontBack=3;m.FrontFaceDirectionCW=0;m.FrontFaceDirectionCCW=1;m.BasicShadowMap=0;m.PCFShadowMap=1;m.PCFSoftShadowMap=2;m.FrontSide=0;m.BackSide=1;m.DoubleSide=2;m.FlatShading=1;\nm.SmoothShading=2;m.NoColors=0;m.FaceColors=1;m.VertexColors=2;m.NoBlending=0;m.NormalBlending=1;m.AdditiveBlending=2;m.SubtractiveBlending=3;m.MultiplyBlending=4;m.CustomBlending=5;m.AddEquation=100;m.SubtractEquation=101;m.ReverseSubtractEquation=102;m.MinEquation=103;m.MaxEquation=104;m.ZeroFactor=200;m.OneFactor=201;m.SrcColorFactor=202;m.OneMinusSrcColorFactor=203;m.SrcAlphaFactor=204;m.OneMinusSrcAlphaFactor=205;m.DstAlphaFactor=206;m.OneMinusDstAlphaFactor=207;m.DstColorFactor=208;m.OneMinusDstColorFactor=\n209;m.SrcAlphaSaturateFactor=210;m.NeverDepth=0;m.AlwaysDepth=1;m.LessDepth=2;m.LessEqualDepth=3;m.EqualDepth=4;m.GreaterEqualDepth=5;m.GreaterDepth=6;m.NotEqualDepth=7;m.MultiplyOperation=0;m.MixOperation=1;m.AddOperation=2;m.NoToneMapping=0;m.LinearToneMapping=1;m.ReinhardToneMapping=2;m.Uncharted2ToneMapping=3;m.CineonToneMapping=4;m.UVMapping=300;m.CubeReflectionMapping=301;m.CubeRefractionMapping=302;m.EquirectangularReflectionMapping=303;m.EquirectangularRefractionMapping=304;m.SphericalReflectionMapping=\n305;m.CubeUVReflectionMapping=306;m.CubeUVRefractionMapping=307;m.RepeatWrapping=1E3;m.ClampToEdgeWrapping=1001;m.MirroredRepeatWrapping=1002;m.NearestFilter=1003;m.NearestMipMapNearestFilter=1004;m.NearestMipMapLinearFilter=1005;m.LinearFilter=1006;m.LinearMipMapNearestFilter=1007;m.LinearMipMapLinearFilter=1008;m.UnsignedByteType=1009;m.ByteType=1010;m.ShortType=1011;m.UnsignedShortType=1012;m.IntType=1013;m.UnsignedIntType=1014;m.FloatType=1015;m.HalfFloatType=1016;m.UnsignedShort4444Type=1017;\nm.UnsignedShort5551Type=1018;m.UnsignedShort565Type=1019;m.UnsignedInt248Type=1020;m.AlphaFormat=1021;m.RGBFormat=1022;m.RGBAFormat=1023;m.LuminanceFormat=1024;m.LuminanceAlphaFormat=1025;m.RGBEFormat=1023;m.DepthFormat=1026;m.DepthStencilFormat=1027;m.RGB_S3TC_DXT1_Format=2001;m.RGBA_S3TC_DXT1_Format=2002;m.RGBA_S3TC_DXT3_Format=2003;m.RGBA_S3TC_DXT5_Format=2004;m.RGB_PVRTC_4BPPV1_Format=2100;m.RGB_PVRTC_2BPPV1_Format=2101;m.RGBA_PVRTC_4BPPV1_Format=2102;m.RGBA_PVRTC_2BPPV1_Format=2103;m.RGB_ETC1_Format=\n2151;m.LoopOnce=2200;m.LoopRepeat=2201;m.LoopPingPong=2202;m.InterpolateDiscrete=2300;m.InterpolateLinear=2301;m.InterpolateSmooth=2302;m.ZeroCurvatureEnding=2400;m.ZeroSlopeEnding=2401;m.WrapAroundEnding=2402;m.TrianglesDrawMode=0;m.TriangleStripDrawMode=1;m.TriangleFanDrawMode=2;m.LinearEncoding=3E3;m.sRGBEncoding=3001;m.GammaEncoding=3007;m.RGBEEncoding=3002;m.LogLuvEncoding=3003;m.RGBM7Encoding=3004;m.RGBM16Encoding=3005;m.RGBDEncoding=3006;m.BasicDepthPacking=3200;m.RGBADepthPacking=3201;m.CubeGeometry=\nEb;m.Face4=function(a,b,c,d,e,f,g){console.warn(\"THREE.Face4 has been removed. A THREE.Face3 will be created instead.\");return new Qa(a,b,c,e,f,g)};m.LineStrip=0;m.LinePieces=1;m.MeshFaceMaterial=function(a){console.warn(\"THREE.MeshFaceMaterial has been removed. Use an Array instead.\");return a};m.MultiMaterial=function(a){void 0===a&&(a=[]);console.warn(\"THREE.MultiMaterial has been removed. Use an Array instead.\");a.isMultiMaterial=!0;a.materials=a;a.clone=function(){return a.slice()};return a};\nm.PointCloud=function(a,b){console.warn(\"THREE.PointCloud has been renamed to THREE.Points.\");return new Jb(a,b)};m.Particle=function(a){console.warn(\"THREE.Particle has been renamed to THREE.Sprite.\");return new xc(a)};m.ParticleSystem=function(a,b){console.warn(\"THREE.ParticleSystem has been renamed to THREE.Points.\");return new Jb(a,b)};m.PointCloudMaterial=function(a){console.warn(\"THREE.PointCloudMaterial has been renamed to THREE.PointsMaterial.\");return new ma(a)};m.ParticleBasicMaterial=function(a){console.warn(\"THREE.ParticleBasicMaterial has been renamed to THREE.PointsMaterial.\");\nreturn new ma(a)};m.ParticleSystemMaterial=function(a){console.warn(\"THREE.ParticleSystemMaterial has been renamed to THREE.PointsMaterial.\");return new ma(a)};m.Vertex=function(a,b,c){console.warn(\"THREE.Vertex has been removed. Use THREE.Vector3 instead.\");return new n(a,b,c)};m.DynamicBufferAttribute=function(a,b){console.warn(\"THREE.DynamicBufferAttribute has been removed. Use new THREE.BufferAttribute().setDynamic( true ) instead.\");return(new K(a,b)).setDynamic(!0)};m.Int8Attribute=function(a,\nb){console.warn(\"THREE.Int8Attribute has been removed. Use new THREE.Int8BufferAttribute() instead.\");return new pc(a,b)};m.Uint8Attribute=function(a,b){console.warn(\"THREE.Uint8Attribute has been removed. Use new THREE.Uint8BufferAttribute() instead.\");return new qc(a,b)};m.Uint8ClampedAttribute=function(a,b){console.warn(\"THREE.Uint8ClampedAttribute has been removed. Use new THREE.Uint8ClampedBufferAttribute() instead.\");return new rc(a,b)};m.Int16Attribute=function(a,b){console.warn(\"THREE.Int16Attribute has been removed. Use new THREE.Int16BufferAttribute() instead.\");\nreturn new sc(a,b)};m.Uint16Attribute=function(a,b){console.warn(\"THREE.Uint16Attribute has been removed. Use new THREE.Uint16BufferAttribute() instead.\");return new db(a,b)};m.Int32Attribute=function(a,b){console.warn(\"THREE.Int32Attribute has been removed. Use new THREE.Int32BufferAttribute() instead.\");return new tc(a,b)};m.Uint32Attribute=function(a,b){console.warn(\"THREE.Uint32Attribute has been removed. Use new THREE.Uint32BufferAttribute() instead.\");return new eb(a,b)};m.Float32Attribute=\nfunction(a,b){console.warn(\"THREE.Float32Attribute has been removed. Use new THREE.Float32BufferAttribute() instead.\");return new z(a,b)};m.Float64Attribute=function(a,b){console.warn(\"THREE.Float64Attribute has been removed. Use new THREE.Float64BufferAttribute() instead.\");return new uc(a,b)};m.ClosedSplineCurve3=ff;m.SplineCurve3=gf;m.Spline=te;m.BoundingBoxHelper=function(a,b){console.warn(\"THREE.BoundingBoxHelper has been deprecated. Creating a THREE.BoxHelper instead.\");return new yb(a,b)};\nm.EdgesHelper=function(a,b){console.warn(\"THREE.EdgesHelper has been removed. Use THREE.EdgesGeometry instead.\");return new X(new Yb(a.geometry),new W({color:void 0!==b?b:16777215}))};m.WireframeHelper=function(a,b){console.warn(\"THREE.WireframeHelper has been removed. Use THREE.WireframeGeometry instead.\");return new X(new Lb(a.geometry),new W({color:void 0!==b?b:16777215}))};m.XHRLoader=function(a){console.warn(\"THREE.XHRLoader has been renamed to THREE.FileLoader.\");return new Ia(a)};m.BinaryTextureLoader=\nfunction(a){console.warn(\"THREE.BinaryTextureLoader has been renamed to THREE.DataTextureLoader.\");return new ae(a)};m.GeometryUtils={merge:function(a,b,c){console.warn(\"THREE.GeometryUtils: .merge() has been moved to Geometry. Use geometry.merge( geometry2, matrix, materialIndexOffset ) instead.\");if(b.isMesh){b.matrixAutoUpdate&&b.updateMatrix();var d=b.matrix;b=b.geometry}a.merge(b,d,c)},center:function(a){console.warn(\"THREE.GeometryUtils: .center() has been moved to Geometry. Use geometry.center() instead.\");\nreturn a.center()}};m.ImageUtils={crossOrigin:void 0,loadTexture:function(a,b,c,d){console.warn(\"THREE.ImageUtils.loadTexture has been deprecated. Use THREE.TextureLoader() instead.\");var e=new sd;e.setCrossOrigin(this.crossOrigin);a=e.load(a,c,void 0,d);b&&(a.mapping=b);return a},loadTextureCube:function(a,b,c,d){console.warn(\"THREE.ImageUtils.loadTextureCube has been deprecated. Use THREE.CubeTextureLoader() instead.\");var e=new be;e.setCrossOrigin(this.crossOrigin);a=e.load(a,c,void 0,d);b&&(a.mapping=\nb);return a},loadCompressedTexture:function(){console.error(\"THREE.ImageUtils.loadCompressedTexture has been removed. Use THREE.DDSLoader instead.\")},loadCompressedTextureCube:function(){console.error(\"THREE.ImageUtils.loadCompressedTextureCube has been removed. Use THREE.DDSLoader instead.\")}};m.Projector=function(){console.error(\"THREE.Projector has been moved to /examples/js/renderers/Projector.js.\");this.projectVector=function(a,b){console.warn(\"THREE.Projector: .projectVector() is now vector.project().\");\na.project(b)};this.unprojectVector=function(a,b){console.warn(\"THREE.Projector: .unprojectVector() is now vector.unproject().\");a.unproject(b)};this.pickingRay=function(){console.error(\"THREE.Projector: .pickingRay() is now raycaster.setFromCamera().\")}};m.CanvasRenderer=function(){console.error(\"THREE.CanvasRenderer has been moved to /examples/js/renderers/CanvasRenderer.js\");this.domElement=document.createElementNS(\"http://www.w3.org/1999/xhtml\",\"canvas\");this.clear=function(){};this.render=function(){};\nthis.setClearColor=function(){};this.setSize=function(){}};Object.defineProperty(m,\"__esModule\",{value:!0})});\n</script> <script type=\"text/javascript\">THREE.TrackballControls=function(e,t){function o(e){!1!==u.enabled&&(window.removeEventListener(\"keydown\",o),g=l,l===E.NONE&&(e.keyCode!==u.keys[E.ROTATE]||u.noRotate?e.keyCode!==u.keys[E.ZOOM]||u.noZoom?e.keyCode!==u.keys[E.PAN]||u.noPan||(l=E.PAN):l=E.ZOOM:l=E.ROTATE))}function n(e){!1!==u.enabled&&(l=g,window.addEventListener(\"keydown\",o,!1))}function i(e){!1!==u.enabled&&(l===E.NONE&&(l=e.button),l!==E.ROTATE||u.noRotate?l!==E.ZOOM||u.noZoom?l!==E.PAN||u.noPan||(L.copy(A(e.pageX,e.pageY)),V.copy(L)):(b.copy(A(e.pageX,e.pageY)),O.copy(b)):(w.copy(D(e.pageX,e.pageY)),v.copy(w)),document.addEventListener(\"mousemove\",c,!1),document.addEventListener(\"mouseup\",s,!1),u.dispatchEvent(N))}function c(e){!1!==u.enabled&&(e.preventDefault(),e.stopPropagation(),l!==E.ROTATE||u.noRotate?l!==E.ZOOM||u.noZoom?l!==E.PAN||u.noPan||V.copy(A(e.pageX,e.pageY)):O.copy(A(e.pageX,e.pageY)):(v.copy(w),w.copy(D(e.pageX,e.pageY))))}function s(e){!1!==u.enabled&&(e.preventDefault(),e.stopPropagation(),l=E.NONE,document.removeEventListener(\"mousemove\",c),document.removeEventListener(\"mouseup\",s),u.dispatchEvent(j))}function a(e){if(!1!==u.enabled){switch(e.preventDefault(),e.stopPropagation(),e.deltaMode){case 2:b.y-=.025*e.deltaY;break;case 1:b.y-=.01*e.deltaY;break;default:b.y-=25e-5*e.deltaY}u.dispatchEvent(N),u.dispatchEvent(j)}}function r(e){if(!1!==u.enabled){switch(e.touches.length){case 1:l=E.TOUCH_ROTATE,w.copy(D(e.touches[0].pageX,e.touches[0].pageY)),v.copy(w);break;default:l=E.TOUCH_ZOOM_PAN;var t=e.touches[0].pageX-e.touches[1].pageX,o=e.touches[0].pageY-e.touches[1].pageY;H=R=Math.sqrt(t*t+o*o);var n=(e.touches[0].pageX+e.touches[1].pageX)/2,i=(e.touches[0].pageY+e.touches[1].pageY)/2;L.copy(A(n,i)),V.copy(L)}u.dispatchEvent(N)}}function p(e){if(!1!==u.enabled)switch(e.preventDefault(),e.stopPropagation(),e.touches.length){case 1:v.copy(w),w.copy(D(e.touches[0].pageX,e.touches[0].pageY));break;default:var t=e.touches[0].pageX-e.touches[1].pageX,o=e.touches[0].pageY-e.touches[1].pageY;H=Math.sqrt(t*t+o*o);var n=(e.touches[0].pageX+e.touches[1].pageX)/2,i=(e.touches[0].pageY+e.touches[1].pageY)/2;V.copy(A(n,i))}}function h(e){if(!1!==u.enabled){switch(e.touches.length){case 0:l=E.NONE;break;case 1:l=E.TOUCH_ROTATE,w.copy(D(e.touches[0].pageX,e.touches[0].pageY)),v.copy(w)}u.dispatchEvent(j)}}function d(e){e.preventDefault()}var u=this,E={NONE:-1,ROTATE:0,ZOOM:1,PAN:2,TOUCH_ROTATE:3,TOUCH_ZOOM_PAN:4};this.object=e,this.domElement=void 0!==t?t:document,this.enabled=!0,this.screen={left:0,top:0,width:0,height:0},this.rotateSpeed=1,this.zoomSpeed=1.2,this.panSpeed=.3,this.noRotate=!1,this.noZoom=!1,this.noPan=!1,this.staticMoving=!1,this.dynamicDampingFactor=.2,this.minDistance=0,this.maxDistance=400,this.keys=[65,83,68],this.target=new THREE.Vector3;var m=new THREE.Vector3,l=E.NONE,g=E.NONE,y=new THREE.Vector3,v=new THREE.Vector2,w=new THREE.Vector2,T=new THREE.Vector3,f=0,b=new THREE.Vector2,O=new THREE.Vector2,R=0,H=0,L=new THREE.Vector2,V=new THREE.Vector2;this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.up0=this.object.up.clone();var k={type:\"change\"},N={type:\"start\"},j={type:\"end\"};this.handleResize=function(){if(this.domElement===document)this.screen.left=0,this.screen.top=0,this.screen.width=window.innerWidth,this.screen.height=window.innerHeight;else{var e=this.domElement.getBoundingClientRect(),t=this.domElement.ownerDocument.documentElement;this.screen.left=e.left+window.pageXOffset-t.clientLeft,this.screen.top=e.top+window.pageYOffset-t.clientTop,this.screen.width=e.width,this.screen.height=e.height}},this.handleEvent=function(e){\"function\"==typeof this[e.type]&&this[e.type](e)};var A=function(){var e=new THREE.Vector2;return function(t,o){return e.set((t-u.screen.left)/u.screen.width,(o-u.screen.top)/u.screen.height),e}}(),D=function(){var e=new THREE.Vector2;return function(t,o){return e.set((t-.5*u.screen.width-u.screen.left)/(.5*u.screen.width),(u.screen.height+2*(u.screen.top-o))/u.screen.width),e}}();this.rotateCamera=function(){var e,t=new THREE.Vector3,o=new THREE.Quaternion,n=new THREE.Vector3,i=new THREE.Vector3,c=new THREE.Vector3,s=new THREE.Vector3;return function(){s.set(w.x-v.x,w.y-v.y,0),e=s.length(),e?(y.copy(u.object.position).sub(u.target),n.copy(y).normalize(),i.copy(u.object.up).normalize(),c.crossVectors(i,n).normalize(),i.setLength(w.y-v.y),c.setLength(w.x-v.x),s.copy(i.add(c)),t.crossVectors(s,y).normalize(),e*=u.rotateSpeed,o.setFromAxisAngle(t,e),y.applyQuaternion(o),u.object.up.applyQuaternion(o),T.copy(t),f=e):!u.staticMoving&&f&&(f*=Math.sqrt(1-u.dynamicDampingFactor),y.copy(u.object.position).sub(u.target),o.setFromAxisAngle(T,f),y.applyQuaternion(o),u.object.up.applyQuaternion(o)),v.copy(w)}}(),this.zoomCamera=function(){var e;l===E.TOUCH_ZOOM_PAN?(e=R/H,R=H,y.multiplyScalar(e)):(e=1+(O.y-b.y)*u.zoomSpeed,1!==e&&e>0&&y.multiplyScalar(e),u.staticMoving?b.copy(O):b.y+=(O.y-b.y)*this.dynamicDampingFactor)},this.panCamera=function(){var e=new THREE.Vector2,t=new THREE.Vector3,o=new THREE.Vector3;return function(){e.copy(V).sub(L),e.lengthSq()&&(e.multiplyScalar(y.length()*u.panSpeed),o.copy(y).cross(u.object.up).setLength(e.x),o.add(t.copy(u.object.up).setLength(e.y)),u.object.position.add(o),u.target.add(o),u.staticMoving?L.copy(V):L.add(e.subVectors(V,L).multiplyScalar(u.dynamicDampingFactor)))}}(),this.checkDistances=function(){u.noZoom&&u.noPan||(y.lengthSq()>u.maxDistance*u.maxDistance&&(u.object.position.addVectors(u.target,y.setLength(u.maxDistance)),b.copy(O)),y.lengthSq()<u.minDistance*u.minDistance&&(u.object.position.addVectors(u.target,y.setLength(u.minDistance)),b.copy(O)))},this.update=function(){y.subVectors(u.object.position,u.target),u.noRotate||u.rotateCamera(),u.noZoom||u.zoomCamera(),u.noPan||u.panCamera(),u.object.position.addVectors(u.target,y),u.checkDistances(),u.object.lookAt(u.target),m.distanceToSquared(u.object.position)>1e-6&&(u.dispatchEvent(k),m.copy(u.object.position))},this.reset=function(e){l=E.NONE,g=E.NONE,u.target.copy(u.target0),void 0===e?e=u.position0:e.normalize().multiplyScalar(u.object.position.length()),u.object.position.copy(e),u.object.up.copy(u.up0),y.subVectors(u.object.position,u.target),u.object.lookAt(u.target),u.dispatchEvent(k),m.copy(u.object.position)},this.dispose=function(){this.domElement.removeEventListener(\"contextmenu\",d,!1),this.domElement.removeEventListener(\"mousedown\",i,!1),this.domElement.removeEventListener(\"wheel\",a,!1),this.domElement.removeEventListener(\"touchstart\",r,!1),this.domElement.removeEventListener(\"touchend\",h,!1),this.domElement.removeEventListener(\"touchmove\",p,!1),document.removeEventListener(\"mousemove\",c,!1),document.removeEventListener(\"mouseup\",s,!1),window.removeEventListener(\"keydown\",o,!1),window.removeEventListener(\"keyup\",n,!1)},this.domElement.addEventListener(\"contextmenu\",d,!1),this.domElement.addEventListener(\"mousedown\",i,!1),this.domElement.addEventListener(\"wheel\",a,!1),this.domElement.addEventListener(\"touchstart\",r,!1),this.domElement.addEventListener(\"touchend\",h,!1),this.domElement.addEventListener(\"touchmove\",p,!1),window.addEventListener(\"keydown\",o,!1),window.addEventListener(\"keyup\",n,!1),this.handleResize(),this.update()},THREE.TrackballControls.prototype=Object.create(THREE.EventDispatcher.prototype),THREE.TrackballControls.prototype.constructor=THREE.TrackballControls;</script> <script type=\"text/javascript\">(function(){function n(n){function t(t,r,e,u,i,o){for(;i>=0&&o>i;i+=n){var a=u?u[i]:i;e=r(e,t[a],a,t)}return e}return function(r,e,u,i){e=b(e,i,4);var o=!k(r)&&m.keys(r),a=(o||r).length,c=n>0?0:a-1;return arguments.length<3&&(u=r[o?o[c]:c],c+=n),t(r,e,u,o,c,a)}}function t(n){return function(t,r,e){r=x(r,e);for(var u=O(t),i=n>0?0:u-1;i>=0&&u>i;i+=n)if(r(t[i],i,t))return i;return-1}}function r(n,t,r){return function(e,u,i){var o=0,a=O(e);if(\"number\"==typeof i)n>0?o=i>=0?i:Math.max(i+a,o):a=i>=0?Math.min(i+1,a):i+a+1;else if(r&&i&&a)return i=r(e,u),e[i]===u?i:-1;if(u!==u)return i=t(l.call(e,o,a),m.isNaN),i>=0?i+o:-1;for(i=n>0?o:a-1;i>=0&&a>i;i+=n)if(e[i]===u)return i;return-1}}function e(n,t){var r=I.length,e=n.constructor,u=m.isFunction(e)&&e.prototype||a,i=\"constructor\";for(m.has(n,i)&&!m.contains(t,i)&&t.push(i);r--;)(i=I[r])in n&&n[i]!==u[i]&&!m.contains(t,i)&&t.push(i)}var u=this,i=u._,o=Array.prototype,a=Object.prototype,c=Function.prototype,f=o.push,l=o.slice,s=a.toString,p=a.hasOwnProperty,h=Array.isArray,v=Object.keys,y=c.bind,d=Object.create,g=function(){},m=function(n){return n instanceof m?n:this instanceof m?void(this._wrapped=n):new m(n)};\"undefined\"!=typeof exports?(\"undefined\"!=typeof module&&module.exports&&(exports=module.exports=m),exports._=m):u._=m,m.VERSION=\"1.8.3\";var b=function(n,t,r){if(void 0===t)return n;switch(null==r?3:r){case 1:return function(r){return n.call(t,r)};case 2:return function(r,e){return n.call(t,r,e)};case 3:return function(r,e,u){return n.call(t,r,e,u)};case 4:return function(r,e,u,i){return n.call(t,r,e,u,i)}}return function(){return n.apply(t,arguments)}},x=function(n,t,r){return null==n?m.identity:m.isFunction(n)?b(n,t,r):m.isObject(n)?m.matcher(n):m.property(n)};m.iteratee=function(n,t){return x(n,t,1/0)};var _=function(n,t){return function(r){var e=arguments.length;if(2>e||null==r)return r;for(var u=1;e>u;u++)for(var i=arguments[u],o=n(i),a=o.length,c=0;a>c;c++){var f=o[c];t&&void 0!==r[f]||(r[f]=i[f])}return r}},j=function(n){if(!m.isObject(n))return{};if(d)return d(n);g.prototype=n;var t=new g;return g.prototype=null,t},w=function(n){return function(t){return null==t?void 0:t[n]}},A=Math.pow(2,53)-1,O=w(\"length\"),k=function(n){var t=O(n);return\"number\"==typeof t&&t>=0&&A>=t};m.each=m.forEach=function(n,t,r){t=b(t,r);var e,u;if(k(n))for(e=0,u=n.length;u>e;e++)t(n[e],e,n);else{var i=m.keys(n);for(e=0,u=i.length;u>e;e++)t(n[i[e]],i[e],n)}return n},m.map=m.collect=function(n,t,r){t=x(t,r);for(var e=!k(n)&&m.keys(n),u=(e||n).length,i=Array(u),o=0;u>o;o++){var a=e?e[o]:o;i[o]=t(n[a],a,n)}return i},m.reduce=m.foldl=m.inject=n(1),m.reduceRight=m.foldr=n(-1),m.find=m.detect=function(n,t,r){var e;return e=k(n)?m.findIndex(n,t,r):m.findKey(n,t,r),void 0!==e&&-1!==e?n[e]:void 0},m.filter=m.select=function(n,t,r){var e=[];return t=x(t,r),m.each(n,function(n,r,u){t(n,r,u)&&e.push(n)}),e},m.reject=function(n,t,r){return m.filter(n,m.negate(x(t)),r)},m.every=m.all=function(n,t,r){t=x(t,r);for(var e=!k(n)&&m.keys(n),u=(e||n).length,i=0;u>i;i++){var o=e?e[i]:i;if(!t(n[o],o,n))return!1}return!0},m.some=m.any=function(n,t,r){t=x(t,r);for(var e=!k(n)&&m.keys(n),u=(e||n).length,i=0;u>i;i++){var o=e?e[i]:i;if(t(n[o],o,n))return!0}return!1},m.contains=m.includes=m.include=function(n,t,r,e){return k(n)||(n=m.values(n)),(\"number\"!=typeof r||e)&&(r=0),m.indexOf(n,t,r)>=0},m.invoke=function(n,t){var r=l.call(arguments,2),e=m.isFunction(t);return m.map(n,function(n){var u=e?t:n[t];return null==u?u:u.apply(n,r)})},m.pluck=function(n,t){return m.map(n,m.property(t))},m.where=function(n,t){return m.filter(n,m.matcher(t))},m.findWhere=function(n,t){return m.find(n,m.matcher(t))},m.max=function(n,t,r){var e,u,i=-1/0,o=-1/0;if(null==t&&null!=n){n=k(n)?n:m.values(n);for(var a=0,c=n.length;c>a;a++)(e=n[a])>i&&(i=e)}else t=x(t,r),m.each(n,function(n,r,e){((u=t(n,r,e))>o||u===-1/0&&i===-1/0)&&(i=n,o=u)});return i},m.min=function(n,t,r){var e,u,i=1/0,o=1/0;if(null==t&&null!=n){n=k(n)?n:m.values(n);for(var a=0,c=n.length;c>a;a++)e=n[a],i>e&&(i=e)}else t=x(t,r),m.each(n,function(n,r,e){u=t(n,r,e),(o>u||1/0===u&&1/0===i)&&(i=n,o=u)});return i},m.shuffle=function(n){for(var t,r=k(n)?n:m.values(n),e=r.length,u=Array(e),i=0;e>i;i++)t=m.random(0,i),t!==i&&(u[i]=u[t]),u[t]=r[i];return u},m.sample=function(n,t,r){return null==t||r?(k(n)||(n=m.values(n)),n[m.random(n.length-1)]):m.shuffle(n).slice(0,Math.max(0,t))},m.sortBy=function(n,t,r){return t=x(t,r),m.pluck(m.map(n,function(n,r,e){return{value:n,index:r,criteria:t(n,r,e)}}).sort(function(n,t){var r=n.criteria,e=t.criteria;if(r!==e){if(r>e||void 0===r)return 1;if(e>r||void 0===e)return-1}return n.index-t.index}),\"value\")};var F=function(n){return function(t,r,e){var u={};return r=x(r,e),m.each(t,function(e,i){var o=r(e,i,t);n(u,e,o)}),u}};m.groupBy=F(function(n,t,r){m.has(n,r)?n[r].push(t):n[r]=[t]}),m.indexBy=F(function(n,t,r){n[r]=t}),m.countBy=F(function(n,t,r){m.has(n,r)?n[r]++:n[r]=1}),m.toArray=function(n){return n?m.isArray(n)?l.call(n):k(n)?m.map(n,m.identity):m.values(n):[]},m.size=function(n){return null==n?0:k(n)?n.length:m.keys(n).length},m.partition=function(n,t,r){t=x(t,r);var e=[],u=[];return m.each(n,function(n,r,i){(t(n,r,i)?e:u).push(n)}),[e,u]},m.first=m.head=m.take=function(n,t,r){return null==n?void 0:null==t||r?n[0]:m.initial(n,n.length-t)},m.initial=function(n,t,r){return l.call(n,0,Math.max(0,n.length-(null==t||r?1:t)))},m.last=function(n,t,r){return null==n?void 0:null==t||r?n[n.length-1]:m.rest(n,Math.max(0,n.length-t))},m.rest=m.tail=m.drop=function(n,t,r){return l.call(n,null==t||r?1:t)},m.compact=function(n){return m.filter(n,m.identity)};var S=function(n,t,r,e){for(var u=[],i=0,o=e||0,a=O(n);a>o;o++){var c=n[o];if(k(c)&&(m.isArray(c)||m.isArguments(c))){t||(c=S(c,t,r));var f=0,l=c.length;for(u.length+=l;l>f;)u[i++]=c[f++]}else r||(u[i++]=c)}return u};m.flatten=function(n,t){return S(n,t,!1)},m.without=function(n){return m.difference(n,l.call(arguments,1))},m.uniq=m.unique=function(n,t,r,e){m.isBoolean(t)||(e=r,r=t,t=!1),null!=r&&(r=x(r,e));for(var u=[],i=[],o=0,a=O(n);a>o;o++){var c=n[o],f=r?r(c,o,n):c;t?(o&&i===f||u.push(c),i=f):r?m.contains(i,f)||(i.push(f),u.push(c)):m.contains(u,c)||u.push(c)}return u},m.union=function(){return m.uniq(S(arguments,!0,!0))},m.intersection=function(n){for(var t=[],r=arguments.length,e=0,u=O(n);u>e;e++){var i=n[e];if(!m.contains(t,i)){for(var o=1;r>o&&m.contains(arguments[o],i);o++);o===r&&t.push(i)}}return t},m.difference=function(n){var t=S(arguments,!0,!0,1);return m.filter(n,function(n){return!m.contains(t,n)})},m.zip=function(){return m.unzip(arguments)},m.unzip=function(n){for(var t=n&&m.max(n,O).length||0,r=Array(t),e=0;t>e;e++)r[e]=m.pluck(n,e);return r},m.object=function(n,t){for(var r={},e=0,u=O(n);u>e;e++)t?r[n[e]]=t[e]:r[n[e][0]]=n[e][1];return r},m.findIndex=t(1),m.findLastIndex=t(-1),m.sortedIndex=function(n,t,r,e){r=x(r,e,1);for(var u=r(t),i=0,o=O(n);o>i;){var a=Math.floor((i+o)/2);r(n[a])<u?i=a+1:o=a}return i},m.indexOf=r(1,m.findIndex,m.sortedIndex),m.lastIndexOf=r(-1,m.findLastIndex),m.range=function(n,t,r){null==t&&(t=n||0,n=0),r=r||1;for(var e=Math.max(Math.ceil((t-n)/r),0),u=Array(e),i=0;e>i;i++,n+=r)u[i]=n;return u};var E=function(n,t,r,e,u){if(!(e instanceof t))return n.apply(r,u);var i=j(n.prototype),o=n.apply(i,u);return m.isObject(o)?o:i};m.bind=function(n,t){if(y&&n.bind===y)return y.apply(n,l.call(arguments,1));if(!m.isFunction(n))throw new TypeError(\"Bind must be called on a function\");var r=l.call(arguments,2),e=function(){return E(n,e,t,this,r.concat(l.call(arguments)))};return e},m.partial=function(n){var t=l.call(arguments,1),r=function(){for(var e=0,u=t.length,i=Array(u),o=0;u>o;o++)i[o]=t[o]===m?arguments[e++]:t[o];for(;e<arguments.length;)i.push(arguments[e++]);return E(n,r,this,this,i)};return r},m.bindAll=function(n){var t,r,e=arguments.length;if(1>=e)throw new Error(\"bindAll must be passed function names\");for(t=1;e>t;t++)r=arguments[t],n[r]=m.bind(n[r],n);return n},m.memoize=function(n,t){var r=function(e){var u=r.cache,i=\"\"+(t?t.apply(this,arguments):e);return m.has(u,i)||(u[i]=n.apply(this,arguments)),u[i]};return r.cache={},r},m.delay=function(n,t){var r=l.call(arguments,2);return setTimeout(function(){return n.apply(null,r)},t)},m.defer=m.partial(m.delay,m,1),m.throttle=function(n,t,r){var e,u,i,o=null,a=0;r||(r={});var c=function(){a=!1===r.leading?0:m.now(),o=null,i=n.apply(e,u),o||(e=u=null)};return function(){var f=m.now();a||!1!==r.leading||(a=f);var l=t-(f-a);return e=this,u=arguments,0>=l||l>t?(o&&(clearTimeout(o),o=null),a=f,i=n.apply(e,u),o||(e=u=null)):o||!1===r.trailing||(o=setTimeout(c,l)),i}},m.debounce=function(n,t,r){var e,u,i,o,a,c=function(){var f=m.now()-o;t>f&&f>=0?e=setTimeout(c,t-f):(e=null,r||(a=n.apply(i,u),e||(i=u=null)))};return function(){i=this,u=arguments,o=m.now();var f=r&&!e;return e||(e=setTimeout(c,t)),f&&(a=n.apply(i,u),i=u=null),a}},m.wrap=function(n,t){return m.partial(t,n)},m.negate=function(n){return function(){return!n.apply(this,arguments)}},m.compose=function(){var n=arguments,t=n.length-1;return function(){for(var r=t,e=n[t].apply(this,arguments);r--;)e=n[r].call(this,e);return e}},m.after=function(n,t){return function(){return--n<1?t.apply(this,arguments):void 0}},m.before=function(n,t){var r;return function(){return--n>0&&(r=t.apply(this,arguments)),1>=n&&(t=null),r}},m.once=m.partial(m.before,2);var M=!{toString:null}.propertyIsEnumerable(\"toString\"),I=[\"valueOf\",\"isPrototypeOf\",\"toString\",\"propertyIsEnumerable\",\"hasOwnProperty\",\"toLocaleString\"];m.keys=function(n){if(!m.isObject(n))return[];if(v)return v(n);var t=[];for(var r in n)m.has(n,r)&&t.push(r);return M&&e(n,t),t},m.allKeys=function(n){if(!m.isObject(n))return[];var t=[];for(var r in n)t.push(r);return M&&e(n,t),t},m.values=function(n){for(var t=m.keys(n),r=t.length,e=Array(r),u=0;r>u;u++)e[u]=n[t[u]];return e},m.mapObject=function(n,t,r){t=x(t,r);for(var e,u=m.keys(n),i=u.length,o={},a=0;i>a;a++)e=u[a],o[e]=t(n[e],e,n);return o},m.pairs=function(n){for(var t=m.keys(n),r=t.length,e=Array(r),u=0;r>u;u++)e[u]=[t[u],n[t[u]]];return e},m.invert=function(n){for(var t={},r=m.keys(n),e=0,u=r.length;u>e;e++)t[n[r[e]]]=r[e];return t},m.functions=m.methods=function(n){var t=[];for(var r in n)m.isFunction(n[r])&&t.push(r);return t.sort()},m.extend=_(m.allKeys),m.extendOwn=m.assign=_(m.keys),m.findKey=function(n,t,r){t=x(t,r);for(var e,u=m.keys(n),i=0,o=u.length;o>i;i++)if(e=u[i],t(n[e],e,n))return e},m.pick=function(n,t,r){var e,u,i={},o=n;if(null==o)return i;m.isFunction(t)?(u=m.allKeys(o),e=b(t,r)):(u=S(arguments,!1,!1,1),e=function(n,t,r){return t in r},o=Object(o));for(var a=0,c=u.length;c>a;a++){var f=u[a],l=o[f];e(l,f,o)&&(i[f]=l)}return i},m.omit=function(n,t,r){if(m.isFunction(t))t=m.negate(t);else{var e=m.map(S(arguments,!1,!1,1),String);t=function(n,t){return!m.contains(e,t)}}return m.pick(n,t,r)},m.defaults=_(m.allKeys,!0),m.create=function(n,t){var r=j(n);return t&&m.extendOwn(r,t),r},m.clone=function(n){return m.isObject(n)?m.isArray(n)?n.slice():m.extend({},n):n},m.tap=function(n,t){return t(n),n},m.isMatch=function(n,t){var r=m.keys(t),e=r.length;if(null==n)return!e;for(var u=Object(n),i=0;e>i;i++){var o=r[i];if(t[o]!==u[o]||!(o in u))return!1}return!0};var N=function(n,t,r,e){if(n===t)return 0!==n||1/n==1/t;if(null==n||null==t)return n===t;n instanceof m&&(n=n._wrapped),t instanceof m&&(t=t._wrapped);var u=s.call(n);if(u!==s.call(t))return!1;switch(u){case\"[object RegExp]\":case\"[object String]\":return\"\"+n==\"\"+t;case\"[object Number]\":return+n!=+n?+t!=+t:0==+n?1/+n==1/t:+n==+t;case\"[object Date]\":case\"[object Boolean]\":return+n==+t}var i=\"[object Array]\"===u;if(!i){if(\"object\"!=typeof n||\"object\"!=typeof t)return!1;var o=n.constructor,a=t.constructor;if(o!==a&&!(m.isFunction(o)&&o instanceof o&&m.isFunction(a)&&a instanceof a)&&\"constructor\"in n&&\"constructor\"in t)return!1}r=r||[],e=e||[];for(var c=r.length;c--;)if(r[c]===n)return e[c]===t;if(r.push(n),e.push(t),i){if((c=n.length)!==t.length)return!1;for(;c--;)if(!N(n[c],t[c],r,e))return!1}else{var f,l=m.keys(n);if(c=l.length,m.keys(t).length!==c)return!1;for(;c--;)if(f=l[c],!m.has(t,f)||!N(n[f],t[f],r,e))return!1}return r.pop(),e.pop(),!0};m.isEqual=function(n,t){return N(n,t)},m.isEmpty=function(n){return null==n||(k(n)&&(m.isArray(n)||m.isString(n)||m.isArguments(n))?0===n.length:0===m.keys(n).length)},m.isElement=function(n){return!(!n||1!==n.nodeType)},m.isArray=h||function(n){return\"[object Array]\"===s.call(n)},m.isObject=function(n){var t=typeof n;return\"function\"===t||\"object\"===t&&!!n},m.each([\"Arguments\",\"Function\",\"String\",\"Number\",\"Date\",\"RegExp\",\"Error\"],function(n){m[\"is\"+n]=function(t){return s.call(t)===\"[object \"+n+\"]\"}}),m.isArguments(arguments)||(m.isArguments=function(n){return m.has(n,\"callee\")}),\"function\"!=typeof/./&&\"object\"!=typeof Int8Array&&(m.isFunction=function(n){return\"function\"==typeof n||!1}),m.isFinite=function(n){return isFinite(n)&&!isNaN(parseFloat(n))},m.isNaN=function(n){return m.isNumber(n)&&n!==+n},m.isBoolean=function(n){return!0===n||!1===n||\"[object Boolean]\"===s.call(n)},m.isNull=function(n){return null===n},m.isUndefined=function(n){return void 0===n},m.has=function(n,t){return null!=n&&p.call(n,t)},m.noConflict=function(){return u._=i,this},m.identity=function(n){return n},m.constant=function(n){return function(){return n}},m.noop=function(){},m.property=w,m.propertyOf=function(n){return null==n?function(){}:function(t){return n[t]}},m.matcher=m.matches=function(n){return n=m.extendOwn({},n),function(t){return m.isMatch(t,n)}},m.times=function(n,t,r){var e=Array(Math.max(0,n));t=b(t,r,1);for(var u=0;n>u;u++)e[u]=t(u);return e},m.random=function(n,t){return null==t&&(t=n,n=0),n+Math.floor(Math.random()*(t-n+1))},m.now=Date.now||function(){return(new Date).getTime()};var B={\"&\":\"&amp;\",\"<\":\"&lt;\",\">\":\"&gt;\",'\"':\"&quot;\",\"'\":\"&#x27;\",\"`\":\"&#x60;\"},T=m.invert(B),R=function(n){var t=function(t){return n[t]},r=\"(?:\"+m.keys(n).join(\"|\")+\")\",e=RegExp(r),u=RegExp(r,\"g\");return function(n){return n=null==n?\"\":\"\"+n,e.test(n)?n.replace(u,t):n}};m.escape=R(B),m.unescape=R(T),m.result=function(n,t,r){var e=null==n?void 0:n[t];return void 0===e&&(e=r),m.isFunction(e)?e.call(n):e};var q=0;m.uniqueId=function(n){var t=++q+\"\";return n?n+t:t},m.templateSettings={evaluate:/<%([\\s\\S]+?)%>/g,interpolate:/<%=([\\s\\S]+?)%>/g,escape:/<%-([\\s\\S]+?)%>/g};var K=/(.)^/,z={\"'\":\"'\",\"\\\\\":\"\\\\\",\"\\r\":\"r\",\"\\n\":\"n\",\"\\u2028\":\"u2028\",\"\\u2029\":\"u2029\"},D=/\\\\|'|\\r|\\n|\\u2028|\\u2029/g,L=function(n){return\"\\\\\"+z[n]};m.template=function(n,t,r){!t&&r&&(t=r),t=m.defaults({},t,m.templateSettings);var e=RegExp([(t.escape||K).source,(t.interpolate||K).source,(t.evaluate||K).source].join(\"|\")+\"|$\",\"g\"),u=0,i=\"__p+='\";n.replace(e,function(t,r,e,o,a){return i+=n.slice(u,a).replace(D,L),u=a+t.length,r?i+=\"'+\\n((__t=(\"+r+\"))==null?'':_.escape(__t))+\\n'\":e?i+=\"'+\\n((__t=(\"+e+\"))==null?'':__t)+\\n'\":o&&(i+=\"';\\n\"+o+\"\\n__p+='\"),t}),i+=\"';\\n\",t.variable||(i=\"with(obj||{}){\\n\"+i+\"}\\n\"),i=\"var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\\n\"+i+\"return __p;\\n\";try{var o=new Function(t.variable||\"obj\",\"_\",i)}catch(n){throw n.source=i,n}var a=function(n){return o.call(this,n,m)};return a.source=\"function(\"+(t.variable||\"obj\")+\"){\\n\"+i+\"}\",a},m.chain=function(n){var t=m(n);return t._chain=!0,t};var P=function(n,t){return n._chain?m(t).chain():t};m.mixin=function(n){m.each(m.functions(n),function(t){var r=m[t]=n[t];m.prototype[t]=function(){var n=[this._wrapped];return f.apply(n,arguments),P(this,r.apply(m,n))}})},m.mixin(m),m.each([\"pop\",\"push\",\"reverse\",\"shift\",\"sort\",\"splice\",\"unshift\"],function(n){var t=o[n];m.prototype[n]=function(){var r=this._wrapped;return t.apply(r,arguments),\"shift\"!==n&&\"splice\"!==n||0!==r.length||delete r[0],P(this,r)}}),m.each([\"concat\",\"join\",\"slice\"],function(n){var t=o[n];m.prototype[n]=function(){return P(this,t.apply(this._wrapped,arguments))}}),m.prototype.value=function(){return this._wrapped},m.prototype.valueOf=m.prototype.toJSON=m.prototype.value,m.prototype.toString=function(){return\"\"+this._wrapped},\"function\"==typeof define&&define.amd&&define(\"underscore\",[],function(){return m})}).call(this);</script> <script type=\"text/javascript\">THREE.SVGLoader=function(a){this.manager=void 0!==a?a:THREE.DefaultLoadingManager},THREE.SVGLoader.prototype={constructor:THREE.SVGLoader,load:function(a,e,o,r){var n=this,t=new DOMParser;new THREE.FileLoader(n.manager).load(a,function(a){var o=t.parseFromString(a,\"image/svg+xml\");e(o.documentElement)},o,r)}};</script> <script type=\"text/javascript\">\"use strict\";function earcut(e,n,r){r=r||2;var t=n&&n.length,i=t?n[0]*r:e.length,x=linkedList(e,0,i,r,!0),a=[];if(!x)return a;var o,l,u,s,v,f,y;if(t&&(x=eliminateHoles(e,n,x,r)),e.length>80*r){o=u=e[0],l=s=e[1];for(var d=r;d<i;d+=r)v=e[d],f=e[d+1],v<o&&(o=v),f<l&&(l=f),v>u&&(u=v),f>s&&(s=f);y=Math.max(u-o,s-l)}return earcutLinked(x,a,r,o,l,y),a}function linkedList(e,n,r,t,i){var x,a;if(i===signedArea(e,n,r,t)>0)for(x=n;x<r;x+=t)a=insertNode(x,e[x],e[x+1],a);else for(x=r-t;x>=n;x-=t)a=insertNode(x,e[x],e[x+1],a);return a&&equals(a,a.next)&&(removeNode(a),a=a.next),a}function filterPoints(e,n){if(!e)return e;n||(n=e);var r,t=e;do{if(r=!1,t.steiner||!equals(t,t.next)&&0!==area(t.prev,t,t.next))t=t.next;else{if(removeNode(t),(t=n=t.prev)===t.next)return null;r=!0}}while(r||t!==n);return n}function earcutLinked(e,n,r,t,i,x,a){if(e){!a&&x&&indexCurve(e,t,i,x);for(var o,l,u=e;e.prev!==e.next;)if(o=e.prev,l=e.next,x?isEarHashed(e,t,i,x):isEar(e))n.push(o.i/r),n.push(e.i/r),n.push(l.i/r),removeNode(e),e=l.next,u=l.next;else if((e=l)===u){a?1===a?(e=cureLocalIntersections(e,n,r),earcutLinked(e,n,r,t,i,x,2)):2===a&&splitEarcut(e,n,r,t,i,x):earcutLinked(filterPoints(e),n,r,t,i,x,1);break}}}function isEar(e){var n=e.prev,r=e,t=e.next;if(area(n,r,t)>=0)return!1;for(var i=e.next.next;i!==e.prev;){if(pointInTriangle(n.x,n.y,r.x,r.y,t.x,t.y,i.x,i.y)&&area(i.prev,i,i.next)>=0)return!1;i=i.next}return!0}function isEarHashed(e,n,r,t){var i=e.prev,x=e,a=e.next;if(area(i,x,a)>=0)return!1;for(var o=i.x<x.x?i.x<a.x?i.x:a.x:x.x<a.x?x.x:a.x,l=i.y<x.y?i.y<a.y?i.y:a.y:x.y<a.y?x.y:a.y,u=i.x>x.x?i.x>a.x?i.x:a.x:x.x>a.x?x.x:a.x,s=i.y>x.y?i.y>a.y?i.y:a.y:x.y>a.y?x.y:a.y,v=zOrder(o,l,n,r,t),f=zOrder(u,s,n,r,t),y=e.nextZ;y&&y.z<=f;){if(y!==e.prev&&y!==e.next&&pointInTriangle(i.x,i.y,x.x,x.y,a.x,a.y,y.x,y.y)&&area(y.prev,y,y.next)>=0)return!1;y=y.nextZ}for(y=e.prevZ;y&&y.z>=v;){if(y!==e.prev&&y!==e.next&&pointInTriangle(i.x,i.y,x.x,x.y,a.x,a.y,y.x,y.y)&&area(y.prev,y,y.next)>=0)return!1;y=y.prevZ}return!0}function cureLocalIntersections(e,n,r){var t=e;do{var i=t.prev,x=t.next.next;!equals(i,x)&&intersects(i,t,t.next,x)&&locallyInside(i,x)&&locallyInside(x,i)&&(n.push(i.i/r),n.push(t.i/r),n.push(x.i/r),removeNode(t),removeNode(t.next),t=e=x),t=t.next}while(t!==e);return t}function splitEarcut(e,n,r,t,i,x){var a=e;do{for(var o=a.next.next;o!==a.prev;){if(a.i!==o.i&&isValidDiagonal(a,o)){var l=splitPolygon(a,o);return a=filterPoints(a,a.next),l=filterPoints(l,l.next),earcutLinked(a,n,r,t,i,x),void earcutLinked(l,n,r,t,i,x)}o=o.next}a=a.next}while(a!==e)}function eliminateHoles(e,n,r,t){var i,x,a,o,l,u=[];for(i=0,x=n.length;i<x;i++)a=n[i]*t,o=i<x-1?n[i+1]*t:e.length,l=linkedList(e,a,o,t,!1),l===l.next&&(l.steiner=!0),u.push(getLeftmost(l));for(u.sort(compareX),i=0;i<u.length;i++)eliminateHole(u[i],r),r=filterPoints(r,r.next);return r}function compareX(e,n){return e.x-n.x}function eliminateHole(e,n){if(n=findHoleBridge(e,n)){var r=splitPolygon(n,e);filterPoints(r,r.next)}}function findHoleBridge(e,n){var r,t=n,i=e.x,x=e.y,a=-1/0;do{if(x<=t.y&&x>=t.next.y&&t.next.y!==t.y){var o=t.x+(x-t.y)*(t.next.x-t.x)/(t.next.y-t.y);if(o<=i&&o>a){if(a=o,o===i){if(x===t.y)return t;if(x===t.next.y)return t.next}r=t.x<t.next.x?t:t.next}}t=t.next}while(t!==n);if(!r)return null;if(i===a)return r.prev;var l,u=r,s=r.x,v=r.y,f=1/0;for(t=r.next;t!==u;)i>=t.x&&t.x>=s&&i!==t.x&&pointInTriangle(x<v?i:a,x,s,v,x<v?a:i,x,t.x,t.y)&&((l=Math.abs(x-t.y)/(i-t.x))<f||l===f&&t.x>r.x)&&locallyInside(t,e)&&(r=t,f=l),t=t.next;return r}function indexCurve(e,n,r,t){var i=e;do{null===i.z&&(i.z=zOrder(i.x,i.y,n,r,t)),i.prevZ=i.prev,i.nextZ=i.next,i=i.next}while(i!==e);i.prevZ.nextZ=null,i.prevZ=null,sortLinked(i)}function sortLinked(e){var n,r,t,i,x,a,o,l,u=1;do{for(r=e,e=null,x=null,a=0;r;){for(a++,t=r,o=0,n=0;n<u&&(o++,t=t.nextZ);n++);for(l=u;o>0||l>0&&t;)0===o?(i=t,t=t.nextZ,l--):0!==l&&t?r.z<=t.z?(i=r,r=r.nextZ,o--):(i=t,t=t.nextZ,l--):(i=r,r=r.nextZ,o--),x?x.nextZ=i:e=i,i.prevZ=x,x=i;r=t}x.nextZ=null,u*=2}while(a>1);return e}function zOrder(e,n,r,t,i){return e=32767*(e-r)/i,n=32767*(n-t)/i,e=16711935&(e|e<<8),e=252645135&(e|e<<4),e=858993459&(e|e<<2),e=1431655765&(e|e<<1),n=16711935&(n|n<<8),n=252645135&(n|n<<4),n=858993459&(n|n<<2),n=1431655765&(n|n<<1),e|n<<1}function getLeftmost(e){var n=e,r=e;do{n.x<r.x&&(r=n),n=n.next}while(n!==e);return r}function pointInTriangle(e,n,r,t,i,x,a,o){return(i-a)*(n-o)-(e-a)*(x-o)>=0&&(e-a)*(t-o)-(r-a)*(n-o)>=0&&(r-a)*(x-o)-(i-a)*(t-o)>=0}function isValidDiagonal(e,n){return e.next.i!==n.i&&e.prev.i!==n.i&&!intersectsPolygon(e,n)&&locallyInside(e,n)&&locallyInside(n,e)&&middleInside(e,n)}function area(e,n,r){return(n.y-e.y)*(r.x-n.x)-(n.x-e.x)*(r.y-n.y)}function equals(e,n){return e.x===n.x&&e.y===n.y}function intersects(e,n,r,t){return!!(equals(e,n)&&equals(r,t)||equals(e,t)&&equals(r,n))||area(e,n,r)>0!=area(e,n,t)>0&&area(r,t,e)>0!=area(r,t,n)>0}function intersectsPolygon(e,n){var r=e;do{if(r.i!==e.i&&r.next.i!==e.i&&r.i!==n.i&&r.next.i!==n.i&&intersects(r,r.next,e,n))return!0;r=r.next}while(r!==e);return!1}function locallyInside(e,n){return area(e.prev,e,e.next)<0?area(e,n,e.next)>=0&&area(e,e.prev,n)>=0:area(e,n,e.prev)<0||area(e,e.next,n)<0}function middleInside(e,n){var r=e,t=!1,i=(e.x+n.x)/2,x=(e.y+n.y)/2;do{r.y>x!=r.next.y>x&&r.next.y!==r.y&&i<(r.next.x-r.x)*(x-r.y)/(r.next.y-r.y)+r.x&&(t=!t),r=r.next}while(r!==e);return t}function splitPolygon(e,n){var r=new EarNode(e.i,e.x,e.y),t=new EarNode(n.i,n.x,n.y),i=e.next,x=n.prev;return e.next=n,n.prev=e,r.next=i,i.prev=r,t.next=r,r.prev=t,x.next=t,t.prev=x,t}function insertNode(e,n,r,t){var i=new EarNode(e,n,r);return t?(i.next=t.next,i.prev=t,t.next.prev=i,t.next=i):(i.prev=i,i.next=i),i}function removeNode(e){e.next.prev=e.prev,e.prev.next=e.next,e.prevZ&&(e.prevZ.nextZ=e.nextZ),e.nextZ&&(e.nextZ.prevZ=e.prevZ)}function EarNode(e,n,r){this.i=e,this.x=n,this.y=r,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function signedArea(e,n,r,t){for(var i=0,x=n,a=r-t;x<r;x+=t)i+=(e[a]-e[x])*(e[x+1]+e[a+1]),a=x;return i}earcut.deviation=function(e,n,r,t){var i=n&&n.length,x=i?n[0]*r:e.length,a=Math.abs(signedArea(e,0,x,r));if(i)for(var o=0,l=n.length;o<l;o++){var u=n[o]*r,s=o<l-1?n[o+1]*r:e.length;a-=Math.abs(signedArea(e,u,s,r))}var v=0;for(o=0;o<t.length;o+=3){var f=t[o]*r,y=t[o+1]*r,d=t[o+2]*r;v+=Math.abs((e[f]-e[d])*(e[y+1]-e[f+1])-(e[f]-e[y])*(e[d+1]-e[f+1]))}return 0===a&&0===v?0:Math.abs((v-a)/a)},earcut.flatten=function(e){for(var n=e[0][0].length,r={vertices:[],holes:[],dimensions:n},t=0,i=0;i<e.length;i++){for(var x=0;x<e[i].length;x++)for(var a=0;a<n;a++)r.vertices.push(e[i][x][a]);i>0&&(t+=e[i-1].length,r.holes.push(t))}return r};</script> <script type=\"text/javascript\">require=function e(t,n,r){function o(i,u){if(!n[i]){if(!t[i]){var l=\"function\"==typeof require&&require;if(!u&&l)return l(i,!0);if(s)return s(i,!0);var a=new Error(\"Cannot find module '\"+i+\"'\");throw a.code=\"MODULE_NOT_FOUND\",a}var c=n[i]={exports:{}};t[i][0].call(c.exports,function(e){var n=t[i][1][e];return o(n||e)},c,c.exports,e,t,n,r)}return n[i].exports}for(var s=\"function\"==typeof require&&require,i=0;i<r.length;i++)o(r[i]);return o}({1:[function(e,t,n){},{}],2:[function(e,t,n){var r,o,s,i=function(e,t){return(+e%(t=+t)+t)%t};s=e(\"./geom\"),o=e(\"./filter\"),r=n,r.edges_vertices_to_vertices_vertices_unsorted=function(e){return e.vertices_vertices=o.edges_vertices_to_vertices_vertices(e),e},r.edges_vertices_to_vertices_vertices_sorted=function(e){return r.edges_vertices_to_vertices_vertices_unsorted(e),r.sort_vertices_vertices(e)},r.sort_vertices_vertices=function(e){var t,n,o,i,u,l;if(2!==(null!=(n=e.vertices_coords)&&null!=(o=n[0])?o.length:void 0))throw new Error(\"sort_vertices_vertices: Vertex coordinates missing or not two dimensional\");null==e.vertices_vertices&&r.edges_vertices_to_vertices_vertices(e),i=e.vertices_vertices,u=[];for(l in i)t=i[l],u.push(s.sortByAngle(t,l,function(t){return e.vertices_coords[t]}));return u},r.vertices_vertices_to_faces_vertices=function(e){var t,n,r,o,u,l,a,c,f,p,d,g,v,h,m,_,y,x;f={},p=e.vertices_vertices;for(_ in p)for(c=p[_],_=parseInt(_),n=r=0,l=c.length;r<l;n=++r)h=c[n],f[h+\",\"+_]=c[i(n-1,c.length)];for(e.faces_vertices=[],d=function(){var e;e=[];for(u in f)e.push(u);return e}(),o=0,a=d.length;o<a;o++)if(m=d[o],null!=(y=f[m])){for(f[m]=null,g=m.split(\",\"),h=g[0],_=g[1],h=parseInt(h),_=parseInt(_),t=[h,_];y!==t[0];){if(null==y){console.warn(\"Confusion with face\",t);break}t.push(y),v=[_,y],h=v[0],_=v[1],y=f[h+\",\"+_],f[h+\",\"+_]=null}f[t[t.length-1]+\",\"+t[0]]=null,null!=y&&s.polygonOrientation(function(){var n,r,o;for(o=[],n=0,r=t.length;n<r;n++)x=t[n],o.push(e.vertices_coords[x]);return o}())>0&&e.faces_vertices.push(t)}return e},r.edges_vertices_to_faces_vertices=function(e){return r.edges_vertices_to_vertices_vertices_sorted(e),r.vertices_vertices_to_faces_vertices(e)},r.faces_vertices_to_edges=function(e){var t,n,r,o,s,i,u,l,a;e.edges_vertices=[],e.edges_faces=[],e.faces_edges=[],e.edges_assignment=[],n={},i=e.faces_vertices;for(r in i)a=i[r],r=parseInt(r),e.faces_edges.push(function(){var i,c,f;for(f=[],o=i=0,c=a.length;i<c;o=++i)u=a[o],u=parseInt(u),l=a[(o+1)%a.length],s=u<=l?u+\",\"+l:l+\",\"+u,s in n?t=n[s]:(t=n[s]=e.edges_vertices.length,u<=l?e.edges_vertices.push([u,l]):e.edges_vertices.push([l,u]),e.edges_faces.push([null,null]),e.edges_assignment.push(\"B\")),u<=l?e.edges_faces[t][0]=r:e.edges_faces[t][1]=r,f.push(t);return f}());return e},r.extensions={},r.converters={},r.getConverter=function(e,t){return e===t?function(e){return e}:r.converters[\"\"+e+t]},r.setConverter=function(e,t,n){return r.extensions[e]=!0,r.extensions[t]=!0,r.converters[\"\"+e+t]=n},r.convertFromTo=function(e,t,n){var o;if(\".\"!==t[0]&&(t=\".\"+t),\".\"!==n[0]&&(n=\".\"+n),null==(o=r.getConverter(t,n))){if(t===n)return e;throw new Error(\"No converter from \"+t+\" to \"+n)}return o(e)},r.convertFrom=function(e,t){return r.convertFromTo(e,t,\".fold\")},r.convertTo=function(e,t){return r.convertFromTo(e,\".fold\",t)},r.oripa=e(\"./oripa\")},{\"./filter\":3,\"./geom\":4,\"./oripa\":5}],3:[function(e,t,n){var r,o,s,i=[].indexOf||function(e){for(var t=0,n=this.length;t<n;t++)if(t in this&&this[t]===e)return t;return-1};s=e(\"./geom\"),o=n,o.edgesAssigned=function(e,t){var n,r,o,s,i;for(s=e.edges_assignment,i=[],n=r=0,o=s.length;r<o;n=++r)s[n]===t&&i.push(e.edges_vertices[n]);return i},o.mountainEdges=function(e){return o.edgesAssigned(e,\"M\")},o.valleyEdges=function(e){return o.edgesAssigned(e,\"V\")},o.flatEdges=function(e){return o.edgesAssigned(e,\"F\")},o.boundaryEdges=function(e){return o.edgesAssigned(e,\"B\")},o.unassignedEdges=function(e){return o.edgesAssigned(e,\"U\")},o.cutEdges=function(e){return o.edgesAssigned(e,\"C\")},o.keysStartingWith=function(e,t){var n,r;r=[];for(n in e)n.slice(0,t.length)===t&&r.push(n);return r},o.keysEndingWith=function(e,t){var n,r;r=[];for(n in e)n.slice(-t.length)===t&&r.push(n);return r},o.remapField=function(e,t,n){var r,s,i,u,l,a,c,f,p,d,g,v,h,m;for(g=[],s=u=0,c=n.length;u<c;s=++u)null!=(i=n[s])&&(g[i]=s);for(h=o.keysStartingWith(e,t+\"_\"),a=0,f=h.length;a<f;a++)l=h[a],e[l]=function(){var t,n,r;for(r=[],n=0,t=g.length;n<t;n++)v=g[n],r.push(e[l][v]);return r}();for(m=o.keysEndingWith(e,\"_\"+t),d=0,p=m.length;d<p;d++)l=m[d],e[l]=function(){var t,o,s,i;for(s=e[l],i=[],o=0,t=s.length;o<t;o++)r=s[o],i.push(function(){var e,t,o;for(o=[],t=0,e=r.length;t<e;t++)v=r[t],o.push(n[v]);return o}());return i}();return e},o.remapFieldSubset=function(e,t,n){var r,s,i;return r=0,s=function(){var e,t,o;for(o=[],e=0,t=n.length;e<t;e++)i=n[e],i?o.push(r++):o.push(null);return o}(),o.remapField(e,t,s)},o.removeDuplicateEdges_vertices=function(e){var t,n,r,s,i,u,l;return i={},n=0,s=function(){var o,s,a,c;for(a=e.edges_vertices,c=[],o=0,s=a.length;o<s;o++)t=a[o],u=t[0],l=t[1],r=u<l?u+\",\"+l:l+\",\"+u,r in i||(i[r]=n,n+=1),c.push(i[r]);return c}(),o.remapField(e,\"edges\",s)},o.edges_verticesIncident=function(e,t){var n,r,o;for(n=0,r=e.length;n<r;n++)if(o=e[n],i.call(t,o)>=0)return!0;return!1},r=function(){function e(e,t){var n,r,o,s,i,u;for(this.vertices_coords=e,this.epsilon=t,this.hash={},i=this.vertices_coords,u=r=0,s=i.length;r<s;u=++r)n=i[u],o=this.key(n),o in this.hash||(this.hash[o]=[]),this.hash[o].push(u)}return e.prototype.lookup=function(e){var t,n,r,o,i,u,l,a,c,f,p,d,g,v,h,m,_,y;for(g=e[0],m=e[1],v=Math.round(g/this.epsilon),_=Math.round(m/this.epsilon),a=[v,v-1,v+1],t=0,o=a.length;t<o;t++)for(h=a[t],c=[_,_-1,_+1],r=0,i=c.length;r<i;r++)for(y=c[r],n=h+\",\"+y,p=null!=(f=this.hash[n])?f:[],l=0,u=p.length;l<u;l++)if(d=p[l],this.epsilon>s.dist(this.vertices_coords[d],e))return d;return null},e.prototype.key=function(e){var t,n,r,o;return t=e[0],r=e[1],n=Math.round(t/this.epsilon),o=Math.round(r/this.epsilon),n+\",\"+o},e.prototype.insert=function(e){var t,n;return null!=(n=this.lookup(e))?n:(t=this.key(e),t in this.hash||(this.hash[t]=[]),this.hash[t].push(n=this.vertices_coords.length),this.vertices_coords.push(e),n)},e}(),o.collapseNearbyVertices=function(e,t){var n,s,i;return i=new r([],t),s=function(){var t,r,o,s;for(o=e.vertices_coords,s=[],t=0,r=o.length;t<r;t++)n=o[t],s.push(i.insert(n));return s}(),o.remapField(e,\"vertices\",s)},o.removeLoopEdges=function(e){var t;return o.remapFieldSubset(e,\"edges\",function(){var n,r,o,s;for(o=e.edges_vertices,s=[],n=0,r=o.length;n<r;n++)t=o[n],s.push(t[0]!==t[1]);return s}())},o.subdivideCrossingEdges_vertices=function(e,t){var n,u,l,a,c,f,p,d,g,v,h,m,_,y,x,b,w,M,A,T,k,L,S,I,O,F,H;for(M=e.vertices_coords,F=g=0,h=M.length;g<h;F=++g)for(w=M[F],A=e.edges_vertices,f=v=0,m=A.length;v<m;f=++v)l=A[f],i.call(l,F)>=0||(L=function(){var t,n,r;for(r=[],n=0,t=l.length;n<t;n++)O=l[n],r.push(e.vertices_coords[O]);return r}(),s.pointStrictlyInSegment(w,L)&&(e.edges_vertices.push([F,l[1]]),e.edges_assignment.push(e.edges_assignment[f]),e.edges_foldAngle.push(e.edges_foldAngle[f]),l[1]=F));for(o.removeDuplicateEdges_vertices(e),o.removeLoopEdges(e),H=new r(e.vertices_coords,t),T=e.edges_vertices,p=x=0,_=T.length;x<_;p=++x)for(a=T[p],S=function(){var t,n,r;for(r=[],n=0,t=a.length;n<t;n++)F=a[n],r.push(e.vertices_coords[F]);return r}(),k=e.edges_vertices.slice(0,p),d=b=0,y=k.length;b<y;d=++b)c=k[d],I=function(){var t,n,r;for(r=[],n=0,t=c.length;n<t;n++)F=c[n],r.push(e.vertices_coords[F]);return r}(),!o.edges_verticesIncident(a,c)&&s.segmentsCross(S,I)&&(n=s.lineIntersectLine(S,I),u=H.insert(n),i.call(a,u)>=0&&i.call(c,u)>=0||(i.call(a,u)<0&&(e.edges_vertices.push([u,a[1]]),e.edges_assignment.push(e.edges_assignment[p]),e.edges_foldAngle.push(e.edges_foldAngle[p]),a[1]=u),i.call(c,u)<0&&(e.edges_vertices.push([u,c[1]]),e.edges_assignment.push(e.edges_assignment[d]),e.edges_foldAngle.push(e.edges_foldAngle[d]),c[1]=u)));return e},o.edges_vertices_to_vertices_vertices=function(e){var t,n,r,o,s,i,u;i=[];for(var l=0;l<e.vertices_coords.length;l++)i.push([]);for(o=e.edges_vertices,n=0,r=o.length;n<r;n++)t=o[n],s=t[0],u=t[1],i[s].push(u),i[u].push(s);return i}},{\"./geom\":4}],4:[function(e,t,n){var r,o,s=function(e,t){return(+e%(t=+t)+t)%t};o=n,r=1e-6,o.sum=function(e,t){return e+t},o.min=function(e,t){return e<t?e:t},o.max=function(e,t){return e>t?e:t},o.all=function(e,t){return e&&t},o.next=function(e,t,n){return null==n&&(n=1),s(e+n,t)},o.rangesDisjoint=function(e,t){var n,r,o,s,i,u;return n=e[0],r=e[1],o=t[0],s=t[1],o<(i=Math.min(n,r))&&i>s||o>(u=Math.max(n,r))&&u<s},o.topologicalSort=function(e){var t,n,r,s,i,u,l;for(t=0,r=e.length;t<r;t++)l=e[t],u=[!1,null],l.visited=u[0],l.parent=u[1];for(i=[],n=0,s=e.length;n<s;n++)l=e[n],l.visited||(i=o.visit(l,i));return i},o.visit=function(e,t){var n,r,s,i;for(e.visited=!0,s=e.children,n=0,r=s.length;n<r;n++)i=s[n],i.visited||(i.parent=e,t=o.visit(i,t));return t.concat([e])},o.magsq=function(e){return o.dot(e,e)},o.mag=function(e){return Math.sqrt(o.magsq(e))},o.unit=function(e,t){var n;return null==t&&(t=r),n=o.magsq(e),n<t?null:o.mul(e,1/o.mag(e))},o.ang2D=function(e,t){return null==t&&(t=r),o.magsq(e)<t?null:Math.atan2(e[1],e[0])},o.mul=function(e,t){var n,r,o,s;for(s=[],r=0,o=e.length;r<o;r++)n=e[r],s.push(n*t);return s},o.linearInterpolate=function(e,t,n){return o.plus(o.mul(t,1-e),o.mul(n,e))},o.plus=function(e,t){var n,r,o,s,i;for(i=[],r=o=0,s=e.length;o<s;r=++o)n=e[r],i.push(n+t[r]);return i},o.sub=function(e,t){return o.plus(e,o.mul(t,-1))},o.dot=function(e,t){var n,r;return function(){var o,s,i;for(i=[],r=o=0,s=e.length;o<s;r=++o)n=e[r],i.push(n*t[r]);return i}().reduce(o.sum)},o.distsq=function(e,t){return o.magsq(o.sub(e,t))},o.dist=function(e,t){return Math.sqrt(o.distsq(e,t))},o.dir=function(e,t){return o.unit(o.sub(t,e))},o.ang=function(e,t){var n,r,s,i;return n=function(){var n,r,s,u;for(s=[e,t],u=[],n=0,r=s.length;n<r;n++)i=s[n],u.push(o.unit(i));return u}(),r=n[0],s=n[1],null==r||null==s?null:Math.acos(o.dot(r,s))},o.cross=function(e,t){var n,r,o,s;return e.length===(o=t.length)&&2===o?e[0]*t[1]-e[1]*t[0]:e.length===(s=t.length)&&3===s?function(){var o,s,i,u,l;for(i=[[1,2],[2,0],[0,1]],l=[],o=0,s=i.length;o<s;o++)u=i[o],n=u[0],r=u[1],l.push(e[n]*t[r]-e[r]*t[n]);return l}():null},o.parallel=function(e,t,n){var s,i,u,l;return null==n&&(n=r),s=function(){var n,r,s,i;for(s=[e,t],i=[],n=0,r=s.length;n<r;n++)l=s[n],i.push(o.unit(l));return i}(),i=s[0],u=s[1],null==i||null==u?null:1-Math.abs(o.dot(i,u))<n},o.rotate=function(e,t,n){var r,s,i,u,l,a,c,f,p,d;if(null==(t=o.unit(t)))return null;for(c=[Math.cos(n),Math.sin(n)],r=c[0],d=c[1],f=[[0,1,2],[1,2,0],[2,0,1]],p=[],i=0,u=f.length;i<u;i++)l=f[i],p.push(function(){var n,o,i,u;for(i=[r,-d*t[l[2]],d*t[l[1]]],u=[],s=n=0,o=i.length;n<o;s=++n)a=i[s],u.push(e[l[s]]*(t[l[0]]*t[l[s]]*(1-r)+a));return u}().reduce(o.sum));return p},o.interiorAngle=function(e,t,n){var r;return(r=o.ang2D(o.sub(e,t))-o.ang2D(o.sub(n,t)))+(r<0?2*Math.PI:0)},o.turnAngle=function(e,t,n){return Math.PI-o.interiorAngle(e,t,n)},o.triangleNormal=function(e,t,n){return o.unit(o.cross(o.sub(t,e),o.sub(n,t)))},o.polygonNormal=function(e,t){var n,s;return null==t&&(t=r),o.unit(function(){var t,r,i;for(i=[],n=t=0,r=e.length;t<r;n=++t)s=e[n],i.push(o.cross(s,e[o.next(n,e.length)]));return i}().reduce(o.plus))},o.twiceSignedArea=function(e){var t,n,r;return function(){var s,i,u;for(u=[],t=s=0,i=e.length;s<i;t=++s)n=e[t],r=e[o.next(t,e.length)],u.push(n[0]*r[1]-r[0]*n[1]);return u}().reduce(o.sum)},o.polygonOrientation=function(e){return Math.sign(o.twiceSignedArea(e))},o.sortByAngle=function(e,t,n){return null==t&&(t=[0,0]),null==n&&(n=function(e){return e}),t=n(t),e.sort(function(e,r){var s,i;return s=o.ang2D(o.sub(n(e),t)),i=o.ang2D(o.sub(n(r),t)),s-i})},o.segmentsCross=function(e,t){var n,r,s,i;return n=e[0],s=e[1],r=t[0],i=t[1],!o.rangesDisjoint([n[0],s[0]],[r[0],i[0]])&&!o.rangesDisjoint([n[1],s[1]],[r[1],i[1]])&&(o.polygonOrientation([n,s,r])!==o.polygonOrientation([n,s,i])&&o.polygonOrientation([r,i,n])!==o.polygonOrientation([r,i,s]))},o.parametricLineIntersect=function(e,t){var n,r,o,s,i;return r=e[0],o=e[1],s=t[0],i=t[1],n=(i[1]-s[1])*(o[0]-r[0])+(s[0]-i[0])*(o[1]-r[1]),0===n?[null,null]:[(i[0]*(r[1]-s[1])+i[1]*(s[0]-r[0])+s[1]*r[0]-r[1]*s[0])/n,(s[0]*(o[1]-r[1])+s[1]*(r[0]-o[0])+r[1]*o[0]-o[1]*r[0])/n]},o.segmentIntersectSegment=function(e,t){var n,r,s;return n=o.parametricLineIntersect(e,t),r=n[0],s=n[1],null!=r&&0<=r&&r<=1&&0<=s&&s<=1?o.linearInterpolate(r,e[0],e[1]):null},o.lineIntersectLine=function(e,t){var n,r;return n=o.parametricLineIntersect(e,t),r=n[0],n[1],null!=r?o.linearInterpolate(r,e[0],e[1]):null},o.pointStrictlyInSegment=function(e,t,n){var s,i;return null==n&&(n=r),s=o.sub(e,t[0]),i=o.sub(e,t[1]),o.parallel(s,i,n)&&o.dot(s,i)<0},o.centroid=function(e){return o.mul(e.reduce(o.plus),1/e.length)},o.basis=function(e,t){var n,s,i,u,l,a,c,f;return null==t&&(t=r),function(){var t,n,r;for(r=[],t=0,n=e.length;t<n;t++)l=e[t],r.push(3!==l.length);return r}().reduce(o.all)?null:(s=function(){var n,r,s;for(s=[],n=0,r=e.length;n<r;n++)l=e[n],o.distsq(l,e[0])>t&&s.push(o.dir(l,e[0]));return s}(),0===s.length?[]:(a=s[0],function(){var e,r,i;for(i=[],e=0,r=s.length;e<r;e++)n=s[e],i.push(o.parallel(n,a,t));return i}().reduce(o.all)?[a]:(u=function(){var e,t,r;for(r=[],e=0,t=s.length;e<t;e++)n=s[e],r.push(o.unit(o.cross(n,a)));return r}(),u=function(){var e,t,n;for(n=[],e=0,t=u.length;e<t;e++)null!=(i=u[e])&&n.push(i);return n}(),f=u[0],c=o.cross(f,a),function(){var e,n,r;for(r=[],e=0,n=u.length;e<n;e++)i=u[e],r.push(o.parallel(i,f,t));return r}().reduce(o.all)?[a,c]:[a,c,f])))},o.above=function(e,t,n,s){var i,u,l,a,c;return null==s&&(s=r),l=function(){var r,s,i,u;for(i=[e,t],u=[],r=0,s=i.length;r<s;r++)c=i[r],u.push(function(){var e,t,r;for(r=[],e=0,t=c.length;e<t;e++)a=c[e],r.push(o.dot(a,n));return r}());return u}(),i=l[0],u=l[1],u.reduce(o.max)-i.reduce(o.min)<s?1:i.reduce(o.max)-u.reduce(o.min)<s?-1:0},o.separatingDirection2D=function(e,t,n,s){var i,u,l,a,c,f,p,d,g,v,h,m,_,y;for(null==s&&(s=r),m=[e,t],l=0,c=m.length;l<c;l++)for(y=m[l],i=a=0,f=y.length;a<f;i=++a)for(v=y[i],u=g=0,p=y.length;g<p;u=++g)if(h=y[u],i<u&&null!=(d=o.unit(o.cross(o.sub(v,h),n)))&&0!==(_=o.above(e,t,d,s)))return o.mul(d,_);return null},o.separatingDirection3D=function(e,t,n){var s,i,u,l,a,c,f,p,d,g,v,h,m,_,y,x,b,w,M;for(null==n&&(n=r),y=[[e,t],[t,e]],u=0,a=y.length;u<a;u++)for(x=y[u],w=x[0],M=x[1],l=0,c=w.length;l<c;l++)for(v=w[l],s=g=0,f=M.length;g<f;s=++g)for(h=M[s],i=_=0,p=M.length;_<p;i=++_)if(m=M[i],s<i&&null!=(d=o.unit(o.cross(o.sub(v,h),o.sub(v,m))))&&0!==(b=o.above(e,t,d,n)))return o.mul(d,b);return null},o.circleCross=function(e,t,n){var r,o;return r=(e*e-n*n+t*t)/e/2,o=Math.sqrt(t*t-r*r),[r,o]},o.creaseDir=function(e,t,n,s,i){var u,l,a,c,f,p;return null==i&&(i=r),u=Math.cos(n)+Math.cos(s),l=Math.cos(n)-Math.cos(s),a=o.plus(e,t),c=o.sub(e,t),f=o.unit(o.cross(c,a)),a=o.mul(a,u/o.magsq(a)),c=o.mul(c,o.magsq(c)<i?0:l/o.magsq(c)),p=Math.sqrt(1-o.magsq(a)-o.magsq(c)),f=o.mul(f,p),[a,c,f].reduce(o.plus)},o.quadSplit=function(e,t,n,r){if(o.magsq(t)>n*n)throw new Error(\"STOP! Trying to split expansive quad.\");return o.mul(e,(n*n-o.magsq(t))/2/(n*Math.cos(r)-o.dot(e,t)))}},{}],5:[function(e,t,n){var r,o,s,i,u,l,a;void 0!==r&&null!==r||(r=e(\"xmldom\").DOMParser),o=e(\"./convert\"),s=e(\"./filter\"),i=n,i.type2fold={0:\"F\",1:\"B\",2:\"M\",3:\"V\"},i.fold2type={},u=i.type2fold;for(l in u)a=u[l],i.fold2type[a]=l;i.fold2type_default=0,i.prop_xml2fold={editorName:\"frame_author\",originalAuthorName:\"frame_designer\",reference:\"frame_reference\",title:\"frame_title\",memo:\"frame_description\",paperSize:null,mainVersion:null,subVersion:null},i.POINT_EPS=1,i.toFold=function(e){var t,n,u,l,a,c,f,p,d,g,v,h,m,_,y,x,b,w,M,A,T,k,L,S,I,O,F,H,E,N,q,P,C,D;for(n={vertices_coords:[],edges_vertices:[],edges_assignment:[],file_creator:\"oripa2fold\"},E=function(e,t){var r;return r=n.vertices_coords.length,n.vertices_coords.push([parseFloat(e),parseFloat(t)]),r},y=function(e,t,n,r){return null!=t&&e.tagName!==t?(console.warn(\"ORIPA file has \"+e.tagName+\" where \"+t+\" was expected\"),null):null==n||e.hasAttribute(n)&&(null==r||e.getAttribute(n)===r)?e:(console.warn(\"ORIPA file has \"+e.tagName+\" with \"+n+\" = \"+e.getAttribute(n)+\" where \"+r+\" was expected\"),null)},t=function(e){var t,n,r,o,s;if(e){for(o=e.childNodes,s=[],n=0,r=o.length;n<r;n++)t=o[n],1===t.nodeType&&s.push(t);return s}return[]},b=function(e,n,r,o){var s;return s=t(e),1!==s.length?(console.warn(\"ORIPA file has \"+e.tagName+\" with \"+e.childNodes.length+\" children, not 1\"),null):y(s[0],n,r,o)},w=function(e){var t;return e.childNodes.length>1?(console.warn(\"ORIPA file has \"+e.tagName+\" with \"+e.childNodes.length+\" children, not 0 or 1\"),null):0===e.childNodes.length?\"\":(t=e.childNodes[0],3!==t.nodeType?console.warn(\"ORIPA file has nodeType \"+t.nodeType+\" where 3 (text) was expected\"):t.data)},P=(new r).parseFromString(e,\"text/xml\"),T=t(P.documentElement),u=0,c=T.length;u<c;u++)if(F=T[u],y(F,\"object\",\"class\",\"oripa.DataSet\"))for(k=t(F),l=0,f=k.length;l<f;l++)if(A=k[l],\"lines\"===A.getAttribute(\"property\")){for(h=b(A,\"array\",\"class\",\"oripa.OriLineProxy\"),L=t(h),a=0,p=L.length;a<p;a++)if(v=L[a],y(v,\"void\",\"index\"))for(S=t(v),m=0,d=S.length;m<d;m++)if(x=S[m],y(x,\"object\",\"class\",\"oripa.OriLineProxy\")){for(N=q=C=D=H=0,I=t(x),_=0,g=I.length;_<g;_++)if(O=I[_],y(O,\"void\",\"property\"))switch(O.getAttribute(\"property\")){case\"x0\":N=w(b(O,\"double\"));break;case\"x1\":q=w(b(O,\"double\"));break;case\"y0\":C=w(b(O,\"double\"));break;case\"y1\":D=w(b(O,\"double\"));break;case\"type\":H=w(b(O,\"int\"))}null!=N&&null!=q&&null!=C&&null!=D?(n.edges_vertices.push([E(N,C),E(q,D)]),null!=H&&(H=parseInt(H)),n.edges_assignment.push(i.type2fold[H])):console.warn(\"ORIPA line has missing data: \"+N+\" \"+q+\" \"+C+\" \"+D+\" \"+H)}}else A.getAttribute(\"property\")in i.prop_xml2fold?null!=(M=i.prop_xml2fold[A.getAttribute(\"property\")])&&(n[M]=w(b(A,\"string\"))):console.warn(\"Ignoring \"+A.tagName+\" \"+F.getAttribute(\"property\")+\" in ORIPA file\");return s.collapseNearbyVertices(n,i.POINT_EPS),s.subdivideCrossingEdges_vertices(n,i.POINT_EPS),o.edges_vertices_to_faces_vertices(n),n},i.fromFold=function(e){var t,n,r,o,s,u,l,a,c,f,p,d,g,v,h;\"string\"==typeof e&&(e=JSON.parse(e)),p='<?xml version=\"1.0\" encoding=\"UTF-8\"?> \\n<java version=\"1.5.0_05\" class=\"java.beans.XMLDecoder\"> \\n <object class=\"oripa.DataSet\"> \\n  <void property=\"mainVersion\"> \\n   <int>1</int> \\n  </void> \\n  <void property=\"subVersion\"> \\n   <int>1</int> \\n  </void> \\n  <void property=\"paperSize\"> \\n   <double>400.0</double> \\n  </void> \\n',f=i.prop_xml2fold;for(v in f)o=f[v],p+=('.\\n  <void property=\"'+v+'\"> \\n   <string>'+(e[o]||\"\")+\"</string> \\n  </void> \\n\").slice(2);for(h=0,c=function(){var o,s,u,l;for(u=e.edges_vertices,l=[],r=o=0,s=u.length;o<s;r=++o)n=u[r],g=function(){var r,o,s,i,u,l;for(l=[],r=0,s=n.length;r<s;r++){for(d=n[r],u=e.vertices_coords[d].slice(2),o=0,i=u.length;o<i;o++)0!==(t=u[o])&&(h+=1);l.push(e.vertices_coords[d])}return l}(),l.push({x0:g[0][0],y0:g[0][1],x1:g[1][0],y1:g[1][1],type:i.fold2type[e.edges_assignment[r]]||i.fold2type_default});return l}(),p+=('.\\n  <void property=\"lines\"> \\n   <array class=\"oripa.OriLineProxy\" length=\"'+c.length+'\"> \\n').slice(2),s=u=0,l=c.length;u<l;s=++u)a=c[s],p+=('.\\n    <void index=\"'+s+'\"> \\n     <object class=\"oripa.OriLineProxy\"> \\n      <void property=\"type\"> \\n       <int>'+a.type+'</int> \\n      </void> \\n      <void property=\"x0\"> \\n       <double>'+a.x0+'</double> \\n      </void> \\n      <void property=\"x1\"> \\n       <double>'+a.x1+'</double> \\n      </void> \\n      <void property=\"y0\"> \\n       <double>'+a.y0+'</double> \\n      </void> \\n      <void property=\"y1\"> \\n       <double>'+a.y1+\"</double> \\n      </void> \\n     </object> \\n    </void> \\n\").slice(2);return p+=\".\\n   </array> \\n  </void> \\n </object> \\n</java> \\n\".slice(2)},o.setConverter(\".fold\",\".opx\",i.fromFold),o.setConverter(\".opx\",\".fold\",i.toFold)},{\"./convert\":2,\"./filter\":3,xmldom:1}],6:[function(e,t,n){var r,o,s,i,u;i=e(\"./geom\"),u=n,o={vert:\"fill: white; r: 0.03; stroke: black; stroke-width: 0.005;\",face:\"stroke: none; fill-opacity: 0.8;\",top:\"fill: cyan;\",bot:\"fill: yellow;\",edge:\"fill: none; stroke-width: 0.01; stroke-linecap: round;\",axis:\"fill: none; stroke-width: 0.01; stroke-linecap: round;\",text:\"fill: black; font-size: 0.04; text-anchor: middle; font-family: sans-serif;\",B:\"stroke: black;\",V:\"stroke: blue;\",M:\"stroke: red;\",U:\"stroke: white;\",F:\"stroke: gray;\",ax:\"stroke: blue;\",ay:\"stroke: red;\",az:\"stroke: green;\"},u.setAttrs=function(e,t){var n,r;for(n in t)r=t[n],e.setAttribute(n,r);return e},u.appendHTML=function(e,t,n){return e.appendChild(u.setAttrs(document.createElement(t),n))},s=\"http://www.w3.org/2000/svg\",u.appendSVG=function(e,t,n){return e.appendChild(u.setAttrs(document.createElementNS(s,t),n))},u.makePath=function(e){var t,n;return function(){var r,o,s;for(s=[],n=r=0,o=e.length;r<o;n=++r)t=e[n],s.push((0===n?\"M\":\"L\")+\" \"+t[0]+\" \"+t[1]+\" \");return s}().reduce(i.sum)},u.processInput=function(e,t){var n;if(t.fold=JSON.parse(e),t.model=u.makeModel(t.fold),u.addRotation(t),u.draw(t),u.update(t),t.opts.properties){t.properties.innerHTML=\"\";for(n in t.fold)t.opts.properties&&(u.appendHTML(t.properties,\"option\",{value:n}).innerHTML=n);return u.updateProperties(t)}},u.updateProperties=function(e){var t,n;return n=e.fold[e.properties.value],t=null!=n.length?n.length+\" elements: \":\"\",e.data.innerHTML=t+JSON.stringify(n)},u.importURL=function(e,t){var n;return n=new XMLHttpRequest,n.onload=function(e){return function(e){return u.processInput(e.target.responseText,t)}}(),n.open(\"GET\",e),n.send()},u.importFile=function(e,t){var n;return n=new FileReader,n.onload=function(e){return function(e){return u.processInput(e.target.result,t)}}(),n.readAsText(e)},r={viewButtons:!0,axisButtons:!0,attrViewer:!0,examples:!0,import:!0,export:!0,properties:!0},u.addViewer=function(e,t){var n,o,i,l,a,c,f,p,d,g,v,h,m,_;null==t&&(t={}),_={cam:u.initCam(),opts:r};for(l in t)h=t[l],_.opts[l]=h;if(_.opts.viewButtons){v=u.appendHTML(e,\"div\"),v.innerHtml=\"\",v.innerHtml+=\"Toggle: \",f=_.cam.show;for(l in f)h=f[l],g=u.appendHTML(v,\"input\",{type:\"checkbox\",value:l}),h&&g.setAttribute(\"checked\",\"\"),v.innerHTML+=l+\" \"}if(_.opts.axisButtons)for(n=u.appendHTML(e,\"div\"),n.innerHTML+=\"View: \",p=[\"x\",\"y\",\"z\"],o=a=0,c=p.length;a<c;o=++a)m=p[o],u.appendHTML(n,\"input\",{type:\"button\",value:m});return _.opts.properties&&(n.innerHTML+=\" Property:\",_.properties=u.appendHTML(n,\"select\"),_.data=u.appendHTML(n,\"div\",{style:\"width: 300; padding: 10px; overflow: auto; border: 1px solid black; display: inline-block; white-space: nowrap;\"})),(_.opts.examples||_.opts.import)&&(i=u.appendHTML(e,\"div\"),_.opts.examples&&(i.innerHTML=\"Example: \",d=u.appendHTML(i,\"select\"),u.appendHTML(d,\"option\",{value:\"../examples/simple.fold\"}).innerHTML=\"Default\",u.appendHTML(d,\"option\",{value:\"../examples/box.fold\"}).innerHTML=\"Flexicube Unit\",u.appendHTML(d,\"option\",{value:\"../examples/squaretwist.fold\"}).innerHTML=\"Square Twist\",u.importURL(d.value,_)),_.opts.import&&(i.innerHTML+=\" Import: \",u.appendHTML(i,\"input\",{type:\"file\"}))),e.onclick=function(e){return function(e){if(\"checkbox\"===e.target.type&&(e.target.hasAttribute(\"checked\")?e.target.removeAttribute(\"checked\"):e.target.setAttribute(\"checked\",\"\"),_.cam.show[e.target.value]=e.target.hasAttribute(\"checked\"),u.update(_)),\"button\"===e.target.type){switch(e.target.value){case\"x\":u.setCamXY(_.cam,[0,1,0],[0,0,1]);break;case\"y\":u.setCamXY(_.cam,[0,0,1],[1,0,0]);break;case\"z\":u.setCamXY(_.cam,[1,0,0],[0,1,0])}return u.update(_)}}}(),e.onchange=function(e){return function(e){if(\"file\"===e.target.type&&u.importFile(e.target.files[0],_),\"select-one\"===e.target.type)return e.target===_.properties?u.updateProperties(_):u.importURL(e.target.value,_)}}(),_.svg=u.appendSVG(e,\"svg\",{xmlns:s,width:600}),_},u.initCam=function(){return{c:[0,0,0],x:[1,0,0],y:[0,1,0],z:[0,0,1],r:1,last:null,show:{Faces:!0,Edges:!0,Vertices:!1,\"Face Text\":!1}}},u.proj=function(e,t){var n;return n=i.mul(i.sub(e,t.c),1/t.r),[i.dot(n,t.x),-i.dot(n,t.y),0]},u.setCamXY=function(e,t,n){var r;return r=[t,n,i.cross(t,n)],e.x=r[0],e.y=r[1],e.z=r[2],r},u.addRotation=function(e){var t,n,r,o,s,i;for(i=e.svg,t=e.cam,o=[\"contextmenu\",\"selectstart\",\"dragstart\"],n=0,r=o.length;n<r;n++)s=o[n],i[\"on\"+s]=function(e){return e.preventDefault()};return i.onmousedown=function(e){return function(e){return t.last=[e.clientX,e.clientY]}}(),i.onmousemove=function(t){return function(t){return u.rotateCam([t.clientX,t.clientY],e)}}(),i.onmouseup=function(n){return function(n){return u.rotateCam([n.clientX,n.clientY],e),t.last=null}}()},u.rotateCam=function(e,t){var n,r,o,s,l,a,c;if(n=t.cam,null!=n.last&&(r=i.sub(e,n.last),!(!i.mag(r)>0)))return l=i.unit(i.plus(i.mul(n.x,-r[1]),i.mul(n.y,-r[0]))),s=function(){var e,t,s,u;for(s=[\"x\",\"y\"],u=[],e=0,t=s.length;e<t;e++)o=s[e],u.push(i.rotate(n[o],l,.01*i.mag(r)));return u}(),a=s[0],c=s[1],u.setCamXY(n,a,c),n.last=e,u.update(t)},u.makeModel=function(e){var t,n,r,o,s,u,l,a,c,f,p,d,g,v,h,m,_,y,x,b,w,M,A,T,k,L,S,I,O,F,H,E,N,q,P,C,D;for(w={vs:null,fs:null,es:{}},w.vs=function(){var t,n,r,s;for(r=e.vertices_coords,s=[],c=t=0,n=r.length;t<n;c=++t)o=r[c],s.push({i:c,cs:o});return s}(),k=w.vs,c=v=0,h=k.length;v<h;c=++v)q=k[c],2===q.cs.length&&(w.vs[c].cs[2]=0);if(w.fs=function(){var t,n,r,o;for(r=e.faces_vertices,o=[],c=n=0,t=r.length;n<t;c=++n)P=r[c],o.push({i:c,vs:function(){var e,t,n;for(t=[],n=0,e=P.length;n<e;n++)q=P[n],t.push(w.vs[q]);return t}()});return o}(),null!=e.edges_vertices)for(L=e.edges_vertices,c=T=0,m=L.length;T<m;c=++T)q=L[c],S=q[0]>q[1]?[q[1],q[0]]:[q[0],q[1]],t=S[0],r=S[1],n=null!=e.edges_assignment[c]?e.edges_assignment[c]:\"U\",w.es[\"e\"+t+\"e\"+r]={v1:w.vs[t],v2:w.vs[r],as:n};else for(I=w.fs,c=D=0,_=I.length;D<_;c=++D)for(u=I[c],O=u.vs,p=f=0,y=O.length;f<y;p=++f)q=O[p],C=u.vs[i.next(p,u.vs.length)],F=q.i>C.i?[C,q]:[q,C],t=F[0],r=F[1],w.es[\"e\"+t.i+\"e\"+r.i]={v1:t,v2:r,as:\"U\"};for(H=w.fs,c=d=0,x=H.length;d<x;c=++d)u=H[c],w.fs[c].n=i.polygonNormal(function(){var e,t,n,r;for(n=u.vs,r=[],e=0,t=n.length;e<t;e++)q=n[e],r.push(q.cs);return r}()),w.fs[c].c=i.centroid(function(){var e,t,n,r;for(n=u.vs,r=[],e=0,t=n.length;e<t;e++)q=n[e],r.push(q.cs);return r}()),w.fs[c].es={},w.fs[c].es=function(){var e,n,o,l,a;for(o=u.vs,a=[],p=e=0,n=o.length;e<n;p=++e)q=o[p],C=u.vs[i.next(p,u.vs.length)],l=q.i>C.i?[C,q]:[q,C],t=l[0],r=l[1],s=w.es[\"e\"+t.i+\"e\"+r.i],null==s&&(s={v1:t,v2:r,as:\"U\"}),a.push(s);return a}(),w.fs[c].ord={};if(null!=e.faceOrders)for(E=e.faceOrders,g=0,b=E.length;g<b;g++)N=E[g],l=N[0],a=N[1],A=N[2],0!==A&&(i.parallel(w.fs[l].n,w.fs[a].n)?(M=i.dot(w.fs[l].n,w.fs[a].n)>0?1:-1,null!=w.fs[l].ord[\"f\"+a]?(console.log(\"Warning: duplicate ordering input information for faces \"+l+\" and \"+a+\". Using first found in the faceOrder list.\"),w.fs[l].ord[\"f\"+a]!==A&&console.log(\"Error: duplicat ordering [\"+l+\",\"+a+\",\"+A+\"] is inconsistant with a previous entry.\")):(w.fs[l].ord[\"f\"+a]=A,w.fs[a].ord[\"f\"+l]=-A*M)):console.log(\"Warning: order for non-parallel faces [\"+l+\",\"+a+\"]\"));return w},u.faceAbove=function(e,t,n){var r,o,s,u,l,a,c,f,p,d,g;if(c=function(){var n,r,o,i;for(o=[e,t],i=[],n=0,r=o.length;n<r;n++)s=o[n],i.push(function(){var e,t,n,r;for(n=s.vs,r=[],t=0,e=n.length;t<e;t++)p=n[t],r.push(p.ps);return r}());return i}(),l=c[0],a=c[1],null!=i.separatingDirection2D(l,a,[0,0,1]))return null;if(f=function(){var n,r,o,i;for(o=[e,t],i=[],n=0,r=o.length;n<r;n++)s=o[n],i.push(function(){var e,t,n,r;for(n=s.vs,r=[],t=0,e=n.length;t<e;t++)p=n[t],r.push(p.cs);return r}());return i}(),d=f[0],g=f[1],r=i.basis(d.concat(g)),3===r.length){if(null!=(o=i.separatingDirection3D(d,g)))return 0>i.dot(n,o);console.log(\"Warning: faces \"+e.i+\" and \"+t.i+\" properly intersect. Ordering is unresolved.\")}return 2===r.length&&null!=(u=e.ord[\"f\"+t.i])?0>i.dot(t.n,n)*u:null},u.orderFaces=function(e){var t,n,r,o,s,l,a,c,f,p,d,g,v,h,m,_,y,x,b,w,M,A,T,k;for(a=e.model.fs,n=i.mul(e.cam.z,-1),g=0,v=a.length;g<v;g++)r=a[g],r.children=[];for(c=b=0,h=a.length;b<h;c=++b)for(o=a[c],p=k=0,m=a.length;k<m;p=++k)l=a[p],c<p&&null!=(s=u.faceAbove(o,l,n))&&(w=s?[o,l]:[l,o],x=w[0],t=w[1],x.children=x.children.concat([t]));for(e.model.fs=i.topologicalSort(a),M=e.model.fs,f=0,_=M.length;f<_;f++)r=M[f],r.g.parentNode.removeChild(r.g);for(A=e.model.fs,T=[],d=0,y=A.length;d<y;d++)r=A[d],T.push(e.svg.appendChild(r.g));return T},u.draw=function(e){var t,n,r,s,l,a,c,f,p,d,g,v,h,m,_,y,x,b,w,M,A,T,k,L,S,I;k=e.svg,n=e.cam,_=e.model,k.innerHTML=\"\",T=u.appendSVG(k,\"style\");for(c in o)S=o[c],T.innerHTML+=\".\"+c+\"{\"+S+\"}\\n\";for(m=function(){var e,t,n,r;for(n=[0,1,2],r=[],e=0,t=n.length;e<t;e++)s=n[e],r.push(function(){var e,t,n,r;for(n=_.vs,r=[],t=0,e=n.length;t<e;t++)S=n[t],r.push(S.cs[s]);return r}().reduce(i.min));return r}(),h=function(){var e,t,n,r;for(n=[0,1,2],r=[],e=0,t=n.length;e<t;e++)s=n[e],r.push(function(){var e,t,n,r;for(n=_.vs,r=[],t=0,e=n.length;t<e;t++)S=n[t],r.push(S.cs[s]);return r}().reduce(i.max));return r}(),n.c=i.mul(i.plus(m,h),.5),n.r=i.mag(i.sub(h,m))/2*1.05,t=u.proj(n.c,n),u.setAttrs(k,{viewBox:\"-1,-1,2,2\"}),L=\"translate(0,0.01)\",x=_.fs,s=f=0,p=x.length;f<p;s=++f){for(r=x[s],r.g=u.appendSVG(k,\"g\"),r.path=u.appendSVG(r.g,\"path\"),r.text=u.appendSVG(r.g,\"text\",{class:\"text\",transform:L}),r.text.innerHTML=\"f\"+r.i,r.eg=[],b=r.es,a=y=0,d=b.length;y<d;a=++y)b[a],r.eg[a]=u.appendSVG(r.g,\"path\");for(r.vg=[],w=r.vs,a=I=0,g=w.length;I<g;a=++I)S=w[a],r.vg[a]=u.appendSVG(r.g,\"g\"),r.vg[a].path=u.appendSVG(r.vg[a],\"circle\",{class:\"vert\"}),r.vg[a].text=u.appendSVG(r.vg[a],\"text\",{transform:\"translate(0, 0.01)\",class:\"text\"}),r.vg[a].text.innerHTML=\"\"+S.i}for(n.axis=u.appendSVG(k,\"g\",{transform:\"translate(-0.9,-0.9)\"}),M=[\"x\",\"y\",\"z\"],A=[],l=0,v=M.length;l<v;l++)t=M[l],A.push(n.axis[t]=u.appendSVG(n.axis,\"path\",{id:\"a\"+t,class:\"a\"+t+\" axis\"}));return A},u.update=function(e){var t,n,r,o,s,l,a,c,f,p,d,g,v,h,m,_,y,x,b,w,M,A,T,k,L,S,I,O,F,H,E;for(y=e.model,n=e.cam,e.svg,w=y.vs,l=d=0,g=w.length;d<g;l=++d)F=w[l],y.vs[l].ps=u.proj(F.cs,n);for(M=y.fs,l=b=0,v=M.length;b<v;l=++b)s=M[l],y.fs[l].c2=u.proj(s.c,n);u.orderFaces(e),O={},A=n.show;for(p in A)F=A[p],O[p]=F?\"visible\":\"hidden\";for(T=y.fs,l=E=0,h=T.length;E<h;l=++E)if(s=T[l],null!=s.path){for(H=i.dot(s.n,n.z)>0?\"top\":\"bot\",u.setAttrs(s.text,{x:s.c2[0],y:s.c2[1],visibility:O[\"Face Text\"]}),u.setAttrs(s.path,{d:u.makePath(function(){var e,t,n,r;for(n=s.vs,r=[],e=0,t=n.length;e<t;e++)F=n[e],r.push(F.ps);return r}())+\"Z\",visibility:O.Faces,class:\"face \"+H}),k=s.es,c=a=0,m=k.length;a<m;c=++a)r=k[c],u.setAttrs(s.eg[c],{d:u.makePath([r.v1.ps,r.v2.ps]),visibility:O.Edges,class:\"edge \"+r.as});for(L=s.vs,c=f=0,_=L.length;f<_;c=++f)F=L[c],u.setAttrs(s.vg[c],{visibility:O.Vertices}),u.setAttrs(s.vg[c].path,{cx:F.ps[0],cy:F.ps[1]}),u.setAttrs(s.vg[c].text,{x:F.ps[0],y:F.ps[1]})}S={x:[1,0,0],y:[0,1,0],z:[0,0,1]},I=[];for(t in S)F=S[t],o=i.plus(i.mul(F,.05*n.r),n.c),I.push(u.setAttrs(n.axis[t],{d:u.makePath(function(){var e,t,r,s;for(r=[n.c,o],s=[],e=0,t=r.length;e<t;e++)x=r[e],s.push(u.proj(x,n));return s}())}));return I}},{\"./geom\":4}],fold:[function(e,t,n){t.exports={geom:e(\"./geom\"),viewer:e(\"./viewer\"),filter:e(\"./filter\"),convert:e(\"./convert\"),file:e(\"./file\")}},{\"./convert\":2,\"./file\":1,\"./filter\":3,\"./geom\":4,\"./viewer\":6}]},{},[]);</script> <script type=\"text/javascript\">var WEBVR={isLatestAvailable:function(){return console.warn(\"WEBVR: isLatestAvailable() is being deprecated. Use .isAvailable() instead.\"),this.isAvailable()},isAvailable:function(){return void 0!==navigator.getVRDisplays},getVRDisplay:function(e){\"getVRDisplays\"in navigator&&navigator.getVRDisplays().then(function(t){e(t[0])})},getMessage:function(){var e;if(navigator.getVRDisplays?navigator.getVRDisplays().then(function(t){0===t.length&&(e=\"WebVR supported, but no VRDisplays found.\")}):e='Your browser does not support WebVR. See <a href=\"http://webvr.info\">webvr.info</a> for assistance.',void 0!==e){var t=document.createElement(\"div\");t.style.position=\"absolute\",t.style.left=\"0\",t.style.top=\"0\",t.style.right=\"0\",t.style.zIndex=\"999\",t.align=\"center\";var n=document.createElement(\"div\");return n.style.fontFamily=\"sans-serif\",n.style.fontSize=\"16px\",n.style.fontStyle=\"normal\",n.style.lineHeight=\"26px\",n.style.backgroundColor=\"#fff\",n.style.color=\"#000\",n.style.padding=\"10px 20px\",n.style.margin=\"50px\",n.style.display=\"inline-block\",n.innerHTML=e,t.appendChild(n),t}},getButton:function(e,t){if(\"VREffect\"in THREE&&e instanceof THREE.VREffect)return console.error(\"WebVR.getButton() now expects a VRDisplay.\"),document.createElement(\"button\");var n=document.createElement(\"button\");return n.style.position=\"absolute\",n.style.left=\"calc(50% - 50px)\",n.style.bottom=\"20px\",n.style.width=\"100px\",n.style.border=\"0\",n.style.padding=\"8px\",n.style.cursor=\"pointer\",n.style.backgroundColor=\"#000\",n.style.color=\"#fff\",n.style.fontFamily=\"sans-serif\",n.style.fontSize=\"13px\",n.style.fontStyle=\"normal\",n.style.textAlign=\"center\",n.style.zIndex=\"999\",e?(n.textContent=\"ENTER VR\",n.onclick=function(){e.isPresenting?e.exitPresent():e.requestPresent([{source:t}])},window.addEventListener(\"vrdisplaypresentchange\",function(){n.textContent=e.isPresenting?\"EXIT VR\":\"ENTER VR\"},!1)):n.textContent=\"NO VR DISPLAY\",n}};</script> <script type=\"text/javascript\">function GLBoilerPlate(){function r(r,e,t){var a=r.createShader(t);if(r.shaderSource(a,e),r.compileShader(a),!r.getShaderParameter(a,r.COMPILE_STATUS))throw\"could not compile shader:\"+r.getShaderInfoLog(a);return a}function e(r,e,t){var a=r.createProgram();if(r.attachShader(a,e),r.attachShader(a,t),r.linkProgram(a),!r.getProgramParameter(a,r.LINK_STATUS))throw\"program filed to link:\"+r.getProgramInfoLog(a);return a}function t(e,t,a){return r(e,t,a)}function a(r,a,T){var a=t(r,a,r.VERTEX_SHADER),T=t(r,T,r.FRAGMENT_SHADER);return e(r,a,T)}function T(r,e){r.bindBuffer(r.ARRAY_BUFFER,r.createBuffer()),r.bufferData(r.ARRAY_BUFFER,new Float32Array([-1,-1,1,-1,-1,1,1,1]),r.STATIC_DRAW);var t=r.getAttribLocation(e,\"a_position\");r.enableVertexAttribArray(t),r.vertexAttribPointer(t,2,r.FLOAT,!1,0,0)}function E(r,e,t,a,T){var E=r.createTexture();return r.bindTexture(r.TEXTURE_2D,E),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_S,r.CLAMP_TO_EDGE),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_T,r.CLAMP_TO_EDGE),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MIN_FILTER,r.NEAREST),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MAG_FILTER,r.NEAREST),r.texImage2D(r.TEXTURE_2D,0,r.RGBA,e,t,0,r.RGBA,a,T),E}return{createProgramFromSource:a,loadVertexData:T,makeTexture:E}}</script> <script type=\"text/javascript\">function initGPUMath(){function e(){$('<div id=\"coverImg\" style=\"background: url(crane.gif) no-repeat center center fixed;-webkit-background-size: cover;-moz-background-size: cover;-o-background-size: cover;background-size: cover;\"></div>').appendTo($(\"body\")),$(\"#noSupportModal\").modal(\"show\"),$(\"#aboutCorner\").show(),console.warn(\"floating point textures are not supported on your system\")}function r(){this.reset()}var t=GLBoilerPlate(),o=document.getElementById(\"gpuMathCanvas\"),s=o.getContext(\"webgl\",{antialias:!1})||o.getContext(\"experimental-webgl\",{antialias:!1});s.getExtension(\"OES_texture_float\")||e(),s.disable(s.DEPTH_TEST);var i=s.getParameter(s.MAX_TEXTURE_IMAGE_UNITS);return console.log(i+\" textures max\"),r.prototype.createProgram=function(e,r,o){var i=this.programs,a=i[e];if(a)return void s.useProgram(a.program);a=t.createProgramFromSource(s,r,o),s.useProgram(a),t.loadVertexData(s,a),i[e]={program:a,uniforms:{}}},r.prototype.initTextureFromData=function(e,r,o,i,a,f){var n=this.textures[e];if(n){if(!f)return void console.warn(\"already a texture with the name \"+e);s.deleteTexture(n)}n=t.makeTexture(s,r,o,s[i],a),this.textures[e]=n},r.prototype.initFrameBufferForTexture=function(r,t){var o=this.frameBuffers[r];if(o){if(!t)return void console.warn(\"framebuffer already exists for texture \"+r);s.deleteFramebuffer(o)}var i=this.textures[r];if(!i)return void console.warn(\"texture \"+r+\" does not exist\");o=s.createFramebuffer(),s.bindFramebuffer(s.FRAMEBUFFER,o),s.framebufferTexture2D(s.FRAMEBUFFER,s.COLOR_ATTACHMENT0,s.TEXTURE_2D,i,0),s.checkFramebufferStatus(s.FRAMEBUFFER)!=s.FRAMEBUFFER_COMPLETE&&e(),this.frameBuffers[r]=o},r.prototype.setUniformForProgram=function(e,r,t,o){if(!this.programs[e])return void console.warn(\"no program with name \"+e);var i=this.programs[e].uniforms,a=i[r];a||(a=s.getUniformLocation(this.programs[e].program,r),i[r]=a),\"1f\"==o?s.uniform1f(a,t):\"2f\"==o?s.uniform2f(a,t[0],t[1]):\"3f\"==o?s.uniform3f(a,t[0],t[1],t[2]):\"1i\"==o?s.uniform1i(a,t):console.warn(\"no uniform for type \"+o)},r.prototype.setSize=function(e,r){s.viewport(0,0,e,r),o.clientWidth=e,o.clientHeight=r},r.prototype.setProgram=function(e){var r=this.programs[e];r&&s.useProgram(r.program)},r.prototype.step=function(e,r,t,o){s.useProgram(this.programs[e].program),o&&this.setUniformForProgram(e,\"u_time\",o,\"1f\"),s.bindFramebuffer(s.FRAMEBUFFER,this.frameBuffers[t]);for(var i=0;i<r.length;i++)s.activeTexture(s.TEXTURE0+i),s.bindTexture(s.TEXTURE_2D,this.textures[r[i]]);s.drawArrays(s.TRIANGLE_STRIP,0,4)},r.prototype.swapTextures=function(e,r){var t=this.textures[e];this.textures[e]=this.textures[r],this.textures[r]=t,t=this.frameBuffers[e],this.frameBuffers[e]=this.frameBuffers[r],this.frameBuffers[r]=t},r.prototype.swap3Textures=function(e,r,t){var o=this.textures[t];this.textures[t]=this.textures[r],this.textures[r]=this.textures[e],this.textures[e]=o,o=this.frameBuffers[t],this.frameBuffers[t]=this.frameBuffers[r],this.frameBuffers[r]=this.frameBuffers[e],this.frameBuffers[e]=o},r.prototype.readyToRead=function(){return s.checkFramebufferStatus(s.FRAMEBUFFER)==s.FRAMEBUFFER_COMPLETE},r.prototype.readPixels=function(e,r,t,o,i){s.readPixels(e,r,t,o,s.RGBA,s.UNSIGNED_BYTE,i)},r.prototype.reset=function(){this.programs={},this.frameBuffers={},this.textures={},this.index=0},new r}</script> <script type=\"text/javascript\">/**\n * Created by ghassaei on 10/7/16.\n */\n\n\nfunction initControls(globals){\n\n    window.addEventListener('resize', function(){\n        if (globals.capturer) return;\n        globals.threeView.onWindowResize();\n        updateCanvasDimensions();\n    }, false);\n\n    $(\"#logo\").mouseenter(function(){\n        $(\"#activeLogo\").show();\n        $(\"#inactiveLogo\").hide();\n    });\n    $(\"#logo\").mouseleave(function(){\n        $(\"#inactiveLogo\").show();\n        $(\"#activeLogo\").hide();\n    });\n\n    $(\".author\").hover(function(e){\n        var $target = $(e.target);\n        var $moreInfo = $(\"#authorMoreInfo\");\n        if (!$target.hasClass(\"demo\")) {\n            $moreInfo.hide();\n            return;\n        }\n        var offset = $target.position();\n        var width = $target.outerWidth();\n        if (width == 0) {\n            $moreInfo.hide();\n            return;\n        }\n\n        var author = $target.data(\"author\");\n        $(\"#authorContent\").children().hide();\n        $(\"#authorContent>#\" + author).show();\n\n        $moreInfo.css({top:offset.top-13+\"px\", left:width+\"px\"});\n        $moreInfo.show();\n        $target.parent().append($moreInfo);\n    });\n    $(\".author\").mouseout(function(e){\n        var $moreInfo = $(\"#authorMoreInfo\");\n        if ($(e.target).parent().is(\":hover\")) return;\n        if ($moreInfo.is(\":hover\")) return;\n        $moreInfo.hide();\n    });\n    $(\"#authorMoreInfo\").mouseout(function(e){\n        var $moreInfo = $(\"#authorMoreInfo\");\n        if ($moreInfo.is(\":hover\")) return;\n        if ($moreInfo.find(\"#element:hover\").length>0) return;\n        $moreInfo.hide();\n    });\n\n    setLink(\"#menuVis\", function(){\n        if (globals.menusVisible){\n            $(\"#controls\").fadeOut();\n            $(\"#controlsLeft\").fadeOut();\n            $(\"#creasePercentNav\").fadeIn();\n        } else {\n            $(\"#controls\").fadeIn();\n            $(\"#controlsLeft\").fadeIn();\n            $(\"#creasePercentNav\").fadeOut();\n        }\n        globals.menusVisible = !globals.menusVisible;\n    });\n    $(\"#controls\").fadeIn();\n\n    setLink(\"#about\", function(){\n        $('#aboutModal').modal('show');\n    });\n    setLink(\"#aboutCorner\", function(){\n        $('#aboutModal').modal('show');\n    });\n    setLink(\"#tips\", function(){\n        $('#tipsModal').modal('show');\n    });\n    setLink(\"#aboutAnimation\", function(){\n        $('#aboutAnimationModal').modal('show');\n    });\n\n    setLink(\"#cameraX\", function(){\n        globals.threeView.setCameraX(1);\n    });\n    setLink(\"#cameraY\", function(){\n        globals.threeView.setCameraY(1);\n    });\n    setLink(\"#cameraZ\", function(){\n        globals.threeView.setCameraZ(1);\n    });\n    setLink(\"#cameraMinusX\", function(){\n        globals.threeView.setCameraX(-1);\n    });\n    setLink(\"#cameraMinusY\", function(){\n        globals.threeView.setCameraY(-1);\n    });\n    setLink(\"#cameraMinusZ\", function(){\n        globals.threeView.setCameraZ(-1);\n    });\n    setLink(\"#cameraIso\", function(){\n        globals.threeView.setCameraIso();\n    });\n\n    setLink(\"#exportFOLD\", function(){\n        updateDimensions();\n        $(\"#foldFilename\").val(globals.filename + \" : \" + parseInt(globals.creasePercent*100) +  \"PercentFolded\");\n        var units = globals.foldUnits;\n        if (units == \"unit\") units = \"unitless\";\n        $(\".unitsDisplay\").html(units);\n        $('#exportFOLDModal').modal('show');\n    });\n    setLink(\"#exportSTL\", function(){\n        updateDimensions();\n        $(\"#stlFilename\").val(globals.filename + \" : \" + parseInt(globals.creasePercent*100) +  \"PercentFolded\");\n        $('#exportSTLModal').modal('show');\n    });\n    setLink(\"#exportOBJ\", function(){\n        updateDimensions();\n        $(\"#objFilename\").val(globals.filename + \" : \" + parseInt(globals.creasePercent*100) +  \"PercentFolded\");\n        $('#exportOBJModal').modal('show');\n    });\n    setInput(\".exportScale\", globals.exportScale, function(val){\n        globals.exportScale = val;\n        updateDimensions();\n    }, 0);\n    function updateDimensions(){\n        var dim = globals.model.getDimensions();\n        dim.multiplyScalar(globals.exportScale/globals.scale);\n        $(\".exportDimensions\").html(dim.x.toFixed(2) + \" x \" + dim.y.toFixed(2) + \" x \" + dim.z.toFixed(2));\n    }\n    setCheckbox(\"#doublesidedSTL\", globals.doublesidedSTL, function(val){\n        globals.doublesidedSTL = val;\n    });\n    setCheckbox(\"#doublesidedOBJ\", globals.doublesidedOBJ, function(val){\n        globals.doublesidedOBJ = val;\n    });\n    setCheckbox(\"#polyFacesOBJ\", globals.polyFacesOBJ, function(val){\n        globals.polyFacesOBJ = val;\n    });\n    setLink(\".units\", function(e){\n        var units = $(e.target).data(\"id\");\n        globals.foldUnits = units;\n        if (units == \"unit\") units = \"unitless\";\n        $(\".unitsDisplay\").html(units);\n    });\n    setCheckbox(\"#triangulateFOLDexport\", globals.triangulateFOLDexport, function(val){\n        globals.triangulateFOLDexport = val;\n    });\n    setCheckbox(\"#exportFoldAngle\", globals.exportFoldAngle, function(val){\n        globals.exportFoldAngle = val;\n    });\n\n    setLink(\"#doSTLsave\", function(){\n        saveSTL();\n    });\n    setLink(\"#doOBJsave\", function(){\n        saveOBJ();\n    });\n    setLink(\"#doFOLDsave\", function(){\n        saveFOLD();\n    });\n\n    setLink(\"#rotateX\", function(){\n        globals.threeView.resetModel();\n        globals.rotateModel = \"x\";\n    });\n    setLink(\"#rotateY\", function(){\n        globals.threeView.resetModel();\n        globals.rotateModel = \"y\";\n    });\n    setLink(\"#rotateZ\", function(){\n        globals.threeView.resetModel();\n        globals.rotateModel = \"z\";\n    });\n    setLink(\"#stopRotation\", function(){\n        globals.rotateModel = null;\n        globals.threeView.resetModel();\n    });\n    setLink(\"#changeRotationSpeed\", function(){\n        $(\"#changeRotationSpeedModal\").modal(\"show\");\n    });\n    setInput(\"#rotationSpeed\", globals.rotationSpeed, function(val){\n        globals.rotationSpeed = val;\n    });\n\n    setLink(\"#changeBackground\", function(){\n        $(\"#changeBackgroundModal\").modal(\"show\");\n    });\n    setHexInput(\"#backgroundColor\", globals.backgroundColor, function(val){\n        globals.backgroundColor = val;\n        globals.threeView.setBackgroundColor();\n    });\n\n    setLink(\"#importSettings\", function(){\n        $(\"#vertTol\").val(globals.vertTol);\n        $(\"#curvedLines\").val(globals.includeCurves);\n        $(\"#vertInt\").val(globals.vertInt);\n        $(\"#apprCurve\").val(globals.apprCurve);\n        $(\"#importSettingsModal\").modal(\"show\");\n    });\n    setInput(\"#vertTol\", globals.vertTol, function(val){\n        globals.vertTol = val;\n    });\n    setCheckbox(\"#curvedLines\", globals.includeCurves, function(val){\n        globals.includeCurves = val;\n        if (val) $(\"#curvedCreaseImportOptions\").show();\n        else $(\"#curvedCreaseImportOptions\").hide();\n    });\n    if (globals.includeCurves) $(\"#curvedCreaseImportOptions\").show();\n    else $(\"#curvedCreaseImportOptions\").hide();\n    setInput(\"#vertInt\", globals.vertInt, function(val){\n        globals.vertInt = val;\n    });\n    setInput(\"#apprCurve\", globals.apprCurve, function(val){\n        globals.apprCurve = val;\n    });\n\n    setLink(\"#createGif\", function(){\n        globals.shouldScaleCanvas = true;\n        $(\"#screenCaptureModal .video\").hide();\n        $(\"#screenCaptureModal .png\").hide();\n        $(\"#screenCaptureModal .gif\").show();\n        $(\"#screenCaptureModal\").modal(\"show\");\n        $(\"#screenRecordFilename\").val(globals.filename);\n        globals.screenRecordFilename = globals.filename;\n        globals.threeView.onWindowResize();\n        updateCanvasDimensions();\n    });\n    setLink(\"#createPNG\", function(){\n        globals.shouldScaleCanvas = true;\n        $(\"#screenCaptureModal .gif\").hide();\n        $(\"#screenCaptureModal .video\").hide();\n        $(\"#screenCaptureModal .png\").show();\n        $(\"#screenCaptureModal\").modal(\"show\");\n        $(\"#screenRecordFilename\").val(globals.filename);\n        globals.screenRecordFilename = globals.filename;\n        globals.threeView.onWindowResize();\n        updateCanvasDimensions();\n    });\n    setLink(\"#createVideo\", function(){\n        var hasWebP = false;\n        (function() {\n          var img = new Image();\n          img.onload = function() {\n            hasWebP = !!(img.height > 0 && img.width > 0);\n              if (hasWebP){\n                  //timeLimit: s of video to limit\n                $(\"#screenCaptureModal .gif\").hide();\n                $(\"#screenCaptureModal .png\").hide();\n                $(\"#screenCaptureModal .video\").show();\n                $(\"#screenCaptureModal\").modal(\"show\");\n                $(\"#screenRecordFilename\").val(globals.filename);\n                globals.screenRecordFilename = globals.filename;\n              } else {\n                  globals.warn(\"Video export not supported by this browser, please try again \" +\n                \"with the latest version of Google Chrome.\");\n              }\n          };\n          img.onerror = function() {\n             globals.warn(\"Video export not supported by this browser, please try again \" +\n                \"with the latest version of Google Chrome.\");\n          };\n          img.src = '../assets/support/test.webp';\n        })();\n\n    });\n    $(\"#screenCaptureModal\").on('hidden.bs.modal', function (){\n        if (globals.capturer) return;\n        globals.shouldScaleCanvas = false;\n        globals.threeView.onWindowResize();\n    });\n    $(\"#screenCaptureModal\").on('shown.bs.modal', function (){\n        globals.shouldScaleCanvas = true;//fixes problem of setting animation turning off shouldScaleCanvas\n        globals.threeView.onWindowResize();\n        updateCanvasDimensions();\n    });\n    setInput(\"#capturerFPS\", globals.capturerFPS, function(val){\n        globals.capturerFPS = val;\n    }, 0, 60);\n    setInput(\"#gifFPS\", globals.gifFPS, function(val){\n        globals.gifFPS = val;\n    }, 0, 60);\n    setInput(\"#capturerQuality\", globals.capturerQuality, function(val){\n        globals.capturerQuality = val;\n    }, 0, 63);\n    setInput(\"#capturerScale\", globals.capturerScale, function(val){\n        globals.capturerScale = val;\n        globals.threeView.onWindowResize();\n        updateCanvasDimensions();\n    }, 1);\n    function updateCanvasDimensions(){\n        var dim = (new THREE.Vector2(window.innerWidth, window.innerHeight)).multiplyScalar(globals.capturerScale);\n        $(\"#canvasDimensions\").html(dim.x + \" x \" + dim.y + \" px\");\n    }\n    setInput(\"#screenRecordFilename\", \"OrigamiSimulator\", function(val){\n        globals.screenRecordFilename = val;\n    });\n\n    setLink(\"#doScreenRecord\", function(){\n        globals.capturerFrames = 0;\n        globals.capturer = new CCapture({\n            format:'webm',\n            name:globals.screenRecordFilename,\n            framerate:globals.capturerFPS,\n            workersPath:'dependencies/',\n            quality: globals.capturerQuality\n        });\n        globals.currentFPS = globals.capturerFPS;\n        globals.isGif = false;\n        $(\"#recordStatus\").show();\n        globals.shouldScaleCanvas = false;\n        globals.threeView.resetModel();\n        globals.capturer.start();\n        if (globals.videoAnimator.isValid()) {\n            globals.shouldAnimateFoldPercent = true;\n            globals.videoAnimator.compile();\n        }\n    });\n    setLink(\"#doPNGCapture\", function(){\n        globals.shouldScaleCanvas = false;\n        globals.capturer = \"png\";\n    });\n    setLink(\"#doGifRecord\", function(){\n        globals.capturerFrames = 0;\n        globals.capturer = new CCapture({\n            format:'gif',\n            name:globals.screenRecordFilename,\n            framerate:globals.gifFPS,\n            workersPath:'dependencies/'\n        });\n        globals.currentFPS = globals.gifFPS;\n        globals.isGif = true;\n        $(\"#recordStatus\").show();\n        globals.shouldScaleCanvas = false;\n        globals.threeView.resetModel();\n        globals.capturer.start();\n        if (globals.videoAnimator.isValid()) {\n            globals.shouldAnimateFoldPercent = true;\n            globals.videoAnimator.compile();\n        }\n    });\n\n    setLink(\"#stopRecord\", function(){\n        if (!globals.capturer) return;\n        if (globals.isGif) globals.warn(\"Processing GIF, may take a few minutes...  <br/>(you can close this window in the meantime)<br/><br/> GIFs exported from this app are not highly compressed, \" +\n            \"you can decrease their file size using a GIF editor.  \" +\n            \"I like <a href='https://ezgif.com/video-to-gif' target='blank'>EZGif</a>.\");\n        else {\n            globals.warn(\"Compiling WebM video.  If you have trouble playing videos exported from this app, try using \" +\n                \"<a href='http://www.videolan.org/vlc/index.html' target='blank'>VLC Player</a>.\");\n        }\n        globals.capturer.stop();\n        globals.capturer.save();\n        globals.capturer = null;\n        globals.shouldScaleCanvas = false;\n        globals.shouldAnimateFoldPercent = false;\n        globals.threeView.onWindowResize();\n        $(\"#recordStatus\").hide();\n    });\n\n\n    setLink(\"#navPattern\", function(){\n        if (globals.noCreasePatternAvailable()){\n            globals.warn(\"No crease pattern available.\");\n            return;\n        }\n        if (globals.navMode == \"pattern\") return;\n        globals.pausedForPatternView = globals.simulationRunning;\n        globals.model.pause();\n        globals.navMode = \"pattern\";\n        $(\"#navPattern\").parent().addClass(\"open\");\n        $(\"#navSimulation\").parent().removeClass(\"open\");\n        $(\"#svgViewer\").show();\n    });\n    $(\"#navSimulation\").parent().addClass(\"open\");\n    $(\"#navPattern\").parent().removeClass(\"open\");\n    setLink(\"#navSimulation\", function(){\n        if (globals.navMode == \"simulation\") return;\n        globals.navMode = \"simulation\";\n        if (globals.pausedForPatternView) globals.model.resume();\n        $(\"#navSimulation\").parent().addClass(\"open\");\n        $(\"#navPattern\").parent().removeClass(\"open\");\n        $(\"#svgViewer\").hide();\n    });\n\n    setLink(\".seeMore\", function(e){\n        var $target = $(e.target);\n        if (!$target.hasClass(\"seeMore\")) $target = $target.parent();\n        var $div = $(\"#\"+ $target.data(\"id\"));\n        if ($target.hasClass(\"closed\")){\n            $target.removeClass(\"closed\");\n            $target.addClass(\"open\");\n            AnimateRotate(-90, 0, $target.children(\"span\"));\n            $div.removeClass(\"hide\");\n            $div.css('display', 'inline-block');\n        } else {\n            $target.removeClass(\"open\");\n            $target.addClass(\"closed\");\n            AnimateRotate(0, -90, $target.children(\"span\"));\n            $div.hide();\n        }\n    });\n\n    function AnimateRotate(from, to, $elem) {\n        // we use a pseudo object for the animation\n        // (starts from `0` to `angle`), you can name it as you want\n        $({deg: from}).animate({deg: to}, {\n            duration: 200,\n            step: function(now) {\n                // in the step-callback (that is fired each step of the animation),\n                // you can use the `now` paramter which contains the current\n                // animation-position (`0` up to `angle`)\n                $elem.css({\n                    transform: 'rotate(' + now + 'deg)'\n                });\n            }\n        });\n    }\n\n    setLink(\".goToImportInstructions\", function(){\n       $(\"#aboutModal\").modal(\"hide\");\n        $(\"#importSettingsModal\").modal(\"hide\");\n        $(\"#tipsModal\").modal(\"show\");\n    });\n\n    setLink(\"#goToViveInstructions\", function(){\n       $(\"#aboutModal\").modal(\"hide\");\n        $(\"#aboutVRmodal\").modal(\"show\");\n    });\n\n    setRadio(\"integrationType\", globals.integrationType, function(val){\n        globals.dynamicSolver.reset();\n        globals.integrationType = val;\n    });\n\n\n    setRadio(\"simType\", globals.simType, function(val){\n        globals.simType = val;\n        globals.simNeedsSync = true;\n    });\n\n    setSliderInput(\"#axialStiffness\", globals.axialStiffness, 10, 100, 1, function(val){\n        globals.axialStiffness = val;\n        globals.materialHasChanged = true;\n    });\n\n    setSliderInput(\"#faceStiffness\", globals.faceStiffness, 0, 5, 0.01, function(val){\n        globals.faceStiffness = val;\n        globals.materialHasChanged = true;\n    });\n\n    setSliderInput(\"#creaseStiffness\", globals.creaseStiffness, 0, 3, 0.01, function(val){\n        globals.creaseStiffness = val;\n        globals.creaseMaterialHasChanged = true;\n    });\n\n    setSliderInput(\"#panelStiffness\", globals.panelStiffness, 0, 3, 0.01, function(val){\n        globals.panelStiffness = val;\n        globals.creaseMaterialHasChanged = true;\n    });\n\n    setSliderInput(\"#percentDamping\", globals.percentDamping, 0.01, 0.5, 0.01, function(val){\n        globals.percentDamping = val;\n        globals.materialHasChanged = true;\n    });\n\n    var creasePercentSlider = setSliderInput(\"#creasePercent\", globals.creasePercent*100, -100, 100, 1, function(val){\n        // Map slider value (0-100) to actual folding value (0-currentPatternMaxFolding)\n        var actualVal = (val / 100) * (globals.currentPatternMaxFolding / 100);\n        globals.creasePercent = actualVal;\n        globals.shouldChangeCreasePercent = true;\n        updateCreasePercent();\n    });\n    var creasePercentNavSlider = setSlider(\"#creasePercentNav>div\", globals.creasePercent*100, -100, 100, 1, function(val){\n        // Map slider value (0-100) to actual folding value (0-currentPatternMaxFolding)\n        var actualVal = (val / 100) * (globals.currentPatternMaxFolding / 100);\n        globals.creasePercent = actualVal;\n        globals.shouldChangeCreasePercent = true;\n        updateCreasePercent();\n    });\n    var creasePercentBottomSlider = setSlider(\"#creasePercentBottom>div\", globals.creasePercent*100, 0, 100, 1, function(val){\n        // Map slider value (0-100) to actual folding value (0-currentPatternMaxFolding)\n        var actualVal = (val / 100) * (globals.currentPatternMaxFolding / 100);\n        globals.creasePercent = actualVal;\n        globals.shouldChangeCreasePercent = true;\n        updateCreasePercent()\n    });\n    setInput(\"#currentFoldPercent\", globals.creasePercent*100, function(val){\n        globals.creasePercent = val/100;\n        globals.shouldChangeCreasePercent = true;\n        updateCreasePercent();\n    }, -100, 100);\n\n    setLink(\"#flatIndicator\", function(){\n        globals.creasePercent = 0;\n        globals.shouldChangeCreasePercent = true;\n        updateCreasePercent();\n    });\n    setLink(\"#foldedIndicator\", function(){\n        globals.creasePercent = 1;\n        globals.shouldChangeCreasePercent = true;\n        updateCreasePercent();\n    });\n\n    function updateCreasePercent(){\n        // Convert actual folding value back to display percentage (0-100)\n        var displayVal = (globals.creasePercent / (globals.currentPatternMaxFolding / 100)) * 100;\n        creasePercentSlider.slider('value', displayVal);\n        creasePercentNavSlider.slider('value', displayVal);\n        creasePercentBottomSlider.slider('value', displayVal);\n        $('#currentFoldPercent').val(displayVal.toFixed(0));\n        $('#creasePercent>input').val(displayVal.toFixed(0));\n        $(\"#foldPercentSimple\").html(displayVal.toFixed(0));\n    }\n    updateCreasePercent();\n\n    // Check if slider controls should auto-animate when they become visible\n    setTimeout(function() {\n        if ($(\"#creasePercent\").is(':visible') && globals.threeView && globals.threeView.startSliderAnimation) {\n            console.log(' Slider controls detected as visible - considering auto animation');\n            // Only start if not already animating and in appropriate mode\n            if (!globals.sliderAutoAnimationEnabled && window.editMode !== false) {\n                console.log(' Starting immediate slider auto animation');\n                globals.threeView.startSliderAnimation(0, 100, 4000, true, 5000); // 4s animation, loop enabled, 5s pause\n            }\n        }\n    }, 1000); // Delay to ensure UI is fully rendered\n\n    function updateFoldingSliderMax(){\n        var currentMax = globals.currentPatternMaxFolding;\n        \n        // Update the actual slider maximum values but keep UI display as 0-100\n        creasePercentSlider.slider('option', 'max', currentMax);\n        creasePercentNavSlider.slider('option', 'max', currentMax);\n        creasePercentBottomSlider.slider('option', 'max', currentMax);\n        \n        // Adjust current value if it exceeds the new maximum\n        if (globals.creasePercent * 100 > currentMax) {\n            globals.creasePercent = currentMax / 100;\n            globals.shouldChangeCreasePercent = true;\n            updateCreasePercent();\n        }\n    }\n    \n    // Make function globally available\n    window.updateFoldingSliderMax = updateFoldingSliderMax;\n\n    function setDeltaT(val){\n        $(\"#deltaT\").html(val.toFixed(4));\n    }\n\n    setLink(\".loadFile\", function(e){\n        $(\"#fileSelector\").click();\n        $(e.target).blur();\n    });\n\n    setLink(\".demo\", function(e){\n        var $target = $(e.target);\n        var url = $target.data(\"url\");\n        if (url) {\n            // Check if we are loading a curved crease pattern.\n            // TODO: this should be removed eventually, replace with detecting beziers in svg.\n            if ($target.hasClass('cc')) {\n                globals.includeCurves = true;\n                globals.vertInt = 20;\n                globals.apprCurve = 0.2;\n            } else {\n                globals.includeCurves = false;\n            }\n            globals.vertTol = 3;\n            globals.importer.importDemoFile(url);\n        }\n    });\n\n    setLink(\"#setupAnimation\", function(){\n        $(\"#screenCaptureModal\").modal(\"hide\");\n        $(\"#animationSetupModal\").modal(\"show\");\n    });\n\n    setLink(\"#saveSVGScreenshot\", function(){\n        globals.threeView.saveSVG();\n    });\n\n    setLink(\"#saveSVG\", function(){\n        globals.pattern.saveSVG();\n    });\n    \n    setLink(\"#generateCellMap\", function(){\n        if (globals.cellColorizer) {\n            globals.cellColorizer.generateCellMapImage();\n        } else {\n            globals.warn(\"Cell colorizer not available.\");\n        }\n    });\n    \n    setLink(\"#generateTextureMappedCells\", function(){\n        if (globals.cellColorizer) {\n            globals.cellColorizer.generateTextureMappedCellImage();\n        } else {\n            globals.warn(\"Cell colorizer not available.\");\n        }\n    });\n    setLink(\"#addAnimationItem\", function(){\n        globals.videoAnimator.addItem();\n    });\n    setLink(\"#addDelay\", function(){\n        globals.videoAnimator.addDelay();\n    });\n    $(\"#animationSetupModal\").on('hidden.bs.modal', function (){\n        $(\"#screenCaptureModal\").modal(\"show\");\n    });\n\n    setCheckbox(\"#ambientOcclusion\", globals.ambientOcclusion, function(val){\n        globals.ambientOcclusion = val;\n    });\n\n    if (globals.colorMode == \"color\") $(\"#coloredMaterialOptions\").show();\n    else $(\"#coloredMaterialOptions\").hide();\n    if (globals.colorMode == \"axialStrain\") $(\"#axialStrainMaterialOptions\").show();\n    else $(\"#axialStrainMaterialOptions\").hide();\n    if (globals.colorMode == \"texture\") $(\"#textureMaterialOptions\").show();\n    else $(\"#textureMaterialOptions\").hide();\n\n    function setColorMode(val){\n        console.log(\"Setting color mode to:\", val);\n        \n        // Reset cell texture mode flag when switching away from texture mode\n        if (val !== \"texture\" && (globals.isCellGeneratedTexture || globals.useSimpleTextureMode)) {\n            if (globals.cellColorizer && globals.cellColorizer.resetCellTextureMode) {\n                globals.cellColorizer.resetCellTextureMode();\n            }\n        }\n        \n        globals.colorMode = val;\n        if (val == \"color\") {\n            $(\"#coloredMaterialOptions\").show();\n            $(\"#colorToggle>div\").addClass(\"active\");\n            $(\"#strainToggle>div\").removeClass(\"active\");\n        }\n        else {\n            $(\"#coloredMaterialOptions\").hide();\n            $(\"#colorToggle>div\").removeClass(\"active\");\n            $(\"#strainToggle>div\").addClass(\"active\");\n        }\n        if (val == \"axialStrain\") $(\"#axialStrainMaterialOptions\").show();\n        else $(\"#axialStrainMaterialOptions\").hide();\n        if (val == \"texture\") {\n            $(\"#textureMaterialOptions\").show();\n            $(\"#textureMaterialOptions\").removeClass(\"hide\");\n        } else {\n            $(\"#textureMaterialOptions\").hide();\n            $(\"#textureMaterialOptions\").addClass(\"hide\");\n        }\n        $(\".radio>input[value=\"+val+\"]\").prop(\"checked\", true);\n        globals.model.setMeshMaterial();\n    }\n    setRadio(\"colorMode\", globals.colorMode, setColorMode);\n    setLink(\"#colorToggle\", function(){\n        setColorMode(\"color\");\n    });\n    setLink(\"#strainToggle\", function(){\n        setColorMode(\"axialStrain\");\n    });\n\n    // Enhanced texture controls\n    $(\"#textureFileInput\").change(function(e) {\n        var files = e.target.files;\n        if (files && files.length > 0) {\n            console.log(\"Loading\", files.length, \"texture file(s)...\");\n            \n            // Convert FileList to Array for better handling\n            var fileArray = Array.from(files);\n            \n            globals.loadMultipleTextures(fileArray, function(textures) {\n                if (textures && textures.length > 0) {\n                    console.log(\"All textures loaded successfully:\", textures.length, \"textures\");\n                    console.log(\"Texture names:\", textures.map(t => t.name));\n                    \n                    setColorMode(\"texture\");\n                    \n                    // Note: Texture processing is now handled automatically by globals.js\n                    // via cellColorizer auto-generation, so we don't need complex manual processing here\n                    \n                    // Additional fallback: try manual execution if auto-generation didn't work\n                    setTimeout(function() {\n                        console.log(\" Controls: Checking if auto-generation completed...\");\n                        if (globals.isCellGeneratedTexture && globals.useSimpleTextureMode) {\n                            console.log(\" Auto-generation completed successfully\");\n                        } else {\n                            console.log(\" Auto-generation may not have completed, trying manual trigger...\");\n                            if (globals.cellColorizer && globals.cellColorizer.generateTextureMappedCellImage) {\n                                try {\n                                    globals.cellColorizer.generateTextureMappedCellImage(true); // Pass true for auto mode\n                                    console.log(\" Manual trigger successful\");\n                                } catch (error) {\n                                    console.warn(\" Manual trigger failed:\", error);\n                                }\n                            }\n                        }\n                    }, 2000); // 2 second delay\n                    \n                    // Show success message\n                    var statusElement = document.getElementById('compressionStatus');\n                    if (statusElement) {\n                        statusElement.textContent = \" \" + textures.length + \" texture\" + (textures.length > 1 ? \"s\" : \"\") + \" loaded and processed!\";\n                        setTimeout(function() {\n                            statusElement.textContent = \"\";\n                        }, 3000);\n                    }\n                } else {\n                    console.warn(\"No textures were loaded successfully\");\n                    var statusElement = document.getElementById('compressionStatus');\n                    if (statusElement) {\n                        statusElement.textContent = \" Failed to load any textures\";\n                        setTimeout(function() {\n                            statusElement.textContent = \"\";\n                        }, 3000);\n                    }\n                }\n            });\n        }\n        \n        // Clear the input so the same files can be selected again if needed\n        this.value = '';\n    });\n\n    $(\"#randomTextures\").change(function() {\n        globals.randomTextures = this.checked;\n        if (this.checked && globals.textureLibrary.length > 0 && globals.model) {\n            console.log(\"Manually enabling random texture assignment\");\n            globals.assignRandomTextures();\n            if (globals.colorMode === \"texture\") {\n                globals.model.setMeshMaterial();\n            }\n            \n            // Show confirmation\n            var statusElement = document.getElementById('compressionStatus');\n            if (statusElement) {\n                statusElement.textContent = \" Textures randomly redistributed!\";\n                setTimeout(function() {\n                    statusElement.textContent = \"\";\n                }, 2000);\n            }\n        }\n    });\n\n    setInput(\"#textureRepeat\", globals.textureRepeat, function(val){\n        globals.textureRepeat = val;\n        if (globals.faceTexture) {\n            globals.faceTexture.repeat.set(val, val);\n            globals.model.setMeshMaterial();\n        }\n    }, 0.1, 10);\n\n    setHexInput(\"#color1\", globals.color1, function(val){\n        globals.color1 = val;\n        globals.model.setMeshMaterial();\n    });\n    setHexInput(\"#color2\", globals.color2, function(val){\n        globals.color2 = val;\n        globals.model.setMeshMaterial();\n    });\n\n    setCheckbox(\"#edgesVisible\", globals.edgesVisible, function(val){\n        globals.edgesVisible = val;\n        if (globals.edgesVisible) $(\"#edgeVisOptions\").show();\n        else $(\"#edgeVisOptions\").hide();\n        globals.model.updateEdgeVisibility();\n    });\n    setCheckbox(\"#mtnsVisible\", globals.mtnsVisible, function(val){\n        globals.mtnsVisible = val;\n        globals.model.updateEdgeVisibility();\n    });\n    setCheckbox(\"#valleysVisible\", globals.valleysVisible, function(val){\n        globals.valleysVisible = val;\n        globals.model.updateEdgeVisibility();\n    });\n    setCheckbox(\"#panelsVisible\", globals.panelsVisible, function(val){\n        globals.panelsVisible = val;\n        globals.model.updateEdgeVisibility();\n    });\n    setCheckbox(\"#passiveEdgesVisible\", globals.passiveEdgesVisible, function(val){\n        globals.passiveEdgesVisible = val;\n        globals.model.updateEdgeVisibility();\n    });\n    setCheckbox(\"#boundaryEdgesVisible\", globals.boundaryEdgesVisible, function(val){\n        globals.boundaryEdgesVisible = val;\n        globals.model.updateEdgeVisibility();\n    });\n\n    setCheckbox(\"#meshVisible\", globals.meshVisible, function(val){\n        globals.meshVisible = val;\n        globals.model.updateMeshVisibility();\n        if (globals.meshVisible) $(\"#meshMaterialOptions\").show();\n        else $(\"#meshMaterialOptions\").hide();\n    });\n\n    setLink(\"#aboutError\", function(){\n        $(\"#aboutErrorModal\").modal(\"show\");\n    });\n    setLink(\"#aboutStiffness\", function(){\n        $(\"#aboutStiffnessModal\").modal(\"show\");\n    });\n    setLink(\"#aboutDynamicSim\", function(){\n        $(\"#aboutDynamicSimModal\").modal(\"show\");\n    });\n    setLink(\"#aboutStaticSim\", function(){\n        $(\"#aboutStaticSimModal\").modal(\"show\");\n    });\n    setLink(\"#aboutRigidSim\", function(){\n        $(\"#aboutRigidSimModal\").modal(\"show\");\n    });\n    setLink(\"#aboutAxialStrain\", function(){\n        $(\"#aboutAxialStrainModal\").modal(\"show\");\n    });\n    setLink(\"#aboutVR\", function(){\n        $(\"#aboutVRmodal\").modal(\"show\");\n    });\n\n    setCheckbox(\"#vrEnabled\", globals.vrEnabled, function(val){\n        globals.vrEnabled = val;\n    });\n\n    setLink(\"#start\", function(){\n        $(\"#pause\").css('display', 'inline-block');\n        $(\"#reset\").css('display', 'inline-block');\n        $(\"#start\").hide();\n        $(\"#stepForwardOptions\").hide();\n        globals.model.resume();\n    });\n    setLink(\"#pause\", function(){\n        $(\"#start\").css('display', 'inline-block');\n        $(\"#stepForwardOptions\").css('display', 'inline-block');\n        $(\"#pause\").hide();\n        globals.model.pause();\n    });\n    setLink(\"#reset\", function(){\n        if (!globals.simulationRunning) $(\"#reset\").hide();\n        globals.model.reset();\n    });\n    setLink(\"#resetBottom\", function(){\n        globals.model.reset();\n    });\n    setLink(\"#stepForward\", function(){\n        globals.model.step(globals.numSteps);\n        $(\"#reset\").css('display', 'inline-block');\n    });\n\n    setInput(\"#strainClip\", globals.strainClip, function(val){\n        globals.strainClip = val;\n    }, 0.0001, 100);\n\n    setCheckbox($(\"#userInteractionEnabled\"), globals.userInteractionEnabled, enableInteraction);\n    function enableInteraction(val){\n        globals.userInteractionEnabled = val;\n        $(\"#userInteractionEnabled\").prop('checked', val);\n        if (val) {\n            $(\"#grabToggle>div\").addClass(\"active\");\n            $(\"#orbitToggle>div\").removeClass(\"active\");\n            globals.rotateModel = null;\n            globals.threeView.resetModel();\n        } else {\n            $(\"#grabToggle>div\").removeClass(\"active\");\n            $(\"#orbitToggle>div\").addClass(\"active\");\n            globals.UI3D.hideHighlighters();\n        }\n    }\n    setLink(\"#grabToggle\", function(){\n        enableInteraction(true);\n    });\n    setLink(\"#orbitToggle\", function(){\n        enableInteraction(false);\n    });\n\n    setCheckbox($(\"#foldUseAngles\"), globals.foldUseAngles, function(val){\n        globals.foldUseAngles = val;\n    });\n\n    setLink(\"#shouldCenterGeo\", function(){\n        globals.shouldCenterGeo = true;\n    });\n\n    setInput(\".numStepsPerRender\", globals.numSteps, function(val){\n        globals.numSteps = val;\n    }, 1);\n\n    setLink(\"#aboutUserInteraction\", function(){\n        $('#aboutUserInteractionModal').modal('show');\n    });\n\n    setLink(\"#showAdvancedOptions\", function(){\n        $(\"#basicUI\").hide();\n        $(\"#controlsBottom\").animate({\n            bottom: \"-140px\"\n        }, function(){\n            $(\"#controls\").animate({\n            right: 0\n            });\n            $(\"#controlsLeft\").animate({\n                left: 0\n            });\n        });\n    });\n    setLink(\"#hideAdvancedOptions\", function(){\n        $(\"#controls\").animate({\n            right: \"-430px\"\n        }, function(){\n            $(\"#basicUI\").fadeIn();\n            $(\"#controlsBottom\").animate({\n                bottom: 0\n            });\n        });\n        $(\"#controlsLeft\").animate({\n            left: \"-420px\"\n        });\n    });\n\n    setLink(\"#exampleMenuButton\", function(){\n        $(\"#helper\").hide();\n    });\n\n\n    function setButtonGroup(id, callback){\n        $(id+\" a\").click(function(e){\n            e.preventDefault();\n            var $target = $(e.target);\n            var val = $target.data(\"id\");\n            if (val) {\n                $(id+\" span.dropdownLabel\").html($target.html());\n                callback(val);\n            }\n        });\n    }\n\n    function setLink(id, callback){\n        $(id).click(function(e){\n            e.preventDefault();\n            callback(e);\n        });\n    }\n\n    function setRadio(name, val, callback){\n        $(\"input[name=\" + name + \"]\").on('change', function() {\n            var state = $(\"input[name=\"+name+\"]:checked\").val();\n            callback(state);\n        });\n        $(\".radio>input[value=\"+val+\"]\").prop(\"checked\", true);\n    }\n\n    function setInput(id, val, callback, min, max){\n        var $input = $(id);\n        $input.change(function(){\n            var $this = $(this);\n            if ($input.length == 1) $this = $input;//probably not necessary\n            var val = $this.val();\n            if ($this.hasClass(\"int\")){\n                if (isNaN(parseInt(val))) return;\n                val = parseInt(val);\n            } else if ($this.hasClass(\"text\")){\n            } else {\n                if (isNaN(parseFloat(val))) return;\n                val = parseFloat(val);\n            }\n            if (min !== undefined && val < min) val = min;\n            if (max !== undefined && val > max) val = max;\n            $input.val(val);\n            callback(val);\n        });\n        $input.val(val);\n    }\n\n    function setHexInput(id, val, callback){\n        var $input = $(id);\n        $input.css({\"border-color\": \"#\" + val});\n        $input.change(function(){\n            var val = $input.val();\n            var validHex  = /(^[0-9A-F]{6}$)|(^[0-9A-F]{3}$)/i.test(val);\n            if (!validHex) return;\n            $input.val(val);\n            $input.css({\"border-color\": \"#\" + val});\n            callback(val);\n        });\n        $input.val(val);\n    }\n\n    function setCheckbox(id, state, callback){\n        var $input  = $(id);\n        $input.on('change', function () {\n            if ($input.is(\":checked\")) callback(true);\n            else callback(false);\n        });\n        $input.prop('checked', state);\n    }\n\n    function setSlider(id, val, min, max, incr, callback, callbackOnStop){\n        var slider = $(id).slider({\n            orientation: 'horizontal',\n            range: false,\n            value: val,\n            min: min,\n            max: max,\n            step: incr\n        });\n        slider.on(\"slide\", function(e, ui){\n            var val = ui.value;\n            callback(val);\n        });\n        slider.on(\"slidestop\", function(){\n            var val = slider.slider('value');\n            if (callbackOnStop) callbackOnStop(val);\n        });\n        return slider;\n    }\n\n    function setLogSliderInput(id, val, min, max, incr, callback){\n\n        var scale = (Math.log(max)-Math.log(min)) / (max-min);\n\n        var slider = $(id+\">div\").slider({\n            orientation: 'horizontal',\n            range: false,\n            value: (Math.log(val)-Math.log(min)) / scale + min,\n            min: min,\n            max: max,\n            step: incr\n        });\n\n        var $input = $(id+\">input\");\n        $input.change(function(){\n            var val = $input.val();\n            if ($input.hasClass(\"int\")){\n                if (isNaN(parseInt(val))) return;\n                val = parseInt(val);\n            } else {\n                if (isNaN(parseFloat(val))) return;\n                val = parseFloat(val);\n            }\n\n            var min = slider.slider(\"option\", \"min\");\n            if (val < min) val = min;\n            if (val > max) val = max;\n            $input.val(val);\n            slider.slider('value', (Math.log(val)-Math.log(min)) / scale + min);\n            callback(val, id);\n        });\n        $input.val(val);\n        slider.on(\"slide\", function(e, ui){\n            var val = ui.value;\n            val = Math.exp(Math.log(min) + scale*(val-min));\n            $input.val(val.toFixed(4));\n            callback(val, id);\n        });\n    }\n\n    function setSliderInputVal(id, val){\n        $(id+\">div\").slider({value:val});\n        var $input = $(id+\">input\");\n        $input.val(val);\n    }\n\n    function setSliderInput(id, val, min, max, incr, callback){\n\n        var slider = $(id+\">div\").slider({\n            orientation: 'horizontal',\n            range: false,\n            value: val,\n            min: min,\n            max: max,\n            step: incr\n        });\n\n        var $input = $(id+\">input\");\n        $input.change(function(){\n            var val = $input.val();\n            if ($input.hasClass(\"int\")){\n                if (isNaN(parseInt(val))) return;\n                val = parseInt(val);\n            } else {\n                if (isNaN(parseFloat(val))) return;\n                val = parseFloat(val);\n            }\n\n            var min = slider.slider(\"option\", \"min\");\n            if (val < min) val = min;\n            if (val > max) val = max;\n            $input.val(val);\n            slider.slider('value', val);\n            callback(val);\n        });\n        $input.val(val);\n        slider.on(\"slide\", function(e, ui){\n            var val = ui.value;\n            $input.val(val);\n            callback(val);\n        });\n        return slider;\n    }\n\n    return {\n        setDeltaT: setDeltaT,\n        updateCreasePercent: updateCreasePercent,\n        setSliderInputVal: setSliderInputVal,\n        \n        // Start slider animation when controls become visible\n        startSliderAutoAnimation: function() {\n            if (globals.threeView && globals.threeView.startSliderAnimation) {\n                console.log(' Controls visible - starting slider auto animation');\n                globals.threeView.startSliderAnimation(0, 100, 4000, true, 5000); // 4s animation, loop enabled, 5s pause\n            }\n        }\n    }\n}</script> <script type=\"text/javascript\">function initThreeView(i){function t(){D.zoom=7,D.updateProjectionMatrix(),D.position.x=0,D.position.y=0,D.position.z=10,A&&A.reset(new THREE.Vector3(0,0,1))}function n(i){A.reset(new THREE.Vector3(i,0,0))}function e(i){A.reset(new THREE.Vector3(0,i,0))}function o(i){A.reset(new THREE.Vector3(0,0,i))}function a(){A.reset(new THREE.Vector3(1,1,1))}function l(){i.multiAxisRotation.x=2*(Math.random()-.5)*(.003+.007*Math.random()),i.multiAxisRotation.y=2*(Math.random()-.5)*(.003+.007*Math.random()),i.multiAxisRotation.z=2*(Math.random()-.5)*(.003+.007*Math.random()),console.log(\" New random rotation speeds:\",{x:i.multiAxisRotation.x.toFixed(4),y:i.multiAxisRotation.y.toFixed(4),z:i.multiAxisRotation.z.toFixed(4)})}function s(){console.log(\"starting animation\"),E.animate(m)}function r(){i.simulationRunning=!1,console.log(\"pausing simulation\")}function g(){console.log(\"starting simulation\"),i.simulationRunning=!0}function d(){if(i.vrEnabled)return void i.vive.render();if(E.render(S,D),i.capturer){if(\"png\"==i.capturer){return i.threeView.renderer.domElement.toBlob(function(t){saveAs(t,i.screenRecordFilename+\".png\")},\"image/png\"),i.capturer=null,i.shouldScaleCanvas=!1,i.shouldAnimateFoldPercent=!1,void i.threeView.onWindowResize()}w.html(\"( \"+ ++i.capturerFrames+\" frames  at \"+i.currentFPS+\"fps )\"),i.capturer.capture(E.domElement)}}function m(){if(i.autoRotateEnabled){var t=performance.now();null===i.autoRotateStartTime&&(i.autoRotateStartTime=t,i.lastRotationChangeTime=t,i.randomRotationEnabled&&l());var n=t-i.autoRotateStartTime;if(n>=i.autoRotateWaitTime){if(i.randomRotationEnabled&&i.lastRotationChangeTime){t-i.lastRotationChangeTime>=i.rotationChangeInterval&&(l(),i.lastRotationChangeTime=t)}b.rotateX(i.multiAxisRotation.x),b.rotateY(i.multiAxisRotation.y),b.rotateZ(i.multiAxisRotation.z)}}if(i.sliderAutoAnimationEnabled){var t=performance.now();if(\"animating\"===i.sliderAnimationState){null===i.sliderAnimationStartTime&&(i.sliderAnimationStartTime=t);var n=t-i.sliderAnimationStartTime,e=Math.min(n/i.sliderAnimationDuration,1),o=.5-Math.cos(e*Math.PI)/2,a=i.sliderAnimationStartValue+(i.sliderAnimationEndValue-i.sliderAnimationStartValue)*o,s=a/100*(i.currentPatternMaxFolding/100);i.creasePercent=s,i.shouldChangeCreasePercent=!0,i.controls&&i.controls.updateCreasePercent&&i.controls.updateCreasePercent(),e>=1&&(console.log(\" Slider animation phase completed, starting pause\"),i.sliderAnimationState=\"pausing\",i.sliderAnimationPauseStartTime=t,i.sliderAnimationStartTime=null)}else if(\"pausing\"===i.sliderAnimationState){null===i.sliderAnimationPauseStartTime&&(i.sliderAnimationPauseStartTime=t);var r=t-i.sliderAnimationPauseStartTime;if(r>=i.sliderAnimationPauseTime)if(console.log(\" Pause completed, reversing animation direction\"),i.sliderAnimationLoop){var g=i.sliderAnimationStartValue;i.sliderAnimationStartValue=i.sliderAnimationEndValue,i.sliderAnimationEndValue=g,i.sliderAnimationDirection*=-1,i.sliderAnimationState=\"animating\",i.sliderAnimationPauseStartTime=null,i.sliderAnimationStartTime=null,console.log(\" Starting next animation phase: \"+i.sliderAnimationStartValue+\"  \"+i.sliderAnimationEndValue)}else console.log(\" Slider animation loop completed\"),i.sliderAutoAnimationEnabled=!1,i.sliderAnimationStartTime=null,i.sliderAnimationPauseStartTime=null}}if(null!==i.rotateModel&&(\"x\"==i.rotateModel&&b.rotateX(i.rotationSpeed),\"y\"==i.rotateModel&&b.rotateY(i.rotationSpeed),\"z\"==i.rotateModel&&b.rotateZ(i.rotationSpeed)),i.needsSync&&i.model.sync(),i.simNeedsSync&&i.model.syncSolver(),i.simulationRunning&&i.model.step(),i.vrEnabled)return void d();A.update(),d()}function h(i){b.add(i)}function u(){if(i.vrEnabled)return void i.warn(\"Can't resize window when in VR mode.\");D.aspect=window.innerWidth/window.innerHeight,D.updateProjectionMatrix();var t=1;i.shouldScaleCanvas&&(t=i.capturerScale),E.setSize(t*window.innerWidth,t*window.innerHeight),A.handleResize()}function c(i){A.enabled=i,A.enableRotate=i}function f(){b.rotation.set(0,0,0)}function p(i){console.log(\" Background color change ignored - using transparent background\")}function R(){console.log(\" Updating lighting settings\"),L.frontMain&&(L.frontMain.intensity=i.lighting.frontMain.intensity,L.frontMain.position.set(i.lighting.frontMain.position.x,i.lighting.frontMain.position.y,i.lighting.frontMain.position.z)),L.backLight&&(L.backLight.intensity=i.lighting.backLight.intensity,L.backLight.position.set(i.lighting.backLight.position.x,i.lighting.backLight.position.y,i.lighting.backLight.position.z)),L.sideLeft&&(L.sideLeft.intensity=i.lighting.sideLeft.intensity,L.sideLeft.position.set(i.lighting.sideLeft.position.x,i.lighting.sideLeft.position.y,i.lighting.sideLeft.position.z)),L.sideRight&&(L.sideRight.intensity=i.lighting.sideRight.intensity,L.sideRight.position.set(i.lighting.sideRight.position.x,i.lighting.sideRight.position.y,i.lighting.sideRight.position.z)),L.frontDetail1&&(L.frontDetail1.intensity=i.lighting.frontDetail1.intensity,L.frontDetail1.position.set(i.lighting.frontDetail1.position.x,i.lighting.frontDetail1.position.y,i.lighting.frontDetail1.position.z)),L.frontDetail2&&(L.frontDetail2.intensity=i.lighting.frontDetail2.intensity,L.frontDetail2.position.set(i.lighting.frontDetail2.position.x,i.lighting.frontDetail2.position.y,i.lighting.frontDetail2.position.z)),L.ambient&&(L.ambient.intensity=i.lighting.ambient.intensity),console.log(\" Lighting settings updated\")}function y(){return{frontMain:{intensity:L.frontMain?L.frontMain.intensity:0,position:L.frontMain?L.frontMain.position:{x:0,y:0,z:0}},backLight:{intensity:L.backLight?L.backLight.intensity:0,position:L.backLight?L.backLight.position:{x:0,y:0,z:0}},sideLeft:{intensity:L.sideLeft?L.sideLeft.intensity:0,position:L.sideLeft?L.sideLeft.position:{x:0,y:0,z:0}},sideRight:{intensity:L.sideRight?L.sideRight.intensity:0,position:L.sideRight?L.sideRight.position:{x:0,y:0,z:0}},frontDetail1:{intensity:L.frontDetail1?L.frontDetail1.intensity:0,position:L.frontDetail1?L.frontDetail1.position:{x:0,y:0,z:0}},frontDetail2:{intensity:L.frontDetail2?L.frontDetail2.intensity:0,position:L.frontDetail2?L.frontDetail2.position:{x:0,y:0,z:0}},ambient:{intensity:L.ambient?L.ambient.intensity:0}}}var A,S=new THREE.Scene,b=new THREE.Object3D,D=new THREE.PerspectiveCamera(60,window.innerWidth/window.innerHeight,.1,500),E=new THREE.WebGLRenderer({antialias:!0,alpha:!0}),L={frontMain:null,backLight:null,sideLeft:null,sideRight:null,frontDetail1:null,frontDetail2:null,ambient:null};!function(){var n=$(\"#threeContainer\");E.setPixelRatio(window.devicePixelRatio),E.setSize(window.innerWidth,window.innerHeight),E.setClearColor(0,0),n.append(E.domElement),E.domElement.style.background=\"transparent\",E.domElement.style.backgroundColor=\"transparent\",S.background=null,b.rotation.x=Math.PI/2,S.add(b),console.log(\" ThreeView: Initializing lighting with globals settings:\"),console.log(\"- frontMain intensity:\",i.lighting.frontMain.intensity),console.log(\"- frontDetail1 intensity:\",i.lighting.frontDetail1.intensity),console.log(\"- frontDetail2 intensity:\",i.lighting.frontDetail2.intensity),console.log(\"- ambient intensity:\",i.lighting.ambient.intensity),L.frontMain=new THREE.DirectionalLight(16777215,i.lighting.frontMain.intensity),L.frontMain.position.set(i.lighting.frontMain.position.x,i.lighting.frontMain.position.y,i.lighting.frontMain.position.z),S.add(L.frontMain),L.backLight=new THREE.DirectionalLight(16777215,i.lighting.backLight.intensity),L.backLight.position.set(i.lighting.backLight.position.x,i.lighting.backLight.position.y,i.lighting.backLight.position.z),S.add(L.backLight),L.sideLeft=new THREE.DirectionalLight(16777215,i.lighting.sideLeft.intensity),L.sideLeft.position.set(i.lighting.sideLeft.position.x,i.lighting.sideLeft.position.y,i.lighting.sideLeft.position.z),S.add(L.sideLeft),L.sideRight=new THREE.DirectionalLight(16777215,i.lighting.sideRight.intensity),L.sideRight.position.set(i.lighting.sideRight.position.x,i.lighting.sideRight.position.y,i.lighting.sideRight.position.z),S.add(L.sideRight),L.frontDetail1=new THREE.DirectionalLight(16777215,i.lighting.frontDetail1.intensity),L.frontDetail1.position.set(i.lighting.frontDetail1.position.x,i.lighting.frontDetail1.position.y,i.lighting.frontDetail1.position.z),S.add(L.frontDetail1),L.frontDetail2=new THREE.DirectionalLight(16777215,i.lighting.frontDetail2.intensity),L.frontDetail2.position.set(i.lighting.frontDetail2.position.x,i.lighting.frontDetail2.position.y,i.lighting.frontDetail2.position.z),S.add(L.frontDetail2),L.ambient=new THREE.AmbientLight(16777215,i.lighting.ambient.intensity),S.add(L.ambient),console.log(\" ThreeView: Lighting initialization completed\"),S.add(D),t(),A=new THREE.TrackballControls(D,E.domElement),A.rotateSpeed=4,A.zoomSpeed=15,A.noPan=!0,A.staticMoving=!0,A.dynamicDampingFactor=.3,A.minDistance=1,A.maxDistance=30,d()}();var w=$(\"#stopRecord>span\");return{sceneAddModel:h,onWindowResize:u,startAnimation:s,startSimulation:g,pauseSimulation:r,enableControls:c,scene:S,camera:D,renderer:E,modelWrapper:b,setCameraX:n,setCameraY:e,setCameraZ:o,setCameraIso:a,resetModel:f,resetCamera:t,setBackgroundColor:p,startAutoRotation:function(t,n){t=void 0===t||t,n=void 0!==n?n:8e3,console.log(\" Starting auto rotation animation\"+(t?\" with random directions (change every \"+n+\"ms)\":\"\")),i.autoRotateEnabled=!0,i.autoRotateStartTime=null,i.randomRotationEnabled=t,i.rotationChangeInterval=n,i.lastRotationChangeTime=null},stopAutoRotation:function(){console.log(\" Stopping auto rotation animation\"),i.autoRotateEnabled=!1,i.autoRotateStartTime=null,i.lastRotationChangeTime=null},startSliderAnimation:function(t,n,e,o,a){t=void 0!==t?t:0,n=void 0!==n?n:100,e=void 0!==e?e:4e3,o=void 0===o||o,a=void 0!==a?a:5e3,console.log(\" Starting slider animation from \"+t+\" to \"+n+\" over \"+e+\"ms\"+(o?\" (looping with \"+a+\"ms pauses)\":\"\")),i.sliderAutoAnimationEnabled=!0,i.sliderAnimationStartTime=null,i.sliderAnimationStartValue=t,i.sliderAnimationEndValue=n,i.sliderAnimationDuration=e,i.sliderAnimationLoop=o,i.sliderAnimationPauseTime=a,i.sliderAnimationState=\"animating\",i.sliderAnimationPauseStartTime=null,i.sliderAnimationDirection=t<n?1:-1},stopSliderAnimation:function(){console.log(\" Stopping slider animation\"),i.sliderAutoAnimationEnabled=!1,i.sliderAnimationStartTime=null,i.sliderAnimationPauseStartTime=null,i.sliderAnimationState=\"animating\"},generateRandomRotationSpeeds:l,setRandomRotationInterval:function(t){i.rotationChangeInterval=t,console.log(\" Set random rotation change interval to \"+t+\"ms\")},updateLighting:R,getLightingSettings:y}}</script> <script type=\"text/javascript\">function initGlobals(){function e(e){R.creasePercent=e,e*=100,$(\"#creasePercent>div\").slider({value:e}),$(\"#creasePercent>input\").val(e.toFixed(0)),$(\"#creasePercentNav>div\").slider({value:e}),$(\"#creasePercentBottom>div\").slider({value:e})}function t(e){R.currentPatternMaxFolding=e,\"function\"==typeof updateFoldingSliderMax&&updateFoldingSliderMax()}function n(e){\"\"!=$(\"#warningMessage\").html()?$(\"#warningMessage\").append(\"<br/><hr>\"+e):$(\"#warningMessage\").html(e),$(\"#warningModal\").hasClass(\"show\")||$(\"#warningModal\").modal(\"show\")}function o(){return 0==$(\"#svgViewer>svg\").length}function a(e,t,n){function o(e){$(\"#compressionStatus\").text(e)}var a=1024*t*1024;if(e.size<=a)return console.log(\"File size OK:\",Math.round(e.size/1024)+\"KB\"),o(\"\"),void n(e);o(\"Compressing \"+e.name+\" (\"+Math.round(e.size/1024/1024)+\"MB)...\"),console.log(\"Compressing large image:\",e.name,\"from\",Math.round(e.size/1024/1024)+\"MB\");var i=document.createElement(\"canvas\"),r=i.getContext(\"2d\"),l=new Image;l.onload=function(){function t(){o(\"Optimizing \"+e.name+\" (attempt \"+(m+1)+\")...\"),i.toBlob(function(i){if(i){var r=i.size/1024/1024;if(console.log(\"Compression attempt\",m+1,\"- Size:\",Math.round(1e3*r)/1e3+\"MB\",\"Quality:\",c),i.size<=a||m>=f||c<=.3){var l=new File([i],e.name,{type:i.type||\"image/jpeg\",lastModified:Date.now()}),s=Math.round(100*(1-l.size/e.size));o(\" Compressed \"+e.name+\" by \"+s+\"% (\"+Math.round(e.size/1024/1024*100)/100+\"MB  \"+Math.round(l.size/1024/1024*100)/100+\"MB)\"),console.log(\"Compression completed:\",\"Original:\",Math.round(e.size/1024/1024*100)/100+\"MB\",\"Compressed:\",Math.round(l.size/1024/1024*100)/100+\"MB\",\"Reduction:\",s+\"%\"),setTimeout(function(){o(\"\")},3e3),n(l)}else m++,c*=.8,t()}else console.error(\"Failed to create compressed blob\"),o(\" Compression failed, using original file\"),setTimeout(function(){o(\"\")},3e3),n(e)},\"image/jpeg\",c)}var s=Math.sqrt(a/e.size),g=Math.floor(l.width*s),d=Math.floor(l.height*s);g=Math.max(g,256),d=Math.max(d,256);if(g>1024||d>1024){var u=1024/Math.max(g,d);g=Math.floor(g*u),d=Math.floor(d*u)}i.width=g,i.height=d,o(\"Resizing \"+e.name+\" to \"+g+\"\"+d+\"...\"),console.log(\"Resizing from\",l.width+\"x\"+l.height,\"to\",g+\"x\"+d),r.drawImage(l,0,0,g,d);var c=.8,m=0,f=5;t()},l.onerror=function(){console.error(\"Failed to load image for compression\"),o(\" Compression failed, using original file\"),setTimeout(function(){o(\"\")},3e3),n(e)};var s=new FileReader;s.onload=function(e){l.src=e.target.result},s.onerror=function(){console.error(\"Failed to read file for compression\"),o(\" Compression failed, using original file\"),setTimeout(function(){o(\"\")},3e3),n(e)},s.readAsDataURL(e)}function i(e,t){e.size>3145728&&(e.size>10485760?console.log(\"Very large texture file (\"+Math.round(e.size/1024/1024)+\"MB). Compressing to improve performance...\"):console.log(\"Large texture file (\"+Math.round(e.size/1024/1024)+\"MB). Compressing for better performance...\")),e.size>3145728?R.compressImage(e,3,function(e){r(e,t)}):r(e,t)}function r(e,t){function n(e){o||(o=!0,t&&t(e))}var o=!1,a=new FileReader;a.onload=function(t){(new THREE.TextureLoader).load(t.target.result,function(t){t.wrapS=THREE.RepeatWrapping,t.wrapT=THREE.RepeatWrapping,t.repeat.set(R.textureRepeat,R.textureRepeat),t.flipY=!1,t.generateMipmaps=!0,t.minFilter=THREE.LinearFilter,t.magFilter=THREE.LinearFilter,t.name=e.name,t.image?(t.image.crossOrigin=\"anonymous\",t.image.complete?(console.log(\" Texture image already complete:\",t.name,t.image.width+\"x\"+t.image.height),R.faceTexture=t,n(t)):(t.image.onload=function(){console.log(\" Texture image loaded completely:\",t.name,t.image.width+\"x\"+t.image.height),R.faceTexture=t,n(t)},t.image.onerror=function(){console.error(\" Failed to load texture image:\",t.name),n(null)})):(console.error(\" Texture has no image data:\",t.name),n(null))},function(e){console.log(\"Loading texture progress:\",e)},function(t){console.error(\" Error loading texture:\",e.name,t),R.warn(\"Failed to load texture file: \"+e.name),n(null)})},a.onerror=function(t){console.error(\" Error reading file:\",e.name,t),R.warn(\"Failed to read texture file: \"+e.name),n(null)},a.readAsDataURL(e)}function l(e,t){function n(e){var t=document.getElementById(\"compressionStatus\");t&&(t.textContent=e)}function o(e){if(e>=r){R.textureLibrary=[];for(var t=0;t<s.length;t++)s[t]&&R.textureLibrary.push(s[t]);return void a()}var n=g[e];if(![\"image/png\",\"image/jpeg\",\"image/jpg\",\"image/avif\",\"image/webp\",\"image/gif\"].includes(n.type))return console.warn(\"Unsupported file type:\",n.type,\"for file:\",n.name),l.push(n.name+\" (unsupported format)\"),s[e]=null,void o(e+1);console.log(\" Loading texture \"+(e+1)+\"/\"+r+\":\",n.name),i(n,function(t){if(t){for(var a=!1,i=0;i<e;i++)if(s[i]&&s[i].name===t.name){a=!0;break}a?(console.log(\" Skipping duplicate texture:\",t.name),s[e]=null):(s[e]=t,console.log(\" Loaded texture \"+(e+1)+\":\",t.name),console.log(\"   - Image dimensions:\",t.image?t.image.width+\"x\"+t.image.height:\"No image\"))}else l.push(n.name+\" (load failed)\"),console.error(\" Failed to load texture:\",n.name),s[e]=null;o(e+1)})}function a(){var e=R.textureLibrary.length,o=l.length;console.log(\" Texture loading completed:\",e,\"successful,\",o,\"failed\"),console.log(\" Texture library contents:\");for(var a=0;a<R.textureLibrary.length;a++){var i=R.textureLibrary[a];console.log(\"- Index \"+a+\":\",i?i.name:\"NULL\",i&&i.image?\"(\"+i.image.width+\"x\"+i.image.height+\")\":\"(no image)\")}if(console.log(\" Checking conditions: textureLibrary.length =\",R.textureLibrary.length,\"model exists =\",!!R.model),R.textureLibrary.length>=1?(console.log(\" Textures detected, but skipping immediate assignment (waiting for simple texture generation)\"),R.randomTextures=!0,$(\"#randomTextures\").prop(\"checked\",!0)):(console.log(\" Conditions not met for random textures\"),R.textureLibrary.length<1&&console.log(\"   - No textures in library\")),!R.fold||!R.fold.faces_vertices)return console.warn(\" No origami pattern loaded. Please import an SVG pattern first for textures to display properly.\"),n(\" Load an origami pattern first for multi-texture support\"),void(t&&t(R.textureLibrary));if(o>0?(console.warn(\"Failed to load:\",l.join(\", \")),n(\" \"+e+\" loaded, \"+o+\" failed\")):n(\" \"+e+\" image\"+(e>1?\"s\":\"\")+\" loaded successfully\"),console.log(\" Auto-generating simple texture for loaded textures...\"),R.cellColorizer&&R.cellColorizer.generateTextureMappedCellImage){var r=!1;if(R.fold&&R.fold.vertices_coords&&R.fold.faces_vertices)r=!0,console.log(\" Using existing fold data for simple texture\");else if(R.pattern&&R.pattern.getFoldData)try{var s=R.pattern.getFoldData(!1);s&&s.vertices_coords&&s.faces_vertices&&(r=!0,console.log(\" Retrieved fold data from pattern for simple texture\"))}catch(e){console.warn(\" Failed to get fold data from pattern:\",e.message)}else if(R.curvedFolding&&R.curvedFolding.getFoldData)try{var s=R.curvedFolding.getFoldData(!1);s&&s.vertices_coords&&s.faces_vertices&&(r=!0,console.log(\" Retrieved fold data from curvedFolding for simple texture\"))}catch(e){console.warn(\" Failed to get fold data from curvedFolding:\",e.message)}if(r)try{console.log(\" Executing simple texture generation...\"),R.cellColorizer.generateTextureMappedCellImage(!0),console.log(\" Simple texture applied successfully\")}catch(e){console.error(\" Failed to generate simple texture:\",e),console.log(\" Falling back to first texture only\"),R.faceTexture=R.textureLibrary[0],R.useSimpleTextureMode=!0,R.isCellGeneratedTexture=!1,R.model&&R.model.setMeshMaterial&&R.model.setMeshMaterial()}else console.warn(\" No fold data available, using basic single texture\"),R.faceTexture=R.textureLibrary[0],R.useSimpleTextureMode=!0,R.isCellGeneratedTexture=!1,R.model&&R.model.setMeshMaterial&&R.model.setMeshMaterial()}else console.warn(\" cellColorizer not available, using basic single texture\"),R.faceTexture=R.textureLibrary[0],R.useSimpleTextureMode=!0,R.isCellGeneratedTexture=!1,R.model&&R.model.setMeshMaterial&&R.model.setMeshMaterial();setTimeout(function(){n(\"\")},3e3),t&&t(R.textureLibrary)}R.textureLibrary=[],R.faceTextureMapping={};var r=e.length,l=[],s=[];if(0===r)return void(t&&t([]));console.log(\" Loading\",r,\"texture files in deterministic order...\");var g=Array.from(e).sort(function(e,t){return e.name.localeCompare(t.name)});console.log(\" Sorted file order:\");for(var d=0;d<g.length;d++)console.log(\"  \"+d+\": \"+g[d].name);n(\" Loading \"+r+\" image\"+(r>1?\"s\":\"\")+\" in order...\");var s=new Array(r);o(0)}function s(){var e=$(\"#textureList\");e.empty(),R.textureLibrary.forEach(function(t,n){if(t){var o=$('<div class=\"texture-item\" style=\"margin: 5px 0; padding: 5px; border: 1px solid #ccc; cursor: pointer;\"><span style=\"font-weight: bold;\">Texture '+(n+1)+\":</span> \"+t.name+'<button class=\"btn btn-xs btn-danger\" style=\"float: right; margin-left: 10px;\" onclick=\"removeTexture('+n+')\">Remove</button><button class=\"btn btn-xs btn-primary\" style=\"float: right;\" onclick=\"selectTexture('+n+')\">Select</button></div>');n===R.selectedTexture&&o.css(\"background-color\",\"#e6f3ff\"),e.append(o)}})}function g(e){e>=0&&e<R.textureLibrary.length&&R.textureLibrary[e]&&(R.selectedTexture=e,R.faceTexture=R.textureLibrary[e],s(),R.model&&R.model.setMeshMaterial())}function d(e){if(e>=0&&e<R.textureLibrary.length){R.textureLibrary.splice(e,1);var t={};Object.keys(R.faceTextureMapping).forEach(function(n){var o=R.faceTextureMapping[n];o>e?t[n]=o-1:o<e&&(t[n]=o)}),R.faceTextureMapping=t,R.selectedTexture>=R.textureLibrary.length&&(R.selectedTexture=Math.max(0,R.textureLibrary.length-1)),R.textureLibrary.length>0?R.faceTexture=R.textureLibrary[R.selectedTexture]:R.faceTexture=null,s(),R.model&&R.model.setMeshMaterial()}}function u(){if(console.log(\" assignRandomTextures called at:\",(new Date).toISOString()),console.log(\" Using seed:\",R.randomSeed,\"| Seeded random enabled:\",R.useSeededRandom),R.randomFunction&&R.useSeededRandom||(console.log(\" Re-initializing random seed before texture assignment\"),R.initializeRandomSeed(R.randomSeed)),!R.model||0===R.textureLibrary.length)return void console.warn(\"Cannot assign random textures: missing model or textures\");console.log(\" Pre-assignment texture library verification:\"),console.log(\"- Library length:\",R.textureLibrary.length);for(var e=0;e<R.textureLibrary.length;e++){var t=R.textureLibrary[e];console.log(\"  [\"+e+\"]\",t?t.name:\"NULL\",t&&t.image?\"\":\"\")}var n;if(R.fold&&R.fold.faces_vertices?(n=R.fold.faces_vertices,console.log(\"Using fold data for faces:\",n.length,\"faces\")):(n=R.model.getFaces(),console.log(\"Using model data for faces:\",n?n.length:0,\"faces\")),!n||0===n.length)return void console.warn(\"No faces found in model\");console.log(\" Assigning\",R.textureLibrary.length,\"textures randomly to\",n.length,\"faces\"),R.faceTextureMapping={};var o=R.textureLibrary.length,a=[];if(n.length>=o){for(var e=0;e<o;e++)a.push(e);console.log(\" Guaranteed assignment: Each of\",o,\"textures gets at least 1 face\");for(var i=n.length-o,r=0;r<i;r++){var l=r%o;a.push(l)}}else{console.log(\" More textures (\"+o+\") than faces (\"+n.length+\") - some textures won't be used\");for(var g=0;g<n.length;g++)a.push(g%o)}console.log(\" Initial distribution before shuffle:\");for(var d={},u=0;u<a.length;u++){var c=a[u];d[c]=(d[c]||0)+1}for(var c in d)console.log(\"- Texture \"+c+\": \"+d[c]+\" faces\");R.useSeededRandom&&(console.log(\" Resetting random seed state for deterministic assignment\"),R.initializeRandomSeed(R.randomSeed)),console.log(\" Using seeded random values for texture assignment:\"),console.log(\" Current seed:\",R.randomSeed),console.log(\" Seeded random function available:\",!!R.randomFunction),console.log(\" faceAssignments array length:\",a.length),console.log(\" faceAssignments before shuffle:\",JSON.stringify(a));for(var m=[],r=a.length-1;r>0;r--){var f=R.getSeededRandom();m.push(f)}console.log(\" Generated seeded random values: [\"+m.slice(0,10).map(function(e){return e.toFixed(6)}).join(\", \")+(m.length>10?\"...\":\"\")+\"]\");for(var x=0,r=a.length-1;r>0;r--){var f=m[x],u=Math.floor(f*(r+1));x++,x<=10&&console.log(\"Step \"+(a.length-1-r)+\": seeded random=\"+f.toFixed(6)+\", j=\"+u+\", swapping indices \"+r+\"  \"+u);var h=a[r];a[r]=a[u],a[u]=h}console.log(\" All seeded random values: [\"+m.map(function(e){return e.toFixed(6)}).join(\", \")+\"]\"),console.log(\" faceAssignments after shuffle:\",JSON.stringify(a));for(var g=0;g<n.length;g++)void 0!==a[g]&&(R.faceTextureMapping[g]=a[g]);console.log(\" Final face mapping (first 20 faces):\");for(var g=0;g<Math.min(20,n.length);g++)console.log(\"Face \"+g+\"  Texture \"+R.faceTextureMapping[g]);var p={};for(var y in R.faceTextureMapping){var c=R.faceTextureMapping[y];p[c]=(p[c]||0)+1}console.log(\" Random texture assignment completed:\"),console.log(\" Final texture usage statistics:\");var v=0,b=[];for(var c in p){var M=R.textureLibrary[c]?R.textureLibrary[c].name:\"Texture \"+(parseInt(c)+1),T=p[c],L=(T/n.length*100).toFixed(1);console.log(\"- \"+M+\": \"+T+\" faces (\"+L+\"%)\"),v+=T}for(var r=0;r<R.textureLibrary.length;r++)if(!p.hasOwnProperty(r)){var M=R.textureLibrary[r]?R.textureLibrary[r].name:\"Texture \"+(r+1);b.push(M)}b.length>0?(console.warn(\" Unused textures detected:\",b.join(\", \")),console.warn(\"This indicates a distribution problem!\")):console.log(\" All textures are being used!\"),console.log(\" Total faces assigned:\",v,\"/ Expected:\",n.length),console.log(\" Sample assignments:\",Object.keys(R.faceTextureMapping).slice(0,10).map(function(e){return\"Face \"+e+\"  Texture \"+R.faceTextureMapping[e]})),s(),\"texture\"===R.colorMode&&(console.log(\" Updating material with new texture mapping\"),console.log(\" Material update context:\"),console.log(\"  - Atlas exists:\",!!R.textureAtlas),console.log(\"  - Atlas dimensions:\",R.textureAtlas?R.textureAtlas.image.width+\"x\"+R.textureAtlas.image.height:\"N/A\"),console.log(\"  - Face mapping size:\",Object.keys(R.faceTextureMapping).length),R.model.setMeshMaterial(),console.log(\" Material update completed\")),R.textureLibrary.length<=2&&R.model&&R.model.updateUVMapping&&(console.log(\" Forcing UV mapping update for single texture grid system\"),R.model.updateUVMapping())}function c(){if(0===R.textureLibrary.length)return console.warn(\" No textures available for atlas creation\"),null;if(1===R.textureLibrary.length)return console.log(\" Single texture detected, using original texture without atlas\"),R.textureLibrary[0];console.log(\" Creating texture atlas from\",R.textureLibrary.length,\"textures\"),console.log(\" Textures to include in atlas:\");for(var e=[],t=0;t<R.textureLibrary.length;t++){var n=R.textureLibrary[t],o=n&&n.image&&n.image.complete&&n.image.width>0&&n.image.height>0;console.log(\"- Texture \"+t+\":\",n?n.name:\"NULL\",\"Size:\",n&&n.image?n.image.width+\"x\"+n.image.height:\"No image\",\"Valid:\",o?\"\":\"\"),o&&e.push({index:t,texture:n})}if(0===e.length)return console.error(\" No valid textures found for atlas creation\"),null;e.length!==R.textureLibrary.length&&console.warn(\" Some textures are invalid:\",R.textureLibrary.length-e.length,\"out of\",R.textureLibrary.length);var a=Math.ceil(Math.sqrt(e.length)),i=Math.ceil(e.length/a),r=document.createElement(\"canvas\"),l=r.getContext(\"2d\"),s=Math.floor(2048/Math.max(a,i));r.width=a*s,r.height=i*s,console.log(\"Atlas dimensions:\",r.width+\"x\"+r.height,\"Grid:\",a+\"x\"+i,\"Texture size:\",s+\"x\"+s,\"Valid textures:\",e.length+\"/\"+R.textureLibrary.length),R.atlasLayout={texturesPerRow:a,texturesPerCol:i,textureSize:s,width:r.width,height:r.height,regions:[],textureIndexMapping:{},validTextures:e};for(var t=0;t<e.length;t++){var g=e[t],d=g.index,u=Math.floor(t/a),c=t%a,m=c*s,f=u*s;R.atlasLayout.regions.push({x:m,y:f,width:s,height:s}),R.atlasLayout.textureIndexMapping[d]=t}l.clearRect(0,0,r.width,r.height),l.imageSmoothingEnabled=!0,l.imageSmoothingQuality=\"high\";for(var x=0,h=[],t=0;t<e.length;t++){var g=e[t],n=g.texture,d=g.index,u=Math.floor(t/a),c=t%a,m=c*s,f=u*s;try{l.drawImage(n.image,m,f,s,s),console.log(\" Drew texture\",d,\"'\"+n.name+\"' at atlas position [\"+m+\",\"+f+\"]\"),h.push({originalIndex:d,atlasIndex:t,name:n.name,position:[m,f],size:[s,s]}),x++}catch(e){console.error(\" Failed to draw texture\",d,\"to atlas:\",e)}}console.log(\" Atlas drawing summary:\"),console.log(\"- Total textures in library:\",R.textureLibrary.length),console.log(\"- Valid textures found:\",e.length),console.log(\"- Successfully drawn:\",x),console.log(\"- Drawn texture details:\");for(var t=0;t<h.length;t++){var p=h[t];console.log(\"  * Slot \"+p.atlasIndex+\": \"+p.name+\" (original index \"+p.originalIndex+\")\")}console.log(\" Texture index mapping:\");for(var d in R.atlasLayout.textureIndexMapping){var y=R.atlasLayout.textureIndexMapping[d],v=R.textureLibrary[d]?R.textureLibrary[d].name:\"unknown\";console.log(\"  * Original index \"+d+\" (\"+v+\")  Atlas position \"+y)}for(var b=[],t=0;t<e.length;t++){var d=e[t].index;h.some(function(e){return e.originalIndex===d})||b.push(d+\":\"+e[t].texture.name)}if(b.length>0?console.error(\" Missing valid textures from atlas:\",b.join(\", \")):console.log(\" All valid textures successfully included in atlas\"),0===x)return console.warn(\"No textures could be added to atlas\"),R.textureLibrary[0];var M=new THREE.CanvasTexture(r);M.wrapS=THREE.RepeatWrapping,M.wrapT=THREE.RepeatWrapping,M.minFilter=THREE.LinearFilter,M.magFilter=THREE.LinearFilter,M.flipY=!1,M.name=\"TextureAtlas_\"+R.textureLibrary.length+\"textures\",M.needsUpdate=!0,console.log(\"Texture atlas created successfully:\",M.name,\"with\",x,\"textures\");var T=document.getElementById(\"compressionStatus\");return T&&(T.textContent=\" Created texture atlas with \"+x+\" textures\",setTimeout(function(){T.textContent=\"\"},3e3)),M}function m(e,t){if(t>=0&&t<R.textureLibrary.length&&(R.faceTextureMapping[e]=t,console.log(\"Assigned texture\",t,\"to face\",e),R.model&&\"texture\"===R.colorMode)){var n=c();n&&(R.faceTexture=n,R.model.setMeshMaterial())}}function f(e){e&&R.faceTexture?R.colorMode=\"texture\":R.colorMode=\"color\",R.model.setMeshMaterial()}function x(e){void 0===e?e=R.randomSeed:R.randomSeed=e,console.log(\" Initializing global random seed:\",e);for(var t=0,n=0;n<e.length;n++){t=(t<<5)-t+e.charCodeAt(n)&4294967295}0===(t=Math.abs(t))&&(t=1);var o=t%2147483647;o<=0&&(o+=2147483646),R.randomFunction=function(){return((o=16807*o%2147483647)-1)/2147483646},R.useSeededRandom=!0,console.log(\" Using custom seeded random generator with hash:\",t),console.log(\" Random seed initialized. Seeded random:\",R.useSeededRandom),y()}function h(){return R.useSeededRandom&&R.randomFunction?R.randomFunction():Math.random()}function p(e){console.log(\" Changing random seed to:\",e),console.log(\" Previous seed was:\",R.randomSeed),x(e),R.faceTextureMapping={},R.textureLibrary.length>0&&R.model?(console.log(\" Regenerating ALL texture assignments with new seed\"),console.log(\" Texture library has\",R.textureLibrary.length,\"textures\"),u(),R.model.setMeshMaterial&&(console.log(\" Updating mesh material with new texture assignments\"),R.model.setMeshMaterial())):console.log(\" Cannot regenerate texture assignments:\",\"textures=\"+R.textureLibrary.length,\"model=\"+!!R.model),console.log(\" Random seed change completed. New seed:\",R.randomSeed)}function y(){R.useSeededRandom&&R.randomFunction?(console.log(\" Overriding Math.random with seeded function\"),Math.random=R.getSeededRandom):(console.log(\" Using original Math.random\"),Math.random=C)}function v(){console.log(\" Restoring original Math.random\"),Math.random=C}function b(e,t){R.lighting[e]&&\"number\"==typeof t?(R.lighting[e].intensity=Math.max(0,Math.min(10,t)),console.log(\" Set\",e,\"intensity to\",R.lighting[e].intensity),R.threeView&&R.threeView.updateLighting&&R.threeView.updateLighting()):console.warn(\"Invalid light name or intensity value:\",e,t)}function M(e,t,n,o){R.lighting[e]&&R.lighting[e].position?(R.lighting[e].position.x=t||0,R.lighting[e].position.y=n||0,R.lighting[e].position.z=o||0,console.log(\" Set\",e,\"position to\",R.lighting[e].position),R.threeView&&R.threeView.updateLighting&&R.threeView.updateLighting()):console.warn(\"Invalid light name:\",e)}function T(e){console.log(\" Adjusting front lighting to intensity:\",e),b(\"frontMain\",e),b(\"frontDetail1\",.875*e),b(\"frontDetail2\",.5*e)}function L(){console.log(\" Resetting lighting to default values\"),R.lighting.frontMain.intensity=.8,R.lighting.backLight.intensity=.3,R.lighting.sideLeft.intensity=.6,R.lighting.sideRight.intensity=.6,R.lighting.frontDetail1.intensity=.7,R.lighting.frontDetail2.intensity=.4,R.lighting.ambient.intensity=.25,R.threeView&&R.threeView.updateLighting&&R.threeView.updateLighting()}function w(){console.log(\" Current lighting settings:\");for(var e in R.lighting){var t=R.lighting[e];t.position?console.log(\"  \"+e+\": intensity=\"+t.intensity+\", position=(\"+t.position.x+\",\"+t.position.y+\",\"+t.position.z+\")\"):console.log(\"  \"+e+\": intensity=\"+t.intensity)}return R.lighting}function S(e){\"function\"==typeof e&&(R.patternLoadingCallbacks.push(e),console.log(\" Pattern loading callback registered, total callbacks:\",R.patternLoadingCallbacks.length))}function F(e){console.log(\" Notifying pattern loaded:\",e);var t=R.patternLoadingCallbacks.slice();R.patternLoadingCallbacks=[],t.forEach(function(t,n){try{console.log(\" Calling pattern loading callback\",n),t(e)}catch(e){console.error(\" Error in pattern loading callback\",n,\":\",e)}})}console.log(\"initGlobals function called\");var R={navMode:\"simulation\",scale:1,editMode:!0,isNFTProcessing:!1,hideUntilTextured:!1,colorMode:\"color\",calcFaceStrain:!1,color1:\"ffffff\",color2:\"ffffff\",defaultOpacity:1,edgesVisible:!0,mtnsVisible:!0,valleysVisible:!0,panelsVisible:!1,passiveEdgesVisible:!1,boundaryEdgesVisible:!0,meshVisible:!0,ambientOcclusion:!1,faceTexture:null,textureRepeat:1,textureLibrary:[],faceTextureMapping:{},selectedTexture:0,randomTextures:!1,lighting:{frontMain:{intensity:1.2,position:{x:0,y:100,z:0}},backLight:{intensity:.3,position:{x:0,y:-100,z:0}},sideLeft:{intensity:.6,position:{x:100,y:-30,z:0}},sideRight:{intensity:.6,position:{x:-100,y:-30,z:0}},frontDetail1:{intensity:.6,position:{x:0,y:30,z:100}},frontDetail2:{intensity:.3,position:{x:0,y:30,z:-100}},ambient:{intensity:.35}},randomSeed:\"origami-simulator-2024\",randomFunction:null,useSeededRandom:!0,simulationRunning:!0,fixedHasChanged:!1,forceHasChanged:!1,materialHasChanged:!1,creaseMaterialHasChanged:!1,shouldResetDynamicSim:!1,shouldChangeCreasePercent:!1,nodePositionHasChanged:!1,shouldZeroDynamicVelocity:!1,shouldCenterGeo:!1,needsSync:!1,simNeedsSync:!1,menusVisible:!0,url:null,simType:\"dynamic\",creasePercent:0,maxFoldingPercent:100,currentPatternMaxFolding:100,axialStiffness:20,creaseStiffness:.7,panelStiffness:.7,faceStiffness:.2,percentDamping:.45,density:1,integrationType:\"euler\",strainClip:5,vertTol:3,foldUseAngles:!0,includeCurves:!1,vertInt:20,apprCurve:.2,filename:null,extension:null,doublesidedSTL:!1,doublesidedOBJ:!1,exportScale:1,thickenModel:!0,thickenOffset:5,polyFacesOBJ:!0,foldUnits:\"unit\",triangulateFOLDexport:!1,exportFoldAngle:!0,pausedForPatternView:!1,userInteractionEnabled:!1,vrEnabled:!1,numSteps:100,rotateModel:null,rotationSpeed:.01,autoRotateEnabled:!1,autoRotateStartTime:null,autoRotateWaitTime:3e3,multiAxisRotation:{x:.005,y:.008,z:.003},randomRotationEnabled:!0,rotationChangeInterval:6e3,lastRotationChangeTime:null,sliderAutoAnimationEnabled:!1,sliderAnimationStartTime:null,sliderAnimationDuration:4e3,sliderAnimationDirection:1,sliderAnimationStartValue:0,sliderAnimationEndValue:100,sliderAnimationLoop:!0,sliderAnimationPauseTime:5e3,sliderAnimationState:\"animating\",sliderAnimationPauseStartTime:null,backgroundColor:\"ffffff\",capturer:null,capturerQuality:63,capturerFPS:60,gifFPS:20,currentFPS:null,capturerScale:1,capturerFrames:0,shouldScaleCanvas:!1,isGif:!1,shouldAnimateFoldPercent:!1};R.setCreasePercent=e,R.setMaxFolding=t,$(\"#warningModal\").on(\"hidden.bs.modal\",function(){$(\"#warningMessage\").html(\"\")}),R.warn=n,R.noCreasePatternAvailable=o,R.compressImage=a,R.loadTexture=i,R.loadMultipleTextures=l,R.updateTextureList=s,R.selectTexture=g,R.removeTexture=d,R.assignRandomTextures=u,R.createTextureAtlas=c,R.assignTextureToFace=m,window.selectTexture=R.selectTexture,window.removeTexture=R.removeTexture,R.setTextureMode=f,R.initializeRandomSeed=x,R.getSeededRandom=h,R.setRandomSeed=p,x();var C=Math.random;return R.enableGlobalRandomOverride=y,R.disableGlobalRandomOverride=v,R.originalMathRandom=C,R.setLightIntensity=b,R.setLightPosition=M,R.adjustFrontLighting=T,R.resetLightingToDefaults=L,R.getLightingInfo=w,R.patternLoadingCallbacks=[],R.onPatternLoaded=S,R.notifyPatternLoaded=F,y(),console.log(\"initGlobals function completed successfully\"),R}console.log(\"Loading globals.js...\"),console.log(\"globals.js loaded successfully, initGlobals function defined\");</script> <script type=\"text/javascript\">function Node(e,t){this.type=\"node\",this.index=t,this._originalPosition=e.clone(),this.beams=[],this.creases=[],this.invCreases=[],this.externalForce=null,this.fixed=!1}var nodeMaterial=new THREE.MeshBasicMaterial({color:0,side:THREE.DoubleSide}),transparentMaterial=new THREE.MeshBasicMaterial({color:16777215,opacity:.5,transparent:!0}),transparentVRMaterial=new THREE.MeshBasicMaterial({color:16777215,opacity:.8,transparent:!0}),nodeGeo=new THREE.SphereGeometry(.02,20);Node.prototype.setFixed=function(e){this.fixed=e},Node.prototype.isFixed=function(){return this.fixed},Node.prototype.addExternalForce=function(e){},Node.prototype.getExternalForce=function(){return this.externalForce?this.externalForce.getForce():new THREE.Vector3(0,0,0)},Node.prototype.addCrease=function(e){this.creases.push(e)},Node.prototype.removeCrease=function(e){if(null!==this.creases){var t=this.creases.indexOf(e);t>=0&&this.creases.splice(t,1)}},Node.prototype.addInvCrease=function(e){this.invCreases.push(e)},Node.prototype.removeInvCrease=function(e){if(null!==this.invCreases){var t=this.invCreases.indexOf(e);t>=0&&this.invCreases.splice(t,1)}},Node.prototype.addBeam=function(e){this.beams.push(e)},Node.prototype.removeBeam=function(e){if(null!==this.beams){var t=this.beams.indexOf(e);t>=0&&this.beams.splice(t,1)}},Node.prototype.getBeams=function(){return this.beams},Node.prototype.numBeams=function(){return this.beams.length},Node.prototype.isConnectedTo=function(e){for(var t=0;t<this.beams.length;t++)if(this.beams[t].getOtherNode(this)==e)return!0;return!1},Node.prototype.numCreases=function(){return this.creases.length},Node.prototype.getIndex=function(){return this.index},Node.prototype.getObject3D=function(){return this.object3D},Node.prototype.setTransparent=function(){this.object3D||(this.object3D=new THREE.Mesh(nodeGeo,nodeMaterial),this.object3D.visible=!1),this.object3D.material=transparentMaterial},Node.prototype.setTransparentVR=function(){this.object3D||(this.object3D=new THREE.Mesh(nodeGeo,nodeMaterial),this.object3D.visible=!1),this.object3D.material=transparentVRMaterial,this.object3D.scale.set(.4,.4,.4)},Node.prototype.getOriginalPosition=function(){return this._originalPosition.clone()},Node.prototype.setOriginalPosition=function(e,t,o){this._originalPosition.set(e,t,o)},Node.prototype.getPosition=function(){var e=globals.model.getPositionsArray(),t=this.getIndex();return new THREE.Vector3(e[3*t],e[3*t+1],e[3*t+2])},Node.prototype.moveManually=function(e){var t=globals.model.getPositionsArray(),o=this.getIndex();t[3*o]=e.x,t[3*o+1]=e.y,t[3*o+2]=e.z},Node.prototype.getRelativePosition=function(){return this.getPosition().sub(this._originalPosition)},Node.prototype.getSimMass=function(){return 1},Node.prototype.destroy=function(){this.object3D=null,this.beams=null,this.creases=null,this.invCreases=null,this.externalForce=null};</script> <script type=\"text/javascript\">function Beam(t){this.type=\"beam\",t[0].addBeam(this),t[1].addBeam(this),this.vertices=[t[0]._originalPosition,t[1]._originalPosition],this.nodes=t,this.originalLength=this.getLength()}Beam.prototype.getLength=function(){return this.getVector().length()},Beam.prototype.getOriginalLength=function(){return this.originalLength},Beam.prototype.recalcOriginalLength=function(){this.originalLength=this.getVector().length()},Beam.prototype.isFixed=function(){return this.nodes[0].fixed&&this.nodes[1].fixed},Beam.prototype.getVector=function(t){return t==this.nodes[1]?this.vertices[0].clone().sub(this.vertices[1]):this.vertices[1].clone().sub(this.vertices[0])},Beam.prototype.getK=function(){return globals.axialStiffness/this.getLength()},Beam.prototype.getD=function(){return 2*globals.percentDamping*Math.sqrt(this.getK()*this.getMinMass())},Beam.prototype.getNaturalFrequency=function(){return Math.sqrt(this.getK()/this.getMinMass())},Beam.prototype.getMinMass=function(){var t=this.nodes[0].getSimMass();return this.nodes[1].getSimMass()<t&&(t=this.nodes[1].getSimMass()),t},Beam.prototype.getOtherNode=function(t){return this.nodes[0]==t?this.nodes[1]:this.nodes[0]},Beam.prototype.destroy=function(){var t=this;_.each(this.nodes,function(e){e.removeBeam(t)}),this.vertices=null,this.nodes=null};</script> <script type=\"text/javascript\">function Crease(e,t,n,o,s,i,r,a){this.edge=e;for(var h=0;h<e.nodes.length;h++)e.nodes[h].addInvCrease(this);this.face1Index=t,this.face2Index=n,this.targetTheta=o,this.type=s,this.node1=i,this.node2=r,this.index=a,i.addCrease(this),r.addCrease(this)}Crease.prototype.getLength=function(){return this.edge.getLength()},Crease.prototype.getVector=function(e){return this.edge.getVector(e)},Crease.prototype.getNormal1Index=function(){return this.face1Index},Crease.prototype.getNormal2Index=function(){return this.face2Index},Crease.prototype.getTargetTheta=function(){return this.targetTheta},Crease.prototype.getK=function(){var e=this.getLength();return 0==this.type?globals.panelStiffness*e:globals.creaseStiffness*e},Crease.prototype.getD=function(){return 2*globals.percentDamping*Math.sqrt(this.getK())},Crease.prototype.getIndex=function(){return this.index},Crease.prototype.getLengthToNode1=function(){return this.getLengthTo(this.node1)},Crease.prototype.getLengthToNode2=function(){return this.getLengthTo(this.node2)},Crease.prototype.getCoef1=function(e){return this.getCoef(this.node1,e)},Crease.prototype.getCoef2=function(e){return this.getCoef(this.node2,e)},Crease.prototype.getCoef=function(e,t){var n=this.getVector(t),o=n.length();n.normalize();var s=e.getOriginalPosition(),i=s.sub(t.getOriginalPosition()),r=n.dot(i),a=Math.sqrt(i.lengthSq()-r*r);return a<=0&&(console.warn(\"bad moment arm\"),a=.001),1-r/o},Crease.prototype.getLengthTo=function(e){var t=this.getVector().normalize(),n=e.getOriginalPosition(),o=n.sub(this.edge.nodes[1].getOriginalPosition()),s=t.dot(o),i=Math.sqrt(o.lengthSq()-s*s);return i<=0&&(console.warn(\"bad moment arm\"),i=.001),i},Crease.prototype.getNodeIndex=function(e){return e==this.node1?1:e==this.node2?2:e==this.edge.nodes[0]?3:e==this.edge.nodes[1]?4:(console.log(\"unknown node type\"),0)},Crease.prototype.setVisibility=function(){var e=!1;e=0==this.type?globals.panelsVisible:this.targetTheta>0&&globals.mtnsVisible||this.targetTheta<0&&globals.valleysVisible,this.edge.setVisibility(e)},Crease.prototype.destroy=function(){if(this.node1.removeCrease(this),this.node2.removeCrease(this),this.edge&&this.edge.nodes)for(var e=0;e<this.edge.nodes.length;e++)this.edge.nodes[e].removeInvCrease(this);this.edge=null,this.face1Index=null,this.face2Index=null,this.targetTheta=null,this.type=null,this.node1=null,this.node2=null,this.index=null};</script> <script type=\"text/javascript\">/**\n * Created by amandaghassaei on 2/24/17.\n */\n\n//model updates object3d geometry and materials\n\nfunction initModel(globals){\n\n    var material, material2, geometry;\n    var frontside = new THREE.Mesh();//front face of mesh\n    var backside = new THREE.Mesh();//back face of mesh (different color)\n    backside.visible = false;\n\n    var lineMaterial = new THREE.LineBasicMaterial({color: 0x000000, linewidth: 1});\n    var hingeLines = new THREE.LineSegments(null, lineMaterial);\n    var mountainLines = new THREE.LineSegments(null, lineMaterial);\n    var valleyLines = new THREE.LineSegments(null, lineMaterial);\n    var cutLines = new THREE.LineSegments(null, lineMaterial);\n    var facetLines = new THREE.LineSegments(null, lineMaterial);\n    var borderLines = new THREE.LineSegments(null, lineMaterial);\n\n    var lines = {\n        U: hingeLines,\n        M: mountainLines,\n        V: valleyLines,\n        C: cutLines,\n        F: facetLines,\n        B: borderLines\n    };\n\n    clearGeometries();\n    setMeshMaterial();\n\n    function clearGeometries(){\n\n        if (geometry) {\n            frontside.geometry = null;\n            backside.geometry = null;\n            geometry.dispose();\n        }\n\n        geometry = new THREE.BufferGeometry();\n        frontside.geometry = geometry;\n        backside.geometry = geometry;\n        // geometry.verticesNeedUpdate = true;\n        geometry.dynamic = true;\n\n        _.each(lines, function(line){\n            var lineGeometry = line.geometry;\n            if (lineGeometry) {\n                line.geometry = null;\n                lineGeometry.dispose();\n            }\n\n            lineGeometry = new THREE.BufferGeometry();\n            line.geometry = lineGeometry;\n            // lineGeometry.verticesNeedUpdate = true;\n            lineGeometry.dynamic = true;\n        });\n    }\n\n    globals.threeView.sceneAddModel(frontside);\n    globals.threeView.sceneAddModel(backside);\n    _.each(lines, function(line){\n        globals.threeView.sceneAddModel(line);\n    });\n\n    var positions;//place to store buffer geo vertex data\n    var colors;//place to store buffer geo vertex colors\n    var indices;\n    var nodes = [];\n    var faces = [];\n    var edges = [];\n    var creases = [];\n    var vertices = [];//indexed vertices array\n    var fold, creaseParams;\n\n    var nextCreaseParams, nextFold;//todo only nextFold, nextCreases?\n\n    var inited = false;\n\n    function setMeshMaterial() {\n        var polygonOffset = 0.5;\n        if (globals.colorMode == \"normal\") {\n            material = new THREE.MeshNormalMaterial({\n                flatShading:true,\n                side: THREE.FrontSide,  // \n                polygonOffset: true,\n                polygonOffsetFactor: polygonOffset, // positive value pushes polygon further away\n                polygonOffsetUnits: 1\n            });\n            // \n            material2 = new THREE.MeshPhongMaterial({\n                color: 0xffffff,       // \n                flatShading: true,\n                side: THREE.BackSide,  // \n                polygonOffset: true,\n                polygonOffsetFactor: polygonOffset,\n                polygonOffsetUnits: 1,\n                transparent: false,\n                opacity: 1.0\n            });\n            backside.visible = true;  // \n        } else if (globals.colorMode == \"axialStrain\"){\n            material = new THREE.MeshBasicMaterial({\n                vertexColors: THREE.VertexColors, \n                side: THREE.FrontSide,  // \n                polygonOffset: true,\n                polygonOffsetFactor: polygonOffset, // positive value pushes polygon further away\n                polygonOffsetUnits: 1\n            });\n            // \n            material2 = new THREE.MeshPhongMaterial({\n                color: 0xffffff,       // \n                flatShading: true,\n                side: THREE.BackSide,  // \n                polygonOffset: true,\n                polygonOffsetFactor: polygonOffset,\n                polygonOffsetUnits: 1,\n                transparent: false,\n                opacity: 1.0\n            });\n            backside.visible = true;  // \n            if (!globals.threeView.simulationRunning) {\n                getSolver().render();\n                setGeoUpdates();\n            }\n        } else if (globals.colorMode == \"texture\" && (globals.faceTexture || globals.textureLibrary.length > 0)) {\n            console.log(\" Setting mesh material to simple texture mode\");\n            console.log(\" Simple texture context:\");\n            console.log(\"  - faceTexture exists:\", !!globals.faceTexture);\n            console.log(\"  - useSimpleTextureMode:\", !!globals.useSimpleTextureMode);\n            console.log(\"  - isCellGeneratedTexture:\", !!globals.isCellGeneratedTexture);\n            \n            var textureToUse = globals.faceTexture;\n            \n            // Only use texture if it's cell-generated or explicitly set\n            if (!textureToUse && globals.textureLibrary.length > 0 && globals.isCellGeneratedTexture) {\n                console.log(\" Using first texture from library for cell-generated texture\");\n                textureToUse = globals.textureLibrary[0];\n                globals.faceTexture = textureToUse;\n            } else if (!textureToUse && globals.textureLibrary.length > 0 && !globals.isCellGeneratedTexture) {\n                console.log(\" Waiting for cell-generated texture, skipping temporary texture application\");\n                // Don't apply temporary texture - wait for cellColorizer\n                return;\n            }\n            \n            if (textureToUse) {\n                console.log(\" Creating texture material\");\n                console.log(\" Texture details:\");\n                console.log(\"  - Name:\", textureToUse.name || \"atlas\");\n                console.log(\"  - Image dimensions:\", textureToUse.image ? textureToUse.image.width + \"x\" + textureToUse.image.height : \"N/A\");\n                console.log(\"  - Format:\", textureToUse.format);\n                console.log(\"  - Type:\", textureToUse.type);\n                \n                // Enhanced texture material with subtle reflective properties\n                material = new THREE.MeshPhongMaterial({\n                    map: textureToUse,\n                    flatShading: true,\n                    side: THREE.FrontSide,  // \n                    polygonOffset: true,\n                    polygonOffsetFactor: polygonOffset,\n                    polygonOffsetUnits: 1,\n                    // Subtle reflective properties to preserve texture visibility\n                    shininess: 30,         // Moderate shininess\n                    specular: 0x333333,    // Reduced specular reflection\n                    reflectivity: 0.2,     // Low reflectivity\n                    transparent: false,    // No transparency to keep texture colors vivid\n                    opacity: 1.0\n                });\n                \n                // \n                console.log(\" Creating flipped texture for backside\");\n                var flippedTexture = textureToUse.clone();\n                flippedTexture.needsUpdate = true;\n                \n                // \n                flippedTexture.wrapS = THREE.RepeatWrapping;\n                flippedTexture.wrapT = THREE.RepeatWrapping;\n                \n                // \n                flippedTexture.repeat.x = -1; // \n                flippedTexture.repeat.y = 1;  // \n                flippedTexture.offset.x = 1;  // \n                flippedTexture.offset.y = 0;\n                \n                // \n                flippedTexture.matrix = new THREE.Matrix3();\n                flippedTexture.matrixAutoUpdate = false;\n                // \n                flippedTexture.matrix.set(\n                    -1, 0, 1,  // \n                     0, 1, 0,  // \n                     0, 0, 1\n                );\n                \n                // \n                material2 = new THREE.MeshPhongMaterial({\n                    map: flippedTexture,   // \n                    flatShading: true,\n                    side: THREE.BackSide,  // \n                    polygonOffset: true,\n                    polygonOffsetFactor: polygonOffset,\n                    polygonOffsetUnits: 1,\n                    shininess: 20,         // \n                    specular: 0x111111,    // \n                    reflectivity: 0.1,     // \n                    transparent: false,\n                    opacity: 1.0\n                });\n                \n                console.log(\" Texture material created successfully\");\n                console.log(\" \");\n                backside.visible = true;  // \n                \n                // Check if this is a cell-generated texture that needs simple UV mapping\n                console.log(\" Checking UV mapping condition:\");\n                console.log(\"  - globals.isCellGeneratedTexture:\", !!globals.isCellGeneratedTexture);\n                console.log(\"  - globals.useSimpleTextureMode:\", !!globals.useSimpleTextureMode);\n                console.log(\"  - Combined condition:\", !!(globals.isCellGeneratedTexture && globals.useSimpleTextureMode));\n                \n                if (globals.isCellGeneratedTexture && globals.useSimpleTextureMode) {\n                    console.log(\" Using simple UV mapping for cell-generated texture\");\n                    setSimpleUVMapping();\n                } else {\n                    // Update UV coordinates for face-based texture mapping\n                    console.log(\" Updating UV coordinates for texture mapping (fallback)\");\n                    updateFaceBasedUVs();\n                }\n                console.log(\" Texture material applied successfully\");\n            } else {\n                console.warn(\" Texture mode selected but no texture available, falling back to color mode\");\n                globals.colorMode = \"color\";\n                // Fall through to color mode\n                material = new THREE.MeshPhongMaterial({\n                    flatShading:true,\n                    side:THREE.FrontSide,\n                    polygonOffset: true,\n                    polygonOffsetFactor: polygonOffset, // positive value pushes polygon further away\n                    polygonOffsetUnits: 1,\n                    // Subtle reflective properties\n                    shininess: 25,\n                    specular: 0x222222,\n                    reflectivity: 0.15,\n                    transparent: true,  // Enable transparency for default surfaces\n                    opacity: globals.defaultOpacity || 0.0  // Use transparent default opacity\n                });\n                material2 = new THREE.MeshPhongMaterial({\n                    flatShading:true,\n                    side:THREE.BackSide,\n                    polygonOffset: true,\n                    polygonOffsetFactor: polygonOffset, // positive value pushes polygon further away\n                    polygonOffsetUnits: 1,\n                    // Subtle reflective properties\n                    shininess: 25,\n                    specular: 0x222222,\n                    reflectivity: 0.15,\n                    transparent: false,    // \n                    opacity: 1.0,         // \n                    color: 0xffffff       // \n                });\n                \n                // For transparent surfaces, color setting is optional\n                if (globals.defaultOpacity > 0) {\n                    material.color.setStyle( \"#\" + globals.color1);\n                    material2.color.setStyle( \"#\" + globals.color2);\n                } else {\n                    console.log(\" Fallback surfaces set to transparent - color not applied\");\n                }\n                backside.visible = true;\n            }\n        } else {\n            // Standard color mode - white surfaces\n            material = new THREE.MeshPhongMaterial({\n                flatShading:true,\n                side:THREE.FrontSide,\n                polygonOffset: true,\n                polygonOffsetFactor: polygonOffset, // positive value pushes polygon further away\n                polygonOffsetUnits: 1,\n                // Subtle reflective properties\n                shininess: 25,         // Low shininess\n                specular: 0x222222,    // Reduced specular reflection\n                reflectivity: 0.15,    // Low reflectivity\n                transparent: false,    // \n                opacity: 1.0,          // \n                color: 0xffffff        // \n            });\n            material2 = new THREE.MeshPhongMaterial({\n                flatShading:true,\n                side:THREE.BackSide,\n                polygonOffset: true,\n                polygonOffsetFactor: polygonOffset, // positive value pushes polygon further away\n                polygonOffsetUnits: 1,\n                // Subtle reflective properties\n                shininess: 25,         // Low shininess\n                specular: 0x222222,    // Reduced specular reflection\n                reflectivity: 0.15,    // Low reflectivity\n                transparent: false,    // \n                opacity: 1.0,          // \n                color: 0xffffff        // \n            });\n            // For transparent surfaces, color setting is optional\n            if (globals.defaultOpacity > 0) {\n                material.color.setStyle( \"#\" + globals.color1);\n                material2.color.setStyle( \"#\" + globals.color2);\n            } else {\n                console.log(\" Surfaces set to transparent - color not applied\");\n            }\n            backside.visible = true;\n        }\n        \n        console.log(\" Applying materials to mesh objects\");\n        console.log(\" Material assignment:\");\n        console.log(\"  - frontside material type:\", material.type);\n        console.log(\"  - frontside has texture map:\", !!material.map);\n        if (material.map) {\n            console.log(\"  - texture dimensions:\", material.map.image ? material.map.image.width + \"x\" + material.map.image.height : \"N/A\");\n        }\n        console.log(\"  - backside material type:\", material2.type);\n        \n        frontside.material = material;\n        backside.material = material2;\n        \n        // If in NFT processing mode, ensure objects remain hidden\n        if (globals.isNFTProcessing || globals.hideUntilTextured) {\n            console.log(' NFT processing detected in setMeshMaterial - forcing objects hidden');\n            frontside.visible = false;\n            backside.visible = false;\n        } else {\n            // If origami is visible and has textures, start auto rotation\n            if (globals.colorMode == \"texture\" && (globals.faceTexture || globals.textureLibrary.length > 0)) {\n                if (globals.threeView && globals.threeView.startAutoRotation && !globals.autoRotateEnabled) {\n                    console.log(' Textures applied - starting auto rotation animation');\n                    globals.threeView.startAutoRotation(true, 6000); // Random rotation, change every 6 seconds\n                    \n                    // Also start slider animation\n                    if (globals.threeView.startSliderAnimation) {\n                        setTimeout(function() {\n                            globals.threeView.startSliderAnimation(0, 100, 5000, true, 5000); // 5s animation, loop enabled, 5s pause\n                        }, globals.autoRotateWaitTime + 1000); // Start 1 second after rotation begins\n                    }\n                }\n            }\n        }\n        \n        console.log(\" Materials successfully applied to mesh\");\n        console.log(\" Material configuration:\");\n        console.log(\"  - Frontside color:\", material.color ? \"#\" + material.color.getHexString() : \"N/A\");\n        console.log(\"  - Backside color:\", material2.color ? \"#\" + material2.color.getHexString() : \"N/A\");\n        console.log(\"  - Frontside visible:\", frontside.visible);\n        console.log(\"  - Backside visible:\", backside.visible);\n        console.log(\"  - Frontside opacity:\", material.opacity);\n        console.log(\"  - Backside opacity:\", material2.opacity);\n    }\n\n    function updateEdgeVisibility(){\n        // If hideUntilTextured is true, hide edges too\n        if (globals.hideUntilTextured) {\n            mountainLines.visible = false;\n            valleyLines.visible = false;\n            facetLines.visible = false;\n            hingeLines.visible = false;\n            borderLines.visible = false;\n            cutLines.visible = false;\n            return;\n        }\n        \n        // Normal edge visibility logic\n        mountainLines.visible = globals.edgesVisible && globals.mtnsVisible;\n        valleyLines.visible = globals.edgesVisible && globals.valleysVisible;\n        facetLines.visible = globals.edgesVisible && globals.panelsVisible;\n        hingeLines.visible = globals.edgesVisible && globals.passiveEdgesVisible;\n        borderLines.visible = globals.edgesVisible && globals.boundaryEdgesVisible;\n        cutLines.visible = false;\n    }\n\n    function updateMeshVisibility(){\n        // If hideUntilTextured is true, keep objects hidden regardless of other settings\n        if (globals.hideUntilTextured) {\n            frontside.visible = false;\n            backside.visible = false;\n            return;\n        }\n        \n        // Normal visibility logic\n        frontside.visible = globals.meshVisible;\n        // Always show backside when mesh is visible ()\n        backside.visible = globals.meshVisible;\n    }\n\n    function hideOrigami(){\n        console.log(' Hiding origami object until textures are ready');\n        if (frontside) frontside.visible = false;\n        if (backside) backside.visible = false;\n        if (edges) edges.visible = false;\n        globals.hideUntilTextured = true;\n    }\n\n    function showOrigami(){\n        console.log(' Showing origami object - textures applied');\n        globals.hideUntilTextured = false;\n        \n        // Hide loading screen when origami is ready\n        console.log(' Hiding loading screen - origami is ready to display');\n        hideLoadingScreen();\n        \n        // Restore normal visibility based on settings\n        if (frontside) frontside.visible = globals.meshVisible;\n        // Always show backside when mesh is visible ()\n        if (backside) backside.visible = globals.meshVisible;\n        if (edges) edges.visible = true; // Edges are usually visible\n        updateEdgeVisibility(); // Apply edge visibility settings\n        \n        // Start auto rotation animation when origami becomes visible with textures\n        if (globals.threeView && globals.threeView.startAutoRotation) {\n            console.log(' Triggering auto rotation animation after origami is shown');\n            globals.threeView.startAutoRotation(true, 6000); // Random rotation, change every 6 seconds\n            \n            // Also start slider animation from min to max\n            if (globals.threeView.startSliderAnimation) {\n                setTimeout(function() {\n                    globals.threeView.startSliderAnimation(0, 100, 5000, true, 5000); // 5s animation, loop enabled, 5s pause\n                }, globals.autoRotateWaitTime + 1000); // Start 1 second after rotation begins\n            }\n        }\n    }\n\n    function hideLoadingScreen() {\n        try {\n            console.log(' Model.js requesting loading screen hide');\n            \n            // Use global function if available\n            if (typeof window !== 'undefined' && window.hideLoadingScreenGlobal) {\n                window.hideLoadingScreenGlobal();\n            } else {\n                // Fallback to direct DOM manipulation\n                var loadingScreen = document.getElementById('loadingScreen');\n                if (loadingScreen) {\n                    console.log(' Hiding loading screen with fade-out animation (fallback)');\n                    \n                    // Add fade-out class for smooth animation\n                    document.body.classList.add('fade-out-loading');\n                    \n                    // Remove the loading screen after animation completes\n                    setTimeout(function() {\n                        loadingScreen.style.display = 'none';\n                        document.body.classList.remove('fade-out-loading');\n                        document.body.classList.add('loading-hidden');\n                        console.log(' Loading screen hidden successfully (fallback)');\n                    }, 800); // Match the animation duration\n                } else {\n                    console.log(' Loading screen element not found');\n                }\n            }\n        } catch (error) {\n            console.error(' Error hiding loading screen:', error);\n        }\n    }\n\n    function getGlobalBounds(vertices) {\n        var minX = Infinity, minY = Infinity;\n        var maxX = -Infinity, maxY = -Infinity;\n        \n        for (var i = 0; i < vertices.length; i++) {\n            var x = vertices[i][0];\n            var y = vertices[i][1];\n            minX = Math.min(minX, x);\n            maxX = Math.max(maxX, x);\n            minY = Math.min(minY, y);\n            maxY = Math.max(maxY, y);\n        }\n        \n        return {\n            minX: minX,\n            maxX: maxX,\n            minY: minY,\n            maxY: maxY\n        };\n    }\n\n    function getOriginalBounds(originalVertices) {\n        var minX = Infinity, minY = Infinity;\n        var maxX = -Infinity, maxY = -Infinity;\n        \n        for (var i = 0; i < originalVertices.length; i++) {\n            var x = originalVertices[i][0];\n            var y = originalVertices[i][1];\n            minX = Math.min(minX, x);\n            maxX = Math.max(maxX, x);\n            minY = Math.min(minY, y);\n            maxY = Math.max(maxY, y);\n        }\n        \n        return {\n            minX: minX,\n            maxX: maxX,\n            minY: minY,\n            maxY: maxY\n        };\n    }\n\n    function getGeometryBounds(positionsArray) {\n        var minX = Infinity, minY = Infinity, minZ = Infinity;\n        var maxX = -Infinity, maxY = -Infinity, maxZ = -Infinity;\n        \n        for (var i = 0; i < positionsArray.length; i += 3) {\n            var x = positionsArray[i];\n            var y = positionsArray[i + 1];\n            var z = positionsArray[i + 2];\n            \n            minX = Math.min(minX, x);\n            maxX = Math.max(maxX, x);\n            minY = Math.min(minY, y);\n            maxY = Math.max(maxY, y);\n            minZ = Math.min(minZ, z);\n            maxZ = Math.max(maxZ, z);\n        }\n        \n        return {\n            minX: minX, maxX: maxX,\n            minY: minY, maxY: maxY,\n            minZ: minZ, maxZ: maxZ\n        };\n    }\n\n    function setSimpleUVMapping() {\n        console.log(\" Setting simple UV mapping for cell-generated texture\");\n        \n        if (!geometry || !geometry.attributes || !geometry.attributes.position) {\n            console.warn(\" Cannot set simple UV mapping: geometry not available\");\n            return;\n        }\n        \n        var positions = geometry.attributes.position.array;\n        var vertexCount = positions.length / 3;\n        \n        console.log(\" Creating simple UV mapping for\", vertexCount, \"vertices\");\n        \n        // Create simple UV coordinates (0,0) to (1,1) mapping\n        var uvs = new Float32Array(vertexCount * 2);\n        \n        // Get fold data for consistent coordinate transformation\n        var fold = globals.cellColorizerFoldData || globals.fold;\n        if (!fold || !fold.vertices_coords) {\n            console.warn(\" No fold data available for consistent UV mapping\");\n            console.log(\" Available globals:\", {\n                cellColorizerFoldData: !!globals.cellColorizerFoldData,\n                globalsFold: !!globals.fold,\n                cellColorizerTransformParams: !!globals.cellColorizerTransformParams\n            });\n            return;\n        }\n        \n        console.log(\" Using fold data with\", fold.vertices_coords.length, \"vertices\");\n        \n        // Get original 2D pattern bounds using the EXACT same method as cellColorizer\n        var minX = Infinity, minZ = Infinity;\n        var maxX = -Infinity, maxZ = -Infinity;\n        \n        // Use the same getBoundingBox logic as cellColorizer\n        for (var i = 0; i < fold.vertices_coords.length; i++) {\n            var vertex = fold.vertices_coords[i];\n            var x = vertex[0];\n            var z = vertex[2]; // Using Z coordinate for 2D projection (same as cellColorizer)\n            \n            minX = Math.min(minX, x);\n            maxX = Math.max(maxX, x);\n            minZ = Math.min(minZ, z);\n            maxZ = Math.max(maxZ, z);\n        }\n        \n        var patternWidth = maxX - minX;\n        var patternHeight = maxZ - minZ;\n        \n        console.log(\" Pattern bounds from fold data (same as cellColorizer):\", {minX, maxX, minZ, maxZ});\n        console.log(\" Pattern dimensions from fold data:\", patternWidth.toFixed(3), \"x\", patternHeight.toFixed(3));\n        \n        // Use the EXACT same canvas dimensions and transformation parameters from cellColorizer\n        var canvasWidth, canvasHeight;\n        var scale, offsetX, offsetY;\n        \n        if (globals.cellColorizerCanvasWidth && globals.cellColorizerCanvasHeight && \n            globals.cellColorizerScale !== null && globals.cellColorizerOffsetX !== null && globals.cellColorizerOffsetY !== null) {\n            // Use exact same parameters as cellColorizer\n            canvasWidth = globals.cellColorizerCanvasWidth;\n            canvasHeight = globals.cellColorizerCanvasHeight;\n            scale = globals.cellColorizerScale;\n            offsetX = globals.cellColorizerOffsetX;\n            offsetY = globals.cellColorizerOffsetY;\n            \n            console.log(\" Using cellColorizer parameters:\");\n            console.log(\"  - canvas size:\", canvasWidth + \"x\" + canvasHeight);\n            console.log(\"  - scale:\", scale.toFixed(3));\n            console.log(\"  - offset:\", offsetX.toFixed(1) + \",\" + offsetY.toFixed(1));\n        } else {\n            // Fallback: calculate parameters (same logic as cellColorizer)\n            console.log(\" cellColorizer parameters not available, calculating fallback...\");\n            \n            var aspectRatio = patternWidth / patternHeight;\n            \n            if (aspectRatio >= 1) {\n                canvasWidth = 2048;\n                canvasHeight = Math.round(2048 / aspectRatio);\n            } else {\n                canvasHeight = 2048;\n                canvasWidth = Math.round(2048 * aspectRatio);\n            }\n            \n            canvasWidth = Math.max(canvasWidth, 512);\n            canvasHeight = Math.max(canvasHeight, 512);\n            \n            var scaleX = canvasWidth / patternWidth;\n            var scaleY = canvasHeight / patternHeight;\n            scale = Math.min(scaleX, scaleY);\n            \n            var scaledWidth = patternWidth * scale;\n            var scaledHeight = patternHeight * scale;\n            offsetX = (canvasWidth - scaledWidth) / 2;\n            offsetY = (canvasHeight - scaledHeight) / 2;\n            \n            console.log(\" Fallback parameters:\");\n            console.log(\"  - canvas size:\", canvasWidth + \"x\" + canvasHeight);\n            console.log(\"  - scale:\", scale.toFixed(3));\n            console.log(\"  - offset:\", offsetX.toFixed(1) + \",\" + offsetY.toFixed(1));\n        }\n        \n        // Create UV mapping using EXACT same transformation as cellColorizer\n        for (var i = 0; i < vertexCount; i++) {\n            // Use fold data coordinates instead of geometry positions for consistency\n            if (i < fold.vertices_coords.length) {\n                var vertex = fold.vertices_coords[i];\n                var x = vertex[0];\n                var z = vertex[2];\n            } else {\n                // Fallback to geometry positions if fold data is insufficient\n                var x = positions[i * 3];\n                var z = positions[i * 3 + 2];\n            }\n            \n            // Transform to canvas coordinates (EXACT same as cellColorizer transformPoint)\n            var canvasX = (x - minX) * scale + offsetX;\n            var canvasY = (z - minZ) * scale + offsetY; // Normal coordinate mapping since canvas is already rotated\n            \n            // Normalize to [0,1] UV space\n            var u = canvasX / canvasWidth;\n            var v = canvasY / canvasHeight;\n            \n            // No additional coordinate transformation needed - canvas is already properly oriented\n            \n            // Clamp to [0,1] range\n            u = Math.max(0, Math.min(1, u));\n            v = Math.max(0, Math.min(1, v));\n            \n            uvs[i * 2] = u;\n            uvs[i * 2 + 1] = v;\n            \n            // Debug first few vertices\n            if (i < 5) {\n                console.log(\"Vertex\", i, \"3D[\" + x.toFixed(3) + \", \" + z.toFixed(3) + \"]  Canvas[\" + canvasX.toFixed(1) + \", \" + canvasY.toFixed(1) + \"]  UV[\" + u.toFixed(3) + \", \" + v.toFixed(3) + \"]\");\n            }\n        }\n        \n        console.log(\" Generated\", uvs.length / 2, \"simple UV coordinates\");\n        \n        // Apply UV coordinates to geometry\n        if (geometry.attributes.uv) {\n            geometry.attributes.uv.array = uvs;\n            geometry.attributes.uv.needsUpdate = true;\n        } else {\n            geometry.setAttribute('uv', new THREE.BufferAttribute(uvs, 2));\n        }\n        \n        console.log(\" Simple UV mapping applied successfully\");\n    }\n\n    function updateFaceBasedUVs(){\n        console.log(\" updateFaceBasedUVs: Using cellColorizer-compatible UV mapping\");\n        \n        if (!geometry) {\n            console.warn(\" Cannot update UVs: geometry not available\");\n            return;\n        }\n        \n        // Use the EXACT same parameters as cellColorizer if available\n        if (globals.cellColorizerCanvasWidth && globals.cellColorizerCanvasHeight && \n            globals.cellColorizerScale !== null && globals.cellColorizerOffsetX !== null && globals.cellColorizerOffsetY !== null) {\n            \n            console.log(\" Using stored cellColorizer parameters for updateFaceBasedUVs\");\n            \n            var canvasWidth = globals.cellColorizerCanvasWidth;\n            var canvasHeight = globals.cellColorizerCanvasHeight;\n            var scale = globals.cellColorizerScale;\n            var offsetX = globals.cellColorizerOffsetX;\n            var offsetY = globals.cellColorizerOffsetY;\n            \n            // Get fold data for bounding box (same as cellColorizer)\n            var fold = globals.cellColorizerFoldData || globals.fold;\n            if (!fold || !fold.vertices_coords) {\n                console.warn(\" No fold data available for updateFaceBasedUVs\");\n                console.log(\" Available globals for updateFaceBasedUVs:\", {\n                    cellColorizerFoldData: !!globals.cellColorizerFoldData,\n                    globalsFold: !!globals.fold\n                });\n                return;\n            }\n            \n            console.log(\" updateFaceBasedUVs using fold data with\", fold.vertices_coords.length, \"vertices\");\n            \n            // Get same bounding box as cellColorizer\n            var minX = Infinity, minZ = Infinity;\n            var maxX = -Infinity, maxZ = -Infinity;\n            \n            for (var i = 0; i < fold.vertices_coords.length; i++) {\n                var vertex = fold.vertices_coords[i];\n                var x = vertex[0];\n                var z = vertex[2]; // Use Z coordinate (same as cellColorizer)\n                \n                minX = Math.min(minX, x);\n                maxX = Math.max(maxX, x);\n                minZ = Math.min(minZ, z);\n                maxZ = Math.max(maxZ, z);\n            }\n            \n            console.log(\" updateFaceBasedUVs parameters:\");\n            console.log(\"  - canvas size:\", canvasWidth + \"x\" + canvasHeight);\n            console.log(\"  - scale:\", scale.toFixed(3));\n            console.log(\"  - offset:\", offsetX.toFixed(1) + \",\" + offsetY.toFixed(1));\n            console.log(\"  - bounding box:\", {minX, maxX, minZ, maxZ});\n            \n            // Apply UV mapping to geometry vertices\n            var positions = geometry.attributes.position.array;\n            var vertexCount = positions.length / 3;\n            var uvs = new Float32Array(vertexCount * 2);\n            \n            for (var i = 0; i < vertexCount; i++) {\n                // Use fold data coordinates for consistency\n                if (i < fold.vertices_coords.length) {\n                    var vertex = fold.vertices_coords[i];\n                    var x = vertex[0];\n                    var z = vertex[2];\n                } else {\n                    // Fallback to geometry positions\n                    var x = positions[i * 3];\n                    var z = positions[i * 3 + 2];\n                }\n                \n                // Transform to canvas coordinates (EXACT same as cellColorizer)\n                var canvasX = (x - minX) * scale + offsetX;\n                var canvasY = (z - minZ) * scale + offsetY;\n                \n                // Normalize to [0,1] UV space\n                var u = canvasX / canvasWidth;\n                var v = canvasY / canvasHeight;\n                \n                // Clamp to [0,1] range\n                u = Math.max(0, Math.min(1, u));\n                v = Math.max(0, Math.min(1, v));\n                \n                uvs[i * 2] = u;\n                uvs[i * 2 + 1] = v;\n            }\n            \n            // Apply UV coordinates to geometry\n            if (geometry.attributes.uv) {\n                geometry.attributes.uv.array = uvs;\n                geometry.attributes.uv.needsUpdate = true;\n            } else {\n                geometry.setAttribute('uv', new THREE.BufferAttribute(uvs, 2));\n            }\n            \n            console.log(\" updateFaceBasedUVs: Applied cellColorizer-compatible UV mapping\");\n            \n        } else {\n            console.log(\" updateFaceBasedUVs: cellColorizer parameters not available, using fallback\");\n            // Fallback to simple UV mapping\n            createBasicUVMapping();\n        }\n    }\n\n    function createBasicUVMapping() {\n        console.log(\" Creating basic UV mapping for geometry\");\n        \n        if (!geometry || !geometry.attributes || !geometry.attributes.position) {\n            console.warn(\" Cannot create basic UV mapping: no position data\");\n            return;\n        }\n        \n        var positions = geometry.attributes.position.array;\n        var vertexCount = positions.length / 3;\n        var uvs = new Float32Array(vertexCount * 2);\n        \n        // Simple planar projection\n        for (var i = 0; i < vertexCount; i++) {\n            var x = positions[i * 3];\n            var z = positions[i * 3 + 2];\n            \n            // Normalize coordinates to [0,1] range\n            var u = (x + 1) * 0.5;\n            var v = (z + 1) * 0.5;\n            \n            uvs[i * 2] = Math.max(0, Math.min(1, u));\n            uvs[i * 2 + 1] = Math.max(0, Math.min(1, v));\n        }\n        \n        if (geometry.attributes.uv) {\n            geometry.attributes.uv.array = uvs;\n            geometry.attributes.uv.needsUpdate = true;\n        } else {\n            geometry.setAttribute('uv', new THREE.BufferAttribute(uvs, 2));\n        }\n        \n        console.log(\" Basic UV mapping created for\", vertexCount, \"vertices\");\n    }\n\n    function getGeometry(){\n        return geometry;\n    }\n\n    function getMesh(){\n        return [frontside, backside];\n    }\n\n    function getPositionsArray(){\n        return positions;\n    }\n\n    function getColorsArray(){\n        return colors;\n    }\n\n    function pause(){\n        globals.threeView.pauseSimulation();\n    }\n\n    function resume(){\n        globals.threeView.startSimulation();\n    }\n\n    function reset(){\n        getSolver().reset();\n        setGeoUpdates();\n    }\n\n    function step(numSteps){\n        getSolver().solve(numSteps);\n        setGeoUpdates();\n    }\n\n    function setGeoUpdates(){\n        geometry.attributes.position.needsUpdate = true;\n        if (globals.colorMode == \"axialStrain\") geometry.attributes.color.needsUpdate = true;\n        if (globals.userInteractionEnabled || globals.vrEnabled) geometry.computeBoundingBox();\n    }\n\n    function startSolver(){\n        globals.threeView.startAnimation();\n    }\n\n    function getSolver(){\n        if (globals.simType == \"dynamic\") return globals.dynamicSolver;\n        else if (globals.simType == \"static\") return globals.staticSolver;\n        return globals.rigidSolver;\n    }\n\n\n\n\n    function buildModel(fold, creaseParams){\n\n        if (fold.vertices_coords.length == 0) {\n            globals.warn(\"No geometry found.\");\n            return;\n        }\n        if (fold.faces_vertices.length == 0) {\n            globals.warn(\"No faces found, try adjusting import vertex merge tolerance.\");\n            return;\n        }\n        if (fold.edges_vertices.length == 0) {\n            globals.warn(\"No edges found.\");\n            return;\n        }\n\n        nextFold = fold;\n        nextCreaseParams = creaseParams;\n\n        globals.needsSync = true;\n        globals.simNeedsSync = true;\n\n        if (!inited) {\n            startSolver();//start animation loop\n            inited = true;\n        }\n    }\n\n\n\n    function sync(){\n\n        for (var i=0;i<nodes.length;i++){\n            nodes[i].destroy();\n        }\n\n        for (var i=0;i<edges.length;i++){\n            edges[i].destroy();\n        }\n\n        for (var i=0;i<creases.length;i++){\n            creases[i].destroy();\n        }\n\n        fold = nextFold;\n        nodes = [];\n        edges = [];\n        faces = fold.faces_vertices;\n        creases = [];\n        creaseParams = nextCreaseParams;\n        var _edges = fold.edges_vertices;\n\n        var _vertices = [];\n        for (var i=0;i<fold.vertices_coords.length;i++){\n            var vertex = fold.vertices_coords[i];\n            _vertices.push(new THREE.Vector3(vertex[0], vertex[1], vertex[2]));\n        }\n\n        for (var i=0;i<_vertices.length;i++){\n            nodes.push(new Node(_vertices[i].clone(), nodes.length));\n        }\n        // _nodes[_faces[0][0]].setFixed(true);\n        // _nodes[_faces[0][1]].setFixed(true);\n        // _nodes[_faces[0][2]].setFixed(true);\n\n        for (var i=0;i<_edges.length;i++) {\n            edges.push(new Beam([nodes[_edges[i][0]], nodes[_edges[i][1]]]));\n        }\n\n        for (var i=0;i<creaseParams.length;i++) {//allCreaseParams.length\n            var _creaseParams = creaseParams[i];//face1Ind, vert1Ind, face2Ind, ver2Ind, edgeInd, angle\n            var type = _creaseParams[5]!=0 ? 1:0;\n            //edge, face1Index, face2Index, targetTheta, type, node1, node2, index\n            creases.push(new Crease(\n                edges[_creaseParams[4]],\n                _creaseParams[0],\n                _creaseParams[2],\n                _creaseParams[5] * Math.PI / 180,  // convert back to radians for the GPU math\n                type,\n                nodes[_creaseParams[1]],\n                nodes[_creaseParams[3]],\n                creases.length));\n        }\n\n        vertices = [];\n        for (var i=0;i<nodes.length;i++){\n            vertices.push(nodes[i].getOriginalPosition());\n        }\n\n        if (globals.noCreasePatternAvailable() && globals.navMode == \"pattern\"){\n            //switch to simulation mode\n            $(\"#navSimulation\").parent().addClass(\"open\");\n            $(\"#navPattern\").parent().removeClass(\"open\");\n            $(\"#svgViewer\").hide();\n            globals.navMode = \"simulation\";\n        }\n\n        positions = new Float32Array(vertices.length*3);\n        colors = new Float32Array(vertices.length*3);\n        indices = new Uint16Array(faces.length*3);\n\n        for (var i=0;i<vertices.length;i++){\n            positions[3*i] = vertices[i].x;\n            positions[3*i+1] = vertices[i].y;\n            positions[3*i+2] = vertices[i].z;\n        }\n        for (var i=0;i<faces.length;i++){\n            var face = faces[i];\n            indices[3*i] = face[0];\n            indices[3*i+1] = face[1];\n            indices[3*i+2] = face[2];\n        }\n\n        clearGeometries();\n\n        var positionsAttribute = new THREE.BufferAttribute(positions, 3);\n\n        var lineIndices = {\n            U: [],\n            V: [],\n            M: [],\n            B: [],\n            F: [],\n            C: []\n        };\n        for (var i=0;i<fold.edges_assignment.length;i++){\n            var edge = fold.edges_vertices[i];\n            var assignment = fold.edges_assignment[i];\n            lineIndices[assignment].push(edge[0]);\n            lineIndices[assignment].push(edge[1]);\n        }\n        _.each(lines, function(line, key){\n            var indicesArray = lineIndices[key];\n            var indices = new Uint16Array(indicesArray.length);\n            for (var i=0;i<indicesArray.length;i++){\n                indices[i] = indicesArray[i];\n            }\n            lines[key].geometry.addAttribute('position', positionsAttribute);\n            lines[key].geometry.setIndex(new THREE.BufferAttribute(indices, 1));\n            // lines[key].geometry.attributes.position.needsUpdate = true;\n            // lines[key].geometry.index.needsUpdate = true;\n            lines[key].geometry.computeBoundingBox();\n            lines[key].geometry.computeBoundingSphere();\n            lines[key].geometry.center();\n        });\n\n        geometry.addAttribute('position', positionsAttribute);\n        geometry.addAttribute('color', new THREE.BufferAttribute(colors, 3));\n        geometry.setIndex(new THREE.BufferAttribute(indices, 1));\n        \n        // Initialize UV coordinates (for texture mapping)\n        var uvArray = new Float32Array(vertices.length * 2);\n        for (var i = 0; i < vertices.length; i++) {\n            uvArray[2 * i] = 0.0;     // u coordinate\n            uvArray[2 * i + 1] = 0.0; // v coordinate\n        }\n        geometry.addAttribute('uv', new THREE.BufferAttribute(uvArray, 2));\n        \n        // geometry.attributes.position.needsUpdate = true;\n        // geometry.index.needsUpdate = true;\n        // geometry.verticesNeedUpdate = true;\n        geometry.computeVertexNormals();\n        geometry.computeBoundingBox();\n        geometry.computeBoundingSphere();\n        geometry.center();\n\n        var scale = 1/geometry.boundingSphere.radius;\n        globals.scale = scale;\n\n        //scale geometry\n        for (var i=0;i<positions.length;i++){\n            positions[i] *= scale;\n        }\n        for (var i=0;i<vertices.length;i++){\n            vertices[i].multiplyScalar(scale);\n        }\n\n        //update vertices and edges\n        for (var i=0;i<vertices.length;i++){\n            nodes[i].setOriginalPosition(positions[3*i], positions[3*i+1], positions[3*i+2]);\n        }\n        for (var i=0;i<edges.length;i++){\n            edges[i].recalcOriginalLength();\n        }\n\n        updateEdgeVisibility();\n        updateMeshVisibility();\n        \n        // If in NFT processing mode, override visibility to keep objects hidden\n        if (globals.isNFTProcessing || globals.hideUntilTextured) {\n            console.log(' NFT processing detected in buildModel - forcing objects hidden');\n            if (frontside) frontside.visible = false;\n            if (backside) backside.visible = false;\n            if (edges) edges.visible = false;\n        }\n\n        syncSolver();\n\n        globals.needsSync = false;\n        if (!globals.simulationRunning) reset();\n    }\n\n    function syncSolver(){\n        getSolver().syncNodesAndEdges();\n        globals.simNeedsSync = false;\n    }\n\n    function getNodes(){\n        return nodes;\n    }\n\n    function getEdges(){\n        return edges;\n    }\n\n    function getFaces(){\n        return faces;\n    }\n\n    function getCreases(){\n        return creases;\n    }\n\n    function getDimensions(){\n        geometry.computeBoundingBox();\n        return geometry.boundingBox.max.clone().sub(geometry.boundingBox.min);\n    }\n    \n    function updateUVMapping() {\n        console.log(\" updateUVMapping called - determining which mapping method to use\");\n        \n        // Check if we have fold data for face-based mapping\n        if (globals.fold && globals.fold.faces_vertices && globals.fold.vertices_coords) {\n            console.log(\" Using face-based UV mapping\");\n            updateFaceBasedUVs();\n        } else if (geometry && geometry.attributes && geometry.attributes.position) {\n            console.log(\" Using basic geometry UV mapping\");\n            createBasicUVMapping();\n        } else {\n            console.warn(\" Cannot update UV mapping: no geometry data available\");\n        }\n    }\n\n    return {\n        pause: pause,\n        resume: resume,\n        reset: reset,\n        step: step,\n\n        getNodes: getNodes,\n        getEdges: getEdges,\n        getFaces: getFaces,\n        getCreases: getCreases,\n        getGeometry: getGeometry,//for save stl\n        getPositionsArray: getPositionsArray,\n        getColorsArray: getColorsArray,\n        getMesh: getMesh,\n\n        buildModel: buildModel,//load new model\n        sync: sync,//update geometry to new model\n        syncSolver: syncSolver,//update solver params\n\n        //rendering\n        setMeshMaterial: setMeshMaterial,\n        updateEdgeVisibility: updateEdgeVisibility,\n        updateMeshVisibility: updateMeshVisibility,\n        updateUVMapping: updateUVMapping,\n        hideOrigami: hideOrigami,\n        showOrigami: showOrigami,\n\n        getDimensions: getDimensions//for save stl\n    }\n    \n    // Initial setup for NFT processing mode\n    if (window.editMode === false) {\n        console.log(' Edit mode disabled - setting initial hide state for NFT processing');\n        globals.hideUntilTextured = true;\n    }\n    \n    return model;\n}</script> <script type=\"text/javascript\">function init3DUI(e){function n(n){if(h&&(d=!0),e.userInteractionEnabled){s.x=n.clientX/window.innerWidth*2-1,s.y=-n.clientY/window.innerHeight*2+1,a.setFromCamera(s,e.threeView.camera);var r=null;if(d){if(d&&c){u||(u=c,E=u.isFixed(),u.setFixed(!0),e.fixedHasChanged=!0,e.threeView.enableControls(!1));var l=t(c.getPosition().clone());c.moveManually(l),e.nodePositionHasChanged=!0}}else r=o(n,e.model.getMesh()),i(r);if(c){var w=c.getPosition();g.getObject3D().position.set(w.x,w.y,w.z)}}}function t(n){var t=e.threeView.camera.getWorldDirection(),i=n.dot(t);l.set(t,-i);var o=new THREE.Vector3;return a.ray.intersectPlane(l,o),o}function i(e){c&&e!=c&&(g.getObject3D().visible=!1),(c=e)&&(g.getObject3D().visible=!0)}function o(n,t){var i=null,o=a.intersectObjects(t,!1);if(o.length>0){var r=o[0].face,c=o[0].point,s=e.model.getPositionsArray(),l=[];l.push(new THREE.Vector3(s[3*r.a],s[3*r.a+1],s[3*r.a+2])),l.push(new THREE.Vector3(s[3*r.b],s[3*r.b+1],s[3*r.b+2])),l.push(new THREE.Vector3(s[3*r.c],s[3*r.c+1],s[3*r.c+2]));for(var d=l[0].clone().sub(c).lengthSq(),u=r.a,E=1;E<3;E++){var h=l[E].clone().sub(c).lengthSq();h<d&&(d=h,u=1==E?r.b:r.c)}i=e.model.getNodes()[u]}return i}function r(){g.getObject3D().visible=!1}var c,a=new THREE.Raycaster,s=new THREE.Vector2,l=new THREE.Plane(new THREE.Vector3(0,0,1)),d=!1,u=null,E=!1,h=!1,g=new Node(new THREE.Vector3);return g.setTransparent(),e.threeView.scene.add(g.getObject3D()),$(document).dblclick(function(){}),document.addEventListener(\"mousedown\",function(){h=!0},!1),document.addEventListener(\"mouseup\",function(n){d=!1,u&&(u.setFixed(E),u=null,e.fixedHasChanged=!0,e.threeView.enableControls(!0),i(null),e.shouldCenterGeo=!0),h=!1},!1),document.addEventListener(\"mousemove\",n,!1),{hideHighlighters:r}}</script> <script type=\"text/javascript\">function initStaticSolver(){function e(){f=globals.model.getNodes(),c=globals.model.getEdges(),v=globals.model.getFaces(),d=globals.model.getCreases(),u=globals.model.getPositionsArray(),l()}function r(){s(),n()}function o(){}function n(){console.log(\"static solve\");for(var e=m.slice(),r=0;r<e.length;r++)e[r]+=p[r];t(numeric.solve(V,e))}function t(e){for(var r=0;r<z;r++){var o=R[r],n=new THREE.Vector3(e[3*r],e[3*r+1],e[3*r+2]),t=f[o].renderDelta(n);u[3*o]=t.x,u[3*o+1]=t.y,u[3*o+2]=t.z}for(var r=0;r<w;r++){var o=T[r],n=new THREE.Vector3(0,0,0),t=f[o].render(n);u[3*o]=t.x,u[3*o+1]=t.y,u[3*o+2]=t.z}for(var r=0;r<c.length;r++)c[r].render()}function a(e,r,o){void 0===r&&(r=0),void 0===o&&(o=0);for(var n=[],t=0;t<e;t++){0==r?n.push(0):n.push([]);for(var a=0;a<r;a++){0==o?n[t].push(0):n[t].push([]);for(var s=0;s<o;s++)n[t][a].push(0)}}return n}function s(){i(),E=numeric.transpose(x),y=numeric.dot(E,h),V=numeric.dot(y,x)}function l(){R=[],T=[],I=[],O=[];for(var e=0;e<f.length;e++)f[e].fixed?T.push(f[e].getIndex()):R.push(f[e].getIndex());for(var e=0;e<c.length;e++)c[e].isFixed()||I.push(e);for(var e=0;e<d.length;e++)O.push(e);z=R.length,w=T.length,b=I.length,H=O.length,h=a(b+H,b+H),x=a(b+H,3*z),g(),m=a(3*z);for(var e=0;e<z;e++)m[3*e]=0,m[3*e+1]=0,m[3*e+2]=0;s()}function i(){p=a(3*z);for(var e=0;e<b;e++){var r=c[I[e]],o=r.nodes,n=r.getVector(o[0]),t=r.getOriginalLength(),s=n.length()-t,l=globals.axialStiffness*s/t;if(n.normalize(),!o[0].fixed){var i=R.indexOf(o[0].getIndex());x[e][3*i]=n.x,x[e][3*i+1]=n.y,x[e][3*i+2]=n.z,p[3*i]-=n.x*l,p[3*i+1]-=n.y*l,p[3*i+2]-=n.z*l}if(!o[1].fixed){var i=R.indexOf(o[1].getIndex());x[e][3*i]=-n.x,x[e][3*i+1]=-n.y,x[e][3*i+2]=-n.z,p[3*i]+=n.x*l,p[3*i+1]+=n.y*l,p[3*i+2]+=n.z*l}}for(var g=globals.model.getGeometry(),f=g.index.array,v=[],d=new THREE.Vector3,h=new THREE.Vector3,e=0;e<f.length;e+=3){var E=3*f[e],m=new THREE.Vector3(u[E],u[E+1],u[E+2]);E=3*f[e+1];var y=new THREE.Vector3(u[E],u[E+1],u[E+2]);E=3*f[e+2];var V=new THREE.Vector3(u[E],u[E+1],u[E+2]);d.subVectors(V,y),h.subVectors(m,y),d.cross(h),d.normalize(),v.push(d.clone())}}function g(){for(var e=0;e<b;e++)h[e][e]=c[I[e]].getK();for(var e=0;e<H;e++){var r=d[O[e]];h[b+e][b+e]=r.getK()}}var f,c,v,d,u,h,x,E,m,p,y,V,b,z,w,H,R,T,I,O;return{syncNodesAndEdges:e,solve:r,reset:o}}</script> <script type=\"text/javascript\">function initDynamicSolver(e){function t(){d=e.model.getNodes(),T=e.model.getEdges(),y=e.model.getFaces(),v=e.model.getCreases(),U=e.model.getPositionsArray(),M=e.model.getColorsArray(),x(),u(e.gpuMath),s()}function r(){e.gpuMath.step(\"zeroTexture\",[],\"u_position\"),e.gpuMath.step(\"zeroTexture\",[],\"u_lastPosition\"),e.gpuMath.step(\"zeroTexture\",[],\"u_lastLastPosition\"),e.gpuMath.step(\"zeroTexture\",[],\"u_velocity\"),e.gpuMath.step(\"zeroTexture\",[],\"u_lastVelocity\"),e.gpuMath.step(\"zeroThetaTexture\",[\"u_lastTheta\"],\"u_theta\"),e.gpuMath.step(\"zeroThetaTexture\",[\"u_theta\"],\"u_lastTheta\"),n()}function o(t){if(e.shouldAnimateFoldPercent&&(e.creasePercent=e.videoAnimator.nextFoldAngle(0),e.controls.updateCreasePercent(),C(e.creasePercent),e.shouldChangeCreasePercent=!0),e.forceHasChanged&&(g(),e.forceHasChanged=!1),e.fixedHasChanged&&(f(),e.fixedHasChanged=!1),e.nodePositionHasChanged&&(h(),e.nodePositionHasChanged=!1),e.creaseMaterialHasChanged&&(p(),e.creaseMaterialHasChanged=!1),e.materialHasChanged&&(c(),e.materialHasChanged=!1),e.shouldChangeCreasePercent&&(C(e.creasePercent),e.shouldChangeCreasePercent=!1),e.shouldCenterGeo){var r=i();e.gpuMath.setProgram(\"centerTexture\"),e.gpuMath.setUniformForProgram(\"centerTexture\",\"u_center\",[r.x,r.y,r.z],\"3f\"),e.gpuMath.step(\"centerTexture\",[\"u_lastPosition\"],\"u_position\"),\"verlet\"==e.integrationType&&e.gpuMath.step(\"copyTexture\",[\"u_position\"],\"u_lastLastPosition\"),e.gpuMath.swapTextures(\"u_position\",\"u_lastPosition\"),e.gpuMath.step(\"zeroTexture\",[],\"u_lastVelocity\"),e.gpuMath.step(\"zeroTexture\",[],\"u_velocity\"),e.shouldCenterGeo=!1}void 0===t&&(t=e.numSteps);for(var o=0;o<t;o++)a();n()}function a(){var t=e.gpuMath;t.setProgram(\"normalCalc\"),t.setSize(Z,Z),t.step(\"normalCalc\",[\"u_faceVertexIndices\",\"u_lastPosition\",\"u_originalPosition\"],\"u_normals\"),t.setProgram(\"thetaCalc\"),t.setSize(ee,ee),t.step(\"thetaCalc\",[\"u_normals\",\"u_lastTheta\",\"u_creaseVectors\",\"u_lastPosition\",\"u_originalPosition\"],\"u_theta\"),t.setProgram(\"updateCreaseGeo\"),t.step(\"updateCreaseGeo\",[\"u_lastPosition\",\"u_originalPosition\",\"u_creaseMeta2\"],\"u_creaseGeo\"),\"verlet\"==e.integrationType?(t.setProgram(\"positionCalcVerlet\"),t.setSize(W,W),t.step(\"positionCalcVerlet\",[\"u_lastPosition\",\"u_lastLastPosition\",\"u_lastVelocity\",\"u_originalPosition\",\"u_externalForces\",\"u_mass\",\"u_meta\",\"u_beamMeta\",\"u_creaseMeta\",\"u_nodeCreaseMeta\",\"u_normals\",\"u_theta\",\"u_creaseGeo\",\"u_meta2\",\"u_nodeFaceMeta\",\"u_nominalTriangles\"],\"u_position\"),t.step(\"velocityCalcVerlet\",[\"u_position\",\"u_lastPosition\",\"u_mass\"],\"u_velocity\"),t.swapTextures(\"u_lastPosition\",\"u_lastLastPosition\")):(t.setProgram(\"velocityCalc\"),t.setSize(W,W),t.step(\"velocityCalc\",[\"u_lastPosition\",\"u_lastVelocity\",\"u_originalPosition\",\"u_externalForces\",\"u_mass\",\"u_meta\",\"u_beamMeta\",\"u_creaseMeta\",\"u_nodeCreaseMeta\",\"u_normals\",\"u_theta\",\"u_creaseGeo\",\"u_meta2\",\"u_nodeFaceMeta\",\"u_nominalTriangles\"],\"u_velocity\"),t.step(\"positionCalc\",[\"u_velocity\",\"u_lastPosition\",\"u_mass\"],\"u_position\")),t.swapTextures(\"u_theta\",\"u_lastTheta\"),t.swapTextures(\"u_velocity\",\"u_lastVelocity\"),t.swapTextures(\"u_position\",\"u_lastPosition\")}function i(){for(var e=0,t=0,r=0,o=0;o<U.length;o+=3)e+=U[o],t+=U[o+1],r+=U[o+2];var a=new THREE.Vector3(e,t,r);return a.multiplyScalar(3/U.length),a}function n(){if(e.gpuMath.setProgram(\"packToBytes\"),e.gpuMath.setUniformForProgram(\"packToBytes\",\"u_vectorLength\",4,\"1f\"),e.gpuMath.setUniformForProgram(\"packToBytes\",\"u_floatTextureDim\",[W,W],\"2f\"),e.gpuMath.setSize(4*W,W),e.gpuMath.step(\"packToBytes\",[\"u_lastPosition\"],\"outputBytes\"),e.gpuMath.readyToRead()){var t=4*d.length,r=Math.ceil(t/(4*W)),o=new Uint8Array(r*W*4*4);e.gpuMath.readPixels(0,0,4*W,r,o);for(var a=new Float32Array(o.buffer),i=0,n=\"axialStrain\"==e.colorMode,s=0;s<d.length;s++){var l=4*s,u=100*a[l+3];i+=u;var m=new THREE.Vector3(a[l],a[l+1],a[l+2]);if(m.add(d[s]._originalPosition),U[3*s]=m.x,U[3*s+1]=m.y,U[3*s+2]=m.z,n){u>e.strainClip&&(u=e.strainClip);var c=.7*(1-u/e.strainClip),g=new THREE.Color;g.setHSL(c,1,.5),M[3*s]=g.r,M[3*s+1]=g.g,M[3*s+2]=g.b}}oe.html((i/d.length).toFixed(7)+\" %\")}else console.log(\"shouldn't be here\")}function s(){var t=l();$(\"#deltaT\").html(t),e.gpuMath.setProgram(\"thetaCalc\"),e.gpuMath.setUniformForProgram(\"thetaCalc\",\"u_dt\",t,\"1f\"),e.gpuMath.setProgram(\"velocityCalc\"),e.gpuMath.setUniformForProgram(\"velocityCalc\",\"u_dt\",t,\"1f\"),e.gpuMath.setProgram(\"positionCalcVerlet\"),e.gpuMath.setUniformForProgram(\"positionCalcVerlet\",\"u_dt\",t,\"1f\"),e.gpuMath.setProgram(\"positionCalc\"),e.gpuMath.setUniformForProgram(\"positionCalc\",\"u_dt\",t,\"1f\"),e.gpuMath.setProgram(\"velocityCalcVerlet\"),e.gpuMath.setUniformForProgram(\"velocityCalcVerlet\",\"u_dt\",t,\"1f\"),e.controls.setDeltaT(t)}function l(){var e=0;return _.each(T,function(t){t.getNaturalFrequency()>e&&(e=t.getNaturalFrequency())}),1/(2*Math.PI*e)*.9}function u(t){var r=document.getElementById(\"vertexShader\").text;t.initTextureFromData(\"u_position\",W,W,\"FLOAT\",D,!0),t.initTextureFromData(\"u_lastPosition\",W,W,\"FLOAT\",A,!0),t.initTextureFromData(\"u_lastLastPosition\",W,W,\"FLOAT\",S,!0),t.initTextureFromData(\"u_velocity\",W,W,\"FLOAT\",B,!0),t.initTextureFromData(\"u_lastVelocity\",W,W,\"FLOAT\",w,!0),t.initTextureFromData(\"u_theta\",ee,ee,\"FLOAT\",j,!0),t.initTextureFromData(\"u_lastTheta\",ee,ee,\"FLOAT\",J,!0),t.initTextureFromData(\"u_normals\",Z,Z,\"FLOAT\",G,!0),t.initFrameBufferForTexture(\"u_position\",!0),t.initFrameBufferForTexture(\"u_lastPosition\",!0),t.initFrameBufferForTexture(\"u_lastLastPosition\",!0),t.initFrameBufferForTexture(\"u_velocity\",!0),t.initFrameBufferForTexture(\"u_lastVelocity\",!0),t.initFrameBufferForTexture(\"u_theta\",!0),t.initFrameBufferForTexture(\"u_lastTheta\",!0),t.initFrameBufferForTexture(\"u_normals\",!0),t.initTextureFromData(\"u_meta\",W,W,\"FLOAT\",z,!0),t.initTextureFromData(\"u_meta2\",W,W,\"FLOAT\",O,!0),t.initTextureFromData(\"u_nominalTrinagles\",Z,Z,\"FLOAT\",N,!0),t.initTextureFromData(\"u_nodeCreaseMeta\",te,te,\"FLOAT\",q,!0),t.initTextureFromData(\"u_creaseMeta2\",ee,ee,\"FLOAT\",R,!0),t.initTextureFromData(\"u_nodeFaceMeta\",re,re,\"FLOAT\",H,!0),t.initTextureFromData(\"u_creaseGeo\",ee,ee,\"FLOAT\",K,!0),t.initFrameBufferForTexture(\"u_creaseGeo\",!0),t.initTextureFromData(\"u_faceVertexIndices\",Z,Z,\"FLOAT\",b,!0),t.initTextureFromData(\"u_nominalTriangles\",Z,Z,\"FLOAT\",N,!0),t.createProgram(\"positionCalc\",r,document.getElementById(\"positionCalcShader\").text),t.setUniformForProgram(\"positionCalc\",\"u_velocity\",0,\"1i\"),t.setUniformForProgram(\"positionCalc\",\"u_lastPosition\",1,\"1i\"),t.setUniformForProgram(\"positionCalc\",\"u_mass\",2,\"1i\"),t.setUniformForProgram(\"positionCalc\",\"u_textureDim\",[W,W],\"2f\"),t.createProgram(\"velocityCalcVerlet\",r,document.getElementById(\"velocityCalcVerletShader\").text),t.setUniformForProgram(\"velocityCalcVerlet\",\"u_position\",0,\"1i\"),t.setUniformForProgram(\"velocityCalcVerlet\",\"u_lastPosition\",1,\"1i\"),t.setUniformForProgram(\"velocityCalcVerlet\",\"u_mass\",2,\"1i\"),t.setUniformForProgram(\"velocityCalcVerlet\",\"u_textureDim\",[W,W],\"2f\"),t.createProgram(\"velocityCalc\",r,document.getElementById(\"velocityCalcShader\").text),t.setUniformForProgram(\"velocityCalc\",\"u_lastPosition\",0,\"1i\"),t.setUniformForProgram(\"velocityCalc\",\"u_lastVelocity\",1,\"1i\"),t.setUniformForProgram(\"velocityCalc\",\"u_originalPosition\",2,\"1i\"),t.setUniformForProgram(\"velocityCalc\",\"u_externalForces\",3,\"1i\"),t.setUniformForProgram(\"velocityCalc\",\"u_mass\",4,\"1i\"),t.setUniformForProgram(\"velocityCalc\",\"u_meta\",5,\"1i\"),t.setUniformForProgram(\"velocityCalc\",\"u_beamMeta\",6,\"1i\"),t.setUniformForProgram(\"velocityCalc\",\"u_creaseMeta\",7,\"1i\"),t.setUniformForProgram(\"velocityCalc\",\"u_nodeCreaseMeta\",8,\"1i\"),t.setUniformForProgram(\"velocityCalc\",\"u_normals\",9,\"1i\"),t.setUniformForProgram(\"velocityCalc\",\"u_theta\",10,\"1i\"),t.setUniformForProgram(\"velocityCalc\",\"u_creaseGeo\",11,\"1i\"),t.setUniformForProgram(\"velocityCalc\",\"u_meta2\",12,\"1i\"),t.setUniformForProgram(\"velocityCalc\",\"u_nodeFaceMeta\",13,\"1i\"),t.setUniformForProgram(\"velocityCalc\",\"u_nominalTriangles\",14,\"1i\"),t.setUniformForProgram(\"velocityCalc\",\"u_textureDim\",[W,W],\"2f\"),t.setUniformForProgram(\"velocityCalc\",\"u_textureDimEdges\",[X,X],\"2f\"),t.setUniformForProgram(\"velocityCalc\",\"u_textureDimFaces\",[Z,Z],\"2f\"),t.setUniformForProgram(\"velocityCalc\",\"u_textureDimCreases\",[ee,ee],\"2f\"),t.setUniformForProgram(\"velocityCalc\",\"u_textureDimNodeCreases\",[te,te],\"2f\"),t.setUniformForProgram(\"velocityCalc\",\"u_textureDimNodeFaces\",[re,re],\"2f\"),t.setUniformForProgram(\"velocityCalc\",\"u_creasePercent\",e.creasePercent,\"1f\"),t.setUniformForProgram(\"velocityCalc\",\"u_axialStiffness\",e.axialStiffness,\"1f\"),t.setUniformForProgram(\"velocityCalc\",\"u_faceStiffness\",e.faceStiffness,\"1f\"),t.setUniformForProgram(\"velocityCalc\",\"u_calcFaceStrain\",e.calcFaceStrain,\"1f\"),t.createProgram(\"positionCalcVerlet\",r,document.getElementById(\"positionCalcVerletShader\").text),t.setUniformForProgram(\"positionCalcVerlet\",\"u_lastPosition\",0,\"1i\"),t.setUniformForProgram(\"positionCalcVerlet\",\"u_lastLastPosition\",1,\"1i\"),t.setUniformForProgram(\"positionCalcVerlet\",\"u_lastVelocity\",2,\"1i\"),t.setUniformForProgram(\"positionCalcVerlet\",\"u_originalPosition\",3,\"1i\"),t.setUniformForProgram(\"positionCalcVerlet\",\"u_externalForces\",4,\"1i\"),t.setUniformForProgram(\"positionCalcVerlet\",\"u_mass\",5,\"1i\"),t.setUniformForProgram(\"positionCalcVerlet\",\"u_meta\",6,\"1i\"),t.setUniformForProgram(\"positionCalcVerlet\",\"u_beamMeta\",7,\"1i\"),t.setUniformForProgram(\"positionCalcVerlet\",\"u_creaseMeta\",8,\"1i\"),t.setUniformForProgram(\"positionCalcVerlet\",\"u_nodeCreaseMeta\",9,\"1i\"),t.setUniformForProgram(\"positionCalcVerlet\",\"u_normals\",10,\"1i\"),t.setUniformForProgram(\"positionCalcVerlet\",\"u_theta\",11,\"1i\"),t.setUniformForProgram(\"positionCalcVerlet\",\"u_creaseGeo\",12,\"1i\"),t.setUniformForProgram(\"positionCalcVerlet\",\"u_meta2\",13,\"1i\"),t.setUniformForProgram(\"positionCalcVerlet\",\"u_nodeFaceMeta\",14,\"1i\"),t.setUniformForProgram(\"positionCalcVerlet\",\"u_nominalTriangles\",15,\"1i\"),t.setUniformForProgram(\"positionCalcVerlet\",\"u_textureDim\",[W,W],\"2f\"),t.setUniformForProgram(\"positionCalcVerlet\",\"u_textureDimEdges\",[X,X],\"2f\"),t.setUniformForProgram(\"positionCalcVerlet\",\"u_textureDimFaces\",[Z,Z],\"2f\"),t.setUniformForProgram(\"positionCalcVerlet\",\"u_textureDimCreases\",[ee,ee],\"2f\"),t.setUniformForProgram(\"positionCalcVerlet\",\"u_textureDimNodeCreases\",[te,te],\"2f\"),t.setUniformForProgram(\"positionCalcVerlet\",\"u_textureDimNodeFaces\",[re,re],\"2f\"),t.setUniformForProgram(\"positionCalcVerlet\",\"u_creasePercent\",e.creasePercent,\"1f\"),t.setUniformForProgram(\"positionCalcVerlet\",\"u_axialStiffness\",e.axialStiffness,\"1f\"),t.setUniformForProgram(\"positionCalcVerlet\",\"u_faceStiffness\",e.faceStiffness,\"1f\"),t.setUniformForProgram(\"positionCalcVerlet\",\"u_calcFaceStrain\",e.calcFaceStrain,\"1f\"),t.createProgram(\"thetaCalc\",r,document.getElementById(\"thetaCalcShader\").text),t.setUniformForProgram(\"thetaCalc\",\"u_normals\",0,\"1i\"),t.setUniformForProgram(\"thetaCalc\",\"u_lastTheta\",1,\"1i\"),t.setUniformForProgram(\"thetaCalc\",\"u_creaseVectors\",2,\"1i\"),t.setUniformForProgram(\"thetaCalc\",\"u_lastPosition\",3,\"1i\"),t.setUniformForProgram(\"thetaCalc\",\"u_originalPosition\",4,\"1i\"),t.setUniformForProgram(\"thetaCalc\",\"u_textureDim\",[W,W],\"2f\"),t.setUniformForProgram(\"thetaCalc\",\"u_textureDimFaces\",[Z,Z],\"2f\"),t.setUniformForProgram(\"thetaCalc\",\"u_textureDimCreases\",[ee,ee],\"2f\"),t.createProgram(\"normalCalc\",r,document.getElementById(\"normalCalc\").text),t.setUniformForProgram(\"normalCalc\",\"u_faceVertexIndices\",0,\"1i\"),t.setUniformForProgram(\"normalCalc\",\"u_lastPosition\",1,\"1i\"),t.setUniformForProgram(\"normalCalc\",\"u_originalPosition\",2,\"1i\"),t.setUniformForProgram(\"normalCalc\",\"u_textureDim\",[W,W],\"2f\"),t.setUniformForProgram(\"normalCalc\",\"u_textureDimFaces\",[Z,Z],\"2f\"),t.createProgram(\"packToBytes\",r,document.getElementById(\"packToBytesShader\").text),t.initTextureFromData(\"outputBytes\",4*W,W,\"UNSIGNED_BYTE\",null,!0),t.initFrameBufferForTexture(\"outputBytes\",!0),t.setUniformForProgram(\"packToBytes\",\"u_floatTextureDim\",[W,W],\"2f\"),t.setUniformForProgram(\"packToBytes\",\"u_floatTexture\",0,\"1i\"),t.createProgram(\"zeroTexture\",r,document.getElementById(\"zeroTexture\").text),t.createProgram(\"zeroThetaTexture\",r,document.getElementById(\"zeroThetaTexture\").text),t.setUniformForProgram(\"zeroThetaTexture\",\"u_theta\",0,\"1i\"),t.setUniformForProgram(\"zeroThetaTexture\",\"u_textureDimCreases\",[ee,ee],\"2f\"),t.createProgram(\"centerTexture\",r,document.getElementById(\"centerTexture\").text),t.setUniformForProgram(\"centerTexture\",\"u_lastPosition\",0,\"1i\"),t.setUniformForProgram(\"centerTexture\",\"u_textureDim\",[W,W],\"2f\"),t.createProgram(\"copyTexture\",r,document.getElementById(\"copyTexture\").text),t.setUniformForProgram(\"copyTexture\",\"u_orig\",0,\"1i\"),t.setUniformForProgram(\"copyTexture\",\"u_textureDim\",[W,W],\"2f\"),t.createProgram(\"updateCreaseGeo\",r,document.getElementById(\"updateCreaseGeo\").text),t.setUniformForProgram(\"updateCreaseGeo\",\"u_lastPosition\",0,\"1i\"),t.setUniformForProgram(\"updateCreaseGeo\",\"u_originalPosition\",1,\"1i\"),t.setUniformForProgram(\"updateCreaseGeo\",\"u_creaseMeta2\",2,\"1i\"),t.setUniformForProgram(\"updateCreaseGeo\",\"u_textureDim\",[W,W],\"2f\"),t.setUniformForProgram(\"updateCreaseGeo\",\"u_textureDimCreases\",[ee,ee],\"2f\"),t.setSize(W,W),Q=!0}function m(e){if(1==e)return 2;for(var t=0;t<e;t++)if(Math.pow(2,2*t)>=e)return Math.pow(2,t);return console.warn(\"no texture size found for \"+e+\" items\"),2}function c(t){for(var r=0,o=0;o<d.length;o++){t&&(z[4*o]=r,z[4*o+1]=d[o].numBeams());for(var a=0;a<d[o].beams.length;a++){var i=d[o].beams[a];E[4*r]=i.getK(),E[4*r+1]=i.getD(),t&&(E[4*r+2]=i.getLength(),E[4*r+3]=i.getOtherNode(d[o]).getIndex()),r+=1}}e.gpuMath.initTextureFromData(\"u_beamMeta\",X,X,\"FLOAT\",E,!0),Q&&(e.gpuMath.setProgram(\"velocityCalc\"),e.gpuMath.setUniformForProgram(\"velocityCalc\",\"u_axialStiffness\",e.axialStiffness,\"1f\"),e.gpuMath.setUniformForProgram(\"velocityCalc\",\"u_faceStiffness\",e.faceStiffness,\"1f\"),e.gpuMath.setProgram(\"positionCalcVerlet\"),e.gpuMath.setUniformForProgram(\"positionCalcVerlet\",\"u_axialStiffness\",e.axialStiffness,\"1f\"),e.gpuMath.setUniformForProgram(\"positionCalcVerlet\",\"u_faceStiffness\",e.faceStiffness,\"1f\"),s())}function g(){for(var t=0;t<d.length;t++){var r=d[t].getExternalForce();L[4*t]=r.x,L[4*t+1]=r.y,L[4*t+2]=r.z}e.gpuMath.initTextureFromData(\"u_externalForces\",W,W,\"FLOAT\",L,!0)}function f(){for(var t=0;t<d.length;t++)I[4*t+1]=d[t].isFixed()?1:0;e.gpuMath.initTextureFromData(\"u_mass\",W,W,\"FLOAT\",I,!0)}function F(){for(var t=0;t<d.length;t++){var r=d[t].getOriginalPosition();V[4*t]=r.x,V[4*t+1]=r.y,V[4*t+2]=r.z}e.gpuMath.initTextureFromData(\"u_originalPosition\",W,W,\"FLOAT\",V,!0)}function P(){for(var t=0;t<v.length;t++){var r=4*t,o=v[t].edge.nodes;Y[r]=o[0].getIndex(),Y[r+1]=o[1].getIndex()}e.gpuMath.initTextureFromData(\"u_creaseVectors\",ee,ee,\"FLOAT\",Y,!0)}function p(t){for(var r=0;r<v.length;r++){var o=v[r];k[4*r]=o.getK(),t&&(k[4*r+2]=o.getTargetTheta())}e.gpuMath.initTextureFromData(\"u_creaseMeta\",ee,ee,\"FLOAT\",k,!0)}function h(){for(var t=0;t<d.length;t++){var r=d[t].getRelativePosition();A[4*t]=r.x,A[4*t+1]=r.y,A[4*t+2]=r.z}e.gpuMath.initTextureFromData(\"u_lastPosition\",W,W,\"FLOAT\",A,!0),e.gpuMath.initFrameBufferForTexture(\"u_lastPosition\",!0)}function C(t){Q&&(e.gpuMath.setProgram(\"velocityCalc\"),e.gpuMath.setUniformForProgram(\"velocityCalc\",\"u_creasePercent\",t,\"1f\"),e.gpuMath.setProgram(\"positionCalcVerlet\"),e.gpuMath.setUniformForProgram(\"positionCalcVerlet\",\"u_creasePercent\",t,\"1f\"))}function x(){W=m(d.length);for(var t=0,r=[],o=0;o<d.length;o++){r.push([]);for(var a=0;a<y.length;a++)y[a].indexOf(o)>=0&&(r[o].push(a),t++)}re=m(t);for(var i=0,o=0;o<d.length;o++)i+=d[o].numBeams();X=m(i);var n=v.length;ee=m(n);for(var s=0,o=0;o<d.length;o++)s+=d[o].numCreases();s+=2*n,te=m(s);var l=y.length;Z=m(l),V=new Float32Array(W*W*4),D=new Float32Array(W*W*4),A=new Float32Array(W*W*4),S=new Float32Array(W*W*4),B=new Float32Array(W*W*4),w=new Float32Array(W*W*4),L=new Float32Array(W*W*4),I=new Float32Array(W*W*4),z=new Float32Array(W*W*4),O=new Float32Array(W*W*4),E=new Float32Array(X*X*4),G=new Float32Array(Z*Z*4),b=new Float32Array(Z*Z*4),k=new Float32Array(ee*ee*4),H=new Float32Array(re*re*4),N=new Float32Array(Z*Z*4),q=new Float32Array(te*te*4),R=new Float32Array(ee*ee*4),K=new Float32Array(ee*ee*4),Y=new Float32Array(ee*ee*4),j=new Float32Array(ee*ee*4),J=new Float32Array(ee*ee*4);for(var o=0;o<y.length;o++){var u=y[o];b[4*o]=u[0],b[4*o+1]=u[1],b[4*o+2]=u[2];var _=d[u[0]].getOriginalPosition(),h=d[u[1]].getOriginalPosition(),x=d[u[2]].getOriginalPosition(),T=h.clone().sub(_).normalize(),U=x.clone().sub(_).normalize(),M=x.clone().sub(h).normalize();N[4*o]=Math.acos(T.dot(U)),N[4*o+1]=Math.acos(-1*T.dot(M)),N[4*o+2]=Math.acos(U.dot(M)),Math.abs(N[4*o]+N[4*o+1]+N[4*o+2]-Math.PI)>.1&&console.warn(\"bad angles\")}for(var o=0;o<W*W;o++)I[4*o+1]=1;for(var o=0;o<ee*ee;o++)o>=n?(J[4*o+2]=-1,J[4*o+3]=-1):(J[4*o+2]=v[o].getNormal1Index(),J[4*o+3]=v[o].getNormal2Index());for(var $=0,o=0;o<d.length;o++){O[4*o]=$;var Q=r[o].length;O[4*o+1]=Q;for(var a=0;a<Q;a++){var oe=4*($+a),u=y[r[o][a]];H[oe]=r[o][a],H[oe+1]=u[0]==o?-1:u[0],H[oe+2]=u[1]==o?-1:u[1],H[oe+3]=u[2]==o?-1:u[2]}$+=Q}for(var $=0,o=0;o<d.length;o++){I[4*o]=d[o].getSimMass(),z[4*o+2]=$;var ae=d[o].creases,ie=d[o].invCreases;z[4*o+3]=ae.length+ie.length;for(var a=0;a<ae.length;a++)q[4*$]=ae[a].getIndex(),q[4*$+1]=ae[a].getNodeIndex(d[o]),$++;for(var a=0;a<ie.length;a++)q[4*$]=ie[a].getIndex(),q[4*$+1]=ie[a].getNodeIndex(d[o]),$++}for(var o=0;o<v.length;o++){var ne=v[o];R[4*o]=ne.node1.getIndex(),R[4*o+1]=ne.node2.getIndex(),R[4*o+2]=ne.edge.nodes[0].getIndex(),R[4*o+3]=ne.edge.nodes[1].getIndex(),$++}F(),c(!0),f(),g(),p(!0),P(),C(e.creasePercent)}e.gpuMath=initGPUMath();var d,T,y,v,U,M,V,D,A,S,B,w,L,I,z,O,E,G,b,N,H,k,R,q,K,Y,j,J,Q=!1,W=0,X=0,Z=0,ee=0,te=0,re=0,oe=$(\"#globalError\");return{syncNodesAndEdges:t,updateFixed:f,solve:o,render:n,reset:r}}</script> <script type=\"text/javascript\">function initRigidSolver(){function e(){d=globals.model.getNodes(),s=globals.model.getEdges(),c=globals.model.getFaces(),u=globals.model.getCreases(),v=globals.model.getPositionsArray(),i()}function n(){g(),t()}function r(){}function o(e){var n,r=numeric.svd(e),o=r.S[0],t=r.U,a=r.S,l=r.V,i=e.length,g=e[0].length,d=Math.max(i,g)*numeric.epsilon*o,s=a.length,c=new Array(s);for(n=s-1;-1!==n;n--)a[n]>d?c[n]=1/a[n]:c[n]=0;return numeric.dot(numeric.dot(l,numeric.diag(c)),numeric.transpose(t))}function t(){var e=numeric.dot(numeric.sub(numeric.identity(3*d.length),numeric.dot(numeric.transpose(o(numeric.transpose(f))),f)),h);console.log(e),a(e)}function a(e){for(var n=0;n<d.length;n++){var r=new THREE.Vector3(e[3*n],e[3*n+1],e[3*n+2]),o=d[n].renderDelta(r);v[3*n]=o.x,v[3*n+1]=o.y,v[3*n+2]=o.z}for(var n=0;n<s.length;n++)s[n].render()}function l(e,n,r){void 0===n&&(n=0),void 0===r&&(r=0);for(var o=[],t=0;t<e;t++){0==n?o.push(0):o.push([]);for(var a=0;a<n;a++){0==r?o[t].push(0):o[t].push([]);for(var l=0;l<r;l++)o[t][a].push(0)}}return o}function i(){f=l(s.length,3*d.length),h=l(3*d.length)}function g(){var e=d.length,n=s.length;h=l(3*e);for(var r=0;r<n;r++){var o=s[r],t=o.nodes,a=o.getVector(t[0]),i=o.getOriginalLength(),g=a.length()-i,c=globals.axialStiffness*g/i;a.normalize();var m=t[0].getIndex();f[r][3*m]=a.x,f[r][3*m+1]=a.y,f[r][3*m+2]=a.z,h[3*m]-=a.x*c,h[3*m+1]-=a.y*c,h[3*m+2]-=a.z*c,m=t[1].getIndex(),f[r][3*m]=-a.x,f[r][3*m+1]=-a.y,f[r][3*m+2]=-a.z,h[3*m]+=a.x*c,h[3*m+1]+=a.y*c,h[3*m+2]+=a.z*c}for(var x=globals.model.getGeometry(),y=x.index.array,E=[],z=new THREE.Vector3,b=new THREE.Vector3,r=0;r<y.length;r+=3){var V=3*y[r],p=new THREE.Vector3(v[V],v[V+1],v[V+2]);V=3*y[r+1];var T=new THREE.Vector3(v[V],v[V+1],v[V+2]);V=3*y[r+2];var w=new THREE.Vector3(v[V],v[V+1],v[V+2]);z.subVectors(w,T),b.subVectors(p,T),z.cross(b),z.normalize(),E.push(z.clone())}for(var r=0;r<u.length;r++){var I=u[r],R=E[I.face1Index],H=E[I.face2Index],S=R.dot(H);S<-1?S=-1:S>1&&(S=1);var N,A,L=I.getVector().normalize(),M=Math.atan2(R.clone().cross(L).dot(H),S),g=M-globals.creasePercent*I.targetTheta,c=I.getK()*g;if(!I.node1.fixed){var m=I.node1.getIndex(),P=I.getLengthToNode1(),N=R.clone().divideScalar(P);h[3*m]-=N.x*c,h[3*m+1]-=N.y*c,h[3*m+2]-=N.z*c}if(!I.node2.fixed){var m=I.node2.getIndex(),P=I.getLengthToNode2(),A=H.clone().divideScalar(P);h[3*m]-=A.x*c,h[3*m+1]-=A.y*c,h[3*m+2]-=A.z*c}for(var C=I.edge.nodes,D=0;D<C.length;D++){var F=C[D];if(!F.fixed){var m=F.getIndex();h[3*m]+=(N.x+A.x)/2*c,h[3*m+1]+=(N.y+A.y)/2*c,h[3*m+2]+=(N.z+A.z)/2*c}}}}var d,s,c,u,v,f,h;return{syncNodesAndEdges:e,solve:n,reset:r}}</script> <script type=\"text/javascript\">function initPattern(e){function t(){Z.vertices_coords=[],Z.edges_vertices=[],Z.edges_assignment=[],Z.edges_foldAngle=[],delete Z.vertices_vertices,delete Z.faces_vertices,delete Z.vertices_edges,K={}}function r(){t(),Q=[],Y=[],ee=[],te=[],re=[],se=[],ne=[],ie=[],le=[],ae=[],oe=[],ce=[],ge=[]}function s(){return\"border\"==u(g($(this)))}function n(){var e=$(this);if(\"mountain\"==u(g(e))){var t=c(e);return this.targetAngle=180*-t,!0}return!1}function i(){var e=$(this);if(\"valley\"==u(g(e))){var t=c(e);return this.targetAngle=180*t,!0}return!1}function l(){return\"cut\"==u(g($(this)))}function a(){return\"triangulation\"==u(g($(this)))}function o(){return\"hinge\"==u(g($(this)))}function c(e){var t=e.css(\"opacity\")||e.attr(\"opacity\")||e[0].style&&e[0].style.opacity,r=e.css(\"stroke-opacity\")||e.attr(\"stroke-opacity\")||e[0].style&&e[0].style.strokeOpacity;return t=parseFloat(t),r=parseFloat(r),isNaN(t)&&(t=1),isNaN(r)&&(t=1),t*r}function g(e){var t=e.css(\"stroke\")||e.attr(\"stroke\")||e[0].style&&e[0].style.stroke;return void 0===t?null:(t=t.replace(/\\s/g,\"\"),t.toLowerCase())}function u(e){return\"#000000\"==e||\"#000\"==e||\"black\"==e||\"rgb(0,0,0)\"==e?\"border\":\"#ff0000\"==e||\"#f00\"==e||\"red\"==e||\"rgb(255,0,0)\"==e?\"mountain\":\"#0000ff\"==e||\"#00f\"==e||\"blue\"==e||\"rgb(0,0,255)\"==e?\"valley\":\"#00ff00\"==e||\"#0f0\"==e||\"green\"==e||\"rgb(0,255,0)\"==e?\"cut\":\"#ffff00\"==e||\"#ff0\"==e||\"yellow\"==e||\"rgb(255,255,0)\"==e?\"triangulation\":\"#ff00ff\"==e||\"#f0f\"==e||\"magenta\"==e||\"rgb(255,0,255)\"==e?\"hinge\":(ge.push(e),null)}function h(e){return\"B\"==e?\"#000\":\"M\"==e?\"#f00\":\"V\"==e?\"#00f\":\"C\"==e?\"#0f0\":\"F\"==e?\"#ff0\":\"U\"==e?\"#f0f\":\"#0ff\"}function v(e,t){return null===e||\"F\"==t?1:Math.abs(e)/180}function f(e,t,r,s,n,i,l,a){p(e,t,s.filter(r)),m(e,t,n.filter(r)),b(e,t,i.filter(r)),y(e,t,l.filter(r)),w(e,t,a.filter(r))}function d(e,t){var r=[],s=t;do{s.transform&&r.push.apply(r,s.transform.baseVal),s=s.parentNode}while(s&&\"svg\"!==s.nodeName);for(var n=0;n<r.length;n++){var i=r[n],l=[[i.matrix.a,i.matrix.c,i.matrix.e],[i.matrix.b,i.matrix.d,i.matrix.f],[0,0,1]],a=numeric.dot(l,[e.x,e.z,1]);e.x=a[0],e.z=a[1]}}function p(e,t,r){for(var s=0;s<r.length;s++){var n=r[s],i=[];if(void 0===n||void 0===n.getPathData){return $('<div id=\"coverImg\" style=\"background: url(assets/doc/crane.gif) no-repeat center center fixed;-webkit-background-size: cover;-moz-background-size: cover;-o-background-size: cover;background-size: cover;\"></div>').appendTo($(\"body\")),$(\"#noSupportModal\").modal(\"show\"),void console.warn(\"path parser not supported\")}for(var l=null,a=n.getPathData(),o=0;o<a.length;o++){var c=a[o];switch(c.type){case\"m\":var g;0===o?g=new THREE.Vector3(c.values[0],0,c.values[1]):(g=e[e.length-1].clone(),g.x+=c.values[0],g.z+=c.values[1]),l=e.length,e.push(g),i.push(g);break;case\"l\":t.push([e.length-1,e.length]),n.targetAngle&&t.length>0&&t[t.length-1].push(n.targetAngle);var g=e[e.length-1].clone();g.x+=c.values[0],g.z+=c.values[1],e.push(g),i.push(g);break;case\"v\":t.push([e.length-1,e.length]),n.targetAngle&&t.length>0&&t[t.length-1].push(n.targetAngle);var g=e[e.length-1].clone();g.z+=c.values[0],e.push(g),i.push(g);break;case\"h\":t.push([e.length-1,e.length]),n.targetAngle&&t.length>0&&t[t.length-1].push(n.targetAngle);var g=e[e.length-1].clone();g.x+=c.values[0],e.push(g),i.push(g);break;case\"M\":var g=new THREE.Vector3(c.values[0],0,c.values[1]);l=e.length,e.push(g),i.push(g);break;case\"L\":t.push([e.length-1,e.length]),n.targetAngle&&t.length>0&&t[t.length-1].push(n.targetAngle);var g=new THREE.Vector3(c.values[0],0,c.values[1]);e.push(g),i.push(g);break;case\"V\":t.push([e.length-1,e.length]),n.targetAngle&&t.length>0&&t[t.length-1].push(n.targetAngle);var g=e[e.length-1].clone();g.z=c.values[0],e.push(g),i.push(g);break;case\"H\":t.push([e.length-1,e.length]),n.targetAngle&&t.length>0&&t[t.length-1].push(n.targetAngle);var g=e[e.length-1].clone();g.x=c.values[0],e.push(g),i.push(g);break;case\"z\":case\"Z\":null!=l&&(t.push([e.length-1,l]),l=null)}}for(var o=0;o<i.length;o++)d(i[o],n)}}function m(e,t,r){for(var s=0;s<r.length;s++){var n=r[s];e.push(new THREE.Vector3(n.x1.baseVal.value,0,n.y1.baseVal.value)),e.push(new THREE.Vector3(n.x2.baseVal.value,0,n.y2.baseVal.value)),t.push([e.length-2,e.length-1]),n.targetAngle&&t[t.length-1].push(n.targetAngle),d(e[e.length-2],n),d(e[e.length-1],n)}}function b(e,t,r){for(var s=0;s<r.length;s++){var n=r[s],i=n.x.baseVal.value,l=n.y.baseVal.value,a=n.width.baseVal.value,o=n.height.baseVal.value;e.push(new THREE.Vector3(i,0,l)),e.push(new THREE.Vector3(i+a,0,l)),e.push(new THREE.Vector3(i+a,0,l+o)),e.push(new THREE.Vector3(i,0,l+o)),t.push([e.length-4,e.length-3]),t.push([e.length-3,e.length-2]),t.push([e.length-2,e.length-1]),t.push([e.length-1,e.length-4]);for(var c=1;c<=4;c++)n.targetAngle&&t[t.length-c].push(n.targetAngle),d(e[e.length-c],n)}}function y(e,t,r){for(var s=0;s<r.length;s++)for(var n=r[s],i=0;i<n.points.length;i++)e.push(new THREE.Vector3(n.points[i].x,0,n.points[i].y)),d(e[e.length-1],n),i<n.points.length-1?t.push([e.length-1,e.length]):t.push([e.length-1,e.length-n.points.length]),n.targetAngle&&t[t.length-1].push(n.targetAngle)}function w(e,t,r){for(var s=0;s<r.length;s++)for(var n=r[s],i=0;i<n.points.length;i++)e.push(new THREE.Vector3(n.points[i].x,0,n.points[i].y)),d(e[e.length-1],n),i>0&&(t.push([e.length-1,e.length-2]),n.targetAngle&&t[t.length-1].push(n.targetAngle))}function x(t,c){t=t.replace(/^(data:image\\/svg\\+xml;base64,)77u\\//,\"$1\"),ue.load(t,function(t){var c=$(t);if(c.find(\"parsererror\").length)return e.warn(\"Error parsing SVG: \"+t.innerText),console.warn(c.find(\"parsererror\")[0]);$(t).appendTo(\"body\"),r(),c.find(\"symbol\").remove(),c.find(\"defs > :not(style)\").remove();var g=c.find(\"path\"),u=c.find(\"line\"),h=c.find(\"rect\"),v=c.find(\"polygon\"),d=c.find(\"polyline\");if(g.css({fill:\"none\",\"stroke-dasharray\":\"none\"}),u.css({fill:\"none\",\"stroke-dasharray\":\"none\"}),h.css({fill:\"none\",\"stroke-dasharray\":\"none\"}),v.css({fill:\"none\",\"stroke-dasharray\":\"none\"}),d.css({fill:\"none\",\"stroke-dasharray\":\"none\"}),f(Q,te,s,g,u,h,v,d),f(Q,Y,n,g,u,h,v,d),f(Q,ee,i,g,u,h,v,d),f(Q,re,l,g,u,h,v,d),f(Q,se,a,g,u,h,v,d),f(Q,ne,o,g,u,h,v,d),ge.length>0){ge=_.uniq(ge);var p=\"Some objects found with the following stroke colors:<br/><br/>\";_.each(ge,function(e){p+=\"<span style='background:\"+e+\"' class='colorSwatch'></span>\"+e+\"<br/>\"}),p+=\"<br/>These objects were ignored.<br/>  Please check that your file is set up correctly, <br/>see <b>File > Design Tips</b> for more information.\",e.warn(p)}c.remove(),A(Q,te,Y,ee,re,se,ne)&&E()},function(){},function(r){e.warn(\"Error loading SVG \"+t+\" : \"+r),console.warn(r)})}function E(){$(\"#svgViewer\").empty();for(var t=new THREE.Vector3(-1/0,-1/0,-1/0),r=new THREE.Vector3(1/0,1/0,1/0),s=0;s<K.vertices_coords.length;s++){var n=new THREE.Vector3(K.vertices_coords[s][0],K.vertices_coords[s][1],K.vertices_coords[s][2]);t.max(n),r.min(n)}if(r.x===1/0)return void(0==ge.length&&e.warn(\"no geometry found in file\"));t.sub(r);var i=new THREE.Vector3(.1,0,.1),l=Math.max(t.x,t.y,t.z);if(0!=l){if(!((K.frame_classes&&K.frame_classes.includes(\"creasePattern\"))|t.y<l/100))return void console.log(\"Fold data is not a crease pattern, skipping SVG generation\");var a=l/300;i.multiplyScalar(l),r.sub(i),t.add(i.multiplyScalar(2));var o=r.x+\" \"+r.z+\" \"+t.x+\" \"+t.z,c=\"http://www.w3.org/2000/svg\",g=document.createElementNS(c,\"svg\");g.setAttribute(\"viewBox\",o);for(var s=0;s<K.edges_vertices.length;s++){var u=document.createElementNS(c,\"line\"),f=K.edges_vertices[s],n=K.vertices_coords[f[0]];u.setAttribute(\"stroke\",h(K.edges_assignment[s])),u.setAttribute(\"opacity\",v(K.edges_foldAngle[s],K.edges_assignment[s])),u.setAttribute(\"x1\",n[0]),u.setAttribute(\"y1\",n[2]),n=K.vertices_coords[f[1]],u.setAttribute(\"x2\",n[0]),u.setAttribute(\"y2\",n[2]),u.setAttribute(\"stroke-width\",a),g.appendChild(u)}$(\"#svgViewer\").html(g)}}function A(t,r,s,n,i,l,a){return _.each(t,function(e){Z.vertices_coords.push([e.x,e.z])}),_.each(r,function(e){Z.edges_vertices.push([e[0],e[1]]),Z.edges_assignment.push(\"B\"),Z.edges_foldAngle.push(null)}),_.each(s,function(e){Z.edges_vertices.push([e[0],e[1]]),Z.edges_assignment.push(\"M\"),Z.edges_foldAngle.push(e[2])}),_.each(n,function(e){Z.edges_vertices.push([e[0],e[1]]),Z.edges_assignment.push(\"V\"),Z.edges_foldAngle.push(e[2])}),_.each(l,function(e){Z.edges_vertices.push([e[0],e[1]]),Z.edges_assignment.push(\"F\"),Z.edges_foldAngle.push(0)}),_.each(a,function(e){Z.edges_vertices.push([e[0],e[1]]),Z.edges_assignment.push(\"U\"),Z.edges_foldAngle.push(null)}),_.each(i,function(e){Z.edges_vertices.push([e[0],e[1]]),Z.edges_assignment.push(\"C\"),Z.edges_foldAngle.push(null)}),0==Z.vertices_coords.length||0==Z.edges_vertices.length?(e.warn(\"No valid geometry found in SVG, be sure to ungroup all and remove all clipping masks.\"),!1):(Z=X.filter.collapseNearbyVertices(Z,e.vertTol),Z=X.filter.removeLoopEdges(Z),Z=X.filter.removeDuplicateEdges_vertices(Z),Z=B(Z,e.vertTol),Z=X.filter.collapseNearbyVertices(Z,e.vertTol),Z=X.filter.removeLoopEdges(Z),Z=X.filter.removeDuplicateEdges_vertices(Z),Z=X.convert.edges_vertices_to_vertices_vertices_unsorted(Z),Z=C(Z),Z=N(Z,.01),Z.vertices_vertices=X.convert.sort_vertices_vertices(Z),Z=X.convert.vertices_vertices_to_faces_vertices(Z),Z=T(Z),Z=z(Z),Z=k(Z),V(Z))}function V(t,r){for(var s=!0,n=0;n<t.vertices_coords.length;n++){var i=t.vertices_coords[n];2===i.length?t.vertices_coords[n]=[i[0],0,i[1]]:s=!1}K=JSON.parse(JSON.stringify(t)),X.filter.cutEdges(t).length>0&&(t=F(t),t=X.convert.edges_vertices_to_vertices_vertices_unsorted(t),t=N(t,.01)),delete t.vertices_vertices,delete t.vertices_edges,Z=P(t,s),ie=X.filter.mountainEdges(Z),le=X.filter.valleyEdges(Z),ae=X.filter.boundaryEdges(Z),oe=X.filter.unassignedEdges(Z),ce=X.filter.flatEdges(Z),$(\"#numMtns\").html(\"(\"+ie.length+\")\"),$(\"#numValleys\").html(\"(\"+le.length+\")\"),$(\"#numFacets\").html(\"(\"+ce.length+\")\"),$(\"#numBoundary\").html(\"(\"+ae.length+\")\"),$(\"#numPassive\").html(\"(\"+oe.length+\")\");var l=H(Z);if(r)return l;if(e.model.buildModel(Z,l),e.notifyPatternLoaded){var a={filename:e.filename,url:e.url,vertices:Z.vertices_coords?Z.vertices_coords.length:0,faces:Z.faces_vertices?Z.faces_vertices.length:0,edges:Z.edges_vertices?Z.edges_vertices.length:0};console.log(\" Pattern loading completed, notifying callbacks...\",a),e.isNFTProcessing&&e.model&&e.model.hideOrigami&&(console.log(\" NFT processing mode - hiding origami after pattern load\"),e.model.hideOrigami()),e.notifyPatternLoaded(a)}return!1===window.editMode||e.isNFTProcessing||e.hideUntilTextured||setTimeout(function(){e.threeView&&e.threeView.startAutoRotation&&!e.autoRotateEnabled&&(console.log(\" Pattern loaded in edit mode - starting auto rotation animation\"),e.threeView.startAutoRotation(!0,6e3),e.threeView.startSliderAnimation&&setTimeout(function(){e.threeView.startSliderAnimation(0,100,5e3,!0,5e3)},e.autoRotateWaitTime+1e3))},500),Z}function k(e){for(var t=0;t<e.faces_vertices.length;t++)e.faces_vertices[t].reverse();return e}function T(e){for(var t=[],r=0;r<e.vertices_coords.length;r++)t.push([]);for(var r=0;r<e.edges_vertices.length;r++){var s=e.edges_vertices[r];t[s[0]].push(r),t[s[1]].push(r)}return e.vertices_edges=t,e}function O(e){for(var t=[],r=0;r<e.vertices_coords.length;r++)t.push([]);for(var r=0;r<e.faces_vertices.length;r++)for(var s=e.faces_vertices[r],n=0;n<s.length;n++)t[s[n]].push(r);return e.vertices_faces=t,e}function R(e){for(var t=0;t<e.vertices_vertices.length;t++){for(var r=e.vertices_vertices[t],s=e.vertices_edges[t],n=[],i=0;i<r.length;i++){for(var l=-1,a=0;a<s.length;a++){var o=s[a];if(e.edges_vertices[o].indexOf(r[i])>=0){l=o;break}}l<0&&console.warn(\"no matching edge found, fix this\"),n.push(l)}e.vertices_edges[t]=n}return e}function F(e){e=R(e),e=O(e);for(var t=0;t<e.vertices_edges.length;t++){for(var r=[[]],s=0,n=e.vertices_edges[t],i=e.vertices_faces[t],l=0;l<n.length;l++){var a=n[l],o=e.edges_assignment[a];if(r[s].push(a),\"C\"==o){r.push([e.edges_vertices.length]),s++;var c=e.edges_vertices.length,g=e.edges_vertices[a];e.edges_vertices.push([g[0],g[1]]),e.edges_assignment[a]=\"B\",e.edges_foldAngle.push(null),e.edges_assignment.push(\"B\");var u=g[0];u==t&&(u=g[1]);var h=e.vertices_edges[u],v=h.indexOf(a);h.splice(v,0,c)}else if(\"B\"==o)if(0==l&&n.length>1){var f=n[1];if(\"B\"==e.edges_assignment[f]){var g=e.edges_vertices[a],u=g[0];u==t&&(u=g[1]);var d=e.edges_vertices[f],p=d[0];p==t&&(p=d[1]),S(e,e.vertices_faces[t],u,p)||(r.push([]),s++)}}else r[s].length>1&&(r.push([]),s++)}if(!(r.length<=1)){for(var _=r[s].length-1;_>=0;_--)r[0].unshift(r[s][_]);r.pop();for(var l=1;l<r.length;l++){var m=e.vertices_coords[t],b=e.vertices_coords.length;e.vertices_coords.push(m.slice());for(var y=[],_=0;_<r[l].length;_++){var a=r[l][_],g=e.edges_vertices[a],w=g[0];g[0]==t?(g[0]=b,w=g[1]):g[1]=b,y.push(w)}if(y.length<2)console.warn(\"problem here\");else for(var _=1;_<y.length;_++){for(var x=y[_],E=y[_-1],A=!1,V=0;V<i.length;V++){var k=e.faces_vertices[i[V]],T=k.indexOf(x),F=k.indexOf(E),z=k.indexOf(t);if(T>=0&&F>=0&&z>=0&&(1===Math.abs(T-z)||Math.abs(T-z)===k.length-1)&&(1===Math.abs(F-z)||Math.abs(F-z)===k.length-1)){A=!0,k[z]=b;break}}A||console.warn(\"problem here\")}}}}return delete e.vertices_faces,delete e.vertices_edges,delete e.vertices_vertices,e}function S(e,t,r,s){if(r==s)return!1;for(var n=0;n<t.length;n++){var i=e.faces_vertices[t[n]];if(i.indexOf(r)>=0&&i.indexOf(s)>=0)return!0}return!1}function z(e){for(var t=e.faces_vertices.length-1;t>=0;t--){for(var r=e.faces_vertices[t],s=!0,n=0;n<r.length;n++){var i=r[n],l=n+1;l>=r.length&&(l=0);for(var a=r[l],o=!1,c=0;c<e.vertices_edges[i].length;c++){var g=e.vertices_edges[i][c],u=e.edges_vertices[g];if(u[0]==i&&u[1]==a||u[1]==i&&u[0]==a){o=!0;if(\"B\"!=e.edges_assignment[g]){s=!1;break}}}if(o||console.warn(\"no connecting edge found on face\"),!s)break}s&&e.faces_vertices.splice(t,1)}return e}function H(t){for(var r=[],s=t.faces_vertices,n=0;n<t.edges_vertices.length;n++){var i=t.edges_assignment[n],l=t.edges_foldAngle[n];if(!(null===l&&!e.foldUseAngles||\"M\"!==i&&\"V\"!==i&&\"F\"!==i))for(var a=t.edges_vertices[n],o=a[0],c=a[1],g=[],u=0;u<s.length;u++){var h=s[u],v=[h[0],h[1],h[2]],f=v.indexOf(o);if(f>=0){var d=v.indexOf(c);if(d>=0&&(g.push(u),d>f?(v.splice(d,1),v.splice(f,1)):(v.splice(f,1),v.splice(d,1)),g.push(v[0]),4==g.length)){d-f!=1&&d-f!=-2||(g=[g[2],g[3],g[0],g[1]]),g.push(n),g.push(l),r.push(g);break}}}}return r}function N(e,t){for(var r=[],s=0,n=0,i=0;i<e.vertices_vertices.length;i++){var l=e.vertices_vertices[i];if(2==l.length){var a=e.vertices_coords[i],o=e.vertices_coords[l[0]],c=e.vertices_coords[l[1]],g=3==a.length,u=[o[0]-a[0],o[1]-a[1]],h=[c[0]-a[0],c[1]-a[1]],v=u[0]*u[0]+u[1]*u[1],f=h[0]*h[0]+h[1]*h[1],d=u[0]*h[0]+u[1]*h[1];if(g&&(u.push(o[2]-a[2]),h.push(c[2]-a[2]),v+=u[2]*u[2],f+=h[2]*h[2],d+=u[2]*h[2]),d/=Math.sqrt(v*f),Math.abs(d+1)<t){if(!M(e,l[0],i,l[1])){r.push(n++);continue}s++,r.push(null)}else r.push(n++)}else r.push(n++)}if(0==s)return e;if(console.warn(s+\" redundant vertices found\"),e=X.filter.remapField(e,\"vertices\",r),e.faces_vertices)for(var i=0;i<e.faces_vertices.length;i++)for(var p=e.faces_vertices[i],_=p.length-1;_>=0;_--)null===p[_]&&p.splice(_,1);return e}function M(e,t,r,s){for(var n=0,i=0,l=[],a=null,o=[],c=e.edges_vertices.length-1;c>=0;c--){var g=e.edges_vertices[c];if(g.indexOf(r)>=0&&(g.indexOf(t)>=0||g.indexOf(s)>=0)){if(null===a)a=e.edges_assignment[c];else if(a!=e.edges_assignment[c])return console.log(a,e.edges_assignment[c]),console.warn(\"different edge assignments\"),!1;var u=e.edges_foldAngle[c];isNaN(u)&&console.log(c),l.push(u),u&&(n+=u,i++),o.push(c)}}l[0]!=l[1]&&console.warn(\"incompatible angles: \"+JSON.stringify(l));for(var c=0;c<o.length;c++){var h=o[c];e.edges_vertices.splice(h,1),e.edges_assignment.splice(h,1),e.edges_foldAngle.splice(h,1)}e.edges_vertices.push([t,s]),e.edges_assignment.push(a),i>0?e.edges_foldAngle.push(n/i):e.edges_foldAngle.push(null);var h=e.vertices_vertices[t].indexOf(r);return e.vertices_vertices[t].splice(h,1),e.vertices_vertices[t].push(s),h=e.vertices_vertices[s].indexOf(r),e.vertices_vertices[s].splice(h,1),e.vertices_vertices[s].push(t),!0}function C(e){e.vertices_vertices||(console.warn(\"compute vertices_vertices first\"),e=X.convert.edges_vertices_to_vertices_vertices_unsorted(e));for(var t=0,r=[],s=0,n=0;n<e.vertices_vertices.length;n++)void 0===e.vertices_vertices[n]||0==e.vertices_vertices[n].length?(t++,r.push(null)):r.push(s++);return 0==t?e:(console.warn(t+\" stray vertices found\"),X.filter.remapField(e,\"vertices\",r))}function P(e,t){for(var r=e.vertices_coords,s=e.faces_vertices,n=e.edges_vertices,i=e.edges_foldAngle,l=e.edges_assignment,a=[],o=0;o<s.length;o++){var c=s[o];if(3!=c.length)if(4!=c.length){for(var g=[],u=0;u<n.length;u++){var h=n[u];c.indexOf(h[0])>=0&&c.indexOf(h[1])>=0&&g.push(u)}var v=[],f=[];if(t){for(var u=0;u<c.length;u++){var d=r[c[u]];v.push(d[0]),v.push(d[2])}f=earcut(v,null,2)}else for(var u=2;u>=0;u--){v=[];for(var p=0;p<c.length;p++){var d=r[c[p]];v.push(d[u]),v.push(d[(u+1)%3]),v.push(d[(u+2)%3])}if(f=earcut(v,null,3),f.length>=3*(c.length-2))break}for(var _=null,u=0;u<f.length;u+=3){for(var p=0;p<3;p++){if(0===f[u+p]&&1===f[u+(p+1)%3]){_=!1;break}if(1===f[u+p]&&0===f[u+(p+1)%3]){_=!0;break}}if(null!=_)break}for(var u=0;u<f.length;u+=3){var m;m=_?[c[f[u+2]],c[f[u+1]],c[f[u]]]:[c[f[u]],c[f[u+1]],c[f[u+2]]];for(var b=[!1,!1,!1],p=0;p<g.length;p++){var h=n[g[p]],y=h.indexOf(m[0]),w=h.indexOf(m[1]),x=h.indexOf(m[2]);if(y>=0){if(w>=0){b[0]=!0;continue}if(x>=0){b[2]=!0;continue}}w>=0&&x>=0&&(b[1]=!0)}for(var p=0;p<3;p++)b[p]||(0==p?(g.push(n.length),n.push([m[0],m[1]]),i.push(0),l.push(\"F\")):1==p?(g.push(n.length),n.push([m[2],m[1]]),i.push(0),l.push(\"F\")):2==p&&(g.push(n.length),n.push([m[2],m[0]]),i.push(0),l.push(\"F\")));a.push(m)}}else{var E=G(r[c[0]]),A=G(r[c[1]]),V=G(r[c[2]]),k=G(r[c[3]]),T=E.clone().sub(V).lengthSq(),O=A.clone().sub(k).lengthSq();O<T?(n.push([c[1],c[3]]),i.push(0),l.push(\"F\"),a.push([c[0],c[1],c[3]]),a.push([c[1],c[2],c[3]])):(n.push([c[0],c[2]]),i.push(0),l.push(\"F\"),a.push([c[0],c[1],c[2]]),a.push([c[0],c[2],c[3]]))}else a.push(c)}return e.faces_vertices=a,e}function L(){if(e.includeCurves)return void e.curvedFolding.saveSVG();if(e.noCreasePatternAvailable())return void e.warn(\"No crease pattern available.\");var t=new XMLSerializer,r=t.serializeToString($(\"#svgViewer>svg\").get(0)),s=new Blob([r],{type:\"image/svg+xml;charset=utf-8\"}),n=URL.createObjectURL(s),i=document.createElement(\"a\");i.href=n,i.download=e.filename+\".svg\",document.body.appendChild(i),i.click(),document.body.removeChild(i)}function B(e,t){for(var r=e.vertices_coords,s=e.edges_vertices,n=e.edges_foldAngle,i=e.edges_assignment,l=s.length-1;l>=0;l--)for(var a=l-1;a>=0;a--){var o=D(r[s[l][0]]),c=D(r[s[l][1]]),g=D(r[s[a][0]]),u=D(r[s[a][1]]),h=j(o,c,g,u);if(h){var v=c.clone().sub(o).length(),f=u.clone().sub(g).length(),d=q(h.t1,v,t),p=q(h.t2,f,t);if(null===d||null===p)continue;var _=d>t&&d<v-t,m=p>t&&p<f-t;if(!_&&!m)continue;var b;if(_&&m?(b=r.length,r.push([h.intersection.x,h.intersection.y])):b=_?p<=t?s[a][0]:s[a][1]:d<=t?s[l][0]:s[l][1],_){var y=n[l],w=i[l];s.splice(l,1,[b,s[l][0]],[b,s[l][1]]),n.splice(l,1,y,y),i.splice(l,1,w,w),l++}if(m){var y=n[a],w=i[a];s.splice(a,1,[b,s[a][0]],[b,s[a][1]]),n.splice(a,1,y,y),i.splice(a,1,w,w),a++,l++}}}return e}function G(e){return 2==e.length?D(e):U(e)}function D(e){return new THREE.Vector2(e[0],e[1])}function U(e){return new THREE.Vector3(e[0],e[1],e[2])}function q(e,t,r){var s=e*t;return s<-r?null:s>t+r?null:s}function j(e,t,r,s){var n,i,l=e.x,a=e.y,o=t.x,c=t.y,g=r.x,u=r.y,h=s.x,v=s.y,f=(v-u)*(o-l)-(h-g)*(c-a);return 0==f?null:(n=((h-g)*(a-u)-(v-u)*(l-g))/f,i=((o-l)*(a-u)-(c-a)*(l-g))/f,{intersection:new THREE.Vector2(l+n*(o-l),a+n*(c-a)),t1:n,t2:i})}function I(e){return e?K:Z}function J(t,s,n){r();var i=V(t,n);return e.fold=Z,e.textureLibrary&&e.textureLibrary.length>0&&e.cellColorizer&&e.cellColorizer.generateTextureMappedCellImage&&(console.log(\" Pattern loaded with existing textures, auto-generating texture-mapped cells...\"),setTimeout(function(){try{e.cellColorizer.generateTextureMappedCellImage(!0),console.log(\" Auto-generated texture-mapped cells from pattern load\")}catch(e){console.error(\" Failed to auto-generate from pattern load:\",e)}},500)),E(),i}function W(){return Z.faces_vertices}var X=require(\"fold\"),Z={},K={},Q=[],Y=[],ee=[],te=[],re=[],se=[],ne=[],ie=[],le=[],ae=[],oe=[],ce=[],ge=[];r();var ue=new THREE.SVGLoader;return{loadSVG:x,saveSVG:L,getFoldData:I,getTriangulatedFaces:W,setFoldData:J}}</script> <script type=\"text/javascript\">function makeSaveGEO(e){var a=(new THREE.Geometry).fromBufferGeometry(globals.model.getGeometry());if(0==a.vertices.length||0==a.faces.length)return void globals.warn(\"No geometry to save.\");for(var t=0;t<a.vertices.length;t++)a.vertices[t].multiplyScalar(globals.exportScale/globals.scale);if(e)for(var r=a.faces.length,t=0;t<r;t++){var o=a.faces[t];a.faces.push(new THREE.Face3(o.a,o.c,o.b))}return a}function saveSTL(){var e=[];e.push({geo:makeSaveGEO(globals.doublesidedSTL),offset:new THREE.Vector3(0,0,0),orientation:new THREE.Quaternion(0,0,0,1)});var a=geometryToSTLBin(e);if(a){var t=new Blob([a],{type:\"application/octet-binary\"}),r=$(\"#stlFilename\").val();\"\"==r&&(r=globals.filename),saveAs(t,r+\".stl\")}}function saveOBJ(){var e=(new THREE.Geometry).fromBufferGeometry(globals.model.getGeometry());if(globals.includeCurves)var a=globals.curvedFolding.getFoldData(!1);else var a=globals.pattern.getFoldData(!1);if(0==e.vertices.length||0==e.faces.length)return void globals.warn(\"No geometry to save.\");for(var t=0;t<e.vertices.length;t++)e.vertices[t].multiplyScalar(globals.exportScale/globals.scale);if(globals.includeCurves)var r=globals.curvedFolding.getFoldData(!1);else var r=globals.pattern.getFoldData(!1);var o=\"#output from https://origamisimulator.org/\\n\";o+=\"# \"+e.vertices.length+\"vertices\\n\";for(var t=0;t<e.vertices.length;t++){var s=e.vertices[t];o+=\"v \"+s.x+\" \"+s.y+\" \"+s.z+\"\\n\"}o+=\"# uv texture coords\\n\";for(var l=[1/0,1/0],n=[-1/0,-1/0],t=0;t<a.vertices_coords.length;t++){var s=a.vertices_coords[t];s[0]<l[0]&&(l[0]=s[0]),s[2]<l[1]&&(l[1]=s[2]),s[0]>n[0]&&(n[0]=s[0]),s[2]>n[1]&&(n[1]=s[2])}var v=n[0]-l[0];n[1]-l[1]>v&&(v=n[1]-l[1]);for(var t=0;t<a.vertices_coords.length;t++){var s=a.vertices_coords[t];o+=\"vt \"+(s[0]-l[0])/v+\" \"+(s[2]-l[1])/v+\"\\n\"}o+=\"# \"+r.faces_vertices.length+\" faces\\n\";for(var t=0;t<r.faces_vertices.length;t++){var g=r.faces_vertices[t];o+=\"f \"+(g[0]+1)+\"/\"+(g[0]+1)+\" \"+(g[1]+1)+\"/\"+(g[1]+1)+\" \"+(g[2]+1)+\"/\"+(g[2]+1)+\"\\n\"}o+=\"# \"+r.edges_vertices.length+\" edges\\n\";for(var t=0;t<r.edges_vertices.length;t++){var i=r.edges_vertices[t];o+=\"#e \"+(i[0]+1)+\" \"+(i[1]+1)+\" \",\"F\"==r.edges_assignment[t]?o+=1:\"B\"==r.edges_assignment[t]?o+=0:\"M\"==r.edges_assignment[t]?o+=3:\"V\"==r.edges_assignment[t]?o+=2:(console.log(\"don't know how to convert type \"+r.edges_assignment[t]),o+=0),o+=\" 0\\n\"}var c=new Blob([o],{type:\"application/octet-binary\"}),f=$(\"#objFilename\").val();\"\"==f&&(f=globals.filename),saveAs(c,f+\".obj\")}</script> <script type=\"text/javascript\">function saveFOLD(){var e=(new THREE.Geometry).fromBufferGeometry(globals.model.getGeometry());if(0==e.vertices.length||0==e.faces.length)return void globals.warn(\"No geometry to save.\");if(1!=globals.exportScale)for(var s=0;s<e.vertices.length;s++)e.vertices[s].multiplyScalar(globals.exportScale);var a=$(\"#foldFilename\").val();\"\"==a&&(a=globals.filename);for(var l={file_spec:1.1,file_creator:\"Origami Simulator: http://git.amandaghassaei.com/OrigamiSimulator/\",file_author:$(\"#foldAuthor\").val(),file_classes:[\"singleModel\"],frame_title:a,frame_classes:[\"foldedForm\"],frame_attributes:[\"3D\"],frame_unit:globals.foldUnits,vertices_coords:[],edges_vertices:[],edges_assignment:[],faces_vertices:[]},s=0;s<e.vertices.length;s++){var t=e.vertices[s];l.vertices_coords.push([t.x,t.y,t.z])}var r=globals.triangulateFOLDexport;if(globals.includeCurves)var o=globals.curvedFolding.getFoldData(!r);else var o=globals.pattern.getFoldData(!r);l.edges_vertices=o.edges_vertices;for(var i=[],s=0;s<o.edges_assignment.length;s++)\"C\"==o.edges_assignment[s]?i.push(\"B\"):i.push(o.edges_assignment[s]);l.edges_assignment=i,l.faces_vertices=o.faces_vertices,globals.exportFoldAngle&&(l.edges_foldAngle=o.edges_foldAngle);var g=new Blob([JSON.stringify(l,null,4)],{type:\"application/octet-binary\"});saveAs(g,a+\".fold\")}</script> <script type=\"text/javascript\">/**\n * Cell Colorizer - Generate colored cell map images of origami patterns\n */\n\nfunction initCellColorizer(globals) {\n    \n    // Generate a set of visually distinct colors for cells\n    function generateDistinctColors(count) {\n        const colors = [];\n        \n        // Start with some predefined distinct colors\n        const baseColors = [\n            '#FF6B6B', '#4ECDC4', '#45B7D1', '#96CEB4', '#FFEAA7',\n            '#DDA0DD', '#98D8C8', '#F7DC6F', '#BB8FCE', '#85C1E9',\n            '#F8C471', '#82E0AA', '#F1948A', '#85C1E9', '#D7BDE2',\n            '#A9DFBF', '#F9E79F', '#D5A6BD', '#A2D9CE', '#FAD7A0'\n        ];\n        \n        // If we need more colors than base colors, generate additional ones\n        for (let i = 0; i < count; i++) {\n            if (i < baseColors.length) {\n                colors.push(baseColors[i]);\n            } else {\n                // Generate colors using HSL for better distribution\n                const hue = (i * 137.508) % 360; // Golden angle approximation\n                const saturation = 60 + (i % 40); // 60-100%\n                const lightness = 45 + (i % 30); // 45-75%\n                colors.push(`hsl(${hue}, ${saturation}%, ${lightness}%)`);\n            }\n        }\n        \n        return colors;\n    }\n    \n    // Convert color string to RGB values\n    function colorToRGB(color) {\n        const canvas = document.createElement('canvas');\n        canvas.width = 1;\n        canvas.height = 1;\n        const ctx = canvas.getContext('2d');\n        ctx.fillStyle = color;\n        ctx.fillRect(0, 0, 1, 1);\n        const imageData = ctx.getImageData(0, 0, 1, 1);\n        return {\n            r: imageData.data[0],\n            g: imageData.data[1],\n            b: imageData.data[2]\n        };\n    }\n    \n    // Get the bounding box of all vertices\n    function getBoundingBox(vertices) {\n        let minX = Infinity, minZ = Infinity;\n        let maxX = -Infinity, maxZ = -Infinity;\n        \n        for (const vertex of vertices) {\n            const x = vertex[0];\n            const z = vertex[2]; // Using z coordinate for 2D projection\n            \n            minX = Math.min(minX, x);\n            maxX = Math.max(maxX, x);\n            minZ = Math.min(minZ, z);\n            maxZ = Math.max(maxZ, z);\n        }\n        \n        return { minX, maxX, minZ, maxZ };\n    }\n    \n    // Check if point is inside polygon using ray casting algorithm\n    function pointInPolygon(point, polygon) {\n        const x = point[0], y = point[1];\n        let inside = false;\n        \n        for (let i = 0, j = polygon.length - 1; i < polygon.length; j = i++) {\n            const xi = polygon[i][0], yi = polygon[i][1];\n            const xj = polygon[j][0], yj = polygon[j][1];\n            \n            if (((yi > y) !== (yj > y)) && (x < (xj - xi) * (y - yi) / (yj - yi) + xi)) {\n                inside = !inside;\n            }\n        }\n        \n        return inside;\n    }\n    \n    // Generate the colored cell map image\n    function generateCellMapImage() {\n        try {\n            console.log(\"Starting cell map generation...\");\n            \n            // Get fold data\n            const fold = globals.includeCurves ? \n                globals.curvedFolding.getFoldData(false) : \n                globals.pattern.getFoldData(false);\n            \n            if (!fold || !fold.vertices_coords || !fold.faces_vertices) {\n                globals.warn(\"No pattern data available to generate cell map.\");\n                return;\n            }\n            \n            console.log(\"Fold data:\", fold);\n            console.log(\"Vertices:\", fold.vertices_coords.length);\n            console.log(\"Faces:\", fold.faces_vertices.length);\n            \n            const vertices = fold.vertices_coords;\n            const faces = fold.faces_vertices;\n            \n            if (faces.length === 0) {\n                globals.warn(\"No faces found in the pattern.\");\n                return;\n            }\n            \n            // Generate distinct colors for each face\n            const colors = generateDistinctColors(faces.length);\n            console.log(\"Generated colors for\", faces.length, \"faces\");\n            \n            // Get bounding box\n            const bbox = getBoundingBox(vertices);\n            console.log(\" CellColorizer cell map bounding box:\", bbox);\n            \n            const width = bbox.maxX - bbox.minX;\n            const height = bbox.maxZ - bbox.minZ;\n            \n            console.log(\" CellColorizer cell map pattern dimensions:\", width.toFixed(3), \"x\", height.toFixed(3));\n            console.log(\" CellColorizer vertices count:\", vertices.length);\n            \n            if (width === 0 || height === 0) {\n                globals.warn(\"Pattern has no dimensions.\");\n                return;\n            }\n            \n            // Calculate appropriate canvas size based on pattern aspect ratio\n            const aspectRatio = width / height;\n            console.log(\"Pattern aspect ratio:\", aspectRatio.toFixed(3), \"(width/height =\", width.toFixed(3), \"/\", height.toFixed(3), \")\");\n            \n            // Determine canvas dimensions based on aspect ratio\n            const maxDimension = 2048;\n            let canvasWidth, canvasHeight;\n            \n            if (aspectRatio >= 1) {\n                canvasWidth = maxDimension;\n                canvasHeight = Math.round(maxDimension / aspectRatio);\n            } else {\n                canvasHeight = maxDimension;\n                canvasWidth = Math.round(maxDimension * aspectRatio);\n            }\n            \n            // Ensure minimum size\n            canvasWidth = Math.max(canvasWidth, 512);\n            canvasHeight = Math.max(canvasHeight, 512);\n            \n            console.log(\"Cell map canvas dimensions:\", canvasWidth + \"x\" + canvasHeight);\n            \n            // Create canvas with proper aspect ratio\n            const canvas = document.createElement('canvas');\n            canvas.width = canvasWidth;\n            canvas.height = canvasHeight;\n            const ctx = canvas.getContext('2d');\n            \n            // Clear with white background\n            ctx.fillStyle = 'white';\n            ctx.fillRect(0, 0, canvasWidth, canvasHeight);\n            \n            // Apply 180 degree rotation to fix upside-down texture\n            ctx.save();\n            ctx.translate(canvasWidth / 2, canvasHeight / 2);\n            ctx.rotate(Math.PI); // 180 degree rotation\n            ctx.translate(-canvasWidth / 2, -canvasHeight / 2);\n            \n            console.log(\"Canvas created with vertical flip, starting to draw faces...\");\n            \n            // Calculate scale to fit the pattern exactly in the canvas\n            const scaleX = canvasWidth / width;\n            const scaleY = canvasHeight / height;\n            const scale = Math.min(scaleX, scaleY);\n            \n            // Center the pattern in the canvas\n            const scaledWidth = width * scale;\n            const scaledHeight = height * scale;\n            const offsetX = (canvasWidth - scaledWidth) / 2;\n            const offsetY = (canvasHeight - scaledHeight) / 2;\n            \n            console.log(\"Cell map scale calculations:\");\n            console.log(\"  - scale:\", scale.toFixed(3));\n            console.log(\"  - offset:\", offsetX.toFixed(1) + \",\" + offsetY.toFixed(1));\n            \n            // Function to transform coordinates to canvas space\n            function transformPoint(vertex) {\n                const x = (vertex[0] - bbox.minX) * scale + offsetX;\n                const y = (vertex[2] - bbox.minZ) * scale + offsetY; // \n                return [x, y];\n            }\n            \n            // Draw each face\n            for (let i = 0; i < faces.length; i++) {\n                const face = faces[i];\n                const color = colors[i];\n                \n                if (face.length < 3) continue; // Skip invalid faces\n                \n                // Convert face vertices to canvas coordinates\n                const canvasPoints = [];\n                for (let j = 0; j < face.length; j++) {\n                    const vertexIndex = face[j];\n                    if (vertexIndex >= 0 && vertexIndex < vertices.length) {\n                        const vertex = vertices[vertexIndex];\n                        canvasPoints.push(transformPoint(vertex));\n                    }\n                }\n                \n                if (canvasPoints.length < 3) continue; // Skip if not enough valid points\n                \n                // Draw filled polygon\n                ctx.fillStyle = color;\n                ctx.beginPath();\n                ctx.moveTo(canvasPoints[0][0], canvasPoints[0][1]);\n                \n                for (let j = 1; j < canvasPoints.length; j++) {\n                    ctx.lineTo(canvasPoints[j][0], canvasPoints[j][1]);\n                }\n                \n                ctx.closePath();\n                ctx.fill();\n                \n                // Draw outline\n                ctx.strokeStyle = '#333333';\n                ctx.lineWidth = 1;\n                ctx.stroke();\n            }\n            \n            console.log(\"Finished drawing\", faces.length, \"faces\");\n            \n            // Restore canvas state after rotation\n            ctx.restore();\n            \n            // Convert to blob and download\n            canvas.toBlob(function(blob) {\n                if (blob) {\n                    const url = URL.createObjectURL(blob);\n                    const downloadLink = document.createElement(\"a\");\n                    downloadLink.href = url;\n                    \n                    const filename = globals.filename || \"origami_pattern\";\n                    downloadLink.download = filename + \"_cell_map.png\";\n                    \n                    document.body.appendChild(downloadLink);\n                    downloadLink.click();\n                    document.body.removeChild(downloadLink);\n                    \n                    URL.revokeObjectURL(url);\n                    \n                    console.log(\"Cell map image downloaded successfully\");\n                    globals.warn(\" Cell map image downloaded: \" + downloadLink.download);\n                } else {\n                    console.error(\"Failed to create blob\");\n                    globals.warn(\"Failed to generate cell map image.\");\n                }\n            }, 'image/png');\n            \n        } catch (error) {\n            console.error(\"Error generating cell map:\", error);\n            globals.warn(\"Error generating cell map: \" + error.message);\n        }\n    }\n    \n    // Generate texture-mapped cell image\n    function generateTextureMappedCellImage(autoMode = false) {\n        try {\n            console.log(\"Starting texture-mapped cell image generation...\");\n            \n            // Check if we have textures loaded\n            if (!globals.textureLibrary || globals.textureLibrary.length === 0) {\n                globals.warn(\"No textures loaded. Please load texture images first.\");\n                return;\n            }\n            \n            // Get fold data\n            const fold = globals.includeCurves ? \n                globals.curvedFolding.getFoldData(false) : \n                globals.pattern.getFoldData(false);\n            \n            if (!fold || !fold.vertices_coords || !fold.faces_vertices) {\n                globals.warn(\"No pattern data available to generate texture-mapped cell image.\");\n                return;\n            }\n            \n            console.log(\"Fold data:\", fold);\n            console.log(\"Vertices:\", fold.vertices_coords.length);\n            console.log(\"Faces:\", fold.faces_vertices.length);\n            console.log(\"Textures:\", globals.textureLibrary.length);\n            \n            const vertices = fold.vertices_coords;\n            const faces = fold.faces_vertices;\n            const numTextures = globals.textureLibrary.length;\n            \n            if (faces.length === 0) {\n                globals.warn(\"No faces found in the pattern.\");\n                return;\n            }\n            \n            // Calculate how many cells per texture\n            const cellsPerTexture = Math.ceil(faces.length / numTextures);\n            console.log(\"Cells per texture:\", cellsPerTexture);\n            \n            // Get bounding box\n            const bbox = getBoundingBox(vertices);\n            console.log(\" CellColorizer texture mapping bounding box:\", bbox);\n            \n            const width = bbox.maxX - bbox.minX;\n            const height = bbox.maxZ - bbox.minZ;\n            \n            console.log(\" CellColorizer texture mapping pattern dimensions:\", width.toFixed(3), \"x\", height.toFixed(3));\n            console.log(\" CellColorizer vertices count:\", vertices.length);\n            \n            if (width === 0 || height === 0) {\n                globals.warn(\"Pattern has no dimensions.\");\n                return;\n            }\n            \n            // Calculate appropriate canvas size based on pattern aspect ratio\n            const aspectRatio = width / height;\n            console.log(\"Pattern aspect ratio:\", aspectRatio.toFixed(3), \"(width/height =\", width.toFixed(3), \"/\", height.toFixed(3), \")\");\n            \n            // Determine canvas dimensions based on aspect ratio\n            // Use a maximum dimension of 2048 for performance, but maintain aspect ratio\n            const maxDimension = 2048;\n            let canvasWidth, canvasHeight;\n            \n            if (aspectRatio >= 1) {\n                // Width is larger or equal to height\n                canvasWidth = maxDimension;\n                canvasHeight = Math.round(maxDimension / aspectRatio);\n            } else {\n                // Height is larger than width\n                canvasHeight = maxDimension;\n                canvasWidth = Math.round(maxDimension * aspectRatio);\n            }\n            \n            // Ensure minimum size for small patterns\n            canvasWidth = Math.max(canvasWidth, 512);\n            canvasHeight = Math.max(canvasHeight, 512);\n            \n            console.log(\"Canvas dimensions:\", canvasWidth + \"x\" + canvasHeight, \"based on pattern aspect ratio\");\n            \n            // Store canvas dimensions globally for consistent UV mapping\n            globals.cellColorizerCanvasWidth = canvasWidth;\n            globals.cellColorizerCanvasHeight = canvasHeight;\n            globals.cellColorizerScale = null; // Will be calculated later\n            globals.cellColorizerOffsetX = null;\n            globals.cellColorizerOffsetY = null;\n            \n            // Create main canvas for the final result - aspect ratio matched\n            const finalCanvas = document.createElement('canvas');\n            finalCanvas.width = canvasWidth;\n            finalCanvas.height = canvasHeight;\n            const finalCtx = finalCanvas.getContext('2d');\n            \n            // Clear with transparent background\n            finalCtx.clearRect(0, 0, canvasWidth, canvasHeight);\n            \n            // Apply 180 degree rotation to fix upside-down texture\n            finalCtx.save();\n            finalCtx.translate(canvasWidth / 2, canvasHeight / 2);\n            finalCtx.rotate(Math.PI); // 180 degree rotation\n            finalCtx.translate(-canvasWidth / 2, -canvasHeight / 2);\n            \n            console.log(\"Canvas created, starting aspect-ratio-matched texture mapping...\");\n            \n            // Calculate scale to fit the pattern exactly in the canvas\n            const scaleX = canvasWidth / width;\n            const scaleY = canvasHeight / height;\n            \n            // Use the smaller scale to ensure the entire pattern fits\n            const scale = Math.min(scaleX, scaleY);\n            \n            // Center the pattern in the canvas\n            const scaledWidth = width * scale;\n            const scaledHeight = height * scale;\n            const offsetX = (canvasWidth - scaledWidth) / 2;\n            const offsetY = (canvasHeight - scaledHeight) / 2;\n            \n            // Store transformation parameters globally for consistent UV mapping\n            globals.cellColorizerScale = scale;\n            globals.cellColorizerOffsetX = offsetX;\n            globals.cellColorizerOffsetY = offsetY;\n            \n            console.log(\"Texture map scale calculations:\");\n            console.log(\"  - scaleX:\", scaleX.toFixed(3), \"scaleY:\", scaleY.toFixed(3));\n            console.log(\"  - final scale:\", scale.toFixed(3));\n            console.log(\"  - scaled dimensions:\", scaledWidth.toFixed(1) + \"x\" + scaledHeight.toFixed(1));\n            console.log(\"  - offset:\", offsetX.toFixed(1) + \",\" + offsetY.toFixed(1));\n            \n            // Function to transform coordinates to canvas space with full coverage\n            function transformPoint(vertex) {\n                const x = (vertex[0] - bbox.minX) * scale + offsetX;\n                const y = (vertex[2] - bbox.minZ) * scale + offsetY; // \n                return [x, y];\n            }\n            \n            // Process each texture\n            for (let textureIndex = 0; textureIndex < numTextures; textureIndex++) {\n                const texture = globals.textureLibrary[textureIndex];\n                if (!texture || !texture.image) {\n                    console.warn(\"Texture\", textureIndex, \"has no image data\");\n                    continue;\n                }\n                \n                console.log(\"Processing texture\", textureIndex, \":\", texture.name);\n                \n                // Create a temporary canvas with FIXED pattern dimensions\n                const tempCanvas = document.createElement('canvas');\n                tempCanvas.width = canvasWidth;\n                tempCanvas.height = canvasHeight;\n                const tempCtx = tempCanvas.getContext('2d');\n                \n                // Clear with transparent background\n                tempCtx.clearRect(0, 0, canvasWidth, canvasHeight);\n                \n                // Apply 180 degree rotation for consistency\n                tempCtx.save();\n                tempCtx.translate(canvasWidth / 2, canvasHeight / 2);\n                tempCtx.rotate(Math.PI); // 180 degree rotation\n                tempCtx.translate(-canvasWidth / 2, -canvasHeight / 2);\n                \n                // Calculate aspect ratios to fit within PATTERN bounds (not canvas bounds)\n                console.log(\" Fitting texture to pattern dimensions:\");\n                console.log(\"  - Pattern dimensions:\", scaledWidth.toFixed(1) + \"x\" + scaledHeight.toFixed(1));\n                console.log(\"  - Pattern position:\", offsetX.toFixed(1) + \",\" + offsetY.toFixed(1));\n                console.log(\"  - Canvas dimensions:\", canvasWidth + \"x\" + canvasHeight);\n                \n                const imageAspect = texture.image.width / texture.image.height;\n                const patternAspect = scaledWidth / scaledHeight;\n                \n                // FORCE texture to EXACT pattern size (no aspect ratio fitting)\n                // This ensures texture size matches fold lines exactly\n                const drawWidth = scaledWidth;\n                const drawHeight = scaledHeight;\n                const drawX = offsetX;\n                const drawY = offsetY;\n                \n                console.log(\"Texture\", textureIndex, \"STRETCHED to EXACT pattern size:\");\n                console.log(\"  - Image size:\", texture.image.width + \"x\" + texture.image.height, \"aspect:\", imageAspect.toFixed(3));\n                console.log(\"  - Pattern size:\", scaledWidth.toFixed(1) + \"x\" + scaledHeight.toFixed(1), \"aspect:\", patternAspect.toFixed(3));\n                console.log(\"  - Draw size:\", drawWidth.toFixed(1) + \"x\" + drawHeight.toFixed(1), \"(FORCED to pattern size)\");\n                console.log(\"  - Draw position:\", drawX.toFixed(1) + \",\" + drawY.toFixed(1));\n                console.log(\"  -  EXACT match with fold lines: \" + scale.toFixed(3));\n                \n                // Draw the texture fitted to PATTERN dimensions (same scale as fold lines)\n                tempCtx.drawImage(texture.image, drawX, drawY, drawWidth, drawHeight);\n                \n                // Restore temp canvas state\n                tempCtx.restore();\n                \n                // Create a mask canvas for the assigned cells\n                const maskCanvas = document.createElement('canvas');\n                maskCanvas.width = canvasWidth;\n                maskCanvas.height = canvasHeight;\n                const maskCtx = maskCanvas.getContext('2d');\n                \n                // Clear mask with transparent background\n                maskCtx.clearRect(0, 0, canvasWidth, canvasHeight);\n                \n                // Apply 180 degree rotation to mask canvas\n                maskCtx.save();\n                maskCtx.translate(canvasWidth / 2, canvasHeight / 2);\n                maskCtx.rotate(Math.PI); // 180 degree rotation\n                maskCtx.translate(-canvasWidth / 2, -canvasHeight / 2);\n                \n                maskCtx.fillStyle = 'white';\n                \n                // Calculate which faces are assigned to this texture\n                const startFace = textureIndex * cellsPerTexture;\n                const endFace = Math.min((textureIndex + 1) * cellsPerTexture, faces.length);\n                \n                console.log(\"Texture\", textureIndex, \"assigned to faces\", startFace, \"to\", endFace - 1);\n                console.log(\" Mask generation: using SAME coordinates as texture\");\n                \n                // Draw the assigned faces on the mask using THE SAME transformPoint function\n                for (let faceIndex = startFace; faceIndex < endFace; faceIndex++) {\n                    const face = faces[faceIndex];\n                    \n                    if (face.length < 3) continue; // Skip invalid faces\n                    \n                    // Use THE SAME coordinate transformation as the rest of the system\n                    const canvasPoints = face.map(vertexIndex => {\n                        const vertex = vertices[vertexIndex];\n                        return transformPoint(vertex); // SAME function as everywhere else\n                    });\n                    \n                    // Debug first face coordinates\n                    if (faceIndex === startFace) {\n                        console.log(\" First face canvas coordinates:\", canvasPoints.slice(0, 3));\n                    }\n                    \n                    // Draw filled polygon on mask\n                    maskCtx.beginPath();\n                    maskCtx.moveTo(canvasPoints[0][0], canvasPoints[0][1]);\n                    \n                    for (let j = 1; j < canvasPoints.length; j++) {\n                        maskCtx.lineTo(canvasPoints[j][0], canvasPoints[j][1]);\n                    }\n                    \n                    maskCtx.closePath();\n                    maskCtx.fill();\n                }\n                \n                // Restore mask canvas state\n                maskCtx.restore();\n                \n                // Apply mask to the texture using composite operation\n                tempCtx.globalCompositeOperation = 'destination-in';\n                tempCtx.drawImage(maskCanvas, 0, 0);\n                \n                // Composite this texture layer onto the final canvas\n                finalCtx.globalCompositeOperation = 'source-over';\n                finalCtx.drawImage(tempCanvas, 0, 0);\n                \n                console.log(\"Applied texture\", textureIndex, \"to\", endFace - startFace, \"faces\");\n            }\n            \n            console.log(\"Finished processing\", numTextures, \"textures\");\n            \n            // Restore canvas state after rotation\n            finalCtx.restore();\n            \n            // Apply the generated texture to the origami model immediately\n            applyTextureMappedImageToModel(finalCanvas, (globals.filename || \"origami_pattern\") + \"_texture_mapped\", {\n                bbox: bbox,\n                scale: scale,\n                offsetX: offsetX,\n                offsetY: offsetY,\n                canvasWidth: canvasWidth,\n                canvasHeight: canvasHeight\n            }, fold);\n            \n            // Only download if not in auto mode\n            if (!autoMode) {\n                // Convert to blob and download\n                finalCanvas.toBlob(function(blob) {\n                    if (blob) {\n                        const url = URL.createObjectURL(blob);\n                        const downloadLink = document.createElement(\"a\");\n                        downloadLink.href = url;\n                        \n                        const filename = globals.filename || \"origami_pattern\";\n                        downloadLink.download = filename + \"_texture_mapped.png\";\n                        \n                        document.body.appendChild(downloadLink);\n                        downloadLink.click();\n                        document.body.removeChild(downloadLink);\n                        \n                        URL.revokeObjectURL(url);\n                        \n                        console.log(\"Texture-mapped image downloaded successfully and applied to model\");\n                    } else {\n                        console.error(\"Failed to create blob\");\n                        globals.warn(\"Failed to generate texture-mapped image.\");\n                    }\n                }, 'image/png');\n            } else {\n                console.log(\"Auto mode: texture applied without download\");\n            }\n            \n        } catch (error) {\n            console.error(\"Error generating texture-mapped image:\", error);\n            globals.warn(\"Error generating texture-mapped image: \" + error.message);\n        }\n    }\n    \n    // Apply the generated texture-mapped image to the origami model\n    function applyTextureMappedImageToModel(canvas, textureName, transformParams, fold) {\n        try {\n            console.log(\"Applying texture-mapped image to origami model...\");\n            \n            // Extract transform parameters\n            const { bbox, scale, offsetX, offsetY, canvasWidth, canvasHeight } = transformParams;\n            \n            // Create a new texture from the canvas\n            const texture = new THREE.CanvasTexture(canvas);\n            texture.wrapS = THREE.RepeatWrapping;\n            texture.wrapT = THREE.RepeatWrapping;\n            texture.repeat.set(1.0, 1.0); // Use 1:1 mapping for the generated texture\n            texture.flipY = false; // Disable Y-flip since we already applied 180 degree rotation in canvas\n            texture.generateMipmaps = true;\n            texture.minFilter = THREE.LinearFilter;\n            texture.magFilter = THREE.LinearFilter;\n            texture.name = textureName;\n            texture.needsUpdate = true;\n            \n            console.log(\"Created texture from canvas:\", textureName, \"Size:\", canvas.width + \"x\" + canvas.height);\n            \n            // Force texture update\n            texture.generateMipmaps = false; // Disable mipmaps for better quality\n            texture.minFilter = THREE.LinearFilter;\n            texture.magFilter = THREE.LinearFilter;\n            \n            // Force simple texture mode - disable all complex texture features\n            console.log(\"Entering simple cell texture mode...\");\n            \n            // Clear complex texture system\n            globals.textureLibrary = [];  // Clear existing textures\n            globals.faceTextureMapping = {};  // Clear face mapping\n            globals.atlasLayout = null;  // Clear atlas\n            globals.textureAtlas = null;  // Clear atlas texture\n            globals.selectedTexture = 0;\n            globals.randomTextures = false;\n            \n            // Set the single texture as the main face texture\n            globals.faceTexture = texture;\n            globals.textureLibrary = [texture];  // Single texture in library\n            globals.useSimpleTextureMode = true;\n            globals.isCellGeneratedTexture = true;\n            globals.faceTextureMapping = 0;\n            globals.atlasLayout = false;\n            \n            // CRITICAL: Pass fold data and transformation parameters to model.js\n            globals.cellColorizerFoldData = fold; // Use the local fold variable, not globals.fold\n            globals.cellColorizerBoundingBox = bbox;\n            globals.cellColorizerTransformParams = {\n                scale: scale,\n                offsetX: offsetX,\n                offsetY: offsetY,\n                canvasWidth: canvasWidth,\n                canvasHeight: canvasHeight\n            };\n            \n            console.log(\" Passing fold data to model.js:\", {\n                foldExists: !!fold,\n                verticesCount: fold ? fold.vertices_coords.length : 0,\n                scale: scale.toFixed(3),\n                offset: offsetX.toFixed(1) + \",\" + offsetY.toFixed(1)\n            });\n            \n            // Update texture repeat setting\n            globals.textureRepeat = 1.0;\n            $(\"#textureRepeat\").val(1.0);\n            \n            console.log(\"Simple texture mode configured:\", {\n                faceTexture: !!globals.faceTexture,\n                textureLibraryLength: globals.textureLibrary.length,\n                faceTextureMapping: Object.keys(globals.faceTextureMapping).length,\n                atlasLayout: !!globals.atlasLayout\n            });\n            \n            // Force switch to texture mode\n            console.log(\"Current color mode:\", globals.colorMode);\n            globals.colorMode = \"texture\";\n            console.log(\"Switched to texture mode\");\n            \n            // Mark this as a generated cell texture to enable special UV handling\n            globals.isCellGeneratedTexture = true;\n            globals.useSimpleTextureMode = true;\n            \n            // Update UI radio buttons\n            $(\"input[name=colorMode]\").prop(\"checked\", false);\n            $(\"input[name=colorMode][value=texture]\").prop(\"checked\", true);\n            \n            // Show/hide appropriate UI elements\n            $(\"#textureMaterialOptions\").show().removeClass(\"hide\");\n            $(\"#coloredMaterialOptions\").hide();\n            $(\"#axialStrainMaterialOptions\").hide();\n            \n            // Update toggle buttons\n            $(\"#colorToggle>div\").removeClass(\"active\");\n            $(\"#strainToggle\").removeClass(\"active\");\n            \n            // Update material to apply the new texture\n            if (globals.model && globals.model.setMeshMaterial) {\n                console.log(\"Updating mesh material...\");\n                globals.model.setMeshMaterial();\n                console.log(\"Mesh material updated\");\n                \n                // Force a render update\n                if (globals.threeView && globals.threeView.render) {\n                    globals.threeView.render();\n                }\n            } else {\n                console.warn(\"Model or setMeshMaterial not available\");\n            }\n            \n            // Update other UI controls\n            $(\"#randomTextures\").prop(\"checked\", false);\n            \n            // Update texture list in UI\n            if (globals.updateTextureList) {\n                globals.updateTextureList();\n            }\n            \n            console.log(\"Applied texture-mapped image to origami model successfully\");\n            console.log(\"Final texture state:\", {\n                faceTexture: !!globals.faceTexture,\n                colorMode: globals.colorMode,\n                textureLibraryLength: globals.textureLibrary.length\n            });\n            \n            // Additional verification - check after a short delay\n            setTimeout(function() {\n                console.log(\"Texture verification after delay:\");\n                console.log(\"- globals.faceTexture exists:\", !!globals.faceTexture);\n                console.log(\"- globals.colorMode:\", globals.colorMode);\n                console.log(\"- Model material type:\", globals.model && globals.model.getMeshMaterial ? \n                           globals.model.getMeshMaterial().type : \"Unknown\");\n                \n                // Force another material update if needed\n                if (globals.colorMode === \"texture\" && globals.faceTexture && globals.model) {\n                    console.log(\"Forcing additional material update...\");\n                    globals.model.setMeshMaterial();\n                }\n            }, 500);\n            \n        } catch (error) {\n            console.error(\"Error applying texture-mapped image to model:\", error);\n            globals.warn(\"Error applying texture to origami: \" + error.message);\n        }\n    }\n    \n    return {\n        generateCellMapImage: generateCellMapImage,\n        generateTextureMappedCellImage: generateTextureMappedCellImage,\n        resetCellTextureMode: function() {\n            globals.isCellGeneratedTexture = false;\n            globals.useSimpleTextureMode = false;\n            console.log(\"Cell texture mode reset\");\n        }\n    };\n}</script> <script type=\"text/javascript\">/**\n * Created by amandaghassaei on 5/6/17.\n */\n\n\nfunction initImporter(globals){\n\n    var reader = new FileReader();\n\n    function importDemoFile(url){\n        var extension = url.split(\".\");\n        var name = extension[extension.length-2].split(\"/\");\n        name = name[name.length-1];\n        extension = extension[extension.length-1];\n        // globals.setCreasePercent(0);\n        if (extension == \"svg\"){\n            globals.url = url;\n            globals.filename = name;\n            globals.extension = extension;\n            if (!globals.includeCurves) {\n                globals.pattern.loadSVG(\"assets/\" + url, true);\n            } else {\n                globals.curvedFolding.loadSVG(\"assets/\" + url, true);\n            }\n        } else if (extension == \"fold\"){\n                globals.url = url;\n                globals.filename = name;\n                globals.extension = extension;\n                $.getJSON(\"assets/\" + url, undefined, function (fold) {\n                    globals.pattern.setFoldData(fold, true);\n                });\n        } else {\n            console.warn(\"unknown extension: \" + extension);\n        }\n    }\n\n    // Adobe Illustrator and Cuttle.xyz copy vector shapes as SVG string. By\n    // listening for a paste event, we can turn the SVG string into a Blob\n    // to load it as the pattern. After this paste handler, it has the same code\n    // path as selecting a local file.\n    window.addEventListener('paste', function (e) {\n        console.log(\"paste\");\n        // Make a synthetic svg file from text\n        var text = e.clipboardData.getData('text/plain');\n        if (text.includes(\"<svg\")) {\n            var blob = new Blob([text], {type: 'image/svg+xml'});\n\n            globals.url = null;\n            globals.filename = \"paste\";\n            globals.extension = \"svg\";\n\n            reader.onload = function () {\n                // Check edit mode to decide whether to show modal\n                if (globals.editMode === false) {\n                    console.log(' Edit mode disabled - loading pasted SVG directly without modal');\n                    if (!globals.includeCurves) {\n                        globals.pattern.loadSVG(reader.result);    \n                    } else {\n                        globals.curvedFolding.loadSVG(reader.result);\n                    }\n                } else {\n                    console.log(' Edit mode enabled - checking auto-proceed for pasted SVG');\n                    $(\"#vertTol\").val(globals.vertTol);\n                    \n                    // For paste events, assume user interaction and show modal\n                    $(\"#importSettingsModal\").modal(\"show\");\n                    $('#doSVGImport').unbind(\"click\").click(function (e) {\n                        e.preventDefault();\n                        $('#doSVGImport').unbind(\"click\");\n                        if (!globals.includeCurves) {\n                            globals.pattern.loadSVG(reader.result);    \n                        } else {\n                            globals.curvedFolding.loadSVG(reader.result);\n                        }\n                        $(\"#importSettingsModal\").modal(\"hide\");\n                    });\n                }\n            }\n            reader.readAsDataURL(blob);\n        }\n    });\n\n    function openFile(file) {\n        var extension = file.name.split(\".\");\n        var name = extension[0];\n        extension = extension[extension.length - 1];\n\n        if (extension == \"svg\") {\n            reader.onload = function () {\n                return function (e) {\n                    if (!reader.result) {\n                        warnUnableToLoad();\n                        return;\n                    }\n                    \n                    globals.filename = name;\n                    globals.extension = extension;\n                    globals.url = null;\n                    \n                    // Check edit mode to decide whether to show modal\n                    if (globals.editMode === false) {\n                        console.log(' Edit mode disabled - loading file SVG directly without modal');\n                        if (!globals.includeCurves) {\n                            globals.pattern.loadSVG(reader.result);    \n                        } else {\n                            globals.curvedFolding.loadSVG(reader.result);\n                        }\n                    } else {\n                        console.log(' Edit mode enabled - checking auto-proceed for file SVG');\n                        $(\"#vertTol\").val(globals.vertTol);\n                        \n                        // Check if this is NFT processing context\n                        var isNFTProcessing = globals.isNFTProcessing || \n                            (name && (name.includes('hypar') || name.includes('katachi')));\n                        \n                        if (isNFTProcessing) {\n                            console.log(' NFT processing context detected - proceeding automatically without modal');\n                            if (!globals.includeCurves) {\n                                globals.pattern.loadSVG(reader.result);    \n                            } else {\n                                globals.curvedFolding.loadSVG(reader.result);\n                            }\n                        } else {\n                            console.log(' User interaction context - showing import modal');\n                            $(\"#importSettingsModal\").modal(\"show\");\n                            $('#doSVGImport').unbind(\"click\").click(function (e) {\n                                e.preventDefault();\n                                $('#doSVGImport').unbind(\"click\");\n                                if (!globals.includeCurves) {\n                                    globals.pattern.loadSVG(reader.result);    \n                                } else {\n                                    globals.curvedFolding.loadSVG(reader.result);\n                                }\n                                $(\"#importSettingsModal\").modal(\"hide\");\n                            });\n                        }\n                    }\n                }\n            }(file);\n            reader.readAsDataURL(file);\n        } else if (extension == \"fold\"){\n            reader.onload = function () {\n                return function (e) {\n                    if (!reader.result) {\n                        warnUnableToLoad();\n                        return;\n                    }\n                    globals.filename = name;\n                    globals.extension = extension;\n                    globals.url = null;\n\n                    try {\n                        var fold = JSON.parse(reader.result);\n                        if (!fold || !fold.vertices_coords || !fold.edges_assignment || !fold.edges_vertices || !fold.faces_vertices){\n                            globals.warn(\"Invalid FOLD file, must contain all of: <br/>\" +\n                                \"<br/>vertices_coords<br/>edges_vertices<br/>edges_assignment<br/>faces_vertices\");\n                            return;\n                        }\n\n                        // spec 1.0 backwards compatibility\n                        if (fold.edges_foldAngles){\n                            fold.edges_foldAngle = fold.edges_foldAngles;\n                            delete fold.edges_foldAngles;\n                        }\n                        if (fold.edges_foldAngle){\n                            globals.pattern.setFoldData(fold);\n                            return;\n                        }\n                        $(\"#importFoldModal\").modal(\"show\");\n                        $('#importFoldModal').on('hidden.bs.modal', function () {\n                            $('#importFoldModal').off('hidden.bs.modal');\n                            if (globals.foldUseAngles) {//todo this should all go to pattern.js\n                                globals.setCreasePercent(1);\n                                var foldAngles = [];\n                                for (var i=0;i<fold.edges_assignment.length;i++){\n                                    var assignment = fold.edges_assignment[i];\n                                    if (assignment == \"F\") foldAngles.push(0);\n                                    else foldAngles.push(null);\n                                }\n                                fold.edges_foldAngle = foldAngles;\n\n                                var allCreaseParams = globals.pattern.setFoldData(fold, false, true);\n                                var j = 0;\n                                var faces = globals.pattern.getTriangulatedFaces();\n                                for (var i=0;i<fold.edges_assignment.length;i++){\n                                    var assignment = fold.edges_assignment[i];\n                                    if (assignment !== \"M\" && assignment !== \"V\" && assignment !== \"F\") continue;\n                                    var creaseParams = allCreaseParams[j];\n                                    var face1 = faces[creaseParams[0]];\n                                    var vec1 = makeVector(fold.vertices_coords[face1[1]]).sub(makeVector(fold.vertices_coords[face1[0]]));\n                                    var vec2 = makeVector(fold.vertices_coords[face1[2]]).sub(makeVector(fold.vertices_coords[face1[0]]));\n                                    var normal1 = (vec2.cross(vec1)).normalize();\n                                    var face2 = faces[creaseParams[2]];\n                                    vec1 = makeVector(fold.vertices_coords[face2[1]]).sub(makeVector(fold.vertices_coords[face2[0]]));\n                                    vec2 = makeVector(fold.vertices_coords[face2[2]]).sub(makeVector(fold.vertices_coords[face2[0]]));\n                                    var normal2 = (vec2.cross(vec1)).normalize();\n                                    var angle = Math.abs(normal1.angleTo(normal2));\n                                    if (assignment == \"M\") angle *= -1;\n                                    fold.edges_foldAngle[i] = angle * 180 / Math.PI;\n                                    creaseParams[5] = fold.edges_foldAngle[i];\n                                    j++;\n                                }\n                                globals.model.buildModel(fold, allCreaseParams);\n                                return;\n                            }\n                            var foldAngles = [];\n                            for (var i=0;i<fold.edges_assignment.length;i++){\n                                var assignment = fold.edges_assignment[i];\n                                if (assignment == \"M\") foldAngles.push(-180);\n                                else if (assignment == \"V\") foldAngles.push(180);\n                                else if (assignment == \"F\") foldAngles.push(0);\n                                else foldAngles.push(null);\n                            }\n                            fold.edges_foldAngle = foldAngles;\n                            globals.pattern.setFoldData(fold);\n                        });\n                    } catch(err) {\n                        globals.warn(\"Unable to parse FOLD json.\");\n                        console.log(err);\n                    }\n                }\n            }(file);\n            reader.readAsText(file);\n        } else {\n            globals.warn('Unknown file extension: .' + extension);\n            return null;\n        }\n    }\n\n    window.addEventListener('drop', function(e) {\n        e.preventDefault();\n        if (e.dataTransfer.items) {\n            for (item of e.dataTransfer.items) {\n                if (item.kind === \"file\") {\n                    const file = item.getAsFile();\n                    openFile(file)\n                    break;\n                }\n            }\n        } else {\n            for (item of e.dataTransfer.files) {\n                openFile(file)\n                break;\n            }\n        }\n    });\n\n    window.addEventListener('dragover', function(e) {\n        e.preventDefault();\n    }, false);\n\n    window.addEventListener('message', function(e) {\n        if (!e.data) return;\n        if (e.data.op === 'importFold' && e.data.fold) {\n            globals.filename = e.data.fold.file_title || 'message';\n            globals.extension = 'fold';\n            globals.url = null;\n            globals.pattern.setFoldData(e.data.fold);\n        } else if (e.data.op === 'importSVG' && e.data.svg) {\n            globals.filename = e.data.filename || 'message';\n            globals.extension = 'svg';\n            globals.url = null;\n            if (e.data.vertTol) {\n                globals.vertTol = e.data.vertTol;\n            }\n            if (!globals.includeCurves) {\n                globals.pattern.loadSVG(URL.createObjectURL(new Blob([e.data.svg])));\n            } else {\n                globals.curvedFolding.loadSVG(URL.createObjectURL(new Blob([e.data.svg])));\n            }\n        }\n    });\n    // Tell parent/opening window that we're ready for messages now.\n    var readyMessage = {from: 'OrigamiSimulator', status: 'ready'};\n    if (window.parent && window.parent !== window) {\n        window.parent.postMessage(readyMessage, '*');\n    } else if (window.opener) {\n        window.opener.postMessage(readyMessage, '*');\n    }\n\n    $(\"#fileSelector\").change(function(e) {\n        var files = e.target.files; // FileList object\n        if (files.length < 1) {\n            return;\n        }\n        openFile(files[0])\n        $(e.target).val(\"\");\n    });\n\n    function makeVector(v){\n        if (v.length == 2) return makeVector2(v);\n        return makeVector3(v);\n    }\n    function makeVector2(v){\n        return new THREE.Vector2(v[0], v[1]);\n    }\n    function makeVector3(v){\n        return new THREE.Vector3(v[0], v[1], v[2]);\n    }\n\n    function warnUnableToLoad(){\n        globals.warn(\"Unable to load file.\");\n    }\n\n    function importSVG(svgContent, sourceUrl = null) {\n        console.log(' importSVG called with content length:', svgContent.length);\n        console.log(' Source URL:', sourceUrl);\n        \n        try {\n            // Create a blob from the SVG content\n            var blob = new Blob([svgContent], {type: 'image/svg+xml'});\n            var dataUrl = URL.createObjectURL(blob);\n            \n            // Set globals for tracking\n            if (sourceUrl) {\n                var urlParts = sourceUrl.split('/');\n                globals.filename = urlParts[urlParts.length - 1].replace('.svg', '');\n            } else {\n                globals.filename = 'imported_pattern';\n            }\n            globals.extension = 'svg';\n            globals.url = sourceUrl;\n            \n            console.log(' Set filename:', globals.filename);\n            \n            // Load the SVG directly without import modal in editMode=false\n            if (globals.editMode === false) {\n                console.log(' Edit mode disabled - importing SVG directly without modal');\n                if (!globals.includeCurves) {\n                    globals.pattern.loadSVG(dataUrl);\n                } else {\n                    globals.curvedFolding.loadSVG(dataUrl);\n                }\n            } else {\n                // For edit mode enabled, check if we should auto-proceed (for NFT processing)\n                console.log(' Edit mode enabled - checking auto-proceed conditions');\n                \n                // Set default tolerance and proceed automatically if this is an NFT processing context\n                $(\"#vertTol\").val(globals.vertTol);\n                \n                // Check if this is being called during NFT processing\n                var isNFTProcessing = globals.isNFTProcessing || \n                    (globals.filename && (globals.filename.includes('hypar') || globals.filename.includes('katachi'))) ||\n                    (globals.url && globals.url.includes('exonemo.com'));\n                \n                if (isNFTProcessing) {\n                    console.log(' NFT processing context detected - proceeding automatically without modal');\n                    if (!globals.includeCurves) {\n                        globals.pattern.loadSVG(dataUrl);\n                    } else {\n                        globals.curvedFolding.loadSVG(dataUrl);\n                    }\n                } else {\n                    console.log(' User interaction context - showing import modal');\n                    $(\"#importSettingsModal\").modal(\"show\");\n                    $('#doSVGImport').unbind(\"click\").click(function (e) {\n                        e.preventDefault();\n                        $('#doSVGImport').unbind(\"click\");\n                        console.log(' Processing SVG import...');\n                        if (!globals.includeCurves) {\n                            globals.pattern.loadSVG(dataUrl);\n                        } else {\n                            globals.curvedFolding.loadSVG(dataUrl);\n                        }\n                        $(\"#importSettingsModal\").modal(\"hide\");\n                    });\n                }\n            }\n            \n            console.log(' SVG import initiated successfully');\n            return true;\n            \n        } catch (error) {\n            console.error(' Error in importSVG:', error);\n            if (globals.warn && globals.editMode !== false) {\n                globals.warn('Failed to import SVG pattern');\n            }\n            return false;\n        }\n    }\n\n    return {\n        importDemoFile: importDemoFile,\n        importSVG: importSVG\n    }\n}</script> <script type=\"text/javascript\">function initViveInterface(e){function a(){THREE.VRController.update(),t(),l.render(d,c)}function n(e){e.enabled=!1,e.laser.visible=!1,e.cursor.visible=!1}function t(){var a=m.length;a>2&&(console.warn(\"invalid num controllers: \"+a),a=2);for(var t=0;t<a;t++){var i=m[t].gamepad;if(i&&i.buttons&&i.buttons[0]){var o=p[t].object3D;if(o.visible=!1,!i.pose.hasPosition||!i.pose.hasOrientation)continue;var d=m[t].position.clone();if(d.applyMatrix4(l.vr.getStandingMatrix()),R.identity().extractRotation(m[t].matrixWorld),S.set(0,0,-1).applyMatrix4(R).normalize(),d.add(S.clone().multiplyScalar(.05)),u[t]&&g[t]){n(h[t]),g[t].isFixed()||(g[t].setFixed(!0),e.fixedHasChanged=!0),d.sub(f.position),d=r(d),g[t].moveManually(d),e.nodePositionHasChanged=!0;continue}if(u[t])continue;var c=new THREE.Raycaster(d,S,0,1),b=c.intersectObjects(e.model.getMesh(),!1);if(b.length>0){n(h[t]),v[t]=!0;var w=b[0],E=w.face,T=w.point;if(T.clone().sub(d).lengthSq()>.01){g[t]=null;continue}var y=e.model.getPositionsArray(),V=[];V.push(new THREE.Vector3(y[3*E.a],y[3*E.a+1],y[3*E.a+2])),V.push(new THREE.Vector3(y[3*E.b],y[3*E.b+1],y[3*E.b+2])),V.push(new THREE.Vector3(y[3*E.c],y[3*E.c+1],y[3*E.c+2]));for(var x=s(V[0].clone()).sub(T).lengthSq(),B=E.a,H=1;H<3;H++){var P=s(V[H].clone()).sub(T).lengthSq();P<x&&(x=P,B=H<2?E.b:E.c)}var C=e.model.getNodes();g[t]=C[B],o.position.copy(s(g[t].getPosition().clone())),o.visible=!0}else v[t]=!1,g[t]=null,h[t].enabled=!0}else console.warn(\"bad controller\")}}function s(e){return e.multiplyScalar(f.scale),e.add(f.position),e}function r(e){return e.multiplyScalar(1/f.scale),e}function i(){if(console.log(e.url),null===e.url)return\"\";for(var a=_.keys(T),n=0;n<a.length;n++){var t=T[a[n]];if(t[e.url])return\" - current file: \"+t[e.url]}return\"\"}var o=$(\"#VRstatus\");if(!1===WEBVR.isAvailable())return o.html(\"WebVR not supported by this browser<br/>see <a href='https://webvr.info/' target='_blank'>webvr.info</a> for more information.\"),void $(\"#VRoptions\").hide();o.html(\"No device connected.\");var l=e.threeView.renderer,d=e.threeView.scene,c=e.threeView.camera,m=[],u=[!1,!1],p=[new Node(new THREE.Vector3),new Node(new THREE.Vector3)];_.each(p,function(e){e.setTransparentVR(),d.add(e.getObject3D())});var g=[null,null],v=[!1,!1],h=[null,null];!function(){WEBVR.getVRDisplay(function(a){var n=$(\"#enterVR\");if(!a)return o.html(\"No VR device detected.  Check that you are connected to Steam VR and your HMD has the latest firmware updates, then refresh this page.\"),void n.hide();o.html(\"VR device detected.  Hit the button below to enter VR.  If you have problems, check that you are connected to Steam VR and your HMD has the latest firmware updates.\"),$(\"#VRoptions\").show();var t=WEBVR.getButton(a,l.domElement);n.show(),n.html(\"ENTER VR\");var s=t.onclick;n.click(function(t){if(t.preventDefault(),e.vrEnabled=!a.isPresenting,l.vr.enabled=e.vrEnabled,e.vrEnabled){e.numSteps=30,$(\".numStepsPerRender\").val(e.numSteps),f.stepsPerFrame=e.numSteps,e.threeView.modelWrapper.scale.set(f.scale,f.scale,f.scale),e.threeView.modelWrapper.position.copy(f.position),n.html(\"EXIT VR\"),l.vr.setDevice(a),l.vr.standing=!0,e.threeView.setBackgroundColor(\"000000\");var r=i();E.name(\"Examples\"+r)}else e.numSteps=100,$(\".numStepsPerRender\").val(e.numSteps),e.model.reset(),e.threeView.resetCamera(),n.html(\"ENTER VR\"),e.threeView.setBackgroundColor(),e.threeView.modelWrapper.scale.set(1,1,1),e.threeView.modelWrapper.position.set(0,0,0);_.each(m,function(a){_.each(a.children,function(a){a.visible=e.vrEnabled})}),b.visible=e.vrEnabled,E.visible=e.vrEnabled,s&&s()})})}();var f={scale:.5,foldPercent:100*e.creasePercent,Reset:function(){e.model.reset()},stepsPerFrame:e.numSteps,damping:e.percentDamping,strainMap:!1,position:new THREE.Vector3(0,1.3,0),examples:[\"amanda\",\"one\",\"two\"]},b=dat.GUIVR.create(\"Settings\");b.position.set(0,2.3,-1),b.rotation.set(0,0,0),d.add(b),b.visible=!1,b.add(f,\"foldPercent\").min(-100).max(100).step(1).name(\"Fold Percent\").onChange(function(a){e.creasePercent=a/100,e.shouldChangeCreasePercent=!0,e.controls.updateCreasePercent()}),b.add(f,\"strainMap\").name(\"Show Strain\").onChange(function(a){var n=\"color\";a&&(n=\"axialStrain\"),e.colorMode=n,\"color\"==n?$(\"#coloredMaterialOptions\").show():$(\"#coloredMaterialOptions\").hide(),\"axialStrain\"==n?$(\"#axialStrainMaterialOptions\").show():$(\"#axialStrainMaterialOptions\").hide(),e.model.setMeshMaterial(),$(\".radio>input[value=\"+n+\"]\").prop(\"checked\",!0)}),b.add(f,\"Reset\").name(\"Reset Simulation\"),b.add(f,\"damping\").min(.1).max(1).step(.01).name(\"Damping (0-1)\").onChange(function(a){e.percentDamping=a,e.materialHasChanged=!0,e.controls.setSliderInputVal(\"#percentDamping\",a)}),b.add(f,\"stepsPerFrame\").min(1).max(200).step(1).name(\"Num Steps Per Frame\").onChange(function(a){e.numSteps=a,$(\".numStepsPerRender\").val(a)}).listen(),b.add(f,\"scale\").min(.01).max(1).step(.001).name(\"Scale\").onChange(function(a){e.threeView.modelWrapper.scale.set(a,a,a)});var w=function(a){e.threeView.modelWrapper.position.copy(f.position)};b.add(f.position,\"x\").min(-2).max(2).step(.01).name(\"Position X\").onChange(w),b.add(f.position,\"z\").min(-2).max(2).step(.01).name(\"Position Y\").onChange(w),b.add(f.position,\"y\").min(-2).max(2).step(.01).name(\"Position Z\").onChange(w);var E=dat.GUIVR.create(\"Examples\");E.position.set(1.1,2.3,-.1),E.rotation.set(0,-Math.PI/2,0),d.add(E),E.visible=!1;var T={Origami:{\"Origami/flappingBird.svg\":\"Flapping Bird\",\"Origami/randlettflappingbird.svg\":\"Randlett Flapping Bird\",\"Origami/traditionalCrane.svg\":\"Crane\",\"Origami/hypar.svg\":\"Hypar\",\"Origami/6ptHypar-anti.svg\":\"Hypar (6 point)\",\"Origami/singlesquaretwist.svg\":\"Square Twist (single)\",\"Origami/squaretwistManyAngles.svg\":\"Square Twist (many angles)\",\"Origami/langCardinal.svg\":\"Lang Cardinal\",\"Origami/langOrchid.svg\":\"Lang Orchid\",\"Origami/langKnlDragon.svg\":\"Lang KNL Dragon\"},Tessellations:{\"Tessellations/miura-ori.svg\":\"Miura-Ori\",\"Tessellations//miura_sharpangle.svg\":\"Miura-Ori (sharp angle)\",\"Tessellations/waterbomb.svg\":\"Waterbomb\",\"Tessellations/whirlpool.svg\":\"Whirlpool\",\"Tessellations/huffmanExtrudedBoxes.svg\":\"Huffman Extruded Boxes\",\"Tessellations/huffmanWaterbomb.svg\":\"Huffman Waterbombs\",\"Tessellations/huffmanRectangularWeave.svg\":\"Huffman Rect Weave\",\"Tessellations/huffmanStarsTriangles.svg\":\"Huffman Stars-Triangles\",\"Tessellations/huffmanExdentedBoxes.svg\":\"Huffman Exdented Boxes\",\"Tessellations/reschTriTessellation.svg\":\"Resch Triangle Tessellation\",\"Tessellations/reschBarbell.svg\":\"Resch Barbell Tessellation\",\"Tessellations/langHoneycomb.svg\":\"Lang Honeycomb Tessellation\",\"Tessellations/langWedgeDoubleFaced.svg\":\"Lang Wedged Double Faced Tessellation\",\"Tessellations/langOvalTessellation.svg\":\"Lang Oval Tessellation\",\"Tessellations/langHyperbolicLimit.svg\":\"Lang Hyperbolic Limit\"},\"Curved Creases\":{\"Curved/huffmanTower.svg\":\"Huffman Tower\",\"Curved/CircularPleat-antiFacet.svg\":\"Circular Pleat\",\"Curved/shell14.svg\":\"14 panel shell\",\"Curved/shell6.svg\":\"6 panel shell\"},Kirigami:{\"Kirigami/miyamotoTower.svg\":\"Miyamoto Tower\",\"Kirigami/honeycombKiri.svg\":\"Kirigami Honeycomb\"},Popups:{\"Popup/geometricPopup.svg\":\"Geometric Pattern\",\"Popup/castlePopup.svg\":\"Castle\",\"Popup/housePopup.svg\":\"House\"},\"Maze Foldings\":{\"Squaremaze/helloworld.svg\":'Square Maze \"hello world\"',\"Squaremaze/origamisimulator.svg\":'Square Maze \"origami simulator\"',\"Squaremaze/cross.svg\":'Square Maze \"+\"',\"Polygami/polygamiCross.svg\":'Polygami \"+\"'},\"Origami Bases\":{\"Bases/birdBase.svg\":\"Bird Base\",\"Bases/frogBase.svg\":\"Frog Base\",\"Bases/boatBase.svg\":\"Boat Base\",\"Bases/pinwheelBase.svg\":\"Pinwheel Base\",\"Bases/openSinkBase.svg\":\"Open Sink Base\",\"Bases/squareBase.svg\":\"Square Base\",\"Bases/waterbombBase.svg\":\"Waterbomb Base\"},Bistable:{\"Bistable/curvedPleatSimple.svg\":\"Curved Pleat\"}};_.each(T,function(a,n){E.add(T,n,_.values(a)).onChange(function(n){var t=_.values(a).indexOf(n);if(t<0)return void console.warn(\"pattern not found: \"+n);var s=_.keys(a)[t];s&&(e.vertTol=3,e.importer.importDemoFile(s)),E.name(\"Examples - current file: \"+n)})}),window.addEventListener(\"vr controller connected\",function(a){var n=m.length,t=a.detail;d.add(t),t.standingMatrix=l.vr.getStandingMatrix(),t.head=c;var s=new THREE.MeshStandardMaterial({color:8947848}),r=new THREE.Mesh(new THREE.CylinderGeometry(.005,.05,.1,6),s),i=new THREE.Mesh(new THREE.BoxGeometry(.03,.1,.03),s);s.flatShading=!0,r.rotation.x=-Math.PI/2,i.position.y=-.05,r.add(i),t.userData.mesh=r,t.add(r);var o=dat.GUIVR.addInputObject(t);d.add(o.laser),h[n]=o,t.addEventListener(\"primary press began\",function(e){e.target.userData.mesh.material.color.setHex(13421772),u[n]=!0,v[n]||g[n]?o.laser.pressed(!1):o.laser.pressed(!0)}),t.addEventListener(\"primary press ended\",function(a){a.target.userData.mesh.material.color.setHex(8947848),u[n]=!1,g[n]&&(g[n].setFixed(!1),e.fixedHasChanged=!0),o.laser.pressed(!1)}),t.addEventListener(\"disconnected\",function(e){u[n]=!1,t.parent.remove(t)}),m.push(t)});var R=new THREE.Matrix4,S=new THREE.Vector3(0,0,-1);return{render:a}}</script> <script type=\"text/javascript\">function initVideoAnimator(t){function n(){for(var n=100*t.creasePercent,a=0,e=0;e<c.length;e++){var r=c[e];r.t=a,r.from=n,\"delay\"==r.type&&(r.to=n),n=r.to,a+=r.dur}}function a(n){var a=t.currentFPS,r=t.capturerFrames+n/t.numSteps,l=r/a,o=e(l);return null===o?(t.shouldAnimateFoldPercent=!1,t.creasePercent):0==o.dur?o.to/100:(l-=o.t,l/=o.dur,(o.from*(1-l)+o.to*l)/100)}function e(t){for(var n=0;n<c.length;n++){var a=c[n];if(t<=a.t+a.dur)return a}return null}function r(){c.push({type:\"animation\",dur:null,from:null,to:null}),u()}function l(){c.push({type:\"delay\",dur:null,from:null,to:null}),u()}function o(){if(0==c.length)return!1;for(var t=0;t<c.length;t++){var n=c[t];if((\"delay\"!=n.type||null===n.dur)&&(\"animation\"!=n.type||null===n.dur||null==n.to))return!1}return!0}function i(){if(0==c.length)return $(\"#foldPercentAnimationStatus\").removeClass(\"warning\"),void $(\"#foldPercentAnimationStatus\").html(\"no animation configured\");o()?($(\"#foldPercentAnimationStatus\").removeClass(\"warning\"),$(\"#foldPercentAnimationStatus\").html(\"animation configured\")):($(\"#foldPercentAnimationStatus\").addClass(\"warning\"),$(\"#foldPercentAnimationStatus\").html(\"incomplete config, will be ignored\"))}function u(){i();var t=\"\";if(0==c.length)return $(\"#animationSetupHelp\").html(\"No animation items in sequence.\"),void $(\"#animationHTML\").html(\"\");for(var n=0;n<c.length;n++)\"delay\"==c[n].type?t+=s(c[n],n):t+=d(c[n],n);$(\"#animationSetupHelp\").html(\"Configure automatic <b>Fold Percent</b> control:\"),$(\"#animationHTML\").html(t),$(\".deleteItem\").click(function(t){t.preventDefault();var n=$(t.target),a=n.data(\"index\");void 0===a&&(a=n.parent(\".deleteItem\").data(\"index\")),c.splice(a,1),u()}),$(\".durVal\").change(function(t){var n=$(t.target),a=n.val();if(!isNaN(parseFloat(a))){a=parseFloat(a),a<0&&(a=0),n.val(a);var e=n.data(\"index\");c[e].dur=a,u()}}),$(\".toVal\").change(function(t){var n=$(t.target),a=n.val();if(!isNaN(parseFloat(a))){a=parseFloat(a),a<-100&&(a=-100),a>100&&(a=100),n.val(a);var e=n.data(\"index\");c[e].to=a,u()}})}function d(t,n){var a=\"\";null!==t.dur&&(a=t.dur);var e=\"\";return null!==t.to&&(e=t.to),'<li class=\"animationStep\">Animate to &nbsp;<input value=\"'+e+'\" placeholder=\"Target\" data-index=\"'+n+'\" class=\"toVal float form-control\" type=\"text\"> % for &nbsp;<input value=\"'+a+'\" placeholder=\"Duration\" data-index=\"'+n+'\" class=\"durVal float form-control\" type=\"text\">&nbsp; seconds &nbsp;&nbsp;&nbsp;<a href=\"#\" data-index=\"'+n+'\" class=\"red deleteItem\"><span data-index=\"'+n+'\" class=\"fui-cross\"></span></a></li>'}function s(t,n){var a=\"\";return null!==t.dur&&(a=t.dur),'<li class=\"animationStep\">Wait for &nbsp;<input value=\"'+a+'\" placeholder=\"Duration\" data-index=\"'+n+'\" class=\"durVal float form-control\" type=\"text\">&nbsp; seconds &nbsp;&nbsp;&nbsp;<a href=\"#\" data-index=\"'+n+'\" class=\"red deleteItem\"><span class=\"fui-cross\"></span></a></li>'}var c=[];return u(),{addItem:r,addDelay:l,isValid:o,compile:n,nextFoldAngle:a}}</script> <script type=\"text/javascript\">function initCurvedFolding(globals) {\n\n    var FOLD = require('fold');\n\n    var foldData = {};\n    var rawFold = {};\n\n    function clearFold(){\n        foldData.vertices_coords = [];\n        foldData.edges_vertices = [];\n        foldData.edges_assignment = [];//B = boundary, M = mountain, V = valley, C = cut, F = facet, U = hinge\n        foldData.edges_foldAngle = [];//target angles\n        delete foldData.vertices_vertices;\n        delete foldData.faces_vertices;\n        delete foldData.vertices_edges;\n        rawFold = {};\n    }\n\n    var verticesRaw = [];\n    //refs to vertex indices\n    var mountainsRaw = [];\n    var valleysRaw = [];\n    var bordersRaw = [];\n    var cutsRaw = [];\n    var triangulationsRaw = [];\n    var hingesRaw = [];\n\n    var mountains = [];\n    var valleys = [];\n    var borders = [];\n    var hinges = [];\n    var triangulations = [];\n\n    var badColors = [];//store any bad colors in svg file to show user\n\n    function clearAll(){\n\n        clearFold();\n        verticesRaw = [];\n\n        mountainsRaw = [];\n        valleysRaw = [];\n        bordersRaw = [];\n        cutsRaw = [];\n        triangulationsRaw = [];\n        hingesRaw = [];\n\n        mountains = [];\n        valleys = [];\n        borders = [];\n        hinges = [];\n        triangulations = [];\n\n        badColors = [];\n    }\n\n    clearAll();\n\n    var SVGloader = new THREE.SVGLoader();\n\n    //filter for svg parsing\n    function borderFilter(){\n        var stroke = getStroke($(this));\n        return typeForStroke(stroke) == \"border\";\n    }\n    function mountainFilter(){\n        var $this = $(this);\n        var stroke = getStroke($this);\n        if (typeForStroke(stroke) == \"mountain\"){\n            var opacity = getOpacity($this);\n            this.targetAngle = -opacity*180;\n            return true;\n        }\n        return false;\n    }\n    function valleyFilter(){\n        var $this = $(this);\n        var stroke = getStroke($this);\n        if (typeForStroke(stroke) == \"valley\"){\n            var opacity = getOpacity($this);\n            this.targetAngle = opacity*180;\n            return true;\n        }\n        return false;\n    }\n    function cutFilter(){\n        var stroke = getStroke($(this));\n        return typeForStroke(stroke) == \"cut\";\n    }\n    function triangulationFilter(){\n        var stroke = getStroke($(this));\n        return typeForStroke(stroke) == \"triangulation\";\n    }\n    function hingeFilter(){\n        var stroke = getStroke($(this));\n        return typeForStroke(stroke) == \"hinge\";\n    }\n\n    function getOpacity(obj){\n        // Check rendered style first (most browsers, supporting CSS styling),\n        // then opacity attribute, then opacity:... spec in style attribute.\n        // Ditto for stroke-opacity.  Both default to 1 (full opacity).\n        // If both are present, they get multiplied together.\n        var opacity = obj.css('opacity') || obj.attr('opacity') ||\n            (obj[0].style && obj[0].style.opacity);\n        var strokeOpacity = obj.css('stroke-opacity') ||\n            obj.attr('stroke-opacity') ||\n            (obj[0].style && obj[0].style.strokeOpacity);\n        opacity = parseFloat(opacity);\n        strokeOpacity = parseFloat(strokeOpacity);\n        if (isNaN(opacity)) {\n            opacity = 1;\n        }\n        if (isNaN(strokeOpacity)) {\n            opacity = 1;\n        }\n        return opacity * strokeOpacity;\n    }\n\n    function getStroke(obj){\n        // Check rendered style first (most browsers, supporting CSS styling),\n        // then stroke attribute, then stroke:... spec in style attribute.\n        var stroke = obj.css('stroke') || obj.attr(\"stroke\") ||\n            (obj[0].style && obj[0].style.stroke);\n        if (stroke === undefined) {\n            return null;\n        }\n        stroke = stroke.replace(/\\s/g,'');//remove all whitespace\n        return stroke.toLowerCase();\n    }\n\n    function typeForStroke(stroke){\n        if (stroke == \"#000000\" || stroke == \"#000\" || stroke == \"black\"    || stroke == \"rgb(0,0,0)\"       ) return \"border\";\n        if (stroke == \"#ff0000\" || stroke == \"#f00\" || stroke == \"red\"      || stroke == \"rgb(255,0,0)\"     ) return \"mountain\";\n        if (stroke == \"#0000ff\" || stroke == \"#00f\" || stroke == \"blue\"     || stroke == \"rgb(0,0,255)\"     ) return \"valley\";\n        if (stroke == \"#00ff00\" || stroke == \"#0f0\" || stroke == \"green\"    || stroke == \"rgb(0,255,0)\"     ) return \"cut\";\n        if (stroke == \"#ffff00\" || stroke == \"#ff0\" || stroke == \"yellow\"   || stroke == \"rgb(255,255,0)\"   ) return \"triangulation\";\n        if (stroke == \"#ff00ff\" || stroke == \"#f0f\" || stroke == \"magenta\"  || stroke == \"rgb(255,0,255)\"   ) return \"hinge\";\n        badColors.push(stroke);\n        return null;\n    }\n\n    function colorForAssignment(assignment){\n        if (assignment == \"B\") return \"#000\";//border\n        if (assignment == \"M\") return \"#f00\";//mountain\n        if (assignment == \"CM\") return \"#f00\";//curved mountain\n        if (assignment == \"V\") return \"#00f\";//valley\n        if (assignment == \"CV\") return \"#00f\";//curved valley\n        if (assignment == \"C\") return \"#0f0\";//cut\n        if (assignment == \"F\") return \"#ff0\";//facet\n        if (assignment == \"U\") return \"#f0f\";//hinge\n        return \"#0ff\"\n    }\n    function opacityForAngle(angle, assignment){\n        if (angle === null || assignment == \"F\") return 1;\n        return Math.abs(angle)/180;\n    }\n\n    function findType(_verticesRaw, _segmentsRaw, filter, $paths, $lines, $rects, $polygons, $polylines, $ellipses, $circles){\n        parsePath(_verticesRaw, _segmentsRaw, $paths.filter(filter));\n        parseLine(_verticesRaw, _segmentsRaw, $lines.filter(filter));\n        parseRect(_verticesRaw, _segmentsRaw, $rects.filter(filter));\n        parsePolygon(_verticesRaw, _segmentsRaw, $polygons.filter(filter));\n        parsePolyline(_verticesRaw, _segmentsRaw, $polylines.filter(filter));\n        parseEllipse(_verticesRaw, _segmentsRaw, $ellipses.filter(filter));\n        parseCircle(_verticesRaw, _segmentsRaw, $circles.filter(filter));\n    }\n\n    function applyTransformation(vertex, element){\n        var transformations = [];\n        var ancestor = element;\n        do {\n            if (ancestor.transform)\n                transformations.push.apply(transformations, ancestor.transform.baseVal);\n            ancestor = ancestor.parentNode;\n        } while (ancestor && ancestor.nodeName !== 'svg');\n        for (var i=0;i<transformations.length;i++){\n            var t = transformations[i];\n            var M = [[t.matrix.a, t.matrix.c, t.matrix.e], [t.matrix.b, t.matrix.d, t.matrix.f], [0,0,1]];\n            var out = numeric.dot(M, [vertex.x, vertex.z, 1]);\n            vertex.x = out[0];\n            vertex.z = out[1];\n        }\n    }\n\n    function parsePath(_verticesRaw, _segmentsRaw, $elements){\n        for (var i=0;i<$elements.length;i++){\n            var path = $elements[i];\n            var pathVertices = [];\n            if (path === undefined || path.getPathData === undefined){//mobile problem\n                var elm = '<div id=\"coverImg\" ' +\n                  'style=\"background: url(assets/doc/crane.gif) no-repeat center center fixed;' +\n                    '-webkit-background-size: cover;' +\n                    '-moz-background-size: cover;' +\n                    '-o-background-size: cover;' +\n                    'background-size: cover;\">'+\n                  '</div>';\n                $(elm).appendTo($(\"body\"));\n                $(\"#noSupportModal\").modal(\"show\");\n                console.warn(\"path parser not supported\");\n                return;\n            }\n            var startVertex = null;\n            var segments = path.getPathData();\n            let $path = $(path);\n            let originV, startV, endV, c1, c2, lastSegment, lastType;\n            for (var j=0;j<segments.length;j++){\n                var segment = segments[j];\n                var type = segment.type;\n                switch(type){\n\n                    case \"m\"://dx, dy\n                        var vertex;\n                        if (j === 0){\n                            // \"If a relative moveto (m) appears as the first\n                            // element of the path, then it is treated as a\n                            // pair of absolute coordinates\"\n                            // [https://www.w3.org/TR/SVG/paths.html#PathDataMovetoCommands]\n                            vertex = new THREE.Vector3(segment.values[0], 0, segment.values[1]);\n                        } else {\n                            vertex = _verticesRaw[_verticesRaw.length-1].clone();\n                            vertex.x += segment.values[0];\n                            vertex.z += segment.values[1];\n                        }\n                        startVertex = _verticesRaw.length;\n                        _verticesRaw.push(vertex);\n                        pathVertices.push(vertex);\n                        break;\n\n                    case \"l\"://dx, dy\n                        if (typeForStroke(getStroke($path)) == \"border\") {\n                            divPathl(segment, _segmentsRaw, _verticesRaw, path, pathVertices);\n                        } else {\n                            _segmentsRaw.push([_verticesRaw.length-1, _verticesRaw.length]);\n                            if (path.targetAngle && _segmentsRaw.length>0) _segmentsRaw[_segmentsRaw.length-1].push(path.targetAngle);\n                            var vertex = _verticesRaw[_verticesRaw.length-1].clone();\n                            vertex.x += segment.values[0];\n                            vertex.z += segment.values[1];\n                            _verticesRaw.push(vertex);\n                            pathVertices.push(vertex);\n                        }\n                        break;\n\n                    case \"v\"://dy\n                        if (typeForStroke(getStroke($path)) == \"border\") {\n                            divPathv(segment, _segmentsRaw, _verticesRaw, path, pathVertices);\n                        } else {\n                            _segmentsRaw.push([_verticesRaw.length-1, _verticesRaw.length]);\n                            if (path.targetAngle && _segmentsRaw.length>0) _segmentsRaw[_segmentsRaw.length-1].push(path.targetAngle);\n                            var vertex = _verticesRaw[_verticesRaw.length-1].clone();\n                            vertex.z += segment.values[0];\n                            _verticesRaw.push(vertex);\n                            pathVertices.push(vertex);\n                        }\n                        break;\n\n                    case \"h\"://dx\n                        if (typeForStroke(getStroke($path)) == \"border\") {\n                            divPathh(segment, _segmentsRaw, _verticesRaw, path, pathVertices);\n                        } else {\n                            _segmentsRaw.push([_verticesRaw.length-1, _verticesRaw.length]);\n                            if (path.targetAngle && _segmentsRaw.length>0) _segmentsRaw[_segmentsRaw.length-1].push(path.targetAngle);\n                            var vertex = _verticesRaw[_verticesRaw.length-1].clone();\n                            vertex.x += segment.values[0];\n                            _verticesRaw.push(vertex);\n                            pathVertices.push(vertex);\n                        }\n                        break;\n\n                    case \"M\"://x, y\n                        var vertex = new THREE.Vector3(segment.values[0], 0, segment.values[1]);\n                        startVertex = _verticesRaw.length;\n                        _verticesRaw.push(vertex);\n                        pathVertices.push(vertex);\n                        break;\n\n                    case \"L\"://x, y\n                        if (typeForStroke(getStroke($path)) == \"border\") {\n                            divPathL(segment, _segmentsRaw, _verticesRaw, path, pathVertices);\n                        } else {\n                            _segmentsRaw.push([_verticesRaw.length-1, _verticesRaw.length]);\n                            if (path.targetAngle && _segmentsRaw.length>0) _segmentsRaw[_segmentsRaw.length-1].push(path.targetAngle);\n                            var vertex = new THREE.Vector3(segment.values[0], 0, segment.values[1]);\n                            _verticesRaw.push(vertex);\n                            pathVertices.push(vertex);\n                        }\n                        break;\n\n                    case \"V\"://y\n                        if (typeForStroke(getStroke($path)) == \"border\") {\n                            divPathV(segment, _segmentsRaw, _verticesRaw, path, pathVertices);\n                        } else {    \n                            _segmentsRaw.push([_verticesRaw.length-1, _verticesRaw.length]);\n                            if (path.targetAngle && _segmentsRaw.length>0) _segmentsRaw[_segmentsRaw.length-1].push(path.targetAngle);\n                            var vertex = _verticesRaw[_verticesRaw.length-1].clone();\n                            vertex.z = segment.values[0];\n                            _verticesRaw.push(vertex);\n                            pathVertices.push(vertex);\n                        }\n                        break;\n\n                    case \"H\"://x\n                        if (typeForStroke(getStroke($path)) == \"border\") {\n                            divPathH(segment, _segmentsRaw, _verticesRaw, path, pathVertices);\n                        } else {\n                            _segmentsRaw.push([_verticesRaw.length-1, _verticesRaw.length]);\n                            if (path.targetAngle && _segmentsRaw.length>0) _segmentsRaw[_segmentsRaw.length-1].push(path.targetAngle);\n                            var vertex = _verticesRaw[_verticesRaw.length-1].clone();\n                            vertex.x = segment.values[0];\n                            _verticesRaw.push(vertex);\n                            pathVertices.push(vertex);\n                        }\n                        break;\n\n                    case \"z\":\n                    case \"Z\":\n                        if (typeForStroke(getStroke($path)) == \"border\") {\n                            if (startVertex != null) {\n                                divPathZ(_segmentsRaw, _verticesRaw, path, pathVertices, startVertex);\n                                startVertex = null;\n                            }\n                        } else {\n                            if (startVertex != null) {\n                                _segmentsRaw.push([_verticesRaw.length-1, startVertex]);\n                                startVertex = null;\n                            }\n                        }\n                        break;\n                    \n                    case \"c\":\n                    case \"C\":\n                        originV = _verticesRaw[_verticesRaw.length-1].clone();\n                        startV = new THREE.Vector3(0, 0, 0);\n                        endV = new THREE.Vector3(segment.values[4], 0, segment.values[5]);\n                        c1 = new THREE.Vector3(segment.values[0], 0, segment.values[1]);\n                        c2 = new THREE.Vector3(segment.values[2], 0, segment.values[3]);\n                        if (type === \"c\") {\n                            divPathC(startV, endV, c1, c2, _segmentsRaw, _verticesRaw, path, pathVertices, originV, type);\n                        } else {\n                            divPathC(originV, endV, c1, c2, _segmentsRaw, _verticesRaw, path, pathVertices, originV, type);\n                        }\n                        if (typeForStroke(getStroke($path)) == \"mountain\" || typeForStroke(getStroke($path)) == \"valley\") {\n                            _segmentsRaw.push([\"C\"]);\n                        }\n                        _segmentsRaw.push([_verticesRaw.length-1, _verticesRaw.length]);\n                        if (path.targetAngle && _segmentsRaw.length>0) _segmentsRaw[_segmentsRaw.length-1].push(path.targetAngle);\n                        var vertex;\n                        if (type === \"c\") {\n                            vertex = new THREE.Vector3(originV.x+endV.x, 0, originV.z+endV.z);\n                        } else {\n                            vertex = new THREE.Vector3(endV.x, 0, endV.z);\n                        }\n                        _verticesRaw.push(vertex);\n                        pathVertices.push(vertex);\n                        break;\n\n                    case \"s\":\n                    case \"S\":\n                        lastSegment = segments[j-1];\n                        lastType = lastSegment.type;\n                        if (lastType === \"S\" || lastType === \"s\" || lastType === \"C\" || lastType === \"c\") {\n                            if (lastType === \"S\" || lastType === \"C\") {\n                                originV = _verticesRaw[_verticesRaw.length-1].clone();\n                                if (type === \"S\") {\n                                    c1 = new THREE.Vector3(endV.x * 2 - c2.x, 0, endV.z * 2 - c2.z);\n                                } else {\n                                    c1 = new THREE.Vector3(endV.x * 2 - c2.x - originV.x, 0, endV.z * 2 - c2.z - originV.z);\n                                }\n                            } else {\n                                if (type === \"S\") {\n                                    c1 = new THREE.Vector3(endV.x * 2 - c2.x + originV.x, 0, endV.z * 2 - c2.z + originV.z);\n                                    originV = _verticesRaw[_verticesRaw.length-1].clone();\n                                } else {\n                                    c1 = new THREE.Vector3(endV.x * 2 - c2.x + originV.x, 0, endV.z * 2 - c2.z + originV.z);\n                                    originV = _verticesRaw[_verticesRaw.length-1].clone();\n                                    c1.x = c1.x - originV.x;\n                                    c1.z = c1.z - originV.z;\n                                }\n                            }\n                            startV = new THREE.Vector3(0, 0, 0);\n                            endV = new THREE.Vector3(segment.values[2], 0, segment.values[3]);\n                            c2 = new THREE.Vector3(segment.values[0], 0, segment.values[1]);\n                            if (type === \"s\") {\n                                divPathC(startV, endV, c1, c2, _segmentsRaw, _verticesRaw, path, pathVertices, originV, \"c\");\n                            } else {\n                                divPathC(originV, endV, c1, c2, _segmentsRaw, _verticesRaw, path, pathVertices, originV, \"C\");\n                            }\n                            if (typeForStroke(getStroke($path)) == \"mountain\" || typeForStroke(getStroke($path)) == \"valley\") {\n                                _segmentsRaw.push([\"C\"]);\n                            }\n                            _segmentsRaw.push([_verticesRaw.length-1, _verticesRaw.length]);\n                            if (path.targetAngle && _segmentsRaw.length>0) _segmentsRaw[_segmentsRaw.length-1].push(path.targetAngle);\n                            var vertex;\n                            if (type === \"s\") {\n                                vertex = new THREE.Vector3(originV.x+endV.x, 0, originV.z+endV.z);\n                            } else {\n                                vertex = new THREE.Vector3(endV.x, 0, endV.z);\n                            }\n                            _verticesRaw.push(vertex);\n                            pathVertices.push(vertex);\n                        } else {\n                            originV = _verticesRaw[_verticesRaw.length-1];\n                            startV = new THREE.Vector3(0, 0, 0);\n                            endV = new THREE.Vector3(segment.values[2], 0, segment.values[3]);\n                            c1 = new THREE.Vector3(segment.values[0], 0, segment.values[1]);\n                            if (type === \"s\") {\n                                divPathQ(startV, endV, c1, _segmentsRaw, _verticesRaw, path, pathVertices, originV, \"q\");\n                            } else {\n                                divPathQ(originV, endV, c1, _segmentsRaw, _verticesRaw, path, pathVertices, originV, \"Q\");\n                            }\n                            if (typeForStroke(getStroke($path)) == \"mountain\" || typeForStroke(getStroke($path)) == \"valley\") {\n                                _segmentsRaw.push([\"C\"]);\n                            }\n                            _segmentsRaw.push([_verticesRaw.length-1, _verticesRaw.length]);\n                            if (path.targetAngle && _segmentsRaw.length>0) _segmentsRaw[_segmentsRaw.length-1].push(path.targetAngle);\n                            var vertex;\n                            if (type === \"s\") {\n                                vertex = new THREE.Vector3(originV.x+endV.x, 0, originV.z+endV.z);\n                            } else {\n                                vertex = new THREE.Vector3(endV.x, 0, endV.z);\n                            }\n                            _verticesRaw.push(vertex);\n                            pathVertices.push(vertex);\n                        }\n                        break;\n                    \n                    case \"q\":\n                    case \"Q\":\n                        originV = _verticesRaw[_verticesRaw.length-1];\n                        startV = new THREE.Vector3(0, 0, 0);\n                        endV = new THREE.Vector3(segment.values[2], 0, segment.values[3]);\n                        c1 = new THREE.Vector3(segment.values[0], 0, segment.values[1]);\n                        if (type === \"q\") {\n                            divPathQ(startV, endV, c1, _segmentsRaw, _verticesRaw, path, pathVertices, originV, type);\n                        } else {\n                            divPathQ(originV, endV, c1, _segmentsRaw, _verticesRaw, path, pathVertices, originV, type);\n                        }\n                        if (typeForStroke(getStroke($path)) == \"mountain\" || typeForStroke(getStroke($path)) == \"valley\") {\n                            _segmentsRaw.push([\"C\"]);\n                        }\n                        _segmentsRaw.push([_verticesRaw.length-1, _verticesRaw.length]);\n                        if (path.targetAngle && _segmentsRaw.length>0) _segmentsRaw[_segmentsRaw.length-1].push(path.targetAngle);\n                        var vertex;\n                        if (type === \"q\") {\n                            vertex = new THREE.Vector3(originV.x+endV.x, 0, originV.z+endV.z);\n                        } else {\n                            vertex = new THREE.Vector3(endV.x, 0, endV.z);\n                        }\n                        _verticesRaw.push(vertex);\n                        pathVertices.push(vertex);\n                        break;\n\n                    case \"t\":\n                    case \"T\":\n                        lastSegment = segments[j-1];\n                        lastType = lastSegment.type;\n                        if (lastType === \"Q\" || lastType === \"q\" || lastType === \"T\" || lastType === \"t\") {\n                            if (lastType === \"Q\" || lastType === \"T\") {\n                                originV = _verticesRaw[_verticesRaw.length-1].clone();\n                                const lastC1 = c1.clone();\n                                if (type === \"T\") {\n                                    c1 = new THREE.Vector3(endV.x * 2 - lastC1.x, 0, endV.z * 2 - lastC1.z);\n                                } else {\n                                    c1 = new THREE.Vector3(endV.x * 2 - lastC1.x - originV.x, 0, endV.z * 2 - lastC1.z - originV.z);\n                                }\n                            } else {\n                                if (type === \"T\") {\n                                    const lastC1 = c1.clone();\n                                    c1 = new THREE.Vector3(endV.x * 2 - lastC1.x + originV.x, 0, endV.z * 2 - lastC1.z + originV.z);\n                                    originV = _verticesRaw[_verticesRaw.length-1].clone();\n                                } else {\n                                    const lastC1 = c1.clone();\n                                    c1 = new THREE.Vector3(endV.x * 2 - lastC1.x + originV.x, 0, endV.z * 2 - lastC1.z + originV.z);\n                                    originV = _verticesRaw[_verticesRaw.length-1].clone();\n                                    c1.x = c1.x - originV.x;\n                                    c1.z = c1.z - originV.z;\n                                }\n                            }\n                            startV = new THREE.Vector3(0, 0, 0);\n                            endV = new THREE.Vector3(segment.values[0], 0, segment.values[1]);\n                            if (type === \"t\") {\n                                divPathQ(startV, endV, c1, _segmentsRaw, _verticesRaw, path, pathVertices, originV, \"q\");\n                            } else {\n                                divPathQ(originV, endV, c1, _segmentsRaw, _verticesRaw, path, pathVertices, originV, \"Q\");\n                            }\n                            if (typeForStroke(getStroke($path)) == \"mountain\" || typeForStroke(getStroke($path)) == \"valley\") {\n                                _segmentsRaw.push([\"C\"]);\n                            }\n                            _segmentsRaw.push([_verticesRaw.length-1, _verticesRaw.length]);\n                            if (path.targetAngle && _segmentsRaw.length>0) _segmentsRaw[_segmentsRaw.length-1].push(path.targetAngle);\n                            var vertex;\n                            if (type === \"t\") {\n                                vertex = new THREE.Vector3(originV.x+endV.x, 0, originV.z+endV.z);\n                            } else {\n                                vertex = new THREE.Vector3(endV.x, 0, endV.z);\n                            }\n                            _verticesRaw.push(vertex);\n                            pathVertices.push(vertex);\n                        } else {\n                            if (type === \"t\") {\n                                if (typeForStroke(getStroke($path)) != \"border\") {\n                                    _segmentsRaw.push([_verticesRaw.length-1, _verticesRaw.length]);\n                                    if (path.targetAngle && _segmentsRaw.length>0) _segmentsRaw[_segmentsRaw.length-1].push(path.targetAngle);\n                                    var vertex = _verticesRaw[_verticesRaw.length-1].clone();\n                                    vertex.x += segment.values[0];\n                                    vertex.z += segment.values[1];\n                                    _verticesRaw.push(vertex);\n                                    pathVertices.push(vertex);\n                                } else {\n                                    startV = _verticesRaw[_verticesRaw.length-1].clone();\n                                    endV = new THREE.Vector3(segment.values[0], 0, segment.values[1]);\n                                    const distance = Math.sqrt(Math.pow(endV.x, 2) + Math.pow(endV.z, 2));\n                                    const n = Math.ceil(distance / globals.vertInt);\n                                    if (n > 1) {\n                                        for (let i = n - 1; i >= 0; i--) {\n                                            _segmentsRaw.push([_verticesRaw.length-1, _verticesRaw.length]);\n                                            if (path.targetAngle && _segmentsRaw.length>0) _segmentsRaw[_segmentsRaw.length-1].push(path.targetAngle);\n                                            const vertex = new THREE.Vector3(startV.x+(i*0+(n-i)*endV.x)/n, 0, startV.z+(i*0+(n-i)*endV.z)/n);\n                                            _verticesRaw.push(vertex);\n                                            pathVertices.push(vertex);\n                                        }\n                                    } else {\n                                        _segmentsRaw.push([_verticesRaw.length-1, _verticesRaw.length]);\n                                        if (path.targetAngle && _segmentsRaw.length>0) _segmentsRaw[_segmentsRaw.length-1].push(path.targetAngle);\n                                        const vertex = new THREE.Vector3(startV.x+endV.x, 0, startV.z+endV.z);\n                                        _verticesRaw.push(vertex);\n                                        pathVertices.push(vertex);\n                                    }\n                                }\n                            } else {\n                                if (typeForStroke(getStroke($path)) != \"border\") {\n                                    _segmentsRaw.push([_verticesRaw.length-1, _verticesRaw.length]);\n                                    if (path.targetAngle && _segmentsRaw.length>0) _segmentsRaw[_segmentsRaw.length-1].push(path.targetAngle);\n                                    var vertex = _verticesRaw[_verticesRaw.length-1].clone();\n                                    vertex.x = segment.values[0];\n                                    vertex.z = segment.values[1];\n                                    _verticesRaw.push(vertex);\n                                    pathVertices.push(vertex);\n                                } else {\n                                    startV = _verticesRaw[_verticesRaw.length-1].clone();\n                                    endV = new THREE.Vector3(segment.values[0], 0, segment.values[1]);\n                                    const distance = Math.sqrt(Math.pow(endV.x - startV.x, 2) + Math.pow(endV.z - startV.z, 2));\n                                    const n = Math.ceil(distance / globals.vertInt);\n                                    if (n > 1) {\n                                        for (let i = n - 1; i >= 0; i--) {\n                                            _segmentsRaw.push([_verticesRaw.length-1, _verticesRaw.length]);\n                                            if (path.targetAngle && _segmentsRaw.length>0) _segmentsRaw[_segmentsRaw.length-1].push(path.targetAngle);\n                                            const vertex = new THREE.Vector3((i*startV.x+(n-i)*endV.x)/n, 0, (i*startV.z+(n-i)*endV.z)/n);\n                                            _verticesRaw.push(vertex);\n                                            pathVertices.push(vertex);\n                                        }\n                                    } else {\n                                        _segmentsRaw.push([_verticesRaw.length-1, _verticesRaw.length]);\n                                        if (path.targetAngle && _segmentsRaw.length>0) _segmentsRaw[_segmentsRaw.length-1].push(path.targetAngle);\n                                        const vertex = new THREE.Vector3(endV.x, 0, endV.z);\n                                        _verticesRaw.push(vertex);\n                                        pathVertices.push(vertex);\n                                    }\n                                }\n                            }\n                        }\n                        break;\n\n                    case \"A\":\n                    case \"a\":\n                        let svgpath = require('svgpath');\n                        let pathDataString = \"M \" + _verticesRaw[_verticesRaw.length-1].x + \" \" + _verticesRaw[_verticesRaw.length-1].z + \" \" + type;\n                        pathDataString += \" \";\n                        for (let index = 0; index < segment.values.length; index++) {\n                            pathDataString += segment.values[index];\n                            pathDataString += \" \";\n                        }\n                        const output = svgpath(pathDataString).unarc();\n                        for (let i = 1; i < output.segments.length; i++) {\n                            let newSegment = new Object();\n                            newSegment.type = output.segments[i][0];\n                            newSegment.values = [];\n                            for (let j = 1; j < output.segments[i].length; j++) {\n                                newSegment.values.push(output.segments[i][j]);\n                            }\n                            segments.splice(j+i, 0, newSegment);\n                        }\n                        break;\n                }\n            }\n            for (var j=0;j<pathVertices.length;j++){\n                applyTransformation(pathVertices[j], path);\n            }\n        }\n    }\n\n    function divPathl(_segment, _segmentsRaw, _verticesRaw, _path, _pathVertices) {\n        const startV = _verticesRaw[_verticesRaw.length-1].clone();\n        const endV = new THREE.Vector3(_segment.values[0], 0, _segment.values[1]);\n        const distance = Math.sqrt(Math.pow(endV.x, 2) + Math.pow(endV.z, 2));\n        const n = Math.ceil(distance / globals.vertInt);\n        if (n > 1) {\n            for (let i = n - 1; i >= 0; i--) {\n                _segmentsRaw.push([_verticesRaw.length-1, _verticesRaw.length]);\n                if (_path.targetAngle && _segmentsRaw.length>0) _segmentsRaw[_segmentsRaw.length-1].push(_path.targetAngle);\n                const vertex = new THREE.Vector3(startV.x+(i*0+(n-i)*endV.x)/n, 0, startV.z+(i*0+(n-i)*endV.z)/n);\n                _verticesRaw.push(vertex);\n                _pathVertices.push(vertex);\n            }\n        } else {\n            _segmentsRaw.push([_verticesRaw.length-1, _verticesRaw.length]);\n            if (_path.targetAngle && _segmentsRaw.length>0) _segmentsRaw[_segmentsRaw.length-1].push(_path.targetAngle);\n            const vertex = new THREE.Vector3(startV.x+endV.x, 0, startV.z+endV.z);\n            _verticesRaw.push(vertex);\n            _pathVertices.push(vertex);\n        }\n    }\n\n    function divPathL(_segment, _segmentsRaw, _verticesRaw, _path, _pathVertices) {\n        const startV = _verticesRaw[_verticesRaw.length-1].clone();\n        const endV = new THREE.Vector3(_segment.values[0], 0, _segment.values[1]);\n        const distance = Math.sqrt(Math.pow(endV.x - startV.x, 2) + Math.pow(endV.z - startV.z, 2));\n        const n = Math.ceil(distance / globals.vertInt);\n        if (n > 1) {\n            for (let i = n - 1; i >= 0; i--) {\n                _segmentsRaw.push([_verticesRaw.length-1, _verticesRaw.length]);\n                if (_path.targetAngle && _segmentsRaw.length>0) _segmentsRaw[_segmentsRaw.length-1].push(_path.targetAngle);\n                const vertex = new THREE.Vector3((i*startV.x+(n-i)*endV.x)/n, 0, (i*startV.z+(n-i)*endV.z)/n);\n                _verticesRaw.push(vertex);\n                _pathVertices.push(vertex);\n            }\n        } else {\n            _segmentsRaw.push([_verticesRaw.length-1, _verticesRaw.length]);\n            if (_path.targetAngle && _segmentsRaw.length>0) _segmentsRaw[_segmentsRaw.length-1].push(_path.targetAngle);\n            const vertex = new THREE.Vector3(endV.x, 0, endV.z);\n            _verticesRaw.push(vertex);\n            _pathVertices.push(vertex);\n        }\n    }\n\n    function divPathv(_segment, _segmentsRaw, _verticesRaw, _path, _pathVertices) {\n        const startV = _verticesRaw[_verticesRaw.length-1].clone();\n        const endV = new THREE.Vector3(0, 0, _segment.values[0]);\n        const distance = Math.sqrt(Math.pow(endV.x, 2) + Math.pow(endV.z, 2));\n        const n = Math.ceil(distance / globals.vertInt);\n        if (n > 1) {\n            for (let i = n - 1; i >= 0; i--) {\n                _segmentsRaw.push([_verticesRaw.length-1, _verticesRaw.length]);\n                if (_path.targetAngle && _segmentsRaw.length>0) _segmentsRaw[_segmentsRaw.length-1].push(_path.targetAngle);\n                const vertex = new THREE.Vector3(startV.x+(i*0+(n-i)*endV.x)/n, 0, startV.z+(i*0+(n-i)*endV.z)/n);\n                _verticesRaw.push(vertex);\n                _pathVertices.push(vertex);\n            }\n        } else {\n            _segmentsRaw.push([_verticesRaw.length-1, _verticesRaw.length]);\n            if (_path.targetAngle && _segmentsRaw.length>0) _segmentsRaw[_segmentsRaw.length-1].push(_path.targetAngle);\n            const vertex = new THREE.Vector3(startV.x+endV.x, 0, startV.z+endV.z);\n            _verticesRaw.push(vertex);\n            _pathVertices.push(vertex);\n        }\n    }\n\n    function divPathV(_segment, _segmentsRaw, _verticesRaw, _path, _pathVertices) {\n        const startV = _verticesRaw[_verticesRaw.length-1].clone();\n        const endV = new THREE.Vector3(startV.x, 0, _segment.values[0]);\n        const distance = Math.sqrt(Math.pow(endV.x - startV.x, 2) + Math.pow(endV.z - startV.z, 2));\n        const n = Math.ceil(distance / globals.vertInt);\n        if (n > 1) {\n            for (let i = n - 1; i >= 0; i--) {\n                _segmentsRaw.push([_verticesRaw.length-1, _verticesRaw.length]);\n                if (_path.targetAngle && _segmentsRaw.length>0) _segmentsRaw[_segmentsRaw.length-1].push(_path.targetAngle);\n                const vertex = new THREE.Vector3((i*startV.x+(n-i)*endV.x)/n, 0, (i*startV.z+(n-i)*endV.z)/n);\n                _verticesRaw.push(vertex);\n                _pathVertices.push(vertex);\n            }\n        } else {\n            _segmentsRaw.push([_verticesRaw.length-1, _verticesRaw.length]);\n            if (_path.targetAngle && _segmentsRaw.length>0) _segmentsRaw[_segmentsRaw.length-1].push(_path.targetAngle);\n            const vertex = new THREE.Vector3(endV.x, 0, endV.z);\n            _verticesRaw.push(vertex);\n            _pathVertices.push(vertex);\n        }\n    }\n\n    function divPathh(_segment, _segmentsRaw, _verticesRaw, _path, _pathVertices) {\n        const startV = _verticesRaw[_verticesRaw.length-1].clone();\n        const endV = new THREE.Vector3(_segment.values[0], 0, 0);\n        const distance = Math.sqrt(Math.pow(endV.x, 2) + Math.pow(endV.z, 2));\n        const n = Math.ceil(distance / globals.vertInt);\n        if (n > 1) {\n            for (let i = n - 1; i >= 0; i--) {\n                _segmentsRaw.push([_verticesRaw.length-1, _verticesRaw.length]);\n                if (_path.targetAngle && _segmentsRaw.length>0) _segmentsRaw[_segmentsRaw.length-1].push(_path.targetAngle);\n                const vertex = new THREE.Vector3(startV.x+(i*0+(n-i)*endV.x)/n, 0, startV.z+(i*0+(n-i)*endV.z)/n);\n                _verticesRaw.push(vertex);\n                _pathVertices.push(vertex);\n            }\n        } else {\n            _segmentsRaw.push([_verticesRaw.length-1, _verticesRaw.length]);\n            if (_path.targetAngle && _segmentsRaw.length>0) _segmentsRaw[_segmentsRaw.length-1].push(_path.targetAngle);\n            const vertex = new THREE.Vector3(startV.x+endV.x, 0, startV.z+endV.z);\n            _verticesRaw.push(vertex);\n            _pathVertices.push(vertex);\n        }\n    }\n\n    function divPathH(_segment, _segmentsRaw, _verticesRaw, _path, _pathVertices) {\n        const startV = _verticesRaw[_verticesRaw.length-1].clone();\n        const endV = new THREE.Vector3(_segment.values[0], 0, startV.z);\n        const distance = Math.sqrt(Math.pow(endV.x - startV.x, 2) + Math.pow(endV.z - startV.z, 2));\n        const n = Math.ceil(distance / globals.vertInt);\n        if (n > 1) {\n            for (let i = n - 1; i >= 0; i--) {\n                _segmentsRaw.push([_verticesRaw.length-1, _verticesRaw.length]);\n                if (_path.targetAngle && _segmentsRaw.length>0) _segmentsRaw[_segmentsRaw.length-1].push(_path.targetAngle);\n                const vertex = new THREE.Vector3((i*startV.x+(n-i)*endV.x)/n, 0, (i*startV.z+(n-i)*endV.z)/n);\n                _verticesRaw.push(vertex);\n                _pathVertices.push(vertex);\n            }\n        } else {\n            _segmentsRaw.push([_verticesRaw.length-1, _verticesRaw.length]);\n            if (_path.targetAngle && _segmentsRaw.length>0) _segmentsRaw[_segmentsRaw.length-1].push(_path.targetAngle);\n            const vertex = new THREE.Vector3(endV.x, 0, endV.z);\n            _verticesRaw.push(vertex);\n            _pathVertices.push(vertex);\n        }\n    }\n\n    function divPathZ(_segmentsRaw, _verticesRaw, _path, _pathVertices, _startVertex) {\n        const startV = _verticesRaw[_verticesRaw.length-1].clone();\n        const endV = _verticesRaw[_startVertex].clone();\n        const distance = Math.sqrt(Math.pow(endV.x - startV.x, 2) + Math.pow(endV.z - startV.z, 2));\n        const n = Math.ceil(distance / globals.vertInt);\n        if (n > 1) {\n            for (let i = n - 1; i >= 1; i--) {\n                _segmentsRaw.push([_verticesRaw.length-1, _verticesRaw.length]);\n                if (_path.targetAngle && _segmentsRaw.length>0) _segmentsRaw[_segmentsRaw.length-1].push(_path.targetAngle);\n                const vertex = new THREE.Vector3((i*startV.x+(n-i)*endV.x)/n, 0, (i*startV.z+(n-i)*endV.z)/n);\n                _verticesRaw.push(vertex);\n                _pathVertices.push(vertex);\n            }\n            _segmentsRaw.push([_verticesRaw.length-1, _startVertex]);\n            if (_path.targetAngle && _segmentsRaw.length>0) _segmentsRaw[_segmentsRaw.length-1].push(_path.targetAngle);\n        } else {\n            _segmentsRaw.push([_verticesRaw.length-1, _startVertex]);\n            if (_path.targetAngle && _segmentsRaw.length>0) _segmentsRaw[_segmentsRaw.length-1].push(_path.targetAngle);\n        }\n    }\n\n    function divPathC(_startV, _endV, _c1, _c2, _segmentsRaw, _verticesRaw, _path, _pathVertices, _originV, _type) {\n        let a, b, midV, d;\n        if (_endV.x - _startV.x == 0) {\n            midV = calcMidVC(_startV, _endV, _c1, _c2, 0.5);\n            d = Math.abs(midV.x - _endV.x);\n        } else {\n            a = (_endV.z - _startV.z)/(_endV.x - _startV.x);\n            b = _endV.z - a*_endV.x;\n            midV = calcMidVC(_startV, _endV, _c1, _c2, 0.5);\n            d = Math.abs(a*midV.x + (-1)*midV.z + b)/Math.sqrt(a*a+1);\n        }\n        if (globals.apprCurve < d || globals.vertInt * globals.vertInt < dist2(_startV, _endV)) {\n            const newC1 = new THREE.Vector3((_startV.x+_c1.x)*0.5, 0, (_startV.z+_c1.z)*0.5);\n            const newC2 = new THREE.Vector3((_c1.x+_c2.x)*0.5, 0, (_c1.z+_c2.z)*0.5);\n            const newC3 = new THREE.Vector3((_c2.x+_endV.x)*0.5, 0, (_c2.z+_endV.z)*0.5);\n            const newC4 = new THREE.Vector3((newC1.x+newC2.x)*0.5, 0, (newC1.z+newC2.z)*0.5);\n            const newC5 = new THREE.Vector3((newC2.x+newC3.x)*0.5, 0, (newC2.z+newC3.z)*0.5);\n            divPathC(_startV, midV, newC1, newC4, _segmentsRaw, _verticesRaw, _path, _pathVertices, _originV, _type);\n            if (typeForStroke(getStroke($(_path))) == \"mountain\" || typeForStroke(getStroke($(_path))) == \"valley\") {\n                _segmentsRaw.push([\"C\"]);\n            }\n            _segmentsRaw.push([_verticesRaw.length-1, _verticesRaw.length]);\n            if (_path.targetAngle && _segmentsRaw.length>0) _segmentsRaw[_segmentsRaw.length-1].push(_path.targetAngle);\n            let vertex;\n            if (_type === \"c\") {\n                vertex = new THREE.Vector3(_originV.x+midV.x, 0, _originV.z+midV.z);\n            } else {\n                vertex = new THREE.Vector3(midV.x, 0, midV.z);\n            }\n            _verticesRaw.push(vertex);\n            _pathVertices.push(vertex);\n            divPathC(midV, _endV, newC5, newC3, _segmentsRaw, _verticesRaw, _path, _pathVertices, _originV, _type);\n        }\n    }\n\n    function dist2(v1, v2) {\n        return (v1.x-v2.x)*(v1.x-v2.x)+(v1.z-v2.z)*(v1.z-v2.z);\n    }\n\n    function calcMidVC(_startV, _endV, _c1, _c2, _t) {\n        const u = 1-_t;\n        return new THREE.Vector3(u*u*u*_startV.x + 3*_t*u*u*_c1.x + 3*_t*_t*u*_c2.x + _t*_t*_t*_endV.x, 0, u*u*u*_startV.z + 3*_t*u*u*_c1.z + 3*_t*_t*u*_c2.z + _t*_t*_t*_endV.z);\n    }\n\n    function divPathQ(_startV, _endV, _c1, _segmentsRaw, _verticesRaw, _path, _pathVertices, _originV, _type) {\n        let a, b, midV, d;\n        if (_endV.x - _startV.x == 0) {\n            midV = calcMidVQ(_startV, _endV, _c1, 0.5);\n            d = Math.abs(midV.x - _endV.x);\n        } else {\n            a = (_endV.z - _startV.z)/(_endV.x - _startV.x);\n            b = _endV.z - a*_endV.x;\n            midV = calcMidVQ(_startV, _endV, _c1, 0.5);\n            d = Math.abs(a*midV.x + (-1)*midV.z + b)/Math.sqrt(a*a+1);\n        }\n        if (globals.apprCurve < d || globals.vertInt * globals.vertInt < dist2(_startV, _endV)) {\n            const newC1 = new THREE.Vector3((_startV.x+_c1.x)*0.5, 0, (_startV.z+_c1.z)*0.5);\n            const newC2 = new THREE.Vector3((_c1.x+_endV.x)*0.5, 0, (_c1.z+_endV.z)*0.5);\n            divPathQ(_startV, midV, newC1, _segmentsRaw, _verticesRaw, _path, _pathVertices, _originV, _type);\n            if (typeForStroke(getStroke($(_path))) == \"mountain\" || typeForStroke(getStroke($(_path))) == \"valley\") {\n                _segmentsRaw.push([\"C\"]);\n            }\n            _segmentsRaw.push([_verticesRaw.length-1, _verticesRaw.length]);\n            if (_path.targetAngle && _segmentsRaw.length>0) _segmentsRaw[_segmentsRaw.length-1].push(_path.targetAngle);\n            let vertex;\n            if (_type === \"q\") {\n                vertex = new THREE.Vector3(_originV.x+midV.x, 0, _originV.z+midV.z);\n            } else {\n                vertex = new THREE.Vector3(midV.x, 0, midV.z);\n            }\n            _verticesRaw.push(vertex);\n            _pathVertices.push(vertex);\n            divPathQ(midV, _endV, newC2, _segmentsRaw, _verticesRaw, _path, _pathVertices, _originV, _type);\n        }\n    }\n\n    function calcMidVQ(_startV, _endV, _c1, _t) {\n        const u = 1-_t;\n        return new THREE.Vector3(u*u*_startV.x + 2*_t*u*_c1.x + _t*_t*_endV.x, 0, u*u*_startV.z + 2*_t*u*_c1.z + _t*_t*_endV.z);\n    }\n\n    function parseLine(_verticesRaw, _segmentsRaw, $elements){\n        for (var i=0;i<$elements.length;i++){\n            var element = $elements[i];\n            if (typeForStroke(getStroke($(element))) == \"border\") {\n                const vert1 = new THREE.Vector3(element.x1.baseVal.value, 0, element.y1.baseVal.value);\n                const vert2 = new THREE.Vector3(element.x2.baseVal.value, 0, element.y2.baseVal.value);\n\n                _verticesRaw.push(vert1);\n                let startVertex = _verticesRaw.length-1;\n                let distance = Math.sqrt(Math.pow(vert2.x - vert1.x, 2) + Math.pow(vert2.z - vert1.z, 2));\n                let n = Math.ceil(distance / globals.vertInt);\n                if (n > 1) {\n                    for (let i = n - 1; i >= 0; i--) {\n                        _segmentsRaw.push([_verticesRaw.length-1, _verticesRaw.length]);\n                        const vertex = new THREE.Vector3((i*vert1.x+(n-i)*vert2.x)/n, 0, (i*vert1.z+(n-i)*vert2.z)/n);\n                        _verticesRaw.push(vertex);\n                    }\n                } else {\n                    _segmentsRaw.push([_verticesRaw.length-1, _verticesRaw.length]);\n                    _verticesRaw.push(vert2);\n                }\n\n                for (let j=1;j<=_verticesRaw.length-1-startVertex;j++){\n                    if (element.targetAngle) _segmentsRaw[_segmentsRaw.length-j].push(element.targetAngle);\n                    applyTransformation(_verticesRaw[_verticesRaw.length-j], element);\n                }\n            } else {\n                _verticesRaw.push(new THREE.Vector3(element.x1.baseVal.value, 0, element.y1.baseVal.value));\n                _verticesRaw.push(new THREE.Vector3(element.x2.baseVal.value, 0, element.y2.baseVal.value));\n                _segmentsRaw.push([_verticesRaw.length-2, _verticesRaw.length-1]);\n                if (element.targetAngle) _segmentsRaw[_segmentsRaw.length-1].push(element.targetAngle);\n                applyTransformation(_verticesRaw[_verticesRaw.length-2], element);\n                applyTransformation(_verticesRaw[_verticesRaw.length-1], element);\n            }\n        }\n    }\n\n    function parseRect(_verticesRaw, _segmentsRaw, $elements){\n        for (var i=0;i<$elements.length;i++){\n            var element = $elements[i];\n            var x = element.x.baseVal.value;\n            var y = element.y.baseVal.value;\n            var width = element.width.baseVal.value;\n            var height = element.height.baseVal.value;\n            if (typeForStroke(getStroke($(element))) == \"border\") {\n                const vert1 = new THREE.Vector3(x, 0, y);\n                const vert2 = new THREE.Vector3(x+width, 0, y);\n                const vert3 = new THREE.Vector3(x+width, 0, y+height);\n                const vert4 = new THREE.Vector3(x, 0, y+height);\n\n                _verticesRaw.push(vert1);\n                let startVertex = _verticesRaw.length-1;\n                let distance = Math.sqrt(Math.pow(vert2.x - vert1.x, 2) + Math.pow(vert2.z - vert1.z, 2));\n                let n = Math.ceil(distance / globals.vertInt);\n                if (n > 1) {\n                    for (let i = n - 1; i >= 0; i--) {\n                        _segmentsRaw.push([_verticesRaw.length-1, _verticesRaw.length]);\n                        const vertex = new THREE.Vector3((i*vert1.x+(n-i)*vert2.x)/n, 0, (i*vert1.z+(n-i)*vert2.z)/n);\n                        _verticesRaw.push(vertex);\n                    }\n                } else {\n                    _segmentsRaw.push([_verticesRaw.length-1, _verticesRaw.length]);\n                    _verticesRaw.push(vert2);\n                }\n\n                distance = Math.sqrt(Math.pow(vert3.x - vert2.x, 2) + Math.pow(vert3.z - vert2.z, 2));\n                n = Math.ceil(distance / globals.vertInt);\n                if (n > 1) {\n                    for (let i = n - 1; i >= 0; i--) {\n                        _segmentsRaw.push([_verticesRaw.length-1, _verticesRaw.length]);\n                        const vertex = new THREE.Vector3((i*vert2.x+(n-i)*vert3.x)/n, 0, (i*vert2.z+(n-i)*vert3.z)/n);\n                        _verticesRaw.push(vertex);\n                    }\n                } else {\n                    _segmentsRaw.push([_verticesRaw.length-1, _verticesRaw.length]);\n                    _verticesRaw.push(vert3);\n                }\n\n                distance = Math.sqrt(Math.pow(vert4.x - vert3.x, 2) + Math.pow(vert4.z - vert3.z, 2));\n                n = Math.ceil(distance / globals.vertInt);\n                if (n > 1) {\n                    for (let i = n - 1; i >= 0; i--) {\n                        _segmentsRaw.push([_verticesRaw.length-1, _verticesRaw.length]);\n                        const vertex = new THREE.Vector3((i*vert3.x+(n-i)*vert4.x)/n, 0, (i*vert3.z+(n-i)*vert4.z)/n);\n                        _verticesRaw.push(vertex);\n                    }\n                } else {\n                    _segmentsRaw.push([_verticesRaw.length-1, _verticesRaw.length]);\n                    _verticesRaw.push(vert4);\n                }\n\n                distance = Math.sqrt(Math.pow(vert1.x - vert4.x, 2) + Math.pow(vert1.z - vert4.z, 2));\n                n = Math.ceil(distance / globals.vertInt);\n                if (n > 1) {\n                    for (let i = n - 1; i >= 1; i--) {\n                        _segmentsRaw.push([_verticesRaw.length-1, _verticesRaw.length]);\n                        const vertex = new THREE.Vector3((i*vert4.x+(n-i)*vert1.x)/n, 0, (i*vert4.z+(n-i)*vert1.z)/n);\n                        _verticesRaw.push(vertex);\n                    }\n                    _segmentsRaw.push([_verticesRaw.length-1, startVertex]);\n                } else {\n                    _segmentsRaw.push([_verticesRaw.length-1, startVertex]);\n                }\n\n                for (let j=1;j<=_verticesRaw.length-startVertex;j++){\n                    if (element.targetAngle) _segmentsRaw[_segmentsRaw.length-j].push(element.targetAngle);\n                    applyTransformation(_verticesRaw[_verticesRaw.length-j], element);\n                }\n            } else {\n                _verticesRaw.push(new THREE.Vector3(x, 0, y));\n                _verticesRaw.push(new THREE.Vector3(x+width, 0, y));\n                _verticesRaw.push(new THREE.Vector3(x+width, 0, y+height));\n                _verticesRaw.push(new THREE.Vector3(x, 0, y+height));\n                _segmentsRaw.push([_verticesRaw.length-4, _verticesRaw.length-3]);\n                _segmentsRaw.push([_verticesRaw.length-3, _verticesRaw.length-2]);\n                _segmentsRaw.push([_verticesRaw.length-2, _verticesRaw.length-1]);\n                _segmentsRaw.push([_verticesRaw.length-1, _verticesRaw.length-4]);\n                for (var j=1;j<=4;j++){\n                    if (element.targetAngle) _segmentsRaw[_segmentsRaw.length-j].push(element.targetAngle);\n                    applyTransformation(_verticesRaw[_verticesRaw.length-j], element);\n                }\n            }\n        }\n    }\n\n    function parsePolygon(_verticesRaw, _segmentsRaw, $elements){\n        for (var i=0;i<$elements.length;i++){\n            var element = $elements[i];\n            if (typeForStroke(getStroke($(element))) == \"border\") {\n                const vert = new THREE.Vector3(element.points[0].x, 0, element.points[0].y);\n                _verticesRaw.push(vert);\n                let startVertex = _verticesRaw.length-1;\n                for (let j=0;j<element.points.length-1;j++){\n                    const vert1 = new THREE.Vector3(element.points[j].x, 0, element.points[j].y);\n                    const vert2 = new THREE.Vector3(element.points[j+1].x, 0, element.points[j+1].y)\n\n                    let distance = Math.sqrt(Math.pow(vert2.x - vert1.x, 2) + Math.pow(vert2.z - vert1.z, 2));\n                    let n = Math.ceil(distance / globals.vertInt);\n                    if (n > 1) {\n                        for (let k = n - 1; k >= 0; k--) {\n                            _segmentsRaw.push([_verticesRaw.length-1, _verticesRaw.length]);\n                            const vertex = new THREE.Vector3((k*vert1.x+(n-k)*vert2.x)/n, 0, (k*vert1.z+(n-k)*vert2.z)/n);\n                            _verticesRaw.push(vertex);\n                        }\n                    } else {\n                        _segmentsRaw.push([_verticesRaw.length-1, _verticesRaw.length]);\n                        _verticesRaw.push(vert2);\n                    }\n                }\n\n                const vert1 = new THREE.Vector3(element.points[element.points.length-1].x, 0, element.points[element.points.length-1].y);\n                const vert2 = vert.clone();\n\n                let distance = Math.sqrt(Math.pow(vert2.x - vert1.x, 2) + Math.pow(vert2.z - vert1.z, 2));\n                let n = Math.ceil(distance / globals.vertInt);\n                if (n > 1) {\n                    for (let j = n - 1; j >= 1; j--) {\n                        _segmentsRaw.push([_verticesRaw.length-1, _verticesRaw.length]);\n                        const vertex = new THREE.Vector3((j*vert1.x+(n-j)*vert2.x)/n, 0, (j*vert1.z+(n-j)*vert2.z)/n);\n                        _verticesRaw.push(vertex);\n                    }\n                    _segmentsRaw.push([_verticesRaw.length-1, startVertex]);\n                } else {\n                    _segmentsRaw.push([_verticesRaw.length-1, startVertex]);\n                }\n\n                for (let j=1;j<=_verticesRaw.length-startVertex;j++){\n                    if (element.targetAngle) _segmentsRaw[_segmentsRaw.length-j].push(element.targetAngle);\n                    applyTransformation(_verticesRaw[_verticesRaw.length-j], element);\n                }\n            } else {\n                for (let j=0;j<element.points.length-1;j++){\n                    _verticesRaw.push(new THREE.Vector3(element.points[j].x, 0, element.points[j].y));\n                    applyTransformation(_verticesRaw[_verticesRaw.length-1], element);\n\n                    if (j<element.points.length-1) _segmentsRaw.push([_verticesRaw.length-1, _verticesRaw.length]);\n                    else _segmentsRaw.push([_verticesRaw.length-1, _verticesRaw.length-element.points.length]);\n\n                    if (element.targetAngle) _segmentsRaw[_segmentsRaw.length-1].push(element.targetAngle);\n                }\n            }\n        }\n    }\n\n    function parsePolyline(_verticesRaw, _segmentsRaw, $elements){\n        for (var i=0;i<$elements.length;i++){\n            var element = $elements[i];\n            if (typeForStroke(getStroke($(element))) == \"border\") {\n                const vert = new THREE.Vector3(element.points[0].x, 0, element.points[0].y);\n                _verticesRaw.push(vert);\n                let startVertex = _verticesRaw.length-1;\n                for (let j=0;j<element.points.length-1;j++){\n                    const vert1 = new THREE.Vector3(element.points[j].x, 0, element.points[j].y);\n                    const vert2 = new THREE.Vector3(element.points[j+1].x, 0, element.points[j+1].y)\n\n                    let distance = Math.sqrt(Math.pow(vert2.x - vert1.x, 2) + Math.pow(vert2.z - vert1.z, 2));\n                    let n = Math.ceil(distance / globals.vertInt);\n                    if (n > 1) {\n                        for (let k = n - 1; k >= 0; k--) {\n                            _segmentsRaw.push([_verticesRaw.length-1, _verticesRaw.length]);\n                            const vertex = new THREE.Vector3((k*vert1.x+(n-k)*vert2.x)/n, 0, (k*vert1.z+(n-k)*vert2.z)/n);\n                            _verticesRaw.push(vertex);\n                        }\n                    } else {\n                        _segmentsRaw.push([_verticesRaw.length-1, _verticesRaw.length]);\n                        _verticesRaw.push(vert2);\n                    }\n                }\n                for (let j=1;j<=_verticesRaw.length-startVertex;j++){\n                    if (element.targetAngle) _segmentsRaw[_segmentsRaw.length-j].push(element.targetAngle);\n                    applyTransformation(_verticesRaw[_verticesRaw.length-j], element);\n                }\n            } else {\n                for (var j=0;j<element.points.length;j++){\n                    _verticesRaw.push(new THREE.Vector3(element.points[j].x, 0, element.points[j].y));\n                    applyTransformation(_verticesRaw[_verticesRaw.length-1], element);\n                    if (j>0) {\n                        _segmentsRaw.push([_verticesRaw.length-1, _verticesRaw.length-2]);\n                        if (element.targetAngle) _segmentsRaw[_segmentsRaw.length-1].push(element.targetAngle);\n                    }\n                }\n            }\n        }\n    }\n\n    function parseEllipse(_verticesRaw, _segmentsRaw, $elements) {\n        for (var i=0;i<$elements.length;i++){\n            var element = $elements[i];\n\n            const cx = element.cx.baseVal.value;\n            const cy = element.cy.baseVal.value;\n            const rx = element.rx.baseVal.value;\n            const ry = element.ry.baseVal.value;\n\n            const vert1 = new THREE.Vector3(cx+rx, 0, cy+0);\n            const vert2 = new THREE.Vector3(cx+0, 0, cy+ry);\n            const vert3 = new THREE.Vector3(cx-rx, 0, cy+0);\n            const vert4 = new THREE.Vector3(cx+0, 0, cy-ry);\n\n            const m = (4*(Math.sqrt(2)-1)*ry)/3;\n            const n = (4*(Math.sqrt(2)-1)*rx)/3;\n\n            const c1 = new THREE.Vector3(cx+rx, 0, cy+n);\n            const c2 = new THREE.Vector3(cx+m, 0, cy+ry);\n            const c3 = new THREE.Vector3(cx-m, 0, cy+ry);\n            const c4 = new THREE.Vector3(cx-rx, 0, cy+n);\n            const c5 = new THREE.Vector3(cx-rx, 0, cy-n);\n            const c6 = new THREE.Vector3(cx-m, 0, cy-ry);\n            const c7 = new THREE.Vector3(cx+m, 0, cy-ry);\n            const c8 = new THREE.Vector3(cx+rx, 0, cy-n);\n\n            _verticesRaw.push(vert1);\n            const startVertLength = _verticesRaw.length-1;\n            divEllipse(vert1, vert2, c1, c2, _segmentsRaw, _verticesRaw, element);\n            if (typeForStroke(getStroke($(element))) == \"mountain\" || typeForStroke(getStroke($(element))) == \"valley\") {\n                _segmentsRaw.push([\"C\"]);\n            }\n            _segmentsRaw.push([_verticesRaw.length-1, _verticesRaw.length]);\n            _verticesRaw.push(vert2);\n            divEllipse(vert2, vert3, c3, c4, _segmentsRaw, _verticesRaw, element);\n            if (typeForStroke(getStroke($(element))) == \"mountain\" || typeForStroke(getStroke($(element))) == \"valley\") {\n                _segmentsRaw.push([\"C\"]);\n            }\n            _segmentsRaw.push([_verticesRaw.length-1, _verticesRaw.length]);\n            _verticesRaw.push(vert3);\n            divEllipse(vert3, vert4, c5, c6, _segmentsRaw, _verticesRaw, element);\n            if (typeForStroke(getStroke($(element))) == \"mountain\" || typeForStroke(getStroke($(element))) == \"valley\") {\n                _segmentsRaw.push([\"C\"]);\n            }\n            _segmentsRaw.push([_verticesRaw.length-1, _verticesRaw.length]);\n            _verticesRaw.push(vert4);\n            divEllipse(vert4, vert1, c7, c8, _segmentsRaw, _verticesRaw, element);\n            if (typeForStroke(getStroke($(element))) == \"mountain\" || typeForStroke(getStroke($(element))) == \"valley\") {\n                _segmentsRaw.push([\"C\"]);\n            }\n            _segmentsRaw.push([_verticesRaw.length-1, startVertLength]);\n\n            for (let j=1;j<=_verticesRaw.length-startVertLength;j++){\n                if (element.targetAngle) _segmentsRaw[_segmentsRaw.length-j].push(element.targetAngle);\n                applyTransformation(_verticesRaw[_verticesRaw.length-j], element);\n            }\n        }\n    }\n\n    function parseCircle(_verticesRaw, _segmentsRaw, $elements) {\n        for (var i=0;i<$elements.length;i++){\n            var element = $elements[i];\n\n            const cx = element.cx.baseVal.value;\n            const cy = element.cy.baseVal.value;\n            const r = element.r.baseVal.value;\n\n            const vert1 = new THREE.Vector3(cx+r, 0, cy+0);\n            const vert2 = new THREE.Vector3(cx+0, 0, cy+r);\n            const vert3 = new THREE.Vector3(cx-r, 0, cy+0);\n            const vert4 = new THREE.Vector3(cx+0, 0, cy-r);\n\n            const m = (4*(Math.sqrt(2)-1)*r)/3;\n            const n = (4*(Math.sqrt(2)-1)*r)/3;\n\n            const c1 = new THREE.Vector3(cx+r, 0, cy+n);\n            const c2 = new THREE.Vector3(cx+m, 0, cy+r);\n            const c3 = new THREE.Vector3(cx-m, 0, cy+r);\n            const c4 = new THREE.Vector3(cx-r, 0, cy+n);\n            const c5 = new THREE.Vector3(cx-r, 0, cy-n);\n            const c6 = new THREE.Vector3(cx-m, 0, cy-r);\n            const c7 = new THREE.Vector3(cx+m, 0, cy-r);\n            const c8 = new THREE.Vector3(cx+r, 0, cy-n);\n\n            _verticesRaw.push(vert1);\n            const startVertLength = _verticesRaw.length-1;\n            divEllipse(vert1, vert2, c1, c2, _segmentsRaw, _verticesRaw, element);\n            if (typeForStroke(getStroke($(element))) == \"mountain\" || typeForStroke(getStroke($(element))) == \"valley\") {\n                _segmentsRaw.push([\"C\"]);\n            }\n            _segmentsRaw.push([_verticesRaw.length-1, _verticesRaw.length]);\n            _verticesRaw.push(vert2);\n            divEllipse(vert2, vert3, c3, c4, _segmentsRaw, _verticesRaw, element);\n            if (typeForStroke(getStroke($(element))) == \"mountain\" || typeForStroke(getStroke($(element))) == \"valley\") {\n                _segmentsRaw.push([\"C\"]);\n            }\n            _segmentsRaw.push([_verticesRaw.length-1, _verticesRaw.length]);\n            _verticesRaw.push(vert3);\n            divEllipse(vert3, vert4, c5, c6, _segmentsRaw, _verticesRaw, element);\n            if (typeForStroke(getStroke($(element))) == \"mountain\" || typeForStroke(getStroke($(element))) == \"valley\") {\n                _segmentsRaw.push([\"C\"]);\n            }\n            _segmentsRaw.push([_verticesRaw.length-1, _verticesRaw.length]);\n            _verticesRaw.push(vert4);\n            divEllipse(vert4, vert1, c7, c8, _segmentsRaw, _verticesRaw, element);\n            if (typeForStroke(getStroke($(element))) == \"mountain\" || typeForStroke(getStroke($(element))) == \"valley\") {\n                _segmentsRaw.push([\"C\"]);\n            }\n            _segmentsRaw.push([_verticesRaw.length-1, startVertLength]);\n\n            for (let j=1;j<=_verticesRaw.length-startVertLength;j++){\n                if (element.targetAngle) _segmentsRaw[_segmentsRaw.length-j].push(element.targetAngle);\n                applyTransformation(_verticesRaw[_verticesRaw.length-j], element);\n            }\n        }\n    }\n\n    function divEllipse(_startV, _endV, _c1, _c2, _segmentsRaw, _verticesRaw, _element) {\n        let a, b, midV, d;\n        if (_endV.x - _startV.x == 0) {\n            midV = calcMidVC(_startV, _endV, _c1, _c2, 0.5);\n            d = Math.abs(midV.x - _endV.x);\n        } else {\n            a = (_endV.z - _startV.z)/(_endV.x - _startV.x);\n            b = _endV.z - a*_endV.x;\n            midV = calcMidVC(_startV, _endV, _c1, _c2, 0.5);\n            d = Math.abs(a*midV.x + (-1)*midV.z + b)/Math.sqrt(a*a+1);\n        }\n        if (globals.apprCurve < d || globals.vertInt * globals.vertInt < dist2(_startV, _endV)) {\n            const newC1 = new THREE.Vector3((_startV.x+_c1.x)*0.5, 0, (_startV.z+_c1.z)*0.5);\n            const newC2 = new THREE.Vector3((_c1.x+_c2.x)*0.5, 0, (_c1.z+_c2.z)*0.5);\n            const newC3 = new THREE.Vector3((_c2.x+_endV.x)*0.5, 0, (_c2.z+_endV.z)*0.5);\n            const newC4 = new THREE.Vector3((newC1.x+newC2.x)*0.5, 0, (newC1.z+newC2.z)*0.5);\n            const newC5 = new THREE.Vector3((newC2.x+newC3.x)*0.5, 0, (newC2.z+newC3.z)*0.5);\n            divEllipse(_startV, midV, newC1, newC4, _segmentsRaw, _verticesRaw, _element);\n            if (typeForStroke(getStroke($(_element))) == \"mountain\" || typeForStroke(getStroke($(_element))) == \"valley\") {\n                _segmentsRaw.push([\"C\"]);\n            }\n            _segmentsRaw.push([_verticesRaw.length-1, _verticesRaw.length]);\n            let vertex = new THREE.Vector3(midV.x, 0, midV.z);\n            _verticesRaw.push(vertex);\n            divEllipse(midV, _endV, newC5, newC3, _segmentsRaw, _verticesRaw, _element);\n        }\n    }\n\n    function loadSVG(url, isDemo){\n        // Some SVG files start with UTF-8 byte order mark (BOM) EF BB BF,\n        // which encodes in Base64 to 77u/ -- remove this, as it breaks the\n        // XML/SVG parser.\n        url = url.replace(/^(data:image\\/svg\\+xml;base64,)77u\\//, '$1');\n\n        SVGloader.load(url, function(svg){\n\n            var _$svg = $(svg);\n            if (_$svg.find('parsererror').length) {\n                globals.warn(\"Error parsing SVG: \" + svg.innerText);\n                return console.warn(_$svg.find('parsererror')[0]);\n            }\n\n            // Add SVG to page dom to reveal rendered styles (including CSS).\n            $(svg).appendTo('body');\n\n            clearAll();\n\n            //warn of groups\n            // var $groups = _$svg.children(\"g\");\n            // if ($groups.length>0){\n            //     globals.warn(\"Grouped elements found in SVG, these are currently ignored by the app.  \" +\n            //         \"Please ungroup all elements before importing.\");\n            // }\n\n            //format all appropriate svg elements\n            _$svg.find(\"symbol\").remove();\n            _$svg.find(\"defs > :not(style)\").remove();\n            var $paths = _$svg.find(\"path\");\n            var $lines = _$svg.find(\"line\");\n            var $rects = _$svg.find(\"rect\");\n            var $polygons = _$svg.find(\"polygon\");\n            var $polylines = _$svg.find(\"polyline\");\n            var $ellipses = _$svg.find(\"ellipse\");\n            var $circles = _$svg.find(\"circle\");\n            $paths.css({fill:\"none\", 'stroke-dasharray':\"none\"});\n            $lines.css({fill:\"none\", 'stroke-dasharray':\"none\"});\n            $rects.css({fill:\"none\", 'stroke-dasharray':\"none\"});\n            $polygons.css({fill:\"none\", 'stroke-dasharray':\"none\"});\n            $polylines.css({fill:\"none\", 'stroke-dasharray':\"none\"});\n            $ellipses.css({fill:\"none\", 'stroke-dasharray':\"none\"});\n            $circles.css({fill:\"none\", 'stroke-dasharray':\"none\"});\n\n            findType(verticesRaw, bordersRaw, borderFilter, $paths, $lines, $rects, $polygons, $polylines, $ellipses, $circles);\n            findType(verticesRaw, mountainsRaw, mountainFilter, $paths, $lines, $rects, $polygons, $polylines, $ellipses, $circles);\n            findType(verticesRaw, valleysRaw, valleyFilter, $paths, $lines, $rects, $polygons, $polylines, $ellipses, $circles);\n            findType(verticesRaw, cutsRaw, cutFilter, $paths, $lines, $rects, $polygons, $polylines, $ellipses, $circles);\n            findType(verticesRaw, triangulationsRaw, triangulationFilter, $paths, $lines, $rects, $polygons, $polylines, $ellipses, $circles);\n            findType(verticesRaw, hingesRaw, hingeFilter, $paths, $lines, $rects, $polygons, $polylines, $ellipses, $circles);\n\n            if (badColors.length>0){\n                badColors = _.uniq(badColors);\n                var string = \"Some objects found with the following stroke colors:<br/><br/>\";\n                _.each(badColors, function(color){\n                    string += \"<span style='background:\" + color + \"' class='colorSwatch'></span>\" + color + \"<br/>\";\n                });\n                string +=  \"<br/>These objects were ignored.<br/>  Please check that your file is set up correctly, <br/>\" +\n                    \"see <b>File > Design Tips</b> for more information.\";\n                globals.warn(string);\n            }\n\n            // Now that loading is done, remove SVG from page DOM.\n            _$svg.remove();\n\n            //todo revert back to old pattern if bad import\n            var success = parseSVG(verticesRaw, bordersRaw, mountainsRaw, valleysRaw, cutsRaw, triangulationsRaw, hingesRaw);\n            if (!success) return;\n\n            //find max and min vertices\n            var max = new THREE.Vector3(-Infinity,-Infinity,-Infinity);\n            var min = new THREE.Vector3(Infinity,Infinity,Infinity);\n            for (var i=0;i<rawFold.vertices_coords.length;i++){\n                var vertex = new THREE.Vector3(rawFold.vertices_coords[i][0], rawFold.vertices_coords[i][1], rawFold.vertices_coords[i][2]);\n                max.max(vertex);\n                min.min(vertex);\n            }\n            if (min.x === Infinity){\n                if (badColors.length == 0) globals.warn(\"no geometry found in file\");\n                return;\n            }\n            max.sub(min);\n            var border = new THREE.Vector3(0.1, 0, 0.1);\n            var scale = max.x;\n            if (max.z < scale) scale = max.z;\n            if (scale == 0) return;\n\n            var strokeWidth = scale/300;\n            border.multiplyScalar(scale);\n            min.sub(border);\n            max.add(border.multiplyScalar(2));\n            var viewBoxTxt = min.x + \" \" + min.z + \" \" + max.x + \" \" + max.z;\n\n            var ns = 'http://www.w3.org/2000/svg';\n            var svg = document.createElementNS(ns, 'svg');\n            svg.setAttribute('viewBox', viewBoxTxt);\n            for (var i=0;i<rawFold.edges_vertices.length;i++){\n                var line = document.createElementNS(ns, 'line');\n                var edge = rawFold.edges_vertices[i];\n                var vertex = rawFold.vertices_coords[edge[0]];\n                line.setAttribute('stroke', colorForAssignment(rawFold.edges_assignment[i]));\n                line.setAttribute('opacity', opacityForAngle(rawFold.edges_foldAngle[i], rawFold.edges_assignment[i]));\n                line.setAttribute('x1', vertex[0]);\n                line.setAttribute('y1', vertex[2]);\n                vertex = rawFold.vertices_coords[edge[1]];\n                line.setAttribute('x2', vertex[0]);\n                line.setAttribute('y2', vertex[2]);\n                line.setAttribute('stroke-width', strokeWidth);\n                svg.appendChild(line);\n            }\n            $(\"#svgViewer\").html(svg);\n\n            },\n            function(){},\n            function(error){\n                globals.warn(\"Error loading SVG \" + url + \" : \" + error);\n                console.warn(error);\n        });\n    }\n\n    function parseSVG(_verticesRaw, _bordersRaw, _mountainsRaw, _valleysRaw, _cutsRaw, _triangulationsRaw, _hingesRaw){\n\n        _.each(_verticesRaw, function(vertex){\n            foldData.vertices_coords.push([vertex.x, vertex.z]);\n        });\n        _.each(_bordersRaw, function(edge){\n            foldData.edges_vertices.push([edge[0], edge[1]]);\n            foldData.edges_assignment.push(\"B\");\n            foldData.edges_foldAngle.push(null);\n        });\n        for (let index = 0; index < _mountainsRaw.length; index++) {\n            const edge = _mountainsRaw[index];\n            if (edge[0] == \"C\") {\n                const curvedEdge = _mountainsRaw[index+1];\n                foldData.edges_vertices.push([curvedEdge[0], curvedEdge[1]]);\n                foldData.edges_assignment.push(\"CM\");\n                foldData.edges_foldAngle.push(curvedEdge[2]);\n                _mountainsRaw.splice(index, 1);\n            } else {\n                foldData.edges_vertices.push([edge[0], edge[1]]);\n                foldData.edges_assignment.push(\"M\");\n                foldData.edges_foldAngle.push(edge[2]);\n            }\n        }\n        for (let index = 0; index < _valleysRaw.length; index++) {\n            const edge = _valleysRaw[index];\n            if (edge[0] == \"C\") {\n                const curvedEdge = _valleysRaw[index+1];\n                foldData.edges_vertices.push([curvedEdge[0], curvedEdge[1]]);\n                foldData.edges_assignment.push(\"CV\");\n                foldData.edges_foldAngle.push(curvedEdge[2]);\n                _valleysRaw.splice(index, 1);\n            } else {\n                foldData.edges_vertices.push([edge[0], edge[1]]);\n                foldData.edges_assignment.push(\"V\");\n                foldData.edges_foldAngle.push(edge[2]);\n            }\n        }\n        _.each(_triangulationsRaw, function(edge){\n            foldData.edges_vertices.push([edge[0], edge[1]]);\n            foldData.edges_assignment.push(\"F\");\n            foldData.edges_foldAngle.push(0);\n        });\n        _.each(_hingesRaw, function(edge){\n            foldData.edges_vertices.push([edge[0], edge[1]]);\n            foldData.edges_assignment.push(\"U\");\n            foldData.edges_foldAngle.push(null);\n        });\n        _.each(_cutsRaw, function(edge){\n            foldData.edges_vertices.push([edge[0], edge[1]]);\n            foldData.edges_assignment.push(\"C\");\n            foldData.edges_foldAngle.push(null);\n        });\n\n        if (foldData.vertices_coords.length == 0 || foldData.edges_vertices.length == 0){\n            globals.warn(\"No valid geometry found in SVG, be sure to ungroup all and remove all clipping masks.\");\n            return false;\n        }\n\n        // FOLD.filter.collapseNearbyVertices\n        // FOLD.filter.removeLoopEdges\n        // FOLD.filter.removeDuplicateEdges_vertices\n        // findIntersections\n        // FOLD.convert.edges_vertices_to_vertices_vertices_unsorted\n        // removeStrayVertices\n        // FOLD.convert.sort_vertices_vertices\n        // FOLD.convert.vertices_vertices_to_faces_vertices\n        // edgesVerticesToVerticesEdges\n        // removeBorderFaces\n\n        foldData = FOLD.filter.collapseNearbyVertices(foldData, globals.vertTol);\n        foldData = FOLD.filter.removeLoopEdges(foldData);//remove edges that points to same vertex\n        foldData = FOLD.filter.removeDuplicateEdges_vertices(foldData);//remove duplicate edges\n        // foldData = FOLD.filter.subdivideCrossingEdges_vertices(foldData, globals.vertTol);//find intersections and add vertices/edges\n\n        foldData = findIntersections(foldData, globals.vertTol);\n        //cleanup after intersection operation\n        foldData = FOLD.filter.collapseNearbyVertices(foldData, globals.vertTol);\n        foldData = FOLD.filter.removeLoopEdges(foldData);//remove edges that points to same vertex\n        foldData = FOLD.filter.removeDuplicateEdges_vertices(foldData);//remove duplicate edges\n\n        foldData = FOLD.convert.edges_vertices_to_vertices_vertices_unsorted(foldData);\n        foldData = removeStrayVertices(foldData);//delete stray anchors\n        // foldData = removeRedundantVertices(foldData, 0.01);//remove vertices that split edge\n\n        foldData.vertices_vertices = FOLD.convert.sort_vertices_vertices(foldData);\n        foldData = FOLD.convert.vertices_vertices_to_faces_vertices(foldData);\n\n        foldData = edgesVerticesToVerticesEdges(foldData);\n        foldData = removeBorderFaces(foldData);//expose holes surrounded by all border edges\n\n        foldData = reverseFaceOrder(foldData);//set faces to counter clockwise\n\n        return processFold(foldData);\n    }\n\n    function processFold(fold, returnCreaseParams){\n\n        //add missing coordinates to make 3d, mapping (x,y) -> (x,0,z)\n        //This is against the FOLD spec which says that, beyond two dimensions,\n        //\"all unspecified coordinates are implicitly zero\"...\n        var is2d = true;\n        for (var i=0;i<fold.vertices_coords.length;i++){\n            var vertex = fold.vertices_coords[i];\n            if (vertex.length === 2) {\n                fold.vertices_coords[i] = [vertex[0], 0, vertex[1]];\n            } else {\n                is2d = false;\n            }\n        }\n\n        //save pre-triangulated faces for later saveFOLD()\n        rawFold = JSON.parse(JSON.stringify(fold));\n\n        var cuts = FOLD.filter.cutEdges(fold);\n        if (cuts.length>0) {\n            fold = splitCuts(fold);\n            fold = FOLD.convert.edges_vertices_to_vertices_vertices_unsorted(fold);\n            fold = removeRedundantVertices(fold, 0.01);//remove vertices that split edge\n        }\n        delete fold.vertices_vertices;\n        delete fold.vertices_edges;\n\n        foldData = triangulatePolys(fold);\n        \n        for (let index = 0; index < foldData.edges_assignment.length; index++) {\n            if (foldData.edges_assignment[index] == \"CM\") {\n                foldData.edges_assignment[index] = \"M\";\n            } else if (foldData.edges_assignment[index] == \"CV\") {\n                foldData.edges_assignment[index] = \"V\";\n            }\n        }\n\n        mountains = FOLD.filter.mountainEdges(foldData);\n        valleys = FOLD.filter.valleyEdges(foldData);\n        borders = FOLD.filter.boundaryEdges(foldData);\n        hinges = FOLD.filter.unassignedEdges(foldData);\n        triangulations = FOLD.filter.flatEdges(foldData);\n\n        $(\"#numMtns\").html(\"(\" + mountains.length + \")\");\n        $(\"#numValleys\").html(\"(\" + valleys.length + \")\");\n        $(\"#numFacets\").html(\"(\" + triangulations.length + \")\");\n        $(\"#numBoundary\").html(\"(\" + borders.length + \")\");\n        $(\"#numPassive\").html(\"(\" + hinges.length + \")\");\n\n        var allCreaseParams = getFacesAndVerticesForEdges(foldData);//todo precompute vertices_faces\n        if (returnCreaseParams) return allCreaseParams;\n\n        globals.model.buildModel(foldData, allCreaseParams);\n        return foldData;\n    }\n\n    function reverseFaceOrder(fold){\n        for (var i=0;i<fold.faces_vertices.length;i++){\n            fold.faces_vertices[i].reverse();\n        }\n        return fold;\n    }\n\n    function edgesVerticesToVerticesEdges(fold){\n        var verticesEdges = [];\n        for (var i=0;i<fold.vertices_coords.length;i++){\n            verticesEdges.push([]);\n        }\n        for (var i=0;i<fold.edges_vertices.length;i++){\n            var edge = fold.edges_vertices[i];\n            verticesEdges[edge[0]].push(i);\n            verticesEdges[edge[1]].push(i);\n        }\n        fold.vertices_edges = verticesEdges;\n        return fold;\n    }\n\n    function facesVerticesToVerticesFaces(fold){\n        var verticesFaces = [];\n        for (var i=0;i<fold.vertices_coords.length;i++){\n            verticesFaces.push([]);\n        }\n        for (var i=0;i<fold.faces_vertices.length;i++){\n            var face = fold.faces_vertices[i];\n            for (var j=0;j<face.length;j++){\n                verticesFaces[face[j]].push(i);\n            }\n        }\n        fold.vertices_faces = verticesFaces;\n        return fold;\n    }\n\n    function sortVerticesEdges(fold){\n        for (var i=0;i<fold.vertices_vertices.length;i++){\n            var verticesVertices = fold.vertices_vertices[i];\n            var verticesEdges = fold.vertices_edges[i];\n            var sortedVerticesEdges = [];\n            for (var j=0;j<verticesVertices.length;j++){\n                var index = -1;\n                for (var k=0;k<verticesEdges.length;k++){\n                    var edgeIndex = verticesEdges[k];\n                    var edge = fold.edges_vertices[edgeIndex];\n                    if (edge.indexOf(verticesVertices[j])>=0){\n                        index = edgeIndex;\n                        break;\n                    }\n                }\n                if (index<0) console.warn(\"no matching edge found, fix this\");\n                sortedVerticesEdges.push(index);\n            }\n            fold.vertices_edges[i] = sortedVerticesEdges;\n        }\n        return fold;\n    }\n\n    function splitCuts(fold){\n        fold = sortVerticesEdges(fold);\n        fold = facesVerticesToVerticesFaces(fold);\n        //go around each vertex and split cut in clockwise order\n        for (var i=0;i<fold.vertices_edges.length;i++){\n            var groups = [[]];\n            var groupIndex = 0;\n            var verticesEdges = fold.vertices_edges[i];\n            var verticesFaces = fold.vertices_faces[i];\n            for (var j=0;j<verticesEdges.length;j++){\n                var edgeIndex = verticesEdges[j];\n                var assignment = fold.edges_assignment[edgeIndex];\n                groups[groupIndex].push(edgeIndex);\n                if (assignment == \"C\"){\n                    //split cut edge into two boundary edges\n                    groups.push([fold.edges_vertices.length]);\n                    groupIndex++;\n                    var newEdgeIndex = fold.edges_vertices.length;\n                    var edge = fold.edges_vertices[edgeIndex];\n                    fold.edges_vertices.push([edge[0], edge[1]]);\n                    fold.edges_assignment[edgeIndex] = \"B\";\n                    fold.edges_foldAngle.push(null);\n                    fold.edges_assignment.push(\"B\");\n                    //add new boundary edge to other vertex\n                    var otherVertex = edge[0];\n                    if (otherVertex == i) otherVertex = edge[1];\n                    var otherVertexEdges = fold.vertices_edges[otherVertex];\n                    var otherVertexEdgeIndex = otherVertexEdges.indexOf(edgeIndex);\n                    otherVertexEdges.splice(otherVertexEdgeIndex, 0, newEdgeIndex);\n                } else if (assignment == \"B\"){\n                    if (j==0 && verticesEdges.length>1){\n                        //check if next edge is also boundary\n                        var nextEdgeIndex = verticesEdges[1];\n                        if (fold.edges_assignment[nextEdgeIndex] == \"B\"){\n                            //check if this edge shares a face with the next\n                            var edge = fold.edges_vertices[edgeIndex];\n                            var otherVertex = edge[0];\n                            if (otherVertex == i) otherVertex = edge[1];\n                            var nextEdge = fold.edges_vertices[nextEdgeIndex];\n                            var nextVertex  = nextEdge[0];\n                            if (nextVertex == i) nextVertex = nextEdge[1];\n                            if (connectedByFace(fold, fold.vertices_faces[i], otherVertex, nextVertex)){\n                            } else {\n                                groups.push([]);\n                                groupIndex++;\n                            }\n                        }\n                    } else if (groups[groupIndex].length>1) {\n                        groups.push([]);\n                        groupIndex++;\n                    }\n                }\n            }\n            if (groups.length <= 1) continue;\n            for (var k=groups[groupIndex].length-1;k>=0;k--){//put remainder of last group in first group\n                groups[0].unshift(groups[groupIndex][k]);\n            }\n            groups.pop();\n            for (var j=1;j<groups.length;j++){//for each extra group, assign new vertex\n                var currentVertex = fold.vertices_coords[i];\n                var vertIndex = fold.vertices_coords.length;\n                fold.vertices_coords.push(currentVertex.slice());//make a copy\n                var connectingIndices = [];\n                for (var k=0;k<groups[j].length;k++){//update edges_vertices\n                    var edgeIndex = groups[j][k];\n                    var edge = fold.edges_vertices[edgeIndex];\n                    var otherIndex = edge[0];\n                    if (edge[0] == i) {\n                        edge[0] = vertIndex;\n                        otherIndex = edge[1];\n                    } else edge[1] = vertIndex;\n                    connectingIndices.push(otherIndex);\n                }\n                if (connectingIndices.length<2) {\n                    console.warn(\"problem here\");\n                } else {\n                    for (var k=1;k<connectingIndices.length;k++){//update faces_vertices\n                        //i, k-1, k\n                        var thisConnectingVertIndex = connectingIndices[k];\n                        var previousConnectingVertIndex = connectingIndices[k-1];\n                        var found = false;\n                        for (var a=0;a<verticesFaces.length;a++){\n                            var face = fold.faces_vertices[verticesFaces[a]];\n                            var index1 = face.indexOf(thisConnectingVertIndex);\n                            var index2 = face.indexOf(previousConnectingVertIndex);\n                            var index3 = face.indexOf(i);\n                            if (index1 >= 0 && index2 >= 0 && index3>=0 &&\n                                (Math.abs(index1-index3) === 1 || Math.abs(index1-index3) === face.length-1) &&\n                                (Math.abs(index2-index3) === 1 || Math.abs(index2-index3) === face.length-1)){\n                                found = true;\n                                face[index3] = vertIndex;\n                                break;\n                            }\n                        }\n                        if (!found) console.warn(\"problem here\");\n                    }\n                }\n            }\n        }\n        //these are all incorrect now\n        delete fold.vertices_faces;\n        delete fold.vertices_edges;\n        delete fold.vertices_vertices;\n        return fold;\n    }\n\n    function connectedByFace(fold, verticesFaces, vert1, vert2){\n        if (vert1 == vert2) return false;\n        for (var a=0;a<verticesFaces.length;a++){\n            var face = fold.faces_vertices[verticesFaces[a]];\n            if (face.indexOf(vert1) >= 0 && face.indexOf(vert2) >= 0){\n                return true;\n            }\n        }\n        return false;\n    }\n\n    function removeBorderFaces(fold){\n        for (var i=fold.faces_vertices.length-1;i>=0;i--){\n            var face = fold.faces_vertices[i];\n            var allBorder = true;\n\n            for (var j=0;j<face.length;j++){\n                var vertexIndex = face[j];\n                var nextIndex = j+1;\n                if (nextIndex >= face.length) nextIndex = 0;\n                var nextVertexIndex = face[nextIndex];\n                var connectingEdgeFound = false;\n                for (var k=0;k<fold.vertices_edges[vertexIndex].length;k++){\n                    var edgeIndex = fold.vertices_edges[vertexIndex][k];\n                    var edge = fold.edges_vertices[edgeIndex];\n                    if ((edge[0] == vertexIndex && edge[1] == nextVertexIndex) ||\n                        (edge[1] == vertexIndex && edge[0] == nextVertexIndex)){\n                        connectingEdgeFound = true;\n                        var assignment = fold.edges_assignment[edgeIndex];\n                        if (assignment != \"B\"){\n                            allBorder = false;\n                            break;\n                        }\n                    }\n                }\n                if (!connectingEdgeFound) console.warn(\"no connecting edge found on face\");\n                if (!allBorder) break;\n            }\n            if (allBorder) fold.faces_vertices.splice(i,1);\n        }\n        return fold;\n    }\n\n    function getFacesAndVerticesForEdges(fold){\n        var allCreaseParams = [];//face1Ind, vertInd, face2Ind, ver2Ind, edgeInd, angle\n        var faces = fold.faces_vertices;\n        for (var i=0;i<fold.edges_vertices.length;i++){\n            var assignment = fold.edges_assignment[i];\n            if (assignment !== \"M\" && assignment !== \"V\" && assignment !== \"F\") continue;\n            var edge = fold.edges_vertices[i];\n            var v1 = edge[0];\n            var v2 = edge[1];\n            var creaseParams = [];\n            for (var j=0;j<faces.length;j++){\n                var face = faces[j];\n                var faceVerts = [face[0], face[1], face[2]];\n                var v1Index = faceVerts.indexOf(v1);\n                if (v1Index>=0){\n                    var v2Index = faceVerts.indexOf(v2);\n                    if (v2Index>=0){\n                        creaseParams.push(j);\n                        if (v2Index>v1Index) {\n                            faceVerts.splice(v2Index, 1);\n                            faceVerts.splice(v1Index, 1);\n                        } else {\n                            faceVerts.splice(v1Index, 1);\n                            faceVerts.splice(v2Index, 1);\n                        }\n                        creaseParams.push(faceVerts[0]);\n                        if (creaseParams.length == 4) {\n\n                            if (v2Index-v1Index == 1 || v2Index-v1Index == -2) {\n                                creaseParams = [creaseParams[2], creaseParams[3], creaseParams[0], creaseParams[1]];\n                            }\n\n                            creaseParams.push(i);\n                            var angle = fold.edges_foldAngle[i];\n                            creaseParams.push(angle);\n                            allCreaseParams.push(creaseParams);\n                            break;\n                        }\n                    }\n                }\n            }\n        }\n        return allCreaseParams;\n    }\n\n    function removeRedundantVertices(fold, epsilon){\n\n        var old2new = [];\n        var numRedundant = 0;\n        var newIndex = 0;\n        for (var i=0;i<fold.vertices_vertices.length;i++){\n            var vertex_vertices = fold.vertices_vertices[i];\n            if (vertex_vertices.length != 2) {\n                old2new.push(newIndex++);\n                continue;\n            }\n            var vertex_coord = fold.vertices_coords[i];\n            var neighbor0 = fold.vertices_coords[vertex_vertices[0]];\n            var neighbor1 = fold.vertices_coords[vertex_vertices[1]];\n            var threeD = vertex_coord.length == 3;\n            var vec0 = [neighbor0[0]-vertex_coord[0], neighbor0[1]-vertex_coord[1]];\n            var vec1 = [neighbor1[0]-vertex_coord[0], neighbor1[1]-vertex_coord[1]];\n            var magSqVec0 = vec0[0]*vec0[0]+vec0[1]*vec0[1];\n            var magSqVec1 = vec1[0]*vec1[0]+vec1[1]*vec1[1];\n            var dot = vec0[0]*vec1[0]+vec0[1]*vec1[1];\n            if (threeD){\n                vec0.push(neighbor0[2]-vertex_coord[2]);\n                vec1.push(neighbor1[2]-vertex_coord[2]);\n                magSqVec0 += vec0[2]*vec0[2];\n                magSqVec1 += vec1[2]*vec1[2];\n                dot += vec0[2]*vec1[2];\n            }\n            dot /= Math.sqrt(magSqVec0*magSqVec1);\n            if (Math.abs(dot + 1.0)<epsilon){\n                var merged = mergeEdge(fold, vertex_vertices[0], i, vertex_vertices[1]);\n                if (merged){\n                    numRedundant++;\n                    old2new.push(null);\n                } else {\n                    old2new.push(newIndex++);\n                    continue;\n                }\n            } else old2new.push(newIndex++);\n        }\n        if (numRedundant == 0) return fold;\n        console.warn(numRedundant + \" redundant vertices found\");\n        fold = FOLD.filter.remapField(fold, 'vertices', old2new);\n        if (fold.faces_vertices){\n            for (var i=0;i<fold.faces_vertices.length;i++){\n                var face = fold.faces_vertices[i];\n                for (var j=face.length-1;j>=0;j--){\n                    if (face[j] === null) face.splice(j, 1);\n                }\n            }\n        }\n        return fold;\n    }\n\n    function mergeEdge(fold, v1, v2, v3){//v2 is center vertex\n        var angleAvg = 0;\n        var avgSum = 0;\n        var angles = [];\n        var edgeAssignment = null;\n        var edgeIndices = [];\n        for (var i=fold.edges_vertices.length-1;i>=0;i--){\n            var edge = fold.edges_vertices[i];\n            if (edge.indexOf(v2)>=0 && (edge.indexOf(v1) >= 0 || edge.indexOf(v3) >= 0)){\n                if (edgeAssignment === null) edgeAssignment = fold.edges_assignment[i];\n                else if (edgeAssignment != fold.edges_assignment[i]) {\n                    console.log(edgeAssignment, fold.edges_assignment[i]);\n                    console.warn(\"different edge assignments\");\n                    return false;\n                }\n                var angle = fold.edges_foldAngle[i];\n                if (isNaN(angle)) console.log(i);\n                angles.push(angle);\n                if (angle) {\n                    angleAvg += angle;\n                    avgSum++;\n                }\n                edgeIndices.push(i);//larger index in front\n            }\n        }\n        if (angles[0] != angles[1]){\n            console.warn(\"incompatible angles: \" + JSON.stringify(angles));\n        }\n        for (var i=0;i<edgeIndices.length;i++){\n            var index = edgeIndices[i];\n            fold.edges_vertices.splice(index, 1);\n            fold.edges_assignment.splice(index, 1);\n            fold.edges_foldAngle.splice(index, 1);\n        }\n        fold.edges_vertices.push([v1, v3]);\n        fold.edges_assignment.push(edgeAssignment);\n        if (avgSum > 0) fold.edges_foldAngle.push(angleAvg/avgSum);\n        else fold.edges_foldAngle.push(null);\n        var index = fold.vertices_vertices[v1].indexOf(v2);\n        fold.vertices_vertices[v1].splice(index, 1);\n        fold.vertices_vertices[v1].push(v3);\n        index = fold.vertices_vertices[v3].indexOf(v2);\n        fold.vertices_vertices[v3].splice(index, 1);\n        fold.vertices_vertices[v3].push(v1);\n        return true;\n    }\n\n    function removeStrayVertices(fold){\n        if (!fold.vertices_vertices) {\n            console.warn(\"compute vertices_vertices first\");\n            fold = FOLD.convert.edges_vertices_to_vertices_vertices_unsorted(fold);\n        }\n        var numStrays = 0;\n        var old2new = [];\n        var newIndex = 0;\n        for (var i=0;i<fold.vertices_vertices.length;i++){\n            if (fold.vertices_vertices[i] === undefined || fold.vertices_vertices[i].length==0) {\n                numStrays++;\n                old2new.push(null);\n            } else old2new.push(newIndex++);\n        }\n        if (numStrays == 0) return fold;\n        console.warn(numStrays+ \" stray vertices found\");\n        return FOLD.filter.remapField(fold, 'vertices', old2new);\n    }\n\n    // class for halfedge\n    class Vertex {\n        constructor(point, id) {\n            this._point = point;\n            this._halfedge = null;\n            this._id = id;\n        }\n\n        get point() {\n            return this._point;\n        }\n        get halfedge() {\n            return this._halfedge;\n        }\n        get id() {\n            return this._id;\n        }\n        set point(point) {\n            this._point = point;\n        }\n        set halfedge(halfedge) {\n            this._halfedge = halfedge;\n        }\n    }\n\n    class Halfedge {\n        constructor(vertex) {\n            this._vertex = vertex;\n            this._face = null;\n            this._pair = null;\n            this._next = null;\n            this._prev = null;\n            this._isCurve = false;\n            this._edge = null;\n        }\n        \n        get vertex() {\n            return this._vertex;\n        }\n        get face() {\n            return this._face;\n        }\n        get pair() {\n            return this._pair;\n        }\n        get next() {\n            return this._next;\n        }\n        get prev() {\n            return this._prev;\n        }\n        get isCurve() {\n            return this._isCurve;\n        }\n        get edge() {\n            return this._edge;\n        }\n        set vertex(vertex) {\n            this._vertex = vertex;\n        }\n        set face(face) {\n            this._face = face;\n        }\n        set pair(pair) {\n            this._pair = pair;\n        }\n        set next(next) {\n            this._next = next;\n        }\n        set prev(prev) {\n            this._prev = prev;\n        }\n        set isCurve(isCurve) {\n            this._isCurve = isCurve;\n        }\n        set edge(edge) {\n            this._edge = edge;\n        }\n    }\n\n    class Face {\n        constructor(halfedge) {\n            this._halfedge = halfedge;\n        }\n\n        get halfedge() {\n            return this._halfedge;\n        }\n        set halfedge(halfedge) {\n            this._halfedge = halfedge;\n        }\n    }\n\n    class Edge {\n        constructor(halfedge) {\n            this._start = halfedge.vertex;\n            this._end = halfedge.next.vertex;\n            this._left = halfedge;\n            this._right = null;\n        }\n\n        get start() {\n            return this._start;\n        }\n        get end() {\n            return this._end;\n        }\n        get left() {\n            return this._left;\n        }\n        get right() {\n            return this._right;\n        }\n\n        set start(start) {\n            this._start = start;\n        }\n        set end(end) {\n            this._end = end;\n        }\n        set left(left) {\n            this._left = left;\n        }\n        set right(right) {\n            this._right = right;\n        }\n    }\n\n    class Model {\n        constructor(edges, assignments) {\n            this._faces = [];\n            this._vertices = [];\n            this._edges = edges;\n            this._assignments = assignments;\n            this._virtices_edges;\n            this._triangulated_edges = [];\n        }\n\n        setHalfedgePair(halfedge) {\n            for (let i = 0; i < this._faces.length; i++) {\n                let halfedgeInFace = this._faces[i].halfedge;\n                do {\n                    if (halfedge.vertex == halfedgeInFace.next.vertex && halfedge.next.vertex == halfedgeInFace.vertex) {\n                        halfedge.pair = halfedgeInFace;\n                        halfedgeInFace.pair = halfedge;\n                        return;\n                    }\n                    halfedgeInFace = halfedgeInFace.next;\n                } while (halfedgeInFace != this._faces[i].halfedge);\n            }\n        }\n\n        setHalfedgePair2(halfedge0, halfedge1) {\n            halfedge0.pair = halfedge1;\n            halfedge0.isCurve = false;\n            halfedge1.pair = halfedge0;\n            halfedge1.isCurve = false;\n        }\n\n        checkIsCurved(halfedge) {\n            for (let i = 0; i < this._edges.length; i++) {\n                if (this._edges[i][0] == halfedge.vertex.id) {\n                    if (this._edges[i][1] == halfedge.next.vertex.id) {\n                        if (this._assignments[i] == 'CM' || this._assignments[i] == 'CV') {\n                            halfedge.isCurve = true;\n                        }\n                    }\n                } else if (this._edges[i][1] == halfedge.vertex.id) {\n                    if (this._edges[i][0] == halfedge.next.vertex.id) {\n                        if (this._assignments[i] == 'CM' || this._assignments[i] == 'CV') {\n                            halfedge.isCurve = true;\n                        }\n                    }\n                }\n            }\n        }\n\n        addFace(vertex0, vertex1, vertex2) {\n            let veMap = this._vertices_edges;\n            let halfedge0 = new Halfedge(vertex0);\n            if (vertex0.halfedge == null) {\n                vertex0.halfedge = halfedge0;\n            }\n            let halfedge1 = new Halfedge(vertex1);\n            if (vertex1.halfedge == null) {\n                vertex1.halfedge = halfedge1;\n            }\n            let halfedge2 = new Halfedge(vertex2);\n            if (vertex2.halfedge == null) {\n                vertex2.halfedge = halfedge2;\n            }\n            \n            halfedge0.next = halfedge1;\n            halfedge0.prev = halfedge2;\n            halfedge1.next = halfedge2;\n            halfedge1.prev = halfedge0;\n            halfedge2.next = halfedge0;\n            halfedge2.prev = halfedge1;\n\n            let face = new Face(halfedge0);\n            this._faces.push(face);\n            halfedge0.face = face;\n            halfedge1.face = face;\n            halfedge2.face = face;\n            this.setHalfedgePair(halfedge0);\n            this.setHalfedgePair(halfedge1);\n            this.setHalfedgePair(halfedge2);\n\n            if (halfedge0.pair == null) {\n                let edge = new Edge(halfedge0);\n                this._triangulated_edges.push(edge);\n                halfedge0.edge = edge;\n            } else {\n                let edge = halfedge0.pair.edge;\n                edge.right = halfedge0;\n                halfedge0.edge = edge;\n            }\n\n            if (halfedge1.pair == null) {\n                let edge = new Edge(halfedge1);\n                this._triangulated_edges.push(edge);\n                halfedge1.edge = edge;\n            } else {\n                let edge = halfedge1.pair.edge;\n                edge.right = halfedge1;\n                halfedge1.edge = edge;\n            }\n\n            if (halfedge2.pair == null) {\n                let edge = new Edge(halfedge2);\n                this._triangulated_edges.push(edge);\n                halfedge2.edge = edge;\n            } else {\n                let edge = halfedge2.pair.edge;\n                edge.right = halfedge2;\n                halfedge2.edge = edge;\n            }\n\n            if (halfedge0.pair == null) {\n                this.checkIsCurved(halfedge0);\n            } else {\n                if (veMap.has(vertex0.id)) {\n                    veMap.set(vertex0.id, veMap.get(vertex0.id)+1);\n                } else {\n                    veMap.set(vertex0.id, 1);\n                }\n                if (veMap.has(vertex1.id)) {\n                    veMap.set(vertex1.id, veMap.get(vertex1.id)+1);\n                } else {\n                    veMap.set(vertex1.id, 1);\n                }\n            }\n\n            if (halfedge1.pair == null) {\n                this.checkIsCurved(halfedge1);\n            } else {\n                if (veMap.has(vertex1.id)) {\n                    veMap.set(vertex1.id, veMap.get(vertex1.id)+1);\n                } else {\n                    veMap.set(vertex1.id, 1);\n                }\n                if (veMap.has(vertex2.id)) {\n                    veMap.set(vertex2.id, veMap.get(vertex2.id)+1);\n                } else {\n                    veMap.set(vertex2.id, 1);\n                }\n            }\n\n            if (halfedge2.pair == null) {\n                this.checkIsCurved(halfedge2);\n            } else {\n                if (veMap.has(vertex0.id)) {\n                    veMap.set(vertex0.id, veMap.get(vertex0.id)+1);\n                } else {\n                    veMap.set(vertex0.id, 1);\n                }\n                if (veMap.has(vertex2.id)) {\n                    veMap.set(vertex2.id, veMap.get(vertex2.id)+1);\n                } else {\n                    veMap.set(vertex2.id, 1);\n                }\n            }\n        }\n\n        cross(halfedge) {\n            let vertexA = halfedge.vertex;\n            let vertexB = halfedge.next.vertex;\n            let vertexC = halfedge.prev.vertex;\n            let vertexD = halfedge.pair.prev.vertex;\n            let x1 = vertexA.point[0];\n            let y1 = vertexA.point[1];\n            let x2 = vertexB.point[0];\n            let y2 = vertexB.point[1];\n            let x3 = vertexC.point[0];\n            let y3 = vertexC.point[1];\n            let x4 = vertexD.point[0];\n            let y4 = vertexD.point[1];\n\n            let ta = (x3-x4)*(y1-y3)+(y3-y4)*(x3-x1);\n            let tb = (x3-x4)*(y2-y3)+(y3-y4)*(x3-x2);\n            let tc = (x1-x2)*(y3-y1)+(y1-y2)*(x1-x3);\n            let td = (x1-x2)*(y4-y1)+(y1-y2)*(x1-x4);\n\n            return (tc*td < 0) && (ta*tb < 0);\n        }\n\n        angle(a, b, c) {\n            let X1 = b[0] - a[0];\n            let Y1 = b[1] - a[1];\n            let X2 = c[0] - a[0];\n            let Y2 = c[1] - a[1];\n\n            let lengthX = Math.pow(X1*X1+Y1*Y1, 0.5);\n            let lengthY = Math.pow(X2*X2+Y2*Y2, 0.5);\n            let cos = (X1*X2+Y1*Y2) / (lengthX*lengthY);\n            let theta = Math.acos(cos);\n            return theta;\n        }\n\n        cHalfedge1(tmpHalfedge) {\n            if (tmpHalfedge.next.isCurve) {\n                return tmpHalfedge.next;\n            } else {\n                if (tmpHalfedge.next.pair != null) {\n                    return this.cHalfedge1(tmpHalfedge.next.pair);\n                } else {\n                    return false;\n                }\n            }\n        }\n\n        cHalfedge2(tmpHalfedge) {\n            if (tmpHalfedge.prev.isCurve) {\n                return tmpHalfedge.prev;\n            } else {\n                if (tmpHalfedge.prev.pair != null) {\n                    return this.cHalfedge2(tmpHalfedge.prev.pair);\n                } else {\n                    return false;\n                }\n            }\n        }\n\n        cHalfedge3(tmpHalfedge) {\n            if (tmpHalfedge.prev.isCurve) {\n                return tmpHalfedge.prev;\n            } else {\n                if (tmpHalfedge.prev.pair != null) {\n                    return this.cHalfedge3(tmpHalfedge.prev.pair);\n                } else {\n                    return false;\n                }\n            }\n        }\n\n        cHalfedge4(tmpHalfedge) {\n            if (tmpHalfedge.next.isCurve) {\n                return tmpHalfedge.next;\n            } else {\n                if (tmpHalfedge.next.pair != null) {\n                    return this.cHalfedge4(tmpHalfedge.next.pair);\n                } else {\n                    return false;\n                }\n            }\n        }\n\n        cHalfedge5(tmpHalfedge) {\n            if (tmpHalfedge.isCurve) {\n                return tmpHalfedge;\n            } else {\n                if (tmpHalfedge.pair != null) {\n                    return this.cHalfedge5(tmpHalfedge.pair.next);\n                } else {\n                    return false;\n                }\n            }\n        }\n\n        cHalfedge6(tmpHalfedge) {\n            if (tmpHalfedge.isCurve) {\n                return tmpHalfedge;\n            } else {\n                if (tmpHalfedge.pair != null) {\n                    return this.cHalfedge6(tmpHalfedge.pair.prev);\n                } else {\n                    return false;\n                }\n            }\n        }\n\n        cHalfedge7(tmpHalfedge) {\n            if (tmpHalfedge.isCurve) {\n                return tmpHalfedge;\n            } else {\n                if (tmpHalfedge.pair != null) {\n                    return this.cHalfedge7(tmpHalfedge.pair.prev);\n                } else {\n                    return false;\n                }\n            }\n        }\n        cHalfedge8(tmpHalfedge) {\n            if (tmpHalfedge.isCurve) {\n                return tmpHalfedge;\n            } else {\n                if (tmpHalfedge.pair != null) {\n                    return this.cHalfedge8(tmpHalfedge.pair.next);\n                } else {\n                    return false;\n                }\n            }\n        }\n\n        orthogonal(halfedge) {\n            let cHalfedge1 = null;\n            let cHalfedge2 = null; \n            let cHalfedge3 = null;\n            let cHalfedge4 = null;\n            let cHalfedge5 = null;\n            let cHalfedge6 = null; \n            let cHalfedge7 = null;\n            let cHalfedge8 = null;\n\n            let angleA1 = 0;\n            let angleA2 = 0;\n            let angleB1 = 0;\n            let angleB2 = 0;\n            let angleC1 = 0;\n            let angleC2 = 0;\n            let angleD1 = 0;\n            let angleD2 = 0;\n\n            let diffAngleA = null;\n            let diffAngleB = null;\n            let diffAngleC = null;\n            let diffAngleD = null;\n\n            cHalfedge1 = this.cHalfedge1(halfedge.pair);\n            cHalfedge2 = this.cHalfedge2(halfedge);\n            cHalfedge3 = this.cHalfedge3(halfedge.pair);\n            cHalfedge4 = this.cHalfedge4(halfedge);\n            cHalfedge5 = this.cHalfedge5(halfedge.pair.prev);\n            cHalfedge6 = this.cHalfedge6(halfedge.pair.next);\n            cHalfedge7 = this.cHalfedge7(halfedge.next);\n            cHalfedge8 = this.cHalfedge8(halfedge.prev);\n\n            if (cHalfedge1) {\n                angleA1 = this.angle(halfedge.vertex.point, cHalfedge1.next.vertex.point, halfedge.next.vertex.point);\n            }\n            if (cHalfedge2) {\n                angleA2 = this.angle(halfedge.vertex.point, cHalfedge2.vertex.point, halfedge.next.vertex.point);\n            }\n            if (cHalfedge1 && cHalfedge2) {\n                diffAngleA = Math.pow(angleA1-angleA2, 2);\n            }\n            if (cHalfedge3) {\n                angleB1 = this.angle(halfedge.next.vertex.point, cHalfedge3.vertex.point, halfedge.vertex.point);\n            }\n            if (cHalfedge4) {\n                angleB2 = this.angle(halfedge.next.vertex.point, cHalfedge4.next.vertex.point, halfedge.vertex.point);\n            }\n            if (cHalfedge3 && cHalfedge4) {\n                diffAngleB = Math.pow(angleB1-angleB2, 2);\n            }\n            if (cHalfedge5) {\n                angleC1 = this.angle(halfedge.pair.prev.vertex.point, cHalfedge5.next.vertex.point, halfedge.prev.vertex.point);\n            }\n            if (cHalfedge6) {\n                angleC2 = this.angle(halfedge.pair.prev.vertex.point, cHalfedge6.vertex.point, halfedge.prev.vertex.point);\n            }\n            if (cHalfedge5 && cHalfedge6) {\n                diffAngleC = Math.pow(angleC1-angleC2, 2);\n            }\n            if (cHalfedge7) {\n                angleD1 = this.angle(halfedge.prev.vertex.point, cHalfedge7.vertex.point, halfedge.pair.prev.vertex.point);\n            }\n            if (cHalfedge8) {\n                angleD2 = this.angle(halfedge.prev.vertex.point, cHalfedge8.next.vertex.point, halfedge.pair.prev.vertex.point);\n            }\n            if (cHalfedge7 && cHalfedge8) {\n                diffAngleD = Math.pow(angleD1-angleD2, 2);\n            }\n\n            if (diffAngleC && diffAngleD) {\n                if (diffAngleA && diffAngleB) {\n                    if (diffAngleA + diffAngleB > diffAngleC + diffAngleD) {\n                        return diffAngleC + diffAngleD;\n                    }\n                } else if (!diffAngleA && !diffAngleB) {\n                    return diffAngleC + diffAngleD;\n                } else if (diffAngleA && !diffAngleB) {\n                    if (diffAngleA * 2 > diffAngleC + diffAngleD) {\n                        return diffAngleC + diffAngleD;\n                    }\n                } else if (!diffAngleA && diffAngleB) {\n                    if (diffAngleB * 2 > diffAngleC + diffAngleD) {\n                        return diffAngleC + diffAngleD;\n                    }\n                }\n            } else if (diffAngleC && !diffAngleD) {\n                if (!diffAngleA && !diffAngleB) {\n                    return diffAngleC * 2;\n                } else if (diffAngleA && diffAngleB) {\n                    if (diffAngleA + diffAngleB > diffAngleC * 2) {\n                        return diffAngleC * 2;\n                    }\n                } else if (diffAngleA && !diffAngleB) {\n                    if (diffAngleA > diffAngleC) {\n                        return diffAngleC * 2;\n                    }\n                } else if (!diffAngleA && diffAngleB) {\n                    if (diffAngleB > diffAngleC) {\n                        return diffAngleC * 2;\n                    }\n                }\n            } else if (!diffAngleC && diffAngleD) {\n                if (!diffAngleA && !diffAngleB) {\n                    return diffAngleD * 2;\n                } else if (diffAngleA & diffAngleB) {\n                    if (diffAngleA + diffAngleB > diffAngleD * 2) {\n                        return diffAngleD * 2;\n                    }\n                } else if (diffAngleA && !diffAngleB) {\n                    if (diffAngleA > diffAngleD) {\n                        return diffAngleD * 2;\n                    }\n                } else if (!diffAngleA && diffAngleB) {\n                    if (diffAngleB > diffAngleD) {\n                        return diffAngleD * 2;\n                    }\n                }\n            }\n            return Infinity;\n        }\n\n        checkVertexNumber(halfedge) {\n            let veMap = this._vertices_edges;\n            if (veMap.get(halfedge.prev.vertex.id) >= 4) {\n                return false;\n            }\n            if (veMap.get(halfedge.pair.prev.vertex.id) >= 4) {\n                return false;\n            }\n            return true;\n        }\n\n        edgeSwap(halfedge) {// https://mitani.cs.tsukuba.ac.jp/lecture/jikken/polygon_operation.pdf\n\n            let heLT = halfedge.prev.pair;\n            if (heLT == null) {\n                var dheLT = new Halfedge(halfedge.vertex);\n                dheLT.edge = halfedge.prev.edge;\n            }\n            let heRT = halfedge.next.pair;\n            if (heRT == null) {\n                var dheRT = new Halfedge(halfedge.prev.vertex);\n                dheRT.edge = halfedge.next.edge;\n            }\n            let heLB = halfedge.pair.next.pair;\n            if (heLB == null) {\n                var dheLB = new Halfedge(halfedge.pair.prev.vertex);\n                dheLB.edge = halfedge.pair.next.edge;\n            }\n            let heRB = halfedge.pair.prev.pair;\n            if (heRB == null) {\n                var dheRB = new Halfedge(halfedge.pair.vertex);\n                dheRB.edge = halfedge.pair.prev.edge;\n            }\n\n            if (heRB != null) {\n                halfedge.next.vertex.halfedge = heRB;\n            }\n            if (heRT != null) {\n                halfedge.prev.vertex.halfedge = heRT;\n            }\n            if (heLT != null) {\n                halfedge.vertex.halfedge = heLT;\n            }\n            if (heLB != null) {\n                halfedge.pair.prev.vertex.halfedge = heLB;\n            }\n            \n            halfedge.vertex = heLB ? heLB.vertex : dheLB.vertex;\n            halfedge.next.vertex = heRT ? heRT.vertex : dheRT.vertex;\n            halfedge.prev.vertex = heLT ? heLT.vertex : dheLT.vertex;\n            halfedge.pair.vertex = heRT ? heRT.vertex : dheRT.vertex;\n            halfedge.pair.next.vertex = heLB ? heLB.vertex : dheLB.vertex;\n            halfedge.pair.prev.vertex = heRB ? heRB.vertex : dheRB.vertex;\n\n            halfedge.edge.start = halfedge.vertex;\n            halfedge.edge.end = halfedge.pair.vertex;\n\n            if (heLT != null) {\n                this.setHalfedgePair2(heLT, halfedge.next);\n                let edge = heLT.edge;\n                edge.left = heLT;\n                edge.right = halfedge.next;\n                edge.start = heLT.vertex;\n                edge.end = halfedge.next.vertex;\n                halfedge.next.edge = edge;\n            } else {\n                halfedge.next.pair = null;\n                halfedge.next.isCurve = false;\n                this.checkIsCurved(halfedge.next);\n                let edge = dheLT.edge;\n                edge.left = halfedge.next;\n                edge.right = null;\n                edge.start = halfedge.next.vertex;\n                edge.end = halfedge.next.next.vertex;\n                halfedge.next.edge = edge;\n            }\n            if (heLB != null) {\n                this.setHalfedgePair2(heLB, halfedge.prev);\n                let edge = heLB.edge;\n                edge.left = heLB;\n                edge.right = halfedge.prev;\n                edge.start = heLB.vertex;\n                edge.end = halfedge.prev.vertex;\n                halfedge.prev.edge = edge;\n            } else {\n                halfedge.prev.pair = null;\n                halfedge.prev.isCurve = false;\n                this.checkIsCurved(halfedge.prev);\n                let edge = dheLB.edge;\n                edge.left = halfedge.prev;\n                edge.right = null;\n                edge.start = halfedge.prev.vertex;\n                edge.end = halfedge.prev.next.vertex;\n                halfedge.prev.edge = edge;\n            }\n            if (heRT != null) {\n                this.setHalfedgePair2(heRT, halfedge.pair.prev);\n                let edge = heRT.edge;\n                edge.left = heRT;\n                edge.right = halfedge.pair.prev;\n                edge.start = heRT.vertex;\n                edge.end = halfedge.pair.prev.vertex;\n                halfedge.pair.prev.edge = edge;\n            } else {\n                halfedge.pair.prev.pair = null;\n                halfedge.pair.prev.isCurve = false;\n                this.checkIsCurved(halfedge.pair.prev);\n                let edge = dheRT.edge;\n                edge.left = halfedge.pair.prev;\n                edge.right = null;\n                edge.start = halfedge.pair.prev.vertex;\n                edge.end = halfedge.pair.prev.next.vertex;\n                halfedge.pair.prev.edge = edge;\n            }\n            if (heRB != null) {\n                this.setHalfedgePair2(heRB, halfedge.pair.next);\n                let edge = heRB.edge;\n                edge.left = heRB;\n                edge.right = halfedge.pair.next;\n                edge.start = heRB.vertex;\n                edge.end = halfedge.pair.next.vertex;\n                halfedge.pair.next.edge = edge;\n            } else {\n                halfedge.pair.next.pair = null;\n                halfedge.pair.next.isCurve = false;\n                this.checkIsCurved(halfedge.pair.next);\n                let edge = dheRB.edge;\n                edge.left = halfedge.pair.next;\n                edge.right = null;\n                edge.start = halfedge.pair.next.vertex;\n                edge.end = halfedge.pair.next.next.vertex;\n                halfedge.pair.next.edge = edge;\n            }\n\n            let veMap = this._vertices_edges;\n            if (veMap.has(halfedge.vertex.id)) {\n                veMap.set(halfedge.vertex.id, veMap.get(halfedge.vertex.id)+1);\n            } else {\n                veMap.set(halfedge.vertex.id, 1);\n            }\n            if (veMap.has(halfedge.next.vertex.id)) {\n                veMap.set(halfedge.next.vertex.id, veMap.get(halfedge.next.vertex.id)+1);\n            } else {\n                veMap.set(halfedge.next.vertex.id, 1);\n            }\n            veMap.set(halfedge.prev.vertex.id, veMap.get(halfedge.prev.vertex.id)-1);\n            veMap.set(halfedge.pair.prev.vertex.id, veMap.get(halfedge.pair.prev.vertex.id)-1);\n\n            return true;\n        }\n\n        get vertices() {\n            return this._vertices;\n        }\n        get faces() {\n            return this._faces;\n        }\n        get verticesEdges() {\n            return this._vertices_edges;\n        }\n        get triangulatedEdges() {\n            return this._triangulated_edges;\n        }\n\n        set verticesEdges(array) {\n            this._vertices_edges = array;\n        }\n    }\n\n    function triangulatePolys(fold) {\n        var vertices = fold.vertices_coords;\n        var faces = fold.faces_vertices;\n        var edges = fold.edges_vertices;\n        var foldAngles = fold.edges_foldAngle;\n        var assignments = fold.edges_assignment;\n        var triangulatedFaces = [];\n        for (var i=0;i<faces.length;i++){\n\n            var face = faces[i];\n\n            if (face.length == 3){\n                triangulatedFaces.push(face);\n                continue;\n            }\n\n            //check for quad and solve manually\n            if (face.length == 4){\n                var faceV1 = makeVector(vertices[face[0]]);\n                var faceV2 = makeVector(vertices[face[1]]);\n                var faceV3 = makeVector(vertices[face[2]]);\n                var faceV4 = makeVector(vertices[face[3]]);\n                var dist1 = (faceV1.clone().sub(faceV3)).lengthSq();\n                var dist2 = (faceV2.clone().sub(faceV4)).lengthSq();\n                if (dist2<dist1) {\n                    edges.push([face[1], face[3]]);\n                    foldAngles.push(0);\n                    assignments.push(\"F\");\n                    triangulatedFaces.push([face[0], face[1], face[3]]);\n                    triangulatedFaces.push([face[1], face[2], face[3]]);\n                } else {\n                    edges.push([face[0], face[2]]);\n                    foldAngles.push(0);\n                    assignments.push(\"F\");\n                    triangulatedFaces.push([face[0], face[1], face[2]]);\n                    triangulatedFaces.push([face[0], face[2], face[3]]);\n                }\n                continue;\n            }\n\n            var faceEdges = [];\n            for (var j=0;j<edges.length;j++){\n                var edge = edges[j];\n                if (face.indexOf(edge[0]) >= 0 && face.indexOf(edge[1]) >= 0){\n                    faceEdges.push(j);\n                }\n            }\n\n            var faceVert = [];\n            for (var j=0;j<face.length;j++){\n                var vertex = vertices[face[j]];\n                faceVert.push(vertex[0]);\n                faceVert.push(vertex[2]);\n            }\n\n            let cdt_points = [];\n            for (let i = 0; i < faceVert.length-1; i+=2) {\n                cdt_points.push([faceVert[i],faceVert[i+1]]);\n            }\n\n            let cdt_edges =[];\n            for (let i = 0; i < faceVert.length/2-1; i++) {\n                cdt_edges.push([i, i+1]);\n            }\n            cdt_edges.push([faceVert.length/2-1, 0]);\n\n            let cdt2d = require('cdt2d');\n            let cdt_result = cdt2d(cdt_points, cdt_edges, {exterior: false});\n\n            let triangles = [];\n            for (let i = 0; i < cdt_result.length; i++) {\n                triangles.push(cdt_result[i][0]);\n                triangles.push(cdt_result[i][1]);\n                triangles.push(cdt_result[i][2]);\n            }\n\n            let model = new Model(edges, assignments);\n            for (let i = 0; i < faceVert.length; i+=2) {\n                let vertex = new Vertex([faceVert[i], faceVert[i+1]], face[i/2]);\n                model.vertices.push(vertex);\n            }\n            model.verticesEdges = new Map();\n            for (let index = 0; index < model.vertices.length; index++) {\n                model.verticesEdges.set(index, 0);\n            }\n            for (let i = 0; i < triangles.length; i+=3) {\n                model.addFace(model.vertices[triangles[i]], model.vertices[triangles[i+1]], model.vertices[triangles[i+2]]);\n            }\n\n            let flag, repeat = 0;\n            while (repeat < 1000) {\n                flag = true;\n                let minAngle = Infinity;\n                let edgeNum = -1;\n                for (let index = 0; index < model.triangulatedEdges.length; index++) {\n                    const edge = model.triangulatedEdges[index];\n                    if (edge.left.pair != null) {\n                        if (model.cross(edge.left)) {\n                            if (model.checkVertexNumber(edge.left)) {\n                                if (model.orthogonal(edge.left) < minAngle) {\n                                    flag = false;\n                                    minAngle = model.orthogonal(edge.left);\n                                    edgeNum = index;\n                                }\n                            }\n                        }\n                    }\n                }\n                if (flag) {\n                    break;\n                } else {\n                    model.edgeSwap(model.triangulatedEdges[edgeNum].left);\n                }\n                repeat++;\n            }\n\n            triangles = [];\n            for (let i = 0; i < model.faces.length; i++) {\n                let face = model.faces[i];\n                let tri1 = face.halfedge.vertex.id;\n                let tri2 = face.halfedge.next.vertex.id;\n                let tri3 = face.halfedge.next.next.vertex.id;\n                triangles.push(tri1);\n                triangles.push(tri2);\n                triangles.push(tri3);\n            }\n\n            for (var j=0;j<triangles.length;j+=3){\n                var tri = [triangles[j+2], triangles[j+1], triangles[j]];\n                var foundEdges = [false, false, false];//ab, bc, ca\n\n                for (var k=0;k<faceEdges.length;k++){\n                    var edge = edges[faceEdges[k]];\n\n                    var aIndex = edge.indexOf(tri[0]);\n                    var bIndex = edge.indexOf(tri[1]);\n                    var cIndex = edge.indexOf(tri[2]);\n\n                    if (aIndex >= 0){\n                        if (bIndex >= 0) {\n                            foundEdges[0] = true;\n                            continue;\n                        }\n                        if (cIndex >= 0) {\n                            foundEdges[2] = true;\n                            continue;\n                        }\n                    }\n                    if (bIndex >= 0){\n                        if (cIndex >= 0) {\n                            foundEdges[1] = true;\n                            continue;\n                        }\n                    }\n                }\n\n                for (var k=0;k<3;k++){\n                    if (foundEdges[k]) continue;\n                    if (k==0){\n                        faceEdges.push(edges.length);\n                        edges.push([tri[0], tri[1]]);\n                        foldAngles.push(0);\n                        assignments.push(\"F\");\n                    } else if (k==1){\n                        faceEdges.push(edges.length);\n                        edges.push([tri[2], tri[1]]);\n                        foldAngles.push(0);\n                        assignments.push(\"F\");\n                    } else if (k==2){\n                        faceEdges.push(edges.length);\n                        edges.push([tri[2], tri[0]]);\n                        foldAngles.push(0);\n                        assignments.push(\"F\");\n                    }\n                }\n\n                triangulatedFaces.push(tri);\n            }\n        }\n        fold.faces_vertices = triangulatedFaces;\n        return fold;\n    }\n\n    function saveSVG(){\n        if (globals.extension == \"fold\"){\n            //todo solve for crease pattern\n            globals.warn(\"No crease pattern available for files imported from FOLD format.\");\n            return;\n        }\n\n        var serializer = new XMLSerializer();\n        var source = serializer.serializeToString($(\"#svgViewer>svg\").get(0));\n        var svgBlob = new Blob([source], {type:\"image/svg+xml;charset=utf-8\"});\n        var svgUrl = URL.createObjectURL(svgBlob);\n        var downloadLink = document.createElement(\"a\");\n        downloadLink.href = svgUrl;\n        downloadLink.download =  globals.filename + \".svg\";\n        document.body.appendChild(downloadLink);\n        downloadLink.click();\n        document.body.removeChild(downloadLink);\n    }\n\n    function findIntersections(fold, tol){\n        var vertices = fold.vertices_coords;\n        var edges = fold.edges_vertices;\n        var foldAngles = fold.edges_foldAngle;\n        var assignments = fold.edges_assignment;\n        for (var i=edges.length-1;i>=0;i--){\n            for (var j=i-1;j>=0;j--){\n                var v1 = makeVector2(vertices[edges[i][0]]);\n                var v2 = makeVector2(vertices[edges[i][1]]);\n                var v3 = makeVector2(vertices[edges[j][0]]);\n                var v4 = makeVector2(vertices[edges[j][1]]);\n                var data = line_intersect(v1, v2, v3, v4);\n                if (data) {\n                    var length1 = (v2.clone().sub(v1)).length();\n                    var length2 = (v4.clone().sub(v3)).length();\n                    var d1 = getDistFromEnd(data.t1, length1, tol);\n                    var d2 = getDistFromEnd(data.t2, length2, tol);\n                    if (d1 === null || d2 === null) continue;//no crossing\n\n                    var seg1Int = d1>tol && d1<length1-tol;\n                    var seg2Int = d2>tol && d2<length2-tol;\n                    if (!seg1Int && !seg2Int) continue;//intersects at endpoints only\n\n                    var vertIndex;\n                    if (seg1Int && seg2Int){\n                        vertIndex = vertices.length;\n                        vertices.push([data.intersection.x,  data.intersection.y]);\n                    } else if (seg1Int){\n                        if (d2<=tol) vertIndex = edges[j][0];\n                        else vertIndex = edges[j][1];\n                    } else {\n                        if (d1<=tol) vertIndex = edges[i][0];\n                        else vertIndex = edges[i][1];\n                    }\n\n                    if (seg1Int){\n                        var foldAngle = foldAngles[i];\n                        var assignment = assignments[i];\n                        edges.splice(i, 1, [vertIndex, edges[i][0]], [vertIndex, edges[i][1]]);\n                        foldAngles.splice(i, 1, foldAngle, foldAngle);\n                        assignments.splice(i, 1, assignment, assignment);\n                        i++;\n                    }\n                    if (seg2Int){\n                        var foldAngle = foldAngles[j];\n                        var assignment = assignments[j];\n                        edges.splice(j, 1, [vertIndex, edges[j][0]], [vertIndex, edges[j][1]]);\n                        foldAngles.splice(j, 1, foldAngle, foldAngle);\n                        assignments.splice(j, 1, assignment, assignment);\n                        j++;\n                        i++;\n                    }\n                }\n            }\n        }\n        return fold;\n    }\n\n    function makeVector(v){\n        if (v.length == 2) return makeVector2(v);\n        return makeVector3(v);\n    }\n    function makeVector2(v){\n        return new THREE.Vector2(v[0], v[1]);\n    }\n    function makeVector3(v){\n        return new THREE.Vector3(v[0], v[1], v[2]);\n    }\n\n    function getDistFromEnd(t, length, tol){\n        var dist = t*length;\n        if (dist < -tol) return null;\n        if (dist > length+tol) return null;\n        return dist;\n    }\n\n    //http://paulbourke.net/geometry/pointlineplane/\n    function line_intersect(v1, v2, v3, v4) {\n        var x1 = v1.x;\n        var y1 = v1.y;\n        var x2 = v2.x;\n        var y2 = v2.y;\n        var x3 = v3.x;\n        var y3 = v3.y;\n        var x4 = v4.x;\n        var y4 = v4.y;\n\n        var ua, ub, denom = (y4 - y3)*(x2 - x1) - (x4 - x3)*(y2 - y1);\n        if (denom == 0) {\n            return null;\n        }\n        ua = ((x4 - x3)*(y1 - y3) - (y4 - y3)*(x1 - x3))/denom;\n        ub = ((x2 - x1)*(y1 - y3) - (y2 - y1)*(x1 - x3))/denom;\n        return {\n            intersection: new THREE.Vector2(x1 + ua*(x2 - x1), y1 + ua*(y2 - y1)),\n            t1: ua,\n            t2: ub\n        };\n    }\n\n    function getFoldData(raw){\n        if (raw) return rawFold;\n        return foldData;\n    }\n\n    function setFoldData(fold, isDemo, returnCreaseParams){\n        clearAll();\n        var result = processFold(fold, returnCreaseParams);\n        \n        // Store fold data in globals for cell colorizer\n        globals.fold = foldData;\n        \n        // Auto-execute cellColorizer if textures are already loaded\n        if (globals.textureLibrary && globals.textureLibrary.length > 0 && globals.cellColorizer && globals.cellColorizer.generateTextureMappedCellImage) {\n            console.log(\" Curved folding loaded with existing textures, auto-generating texture-mapped cells...\");\n            setTimeout(function() {\n                try {\n                    globals.cellColorizer.generateTextureMappedCellImage(true); // Pass true for auto mode\n                    console.log(\" Auto-generated texture-mapped cells from curved folding load\");\n                } catch (error) {\n                    console.error(\" Failed to auto-generate from curved folding load:\", error);\n                }\n            }, 500); // Short delay to ensure everything is ready\n        }\n        \n        return result;\n    }\n\n    function getTriangulatedFaces(){\n        return foldData.faces_vertices;\n    }\n\n    return {\n        loadSVG : loadSVG,\n        saveSVG : saveSVG,\n        getFoldData: getFoldData,\n        getTriangulatedFaces: getTriangulatedFaces,\n        setFoldData : setFoldData\n    }\n}</script> <script type=\"text/javascript\">function setCookie(e,o,i){var l=new Date;l.setDate(l.getDate()+i);var t=escape(o)+(null==i?\"\":\"; expires=\"+l.toUTCString());document.cookie=e+\"=\"+t}function getCookie(e){var o=document.cookie,i=o.indexOf(\" \"+e+\"=\");if(-1==i&&(i=o.indexOf(e+\"=\")),-1==i)o=null;else{i=o.indexOf(\"=\",i)+1;var l=o.indexOf(\";\",i);-1==l&&(l=o.length),o=unescape(o.substring(i,l))}return o}function delCookie(e){document.cookie=e+\"=; expires=Thu, 01 Jan 1970 00:00:01 GMT;\"}globals={},$(function(){if(getCookie(\"firsttime\")||$(\"body\").innerWidth()>770&&window.setTimeout(function(){setCookie(\"firsttime\",!0);var e=$(\"#helper\");e.show(),window.setTimeout(function(){e.css({opacity:1}),window.setTimeout(function(){e.css({opacity:0}),window.setTimeout(function(){e.hide()},2e3)},1e4)},500)},7e3),globals=initGlobals(),globals.threeView=initThreeView(globals),globals.controls=initControls(globals),globals.UI3D=init3DUI(globals),globals.importer=initImporter(globals),globals.model=initModel(globals),globals.dynamicSolver=initDynamicSolver(globals),globals.pattern=initPattern(globals),globals.vive=initViveInterface(globals),globals.videoAnimator=initVideoAnimator(globals),globals.cellColorizer=initCellColorizer(globals),globals.curvedFolding=initCurvedFolding(globals),!1!==window.editMode){console.log(\" Edit mode enabled - loading default model\");var e=\"Tessellations/huffmanWaterbomb.svg\",o=/[\\\\?&]model=([^&#]*)/.exec(location.search);o&&(e=o[1]),e=e.replace(/'/g,\"\"),$(\".demo[data-url='\"+e+\"']\").click()}else console.log(\" Edit mode disabled - skipping default model load for NFT processing\")});</script> </head>",
      "bootstrap": [],
      "nftData": {
        "pattern_0": [
          "const nftData = JSON.parse(`___NFT_DATA_PLACEHOLDER___`);"
        ],
        "pattern_1": [
          "window.nftData = nftData;",
          "window.nftData = null;"
        ],
        "pattern_2": [
          "___NFT_DATA_PLACEHOLDER___"
        ]
      },
      "origamiPatterns": {
        "Airplane": 1,
        "Crane": 1,
        "Hypar": 1,
        "Pinwheel": 1,
        "Flower": 1
      },
      "scripts": {
        "external": [
          "https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.0/jquery.min.js",
          "https://cdnjs.cloudflare.com/ajax/libs/flat-ui/2.3.0/js/flat-ui.min.js"
        ],
        "inline": 47,
        "total": 49
      },
      "threejsDependencies": {
        "pattern_0": 0,
        "pattern_1": 0,
        "pattern_2": 0,
        "pattern_3": 1,
        "pattern_4": 303
      },
      "shaders": {
        "pattern_0": 33,
        "pattern_1": 35,
        "pattern_2": 17,
        "pattern_3": 472
      },
      "animations": {
        "pattern_0": 3,
        "pattern_1": 8,
        "pattern_2": 52,
        "pattern_3": 5
      }
    },
    "new": {
      "head": "<head>\n    <!-- Basic meta tags -->\n    <meta charset=\"UTF-8\">\n    <title>Katachi Gen</title>\n    \n    <!-- Viewport configuration for responsive design -->\n    <meta name=\"viewport\" content=\"width=400\">\n    \n    <!-- External library CSS includes -->\n    <style>/*! jQuery UI - v1.12.0 - 2016-08-13\n* http://jqueryui.com\n* Includes: core.css, slider.css, theme.css\n* To view and modify this theme, visit http://jqueryui.com/themeroller/?scope=&amp;folderName=base&amp;cornerRadiusShadow=8px&amp;offsetLeftShadow=0px&amp;offsetTopShadow=0px&amp;thicknessShadow=5px&amp;opacityShadow=30&amp;bgImgOpacityShadow=0&amp;bgTextureShadow=flat&amp;bgColorShadow=666666&amp;opacityOverlay=30&amp;bgImgOpacityOverlay=0&amp;bgTextureOverlay=flat&amp;bgColorOverlay=aaaaaa&amp;iconColorError=cc0000&amp;fcError=5f3f3f&amp;borderColorError=f1a899&amp;bgTextureError=flat&amp;bgColorError=fddfdf&amp;iconColorHighlight=777620&amp;fcHighlight=777620&amp;borderColorHighlight=dad55e&amp;bgTextureHighlight=flat&amp;bgColorHighlight=fffa90&amp;iconColorActive=ffffff&amp;fcActive=ffffff&amp;borderColorActive=003eff&amp;bgTextureActive=flat&amp;bgColorActive=007fff&amp;iconColorHover=555555&amp;fcHover=2b2b2b&amp;borderColorHover=cccccc&amp;bgTextureHover=flat&amp;bgColorHover=ededed&amp;iconColorDefault=777777&amp;fcDefault=454545&amp;borderColorDefault=c5c5c5&amp;bgTextureDefault=flat&amp;bgColorDefault=f6f6f6&amp;iconColorContent=444444&amp;fcContent=333333&amp;borderColorContent=dddddd&amp;bgTextureContent=flat&amp;bgColorContent=ffffff&amp;iconColorHeader=444444&amp;fcHeader=333333&amp;borderColorHeader=dddddd&amp;bgTextureHeader=flat&amp;bgColorHeader=e9e9e9&amp;cornerRadius=3px&amp;fwDefault=normal&amp;fsDefault=1em&amp;ffDefault=Arial%2CHelvetica%2Csans-serif\n* Copyright jQuery Foundation and other contributors; Licensed MIT */\n\n.ui-helper-hidden{display:none}.ui-helper-hidden-accessible{border:0;clip:rect(0 0 0 0);height:1px;margin:-1px;overflow:hidden;padding:0;position:absolute;width:1px}.ui-helper-reset{margin:0;padding:0;border:0;outline:0;line-height:1.3;text-decoration:none;font-size:100%;list-style:none}.ui-helper-clearfix:before,.ui-helper-clearfix:after{content:&#34;&#34;;display:table;border-collapse:collapse}.ui-helper-clearfix:after{clear:both}.ui-helper-zfix{width:100%;height:100%;top:0;left:0;position:absolute;opacity:0;filter:Alpha(Opacity=0)}.ui-front{z-index:100}.ui-state-disabled{cursor:default!important;pointer-events:none}.ui-icon{display:inline-block;vertical-align:middle;margin-top:-.25em;position:relative;text-indent:-99999px;overflow:hidden;background-repeat:no-repeat}.ui-widget-icon-block{left:50%;margin-left:-8px;display:block}.ui-widget-overlay{position:fixed;top:0;left:0;width:100%;height:100%}.ui-slider{position:relative;text-align:left}.ui-slider .ui-slider-handle{position:absolute;z-index:2;width:1.2em;height:1.2em;cursor:default;-ms-touch-action:none;touch-action:none}.ui-slider .ui-slider-range{position:absolute;z-index:1;font-size:.7em;display:block;border:0;background-position:0 0}.ui-slider.ui-state-disabled .ui-slider-handle,.ui-slider.ui-state-disabled .ui-slider-range{filter:inherit}.ui-slider-horizontal{height:.8em}.ui-slider-horizontal .ui-slider-handle{top:-.3em;margin-left:-.6em}.ui-slider-horizontal .ui-slider-range{top:0;height:100%}.ui-slider-horizontal .ui-slider-range-min{left:0}.ui-slider-horizontal .ui-slider-range-max{right:0}.ui-slider-vertical{width:.8em;height:100px}.ui-slider-vertical .ui-slider-handle{left:-.3em;margin-left:0;margin-bottom:-.6em}.ui-slider-vertical .ui-slider-range{left:0;width:100%}.ui-slider-vertical .ui-slider-range-min{bottom:0}.ui-slider-vertical .ui-slider-range-max{top:0}.ui-widget{font-family:Arial,Helvetica,sans-serif;font-size:1em}.ui-widget .ui-widget{font-size:1em}.ui-widget input,.ui-widget select,.ui-widget textarea,.ui-widget button{font-family:Arial,Helvetica,sans-serif;font-size:1em}.ui-widget.ui-widget-content{border:1px solid #c5c5c5}.ui-widget-content{border:1px solid #ddd;background:#fff;color:#333}.ui-widget-content a{color:#333}.ui-widget-header{border:1px solid #ddd;background:#e9e9e9;color:#333;font-weight:bold}.ui-widget-header a{color:#333}.ui-state-default,.ui-widget-content .ui-state-default,.ui-widget-header .ui-state-default,.ui-button,html .ui-button.ui-state-disabled:hover,html .ui-button.ui-state-disabled:active{border:1px solid #c5c5c5;background:#f6f6f6;font-weight:normal;color:#454545}.ui-state-default a,.ui-state-default a:link,.ui-state-default a:visited,a.ui-button,a:link.ui-button,a:visited.ui-button,.ui-button{color:#454545;text-decoration:none}.ui-state-hover,.ui-widget-content .ui-state-hover,.ui-widget-header .ui-state-hover,.ui-state-focus,.ui-widget-content .ui-state-focus,.ui-widget-header .ui-state-focus,.ui-button:hover,.ui-button:focus{border:1px solid #ccc;background:#ededed;font-weight:normal;color:#2b2b2b}.ui-state-hover a,.ui-state-hover a:hover,.ui-state-hover a:link,.ui-state-hover a:visited,.ui-state-focus a,.ui-state-focus a:hover,.ui-state-focus a:link,.ui-state-focus a:visited,a.ui-button:hover,a.ui-button:focus{color:#2b2b2b;text-decoration:none}.ui-visual-focus{box-shadow:0 0 3px 1px rgb(94,158,214)}.ui-state-active,.ui-widget-content .ui-state-active,.ui-widget-header .ui-state-active,a.ui-button:active,.ui-button:active,.ui-button.ui-state-active:hover{border:1px solid #003eff;background:#007fff;font-weight:normal;color:#fff}.ui-icon-background,.ui-state-active .ui-icon-background{border:#003eff;background-color:#fff}.ui-state-active a,.ui-state-active a:link,.ui-state-active a:visited{color:#fff;text-decoration:none}.ui-state-highlight,.ui-widget-content .ui-state-highlight,.ui-widget-header .ui-state-highlight{border:1px solid #dad55e;background:#fffa90;color:#777620}.ui-state-checked{border:1px solid #dad55e;background:#fffa90}.ui-state-highlight a,.ui-widget-content .ui-state-highlight a,.ui-widget-header .ui-state-highlight a{color:#777620}.ui-state-error,.ui-widget-content .ui-state-error,.ui-widget-header .ui-state-error{border:1px solid #f1a899;background:#fddfdf;color:#5f3f3f}.ui-state-error a,.ui-widget-content .ui-state-error a,.ui-widget-header .ui-state-error a{color:#5f3f3f}.ui-state-error-text,.ui-widget-content .ui-state-error-text,.ui-widget-header .ui-state-error-text{color:#5f3f3f}.ui-priority-primary,.ui-widget-content .ui-priority-primary,.ui-widget-header .ui-priority-primary{font-weight:bold}.ui-priority-secondary,.ui-widget-content .ui-priority-secondary,.ui-widget-header .ui-priority-secondary{opacity:.7;filter:Alpha(Opacity=70);font-weight:normal}.ui-state-disabled,.ui-widget-content .ui-state-disabled,.ui-widget-header .ui-state-disabled{opacity:.35;filter:Alpha(Opacity=35);background-image:none}.ui-state-disabled .ui-icon{filter:Alpha(Opacity=35)}.ui-icon{width:16px;height:16px}.ui-icon,.ui-widget-content .ui-icon{background-image:url(&#34;images/ui-icons_444444_256x240.png&#34;)}.ui-widget-header .ui-icon{background-image:url(&#34;images/ui-icons_444444_256x240.png&#34;)}.ui-button .ui-icon{background-image:url(&#34;images/ui-icons_777777_256x240.png&#34;)}.ui-state-hover .ui-icon,.ui-state-focus .ui-icon,.ui-button:hover .ui-icon,.ui-button:focus .ui-icon,.ui-state-default .ui-icon{background-image:url(&#34;images/ui-icons_555555_256x240.png&#34;)}.ui-state-active .ui-icon,.ui-button:active .ui-icon{background-image:url(&#34;images/ui-icons_ffffff_256x240.png&#34;)}.ui-state-highlight .ui-icon,.ui-button .ui-state-highlight.ui-icon{background-image:url(&#34;images/ui-icons_777620_256x240.png&#34;)}.ui-state-error .ui-icon,.ui-state-error-text .ui-icon{background-image:url(&#34;images/ui-icons_cc0000_256x240.png&#34;)}.ui-icon-blank{background-position:16px 16px}.ui-icon-caret-1-n{background-position:0 0}.ui-icon-caret-1-ne{background-position:-16px 0}.ui-icon-caret-1-e{background-position:-32px 0}.ui-icon-caret-1-se{background-position:-48px 0}.ui-icon-caret-1-s{background-position:-65px 0}.ui-icon-caret-1-sw{background-position:-80px 0}.ui-icon-caret-1-w{background-position:-96px 0}.ui-icon-caret-1-nw{background-position:-112px 0}.ui-icon-caret-2-n-s{background-position:-128px 0}.ui-icon-caret-2-e-w{background-position:-144px 0}.ui-icon-triangle-1-n{background-position:0 -16px}.ui-icon-triangle-1-ne{background-position:-16px -16px}.ui-icon-triangle-1-e{background-position:-32px -16px}.ui-icon-triangle-1-se{background-position:-48px -16px}.ui-icon-triangle-1-s{background-position:-65px -16px}.ui-icon-triangle-1-sw{background-position:-80px -16px}.ui-icon-triangle-1-w{background-position:-96px -16px}.ui-icon-triangle-1-nw{background-position:-112px -16px}.ui-icon-triangle-2-n-s{background-position:-128px -16px}.ui-icon-triangle-2-e-w{background-position:-144px -16px}.ui-icon-arrow-1-n{background-position:0 -32px}.ui-icon-arrow-1-ne{background-position:-16px -32px}.ui-icon-arrow-1-e{background-position:-32px -32px}.ui-icon-arrow-1-se{background-position:-48px -32px}.ui-icon-arrow-1-s{background-position:-65px -32px}.ui-icon-arrow-1-sw{background-position:-80px -32px}.ui-icon-arrow-1-w{background-position:-96px -32px}.ui-icon-arrow-1-nw{background-position:-112px -32px}.ui-icon-arrow-2-n-s{background-position:-128px -32px}.ui-icon-arrow-2-ne-sw{background-position:-144px -32px}.ui-icon-arrow-2-e-w{background-position:-160px -32px}.ui-icon-arrow-2-se-nw{background-position:-176px -32px}.ui-icon-arrowstop-1-n{background-position:-192px -32px}.ui-icon-arrowstop-1-e{background-position:-208px -32px}.ui-icon-arrowstop-1-s{background-position:-224px -32px}.ui-icon-arrowstop-1-w{background-position:-240px -32px}.ui-icon-arrowthick-1-n{background-position:1px -48px}.ui-icon-arrowthick-1-ne{background-position:-16px -48px}.ui-icon-arrowthick-1-e{background-position:-32px -48px}.ui-icon-arrowthick-1-se{background-position:-48px -48px}.ui-icon-arrowthick-1-s{background-position:-64px -48px}.ui-icon-arrowthick-1-sw{background-position:-80px -48px}.ui-icon-arrowthick-1-w{background-position:-96px -48px}.ui-icon-arrowthick-1-nw{background-position:-112px -48px}.ui-icon-arrowthick-2-n-s{background-position:-128px -48px}.ui-icon-arrowthick-2-ne-sw{background-position:-144px -48px}.ui-icon-arrowthick-2-e-w{background-position:-160px -48px}.ui-icon-arrowthick-2-se-nw{background-position:-176px -48px}.ui-icon-arrowthickstop-1-n{background-position:-192px -48px}.ui-icon-arrowthickstop-1-e{background-position:-208px -48px}.ui-icon-arrowthickstop-1-s{background-position:-224px -48px}.ui-icon-arrowthickstop-1-w{background-position:-240px -48px}.ui-icon-arrowreturnthick-1-w{background-position:0 -64px}.ui-icon-arrowreturnthick-1-n{background-position:-16px -64px}.ui-icon-arrowreturnthick-1-e{background-position:-32px -64px}.ui-icon-arrowreturnthick-1-s{background-position:-48px -64px}.ui-icon-arrowreturn-1-w{background-position:-64px -64px}.ui-icon-arrowreturn-1-n{background-position:-80px -64px}.ui-icon-arrowreturn-1-e{background-position:-96px -64px}.ui-icon-arrowreturn-1-s{background-position:-112px -64px}.ui-icon-arrowrefresh-1-w{background-position:-128px -64px}.ui-icon-arrowrefresh-1-n{background-position:-144px -64px}.ui-icon-arrowrefresh-1-e{background-position:-160px -64px}.ui-icon-arrowrefresh-1-s{background-position:-176px -64px}.ui-icon-arrow-4{background-position:0 -80px}.ui-icon-arrow-4-diag{background-position:-16px -80px}.ui-icon-extlink{background-position:-32px -80px}.ui-icon-newwin{background-position:-48px -80px}.ui-icon-refresh{background-position:-64px -80px}.ui-icon-shuffle{background-position:-80px -80px}.ui-icon-transfer-e-w{background-position:-96px -80px}.ui-icon-transferthick-e-w{background-position:-112px -80px}.ui-icon-folder-collapsed{background-position:0 -96px}.ui-icon-folder-open{background-position:-16px -96px}.ui-icon-document{background-position:-32px -96px}.ui-icon-document-b{background-position:-48px -96px}.ui-icon-note{background-position:-64px -96px}.ui-icon-mail-closed{background-position:-80px -96px}.ui-icon-mail-open{background-position:-96px -96px}.ui-icon-suitcase{background-position:-112px -96px}.ui-icon-comment{background-position:-128px -96px}.ui-icon-person{background-position:-144px -96px}.ui-icon-print{background-position:-160px -96px}.ui-icon-trash{background-position:-176px -96px}.ui-icon-locked{background-position:-192px -96px}.ui-icon-unlocked{background-position:-208px -96px}.ui-icon-bookmark{background-position:-224px -96px}.ui-icon-tag{background-position:-240px -96px}.ui-icon-home{background-position:0 -112px}.ui-icon-flag{background-position:-16px -112px}.ui-icon-calendar{background-position:-32px -112px}.ui-icon-cart{background-position:-48px -112px}.ui-icon-pencil{background-position:-64px -112px}.ui-icon-clock{background-position:-80px -112px}.ui-icon-disk{background-position:-96px -112px}.ui-icon-calculator{background-position:-112px -112px}.ui-icon-zoomin{background-position:-128px -112px}.ui-icon-zoomout{background-position:-144px -112px}.ui-icon-search{background-position:-160px -112px}.ui-icon-wrench{background-position:-176px -112px}.ui-icon-gear{background-position:-192px -112px}.ui-icon-heart{background-position:-208px -112px}.ui-icon-star{background-position:-224px -112px}.ui-icon-link{background-position:-240px -112px}.ui-icon-cancel{background-position:0 -128px}.ui-icon-plus{background-position:-16px -128px}.ui-icon-plusthick{background-position:-32px -128px}.ui-icon-minus{background-position:-48px -128px}.ui-icon-minusthick{background-position:-64px -128px}.ui-icon-close{background-position:-80px -128px}.ui-icon-closethick{background-position:-96px -128px}.ui-icon-key{background-position:-112px -128px}.ui-icon-lightbulb{background-position:-128px -128px}.ui-icon-scissors{background-position:-144px -128px}.ui-icon-clipboard{background-position:-160px -128px}.ui-icon-copy{background-position:-176px -128px}.ui-icon-contact{background-position:-192px -128px}.ui-icon-image{background-position:-208px -128px}.ui-icon-video{background-position:-224px -128px}.ui-icon-script{background-position:-240px -128px}.ui-icon-alert{background-position:0 -144px}.ui-icon-info{background-position:-16px -144px}.ui-icon-notice{background-position:-32px -144px}.ui-icon-help{background-position:-48px -144px}.ui-icon-check{background-position:-64px -144px}.ui-icon-bullet{background-position:-80px -144px}.ui-icon-radio-on{background-position:-96px -144px}.ui-icon-radio-off{background-position:-112px -144px}.ui-icon-pin-w{background-position:-128px -144px}.ui-icon-pin-s{background-position:-144px -144px}.ui-icon-play{background-position:0 -160px}.ui-icon-pause{background-position:-16px -160px}.ui-icon-seek-next{background-position:-32px -160px}.ui-icon-seek-prev{background-position:-48px -160px}.ui-icon-seek-end{background-position:-64px -160px}.ui-icon-seek-start{background-position:-80px -160px}.ui-icon-seek-first{background-position:-80px -160px}.ui-icon-stop{background-position:-96px -160px}.ui-icon-eject{background-position:-112px -160px}.ui-icon-volume-off{background-position:-128px -160px}.ui-icon-volume-on{background-position:-144px -160px}.ui-icon-power{background-position:0 -176px}.ui-icon-signal-diag{background-position:-16px -176px}.ui-icon-signal{background-position:-32px -176px}.ui-icon-battery-0{background-position:-48px -176px}.ui-icon-battery-1{background-position:-64px -176px}.ui-icon-battery-2{background-position:-80px -176px}.ui-icon-battery-3{background-position:-96px -176px}.ui-icon-circle-plus{background-position:0 -192px}.ui-icon-circle-minus{background-position:-16px -192px}.ui-icon-circle-close{background-position:-32px -192px}.ui-icon-circle-triangle-e{background-position:-48px -192px}.ui-icon-circle-triangle-s{background-position:-64px -192px}.ui-icon-circle-triangle-w{background-position:-80px -192px}.ui-icon-circle-triangle-n{background-position:-96px -192px}.ui-icon-circle-arrow-e{background-position:-112px -192px}.ui-icon-circle-arrow-s{background-position:-128px -192px}.ui-icon-circle-arrow-w{background-position:-144px -192px}.ui-icon-circle-arrow-n{background-position:-160px -192px}.ui-icon-circle-zoomin{background-position:-176px -192px}.ui-icon-circle-zoomout{background-position:-192px -192px}.ui-icon-circle-check{background-position:-208px -192px}.ui-icon-circlesmall-plus{background-position:0 -208px}.ui-icon-circlesmall-minus{background-position:-16px -208px}.ui-icon-circlesmall-close{background-position:-32px -208px}.ui-icon-squaresmall-plus{background-position:-48px -208px}.ui-icon-squaresmall-minus{background-position:-64px -208px}.ui-icon-squaresmall-close{background-position:-80px -208px}.ui-icon-grip-dotted-vertical{background-position:0 -224px}.ui-icon-grip-dotted-horizontal{background-position:-16px -224px}.ui-icon-grip-solid-vertical{background-position:-32px -224px}.ui-icon-grip-solid-horizontal{background-position:-48px -224px}.ui-icon-gripsmall-diagonal-se{background-position:-64px -224px}.ui-icon-grip-diagonal-se{background-position:-80px -224px}.ui-corner-all,.ui-corner-top,.ui-corner-left,.ui-corner-tl{border-top-left-radius:3px}.ui-corner-all,.ui-corner-top,.ui-corner-right,.ui-corner-tr{border-top-right-radius:3px}.ui-corner-all,.ui-corner-bottom,.ui-corner-left,.ui-corner-bl{border-bottom-left-radius:3px}.ui-corner-all,.ui-corner-bottom,.ui-corner-right,.ui-corner-br{border-bottom-right-radius:3px}.ui-widget-overlay{background:#aaa;opacity:.3;filter:Alpha(Opacity=30)}.ui-widget-shadow{-webkit-box-shadow:0 0 5px #666;box-shadow:0 0 5px #666}</style>\n    \n    <!-- Bootstrap CSS -->\n    <!-- Bootstrap CSS -->\n<link rel=\"stylesheet\" href=\"https://cdnjs.cloudflare.com/ajax/libs/bootstrap/4.5.3/css/bootstrap.min.css\" \n      integrity=\"sha512-oc9+XSs1H243/FRN9Rw62Fn8EtxjEYWHXRvjS43YtueEewbS6ObfXcJNyohjHqVKFPoXXUxwc+q1K7Dee6vv9g==\" \n      crossorigin=\"anonymous\" \n      referrerpolicy=\"no-referrer\" />\n\n<!-- \nTODO: During content migration, verify bootstrap version and integrity hash\nExtract any additional Bootstrap-related configurations or customizations\n-->\n    \n    <!-- Custom CSS styles -->\n    <!-- Inline main.css file content -->\n<style>\nhtml{\n    width:100%;\n    min-width: 775px;\n    height:100%;\n    overflow: hidden;\n    padding:0;\n    margin:0;\n    background: black;\n    /*min-width: 1025px;*/\n}\n\nbody{\n    width:100%;\n    min-width: 775px;\n    height:100%;\n    padding:0;\n    margin:0;\n    overflow: hidden;\n    /* Black background */\n    background: black;\n    /*min-width: 1025px;*/\n    /*-webkit-touch-callout: none; !* iOS Safari *!*/\n    /*-webkit-user-select: none;   !* Chrome/Safari/Opera *!*/\n    /*-khtml-user-select: none;    !* Konqueror *!*/\n    /*-moz-user-select: none;      !* Firefox *!*/\n    /*-ms-user-select: none;       !* Internet Explorer/Edge *!*/\n    /*user-select: none;           !* Non-prefixed version, currently*/\n                                 /*not supported by any browser *!*/\n}\n\np{\n    margin: 15px 0 15px 0;\n}\n\n#basicUI{\n    position: absolute;\n    top: 53px;\n    font-size: 14px;\n    color: #34495e;\n    text-align: right;\n    right: 0px;\n    width: 400px;\n    padding: 20px 20px;\n}\n#showAdvancedOptions{\n    color: #ffffff;\n    font-weight: 900;\n}\n#hideAdvancedOptions{\n    font-size: 14px;\n    color: #34495e;\n    font-weight: 900;\n    text-align: right;\n    width: 100%;\n    display: inline-block;\n}\n\n#controlsBottom{\n    width:100%;\n    /* min-width: 775px; */\n    max-width: 850px;\n    margin: auto;\n    position: absolute;\n    bottom: 0;\n    right: 0;\n    left: 0;\n    height:110px;\n    font-weight: 900;\n}\n#controlsBottom&gt;div{\n    display: inline-block;\n}\n#bottomSliderContainer{\n    text-align: center;\n    position: absolute;\n    right:auto;\n    left:auto;\n        margin-top: 20px;\n}\n#bottomSliderContainer&gt;span{\n    font-size: 14px;\n}\n#creasePercentBottom{\n    width: 100%;\n    margin-top: 14px;\n    margin-bottom: 5px;\n}\n#creasePercentBottom&gt;.flat-slider{\n    width: 100%;\n    margin: 0;\n    background: #e8e8e8;\n}\n.sliderEndPt{\n    text-align: center;\n    width: 100px;\n    position: absolute;\n    top: -30px;\n    color: #34495e;\n    line-height: 18px;\n}\n#flatIndicator{\n    left: -50px;\n        top: -15px;\n}\n.sliderEndPt&gt;img{\n    width:100%;\n}\n#foldedIndicator{\n    right: -50px;\n        top: -15px;\n}\n.sliderEndPt&gt;.fui-triangle-down{\n    display: block;\n    color: #34495e;\n    margin-top: 0px;\n}\n.sliderEndPtLabel{\n    color: #34495e;\n    display: block;\n    /*margin-top: 30px;*/\n}\n\n#viewToggle{\n    display: none !important;\n    left: 30px;\n}\n#controlsToggle{\n    display: none !important;\n    right: 140px;\n}\n.preserveAspect{\n    width: auto;\n}\n.bigToggle{\n    height:90px;\n    width:140px;\n    text-align: center;\n    position: absolute;\n    font-size:14px;\n    /*border: 1px solid #34495e;*/\n}\n.bigToggle&gt;div{\n    border: 2px solid #34495e;\n    background: white;\n    height:70px;\n    overflow: hidden;\n    border-radius: 10px;\n    margin-bottom: 5px;\n}\n.bigToggle&gt;div div{\n    padding: 5px;\n    width:50%;\n    height: 100%;\n    display: inline-block;\n    text-align: center;\n    font-size: 12px;\n    color: #34495e;\n}\n.bigToggle div.active{\n    background: #e8e8e8;\n}\n.bigToggle .separator{\n        width: 2px;\n    height: 68px;\n    position: absolute;\n    background: #34495e;\n    padding: 0;\n    margin: 0;\n}\n.bigToggle img{\n    display: inline-block;\n    height:40px;\n}\n.bigToggle span{\n    display: block;\n    width:100%;\n}\n\n#resetBottom{\n    display: none !important;\n    position: absolute;\n    right:30px;\n    top: 13px;\n    color: #34495e;\n    font-weight: 900;\n}\n\n\n#controls{\n    position: absolute;\n    top:53px;\n    bottom: 0;\n    right:-430px;\n    width:430px;\n    padding:20px 20px;\n    overflow: auto;\n    background:rgba(10,10,10,0.1);\n}\n#controls&gt;a{\n    /*float:right;*/\n}\n#controlsLeft{\n    position: absolute;\n    bottom:0;\n    left:-420px;\n    width: 420px;\n    top:53px;\n    padding:20px 20px;\n    max-height: 100%;\n    overflow: auto;\n}\n#controlsLeft .radio{\n    width: 240px;\n}\n\n.sliderInput{\n    float:right;\n    display: inline-block;\n    margin-bottom:15px;\n    min-width: 100px;\n}\n.sliderContainer{\n    display: block;\n    margin-bottom:15px;\n}\n\n.indent{\n    padding-left:20px;\n}\n.doubleIndent{\n    padding-left:40px;\n}\n\n#gpuMathCanvas{\n    display: none;\n}\n\na, a:hover, a:visited, a:focus{\n    color:#ec008b;\n}\n\na.btn:visited, a.btn:focus{\n    color: white;\n}\n\nbutton{\n    border: 0;\n    outline: none;\n}\n\n.editable{\n    color:#34495e;\n    height: 42px;\n    display: inline-block;\n    line-height: 42px;\n    width: 70px;\n    text-overflow: ellipsis;\n    overflow: hidden;\n    white-space:nowrap\n}\n.editable:hover{\n    color:#34495e;\n    cursor: text;\n}\n.editableInput{\n    display: none;\n    outline: grey;\n    padding: 5px 7px;\n    height: 42px;\n    line-height: 42px;\n}\n.editableInput:focus {\n    outline: grey;\n    border:none;\n}\n\ninput.form-control {\n    width: 90px;\n    display: inline-block;\n}\n\n.radioSlider{\n    display: inline-block;\n    float:right;\n}\n\n.form-control, .select2-search input[type=text] {\n    height: 35px;\n}\n\n.floatRight{\n    float:right;\n}\n\n#threeContainer {\n    width:100%;\n    height:100%;\n    padding:0;\n    position: absolute;\n    top: 0px;\n    left: 0px;\n}\n\n/* Ensure Three.js canvas is transparent */\n#threeContainer canvas,\ncanvas {\n    background: transparent !important;\n    background-color: transparent !important;\n}\n\n/* Force transparency for all WebGL canvases */\ncanvas[data-engine=&#34;three.js&#34;] {\n    background: none !important;\n    opacity: 1;\n}\n\n\n\n.slider.slider-horizontal {\n    width: 200px;\n    margin: 0;\n    padding: 20px;\n    top: 10px;\n}\n\n.slider.slider-vertical {\n    height: 200px;\n    margin: 0;\n    padding: 20px;\n}\n\n.flat-slider.ui-corner-all,\n.flat-slider .ui-corner-all {\n  border-radius: 0;\n}\n\n.flat-slider.ui-slider {\n  border: 0;\n  background: #ffffff;\n  border-radius: 7px;\n}\n\n.flat-slider.ui-slider-horizontal {\n  height: 6px;\n}\n\n.flat-slider.ui-slider-vertical {\n  width: 6px;\n}\n\n.flat-slider .ui-slider-handle {\n  width: 20px;\n  height: 20px;\n  background: #666;\n  border-radius: 50%;\n  border: none;\n  cursor: pointer;\n}\n\n.flat-slider.ui-slider-horizontal .ui-slider-handle {\n  top: 50%;\n  margin-top: -10px;\n    opacity: 0.8;\n}\n\n.flat-slider.ui-slider-vertical .ui-slider-handle {\n  left: 50%;\n  margin-left: -10px;\n    opacity: 0.8;\n}\n\n.flat-slider .ui-slider-handle:hover {\n  opacity: 0.7;\n}\n\n.flat-slider .ui-slider-handle:focus { outline: none; }\n\n\n.flat-slider{\n    vertical-align: middle;\n    display: inline-block;\n    width: 130px;\n    position: relative;\n    margin: 10px 10px 10px 10px;\n    /*padding: 4px 0;*/\n}\n\n.modal-content{\n    border-radius: 0;\n}\n.modal-body{\n    padding: 20px 35px;\n}\n\nspan.modal-close{\n    display: none;\n}\n.titleSpan{\n    display: inline-block;\n    width:100%;\n    margin-top:15px;\n}\n.form-control:focus{\n    border-color: #666;\n}\n\n.checkbox input.custom-checkbox[type=&#34;checkbox&#34;]:checked + .icons .icon-checked, .radio input.custom-checkbox[type=&#34;checkbox&#34;]:checked + .icons .icon-checked, .checkbox input.custom-radio[type=&#34;radio&#34;]:checked + .icons .icon-checked, .radio input.custom-radio[type=&#34;radio&#34;]:checked + .icons .icon-checked {\n    color: #666;\n}\n.checkbox .icon-checked, .radio .icon-checked, .checkbox .icon-unchecked, .radio .icon-unchecked {\n    color: #bdc3c7;\n}\n\n.radio .icon-checked{\n    transition-duration: 0s;\n}\n\n.radio .icon-unchecked{\n    transition-duration: 0s;\n}\n\n.sliderInput&gt;.flat-slider{\n   width: 90px;\n}\n\n.label-slider{\n    font-size: 15px;\n}\n\n.extraSpace{\n    display: inline-block;\n    width:100%;\n    height:15px;\n}\n\n.flipped\n{\n    direction: rtl;\n}\n.flipped&gt;div\n{\n    direction: ltr;\n}\n\n.paddingBottom{\n    margin-bottom: 20px;\n}\n\n#svgViewer{\n    width: 100%;\n    height: 100%;\n    position: absolute;\n    z-index: 3;\n    top:0px;\n    right:0;\n    background: white;\n    display: none;\n    padding-top: 56px;\n}\nsvg{\n    width: 100%;\n    height: 100%;\n}\n\n.hexVal{\n    border-width:4px;\n}\n\n#warningMessage{\n    padding: 30px 0;\n    text-align: center;\n    margin: 0 18px;\n}\n\n.about{\n    margin-right: 10px;\n    color: #34495e!important;\n    font-size: 18px;\n    line-height: 18px;\n}\n#controls .about, #basicUI .about{\n    position: absolute;\n    line-height: 1.7;\n    margin-top: 2px;\n    right:5px;\n}\n\n#aboutError{\n    line-height: 2.0\n}\n#aboutStiffness{\n    line-height: 28px;\n}\n\n#aboutUserInteraction{\n    margin-top: 10px!important;\n    line-height: 21px!important;\n}\n\n#aboutVR{\n        float: none;\n    margin-left: 40px;\n    position: absolute;\n    line-height: 1.7;\n    margin-top: 2px;\n}\n\n#start, #stepForwardOptions{\n    display: none;\n}\n#stepForwardOptions{\n    width: 100%;\n}\n#reset{\n    margin-left: 20px;\n}\n\n\n#creasePercentNav{\n    margin-bottom: 0;\n    margin-top:12px;\n    color: white;\n    display: none;\n}\n\n.bigLabel{\n    font-size:16px;\n    margin-top: 20px;\n}\n.checkbox.bigLabel .icons, .radio .icons {\n    top: 2px;\n}\n\n.smallTxt{\n    font-size: 14px;\n}\ninput.form-control.bigInput{\n    width:300px;\n}\n\n.actionButton{\n    min-width: 110px;\n    font-size: 16px;\n}\n\n#unitsDropdown{\n    height: 100px;\n    overflow: auto;\n}\n\n.modal img{\n    width: 200px;\n}\n\na.seeMore{\n    float:none!important;\n    color: #34495e;\n}\na.seeMore&gt;.fui-triangle-down{\n    display: inline-block;\n    margin-right:10px;\n}\na.seeMore.closed&gt;.fui-triangle-down{\n    -ms-transform: rotate(-90deg); /* IE 9 */\n    -webkit-transform: rotate(-90deg); /* Chrome, Safari, Opera */\n    transform: rotate(-90deg);\n}\n\n.hide{\n    display: none;\n}\n\n.inlineBlock{\n    display: inline-block;\n}\n\n.alignRight{\n    text-align: right;\n}\n\n.fullWidth{\n    width: 100%;\n}\n\n#simulationSettings, #errorInfo,  #animationsSettings, #cameraAngle, #edgeVisibility, #virtualReality, #materialSettings{\n    margin-top: 15px;\n}\n.modal-body img{\n    margin-left: auto;\n    margin-right: auto;\n        display: block;\n}\n\n.colorSwatch{\n    display: inline-block;\n    width: 20px;\n    height: 10px;\n    margin-right: 10px;\n    margin-bottom: 2px;\n}\n\n#authorMoreInfo{\n    display: none;\n    position: absolute;\n    top:0px;\n    left:100px;\n    z-index: 5;\n}\n#authorMoreInfo&gt;#authorContent{\n    font-size: 14px;\n    background: #f5f5f5;\n    padding: 15px 25px;\n    margin-left: 20px;\n    color:#34495e;\n    white-space: normal;\n    width: 300px;\n    border: 2px solid #a8a6ae;\n}\n\n#authorMoreInfo a, #authorMoreInfo a:hover,#authorMoreInfo a:visited,#authorMoreInfo a:focus{\n    color: #ec008b !important;\n}\n\n#authorMoreInfo:after {\n    content: &#39;&#39;;\n    display: block;\n    position: absolute;\n    top: 19px;\n    left:11px;\n    width: 20px;\n    height: 20px;\n    background: #f5f5f5;\n    border-left:2px solid #a8a6ae;\n    border-bottom:2px solid #a8a6ae;\n    -ms-transform: rotate(45deg); /* IE 9 */\n     -moz-transform:rotate(45deg);\n      -webkit-transform:rotate(45deg);\n    transform: rotate(45deg);\n}\n\n#helper{\n    display: none;\n    position: absolute;\n    padding: 10px 15px;\n    font-size: 14px;\n    background: #f5f5f5;\n    margin-top: 20px;\n    opacity:0;\n    top: 54px;\n    -webkit-transition: opacity 1s; /* For Safari 3.1 to 6.0 */\n    transition: opacity 1s;\n    left: 140px;\n    color:#34495e;\n    white-space: normal;\n    border: 2px solid #a8a6ae;\n    /*transition-timing-function: easeInOutCubic;*/\n}\n\n#helper:after {\n    content: &#39;&#39;;\n    display: block;\n    position: absolute;\n    top: -12px;\n    left:105px;\n    width: 20px;\n    height: 20px;\n    background: #f5f5f5;\n    border-left:2px solid #a8a6ae;\n    border-top:2px solid #a8a6ae;\n    -ms-transform: rotate(45deg); /* IE 9 */\n     -moz-transform:rotate(45deg);\n      -webkit-transform:rotate(45deg);\n    transform: rotate(45deg);\n}\n\n#screenCaptureModal .modal-content, #animationSetupModal .modal-content{\n    background: rgba(255,255,255,0.9);\n}\n\n#recordStatus{\n    position: absolute;\n    bottom:20px;\n    width:350px;\n    left: 0;\n    right: 0;\n    margin: 0 auto;\n    z-index: 2;\n    display: none;\n}\n#stopRecord{\n    display: block;\n    margin-left: auto;\n    margin-right: auto;\n}\n\n.animationStep{\n    margin: 7px 0;\n    display: inline-block;\n    padding: 5px 15px;\n    background: #fff;\n}\n#animationSetupModal p, #animationSetupModal ul, #animationSetupModal div.btns{\n    text-align: center;\n    padding: 0;\n}\n.warning{\n    color: #f1970f;\n}\n\n.red{\n    color:red!important;\n}\n\n#coverImg{\n    z-index: 5;\n    position: absolute;\n    top: 0;\n    left: 0;\n    width: 100%;\n    height: 100%;\n}\n\nobject{\n    width:100%;\n    margin-bottom: 10px;\n}\n\n#aboutCorner{\n    display: none;\n    position: absolute;\n    z-index: 6;\n    top:0;\n    right:0;\n    background: rgba(40, 40, 40, 0.7);\n    width: 30px;\n    text-align: center;\n    color: white;\n}\n\n#noSupportModal{\n    text-align: center;\n}\n\n#tipImportSVG{\n    float: left;\n    display: inline-block;\n    margin-top: 8px;\n    margin-left: 20px;\n}\n\n#feedbackNotification {\n\tposition: absolute;\n    z-index: 10;\n    right: 130px;\n    top: 0;\n    padding: 5px 10px 4px;\n    font-size: 15px;\n    font-weight: 900;\n    background: #ff64bf;\n\tdisplay: none;\n\tflex-direction: row;\n\talign-items: center;\n}\n\n#feedbackNotification&gt;span {\n\tmax-width: 150px;\n    text-align: center;\n    display: inline-block;\n\tline-height: 22px;\n}\n\n@media only screen and (max-width: 1055px) {\n\t#feedbackNotification {\n\t  display: none;\n\t}\n}\n\n@media only screen and (max-width: 890px) {\n\t#feedback {\n\t  display: none;\n\t}\n}\n\n/* Bottom button styles */\n#bottomButtonContainer {\n    display: flex;\n    gap: 20px;\n    margin-left: 40px;\n    align-items: center;\n}\n\n#dlButton, #printButton {\n    color: #b0b0b0;\n    text-decoration: bold;\n    width: 5em;\n    text-align: center;\n    font-size: 9px;\n    font-weight: 500;\n    cursor: pointer;\n    transition: opacity 0.2s ease;\n    border: none;\n    background: none;\n    padding: 4px 8px;\n    margin: 0;\n    white-space: nowrap;\n}\n\n#dlButton:hover, #printButton:hover {\n    opacity: 0.7;\n    text-decoration: none !important;\n}\n\n#dlButton:focus, #printButton:focus {\n    outline: none;\n    text-decoration: none !important;\n}\n\n/* Custom CSS Styles */\n\n/* Styles for non-edit mode */\n.edit-mode-disabled #globalNav {\n    display: none !important;\n}\n\n.edit-mode-disabled body {\n    padding-top: 0 !important; /* Remove top padding when nav is hidden */\n}\n\n.edit-mode-disabled .main-content {\n    margin-top: 0 !important; /* Adjust main content position */\n}\n</style>\n    \n    <!-- Animation styles -->\n    <style>\n/* Animation Styles and Keyframes */\n\n/* Loading screen styles */\n#loadingScreen {\n    position: fixed;\n    top: 0;\n    left: 0;\n    width: 100%;\n    height: 100%;\n    background-color: #000000;\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    z-index: 9999;\n    font-family: 'Lato', 'Helvetica', Arial, sans-serif;\n}\n\n#loadingText {\n    color: #ffffff;\n    font-size: 16px;\n    font-weight: 300;\n    letter-spacing: 2px;\n}\n\n.loading-dots {\n    display: inline-block;\n    width: 60px;\n    text-align: left;\n}\n\n.loading-dots::after {\n    content: '';\n    animation: loadingDots 1.5s infinite;\n}\n\n/* Loading animation keyframes */\n@keyframes loadingDots {\n    0% {\n        content: '';\n    }\n    25% {\n        content: '.';\n    }\n    50% {\n        content: '..';\n    }\n    75% {\n        content: '...';\n    }\n    100% {\n        content: '';\n    }\n}\n\n/* Hide loading screen when ready */\n.loading-hidden #loadingScreen {\n    opacity: 0;\n    pointer-events: none;\n    transition: opacity 0.5s ease-out;\n}\n\n/* Smooth fade out animation */\n.fade-out-loading #loadingScreen {\n    animation: fadeOutLoading 0.8s ease-out forwards;\n}\n\n@keyframes fadeOutLoading {\n    0% {\n        opacity: 1;\n        visibility: visible;\n    }\n    100% {\n        opacity: 0;\n        visibility: hidden;\n    }\n}\n</style>\n    \n    <!-- \n    TODO: During content migration, extract:\n    - Meta tags from original template\n    - Link tags for external stylesheets\n    - Any additional head elements\n    -->\n    \n    <!-- NFT Data and Configuration Script -->\n    <!-- This will contain the main data object and initialization -->\n    <script>\n        // Global variables for NFT rendering\n        window.nftRenderComplete = false;\n        \n        // NFT data will be injected here during generation\n        // ___NFT_DATA_PLACEHOLDER___ will be replaced with actual data\n        const nftData = ___NFT_DATA_PLACEHOLDER___;\n        \n        // Edit mode configuration\n        const editMode = false;\n        window.editMode = editMode;\n        \n        // TODO: Extract origami patterns data from original template\n        // This will include the origamiPatterns array with SVG content\n        const origamiPatterns = [\n            // Pattern definitions will be migrated here\n        ];\n    </script>\n</head>",
      "bootstrap": [
        "Bootstrap CSS",
        "Bootstrap CSS",
        "bootstrap/4.5.3/css",
        "bootstrap.min.css"
      ],
      "nftData": {
        "pattern_0": [
          "const nftData = ___NFT_DATA_PLACEHOLDER___;"
        ],
        "pattern_1": [
          "window.nftData = window.nftData;",
          "window.nftData = nftData;",
          "window.nftData = null;"
        ],
        "pattern_2": [
          "___NFT_DATA_PLACEHOLDER___",
          "___NFT_DATA_PLACEHOLDER___"
        ]
      },
      "origamiPatterns": {
        "Airplane": 1,
        "Crane": 1,
        "Hypar": 1,
        "Pinwheel": 1,
        "Flower": 1
      },
      "scripts": {
        "external": [],
        "inline": 51,
        "total": 51
      },
      "threejsDependencies": {
        "pattern_0": 0,
        "pattern_1": 0,
        "pattern_2": 0,
        "pattern_3": 1,
        "pattern_4": 317
      },
      "shaders": {
        "pattern_0": 45,
        "pattern_1": 58,
        "pattern_2": 17,
        "pattern_3": 475
      },
      "animations": {
        "pattern_0": 3,
        "pattern_1": 8,
        "pattern_2": 8,
        "pattern_3": 2
      }
    }
  },
  "functionalityChecks": {
    "nftPlaceholder": true,
    "bootstrapIncluded": true,
    "threejsLoaded": false,
    "origamiPatternsPresent": true,
    "shadersPresent": true,
    "animationsPresent": true,
    "globalVariables": true,
    "editModeConfig": true
  },
  "differences": [
    {
      "section": "head",
      "original": "<head> <meta charset=\"UTF-8\"> <title>Katachi Gen</title> <meta name=\"viewport\" content=\"width=400\"> <style>:root{--blue:#007bff;--indigo:#6610f2;--purple:#6f42c1;--pink:#e83e8c;--red:#dc3545;--orange:#fd7e14;--yellow:#ffc107;--green:#28a745;--teal:#20c997;--cyan:#17a2b8;--white:#fff;--gray:#6c757d;--gray-dark:#343a40;--primary:#007bff;--secondary:#6c757d;--success:#28a745;--info:#17a2b8;--warning:#ffc107;--danger:#dc3545;--light:#f8f9fa;--dark:#343a40;--breakpoint-xs:0;--breakpoint-sm:576px;--breakpoint-md:768px;--breakpoint-lg:992px;--breakpoint-xl:1200px;--font-family-sans-serif:-apple-system,BlinkMacSystemFont,\"Segoe UI\",Roboto,\"Helvetica Neue\",Arial,\"Noto Sans\",sans-serif,\"Apple Color Emoji\",\"Segoe UI Emoji\",\"Segoe UI Symbol\",\"Noto Color Emoji\";--font-family-monospace:SFMono-Regular,Menlo,Monaco,Consolas,\"Liberation Mono\",\"Courier New\",monospace}*,::after,::before{box-sizing:border-box}html{font-family:sans-serif;line-height:1.15;-webkit-text-size-adjust:100%;-webkit-tap-highlight-color:transparent}article,aside,figcaption,figure,footer,header,hgroup,main,nav,section{display:block}body{margin:0;font-family:-apple-system,BlinkMacSystemFont,\"Segoe UI\",Roboto,\"Helvetica Neue\",Arial,\"Noto Sans\",sans-serif,\"Apple Color Emoji\",\"Segoe UI Emoji\",\"Segoe UI Symbol\",\"Noto Color Emoji\";font-size:1rem;font-weight:400;line-height:1.5;color:#212529;text-align:left;background-color:#fff}[tabindex=\"-1\"]:focus:not(:focus-visible){outline:0!important}hr{box-sizing:content-box;height:0;overflow:visible}h1,h2,h3,h4,h5,h6{margin-top:0;margin-bottom:.5rem}p{margin-top:0;margin-bottom:1rem}abbr[data-original-title],abbr[title]{text-decoration:underline;-webkit-text-decoration:underline dotted;text-decoration:underline dotted;cursor:help;border-bottom:0;-webkit-text-decoration-skip-ink:none;text-decoration-skip-ink:none}address{margin-bottom:1rem;font-style:normal;line-height:inherit}dl,ol,ul{margin-top:0;margin-bottom:1rem}ol ol,ol ul,ul ol,ul ul{margin-bottom:0}dt{font-weight:700}dd{margin-bottom:.5rem;margin-left:0}blockquote{margin:0 0 1rem}b,strong{font-weight:bolder}small{font-size:80%}sub,sup{position:relative;font-size:75%;line-height:0;vertical-align:baseline}sub{bottom:-.25em}sup{top:-.5em}a{color:#007bff;text-decoration:none;background-color:transparent}a:hover{color:#0056b3;text-decoration:underline}a:not([href]):not([class]){color:inherit;text-decoration:none}a:not([href]):not([class]):hover{color:inherit;text-decoration:none}code,kbd,pre,samp{font-family:SFMono-Regular,Menlo,Monaco,Consolas,\"Liberation Mono\",\"Courier New\",monospace;font-size:1em}pre{margin-top:0;margin-bottom:1rem;overflow:auto;-ms-overflow-style:scrollbar}figure{margin:0 0 1rem}img{vertical-align:middle;border-style:none}svg{overflow:hidden;vertical-align:middle}table{border-collapse:collapse}caption{padding-top:.75rem;padding-bottom:.75rem;color:#6c757d;text-align:left;caption-side:bottom}th{text-align:inherit;text-align:-webkit-match-parent}label{display:inline-block;margin-bottom:.5rem}button{border-radius:0}button:focus{outline:1px dotted;outline:5px auto -webkit-focus-ring-color}button,input,optgroup,select,textarea{margin:0;font-family:inherit;font-size:inherit;line-height:inherit}button,input{overflow:visible}button,select{text-transform:none}[role=button]{cursor:pointer}select{word-wrap:normal}[type=button],[type=reset],[type=submit],button{-webkit-appearance:button}[type=button]:not(:disabled),[type=reset]:not(:disabled),[type=submit]:not(:disabled),button:not(:disabled){cursor:pointer}[type=button]::-moz-focus-inner,[type=reset]::-moz-focus-inner,[type=submit]::-moz-focus-inner,button::-moz-focus-inner{padding:0;border-style:none}input[type=checkbox],input[type=radio]{box-sizing:border-box;padding:0}textarea{overflow:auto;resize:vertical}fieldset{min-width:0;padding:0;margin:0;border:0}legend{display:block;width:100%;max-width:100%;padding:0;margin-bottom:.5rem;font-size:1.5rem;line-height:inherit;color:inherit;white-space:normal}progress{vertical-align:baseline}[type=number]::-webkit-inner-spin-button,[type=number]::-webkit-outer-spin-button{height:auto}[type=search]{outline-offset:-2px;-webkit-appearance:none}[type=search]::-webkit-search-decoration{-webkit-appearance:none}::-webkit-file-upload-button{font:inherit;-webkit-appearance:button}output{display:inline-block}summary{display:list-item;cursor:pointer}template{display:none}[hidden]{display:none!important}.h1,.h2,.h3,.h4,.h5,.h6,h1,h2,h3,h4,h5,h6{margin-bottom:.5rem;font-weight:500;line-height:1.2}.h1,h1{font-size:2.5rem}.h2,h2{font-size:2rem}.h3,h3{font-size:1.75rem}.h4,h4{font-size:1.5rem}.h5,h5{font-size:1.25rem}.h6,h6{font-size:1rem}.lead{font-size:1.25rem;font-weight:300}.display-1{font-size:6rem;font-weight:300;line-height:1.2}.display-2{font-size:5.5rem;font-weight:300;line-height:1.2}.display-3{font-size:4.5rem;font-weight:300;line-height:1.2}.display-4{font-size:3.5rem;font-weight:300;line-height:1.2}hr{margin-top:1rem;margin-bottom:1rem;border:0;border-top:1px solid rgba(0,0,0,.1)}.small,small{font-size:80%;font-weight:400}.mark,mark{padding:.2em;background-color:#fcf8e3}.list-unstyled{padding-left:0;list-style:none}.list-inline{padding-left:0;list-style:none}.list-inline-item{display:inline-block}.list-inline-item:not(:last-child){margin-right:.5rem}.initialism{font-size:90%;text-transform:uppercase}.blockquote{margin-bottom:1rem;font-size:1.25rem}.blockquote-footer{display:block;font-size:80%;color:#6c757d}.blockquote-footer::before{content:\"\\2014\\00A0\"}.img-fluid{max-width:100%;height:auto}.img-thumbnail{padding:.25rem;background-color:#fff;border:1px solid #dee2e6;border-radius:.25rem;max-width:100%;height:auto}.figure{display:inline-block}.figure-img{margin-bottom:.5rem;line-height:1}.figure-caption{font-size:90%;color:#6c757d}code{font-size:87.5%;color:#e83e8c;word-wrap:break-word}a>code{color:inherit}kbd{padding:.2rem .4rem;font-size:87.5%;color:#fff;background-color:#212529;border-radius:.2rem}kbd kbd{padding:0;font-size:100%;font-weight:700}pre{display:block;font-size:87.5%;color:#212529}pre code{font-size:inherit;color:inherit;word-break:normal}.pre-scrollable{max-height:340px;overflow-y:scroll}.container,.container-fluid,.container-lg,.container-md,.container-sm,.container-xl{width:100%;padding-right:15px;padding-left:15px;margin-right:auto;margin-left:auto}@media (min-width:576px){.container,.container-sm{max-width:540px}}@media (min-width:768px){.container,.container-md,.container-sm{max-width:720px}}@media (min-width:992px){.container,.container-lg,.container-md,.container-sm{max-width:960px}}@media (min-width:1200px){.container,.container-lg,.container-md,.container-sm,.container-xl{max-width:1140px}}.row{display:-ms-flexbox;display:flex;-ms-flex-wrap:wrap;flex-wrap:wrap;margin-right:-15px;margin-left:-15px}.no-gutters{margin-right:0;margin-left:0}.no-gutters>.col,.no-gutters>[class*=col-]{padding-right:0;padding-left:0}.col,.col-1,.col-10,.col-11,.col-12,.col-2,.col-3,.col-4,.col-5,.col-6,.col-7,.col-8,.col-9,.col-auto,.col-lg,.col-lg-1,.col-lg-10,.col-lg-11,.col-lg-12,.col-lg-2,.col-lg-3,.col-lg-4,.col-lg-5,.col-lg-6,.col-lg-7,.col-lg-8,.col-lg-9,.col-lg-auto,.col-md,.col-md-1,.col-md-10,.col-md-11,.col-md-12,.col-md-2,.col-md-3,.col-md-4,.col-md-5,.col-md-6,.col-md-7,.col-md-8,.col-md-9,.col-md-auto,.col-sm,.col-sm-1,.col-sm-10,.col-sm-11,.col-sm-12,.col-sm-2,.col-sm-3,.col-sm-4,.col-sm-5,.col-sm-6,.col-sm-7,.col-sm-8,.col-sm-9,.col-sm-auto,.col-xl,.col-xl-1,.col-xl-10,.col-xl-11,.col-xl-12,.col-xl-2,.col-xl-3,.col-xl-4,.col-xl-5,.col-xl-6,.col-xl-7,.col-xl-8,.col-xl-9,.col-xl-auto{position:relative;width:100%;padding-right:15px;padding-left:15px}.col{-ms-flex-preferred-size:0;flex-basis:0;-ms-flex-positive:1;flex-grow:1;max-width:100%}.row-cols-1>*{-ms-flex:0 0 100%;flex:0 0 100%;max-width:100%}.row-cols-2>*{-ms-flex:0 0 50%;flex:0 0 50%;max-width:50%}.row-cols-3>*{-ms-flex:0 0 33.333333%;flex:0 0 33.333333%;max-width:33.333333%}.row-cols-4>*{-ms-flex:0 0 25%;flex:0 0 25%;max-width:25%}.row-cols-5>*{-ms-flex:0 0 20%;flex:0 0 20%;max-width:20%}.row-cols-6>*{-ms-flex:0 0 16.666667%;flex:0 0 16.666667%;max-width:16.666667%}.col-auto{-ms-flex:0 0 auto;flex:0 0 auto;width:auto;max-width:100%}.col-1{-ms-flex:0 0 8.333333%;flex:0 0 8.333333%;max-width:8.333333%}.col-2{-ms-flex:0 0 16.666667%;flex:0 0 16.666667%;max-width:16.666667%}.col-3{-ms-flex:0 0 25%;flex:0 0 25%;max-width:25%}.col-4{-ms-flex:0 0 33.333333%;flex:0 0 33.333333%;max-width:33.333333%}.col-5{-ms-flex:0 0 41.666667%;flex:0 0 41.666667%;max-width:41.666667%}.col-6{-ms-flex:0 0 50%;flex:0 0 50%;max-width:50%}.col-7{-ms-flex:0 0 58.333333%;flex:0 0 58.333333%;max-width:58.333333%}.col-8{-ms-flex:0 0 66.666667%;flex:0 0 66.666667%;max-width:66.666667%}.col-9{-ms-flex:0 0 75%;flex:0 0 75%;max-width:75%}.col-10{-ms-flex:0 0 83.333333%;flex:0 0 83.333333%;max-width:83.333333%}.col-11{-ms-flex:0 0 91.666667%;flex:0 0 91.666667%;max-width:91.666667%}.col-12{-ms-flex:0 0 100%;flex:0 0 100%;max-width:100%}.order-first{-ms-flex-order:-1;order:-1}.order-last{-ms-flex-order:13;order:13}.order-0{-ms-flex-order:0;order:0}.order-1{-ms-flex-order:1;order:1}.order-2{-ms-flex-order:2;order:2}.order-3{-ms-flex-order:3;order:3}.order-4{-ms-flex-order:4;order:4}.order-5{-ms-flex-order:5;order:5}.order-6{-ms-flex-order:6;order:6}.order-7{-ms-flex-order:7;order:7}.order-8{-ms-flex-order:8;order:8}.order-9{-ms-flex-order:9;order:9}.order-10{-ms-flex-order:10;order:10}.order-11{-ms-flex-order:11;order:11}.order-12{-ms-flex-order:12;order:12}.offset-1{margin-left:8.333333%}.offset-2{margin-left:16.666667%}.offset-3{margin-left:25%}.offset-4{margin-left:33.333333%}.offset-5{margin-left:41.666667%}.offset-6{margin-left:50%}.offset-7{margin-left:58.333333%}.offset-8{margin-left:66.666667%}.offset-9{margin-left:75%}.offset-10{margin-left:83.333333%}.offset-11{margin-left:91.666667%}@media (min-width:576px){.col-sm{-ms-flex-preferred-size:0;flex-basis:0;-ms-flex-positive:1;flex-grow:1;max-width:100%}.row-cols-sm-1>*{-ms-flex:0 0 100%;flex:0 0 100%;max-width:100%}.row-cols-sm-2>*{-ms-flex:0 0 50%;flex:0 0 50%;max-width:50%}.row-cols-sm-3>*{-ms-flex:0 0 33.333333%;flex:0 0 33.333333%;max-width:33.333333%}.row-cols-sm-4>*{-ms-flex:0 0 25%;flex:0 0 25%;max-width:25%}.row-cols-sm-5>*{-ms-flex:0 0 20%;flex:0 0 20%;max-width:20%}.row-cols-sm-6>*{-ms-flex:0 0 16.666667%;flex:0 0 16.666667%;max-width:16.666667%}.col-sm-auto{-ms-flex:0 0 auto;flex:0 0 auto;width:auto;max-width:100%}.col-sm-1{-ms-flex:0 0 8.333333%;flex:0 0 8.333333%;max-width:8.333333%}.col-sm-2{-ms-flex:0 0 16.666667%;flex:0 0 16.666667%;max-width:16.666667%}.col-sm-3{-ms-flex:0 0 25%;flex:0 0 25%;max-width:25%}.col-sm-4{-ms-flex:0 0 33.333333%;flex:0 0 33.333333%;max-width:33.333333%}.col-sm-5{-ms-flex:0 0 41.666667%;flex:0 0 41.666667%;max-width:41.666667%}.col-sm-6{-ms-flex:0 0 50%;flex:0 0 50%;max-width:50%}.col-sm-7{-ms-flex:0 0 58.333333%;flex:0 0 58.333333%;max-width:58.333333%}.col-sm-8{-ms-flex:0 0 66.666667%;flex:0 0 66.666667%;max-width:66.666667%}.col-sm-9{-ms-flex:0 0 75%;flex:0 0 75%;max-width:75%}.col-sm-10{-ms-flex:0 0 83.333333%;flex:0 0 83.333333%;max-width:83.333333%}.col-sm-11{-ms-flex:0 0 91.666667%;flex:0 0 91.666667%;max-width:91.666667%}.col-sm-12{-ms-flex:0 0 100%;flex:0 0 100%;max-width:100%}.order-sm-first{-ms-flex-order:-1;order:-1}.order-sm-last{-ms-flex-order:13;order:13}.order-sm-0{-ms-flex-order:0;order:0}.order-sm-1{-ms-flex-order:1;order:1}.order-sm-2{-ms-flex-order:2;order:2}.order-sm-3{-ms-flex-order:3;order:3}.order-sm-4{-ms-flex-order:4;order:4}.order-sm-5{-ms-flex-order:5;order:5}.order-sm-6{-ms-flex-order:6;order:6}.order-sm-7{-ms-flex-order:7;order:7}.order-sm-8{-ms-flex-order:8;order:8}.order-sm-9{-ms-flex-order:9;order:9}.order-sm-10{-ms-flex-order:10;order:10}.order-sm-11{-ms-flex-order:11;order:11}.order-sm-12{-ms-flex-order:12;order:12}.offset-sm-0{margin-left:0}.offset-sm-1{margin-left:8.333333%}.offset-sm-2{margin-left:16.666667%}.offset-sm-3{margin-left:25%}.offset-sm-4{margin-left:33.333333%}.offset-sm-5{margin-left:41.666667%}.offset-sm-6{margin-left:50%}.offset-sm-7{margin-left:58.333333%}.offset-sm-8{margin-left:66.666667%}.offset-sm-9{margin-left:75%}.offset-sm-10{margin-left:83.333333%}.offset-sm-11{margin-left:91.666667%}}@media (min-width:768px){.col-md{-ms-flex-preferred-size:0;flex-basis:0;-ms-flex-positive:1;flex-grow:1;max-width:100%}.row-cols-md-1>*{-ms-flex:0 0 100%;flex:0 0 100%;max-width:100%}.row-cols-md-2>*{-ms-flex:0 0 50%;flex:0 0 50%;max-width:50%}.row-cols-md-3>*{-ms-flex:0 0 33.333333%;flex:0 0 33.333333%;max-width:33.333333%}.row-cols-md-4>*{-ms-flex:0 0 25%;flex:0 0 25%;max-width:25%}.row-cols-md-5>*{-ms-flex:0 0 20%;flex:0 0 20%;max-width:20%}.row-cols-md-6>*{-ms-flex:0 0 16.666667%;flex:0 0 16.666667%;max-width:16.666667%}.col-md-auto{-ms-flex:0 0 auto;flex:0 0 auto;width:auto;max-width:100%}.col-md-1{-ms-flex:0 0 8.333333%;flex:0 0 8.333333%;max-width:8.333333%}.col-md-2{-ms-flex:0 0 16.666667%;flex:0 0 16.666667%;max-width:16.666667%}.col-md-3{-ms-flex:0 0 25%;flex:0 0 25%;max-width:25%}.col-md-4{-ms-flex:0 0 33.333333%;flex:0 0 33.333333%;max-width:33.333333%}.col-md-5{-ms-flex:0 0 41.666667%;flex:0 0 41.666667%;max-width:41.666667%}.col-md-6{-ms-flex:0 0 50%;flex:0 0 50%;max-width:50%}.col-md-7{-ms-flex:0 0 58.333333%;flex:0 0 58.333333%;max-width:58.333333%}.col-md-8{-ms-flex:0 0 66.666667%;flex:0 0 66.666667%;max-width:66.666667%}.col-md-9{-ms-flex:0 0 75%;flex:0 0 75%;max-width:75%}.col-md-10{-ms-flex:0 0 83.333333%;flex:0 0 83.333333%;max-width:83.333333%}.col-md-11{-ms-flex:0 0 91.666667%;flex:0 0 91.666667%;max-width:91.666667%}.col-md-12{-ms-flex:0 0 100%;flex:0 0 100%;max-width:100%}.order-md-first{-ms-flex-order:-1;order:-1}.order-md-last{-ms-flex-order:13;order:13}.order-md-0{-ms-flex-order:0;order:0}.order-md-1{-ms-flex-order:1;order:1}.order-md-2{-ms-flex-order:2;order:2}.order-md-3{-ms-flex-order:3;order:3}.order-md-4{-ms-flex-order:4;order:4}.order-md-5{-ms-flex-order:5;order:5}.order-md-6{-ms-flex-order:6;order:6}.order-md-7{-ms-flex-order:7;order:7}.order-md-8{-ms-flex-order:8;order:8}.order-md-9{-ms-flex-order:9;order:9}.order-md-10{-ms-flex-order:10;order:10}.order-md-11{-ms-flex-order:11;order:11}.order-md-12{-ms-flex-order:12;order:12}.offset-md-0{margin-left:0}.offset-md-1{margin-left:8.333333%}.offset-md-2{margin-left:16.666667%}.offset-md-3{margin-left:25%}.offset-md-4{margin-left:33.333333%}.offset-md-5{margin-left:41.666667%}.offset-md-6{margin-left:50%}.offset-md-7{margin-left:58.333333%}.offset-md-8{margin-left:66.666667%}.offset-md-9{margin-left:75%}.offset-md-10{margin-left:83.333333%}.offset-md-11{margin-left:91.666667%}}@media (min-width:992px){.col-lg{-ms-flex-preferred-size:0;flex-basis:0;-ms-flex-positive:1;flex-grow:1;max-width:100%}.row-cols-lg-1>*{-ms-flex:0 0 100%;flex:0 0 100%;max-width:100%}.row-cols-lg-2>*{-ms-flex:0 0 50%;flex:0 0 50%;max-width:50%}.row-cols-lg-3>*{-ms-flex:0 0 33.333333%;flex:0 0 33.333333%;max-width:33.333333%}.row-cols-lg-4>*{-ms-flex:0 0 25%;flex:0 0 25%;max-width:25%}.row-cols-lg-5>*{-ms-flex:0 0 20%;flex:0 0 20%;max-width:20%}.row-cols-lg-6>*{-ms-flex:0 0 16.666667%;flex:0 0 16.666667%;max-width:16.666667%}.col-lg-auto{-ms-flex:0 0 auto;flex:0 0 auto;width:auto;max-width:100%}.col-lg-1{-ms-flex:0 0 8.333333%;flex:0 0 8.333333%;max-width:8.333333%}.col-lg-2{-ms-flex:0 0 16.666667%;flex:0 0 16.666667%;max-width:16.666667%}.col-lg-3{-ms-flex:0 0 25%;flex:0 0 25%;max-width:25%}.col-lg-4{-ms-flex:0 0 33.333333%;flex:0 0 33.333333%;max-width:33.333333%}.col-lg-5{-ms-flex:0 0 41.666667%;flex:0 0 41.666667%;max-width:41.666667%}.col-lg-6{-ms-flex:0 0 50%;flex:0 0 50%;max-width:50%}.col-lg-7{-ms-flex:0 0 58.333333%;flex:0 0 58.333333%;max-width:58.333333%}.col-lg-8{-ms-flex:0 0 66.666667%;flex:0 0 66.666667%;max-width:66.666667%}.col-lg-9{-ms-flex:0 0 75%;flex:0 0 75%;max-width:75%}.col-lg-10{-ms-flex:0 0 83.333333%;flex:0 0 83.333333%;max-width:83.333333%}.col-lg-11{-ms-flex:0 0 91.666667%;flex:0 0 91.666667%;max-width:91.666667%}.col-lg-12{-ms-flex:0 0 100%;flex:0 0 100%;max-width:100%}.order-lg-first{-ms-flex-order:-1;order:-1}.order-lg-last{-ms-flex-order:13;order:13}.order-lg-0{-ms-flex-order:0;order:0}.order-lg-1{-ms-flex-order:1;order:1}.order-lg-2{-ms-flex-order:2;order:2}.order-lg-3{-ms-flex-order:3;order:3}.order-lg-4{-ms-flex-order:4;order:4}.order-lg-5{-ms-flex-order:5;order:5}.order-lg-6{-ms-flex-order:6;order:6}.order-lg-7{-ms-flex-order:7;order:7}.order-lg-8{-ms-flex-order:8;order:8}.order-lg-9{-ms-flex-order:9;order:9}.order-lg-10{-ms-flex-order:10;order:10}.order-lg-11{-ms-flex-order:11;order:11}.order-lg-12{-ms-flex-order:12;order:12}.offset-lg-0{margin-left:0}.offset-lg-1{margin-left:8.333333%}.offset-lg-2{margin-left:16.666667%}.offset-lg-3{margin-left:25%}.offset-lg-4{margin-left:33.333333%}.offset-lg-5{margin-left:41.666667%}.offset-lg-6{margin-left:50%}.offset-lg-7{margin-left:58.333333%}.offset-lg-8{margin-left:66.666667%}.offset-lg-9{margin-left:75%}.offset-lg-10{margin-left:83.333333%}.offset-lg-11{margin-left:91.666667%}}@media (min-width:1200px){.col-xl{-ms-flex-preferred-size:0;flex-basis:0;-ms-flex-positive:1;flex-grow:1;max-width:100%}.row-cols-xl-1>*{-ms-flex:0 0 100%;flex:0 0 100%;max-width:100%}.row-cols-xl-2>*{-ms-flex:0 0 50%;flex:0 0 50%;max-width:50%}.row-cols-xl-3>*{-ms-flex:0 0 33.333333%;flex:0 0 33.333333%;max-width:33.333333%}.row-cols-xl-4>*{-ms-flex:0 0 25%;flex:0 0 25%;max-width:25%}.row-cols-xl-5>*{-ms-flex:0 0 20%;flex:0 0 20%;max-width:20%}.row-cols-xl-6>*{-ms-flex:0 0 16.666667%;flex:0 0 16.666667%;max-width:16.666667%}.col-xl-auto{-ms-flex:0 0 auto;flex:0 0 auto;width:auto;max-width:100%}.col-xl-1{-ms-flex:0 0 8.333333%;flex:0 0 8.333333%;max-width:8.333333%}.col-xl-2{-ms-flex:0 0 16.666667%;flex:0 0 16.666667%;max-width:16.666667%}.col-xl-3{-ms-flex:0 0 25%;flex:0 0 25%;max-width:25%}.col-xl-4{-ms-flex:0 0 33.333333%;flex:0 0 33.333333%;max-width:33.333333%}.col-xl-5{-ms-flex:0 0 41.666667%;flex:0 0 41.666667%;max-width:41.666667%}.col-xl-6{-ms-flex:0 0 50%;flex:0 0 50%;max-width:50%}.col-xl-7{-ms-flex:0 0 58.333333%;flex:0 0 58.333333%;max-width:58.333333%}.col-xl-8{-ms-flex:0 0 66.666667%;flex:0 0 66.666667%;max-width:66.666667%}.col-xl-9{-ms-flex:0 0 75%;flex:0 0 75%;max-width:75%}.col-xl-10{-ms-flex:0 0 83.333333%;flex:0 0 83.333333%;max-width:83.333333%}.col-xl-11{-ms-flex:0 0 91.666667%;flex:0 0 91.666667%;max-width:91.666667%}.col-xl-12{-ms-flex:0 0 100%;flex:0 0 100%;max-width:100%}.order-xl-first{-ms-flex-order:-1;order:-1}.order-xl-last{-ms-flex-order:13;order:13}.order-xl-0{-ms-flex-order:0;order:0}.order-xl-1{-ms-flex-order:1;order:1}.order-xl-2{-ms-flex-order:2;order:2}.order-xl-3{-ms-flex-order:3;order:3}.order-xl-4{-ms-flex-order:4;order:4}.order-xl-5{-ms-flex-order:5;order:5}.order-xl-6{-ms-flex-order:6;order:6}.order-xl-7{-ms-flex-order:7;order:7}.order-xl-8{-ms-flex-order:8;order:8}.order-xl-9{-ms-flex-order:9;order:9}.order-xl-10{-ms-flex-order:10;order:10}.order-xl-11{-ms-flex-order:11;order:11}.order-xl-12{-ms-flex-order:12;order:12}.offset-xl-0{margin-left:0}.offset-xl-1{margin-left:8.333333%}.offset-xl-2{margin-left:16.666667%}.offset-xl-3{margin-left:25%}.offset-xl-4{margin-left:33.333333%}.offset-xl-5{margin-left:41.666667%}.offset-xl-6{margin-left:50%}.offset-xl-7{margin-left:58.333333%}.offset-xl-8{margin-left:66.666667%}.offset-xl-9{margin-left:75%}.offset-xl-10{margin-left:83.333333%}.offset-xl-11{margin-left:91.666667%}}.table{width:100%;margin-bottom:1rem;color:#212529}.table td,.table th{padding:.75rem;vertical-align:top;border-top:1px solid #dee2e6}.table thead th{vertical-align:bottom;border-bottom:2px solid #dee2e6}.table tbody+tbody{border-top:2px solid #dee2e6}.table-sm td,.table-sm th{padding:.3rem}.table-bordered{border:1px solid #dee2e6}.table-bordered td,.table-bordered th{border:1px solid #dee2e6}.table-bordered thead td,.table-bordered thead th{border-bottom-width:2px}.table-borderless tbody+tbody,.table-borderless td,.table-borderless th,.table-borderless thead th{border:0}.table-striped tbody tr:nth-of-type(odd){background-color:rgba(0,0,0,.05)}.table-hover tbody tr:hover{color:#212529;background-color:rgba(0,0,0,.075)}.table-primary,.table-primary>td,.table-primary>th{background-color:#b8daff}.table-primary tbody+tbody,.table-primary td,.table-primary th,.table-primary thead th{border-color:#7abaff}.table-hover .table-primary:hover{background-color:#9fcdff}.table-hover .table-primary:hover>td,.table-hover .table-primary:hover>th{background-color:#9fcdff}.table-secondary,.table-secondary>td,.table-secondary>th{background-color:#d6d8db}.table-secondary tbody+tbody,.table-secondary td,.table-secondary th,.table-secondary thead th{border-color:#b3b7bb}.table-hover .table-secondary:hover{background-color:#c8cbcf}.table-hover .table-secondary:hover>td,.table-hover .table-secondary:hover>th{background-color:#c8cbcf}.table-success,.table-success>td,.table-success>th{background-color:#c3e6cb}.table-success tbody+tbody,.table-success td,.table-success th,.table-success thead th{border-color:#8fd19e}.table-hover .table-success:hover{background-color:#b1dfbb}.table-hover .table-success:hover>td,.table-hover .table-success:hover>th{background-color:#b1dfbb}.table-info,.table-info>td,.table-info>th{background-color:#bee5eb}.table-info tbody+tbody,.table-info td,.table-info th,.table-info thead th{border-color:#86cfda}.table-hover .table-info:hover{background-color:#abdde5}.table-hover .table-info:hover>td,.table-hover .table-info:hover>th{background-color:#abdde5}.table-warning,.table-warning>td,.table-warning>th{background-color:#ffeeba}.table-warning tbody+tbody,.table-warning td,.table-warning th,.table-warning thead th{border-color:#ffdf7e}.table-hover .table-warning:hover{background-color:#ffe8a1}.table-hover .table-warning:hover>td,.table-hover .table-warning:hover>th{background-color:#ffe8a1}.table-danger,.table-danger>td,.table-danger>th{background-color:#f5c6cb}.table-danger tbody+tbody,.table-danger td,.table-danger th,.table-danger thead th{border-color:#ed969e}.table-hover .table-danger:hover{background-color:#f1b0b7}.table-hover .table-danger:hover>td,.table-hover .table-danger:hover>th{background-color:#f1b0b7}.table-light,.table-light>td,.table-light>th{background-color:#fdfdfe}.table-light tbody+tbody,.table-light td,.table-light th,.table-light thead th{border-color:#fbfcfc}.table-hover .table-light:hover{background-color:#ececf6}.table-hover .table-light:hover>td,.table-hover .table-light:hover>th{background-color:#ececf6}.table-dark,.table-dark>td,.table-dark>th{background-color:#c6c8ca}.table-dark tbody+tbody,.table-dark td,.table-dark th,.table-dark thead th{border-color:#95999c}.table-hover .table-dark:hover{background-color:#b9bbbe}.table-hover .table-dark:hover>td,.table-hover .table-dark:hover>th{background-color:#b9bbbe}.table-active,.table-active>td,.table-active>th{background-color:rgba(0,0,0,.075)}.table-hover .table-active:hover{background-color:rgba(0,0,0,.075)}.table-hover .table-active:hover>td,.table-hover .table-active:hover>th{background-color:rgba(0,0,0,.075)}.table .thead-dark th{color:#fff;background-color:#343a40;border-color:#454d55}.table .thead-light th{color:#495057;background-color:#e9ecef;border-color:#dee2e6}.table-dark{color:#fff;background-color:#343a40}.table-dark td,.table-dark th,.table-dark thead th{border-color:#454d55}.table-dark.table-bordered{border:0}.table-dark.table-striped tbody tr:nth-of-type(odd){background-color:rgba(255,255,255,.05)}.table-dark.table-hover tbody tr:hover{color:#fff;background-color:rgba(255,255,255,.075)}@media (max-width:575.98px){.table-responsive-sm{display:block;width:100%;overflow-x:auto;-webkit-overflow-scrolling:touch}.table-responsive-sm>.table-bordered{border:0}}@media (max-width:767.98px){.table-responsive-md{display:block;width:100%;overflow-x:auto;-webkit-overflow-scrolling:touch}.table-responsive-md>.table-bordered{border:0}}@media (max-width:991.98px){.table-responsive-lg{display:block;width:100%;overflow-x:auto;-webkit-overflow-scrolling:touch}.table-responsive-lg>.table-bordered{border:0}}@media (max-width:1199.98px){.table-responsive-xl{display:block;width:100%;overflow-x:auto;-webkit-overflow-scrolling:touch}.table-responsive-xl>.table-bordered{border:0}}.table-responsive{display:block;width:100%;overflow-x:auto;-webkit-overflow-scrolling:touch}.table-responsive>.table-bordered{border:0}.form-control{display:block;width:100%;height:calc(1.5em + .75rem + 2px);padding:.375rem .75rem;font-size:1rem;font-weight:400;line-height:1.5;color:#495057;background-color:#fff;background-clip:padding-box;border:1px solid #ced4da;border-radius:.25rem;transition:border-color .15s ease-in-out,box-shadow .15s ease-in-out}@media (prefers-reduced-motion:reduce){.form-control{transition:none}}.form-control::-ms-expand{background-color:transparent;border:0}.form-control:-moz-focusring{color:transparent;text-shadow:0 0 0 #495057}.form-control:focus{color:#495057;background-color:#fff;border-color:#80bdff;outline:0;box-shadow:0 0 0 .2rem rgba(0,123,255,.25)}.form-control::-webkit-input-placeholder{color:#6c757d;opacity:1}.form-control::-moz-placeholder{color:#6c757d;opacity:1}.form-control:-ms-input-placeholder{color:#6c757d;opacity:1}.form-control::-ms-input-placeholder{color:#6c757d;opacity:1}.form-control::placeholder{color:#6c757d;opacity:1}.form-control:disabled,.form-control[readonly]{background-color:#e9ecef;opacity:1}input[type=date].form-control,input[type=datetime-local].form-control,input[type=month].form-control,input[type=time].form-control{-webkit-appearance:none;-moz-appearance:none;appearance:none}select.form-control:focus::-ms-value{color:#495057;background-color:#fff}.form-control-file,.form-control-range{display:block;width:100%}.col-form-label{padding-top:calc(.375rem + 1px);padding-bottom:calc(.375rem + 1px);margin-bottom:0;font-size:inherit;line-height:1.5}.col-form-label-lg{padding-top:calc(.5rem + 1px);padding-bottom:calc(.5rem + 1px);font-size:1.25rem;line-height:1.5}.col-form-label-sm{padding-top:calc(.25rem + 1px);padding-bottom:calc(.25rem + 1px);font-size:.875rem;line-height:1.5}.form-control-plaintext{display:block;width:100%;padding:.375rem 0;margin-bottom:0;font-size:1rem;line-height:1.5;color:#212529;background-color:transparent;border:solid transparent;border-width:1px 0}.form-control-plaintext.form-control-lg,.form-control-plaintext.form-control-sm{padding-right:0;padding-left:0}.form-control-sm{height:calc(1.5em + .5rem + 2px);padding:.25rem .5rem;font-size:.875rem;line-height:1.5;border-radius:.2rem}.form-control-lg{height:calc(1.5em + 1rem + 2px);padding:.5rem 1rem;font-size:1.25rem;line-height:1.5;border-radius:.3rem}select.form-control[multiple],select.form-control[size]{height:auto}textarea.form-control{height:auto}.form-group{margin-bottom:1rem}.form-text{display:block;margin-top:.25rem}.form-row{display:-ms-flexbox;display:flex;-ms-flex-wrap:wrap;flex-wrap:wrap;margin-right:-5px;margin-left:-5px}.form-row>.col,.form-row>[class*=col-]{padding-right:5px;padding-left:5px}.form-check{position:relative;display:block;padding-left:1.25rem}.form-check-input{position:absolute;margin-top:.3rem;margin-left:-1.25rem}.form-check-input:disabled~.form-check-label,.form-check-input[disabled]~.form-check-label{color:#6c757d}.form-check-label{margin-bottom:0}.form-check-inline{display:-ms-inline-flexbox;display:inline-flex;-ms-flex-align:center;align-items:center;padding-left:0;margin-right:.75rem}.form-check-inline .form-check-input{position:static;margin-top:0;margin-right:.3125rem;margin-left:0}.valid-feedback{display:none;width:100%;margin-top:.25rem;font-size:80%;color:#28a745}.valid-tooltip{position:absolute;top:100%;left:0;z-index:5;display:none;max-width:100%;padding:.25rem .5rem;margin-top:.1rem;font-size:.875rem;line-height:1.5;color:#fff;background-color:rgba(40,167,69,.9);border-radius:.25rem}.is-valid~.valid-feedback,.is-valid~.valid-tooltip,.was-validated :valid~.valid-feedback,.was-validated :valid~.valid-tooltip{display:block}.form-control.is-valid,.was-validated .form-control:valid{border-color:#28a745;padding-right:calc(1.5em + .75rem);background-image:url(\"data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' width='8' height='8' viewBox='0 0 8 8'%3e%3cpath fill='%2328a745' d='M2.3 6.73L.6 4.53c-.4-1.04.46-1.4 1.1-.8l1.1 1.4 3.4-3.8c.6-.63 1.6-.27 1.2.7l-4 4.6c-.43.5-.8.4-1.1.1z'/%3e%3c/svg%3e\");background-repeat:no-repeat;background-position:right calc(.375em + .1875rem) center;background-size:calc(.75em + .375rem) calc(.75em + .375rem)}.form-control.is-valid:focus,.was-validated .form-control:valid:focus{border-color:#28a745;box-shadow:0 0 0 .2rem rgba(40,167,69,.25)}.was-validated textarea.form-control:valid,textarea.form-control.is-valid{padding-right:calc(1.5em + .75rem);background-position:top calc(.375em + .1875rem) right calc(.375em + .1875rem)}.custom-select.is-valid,.was-validated .custom-select:valid{border-color:#28a745;padding-right:calc(.75em + 2.3125rem);background:url(\"data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' width='4' height='5' viewBox='0 0 4 5'%3e%3cpath fill='%23343a40' d='M2 0L0 2h4zm0 5L0 3h4z'/%3e%3c/svg%3e\") no-repeat right .75rem center/8px 10px,url(\"data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' width='8' height='8' viewBox='0 0 8 8'%3e%3cpath fill='%2328a745' d='M2.3 6.73L.6 4.53c-.4-1.04.46-1.4 1.1-.8l1.1 1.4 3.4-3.8c.6-.63 1.6-.27 1.2.7l-4 4.6c-.43.5-.8.4-1.1.1z'/%3e%3c/svg%3e\") #fff no-repeat center right 1.75rem/calc(.75em + .375rem) calc(.75em + .375rem)}.custom-select.is-valid:focus,.was-validated .custom-select:valid:focus{border-color:#28a745;box-shadow:0 0 0 .2rem rgba(40,167,69,.25)}.form-check-input.is-valid~.form-check-label,.was-validated .form-check-input:valid~.form-check-label{color:#28a745}.form-check-input.is-valid~.valid-feedback,.form-check-input.is-valid~.valid-tooltip,.was-validated .form-check-input:valid~.valid-feedback,.was-validated .form-check-input:valid~.valid-tooltip{display:block}.custom-control-input.is-valid~.custom-control-label,.was-validated .custom-control-input:valid~.custom-control-label{color:#28a745}.custom-control-input.is-valid~.custom-control-label::before,.was-validated .custom-control-input:valid~.custom-control-label::before{border-color:#28a745}.custom-control-input.is-valid:checked~.custom-control-label::before,.was-validated .custom-control-input:valid:checked~.custom-control-label::before{border-color:#34ce57;background-color:#34ce57}.custom-control-input.is-valid:focus~.custom-control-label::before,.was-validated .custom-control-input:valid:focus~.custom-control-label::before{box-shadow:0 0 0 .2rem rgba(40,167,69,.25)}.custom-control-input.is-valid:focus:not(:checked)~.custom-control-label::before,.was-validated .custom-control-input:valid:focus:not(:checked)~.custom-control-label::before{border-color:#28a745}.custom-file-input.is-valid~.custom-file-label,.was-validated .custom-file-input:valid~.custom-file-label{border-color:#28a745}.custom-file-input.is-valid:focus~.custom-file-label,.was-validated .custom-file-input:valid:focus~.custom-file-label{border-color:#28a745;box-shadow:0 0 0 .2rem rgba(40,167,69,.25)}.invalid-feedback{display:none;width:100%;margin-top:.25rem;font-size:80%;color:#dc3545}.invalid-tooltip{position:absolute;top:100%;left:0;z-index:5;display:none;max-width:100%;padding:.25rem .5rem;margin-top:.1rem;font-size:.875rem;line-height:1.5;color:#fff;background-color:rgba(220,53,69,.9);border-radius:.25rem}.is-invalid~.invalid-feedback,.is-invalid~.invalid-tooltip,.was-validated :invalid~.invalid-feedback,.was-validated :invalid~.invalid-tooltip{display:block}.form-control.is-invalid,.was-validated .form-control:invalid{border-color:#dc3545;padding-right:calc(1.5em + .75rem);background-image:url(\"data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' width='12' height='12' fill='none' stroke='%23dc3545' viewBox='0 0 12 12'%3e%3ccircle cx='6' cy='6' r='4.5'/%3e%3cpath stroke-linejoin='round' d='M5.8 3.6h.4L6 6.5z'/%3e%3ccircle cx='6' cy='8.2' r='.6' fill='%23dc3545' stroke='none'/%3e%3c/svg%3e\");background-repeat:no-repeat;background-position:right calc(.375em + .1875rem) center;background-size:calc(.75em + .375rem) calc(.75em + .375rem)}.form-control.is-invalid:focus,.was-validated .form-control:invalid:focus{border-color:#dc3545;box-shadow:0 0 0 .2rem rgba(220,53,69,.25)}.was-validated textarea.form-control:invalid,textarea.form-control.is-invalid{padding-right:calc(1.5em + .75rem);background-position:top calc(.375em + .1875rem) right calc(.375em + .1875rem)}.custom-select.is-invalid,.was-validated .custom-select:invalid{border-color:#dc3545;padding-right:calc(.75em + 2.3125rem);background:url(\"data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' width='4' height='5' viewBox='0 0 4 5'%3e%3cpath fill='%23343a40' d='M2 0L0 2h4zm0 5L0 3h4z'/%3e%3c/svg%3e\") no-repeat right .75rem center/8px 10px,url(\"data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' width='12' height='12' fill='none' stroke='%23dc3545' viewBox='0 0 12 12'%3e%3ccircle cx='6' cy='6' r='4.5'/%3e%3cpath stroke-linejoin='round' d='M5.8 3.6h.4L6 6.5z'/%3e%3ccircle cx='6' cy='8.2' r='.6' fill='%23dc3545' stroke='none'/%3e%3c/svg%3e\") #fff no-repeat center right 1.75rem/calc(.75em + .375rem) calc(.75em + .375rem)}.custom-select.is-invalid:focus,.was-validated .custom-select:invalid:focus{border-color:#dc3545;box-shadow:0 0 0 .2rem rgba(220,53,69,.25)}.form-check-input.is-invalid~.form-check-label,.was-validated .form-check-input:invalid~.form-check-label{color:#dc3545}.form-check-input.is-invalid~.invalid-feedback,.form-check-input.is-invalid~.invalid-tooltip,.was-validated .form-check-input:invalid~.invalid-feedback,.was-validated .form-check-input:invalid~.invalid-tooltip{display:block}.custom-control-input.is-invalid~.custom-control-label,.was-validated .custom-control-input:invalid~.custom-control-label{color:#dc3545}.custom-control-input.is-invalid~.custom-control-label::before,.was-validated .custom-control-input:invalid~.custom-control-label::before{border-color:#dc3545}.custom-control-input.is-invalid:checked~.custom-control-label::before,.was-validated .custom-control-input:invalid:checked~.custom-control-label::before{border-color:#e4606d;background-color:#e4606d}.custom-control-input.is-invalid:focus~.custom-control-label::before,.was-validated .custom-control-input:invalid:focus~.custom-control-label::before{box-shadow:0 0 0 .2rem rgba(220,53,69,.25)}.custom-control-input.is-invalid:focus:not(:checked)~.custom-control-label::before,.was-validated .custom-control-input:invalid:focus:not(:checked)~.custom-control-label::before{border-color:#dc3545}.custom-file-input.is-invalid~.custom-file-label,.was-validated .custom-file-input:invalid~.custom-file-label{border-color:#dc3545}.custom-file-input.is-invalid:focus~.custom-file-label,.was-validated .custom-file-input:invalid:focus~.custom-file-label{border-color:#dc3545;box-shadow:0 0 0 .2rem rgba(220,53,69,.25)}.form-inline{display:-ms-flexbox;display:flex;-ms-flex-flow:row wrap;flex-flow:row wrap;-ms-flex-align:center;align-items:center}.form-inline .form-check{width:100%}@media (min-width:576px){.form-inline label{display:-ms-flexbox;display:flex;-ms-flex-align:center;align-items:center;-ms-flex-pack:center;justify-content:center;margin-bottom:0}.form-inline .form-group{display:-ms-flexbox;display:flex;-ms-flex:0 0 auto;flex:0 0 auto;-ms-flex-flow:row wrap;flex-flow:row wrap;-ms-flex-align:center;align-items:center;margin-bottom:0}.form-inline .form-control{display:inline-block;width:auto;vertical-align:middle}.form-inline .form-control-plaintext{display:inline-block}.form-inline .custom-select,.form-inline .input-group{width:auto}.form-inline .form-check{display:-ms-flexbox;display:flex;-ms-flex-align:center;align-items:center;-ms-flex-pack:center;justify-content:center;width:auto;padding-left:0}.form-inline .form-check-input{position:relative;-ms-flex-negative:0;flex-shrink:0;margin-top:0;margin-right:.25rem;margin-left:0}.form-inline .custom-control{-ms-flex-align:center;align-items:center;-ms-flex-pack:center;justify-content:center}.form-inline .custom-control-label{margin-bottom:0}}.btn{display:inline-block;font-weight:400;color:#212529;text-align:center;vertical-align:middle;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;background-color:transparent;border:1px solid transparent;padding:.375rem .75rem;font-size:1rem;line-height:1.5;border-radius:.25rem;transition:color .15s ease-in-out,background-color .15s ease-in-out,border-color .15s ease-in-out,box-shadow .15s ease-in-out}@media (prefers-reduced-motion:reduce){.btn{transition:none}}.btn:hover{color:#212529;text-decoration:none}.btn.focus,.btn:focus{outline:0;box-shadow:0 0 0 .2rem rgba(0,123,255,.25)}.btn.disabled,.btn:disabled{opacity:.65}.btn:not(:disabled):not(.disabled){cursor:pointer}a.btn.disabled,fieldset:disabled a.btn{pointer-events:none}.btn-primary{color:#fff;background-color:#007bff;border-color:#007bff}.btn-primary:hover{color:#fff;background-color:#0069d9;border-color:#0062cc}.btn-primary.focus,.btn-primary:focus{color:#fff;background-color:#0069d9;border-color:#0062cc;box-shadow:0 0 0 .2rem rgba(38,143,255,.5)}.btn-primary.disabled,.btn-primary:disabled{color:#fff;background-color:#007bff;border-color:#007bff}.btn-primary:not(:disabled):not(.disabled).active,.btn-primary:not(:disabled):not(.disabled):active,.show>.btn-primary.dropdown-toggle{color:#fff;background-color:#0062cc;border-color:#005cbf}.btn-primary:not(:disabled):not(.disabled).active:focus,.btn-primary:not(:disabled):not(.disabled):active:focus,.show>.btn-primary.dropdown-toggle:focus{box-shadow:0 0 0 .2rem rgba(38,143,255,.5)}.btn-secondary{color:#fff;background-color:#6c757d;border-color:#6c757d}.btn-secondary:hover{color:#fff;background-color:#5a6268;border-color:#545b62}.btn-secondary.focus,.btn-secondary:focus{color:#fff;background-color:#5a6268;border-color:#545b62;box-shadow:0 0 0 .2rem rgba(130,138,145,.5)}.btn-secondary.disabled,.btn-secondary:disabled{color:#fff;background-color:#6c757d;border-color:#6c757d}.btn-secondary:not(:disabled):not(.disabled).active,.btn-secondary:not(:disabled):not(.disabled):active,.show>.btn-secondary.dropdown-toggle{color:#fff;background-color:#545b62;border-color:#4e555b}.btn-secondary:not(:disabled):not(.disabled).active:focus,.btn-secondary:not(:disabled):not(.disabled):active:focus,.show>.btn-secondary.dropdown-toggle:focus{box-shadow:0 0 0 .2rem rgba(130,138,145,.5)}.btn-success{color:#fff;background-color:#28a745;border-color:#28a745}.btn-success:hover{color:#fff;background-color:#218838;border-color:#1e7e34}.btn-success.focus,.btn-success:focus{color:#fff;background-color:#218838;border-color:#1e7e34;box-shadow:0 0 0 .2rem rgba(72,180,97,.5)}.btn-success.disabled,.btn-success:disabled{color:#fff;background-color:#28a745;border-color:#28a745}.btn-success:not(:disabled):not(.disabled).active,.btn-success:not(:disabled):not(.disabled):active,.show>.btn-success.dropdown-toggle{color:#fff;background-color:#1e7e34;border-color:#1c7430}.btn-success:not(:disabled):not(.disabled).active:focus,.btn-success:not(:disabled):not(.disabled):active:focus,.show>.btn-success.dropdown-toggle:focus{box-shadow:0 0 0 .2rem rgba(72,180,97,.5)}.btn-info{color:#fff;background-color:#17a2b8;border-color:#17a2b8}.btn-info:hover{color:#fff;background-color:#138496;border-color:#117a8b}.btn-info.focus,.btn-info:focus{color:#fff;background-color:#138496;border-color:#117a8b;box-shadow:0 0 0 .2rem rgba(58,176,195,.5)}.btn-info.disabled,.btn-info:disabled{color:#fff;background-color:#17a2b8;border-color:#17a2b8}.btn-info:not(:disabled):not(.disabled).active,.btn-info:not(:disabled):not(.disabled):active,.show>.btn-info.dropdown-toggle{color:#fff;background-color:#117a8b;border-color:#10707f}.btn-info:not(:disabled):not(.disabled).active:focus,.btn-info:not(:disabled):not(.disabled):active:focus,.show>.btn-info.dropdown-toggle:focus{box-shadow:0 0 0 .2rem rgba(58,176,195,.5)}.btn-warning{color:#212529;background-color:#ffc107;border-color:#ffc107}.btn-warning:hover{color:#212529;background-color:#e0a800;border-color:#d39e00}.btn-warning.focus,.btn-warning:focus{color:#212529;background-color:#e0a800;border-color:#d39e00;box-shadow:0 0 0 .2rem rgba(222,170,12,.5)}.btn-warning.disabled,.btn-warning:disabled{color:#212529;background-color:#ffc107;border-color:#ffc107}.btn-warning:not(:disabled):not(.disabled).active,.btn-warning:not(:disabled):not(.disabled):active,.show>.btn-warning.dropdown-toggle{color:#212529;background-color:#d39e00;border-color:#c69500}.btn-warning:not(:disabled):not(.disabled).active:focus,.btn-warning:not(:disabled):not(.disabled):active:focus,.show>.btn-warning.dropdown-toggle:focus{box-shadow:0 0 0 .2rem rgba(222,170,12,.5)}.btn-danger{color:#fff;background-color:#dc3545;border-color:#dc3545}.btn-danger:hover{color:#fff;background-color:#c82333;border-color:#bd2130}.btn-danger.focus,.btn-danger:focus{color:#fff;background-color:#c82333;border-color:#bd2130;box-shadow:0 0 0 .2rem rgba(225,83,97,.5)}.btn-danger.disabled,.btn-danger:disabled{color:#fff;background-color:#dc3545;border-color:#dc3545}.btn-danger:not(:disabled):not(.disabled).active,.btn-danger:not(:disabled):not(.disabled):active,.show>.btn-danger.dropdown-toggle{color:#fff;background-color:#bd2130;border-color:#b21f2d}.btn-danger:not(:disabled):not(.disabled).active:focus,.btn-danger:not(:disabled):not(.disabled):active:focus,.show>.btn-danger.dropdown-toggle:focus{box-shadow:0 0 0 .2rem rgba(225,83,97,.5)}.btn-light{color:#212529;background-color:#f8f9fa;border-color:#f8f9fa}.btn-light:hover{color:#212529;background-color:#e2e6ea;border-color:#dae0e5}.btn-light.focus,.btn-light:focus{color:#212529;background-color:#e2e6ea;border-color:#dae0e5;box-shadow:0 0 0 .2rem rgba(216,217,219,.5)}.btn-light.disabled,.btn-light:disabled{color:#212529;background-color:#f8f9fa;border-color:#f8f9fa}.btn-light:not(:disabled):not(.disabled).active,.btn-light:not(:disabled):not(.disabled):active,.show>.btn-light.dropdown-toggle{color:#212529;background-color:#dae0e5;border-color:#d3d9df}.btn-light:not(:disabled):not(.disabled).active:focus,.btn-light:not(:disabled):not(.disabled):active:focus,.show>.btn-light.dropdown-toggle:focus{box-shadow:0 0 0 .2rem rgba(216,217,219,.5)}.btn-dark{color:#fff;background-color:#343a40;border-color:#343a40}.btn-dark:hover{color:#fff;background-color:#23272b;border-color:#1d2124}.btn-dark.focus,.btn-dark:focus{color:#fff;background-color:#23272b;border-color:#1d2124;box-shadow:0 0 0 .2rem rgba(82,88,93,.5)}.btn-dark.disabled,.btn-dark:disabled{color:#fff;background-color:#343a40;border-color:#343a40}.btn-dark:not(:disabled):not(.disabled).active,.btn-dark:not(:disabled):not(.disabled):active,.show>.btn-dark.dropdown-toggle{color:#fff;background-color:#1d2124;border-color:#171a1d}.btn-dark:not(:disabled):not(.disabled).active:focus,.btn-dark:not(:disabled):not(.disabled):active:focus,.show>.btn-dark.dropdown-toggle:focus{box-shadow:0 0 0 .2rem rgba(82,88,93,.5)}.btn-outline-primary{color:#007bff;border-color:#007bff}.btn-outline-primary:hover{color:#fff;background-color:#007bff;border-color:#007bff}.btn-outline-primary.focus,.btn-outline-primary:focus{box-shadow:0 0 0 .2rem rgba(0,123,255,.5)}.btn-outline-primary.disabled,.btn-outline-primary:disabled{color:#007bff;background-color:transparent}.btn-outline-primary:not(:disabled):not(.disabled).active,.btn-outline-primary:not(:disabled):not(.disabled):active,.show>.btn-outline-primary.dropdown-toggle{color:#fff;background-color:#007bff;border-color:#007bff}.btn-outline-primary:not(:disabled):not(.disabled).active:focus,.btn-outline-primary:not(:disabled):not(.disabled):active:focus,.show>.btn-outline-primary.dropdown-toggle:focus{box-shadow:0 0 0 .2rem rgba(0,123,255,.5)}.btn-outline-secondary{color:#6c757d;border-color:#6c757d}.btn-outline-secondary:hover{color:#fff;background-color:#6c757d;border-color:#6c757d}.btn-outline-secondary.focus,.btn-outline-secondary:focus{box-shadow:0 0 0 .2rem rgba(108,117,125,.5)}.btn-outline-secondary.disabled,.btn-outline-secondary:disabled{color:#6c757d;background-color:transparent}.btn-outline-secondary:not(:disabled):not(.disabled).active,.btn-outline-secondary:not(:disabled):not(.disabled):active,.show>.btn-outline-secondary.dropdown-toggle{color:#fff;background-color:#6c757d;border-color:#6c757d}.btn-outline-secondary:not(:disabled):not(.disabled).active:focus,.btn-outline-secondary:not(:disabled):not(.disabled):active:focus,.show>.btn-outline-secondary.dropdown-toggle:focus{box-shadow:0 0 0 .2rem rgba(108,117,125,.5)}.btn-outline-success{color:#28a745;border-color:#28a745}.btn-outline-success:hover{color:#fff;background-color:#28a745;border-color:#28a745}.btn-outline-success.focus,.btn-outline-success:focus{box-shadow:0 0 0 .2rem rgba(40,167,69,.5)}.btn-outline-success.disabled,.btn-outline-success:disabled{color:#28a745;background-color:transparent}.btn-outline-success:not(:disabled):not(.disabled).active,.btn-outline-success:not(:disabled):not(.disabled):active,.show>.btn-outline-success.dropdown-toggle{color:#fff;background-color:#28a745;border-color:#28a745}.btn-outline-success:not(:disabled):not(.disabled).active:focus,.btn-outline-success:not(:disabled):not(.disabled):active:focus,.show>.btn-outline-success.dropdown-toggle:focus{box-shadow:0 0 0 .2rem rgba(40,167,69,.5)}.btn-outline-info{color:#17a2b8;border-color:#17a2b8}.btn-outline-info:hover{color:#fff;background-color:#17a2b8;border-color:#17a2b8}.btn-outline-info.focus,.btn-outline-info:focus{box-shadow:0 0 0 .2rem rgba(23,162,184,.5)}.btn-outline-info.disabled,.btn-outline-info:disabled{color:#17a2b8;background-color:transparent}.btn-outline-info:not(:disabled):not(.disabled).active,.btn-outline-info:not(:disabled):not(.disabled):active,.show>.btn-outline-info.dropdown-toggle{color:#fff;background-color:#17a2b8;border-color:#17a2b8}.btn-outline-info:not(:disabled):not(.disabled).active:focus,.btn-outline-info:not(:disabled):not(.disabled):active:focus,.show>.btn-outline-info.dropdown-toggle:focus{box-shadow:0 0 0 .2rem rgba(23,162,184,.5)}.btn-outline-warning{color:#ffc107;border-color:#ffc107}.btn-outline-warning:hover{color:#212529;background-color:#ffc107;border-color:#ffc107}.btn-outline-warning.focus,.btn-outline-warning:focus{box-shadow:0 0 0 .2rem rgba(255,193,7,.5)}.btn-outline-warning.disabled,.btn-outline-warning:disabled{color:#ffc107;background-color:transparent}.btn-outline-warning:not(:disabled):not(.disabled).active,.btn-outline-warning:not(:disabled):not(.disabled):active,.show>.btn-outline-warning.dropdown-toggle{color:#212529;background-color:#ffc107;border-color:#ffc107}.btn-outline-warning:not(:disabled):not(.disabled).active:focus,.btn-outline-warning:not(:disabled):not(.disabled):active:focus,.show>.btn-outline-warning.dropdown-toggle:focus{box-shadow:0 0 0 .2rem rgba(255,193,7,.5)}.btn-outline-danger{color:#dc3545;border-color:#dc3545}.btn-outline-danger:hover{color:#fff;background-color:#dc3545;border-color:#dc3545}.btn-outline-danger.focus,.btn-outline-danger:focus{box-shadow:0 0 0 .2rem rgba(220,53,69,.5)}.btn-outline-danger.disabled,.btn-outline-danger:disabled{color:#dc3545;background-color:transparent}.btn-outline-danger:not(:disabled):not(.disabled).active,.btn-outline-danger:not(:disabled):not(.disabled):active,.show>.btn-outline-danger.dropdown-toggle{color:#fff;background-color:#dc3545;border-color:#dc3545}.btn-outline-danger:not(:disabled):not(.disabled).active:focus,.btn-outline-danger:not(:disabled):not(.disabled):active:focus,.show>.btn-outline-danger.dropdown-toggle:focus{box-shadow:0 0 0 .2rem rgba(220,53,69,.5)}.btn-outline-light{color:#f8f9fa;border-color:#f8f9fa}.btn-outline-light:hover{color:#212529;background-color:#f8f9fa;border-color:#f8f9fa}.btn-outline-light.focus,.btn-outline-light:focus{box-shadow:0 0 0 .2rem rgba(248,249,250,.5)}.btn-outline-light.disabled,.btn-outline-light:disabled{color:#f8f9fa;background-color:transparent}.btn-outline-light:not(:disabled):not(.disabled).active,.btn-outline-light:not(:disabled):not(.disabled):active,.show>.btn-outline-light.dropdown-toggle{color:#212529;background-color:#f8f9fa;border-color:#f8f9fa}.btn-outline-light:not(:disabled):not(.disabled).active:focus,.btn-outline-light:not(:disabled):not(.disabled):active:focus,.show>.btn-outline-light.dropdown-toggle:focus{box-shadow:0 0 0 .2rem rgba(248,249,250,.5)}.btn-outline-dark{color:#343a40;border-color:#343a40}.btn-outline-dark:hover{color:#fff;background-color:#343a40;border-color:#343a40}.btn-outline-dark.focus,.btn-outline-dark:focus{box-shadow:0 0 0 .2rem rgba(52,58,64,.5)}.btn-outline-dark.disabled,.btn-outline-dark:disabled{color:#343a40;background-color:transparent}.btn-outline-dark:not(:disabled):not(.disabled).active,.btn-outline-dark:not(:disabled):not(.disabled):active,.show>.btn-outline-dark.dropdown-toggle{color:#fff;background-color:#343a40;border-color:#343a40}.btn-outline-dark:not(:disabled):not(.disabled).active:focus,.btn-outline-dark:not(:disabled):not(.disabled):active:focus,.show>.btn-outline-dark.dropdown-toggle:focus{box-shadow:0 0 0 .2rem rgba(52,58,64,.5)}.btn-link{font-weight:400;color:#007bff;text-decoration:none}.btn-link:hover{color:#0056b3;text-decoration:underline}.btn-link.focus,.btn-link:focus{text-decoration:underline}.btn-link.disabled,.btn-link:disabled{color:#6c757d;pointer-events:none}.btn-group-lg>.btn,.btn-lg{padding:.5rem 1rem;font-size:1.25rem;line-height:1.5;border-radius:.3rem}.btn-group-sm>.btn,.btn-sm{padding:.25rem .5rem;font-size:.875rem;line-height:1.5;border-radius:.2rem}.btn-block{display:block;width:100%}.btn-block+.btn-block{margin-top:.5rem}input[type=button].btn-block,input[type=reset].btn-block,input[type=submit].btn-block{width:100%}.fade{transition:opacity .15s linear}@media (prefers-reduced-motion:reduce){.fade{transition:none}}.fade:not(.show){opacity:0}.collapse:not(.show){display:none}.collapsing{position:relative;height:0;overflow:hidden;transition:height .35s ease}@media (prefers-reduced-motion:reduce){.collapsing{transition:none}}.dropdown,.dropleft,.dropright,.dropup{position:relative}.dropdown-toggle{white-space:nowrap}.dropdown-toggle::after{display:inline-block;margin-left:.255em;vertical-align:.255em;content:\"\";border-top:.3em solid;border-right:.3em solid transparent;border-bottom:0;border-left:.3em solid transparent}.dropdown-toggle:empty::after{margin-left:0}.dropdown-menu{position:absolute;top:100%;left:0;z-index:1000;display:none;float:left;min-width:10rem;padding:.5rem 0;margin:.125rem 0 0;font-size:1rem;color:#212529;text-align:left;list-style:none;background-color:#fff;background-clip:padding-box;border:1px solid rgba(0,0,0,.15);border-radius:.25rem}.dropdown-menu-left{right:auto;left:0}.dropdown-menu-right{right:0;left:auto}@media (min-width:576px){.dropdown-menu-sm-left{right:auto;left:0}.dropdown-menu-sm-right{right:0;left:auto}}@media (min-width:768px){.dropdown-menu-md-left{right:auto;left:0}.dropdown-menu-md-right{right:0;left:auto}}@media (min-width:992px){.dropdown-menu-lg-left{right:auto;left:0}.dropdown-menu-lg-right{right:0;left:auto}}@media (min-width:1200px){.dropdown-menu-xl-left{right:auto;left:0}.dropdown-menu-xl-right{right:0;left:auto}}.dropup .dropdown-menu{top:auto;bottom:100%;margin-top:0;margin-bottom:.125rem}.dropup .dropdown-toggle::after{display:inline-block;margin-left:.255em;vertical-align:.255em;content:\"\";border-top:0;border-right:.3em solid transparent;border-bottom:.3em solid;border-left:.3em solid transparent}.dropup .dropdown-toggle:empty::after{margin-left:0}.dropright .dropdown-menu{top:0;right:auto;left:100%;margin-top:0;margin-left:.125rem}.dropright .dropdown-toggle::after{display:inline-block;margin-left:.255em;vertical-align:.255em;content:\"\";border-top:.3em solid transparent;border-right:0;border-bottom:.3em solid transparent;border-left:.3em solid}.dropright .dropdown-toggle:empty::after{margin-left:0}.dropright .dropdown-toggle::after{vertical-align:0}.dropleft .dropdown-menu{top:0;right:100%;left:auto;margin-top:0;margin-right:.125rem}.dropleft .dropdown-toggle::after{display:inline-block;margin-left:.255em;vertical-align:.255em;content:\"\"}.dropleft .dropdown-toggle::after{display:none}.dropleft .dropdown-toggle::before{display:inline-block;margin-right:.255em;vertical-align:.255em;content:\"\";border-top:.3em solid transparent;border-right:.3em solid;border-bottom:.3em solid transparent}.dropleft .dropdown-toggle:empty::after{margin-left:0}.dropleft .dropdown-toggle::before{vertical-align:0}.dropdown-menu[x-placement^=bottom],.dropdown-menu[x-placement^=left],.dropdown-menu[x-placement^=right],.dropdown-menu[x-placement^=top]{right:auto;bottom:auto}.dropdown-divider{height:0;margin:.5rem 0;overflow:hidden;border-top:1px solid #e9ecef}.dropdown-item{display:block;width:100%;padding:.25rem 1.5rem;clear:both;font-weight:400;color:#212529;text-align:inherit;white-space:nowrap;background-color:transparent;border:0}.dropdown-item:focus,.dropdown-item:hover{color:#16181b;text-decoration:none;background-color:#f8f9fa}.dropdown-item.active,.dropdown-item:active{color:#fff;text-decoration:none;background-color:#007bff}.dropdown-item.disabled,.dropdown-item:disabled{color:#6c757d;pointer-events:none;background-color:transparent}.dropdown-menu.show{display:block}.dropdown-header{display:block;padding:.5rem 1.5rem;margin-bottom:0;font-size:.875rem;color:#6c757d;white-space:nowrap}.dropdown-item-text{display:block;padding:.25rem 1.5rem;color:#212529}.btn-group,.btn-group-vertical{position:relative;display:-ms-inline-flexbox;display:inline-flex;vertical-align:middle}.btn-group-vertical>.btn,.btn-group>.btn{position:relative;-ms-flex:1 1 auto;flex:1 1 auto}.btn-group-vertical>.btn:hover,.btn-group>.btn:hover{z-index:1}.btn-group-vertical>.btn.active,.btn-group-vertical>.btn:active,.btn-group-vertical>.btn:focus,.btn-group>.btn.active,.btn-group>.btn:active,.btn-group>.btn:focus{z-index:1}.btn-toolbar{display:-ms-flexbox;display:flex;-ms-flex-wrap:wrap;flex-wrap:wrap;-ms-flex-pack:start;justify-content:flex-start}.btn-toolbar .input-group{width:auto}.btn-group>.btn-group:not(:first-child),.btn-group>.btn:not(:first-child){margin-left:-1px}.btn-group>.btn-group:not(:last-child)>.btn,.btn-group>.btn:not(:last-child):not(.dropdown-toggle){border-top-right-radius:0;border-bottom-right-radius:0}.btn-group>.btn-group:not(:first-child)>.btn,.btn-group>.btn:not(:first-child){border-top-left-radius:0;border-bottom-left-radius:0}.dropdown-toggle-split{padding-right:.5625rem;padding-left:.5625rem}.dropdown-toggle-split::after,.dropright .dropdown-toggle-split::after,.dropup .dropdown-toggle-split::after{margin-left:0}.dropleft .dropdown-toggle-split::before{margin-right:0}.btn-group-sm>.btn+.dropdown-toggle-split,.btn-sm+.dropdown-toggle-split{padding-right:.375rem;padding-left:.375rem}.btn-group-lg>.btn+.dropdown-toggle-split,.btn-lg+.dropdown-toggle-split{padding-right:.75rem;padding-left:.75rem}.btn-group-vertical{-ms-flex-direction:column;flex-direction:column;-ms-flex-align:start;align-items:flex-start;-ms-flex-pack:center;justify-content:center}.btn-group-vertical>.btn,.btn-group-vertical>.btn-group{width:100%}.btn-group-vertical>.btn-group:not(:first-child),.btn-group-vertical>.btn:not(:first-child){margin-top:-1px}.btn-group-vertical>.btn-group:not(:last-child)>.btn,.btn-group-vertical>.btn:not(:last-child):not(.dropdown-toggle){border-bottom-right-radius:0;border-bottom-left-radius:0}.btn-group-vertical>.btn-group:not(:first-child)>.btn,.btn-group-vertical>.btn:not(:first-child){border-top-left-radius:0;border-top-right-radius:0}.btn-group-toggle>.btn,.btn-group-toggle>.btn-group>.btn{margin-bottom:0}.btn-group-toggle>.btn input[type=checkbox],.btn-group-toggle>.btn input[type=radio],.btn-group-toggle>.btn-group>.btn input[type=checkbox],.btn-group-toggle>.btn-group>.btn input[type=radio]{position:absolute;clip:rect(0,0,0,0);pointer-events:none}.input-group{position:relative;display:-ms-flexbox;display:flex;-ms-flex-wrap:wrap;flex-wrap:wrap;-ms-flex-align:stretch;align-items:stretch;width:100%}.input-group>.custom-file,.input-group>.custom-select,.input-group>.form-control,.input-group>.form-control-plaintext{position:relative;-ms-flex:1 1 auto;flex:1 1 auto;width:1%;min-width:0;margin-bottom:0}.input-group>.custom-file+.custom-file,.input-group>.custom-file+.custom-select,.input-group>.custom-file+.form-control,.input-group>.custom-select+.custom-file,.input-group>.custom-select+.custom-select,.input-group>.custom-select+.form-control,.input-group>.form-control+.custom-file,.input-group>.form-control+.custom-select,.input-group>.form-control+.form-control,.input-group>.form-control-plaintext+.custom-file,.input-group>.form-control-plaintext+.custom-select,.input-group>.form-control-plaintext+.form-control{margin-left:-1px}.input-group>.custom-file .custom-file-input:focus~.custom-file-label,.input-group>.custom-select:focus,.input-group>.form-control:focus{z-index:3}.input-group>.custom-file .custom-file-input:focus{z-index:4}.input-group>.custom-select:not(:last-child),.input-group>.form-control:not(:last-child){border-top-right-radius:0;border-bottom-right-radius:0}.input-group>.custom-select:not(:first-child),.input-group>.form-control:not(:first-child){border-top-left-radius:0;border-bottom-left-radius:0}.input-group>.custom-file{display:-ms-flexbox;display:flex;-ms-flex-align:center;align-items:center}.input-group>.custom-file:not(:last-child) .custom-file-label,.input-group>.custom-file:not(:last-child) .custom-file-label::after{border-top-right-radius:0;border-bottom-right-radius:0}.input-group>.custom-file:not(:first-child) .custom-file-label{border-top-left-radius:0;border-bottom-left-radius:0}.input-group-append,.input-group-prepend{display:-ms-flexbox;display:flex}.input-group-append .btn,.input-group-prepend .btn{position:relative;z-index:2}.input-group-append .btn:focus,.input-group-prepend .btn:focus{z-index:3}.input-group-append .btn+.btn,.input-group-append .btn+.input-group-text,.input-group-append .input-group-text+.btn,.input-group-append .input-group-text+.input-group-text,.input-group-prepend .btn+.btn,.input-group-prepend .btn+.input-group-text,.input-group-prepend .input-group-text+.btn,.input-group-prepend .input-group-text+.input-group-text{margin-left:-1px}.input-group-prepend{margin-right:-1px}.input-group-append{margin-left:-1px}.input-group-text{display:-ms-flexbox;display:flex;-ms-flex-align:center;align-items:center;padding:.375rem .75rem;margin-bottom:0;font-size:1rem;font-weight:400;line-height:1.5;color:#495057;text-align:center;white-space:nowrap;background-color:#e9ecef;border:1px solid #ced4da;border-radius:.25rem}.input-group-text input[type=checkbox],.input-group-text input[type=radio]{margin-top:0}.input-group-lg>.custom-select,.input-group-lg>.form-control:not(textarea){height:calc(1.5em + 1rem + 2px)}.input-group-lg>.custom-select,.input-group-lg>.form-control,.input-group-lg>.input-group-append>.btn,.input-group-lg>.input-group-append>.input-group-text,.input-group-lg>.input-group-prepend>.btn,.input-group-lg>.input-group-prepend>.input-group-text{padding:.5rem 1rem;font-size:1.25rem;line-height:1.5;border-radius:.3rem}.input-group-sm>.custom-select,.input-group-sm>.form-control:not(textarea){height:calc(1.5em + .5rem + 2px)}.input-group-sm>.custom-select,.input-group-sm>.form-control,.input-group-sm>.input-group-append>.btn,.input-group-sm>.input-group-append>.input-group-text,.input-group-sm>.input-group-prepend>.btn,.input-group-sm>.input-group-prepend>.input-group-text{padding:.25rem .5rem;font-size:.875rem;line-height:1.5;border-radius:.2rem}.input-group-lg>.custom-select,.input-group-sm>.custom-select{padding-right:1.75rem}.input-group>.input-group-append:last-child>.btn:not(:last-child):not(.dropdown-toggle),.input-group>.input-group-append:last-child>.input-group-text:not(:last-child),.input-group>.input-group-append:not(:last-child)>.btn,.input-group>.input-group-append:not(:last-child)>.input-group-text,.input-group>.input-group-prepend>.btn,.input-group>.input-group-prepend>.input-group-text{border-top-right-radius:0;border-bottom-right-radius:0}.input-group>.input-group-append>.btn,.input-group>.input-group-append>.input-group-text,.input-group>.input-group-prepend:first-child>.btn:not(:first-child),.input-group>.input-group-prepend:first-child>.input-group-text:not(:first-child),.input-group>.input-group-prepend:not(:first-child)>.btn,.input-group>.input-group-prepend:not(:first-child)>.input-group-text{border-top-left-radius:0;border-bottom-left-radius:0}.custom-control{position:relative;z-index:1;display:block;min-height:1.5rem;padding-left:1.5rem;-webkit-print-color-adjust:exact;color-adjust:exact}.custom-control-inline{display:-ms-inline-flexbox;display:inline-flex;margin-right:1rem}.custom-control-input{position:absolute;left:0;z-index:-1;width:1rem;height:1.25rem;opacity:0}.custom-control-input:checked~.custom-control-label::before{color:#fff;border-color:#007bff;background-color:#007bff}.custom-control-input:focus~.custom-control-label::before{box-shadow:0 0 0 .2rem rgba(0,123,255,.25)}.custom-control-input:focus:not(:checked)~.custom-control-label::before{border-color:#80bdff}.custom-control-input:not(:disabled):active~.custom-control-label::before{color:#fff;background-color:#b3d7ff;border-color:#b3d7ff}.custom-control-input:disabled~.custom-control-label,.custom-control-input[disabled]~.custom-control-label{color:#6c757d}.custom-control-input:disabled~.custom-control-label::before,.custom-control-input[disabled]~.custom-control-label::before{background-color:#e9ecef}.custom-control-label{position:relative;margin-bottom:0;vertical-align:top}.custom-control-label::before{position:absolute;top:.25rem;left:-1.5rem;display:block;width:1rem;height:1rem;pointer-events:none;content:\"\";background-color:#fff;border:#adb5bd solid 1px}.custom-control-label::after{position:absolute;top:.25rem;left:-1.5rem;display:block;width:1rem;height:1rem;content:\"\";background:no-repeat 50%/50% 50%}.custom-checkbox .custom-control-label::before{border-radius:.25rem}.custom-checkbox .custom-control-input:checked~.custom-control-label::after{background-image:url(\"data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' width='8' height='8' viewBox='0 0 8 8'%3e%3cpath fill='%23fff' d='M6.564.75l-3.59 3.612-1.538-1.55L0 4.26l2.974 2.99L8 2.193z'/%3e%3c/svg%3e\")}.custom-checkbox .custom-control-input:indeterminate~.custom-control-label::before{border-color:#007bff;background-color:#007bff}.custom-checkbox .custom-control-input:indeterminate~.custom-control-label::after{background-image:url(\"data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' width='4' height='4' viewBox='0 0 4 4'%3e%3cpath stroke='%23fff' d='M0 2h4'/%3e%3c/svg%3e\")}.custom-checkbox .custom-control-input:disabled:checked~.custom-control-label::before{background-color:rgba(0,123,255,.5)}.custom-checkbox .custom-control-input:disabled:indeterminate~.custom-control-label::before{background-color:rgba(0,123,255,.5)}.custom-radio .custom-control-label::before{border-radius:50%}.custom-radio .custom-control-input:checked~.custom-control-label::after{background-image:url(\"data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' width='12' height='12' viewBox='-4 -4 8 8'%3e%3ccircle r='3' fill='%23fff'/%3e%3c/svg%3e\")}.custom-radio .custom-control-input:disabled:checked~.custom-control-label::before{background-color:rgba(0,123,255,.5)}.custom-switch{padding-left:2.25rem}.custom-switch .custom-control-label::before{left:-2.25rem;width:1.75rem;pointer-events:all;border-radius:.5rem}.custom-switch .custom-control-label::after{top:calc(.25rem + 2px);left:calc(-2.25rem + 2px);width:calc(1rem - 4px);height:calc(1rem - 4px);background-color:#adb5bd;border-radius:.5rem;transition:background-color .15s ease-in-out,border-color .15s ease-in-out,box-shadow .15s ease-in-out,-webkit-transform .15s ease-in-out;transition:transform .15s ease-in-out,background-color .15s ease-in-out,border-color .15s ease-in-out,box-shadow .15s ease-in-out;transition:transform .15s ease-in-out,background-color .15s ease-in-out,border-color .15s ease-in-out,box-shadow .15s ease-in-out,-webkit-transform .15s ease-in-out}@media (prefers-reduced-motion:reduce){.custom-switch .custom-control-label::after{transition:none}}.custom-switch .custom-control-input:checked~.custom-control-label::after{background-color:#fff;-webkit-transform:translateX(.75rem);transform:translateX(.75rem)}.custom-switch .custom-control-input:disabled:checked~.custom-control-label::before{background-color:rgba(0,123,255,.5)}.custom-select{display:inline-block;width:100%;height:calc(1.5em + .75rem + 2px);padding:.375rem 1.75rem .375rem .75rem;font-size:1rem;font-weight:400;line-height:1.5;color:#495057;vertical-align:middle;background:#fff url(\"data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' width='4' height='5' viewBox='0 0 4 5'%3e%3cpath fill='%23343a40' d='M2 0L0 2h4zm0 5L0 3h4z'/%3e%3c/svg%3e\") no-repeat right .75rem center/8px 10px;border:1px solid #ced4da;border-radius:.25rem;-webkit-appearance:none;-moz-appearance:none;appearance:none}.custom-select:focus{border-color:#80bdff;outline:0;box-shadow:0 0 0 .2rem rgba(0,123,255,.25)}.custom-select:focus::-ms-value{color:#495057;background-color:#fff}.custom-select[multiple],.custom-select[size]:not([size=\"1\"]){height:auto;padding-right:.75rem;background-image:none}.custom-select:disabled{color:#6c757d;background-color:#e9ecef}.custom-select::-ms-expand{display:none}.custom-select:-moz-focusring{color:transparent;text-shadow:0 0 0 #495057}.custom-select-sm{height:calc(1.5em + .5rem + 2px);padding-top:.25rem;padding-bottom:.25rem;padding-left:.5rem;font-size:.875rem}.custom-select-lg{height:calc(1.5em + 1rem + 2px);padding-top:.5rem;padding-bottom:.5rem;padding-left:1rem;font-size:1.25rem}.custom-file{position:relative;display:inline-block;width:100%;height:calc(1.5em + .75rem + 2px);margin-bottom:0}.custom-file-input{position:relative;z-index:2;width:100%;height:calc(1.5em + .75rem + 2px);margin:0;opacity:0}.custom-file-input:focus~.custom-file-label{border-color:#80bdff;box-shadow:0 0 0 .2rem rgba(0,123,255,.25)}.custom-file-input:disabled~.custom-file-label,.custom-file-input[disabled]~.custom-file-label{background-color:#e9ecef}.custom-file-input:lang(en)~.custom-file-label::after{content:\"Browse\"}.custom-file-input~.custom-file-label[data-browse]::after{content:attr(data-browse)}.custom-file-label{position:absolute;top:0;right:0;left:0;z-index:1;height:calc(1.5em + .75rem + 2px);padding:.375rem .75rem;font-weight:400;line-height:1.5;color:#495057;background-color:#fff;border:1px solid #ced4da;border-radius:.25rem}.custom-file-label::after{position:absolute;top:0;right:0;bottom:0;z-index:3;display:block;height:calc(1.5em + .75rem);padding:.375rem .75rem;line-height:1.5;color:#495057;content:\"Browse\";background-color:#e9ecef;border-left:inherit;border-radius:0 .25rem .25rem 0}.custom-range{width:100%;height:1.4rem;padding:0;background-color:transparent;-webkit-appearance:none;-moz-appearance:none;appearance:none}.custom-range:focus{outline:0}.custom-range:focus::-webkit-slider-thumb{box-shadow:0 0 0 1px #fff,0 0 0 .2rem rgba(0,123,255,.25)}.custom-range:focus::-moz-range-thumb{box-shadow:0 0 0 1px #fff,0 0 0 .2rem rgba(0,123,255,.25)}.custom-range:focus::-ms-thumb{box-shadow:0 0 0 1px #fff,0 0 0 .2rem rgba(0,123,255,.25)}.custom-range::-moz-focus-outer{border:0}.custom-range::-webkit-slider-thumb{width:1rem;height:1rem;margin-top:-.25rem;background-color:#007bff;border:0;border-radius:1rem;-webkit-transition:background-color .15s ease-in-out,border-color .15s ease-in-out,box-shadow .15s ease-in-out;transition:background-color .15s ease-in-out,border-color .15s ease-in-out,box-shadow .15s ease-in-out;-webkit-appearance:none;appearance:none}@media (prefers-reduced-motion:reduce){.custom-range::-webkit-slider-thumb{-webkit-transition:none;transition:none}}.custom-range::-webkit-slider-thumb:active{background-color:#b3d7ff}.custom-range::-webkit-slider-runnable-track{width:100%;height:.5rem;color:transparent;cursor:pointer;background-color:#dee2e6;border-color:transparent;border-radius:1rem}.custom-range::-moz-range-thumb{width:1rem;height:1rem;background-color:#007bff;border:0;border-radius:1rem;-moz-transition:background-color .15s ease-in-out,border-color .15s ease-in-out,box-shadow .15s ease-in-out;transition:background-color .15s ease-in-out,border-color .15s ease-in-out,box-shadow .15s ease-in-out;-moz-appearance:none;appearance:none}@media (prefers-reduced-motion:reduce){.custom-range::-moz-range-thumb{-moz-transition:none;transition:none}}.custom-range::-moz-range-thumb:active{background-color:#b3d7ff}.custom-range::-moz-range-track{width:100%;height:.5rem;color:transparent;cursor:pointer;background-color:#dee2e6;border-color:transparent;border-radius:1rem}.custom-range::-ms-thumb{width:1rem;height:1rem;margin-top:0;margin-right:.2rem;margin-left:.2rem;background-color:#007bff;border:0;border-radius:1rem;-ms-transition:background-color .15s ease-in-out,border-color .15s ease-in-out,box-shadow .15s ease-in-out;transition:background-color .15s ease-in-out,border-color .15s ease-in-out,box-shadow .15s ease-in-out;appearance:none}@media (prefers-reduced-motion:reduce){.custom-range::-ms-thumb{-ms-transition:none;transition:none}}.custom-range::-ms-thumb:active{background-color:#b3d7ff}.custom-range::-ms-track{width:100%;height:.5rem;color:transparent;cursor:pointer;background-color:transparent;border-color:transparent;border-width:.5rem}.custom-range::-ms-fill-lower{background-color:#dee2e6;border-radius:1rem}.custom-range::-ms-fill-upper{margin-right:15px;background-color:#dee2e6;border-radius:1rem}.custom-range:disabled::-webkit-slider-thumb{background-color:#adb5bd}.custom-range:disabled::-webkit-slider-runnable-track{cursor:default}.custom-range:disabled::-moz-range-thumb{background-color:#adb5bd}.custom-range:disabled::-moz-range-track{cursor:default}.custom-range:disabled::-ms-thumb{background-color:#adb5bd}.custom-control-label::before,.custom-file-label,.custom-select{transition:background-color .15s ease-in-out,border-color .15s ease-in-out,box-shadow .15s ease-in-out}@media (prefers-reduced-motion:reduce){.custom-control-label::before,.custom-file-label,.custom-select{transition:none}}.nav{display:-ms-flexbox;display:flex;-ms-flex-wrap:wrap;flex-wrap:wrap;padding-left:0;margin-bottom:0;list-style:none}.nav-link{display:block;padding:.5rem 1rem}.nav-link:focus,.nav-link:hover{text-decoration:none}.nav-link.disabled{color:#6c757d;pointer-events:none;cursor:default}.nav-tabs{border-bottom:1px solid #dee2e6}.nav-tabs .nav-item{margin-bottom:-1px}.nav-tabs .nav-link{border:1px solid transparent;border-top-left-radius:.25rem;border-top-right-radius:.25rem}.nav-tabs .nav-link:focus,.nav-tabs .nav-link:hover{border-color:#e9ecef #e9ecef #dee2e6}.nav-tabs .nav-link.disabled{color:#6c757d;background-color:transparent;border-color:transparent}.nav-tabs .nav-item.show .nav-link,.nav-tabs .nav-link.active{color:#495057;background-color:#fff;border-color:#dee2e6 #dee2e6 #fff}.nav-tabs .dropdown-menu{margin-top:-1px;border-top-left-radius:0;border-top-right-radius:0}.nav-pills .nav-link{border-radius:.25rem}.nav-pills .nav-link.active,.nav-pills .show>.nav-link{color:#fff;background-color:#007bff}.nav-fill .nav-item,.nav-fill>.nav-link{-ms-flex:1 1 auto;flex:1 1 auto;text-align:center}.nav-justified .nav-item,.nav-justified>.nav-link{-ms-flex-preferred-size:0;flex-basis:0;-ms-flex-positive:1;flex-grow:1;text-align:center}.tab-content>.tab-pane{display:none}.tab-content>.active{display:block}.navbar{position:relative;display:-ms-flexbox;display:flex;-ms-flex-wrap:wrap;flex-wrap:wrap;-ms-flex-align:center;align-items:center;-ms-flex-pack:justify;justify-content:space-between;padding:.5rem 1rem}.navbar .container,.navbar .container-fluid,.navbar .container-lg,.navbar .container-md,.navbar .container-sm,.navbar .container-xl{display:-ms-flexbox;display:flex;-ms-flex-wrap:wrap;flex-wrap:wrap;-ms-flex-align:center;align-items:center;-ms-flex-pack:justify;justify-content:space-between}.navbar-brand{display:inline-block;padding-top:.3125rem;padding-bottom:.3125rem;margin-right:1rem;font-size:1.25rem;line-height:inherit;white-space:nowrap}.navbar-brand:focus,.navbar-brand:hover{text-decoration:none}.navbar-nav{display:-ms-flexbox;display:flex;-ms-flex-direction:column;flex-direction:column;padding-left:0;margin-bottom:0;list-style:none}.navbar-nav .nav-link{padding-right:0;padding-left:0}.navbar-nav .dropdown-menu{position:static;float:none}.navbar-text{display:inline-block;padding-top:.5rem;padding-bottom:.5rem}.navbar-collapse{-ms-flex-preferred-size:100%;flex-basis:100%;-ms-flex-positive:1;flex-grow:1;-ms-flex-align:center;align-items:center}.navbar-toggler{padding:.25rem .75rem;font-size:1.25rem;line-height:1;background-color:transparent;border:1px solid transparent;border-radius:.25rem}.navbar-toggler:focus,.navbar-toggler:hover{text-decoration:none}.navbar-toggler-icon{display:inline-block;width:1.5em;height:1.5em;vertical-align:middle;content:\"\";background:no-repeat center center;background-size:100% 100%}@media (max-width:575.98px){.navbar-expand-sm>.container,.navbar-expand-sm>.container-fluid,.navbar-expand-sm>.container-lg,.navbar-expand-sm>.container-md,.navbar-expand-sm>.container-sm,.navbar-expand-sm>.container-xl{padding-right:0;padding-left:0}}@media (min-width:576px){.navbar-expand-sm{-ms-flex-flow:row nowrap;flex-flow:row nowrap;-ms-flex-pack:start;justify-content:flex-start}.navbar-expand-sm .navbar-nav{-ms-flex-direction:row;flex-direction:row}.navbar-expand-sm .navbar-nav .dropdown-menu{position:absolute}.navbar-expand-sm .navbar-nav .nav-link{padding-right:.5rem;padding-left:.5rem}.navbar-expand-sm>.container,.navbar-expand-sm>.container-fluid,.navbar-expand-sm>.container-lg,.navbar-expand-sm>.container-md,.navbar-expand-sm>.container-sm,.navbar-expand-sm>.container-xl{-ms-flex-wrap:nowrap;flex-wrap:nowrap}.navbar-expand-sm .navbar-collapse{display:-ms-flexbox!important;display:flex!important;-ms-flex-preferred-size:auto;flex-basis:auto}.navbar-expand-sm .navbar-toggler{display:none}}@media (max-width:767.98px){.navbar-expand-md>.container,.navbar-expand-md>.container-fluid,.navbar-expand-md>.container-lg,.navbar-expand-md>.container-md,.navbar-expand-md>.container-sm,.navbar-expand-md>.container-xl{padding-right:0;padding-left:0}}@media (min-width:768px){.navbar-expand-md{-ms-flex-flow:row nowrap;flex-flow:row nowrap;-ms-flex-pack:start;justify-content:flex-start}.navbar-expand-md .navbar-nav{-ms-flex-direction:row;flex-direction:row}.navbar-expand-md .navbar-nav .dropdown-menu{position:absolute}.navbar-expand-md .navbar-nav .nav-link{padding-right:.5rem;padding-left:.5rem}.navbar-expand-md>.container,.navbar-expand-md>.container-fluid,.navbar-expand-md>.container-lg,.navbar-expand-md>.container-md,.navbar-expand-md>.container-sm,.navbar-expand-md>.container-xl{-ms-flex-wrap:nowrap;flex-wrap:nowrap}.navbar-expand-md .navbar-collapse{display:-ms-flexbox!important;display:flex!important;-ms-flex-preferred-size:auto;flex-basis:auto}.navbar-expand-md .navbar-toggler{display:none}}@media (max-width:991.98px){.navbar-expand-lg>.container,.navbar-expand-lg>.container-fluid,.navbar-expand-lg>.container-lg,.navbar-expand-lg>.container-md,.navbar-expand-lg>.container-sm,.navbar-expand-lg>.container-xl{padding-right:0;padding-left:0}}@media (min-width:992px){.navbar-expand-lg{-ms-flex-flow:row nowrap;flex-flow:row nowrap;-ms-flex-pack:start;justify-content:flex-start}.navbar-expand-lg .navbar-nav{-ms-flex-direction:row;flex-direction:row}.navbar-expand-lg .navbar-nav .dropdown-menu{position:absolute}.navbar-expand-lg .navbar-nav .nav-link{padding-right:.5rem;padding-left:.5rem}.navbar-expand-lg>.container,.navbar-expand-lg>.container-fluid,.navbar-expand-lg>.container-lg,.navbar-expand-lg>.container-md,.navbar-expand-lg>.container-sm,.navbar-expand-lg>.container-xl{-ms-flex-wrap:nowrap;flex-wrap:nowrap}.navbar-expand-lg .navbar-collapse{display:-ms-flexbox!important;display:flex!important;-ms-flex-preferred-size:auto;flex-basis:auto}.navbar-expand-lg .navbar-toggler{display:none}}@media (max-width:1199.98px){.navbar-expand-xl>.container,.navbar-expand-xl>.container-fluid,.navbar-expand-xl>.container-lg,.navbar-expand-xl>.container-md,.navbar-expand-xl>.container-sm,.navbar-expand-xl>.container-xl{padding-right:0;padding-left:0}}@media (min-width:1200px){.navbar-expand-xl{-ms-flex-flow:row nowrap;flex-flow:row nowrap;-ms-flex-pack:start;justify-content:flex-start}.navbar-expand-xl .navbar-nav{-ms-flex-direction:row;flex-direction:row}.navbar-expand-xl .navbar-nav .dropdown-menu{position:absolute}.navbar-expand-xl .navbar-nav .nav-link{padding-right:.5rem;padding-left:.5rem}.navbar-expand-xl>.container,.navbar-expand-xl>.container-fluid,.navbar-expand-xl>.container-lg,.navbar-expand-xl>.container-md,.navbar-expand-xl>.container-sm,.navbar-expand-xl>.container-xl{-ms-flex-wrap:nowrap;flex-wrap:nowrap}.navbar-expand-xl .navbar-collapse{display:-ms-flexbox!important;display:flex!important;-ms-flex-preferred-size:auto;flex-basis:auto}.navbar-expand-xl .navbar-toggler{display:none}}.navbar-expand{-ms-flex-flow:row nowrap;flex-flow:row nowrap;-ms-flex-pack:start;justify-content:flex-start}.navbar-expand>.container,.navbar-expand>.container-fluid,.navbar-expand>.container-lg,.navbar-expand>.container-md,.navbar-expand>.container-sm,.navbar-expand>.container-xl{padding-right:0;padding-left:0}.navbar-expand .navbar-nav{-ms-flex-direction:row;flex-direction:row}.navbar-expand .navbar-nav .dropdown-menu{position:absolute}.navbar-expand .navbar-nav .nav-link{padding-right:.5rem;padding-left:.5rem}.navbar-expand>.container,.navbar-expand>.container-fluid,.navbar-expand>.container-lg,.navbar-expand>.container-md,.navbar-expand>.container-sm,.navbar-expand>.container-xl{-ms-flex-wrap:nowrap;flex-wrap:nowrap}.navbar-expand .navbar-collapse{display:-ms-flexbox!important;display:flex!important;-ms-flex-preferred-size:auto;flex-basis:auto}.navbar-expand .navbar-toggler{display:none}.navbar-light .navbar-brand{color:rgba(0,0,0,.9)}.navbar-light .navbar-brand:focus,.navbar-light .navbar-brand:hover{color:rgba(0,0,0,.9)}.navbar-light .navbar-nav .nav-link{color:rgba(0,0,0,.5)}.navbar-light .navbar-nav .nav-link:focus,.navbar-light .navbar-nav .nav-link:hover{color:rgba(0,0,0,.7)}.navbar-light .navbar-nav .nav-link.disabled{color:rgba(0,0,0,.3)}.navbar-light .navbar-nav .active>.nav-link,.navbar-light .navbar-nav .nav-link.active,.navbar-light .navbar-nav .nav-link.show,.navbar-light .navbar-nav .show>.nav-link{color:rgba(0,0,0,.9)}.navbar-light .navbar-toggler{color:rgba(0,0,0,.5);border-color:rgba(0,0,0,.1)}.navbar-light .navbar-toggler-icon{background-image:url(\"data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' width='30' height='30' viewBox='0 0 30 30'%3e%3cpath stroke='rgba%280, 0, 0, 0.5%29' stroke-linecap='round' stroke-miterlimit='10' stroke-width='2' d='M4 7h22M4 15h22M4 23h22'/%3e%3c/svg%3e\")}.navbar-light .navbar-text{color:rgba(0,0,0,.5)}.navbar-light .navbar-text a{color:rgba(0,0,0,.9)}.navbar-light .navbar-text a:focus,.navbar-light .navbar-text a:hover{color:rgba(0,0,0,.9)}.navbar-dark .navbar-brand{color:#fff}.navbar-dark .navbar-brand:focus,.navbar-dark .navbar-brand:hover{color:#fff}.navbar-dark .navbar-nav .nav-link{color:rgba(255,255,255,.5)}.navbar-dark .navbar-nav .nav-link:focus,.navbar-dark .navbar-nav .nav-link:hover{color:rgba(255,255,255,.75)}.navbar-dark .navbar-nav .nav-link.disabled{color:rgba(255,255,255,.25)}.navbar-dark .navbar-nav .active>.nav-link,.navbar-dark .navbar-nav .nav-link.active,.navbar-dark .navbar-nav .nav-link.show,.navbar-dark .navbar-nav .show>.nav-link{color:#fff}.navbar-dark .navbar-toggler{color:rgba(255,255,255,.5);border-color:rgba(255,255,255,.1)}.navbar-dark .navbar-toggler-icon{background-image:url(\"data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' width='30' height='30' viewBox='0 0 30 30'%3e%3cpath stroke='rgba%28255, 255, 255, 0.5%29' stroke-linecap='round' stroke-miterlimit='10' stroke-width='2' d='M4 7h22M4 15h22M4 23h22'/%3e%3c/svg%3e\")}.navbar-dark .navbar-text{color:rgba(255,255,255,.5)}.navbar-dark .navbar-text a{color:#fff}.navbar-dark .navbar-text a:focus,.navbar-dark .navbar-text a:hover{color:#fff}.card{position:relative;display:-ms-flexbox;display:flex;-ms-flex-direction:column;flex-direction:column;min-width:0;word-wrap:break-word;background-color:#fff;background-clip:border-box;border:1px solid rgba(0,0,0,.125);border-radius:.25rem}.card>hr{margin-right:0;margin-left:0}.card>.list-group{border-top:inherit;border-bottom:inherit}.card>.list-group:first-child{border-top-width:0;border-top-left-radius:calc(.25rem - 1px);border-top-right-radius:calc(.25rem - 1px)}.card>.list-group:last-child{border-bottom-width:0;border-bottom-right-radius:calc(.25rem - 1px);border-bottom-left-radius:calc(.25rem - 1px)}.card>.card-header+.list-group,.card>.list-group+.card-footer{border-top:0}.card-body{-ms-flex:1 1 auto;flex:1 1 auto;min-height:1px;padding:1.25rem}.card-title{margin-bottom:.75rem}.card-subtitle{margin-top:-.375rem;margin-bottom:0}.card-text:last-child{margin-bottom:0}.card-link:hover{text-decoration:none}.card-link+.card-link{margin-left:1.25rem}.card-header{padding:.75rem 1.25rem;margin-bottom:0;background-color:rgba(0,0,0,.03);border-bottom:1px solid rgba(0,0,0,.125)}.card-header:first-child{border-radius:calc(.25rem - 1px) calc(.25rem - 1px) 0 0}.card-footer{padding:.75rem 1.25rem;background-color:rgba(0,0,0,.03);border-top:1px solid rgba(0,0,0,.125)}.card-footer:last-child{border-radius:0 0 calc(.25rem - 1px) calc(.25rem - 1px)}.card-header-tabs{margin-right:-.625rem;margin-bottom:-.75rem;margin-left:-.625rem;border-bottom:0}.card-header-pills{margin-right:-.625rem;margin-left:-.625rem}.card-img-overlay{position:absolute;top:0;right:0;bottom:0;left:0;padding:1.25rem;border-radius:calc(.25rem - 1px)}.card-img,.card-img-bottom,.card-img-top{-ms-flex-negative:0;flex-shrink:0;width:100%}.card-img,.card-img-top{border-top-left-radius:calc(.25rem - 1px);border-top-right-radius:calc(.25rem - 1px)}.card-img,.card-img-bottom{border-bottom-right-radius:calc(.25rem - 1px);border-bottom-left-radius:calc(.25rem - 1px)}.card-deck .card{margin-bottom:15px}@media (min-width:576px){.card-deck{display:-ms-flexbox;display:flex;-ms-flex-flow:row wrap;flex-flow:row wrap;margin-right:-15px;margin-left:-15px}.card-deck .card{-ms-flex:1 0 0%;flex:1 0 0%;margin-right:15px;margin-bottom:0;margin-left:15px}}.card-group>.card{margin-bottom:15px}@media (min-width:576px){.card-group{display:-ms-flexbox;display:flex;-ms-flex-flow:row wrap;flex-flow:row wrap}.card-group>.card{-ms-flex:1 0 0%;flex:1 0 0%;margin-bottom:0}.card-group>.card+.card{margin-left:0;border-left:0}.card-group>.card:not(:last-child){border-top-right-radius:0;border-bottom-right-radius:0}.card-group>.card:not(:last-child) .card-header,.card-group>.card:not(:last-child) .card-img-top{border-top-right-radius:0}.card-group>.card:not(:last-child) .card-footer,.card-group>.card:not(:last-child) .card-img-bottom{border-bottom-right-radius:0}.card-group>.card:not(:first-child){border-top-left-radius:0;border-bottom-left-radius:0}.card-group>.card:not(:first-child) .card-header,.card-group>.card:not(:first-child) .card-img-top{border-top-left-radius:0}.card-group>.card:not(:first-child) .card-footer,.card-group>.card:not(:first-child) .card-img-bottom{border-bottom-left-radius:0}}.card-columns .card{margin-bottom:.75rem}@media (min-width:576px){.card-columns{-webkit-column-count:3;-moz-column-count:3;column-count:3;-webkit-column-gap:1.25rem;-moz-column-gap:1.25rem;column-gap:1.25rem;orphans:1;widows:1}.card-columns .card{display:inline-block;width:100%}}.accordion{overflow-anchor:none}.accordion>.card{overflow:hidden}.accordion>.card:not(:last-of-type){border-bottom:0;border-bottom-right-radius:0;border-bottom-left-radius:0}.accordion>.card:not(:first-of-type){border-top-left-radius:0;border-top-right-radius:0}.accordion>.card>.card-header{border-radius:0;margin-bottom:-1px}.breadcrumb{display:-ms-flexbox;display:flex;-ms-flex-wrap:wrap;flex-wrap:wrap;padding:.75rem 1rem;margin-bottom:1rem;list-style:none;background-color:#e9ecef;border-radius:.25rem}.breadcrumb-item{display:-ms-flexbox;display:flex}.breadcrumb-item+.breadcrumb-item{padding-left:.5rem}.breadcrumb-item+.breadcrumb-item::before{display:inline-block;padding-right:.5rem;color:#6c757d;content:\"/\"}.breadcrumb-item+.breadcrumb-item:hover::before{text-decoration:underline}.breadcrumb-item+.breadcrumb-item:hover::before{text-decoration:none}.breadcrumb-item.active{color:#6c757d}.pagination{display:-ms-flexbox;display:flex;padding-left:0;list-style:none;border-radius:.25rem}.page-link{position:relative;display:block;padding:.5rem .75rem;margin-left:-1px;line-height:1.25;color:#007bff;background-color:#fff;border:1px solid #dee2e6}.page-link:hover{z-index:2;color:#0056b3;text-decoration:none;background-color:#e9ecef;border-color:#dee2e6}.page-link:focus{z-index:3;outline:0;box-shadow:0 0 0 .2rem rgba(0,123,255,.25)}.page-item:first-child .page-link{margin-left:0;border-top-left-radius:.25rem;border-bottom-left-radius:.25rem}.page-item:last-child .page-link{border-top-right-radius:.25rem;border-bottom-right-radius:.25rem}.page-item.active .page-link{z-index:3;color:#fff;background-color:#007bff;border-color:#007bff}.page-item.disabled .page-link{color:#6c757d;pointer-events:none;cursor:auto;background-color:#fff;border-color:#dee2e6}.pagination-lg .page-link{padding:.75rem 1.5rem;font-size:1.25rem;line-height:1.5}.pagination-lg .page-item:first-child .page-link{border-top-left-radius:.3rem;border-bottom-left-radius:.3rem}.pagination-lg .page-item:last-child .page-link{border-top-right-radius:.3rem;border-bottom-right-radius:.3rem}.pagination-sm .page-link{padding:.25rem .5rem;font-size:.875rem;line-height:1.5}.pagination-sm .page-item:first-child .page-link{border-top-left-radius:.2rem;border-bottom-left-radius:.2rem}.pagination-sm .page-item:last-child .page-link{border-top-right-radius:.2rem;border-bottom-right-radius:.2rem}.badge{display:inline-block;padding:.25em .4em;font-size:75%;font-weight:700;line-height:1;text-align:center;white-space:nowrap;vertical-align:baseline;border-radius:.25rem;transition:color .15s ease-in-out,background-color .15s ease-in-out,border-color .15s ease-in-out,box-shadow .15s ease-in-out}@media (prefers-reduced-motion:reduce){.badge{transition:none}}a.badge:focus,a.badge:hover{text-decoration:none}.badge:empty{display:none}.btn .badge{position:relative;top:-1px}.badge-pill{padding-right:.6em;padding-left:.6em;border-radius:10rem}.badge-primary{color:#fff;background-color:#007bff}a.badge-primary:focus,a.badge-primary:hover{color:#fff;background-color:#0062cc}a.badge-primary.focus,a.badge-primary:focus{outline:0;box-shadow:0 0 0 .2rem rgba(0,123,255,.5)}.badge-secondary{color:#fff;background-color:#6c757d}a.badge-secondary:focus,a.badge-secondary:hover{color:#fff;background-color:#545b62}a.badge-secondary.focus,a.badge-secondary:focus{outline:0;box-shadow:0 0 0 .2rem rgba(108,117,125,.5)}.badge-success{color:#fff;background-color:#28a745}a.badge-success:focus,a.badge-success:hover{color:#fff;background-color:#1e7e34}a.badge-success.focus,a.badge-success:focus{outline:0;box-shadow:0 0 0 .2rem rgba(40,167,69,.5)}.badge-info{color:#fff;background-color:#17a2b8}a.badge-info:focus,a.badge-info:hover{color:#fff;background-color:#117a8b}a.badge-info.focus,a.badge-info:focus{outline:0;box-shadow:0 0 0 .2rem rgba(23,162,184,.5)}.badge-warning{color:#212529;background-color:#ffc107}a.badge-warning:focus,a.badge-warning:hover{color:#212529;background-color:#d39e00}a.badge-warning.focus,a.badge-warning:focus{outline:0;box-shadow:0 0 0 .2rem rgba(255,193,7,.5)}.badge-danger{color:#fff;background-color:#dc3545}a.badge-danger:focus,a.badge-danger:hover{color:#fff;background-color:#bd2130}a.badge-danger.focus,a.badge-danger:focus{outline:0;box-shadow:0 0 0 .2rem rgba(220,53,69,.5)}.badge-light{color:#212529;background-color:#f8f9fa}a.badge-light:focus,a.badge-light:hover{color:#212529;background-color:#dae0e5}a.badge-light.focus,a.badge-light:focus{outline:0;box-shadow:0 0 0 .2rem rgba(248,249,250,.5)}.badge-dark{color:#fff;background-color:#343a40}a.badge-dark:focus,a.badge-dark:hover{color:#fff;background-color:#1d2124}a.badge-dark.focus,a.badge-dark:focus{outline:0;box-shadow:0 0 0 .2rem rgba(52,58,64,.5)}.jumbotron{padding:2rem 1rem;margin-bottom:2rem;background-color:#e9ecef;border-radius:.3rem}@media (min-width:576px){.jumbotron{padding:4rem 2rem}}.jumbotron-fluid{padding-right:0;padding-left:0;border-radius:0}.alert{position:relative;padding:.75rem 1.25rem;margin-bottom:1rem;border:1px solid transparent;border-radius:.25rem}.alert-heading{color:inherit}.alert-link{font-weight:700}.alert-dismissible{padding-right:4rem}.alert-dismissible .close{position:absolute;top:0;right:0;z-index:2;padding:.75rem 1.25rem;color:inherit}.alert-primary{color:#004085;background-color:#cce5ff;border-color:#b8daff}.alert-primary hr{border-top-color:#9fcdff}.alert-primary .alert-link{color:#002752}.alert-secondary{color:#383d41;background-color:#e2e3e5;border-color:#d6d8db}.alert-secondary hr{border-top-color:#c8cbcf}.alert-secondary .alert-link{color:#202326}.alert-success{color:#155724;background-color:#d4edda;border-color:#c3e6cb}.alert-success hr{border-top-color:#b1dfbb}.alert-success .alert-link{color:#0b2e13}.alert-info{color:#0c5460;background-color:#d1ecf1;border-color:#bee5eb}.alert-info hr{border-top-color:#abdde5}.alert-info .alert-link{color:#062c33}.alert-warning{color:#856404;background-color:#fff3cd;border-color:#ffeeba}.alert-warning hr{border-top-color:#ffe8a1}.alert-warning .alert-link{color:#533f03}.alert-danger{color:#721c24;background-color:#f8d7da;border-color:#f5c6cb}.alert-danger hr{border-top-color:#f1b0b7}.alert-danger .alert-link{color:#491217}.alert-light{color:#818182;background-color:#fefefe;border-color:#fdfdfe}.alert-light hr{border-top-color:#ececf6}.alert-light .alert-link{color:#686868}.alert-dark{color:#1b1e21;background-color:#d6d8d9;border-color:#c6c8ca}.alert-dark hr{border-top-color:#b9bbbe}.alert-dark .alert-link{color:#040505}@-webkit-keyframes progress-bar-stripes{from{background-position:1rem 0}to{background-position:0 0}}@keyframes progress-bar-stripes{from{background-position:1rem 0}to{background-position:0 0}}.progress{display:-ms-flexbox;display:flex;height:1rem;overflow:hidden;line-height:0;font-size:.75rem;background-color:#e9ecef;border-radius:.25rem}.progress-bar{display:-ms-flexbox;display:flex;-ms-flex-direction:column;flex-direction:column;-ms-flex-pack:center;justify-content:center;overflow:hidden;color:#fff;text-align:center;white-space:nowrap;background-color:#007bff;transition:width .6s ease}@media (prefers-reduced-motion:reduce){.progress-bar{transition:none}}.progress-bar-striped{background-image:linear-gradient(45deg,rgba(255,255,255,.15) 25%,transparent 25%,transparent 50%,rgba(255,255,255,.15) 50%,rgba(255,255,255,.15) 75%,transparent 75%,transparent);background-size:1rem 1rem}.progress-bar-animated{-webkit-animation:progress-bar-stripes 1s linear infinite;animation:progress-bar-stripes 1s linear infinite}@media (prefers-reduced-motion:reduce){.progress-bar-animated{-webkit-animation:none;animation:none}}.media{display:-ms-flexbox;display:flex;-ms-flex-align:start;align-items:flex-start}.media-body{-ms-flex:1;flex:1}.list-group{display:-ms-flexbox;display:flex;-ms-flex-direction:column;flex-direction:column;padding-left:0;margin-bottom:0;border-radius:.25rem}.list-group-item-action{width:100%;color:#495057;text-align:inherit}.list-group-item-action:focus,.list-group-item-action:hover{z-index:1;color:#495057;text-decoration:none;background-color:#f8f9fa}.list-group-item-action:active{color:#212529;background-color:#e9ecef}.list-group-item{position:relative;display:block;padding:.75rem 1.25rem;background-color:#fff;border:1px solid rgba(0,0,0,.125)}.list-group-item:first-child{border-top-left-radius:inherit;border-top-right-radius:inherit}.list-group-item:last-child{border-bottom-right-radius:inherit;border-bottom-left-radius:inherit}.list-group-item.disabled,.list-group-item:disabled{color:#6c757d;pointer-events:none;background-color:#fff}.list-group-item.active{z-index:2;color:#fff;background-color:#007bff;border-color:#007bff}.list-group-item+.list-group-item{border-top-width:0}.list-group-item+.list-group-item.active{margin-top:-1px;border-top-width:1px}.list-group-horizontal{-ms-flex-direction:row;flex-direction:row}.list-group-horizontal>.list-group-item:first-child{border-bottom-left-radius:.25rem;border-top-right-radius:0}.list-group-horizontal>.list-group-item:last-child{border-top-right-radius:.25rem;border-bottom-left-radius:0}.list-group-horizontal>.list-group-item.active{margin-top:0}.list-group-horizontal>.list-group-item+.list-group-item{border-top-width:1px;border-left-width:0}.list-group-horizontal>.list-group-item+.list-group-item.active{margin-left:-1px;border-left-width:1px}@media (min-width:576px){.list-group-horizontal-sm{-ms-flex-direction:row;flex-direction:row}.list-group-horizontal-sm>.list-group-item:first-child{border-bottom-left-radius:.25rem;border-top-right-radius:0}.list-group-horizontal-sm>.list-group-item:last-child{border-top-right-radius:.25rem;border-bottom-left-radius:0}.list-group-horizontal-sm>.list-group-item.active{margin-top:0}.list-group-horizontal-sm>.list-group-item+.list-group-item{border-top-width:1px;border-left-width:0}.list-group-horizontal-sm>.list-group-item+.list-group-item.active{margin-left:-1px;border-left-width:1px}}@media (min-width:768px){.list-group-horizontal-md{-ms-flex-direction:row;flex-direction:row}.list-group-horizontal-md>.list-group-item:first-child{border-bottom-left-radius:.25rem;border-top-right-radius:0}.list-group-horizontal-md>.list-group-item:last-child{border-top-right-radius:.25rem;border-bottom-left-radius:0}.list-group-horizontal-md>.list-group-item.active{margin-top:0}.list-group-horizontal-md>.list-group-item+.list-group-item{border-top-width:1px;border-left-width:0}.list-group-horizontal-md>.list-group-item+.list-group-item.active{margin-left:-1px;border-left-width:1px}}@media (min-width:992px){.list-group-horizontal-lg{-ms-flex-direction:row;flex-direction:row}.list-group-horizontal-lg>.list-group-item:first-child{border-bottom-left-radius:.25rem;border-top-right-radius:0}.list-group-horizontal-lg>.list-group-item:last-child{border-top-right-radius:.25rem;border-bottom-left-radius:0}.list-group-horizontal-lg>.list-group-item.active{margin-top:0}.list-group-horizontal-lg>.list-group-item+.list-group-item{border-top-width:1px;border-left-width:0}.list-group-horizontal-lg>.list-group-item+.list-group-item.active{margin-left:-1px;border-left-width:1px}}@media (min-width:1200px){.list-group-horizontal-xl{-ms-flex-direction:row;flex-direction:row}.list-group-horizontal-xl>.list-group-item:first-child{border-bottom-left-radius:.25rem;border-top-right-radius:0}.list-group-horizontal-xl>.list-group-item:last-child{border-top-right-radius:.25rem;border-bottom-left-radius:0}.list-group-horizontal-xl>.list-group-item.active{margin-top:0}.list-group-horizontal-xl>.list-group-item+.list-group-item{border-top-width:1px;border-left-width:0}.list-group-horizontal-xl>.list-group-item+.list-group-item.active{margin-left:-1px;border-left-width:1px}}.list-group-flush{border-radius:0}.list-group-flush>.list-group-item{border-width:0 0 1px}.list-group-flush>.list-group-item:last-child{border-bottom-width:0}.list-group-item-primary{color:#004085;background-color:#b8daff}.list-group-item-primary.list-group-item-action:focus,.list-group-item-primary.list-group-item-action:hover{color:#004085;background-color:#9fcdff}.list-group-item-primary.list-group-item-action.active{color:#fff;background-color:#004085;border-color:#004085}.list-group-item-secondary{color:#383d41;background-color:#d6d8db}.list-group-item-secondary.list-group-item-action:focus,.list-group-item-secondary.list-group-item-action:hover{color:#383d41;background-color:#c8cbcf}.list-group-item-secondary.list-group-item-action.active{color:#fff;background-color:#383d41;border-color:#383d41}.list-group-item-success{color:#155724;background-color:#c3e6cb}.list-group-item-success.list-group-item-action:focus,.list-group-item-success.list-group-item-action:hover{color:#155724;background-color:#b1dfbb}.list-group-item-success.list-group-item-action.active{color:#fff;background-color:#155724;border-color:#155724}.list-group-item-info{color:#0c5460;background-color:#bee5eb}.list-group-item-info.list-group-item-action:focus,.list-group-item-info.list-group-item-action:hover{color:#0c5460;background-color:#abdde5}.list-group-item-info.list-group-item-action.active{color:#fff;background-color:#0c5460;border-color:#0c5460}.list-group-item-warning{color:#856404;background-color:#ffeeba}.list-group-item-warning.list-group-item-action:focus,.list-group-item-warning.list-group-item-action:hover{color:#856404;background-color:#ffe8a1}.list-group-item-warning.list-group-item-action.active{color:#fff;background-color:#856404;border-color:#856404}.list-group-item-danger{color:#721c24;background-color:#f5c6cb}.list-group-item-danger.list-group-item-action:focus,.list-group-item-danger.list-group-item-action:hover{color:#721c24;background-color:#f1b0b7}.list-group-item-danger.list-group-item-action.active{color:#fff;background-color:#721c24;border-color:#721c24}.list-group-item-light{color:#818182;background-color:#fdfdfe}.list-group-item-light.list-group-item-action:focus,.list-group-item-light.list-group-item-action:hover{color:#818182;background-color:#ececf6}.list-group-item-light.list-group-item-action.active{color:#fff;background-color:#818182;border-color:#818182}.list-group-item-dark{color:#1b1e21;background-color:#c6c8ca}.list-group-item-dark.list-group-item-action:focus,.list-group-item-dark.list-group-item-action:hover{color:#1b1e21;background-color:#b9bbbe}.list-group-item-dark.list-group-item-action.active{color:#fff;background-color:#1b1e21;border-color:#1b1e21}.close{float:right;font-size:1.5rem;font-weight:700;line-height:1;color:#000;text-shadow:0 1px 0 #fff;opacity:.5}.close:hover{color:#000;text-decoration:none}.close:not(:disabled):not(.disabled):focus,.close:not(:disabled):not(.disabled):hover{opacity:.75}button.close{padding:0;background-color:transparent;border:0}a.close.disabled{pointer-events:none}.toast{-ms-flex-preferred-size:350px;flex-basis:350px;max-width:350px;font-size:.875rem;background-color:rgba(255,255,255,.85);background-clip:padding-box;border:1px solid rgba(0,0,0,.1);box-shadow:0 .25rem .75rem rgba(0,0,0,.1);opacity:0;border-radius:.25rem}.toast:not(:last-child){margin-bottom:.75rem}.toast.showing{opacity:1}.toast.show{display:block;opacity:1}.toast.hide{display:none}.toast-header{display:-ms-flexbox;display:flex;-ms-flex-align:center;align-items:center;padding:.25rem .75rem;color:#6c757d;background-color:rgba(255,255,255,.85);background-clip:padding-box;border-bottom:1px solid rgba(0,0,0,.05);border-top-left-radius:calc(.25rem - 1px);border-top-right-radius:calc(.25rem - 1px)}.toast-body{padding:.75rem}.modal-open{overflow:hidden}.modal-open .modal{overflow-x:hidden;overflow-y:auto}.modal{position:fixed;top:0;left:0;z-index:1050;display:none;width:100%;height:100%;overflow:hidden;outline:0}.modal-dialog{position:relative;width:auto;margin:.5rem;pointer-events:none}.modal.fade .modal-dialog{transition:-webkit-transform .3s ease-out;transition:transform .3s ease-out;transition:transform .3s ease-out,-webkit-transform .3s ease-out;-webkit-transform:translate(0,-50px);transform:translate(0,-50px)}@media (prefers-reduced-motion:reduce){.modal.fade .modal-dialog{transition:none}}.modal.show .modal-dialog{-webkit-transform:none;transform:none}.modal.modal-static .modal-dialog{-webkit-transform:scale(1.02);transform:scale(1.02)}.modal-dialog-scrollable{display:-ms-flexbox;display:flex;max-height:calc(100% - 1rem)}.modal-dialog-scrollable .modal-content{max-height:calc(100vh - 1rem);overflow:hidden}.modal-dialog-scrollable .modal-footer,.modal-dialog-scrollable .modal-header{-ms-flex-negative:0;flex-shrink:0}.modal-dialog-scrollable .modal-body{overflow-y:auto}.modal-dialog-centered{display:-ms-flexbox;display:flex;-ms-flex-align:center;align-items:center;min-height:calc(100% - 1rem)}.modal-dialog-centered::before{display:block;height:calc(100vh - 1rem);height:-webkit-min-content;height:-moz-min-content;height:min-content;content:\"\"}.modal-dialog-centered.modal-dialog-scrollable{-ms-flex-direction:column;flex-direction:column;-ms-flex-pack:center;justify-content:center;height:100%}.modal-dialog-centered.modal-dialog-scrollable .modal-content{max-height:none}.modal-dialog-centered.modal-dialog-scrollable::before{content:none}.modal-content{position:relative;display:-ms-flexbox;display:flex;-ms-flex-direction:column;flex-direction:column;width:100%;pointer-events:auto;background-color:#fff;background-clip:padding-box;border:1px solid rgba(0,0,0,.2);border-radius:.3rem;outline:0}.modal-backdrop{position:fixed;top:0;left:0;z-index:1040;width:100vw;height:100vh;background-color:#000}.modal-backdrop.fade{opacity:0}.modal-backdrop.show{opacity:.5}.modal-header{display:-ms-flexbox;display:flex;-ms-flex-align:start;align-items:flex-start;-ms-flex-pack:justify;justify-content:space-between;padding:1rem 1rem;border-bottom:1px solid #dee2e6;border-top-left-radius:calc(.3rem - 1px);border-top-right-radius:calc(.3rem - 1px)}.modal-header .close{padding:1rem 1rem;margin:-1rem -1rem -1rem auto}.modal-title{margin-bottom:0;line-height:1.5}.modal-body{position:relative;-ms-flex:1 1 auto;flex:1 1 auto;padding:1rem}.modal-footer{display:-ms-flexbox;display:flex;-ms-flex-wrap:wrap;flex-wrap:wrap;-ms-flex-align:center;align-items:center;-ms-flex-pack:end;justify-content:flex-end;padding:.75rem;border-top:1px solid #dee2e6;border-bottom-right-radius:calc(.3rem - 1px);border-bottom-left-radius:calc(.3rem - 1px)}.modal-footer>*{margin:.25rem}.modal-scrollbar-measure{position:absolute;top:-9999px;width:50px;height:50px;overflow:scroll}@media (min-width:576px){.modal-dialog{max-width:500px;margin:1.75rem auto}.modal-dialog-scrollable{max-height:calc(100% - 3.5rem)}.modal-dialog-scrollable .modal-content{max-height:calc(100vh - 3.5rem)}.modal-dialog-centered{min-height:calc(100% - 3.5rem)}.modal-dialog-centered::before{height:calc(100vh - 3.5rem);height:-webkit-min-content;height:-moz-min-content;height:min-content}.modal-sm{max-width:300px}}@media (min-width:992px){.modal-lg,.modal-xl{max-width:800px}}@media (min-width:1200px){.modal-xl{max-width:1140px}}.tooltip{position:absolute;z-index:1070;display:block;margin:0;font-family:-apple-system,BlinkMacSystemFont,\"Segoe UI\",Roboto,\"Helvetica Neue\",Arial,\"Noto Sans\",sans-serif,\"Apple Color Emoji\",\"Segoe UI Emoji\",\"Segoe UI Symbol\",\"Noto Color Emoji\";font-style:normal;font-weight:400;line-height:1.5;text-align:left;text-align:start;text-decoration:none;text-shadow:none;text-transform:none;letter-spacing:normal;word-break:normal;word-spacing:normal;white-space:normal;line-break:auto;font-size:.875rem;word-wrap:break-word;opacity:0}.tooltip.show{opacity:.9}.tooltip .arrow{position:absolute;display:block;width:.8rem;height:.4rem}.tooltip .arrow::before{position:absolute;content:\"\";border-color:transparent;border-style:solid}.bs-tooltip-auto[x-placement^=top],.bs-tooltip-top{padding:.4rem 0}.bs-tooltip-auto[x-placement^=top] .arrow,.bs-tooltip-top .arrow{bottom:0}.bs-tooltip-auto[x-placement^=top] .arrow::before,.bs-tooltip-top .arrow::before{top:0;border-width:.4rem .4rem 0;border-top-color:#000}.bs-tooltip-auto[x-placement^=right],.bs-tooltip-right{padding:0 .4rem}.bs-tooltip-auto[x-placement^=right] .arrow,.bs-tooltip-right .arrow{left:0;width:.4rem;height:.8rem}.bs-tooltip-auto[x-placement^=right] .arrow::before,.bs-tooltip-right .arrow::before{right:0;border-width:.4rem .4rem .4rem 0;border-right-color:#000}.bs-tooltip-auto[x-placement^=bottom],.bs-tooltip-bottom{padding:.4rem 0}.bs-tooltip-auto[x-placement^=bottom] .arrow,.bs-tooltip-bottom .arrow{top:0}.bs-tooltip-auto[x-placement^=bottom] .arrow::before,.bs-tooltip-bottom .arrow::before{bottom:0;border-width:0 .4rem .4rem;border-bottom-color:#000}.bs-tooltip-auto[x-placement^=left],.bs-tooltip-left{padding:0 .4rem}.bs-tooltip-auto[x-placement^=left] .arrow,.bs-tooltip-left .arrow{right:0;width:.4rem;height:.8rem}.bs-tooltip-auto[x-placement^=left] .arrow::before,.bs-tooltip-left .arrow::before{left:0;border-width:.4rem 0 .4rem .4rem;border-left-color:#000}.tooltip-inner{max-width:200px;padding:.25rem .5rem;color:#fff;text-align:center;background-color:#000;border-radius:.25rem}.popover{position:absolute;top:0;left:0;z-index:1060;display:block;max-width:276px;font-family:-apple-system,BlinkMacSystemFont,\"Segoe UI\",Roboto,\"Helvetica Neue\",Arial,\"Noto Sans\",sans-serif,\"Apple Color Emoji\",\"Segoe UI Emoji\",\"Segoe UI Symbol\",\"Noto Color Emoji\";font-style:normal;font-weight:400;line-height:1.5;text-align:left;text-align:start;text-decoration:none;text-shadow:none;text-transform:none;letter-spacing:normal;word-break:normal;word-spacing:normal;white-space:normal;line-break:auto;font-size:.875rem;word-wrap:break-word;background-color:#fff;background-clip:padding-box;border:1px solid rgba(0,0,0,.2);border-radius:.3rem}.popover .arrow{position:absolute;display:block;width:1rem;height:.5rem;margin:0 .3rem}.popover .arrow::after,.popover .arrow::before{position:absolute;display:block;content:\"\";border-color:transparent;border-style:solid}.bs-popover-auto[x-placement^=top],.bs-popover-top{margin-bottom:.5rem}.bs-popover-auto[x-placement^=top]>.arrow,.bs-popover-top>.arrow{bottom:calc(-.5rem - 1px)}.bs-popover-auto[x-placement^=top]>.arrow::before,.bs-popover-top>.arrow::before{bottom:0;border-width:.5rem .5rem 0;border-top-color:rgba(0,0,0,.25)}.bs-popover-auto[x-placement^=top]>.arrow::after,.bs-popover-top>.arrow::after{bottom:1px;border-width:.5rem .5rem 0;border-top-color:#fff}.bs-popover-auto[x-placement^=right],.bs-popover-right{margin-left:.5rem}.bs-popover-auto[x-placement^=right]>.arrow,.bs-popover-right>.arrow{left:calc(-.5rem - 1px);width:.5rem;height:1rem;margin:.3rem 0}.bs-popover-auto[x-placement^=right]>.arrow::before,.bs-popover-right>.arrow::before{left:0;border-width:.5rem .5rem .5rem 0;border-right-color:rgba(0,0,0,.25)}.bs-popover-auto[x-placement^=right]>.arrow::after,.bs-popover-right>.arrow::after{left:1px;border-width:.5rem .5rem .5rem 0;border-right-color:#fff}.bs-popover-auto[x-placement^=bottom],.bs-popover-bottom{margin-top:.5rem}.bs-popover-auto[x-placement^=bottom]>.arrow,.bs-popover-bottom>.arrow{top:calc(-.5rem - 1px)}.bs-popover-auto[x-placement^=bottom]>.arrow::before,.bs-popover-bottom>.arrow::before{top:0;border-width:0 .5rem .5rem .5rem;border-bottom-color:rgba(0,0,0,.25)}.bs-popover-auto[x-placement^=bottom]>.arrow::after,.bs-popover-bottom>.arrow::after{top:1px;border-width:0 .5rem .5rem .5rem;border-bottom-color:#fff}.bs-popover-auto[x-placement^=bottom] .popover-header::before,.bs-popover-bottom .popover-header::before{position:absolute;top:0;left:50%;display:block;width:1rem;margin-left:-.5rem;content:\"\";border-bottom:1px solid #f7f7f7}.bs-popover-auto[x-placement^=left],.bs-popover-left{margin-right:.5rem}.bs-popover-auto[x-placement^=left]>.arrow,.bs-popover-left>.arrow{right:calc(-.5rem - 1px);width:.5rem;height:1rem;margin:.3rem 0}.bs-popover-auto[x-placement^=left]>.arrow::before,.bs-popover-left>.arrow::before{right:0;border-width:.5rem 0 .5rem .5rem;border-left-color:rgba(0,0,0,.25)}.bs-popover-auto[x-placement^=left]>.arrow::after,.bs-popover-left>.arrow::after{right:1px;border-width:.5rem 0 .5rem .5rem;border-left-color:#fff}.popover-header{padding:.5rem .75rem;margin-bottom:0;font-size:1rem;background-color:#f7f7f7;border-bottom:1px solid #ebebeb;border-top-left-radius:calc(.3rem - 1px);border-top-right-radius:calc(.3rem - 1px)}.popover-header:empty{display:none}.popover-body{padding:.5rem .75rem;color:#212529}.carousel{position:relative}.carousel.pointer-event{-ms-touch-action:pan-y;touch-action:pan-y}.carousel-inner{position:relative;width:100%;overflow:hidden}.carousel-inner::after{display:block;clear:both;content:\"\"}.carousel-item{position:relative;display:none;float:left;width:100%;margin-right:-100%;-webkit-backface-visibility:hidden;backface-visibility:hidden;transition:-webkit-transform .6s ease-in-out;transition:transform .6s ease-in-out;transition:transform .6s ease-in-out,-webkit-transform .6s ease-in-out}@media (prefers-reduced-motion:reduce){.carousel-item{transition:none}}.carousel-item-next,.carousel-item-prev,.carousel-item.active{display:block}.active.carousel-item-right,.carousel-item-next:not(.carousel-item-left){-webkit-transform:translateX(100%);transform:translateX(100%)}.active.carousel-item-left,.carousel-item-prev:not(.carousel-item-right){-webkit-transform:translateX(-100%);transform:translateX(-100%)}.carousel-fade .carousel-item{opacity:0;transition-property:opacity;-webkit-transform:none;transform:none}.carousel-fade .carousel-item-next.carousel-item-left,.carousel-fade .carousel-item-prev.carousel-item-right,.carousel-fade .carousel-item.active{z-index:1;opacity:1}.carousel-fade .active.carousel-item-left,.carousel-fade .active.carousel-item-right{z-index:0;opacity:0;transition:opacity 0s .6s}@media (prefers-reduced-motion:reduce){.carousel-fade .active.carousel-item-left,.carousel-fade .active.carousel-item-right{transition:none}}.carousel-control-next,.carousel-control-prev{position:absolute;top:0;bottom:0;z-index:1;display:-ms-flexbox;display:flex;-ms-flex-align:center;align-items:center;-ms-flex-pack:center;justify-content:center;width:15%;color:#fff;text-align:center;opacity:.5;transition:opacity .15s ease}@media (prefers-reduced-motion:reduce){.carousel-control-next,.carousel-control-prev{transition:none}}.carousel-control-next:focus,.carousel-control-next:hover,.carousel-control-prev:focus,.carousel-control-prev:hover{color:#fff;text-decoration:none;outline:0;opacity:.9}.carousel-control-prev{left:0}.carousel-control-next{right:0}.carousel-control-next-icon,.carousel-control-prev-icon{display:inline-block;width:20px;height:20px;background:no-repeat 50%/100% 100%}.carousel-control-prev-icon{background-image:url(\"data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' fill='%23fff' width='8' height='8' viewBox='0 0 8 8'%3e%3cpath d='M5.25 0l-4 4 4 4 1.5-1.5L4.25 4l2.5-2.5L5.25 0z'/%3e%3c/svg%3e\")}.carousel-control-next-icon{background-image:url(\"data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' fill='%23fff' width='8' height='8' viewBox='0 0 8 8'%3e%3cpath d='M2.75 0l-1.5 1.5L3.75 4l-2.5 2.5L2.75 8l4-4-4-4z'/%3e%3c/svg%3e\")}.carousel-indicators{position:absolute;right:0;bottom:0;left:0;z-index:15;display:-ms-flexbox;display:flex;-ms-flex-pack:center;justify-content:center;padding-left:0;margin-right:15%;margin-left:15%;list-style:none}.carousel-indicators li{box-sizing:content-box;-ms-flex:0 1 auto;flex:0 1 auto;width:30px;height:3px;margin-right:3px;margin-left:3px;text-indent:-999px;cursor:pointer;background-color:#fff;background-clip:padding-box;border-top:10px solid transparent;border-bottom:10px solid transparent;opacity:.5;transition:opacity .6s ease}@media (prefers-reduced-motion:reduce){.carousel-indicators li{transition:none}}.carousel-indicators .active{opacity:1}.carousel-caption{position:absolute;right:15%;bottom:20px;left:15%;z-index:10;padding-top:20px;padding-bottom:20px;color:#fff;text-align:center}@-webkit-keyframes spinner-border{to{-webkit-transform:rotate(360deg);transform:rotate(360deg)}}@keyframes spinner-border{to{-webkit-transform:rotate(360deg);transform:rotate(360deg)}}.spinner-border{display:inline-block;width:2rem;height:2rem;vertical-align:text-bottom;border:.25em solid currentColor;border-right-color:transparent;border-radius:50%;-webkit-animation:spinner-border .75s linear infinite;animation:spinner-border .75s linear infinite}.spinner-border-sm{width:1rem;height:1rem;border-width:.2em}@-webkit-keyframes spinner-grow{0%{-webkit-transform:scale(0);transform:scale(0)}50%{opacity:1;-webkit-transform:none;transform:none}}@keyframes spinner-grow{0%{-webkit-transform:scale(0);transform:scale(0)}50%{opacity:1;-webkit-transform:none;transform:none}}.spinner-grow{display:inline-block;width:2rem;height:2rem;vertical-align:text-bottom;background-color:currentColor;border-radius:50%;opacity:0;-webkit-animation:spinner-grow .75s linear infinite;animation:spinner-grow .75s linear infinite}.spinner-grow-sm{width:1rem;height:1rem}.align-baseline{vertical-align:baseline!important}.align-top{vertical-align:top!important}.align-middle{vertical-align:middle!important}.align-bottom{vertical-align:bottom!important}.align-text-bottom{vertical-align:text-bottom!important}.align-text-top{vertical-align:text-top!important}.bg-primary{background-color:#007bff!important}a.bg-primary:focus,a.bg-primary:hover,button.bg-primary:focus,button.bg-primary:hover{background-color:#0062cc!important}.bg-secondary{background-color:#6c757d!important}a.bg-secondary:focus,a.bg-secondary:hover,button.bg-secondary:focus,button.bg-secondary:hover{background-color:#545b62!important}.bg-success{background-color:#28a745!important}a.bg-success:focus,a.bg-success:hover,button.bg-success:focus,button.bg-success:hover{background-color:#1e7e34!important}.bg-info{background-color:#17a2b8!important}a.bg-info:focus,a.bg-info:hover,button.bg-info:focus,button.bg-info:hover{background-color:#117a8b!important}.bg-warning{background-color:#ffc107!important}a.bg-warning:focus,a.bg-warning:hover,button.bg-warning:focus,button.bg-warning:hover{background-color:#d39e00!important}.bg-danger{background-color:#dc3545!important}a.bg-danger:focus,a.bg-danger:hover,button.bg-danger:focus,button.bg-danger:hover{background-color:#bd2130!important}.bg-light{background-color:#f8f9fa!important}a.bg-light:focus,a.bg-light:hover,button.bg-light:focus,button.bg-light:hover{background-color:#dae0e5!important}.bg-dark{background-color:#343a40!important}a.bg-dark:focus,a.bg-dark:hover,button.bg-dark:focus,button.bg-dark:hover{background-color:#1d2124!important}.bg-white{background-color:#fff!important}.bg-transparent{background-color:transparent!important}.border{border:1px solid #dee2e6!important}.border-top{border-top:1px solid #dee2e6!important}.border-right{border-right:1px solid #dee2e6!important}.border-bottom{border-bottom:1px solid #dee2e6!important}.border-left{border-left:1px solid #dee2e6!important}.border-0{border:0!important}.border-top-0{border-top:0!important}.border-right-0{border-right:0!important}.border-bottom-0{border-bottom:0!important}.border-left-0{border-left:0!important}.border-primary{border-color:#007bff!important}.border-secondary{border-color:#6c757d!important}.border-success{border-color:#28a745!important}.border-info{border-color:#17a2b8!important}.border-warning{border-color:#ffc107!important}.border-danger{border-color:#dc3545!important}.border-light{border-color:#f8f9fa!important}.border-dark{border-color:#343a40!important}.border-white{border-color:#fff!important}.rounded-sm{border-radius:.2rem!important}.rounded{border-radius:.25rem!important}.rounded-top{border-top-left-radius:.25rem!important;border-top-right-radius:.25rem!important}.rounded-right{border-top-right-radius:.25rem!important;border-bottom-right-radius:.25rem!important}.rounded-bottom{border-bottom-right-radius:.25rem!important;border-bottom-left-radius:.25rem!important}.rounded-left{border-top-left-radius:.25rem!important;border-bottom-left-radius:.25rem!important}.rounded-lg{border-radius:.3rem!important}.rounded-circle{border-radius:50%!important}.rounded-pill{border-radius:50rem!important}.rounded-0{border-radius:0!important}.clearfix::after{display:block;clear:both;content:\"\"}.d-none{display:none!important}.d-inline{display:inline!important}.d-inline-block{display:inline-block!important}.d-block{display:block!important}.d-table{display:table!important}.d-table-row{display:table-row!important}.d-table-cell{display:table-cell!important}.d-flex{display:-ms-flexbox!important;display:flex!important}.d-inline-flex{display:-ms-inline-flexbox!important;display:inline-flex!important}@media (min-width:576px){.d-sm-none{display:none!important}.d-sm-inline{display:inline!important}.d-sm-inline-block{display:inline-block!important}.d-sm-block{display:block!important}.d-sm-table{display:table!important}.d-sm-table-row{display:table-row!important}.d-sm-table-cell{display:table-cell!important}.d-sm-flex{display:-ms-flexbox!important;display:flex!important}.d-sm-inline-flex{display:-ms-inline-flexbox!important;display:inline-flex!important}}@media (min-width:768px){.d-md-none{display:none!important}.d-md-inline{display:inline!important}.d-md-inline-block{display:inline-block!important}.d-md-block{display:block!important}.d-md-table{display:table!important}.d-md-table-row{display:table-row!important}.d-md-table-cell{display:table-cell!important}.d-md-flex{display:-ms-flexbox!important;display:flex!important}.d-md-inline-flex{display:-ms-inline-flexbox!important;display:inline-flex!important}}@media (min-width:992px){.d-lg-none{display:none!important}.d-lg-inline{display:inline!important}.d-lg-inline-block{display:inline-block!important}.d-lg-block{display:block!important}.d-lg-table{display:table!important}.d-lg-table-row{display:table-row!important}.d-lg-table-cell{display:table-cell!important}.d-lg-flex{display:-ms-flexbox!important;display:flex!important}.d-lg-inline-flex{display:-ms-inline-flexbox!important;display:inline-flex!important}}@media (min-width:1200px){.d-xl-none{display:none!important}.d-xl-inline{display:inline!important}.d-xl-inline-block{display:inline-block!important}.d-xl-block{display:block!important}.d-xl-table{display:table!important}.d-xl-table-row{display:table-row!important}.d-xl-table-cell{display:table-cell!important}.d-xl-flex{display:-ms-flexbox!important;display:flex!important}.d-xl-inline-flex{display:-ms-inline-flexbox!important;display:inline-flex!important}}@media print{.d-print-none{display:none!important}.d-print-inline{display:inline!important}.d-print-inline-block{display:inline-block!important}.d-print-block{display:block!important}.d-print-table{display:table!important}.d-print-table-row{display:table-row!important}.d-print-table-cell{display:table-cell!important}.d-print-flex{display:-ms-flexbox!important;display:flex!important}.d-print-inline-flex{display:-ms-inline-flexbox!important;display:inline-flex!important}}.embed-responsive{position:relative;display:block;width:100%;padding:0;overflow:hidden}.embed-responsive::before{display:block;content:\"\"}.embed-responsive .embed-responsive-item,.embed-responsive embed,.embed-responsive iframe,.embed-responsive object,.embed-responsive video{position:absolute;top:0;bottom:0;left:0;width:100%;height:100%;border:0}.embed-responsive-21by9::before{padding-top:42.857143%}.embed-responsive-16by9::before{padding-top:56.25%}.embed-responsive-4by3::before{padding-top:75%}.embed-responsive-1by1::before{padding-top:100%}.flex-row{-ms-flex-direction:row!important;flex-direction:row!important}.flex-column{-ms-flex-direction:column!important;flex-direction:column!important}.flex-row-reverse{-ms-flex-direction:row-reverse!important;flex-direction:row-reverse!important}.flex-column-reverse{-ms-flex-direction:column-reverse!important;flex-direction:column-reverse!important}.flex-wrap{-ms-flex-wrap:wrap!important;flex-wrap:wrap!important}.flex-nowrap{-ms-flex-wrap:nowrap!important;flex-wrap:nowrap!important}.flex-wrap-reverse{-ms-flex-wrap:wrap-reverse!important;flex-wrap:wrap-reverse!important}.flex-fill{-ms-flex:1 1 auto!important;flex:1 1 auto!important}.flex-grow-0{-ms-flex-positive:0!important;flex-grow:0!important}.flex-grow-1{-ms-flex-positive:1!important;flex-grow:1!important}.flex-shrink-0{-ms-flex-negative:0!important;flex-shrink:0!important}.flex-shrink-1{-ms-flex-negative:1!important;flex-shrink:1!important}.justify-content-start{-ms-flex-pack:start!important;justify-content:flex-start!important}.justify-content-end{-ms-flex-pack:end!important;justify-content:flex-end!important}.justify-content-center{-ms-flex-pack:center!important;justify-content:center!important}.justify-content-between{-ms-flex-pack:justify!important;justify-content:space-between!important}.justify-content-around{-ms-flex-pack:distribute!important;justify-content:space-around!important}.align-items-start{-ms-flex-align:start!important;align-items:flex-start!important}.align-items-end{-ms-flex-align:end!important;align-items:flex-end!important}.align-items-center{-ms-flex-align:center!important;align-items:center!important}.align-items-baseline{-ms-flex-align:baseline!important;align-items:baseline!important}.align-items-stretch{-ms-flex-align:stretch!important;align-items:stretch!important}.align-content-start{-ms-flex-line-pack:start!important;align-content:flex-start!important}.align-content-end{-ms-flex-line-pack:end!important;align-content:flex-end!important}.align-content-center{-ms-flex-line-pack:center!important;align-content:center!important}.align-content-between{-ms-flex-line-pack:justify!important;align-content:space-between!important}.align-content-around{-ms-flex-line-pack:distribute!important;align-content:space-around!important}.align-content-stretch{-ms-flex-line-pack:stretch!important;align-content:stretch!important}.align-self-auto{-ms-flex-item-align:auto!important;align-self:auto!important}.align-self-start{-ms-flex-item-align:start!important;align-self:flex-start!important}.align-self-end{-ms-flex-item-align:end!important;align-self:flex-end!important}.align-self-center{-ms-flex-item-align:center!important;align-self:center!important}.align-self-baseline{-ms-flex-item-align:baseline!important;align-self:baseline!important}.align-self-stretch{-ms-flex-item-align:stretch!important;align-self:stretch!important}@media (min-width:576px){.flex-sm-row{-ms-flex-direction:row!important;flex-direction:row!important}.flex-sm-column{-ms-flex-direction:column!important;flex-direction:column!important}.flex-sm-row-reverse{-ms-flex-direction:row-reverse!important;flex-direction:row-reverse!important}.flex-sm-column-reverse{-ms-flex-direction:column-reverse!important;flex-direction:column-reverse!important}.flex-sm-wrap{-ms-flex-wrap:wrap!important;flex-wrap:wrap!important}.flex-sm-nowrap{-ms-flex-wrap:nowrap!important;flex-wrap:nowrap!important}.flex-sm-wrap-reverse{-ms-flex-wrap:wrap-reverse!important;flex-wrap:wrap-reverse!important}.flex-sm-fill{-ms-flex:1 1 auto!important;flex:1 1 auto!important}.flex-sm-grow-0{-ms-flex-positive:0!important;flex-grow:0!important}.flex-sm-grow-1{-ms-flex-positive:1!important;flex-grow:1!important}.flex-sm-shrink-0{-ms-flex-negative:0!important;flex-shrink:0!important}.flex-sm-shrink-1{-ms-flex-negative:1!important;flex-shrink:1!important}.justify-content-sm-start{-ms-flex-pack:start!important;justify-content:flex-start!important}.justify-content-sm-end{-ms-flex-pack:end!important;justify-content:flex-end!important}.justify-content-sm-center{-ms-flex-pack:center!important;justify-content:center!important}.justify-content-sm-between{-ms-flex-pack:justify!important;justify-content:space-between!important}.justify-content-sm-around{-ms-flex-pack:distribute!important;justify-content:space-around!important}.align-items-sm-start{-ms-flex-align:start!important;align-items:flex-start!important}.align-items-sm-end{-ms-flex-align:end!important;align-items:flex-end!important}.align-items-sm-center{-ms-flex-align:center!important;align-items:center!important}.align-items-sm-baseline{-ms-flex-align:baseline!important;align-items:baseline!important}.align-items-sm-stretch{-ms-flex-align:stretch!important;align-items:stretch!important}.align-content-sm-start{-ms-flex-line-pack:start!important;align-content:flex-start!important}.align-content-sm-end{-ms-flex-line-pack:end!important;align-content:flex-end!important}.align-content-sm-center{-ms-flex-line-pack:center!important;align-content:center!important}.align-content-sm-between{-ms-flex-line-pack:justify!important;align-content:space-between!important}.align-content-sm-around{-ms-flex-line-pack:distribute!important;align-content:space-around!important}.align-content-sm-stretch{-ms-flex-line-pack:stretch!important;align-content:stretch!important}.align-self-sm-auto{-ms-flex-item-align:auto!important;align-self:auto!important}.align-self-sm-start{-ms-flex-item-align:start!important;align-self:flex-start!important}.align-self-sm-end{-ms-flex-item-align:end!important;align-self:flex-end!important}.align-self-sm-center{-ms-flex-item-align:center!important;align-self:center!important}.align-self-sm-baseline{-ms-flex-item-align:baseline!important;align-self:baseline!important}.align-self-sm-stretch{-ms-flex-item-align:stretch!important;align-self:stretch!important}}@media (min-width:768px){.flex-md-row{-ms-flex-direction:row!important;flex-direction:row!important}.flex-md-column{-ms-flex-direction:column!important;flex-direction:column!important}.flex-md-row-reverse{-ms-flex-direction:row-reverse!important;flex-direction:row-reverse!important}.flex-md-column-reverse{-ms-flex-direction:column-reverse!important;flex-direction:column-reverse!important}.flex-md-wrap{-ms-flex-wrap:wrap!important;flex-wrap:wrap!important}.flex-md-nowrap{-ms-flex-wrap:nowrap!important;flex-wrap:nowrap!important}.flex-md-wrap-reverse{-ms-flex-wrap:wrap-reverse!important;flex-wrap:wrap-reverse!important}.flex-md-fill{-ms-flex:1 1 auto!important;flex:1 1 auto!important}.flex-md-grow-0{-ms-flex-positive:0!important;flex-grow:0!important}.flex-md-grow-1{-ms-flex-positive:1!important;flex-grow:1!important}.flex-md-shrink-0{-ms-flex-negative:0!important;flex-shrink:0!important}.flex-md-shrink-1{-ms-flex-negative:1!important;flex-shrink:1!important}.justify-content-md-start{-ms-flex-pack:start!important;justify-content:flex-start!important}.justify-content-md-end{-ms-flex-pack:end!important;justify-content:flex-end!important}.justify-content-md-center{-ms-flex-pack:center!important;justify-content:center!important}.justify-content-md-between{-ms-flex-pack:justify!important;justify-content:space-between!important}.justify-content-md-around{-ms-flex-pack:distribute!important;justify-content:space-around!important}.align-items-md-start{-ms-flex-align:start!important;align-items:flex-start!important}.align-items-md-end{-ms-flex-align:end!important;align-items:flex-end!important}.align-items-md-center{-ms-flex-align:center!important;align-items:center!important}.align-items-md-baseline{-ms-flex-align:baseline!important;align-items:baseline!important}.align-items-md-stretch{-ms-flex-align:stretch!important;align-items:stretch!important}.align-content-md-start{-ms-flex-line-pack:start!important;align-content:flex-start!important}.align-content-md-end{-ms-flex-line-pack:end!important;align-content:flex-end!important}.align-content-md-center{-ms-flex-line-pack:center!important;align-content:center!important}.align-content-md-between{-ms-flex-line-pack:justify!important;align-content:space-between!important}.align-content-md-around{-ms-flex-line-pack:distribute!important;align-content:space-around!important}.align-content-md-stretch{-ms-flex-line-pack:stretch!important;align-content:stretch!important}.align-self-md-auto{-ms-flex-item-align:auto!important;align-self:auto!important}.align-self-md-start{-ms-flex-item-align:start!important;align-self:flex-start!important}.align-self-md-end{-ms-flex-item-align:end!important;align-self:flex-end!important}.align-self-md-center{-ms-flex-item-align:center!important;align-self:center!important}.align-self-md-baseline{-ms-flex-item-align:baseline!important;align-self:baseline!important}.align-self-md-stretch{-ms-flex-item-align:stretch!important;align-self:stretch!important}}@media (min-width:992px){.flex-lg-row{-ms-flex-direction:row!important;flex-direction:row!important}.flex-lg-column{-ms-flex-direction:column!important;flex-direction:column!important}.flex-lg-row-reverse{-ms-flex-direction:row-reverse!important;flex-direction:row-reverse!important}.flex-lg-column-reverse{-ms-flex-direction:column-reverse!important;flex-direction:column-reverse!important}.flex-lg-wrap{-ms-flex-wrap:wrap!important;flex-wrap:wrap!important}.flex-lg-nowrap{-ms-flex-wrap:nowrap!important;flex-wrap:nowrap!important}.flex-lg-wrap-reverse{-ms-flex-wrap:wrap-reverse!important;flex-wrap:wrap-reverse!important}.flex-lg-fill{-ms-flex:1 1 auto!important;flex:1 1 auto!important}.flex-lg-grow-0{-ms-flex-positive:0!important;flex-grow:0!important}.flex-lg-grow-1{-ms-flex-positive:1!important;flex-grow:1!important}.flex-lg-shrink-0{-ms-flex-negative:0!important;flex-shrink:0!important}.flex-lg-shrink-1{-ms-flex-negative:1!important;flex-shrink:1!important}.justify-content-lg-start{-ms-flex-pack:start!important;justify-content:flex-start!important}.justify-content-lg-end{-ms-flex-pack:end!important;justify-content:flex-end!important}.justify-content-lg-center{-ms-flex-pack:center!important;justify-content:center!important}.justify-content-lg-between{-ms-flex-pack:justify!important;justify-content:space-between!important}.justify-content-lg-around{-ms-flex-pack:distribute!important;justify-content:space-around!important}.align-items-lg-start{-ms-flex-align:start!important;align-items:flex-start!important}.align-items-lg-end{-ms-flex-align:end!important;align-items:flex-end!important}.align-items-lg-center{-ms-flex-align:center!important;align-items:center!important}.align-items-lg-baseline{-ms-flex-align:baseline!important;align-items:baseline!important}.align-items-lg-stretch{-ms-flex-align:stretch!important;align-items:stretch!important}.align-content-lg-start{-ms-flex-line-pack:start!important;align-content:flex-start!important}.align-content-lg-end{-ms-flex-line-pack:end!important;align-content:flex-end!important}.align-content-lg-center{-ms-flex-line-pack:center!important;align-content:center!important}.align-content-lg-between{-ms-flex-line-pack:justify!important;align-content:space-between!important}.align-content-lg-around{-ms-flex-line-pack:distribute!important;align-content:space-around!important}.align-content-lg-stretch{-ms-flex-line-pack:stretch!important;align-content:stretch!important}.align-self-lg-auto{-ms-flex-item-align:auto!important;align-self:auto!important}.align-self-lg-start{-ms-flex-item-align:start!important;align-self:flex-start!important}.align-self-lg-end{-ms-flex-item-align:end!important;align-self:flex-end!important}.align-self-lg-center{-ms-flex-item-align:center!important;align-self:center!important}.align-self-lg-baseline{-ms-flex-item-align:baseline!important;align-self:baseline!important}.align-self-lg-stretch{-ms-flex-item-align:stretch!important;align-self:stretch!important}}@media (min-width:1200px){.flex-xl-row{-ms-flex-direction:row!important;flex-direction:row!important}.flex-xl-column{-ms-flex-direction:column!important;flex-direction:column!important}.flex-xl-row-reverse{-ms-flex-direction:row-reverse!important;flex-direction:row-reverse!important}.flex-xl-column-reverse{-ms-flex-direction:column-reverse!important;flex-direction:column-reverse!important}.flex-xl-wrap{-ms-flex-wrap:wrap!important;flex-wrap:wrap!important}.flex-xl-nowrap{-ms-flex-wrap:nowrap!important;flex-wrap:nowrap!important}.flex-xl-wrap-reverse{-ms-flex-wrap:wrap-reverse!important;flex-wrap:wrap-reverse!important}.flex-xl-fill{-ms-flex:1 1 auto!important;flex:1 1 auto!important}.flex-xl-grow-0{-ms-flex-positive:0!important;flex-grow:0!important}.flex-xl-grow-1{-ms-flex-positive:1!important;flex-grow:1!important}.flex-xl-shrink-0{-ms-flex-negative:0!important;flex-shrink:0!important}.flex-xl-shrink-1{-ms-flex-negative:1!important;flex-shrink:1!important}.justify-content-xl-start{-ms-flex-pack:start!important;justify-content:flex-start!important}.justify-content-xl-end{-ms-flex-pack:end!important;justify-content:flex-end!important}.justify-content-xl-center{-ms-flex-pack:center!important;justify-content:center!important}.justify-content-xl-between{-ms-flex-pack:justify!important;justify-content:space-between!important}.justify-content-xl-around{-ms-flex-pack:distribute!important;justify-content:space-around!important}.align-items-xl-start{-ms-flex-align:start!important;align-items:flex-start!important}.align-items-xl-end{-ms-flex-align:end!important;align-items:flex-end!important}.align-items-xl-center{-ms-flex-align:center!important;align-items:center!important}.align-items-xl-baseline{-ms-flex-align:baseline!important;align-items:baseline!important}.align-items-xl-stretch{-ms-flex-align:stretch!important;align-items:stretch!important}.align-content-xl-start{-ms-flex-line-pack:start!important;align-content:flex-start!important}.align-content-xl-end{-ms-flex-line-pack:end!important;align-content:flex-end!important}.align-content-xl-center{-ms-flex-line-pack:center!important;align-content:center!important}.align-content-xl-between{-ms-flex-line-pack:justify!important;align-content:space-between!important}.align-content-xl-around{-ms-flex-line-pack:distribute!important;align-content:space-around!important}.align-content-xl-stretch{-ms-flex-line-pack:stretch!important;align-content:stretch!important}.align-self-xl-auto{-ms-flex-item-align:auto!important;align-self:auto!important}.align-self-xl-start{-ms-flex-item-align:start!important;align-self:flex-start!important}.align-self-xl-end{-ms-flex-item-align:end!important;align-self:flex-end!important}.align-self-xl-center{-ms-flex-item-align:center!important;align-self:center!important}.align-self-xl-baseline{-ms-flex-item-align:baseline!important;align-self:baseline!important}.align-self-xl-stretch{-ms-flex-item-align:stretch!important;align-self:stretch!important}}.float-left{float:left!important}.float-right{float:right!important}.float-none{float:none!important}@media (min-width:576px){.float-sm-left{float:left!important}.float-sm-right{float:right!important}.float-sm-none{float:none!important}}@media (min-width:768px){.float-md-left{float:left!important}.float-md-right{float:right!important}.float-md-none{float:none!important}}@media (min-width:992px){.float-lg-left{float:left!important}.float-lg-right{float:right!important}.float-lg-none{float:none!important}}@media (min-width:1200px){.float-xl-left{float:left!important}.float-xl-right{float:right!important}.float-xl-none{float:none!important}}.user-select-all{-webkit-user-select:all!important;-moz-user-select:all!important;-ms-user-select:all!important;user-select:all!important}.user-select-auto{-webkit-user-select:auto!important;-moz-user-select:auto!important;-ms-user-select:auto!important;user-select:auto!important}.user-select-none{-webkit-user-select:none!important;-moz-user-select:none!important;-ms-user-select:none!important;user-select:none!important}.overflow-auto{overflow:auto!important}.overflow-hidden{overflow:hidden!important}.position-static{position:static!important}.position-relative{position:relative!important}.position-absolute{position:absolute!important}.position-fixed{position:fixed!important}.position-sticky{position:-webkit-sticky!important;position:sticky!important}.fixed-top{position:fixed;top:0;right:0;left:0;z-index:1030}.fixed-bottom{position:fixed;right:0;bottom:0;left:0;z-index:1030}@supports ((position:-webkit-sticky) or (position:sticky)){.sticky-top{position:-webkit-sticky;position:sticky;top:0;z-index:1020}}.sr-only{position:absolute;width:1px;height:1px;padding:0;margin:-1px;overflow:hidden;clip:rect(0,0,0,0);white-space:nowrap;border:0}.sr-only-focusable:active,.sr-only-focusable:focus{position:static;width:auto;height:auto;overflow:visible;clip:auto;white-space:normal}.shadow-sm{box-shadow:0 .125rem .25rem rgba(0,0,0,.075)!important}.shadow{box-shadow:0 .5rem 1rem rgba(0,0,0,.15)!important}.shadow-lg{box-shadow:0 1rem 3rem rgba(0,0,0,.175)!important}.shadow-none{box-shadow:none!important}.w-25{width:25%!important}.w-50{width:50%!important}.w-75{width:75%!important}.w-100{width:100%!important}.w-auto{width:auto!important}.h-25{height:25%!important}.h-50{height:50%!important}.h-75{height:75%!important}.h-100{height:100%!important}.h-auto{height:auto!important}.mw-100{max-width:100%!important}.mh-100{max-height:100%!important}.min-vw-100{min-width:100vw!important}.min-vh-100{min-height:100vh!important}.vw-100{width:100vw!important}.vh-100{height:100vh!important}.m-0{margin:0!important}.mt-0,.my-0{margin-top:0!important}.mr-0,.mx-0{margin-right:0!important}.mb-0,.my-0{margin-bottom:0!important}.ml-0,.mx-0{margin-left:0!important}.m-1{margin:.25rem!important}.mt-1,.my-1{margin-top:.25rem!important}.mr-1,.mx-1{margin-right:.25rem!important}.mb-1,.my-1{margin-bottom:.25rem!important}.ml-1,.mx-1{margin-left:.25rem!important}.m-2{margin:.5rem!important}.mt-2,.my-2{margin-top:.5rem!important}.mr-2,.mx-2{margin-right:.5rem!important}.mb-2,.my-2{margin-bottom:.5rem!important}.ml-2,.mx-2{margin-left:.5rem!important}.m-3{margin:1rem!important}.mt-3,.my-3{margin-top:1rem!important}.mr-3,.mx-3{margin-right:1rem!important}.mb-3,.my-3{margin-bottom:1rem!important}.ml-3,.mx-3{margin-left:1rem!important}.m-4{margin:1.5rem!important}.mt-4,.my-4{margin-top:1.5rem!important}.mr-4,.mx-4{margin-right:1.5rem!important}.mb-4,.my-4{margin-bottom:1.5rem!important}.ml-4,.mx-4{margin-left:1.5rem!important}.m-5{margin:3rem!important}.mt-5,.my-5{margin-top:3rem!important}.mr-5,.mx-5{margin-right:3rem!important}.mb-5,.my-5{margin-bottom:3rem!important}.ml-5,.mx-5{margin-left:3rem!important}.p-0{padding:0!important}.pt-0,.py-0{padding-top:0!important}.pr-0,.px-0{padding-right:0!important}.pb-0,.py-0{padding-bottom:0!important}.pl-0,.px-0{padding-left:0!important}.p-1{padding:.25rem!important}.pt-1,.py-1{padding-top:.25rem!important}.pr-1,.px-1{padding-right:.25rem!important}.pb-1,.py-1{padding-bottom:.25rem!important}.pl-1,.px-1{padding-left:.25rem!important}.p-2{padding:.5rem!important}.pt-2,.py-2{padding-top:.5rem!important}.pr-2,.px-2{padding-right:.5rem!important}.pb-2,.py-2{padding-bottom:.5rem!important}.pl-2,.px-2{padding-left:.5rem!important}.p-3{padding:1rem!important}.pt-3,.py-3{padding-top:1rem!important}.pr-3,.px-3{padding-right:1rem!important}.pb-3,.py-3{padding-bottom:1rem!important}.pl-3,.px-3{padding-left:1rem!important}.p-4{padding:1.5rem!important}.pt-4,.py-4{padding-top:1.5rem!important}.pr-4,.px-4{padding-right:1.5rem!important}.pb-4,.py-4{padding-bottom:1.5rem!important}.pl-4,.px-4{padding-left:1.5rem!important}.p-5{padding:3rem!important}.pt-5,.py-5{padding-top:3rem!important}.pr-5,.px-5{padding-right:3rem!important}.pb-5,.py-5{padding-bottom:3rem!important}.pl-5,.px-5{padding-left:3rem!important}.m-n1{margin:-.25rem!important}.mt-n1,.my-n1{margin-top:-.25rem!important}.mr-n1,.mx-n1{margin-right:-.25rem!important}.mb-n1,.my-n1{margin-bottom:-.25rem!important}.ml-n1,.mx-n1{margin-left:-.25rem!important}.m-n2{margin:-.5rem!important}.mt-n2,.my-n2{margin-top:-.5rem!important}.mr-n2,.mx-n2{margin-right:-.5rem!important}.mb-n2,.my-n2{margin-bottom:-.5rem!important}.ml-n2,.mx-n2{margin-left:-.5rem!important}.m-n3{margin:-1rem!important}.mt-n3,.my-n3{margin-top:-1rem!important}.mr-n3,.mx-n3{margin-right:-1rem!important}.mb-n3,.my-n3{margin-bottom:-1rem!important}.ml-n3,.mx-n3{margin-left:-1rem!important}.m-n4{margin:-1.5rem!important}.mt-n4,.my-n4{margin-top:-1.5rem!important}.mr-n4,.mx-n4{margin-right:-1.5rem!important}.mb-n4,.my-n4{margin-bottom:-1.5rem!important}.ml-n4,.mx-n4{margin-left:-1.5rem!important}.m-n5{margin:-3rem!important}.mt-n5,.my-n5{margin-top:-3rem!important}.mr-n5,.mx-n5{margin-right:-3rem!important}.mb-n5,.my-n5{margin-bottom:-3rem!important}.ml-n5,.mx-n5{margin-left:-3rem!important}.m-auto{margin:auto!important}.mt-auto,.my-auto{margin-top:auto!important}.mr-auto,.mx-auto{margin-right:auto!important}.mb-auto,.my-auto{margin-bottom:auto!important}.ml-auto,.mx-auto{margin-left:auto!important}@media (min-width:576px){.m-sm-0{margin:0!important}.mt-sm-0,.my-sm-0{margin-top:0!important}.mr-sm-0,.mx-sm-0{margin-right:0!important}.mb-sm-0,.my-sm-0{margin-bottom:0!important}.ml-sm-0,.mx-sm-0{margin-left:0!important}.m-sm-1{margin:.25rem!important}.mt-sm-1,.my-sm-1{margin-top:.25rem!important}.mr-sm-1,.mx-sm-1{margin-right:.25rem!important}.mb-sm-1,.my-sm-1{margin-bottom:.25rem!important}.ml-sm-1,.mx-sm-1{margin-left:.25rem!important}.m-sm-2{margin:.5rem!important}.mt-sm-2,.my-sm-2{margin-top:.5rem!important}.mr-sm-2,.mx-sm-2{margin-right:.5rem!important}.mb-sm-2,.my-sm-2{margin-bottom:.5rem!important}.ml-sm-2,.mx-sm-2{margin-left:.5rem!important}.m-sm-3{margin:1rem!important}.mt-sm-3,.my-sm-3{margin-top:1rem!important}.mr-sm-3,.mx-sm-3{margin-right:1rem!important}.mb-sm-3,.my-sm-3{margin-bottom:1rem!important}.ml-sm-3,.mx-sm-3{margin-left:1rem!important}.m-sm-4{margin:1.5rem!important}.mt-sm-4,.my-sm-4{margin-top:1.5rem!important}.mr-sm-4,.mx-sm-4{margin-right:1.5rem!important}.mb-sm-4,.my-sm-4{margin-bottom:1.5rem!important}.ml-sm-4,.mx-sm-4{margin-left:1.5rem!important}.m-sm-5{margin:3rem!important}.mt-sm-5,.my-sm-5{margin-top:3rem!important}.mr-sm-5,.mx-sm-5{margin-right:3rem!important}.mb-sm-5,.my-sm-5{margin-bottom:3rem!important}.ml-sm-5,.mx-sm-5{margin-left:3rem!important}.p-sm-0{padding:0!important}.pt-sm-0,.py-sm-0{padding-top:0!important}.pr-sm-0,.px-sm-0{padding-right:0!important}.pb-sm-0,.py-sm-0{padding-bottom:0!important}.pl-sm-0,.px-sm-0{padding-left:0!important}.p-sm-1{padding:.25rem!important}.pt-sm-1,.py-sm-1{padding-top:.25rem!important}.pr-sm-1,.px-sm-1{padding-right:.25rem!important}.pb-sm-1,.py-sm-1{padding-bottom:.25rem!important}.pl-sm-1,.px-sm-1{padding-left:.25rem!important}.p-sm-2{padding:.5rem!important}.pt-sm-2,.py-sm-2{padding-top:.5rem!important}.pr-sm-2,.px-sm-2{padding-right:.5rem!important}.pb-sm-2,.py-sm-2{padding-bottom:.5rem!important}.pl-sm-2,.px-sm-2{padding-left:.5rem!important}.p-sm-3{padding:1rem!important}.pt-sm-3,.py-sm-3{padding-top:1rem!important}.pr-sm-3,.px-sm-3{padding-right:1rem!important}.pb-sm-3,.py-sm-3{padding-bottom:1rem!important}.pl-sm-3,.px-sm-3{padding-left:1rem!important}.p-sm-4{padding:1.5rem!important}.pt-sm-4,.py-sm-4{padding-top:1.5rem!important}.pr-sm-4,.px-sm-4{padding-right:1.5rem!important}.pb-sm-4,.py-sm-4{padding-bottom:1.5rem!important}.pl-sm-4,.px-sm-4{padding-left:1.5rem!important}.p-sm-5{padding:3rem!important}.pt-sm-5,.py-sm-5{padding-top:3rem!important}.pr-sm-5,.px-sm-5{padding-right:3rem!important}.pb-sm-5,.py-sm-5{padding-bottom:3rem!important}.pl-sm-5,.px-sm-5{padding-left:3rem!important}.m-sm-n1{margin:-.25rem!important}.mt-sm-n1,.my-sm-n1{margin-top:-.25rem!important}.mr-sm-n1,.mx-sm-n1{margin-right:-.25rem!important}.mb-sm-n1,.my-sm-n1{margin-bottom:-.25rem!important}.ml-sm-n1,.mx-sm-n1{margin-left:-.25rem!important}.m-sm-n2{margin:-.5rem!important}.mt-sm-n2,.my-sm-n2{margin-top:-.5rem!important}.mr-sm-n2,.mx-sm-n2{margin-right:-.5rem!important}.mb-sm-n2,.my-sm-n2{margin-bottom:-.5rem!important}.ml-sm-n2,.mx-sm-n2{margin-left:-.5rem!important}.m-sm-n3{margin:-1rem!important}.mt-sm-n3,.my-sm-n3{margin-top:-1rem!important}.mr-sm-n3,.mx-sm-n3{margin-right:-1rem!important}.mb-sm-n3,.my-sm-n3{margin-bottom:-1rem!important}.ml-sm-n3,.mx-sm-n3{margin-left:-1rem!important}.m-sm-n4{margin:-1.5rem!important}.mt-sm-n4,.my-sm-n4{margin-top:-1.5rem!important}.mr-sm-n4,.mx-sm-n4{margin-right:-1.5rem!important}.mb-sm-n4,.my-sm-n4{margin-bottom:-1.5rem!important}.ml-sm-n4,.mx-sm-n4{margin-left:-1.5rem!important}.m-sm-n5{margin:-3rem!important}.mt-sm-n5,.my-sm-n5{margin-top:-3rem!important}.mr-sm-n5,.mx-sm-n5{margin-right:-3rem!important}.mb-sm-n5,.my-sm-n5{margin-bottom:-3rem!important}.ml-sm-n5,.mx-sm-n5{margin-left:-3rem!important}.m-sm-auto{margin:auto!important}.mt-sm-auto,.my-sm-auto{margin-top:auto!important}.mr-sm-auto,.mx-sm-auto{margin-right:auto!important}.mb-sm-auto,.my-sm-auto{margin-bottom:auto!important}.ml-sm-auto,.mx-sm-auto{margin-left:auto!important}}@media (min-width:768px){.m-md-0{margin:0!important}.mt-md-0,.my-md-0{margin-top:0!important}.mr-md-0,.mx-md-0{margin-right:0!important}.mb-md-0,.my-md-0{margin-bottom:0!important}.ml-md-0,.mx-md-0{margin-left:0!important}.m-md-1{margin:.25rem!important}.mt-md-1,.my-md-1{margin-top:.25rem!important}.mr-md-1,.mx-md-1{margin-right:.25rem!important}.mb-md-1,.my-md-1{margin-bottom:.25rem!important}.ml-md-1,.mx-md-1{margin-left:.25rem!important}.m-md-2{margin:.5rem!important}.mt-md-2,.my-md-2{margin-top:.5rem!important}.mr-md-2,.mx-md-2{margin-right:.5rem!important}.mb-md-2,.my-md-2{margin-bottom:.5rem!important}.ml-md-2,.mx-md-2{margin-left:.5rem!important}.m-md-3{margin:1rem!important}.mt-md-3,.my-md-3{margin-top:1rem!important}.mr-md-3,.mx-md-3{margin-right:1rem!important}.mb-md-3,.my-md-3{margin-bottom:1rem!important}.ml-md-3,.mx-md-3{margin-left:1rem!important}.m-md-4{margin:1.5rem!important}.mt-md-4,.my-md-4{margin-top:1.5rem!important}.mr-md-4,.mx-md-4{margin-right:1.5rem!important}.mb-md-4,.my-md-4{margin-bottom:1.5rem!important}.ml-md-4,.mx-md-4{margin-left:1.5rem!important}.m-md-5{margin:3rem!important}.mt-md-5,.my-md-5{margin-top:3rem!important}.mr-md-5,.mx-md-5{margin-right:3rem!important}.mb-md-5,.my-md-5{margin-bottom:3rem!important}.ml-md-5,.mx-md-5{margin-left:3rem!important}.p-md-0{padding:0!important}.pt-md-0,.py-md-0{padding-top:0!important}.pr-md-0,.px-md-0{padding-right:0!important}.pb-md-0,.py-md-0{padding-bottom:0!important}.pl-md-0,.px-md-0{padding-left:0!important}.p-md-1{padding:.25rem!important}.pt-md-1,.py-md-1{padding-top:.25rem!important}.pr-md-1,.px-md-1{padding-right:.25rem!important}.pb-md-1,.py-md-1{padding-bottom:.25rem!important}.pl-md-1,.px-md-1{padding-left:.25rem!important}.p-md-2{padding:.5rem!important}.pt-md-2,.py-md-2{padding-top:.5rem!important}.pr-md-2,.px-md-2{padding-right:.5rem!important}.pb-md-2,.py-md-2{padding-bottom:.5rem!important}.pl-md-2,.px-md-2{padding-left:.5rem!important}.p-md-3{padding:1rem!important}.pt-md-3,.py-md-3{padding-top:1rem!important}.pr-md-3,.px-md-3{padding-right:1rem!important}.pb-md-3,.py-md-3{padding-bottom:1rem!important}.pl-md-3,.px-md-3{padding-left:1rem!important}.p-md-4{padding:1.5rem!important}.pt-md-4,.py-md-4{padding-top:1.5rem!important}.pr-md-4,.px-md-4{padding-right:1.5rem!important}.pb-md-4,.py-md-4{padding-bottom:1.5rem!important}.pl-md-4,.px-md-4{padding-left:1.5rem!important}.p-md-5{padding:3rem!important}.pt-md-5,.py-md-5{padding-top:3rem!important}.pr-md-5,.px-md-5{padding-right:3rem!important}.pb-md-5,.py-md-5{padding-bottom:3rem!important}.pl-md-5,.px-md-5{padding-left:3rem!important}.m-md-n1{margin:-.25rem!important}.mt-md-n1,.my-md-n1{margin-top:-.25rem!important}.mr-md-n1,.mx-md-n1{margin-right:-.25rem!important}.mb-md-n1,.my-md-n1{margin-bottom:-.25rem!important}.ml-md-n1,.mx-md-n1{margin-left:-.25rem!important}.m-md-n2{margin:-.5rem!important}.mt-md-n2,.my-md-n2{margin-top:-.5rem!important}.mr-md-n2,.mx-md-n2{margin-right:-.5rem!important}.mb-md-n2,.my-md-n2{margin-bottom:-.5rem!important}.ml-md-n2,.mx-md-n2{margin-left:-.5rem!important}.m-md-n3{margin:-1rem!important}.mt-md-n3,.my-md-n3{margin-top:-1rem!important}.mr-md-n3,.mx-md-n3{margin-right:-1rem!important}.mb-md-n3,.my-md-n3{margin-bottom:-1rem!important}.ml-md-n3,.mx-md-n3{margin-left:-1rem!important}.m-md-n4{margin:-1.5rem!important}.mt-md-n4,.my-md-n4{margin-top:-1.5rem!important}.mr-md-n4,.mx-md-n4{margin-right:-1.5rem!important}.mb-md-n4,.my-md-n4{margin-bottom:-1.5rem!important}.ml-md-n4,.mx-md-n4{margin-left:-1.5rem!important}.m-md-n5{margin:-3rem!important}.mt-md-n5,.my-md-n5{margin-top:-3rem!important}.mr-md-n5,.mx-md-n5{margin-right:-3rem!important}.mb-md-n5,.my-md-n5{margin-bottom:-3rem!important}.ml-md-n5,.mx-md-n5{margin-left:-3rem!important}.m-md-auto{margin:auto!important}.mt-md-auto,.my-md-auto{margin-top:auto!important}.mr-md-auto,.mx-md-auto{margin-right:auto!important}.mb-md-auto,.my-md-auto{margin-bottom:auto!important}.ml-md-auto,.mx-md-auto{margin-left:auto!important}}@media (min-width:992px){.m-lg-0{margin:0!important}.mt-lg-0,.my-lg-0{margin-top:0!important}.mr-lg-0,.mx-lg-0{margin-right:0!important}.mb-lg-0,.my-lg-0{margin-bottom:0!important}.ml-lg-0,.mx-lg-0{margin-left:0!important}.m-lg-1{margin:.25rem!important}.mt-lg-1,.my-lg-1{margin-top:.25rem!important}.mr-lg-1,.mx-lg-1{margin-right:.25rem!important}.mb-lg-1,.my-lg-1{margin-bottom:.25rem!important}.ml-lg-1,.mx-lg-1{margin-left:.25rem!important}.m-lg-2{margin:.5rem!important}.mt-lg-2,.my-lg-2{margin-top:.5rem!important}.mr-lg-2,.mx-lg-2{margin-right:.5rem!important}.mb-lg-2,.my-lg-2{margin-bottom:.5rem!important}.ml-lg-2,.mx-lg-2{margin-left:.5rem!important}.m-lg-3{margin:1rem!important}.mt-lg-3,.my-lg-3{margin-top:1rem!important}.mr-lg-3,.mx-lg-3{margin-right:1rem!important}.mb-lg-3,.my-lg-3{margin-bottom:1rem!important}.ml-lg-3,.mx-lg-3{margin-left:1rem!important}.m-lg-4{margin:1.5rem!important}.mt-lg-4,.my-lg-4{margin-top:1.5rem!important}.mr-lg-4,.mx-lg-4{margin-right:1.5rem!important}.mb-lg-4,.my-lg-4{margin-bottom:1.5rem!important}.ml-lg-4,.mx-lg-4{margin-left:1.5rem!important}.m-lg-5{margin:3rem!important}.mt-lg-5,.my-lg-5{margin-top:3rem!important}.mr-lg-5,.mx-lg-5{margin-right:3rem!important}.mb-lg-5,.my-lg-5{margin-bottom:3rem!important}.ml-lg-5,.mx-lg-5{margin-left:3rem!important}.p-lg-0{padding:0!important}.pt-lg-0,.py-lg-0{padding-top:0!important}.pr-lg-0,.px-lg-0{padding-right:0!important}.pb-lg-0,.py-lg-0{padding-bottom:0!important}.pl-lg-0,.px-lg-0{padding-left:0!important}.p-lg-1{padding:.25rem!important}.pt-lg-1,.py-lg-1{padding-top:.25rem!important}.pr-lg-1,.px-lg-1{padding-right:.25rem!important}.pb-lg-1,.py-lg-1{padding-bottom:.25rem!important}.pl-lg-1,.px-lg-1{padding-left:.25rem!important}.p-lg-2{padding:.5rem!important}.pt-lg-2,.py-lg-2{padding-top:.5rem!important}.pr-lg-2,.px-lg-2{padding-right:.5rem!important}.pb-lg-2,.py-lg-2{padding-bottom:.5rem!important}.pl-lg-2,.px-lg-2{padding-left:.5rem!important}.p-lg-3{padding:1rem!important}.pt-lg-3,.py-lg-3{padding-top:1rem!important}.pr-lg-3,.px-lg-3{padding-right:1rem!important}.pb-lg-3,.py-lg-3{padding-bottom:1rem!important}.pl-lg-3,.px-lg-3{padding-left:1rem!important}.p-lg-4{padding:1.5rem!important}.pt-lg-4,.py-lg-4{padding-top:1.5rem!important}.pr-lg-4,.px-lg-4{padding-right:1.5rem!important}.pb-lg-4,.py-lg-4{padding-bottom:1.5rem!important}.pl-lg-4,.px-lg-4{padding-left:1.5rem!important}.p-lg-5{padding:3rem!important}.pt-lg-5,.py-lg-5{padding-top:3rem!important}.pr-lg-5,.px-lg-5{padding-right:3rem!important}.pb-lg-5,.py-lg-5{padding-bottom:3rem!important}.pl-lg-5,.px-lg-5{padding-left:3rem!important}.m-lg-n1{margin:-.25rem!important}.mt-lg-n1,.my-lg-n1{margin-top:-.25rem!important}.mr-lg-n1,.mx-lg-n1{margin-right:-.25rem!important}.mb-lg-n1,.my-lg-n1{margin-bottom:-.25rem!important}.ml-lg-n1,.mx-lg-n1{margin-left:-.25rem!important}.m-lg-n2{margin:-.5rem!important}.mt-lg-n2,.my-lg-n2{margin-top:-.5rem!important}.mr-lg-n2,.mx-lg-n2{margin-right:-.5rem!important}.mb-lg-n2,.my-lg-n2{margin-bottom:-.5rem!important}.ml-lg-n2,.mx-lg-n2{margin-left:-.5rem!important}.m-lg-n3{margin:-1rem!important}.mt-lg-n3,.my-lg-n3{margin-top:-1rem!important}.mr-lg-n3,.mx-lg-n3{margin-right:-1rem!important}.mb-lg-n3,.my-lg-n3{margin-bottom:-1rem!important}.ml-lg-n3,.mx-lg-n3{margin-left:-1rem!important}.m-lg-n4{margin:-1.5rem!important}.mt-lg-n4,.my-lg-n4{margin-top:-1.5rem!important}.mr-lg-n4,.mx-lg-n4{margin-right:-1.5rem!important}.mb-lg-n4,.my-lg-n4{margin-bottom:-1.5rem!important}.ml-lg-n4,.mx-lg-n4{margin-left:-1.5rem!important}.m-lg-n5{margin:-3rem!important}.mt-lg-n5,.my-lg-n5{margin-top:-3rem!important}.mr-lg-n5,.mx-lg-n5{margin-right:-3rem!important}.mb-lg-n5,.my-lg-n5{margin-bottom:-3rem!important}.ml-lg-n5,.mx-lg-n5{margin-left:-3rem!important}.m-lg-auto{margin:auto!important}.mt-lg-auto,.my-lg-auto{margin-top:auto!important}.mr-lg-auto,.mx-lg-auto{margin-right:auto!important}.mb-lg-auto,.my-lg-auto{margin-bottom:auto!important}.ml-lg-auto,.mx-lg-auto{margin-left:auto!important}}@media (min-width:1200px){.m-xl-0{margin:0!important}.mt-xl-0,.my-xl-0{margin-top:0!important}.mr-xl-0,.mx-xl-0{margin-right:0!important}.mb-xl-0,.my-xl-0{margin-bottom:0!important}.ml-xl-0,.mx-xl-0{margin-left:0!important}.m-xl-1{margin:.25rem!important}.mt-xl-1,.my-xl-1{margin-top:.25rem!important}.mr-xl-1,.mx-xl-1{margin-right:.25rem!important}.mb-xl-1,.my-xl-1{margin-bottom:.25rem!important}.ml-xl-1,.mx-xl-1{margin-left:.25rem!important}.m-xl-2{margin:.5rem!important}.mt-xl-2,.my-xl-2{margin-top:.5rem!important}.mr-xl-2,.mx-xl-2{margin-right:.5rem!important}.mb-xl-2,.my-xl-2{margin-bottom:.5rem!important}.ml-xl-2,.mx-xl-2{margin-left:.5rem!important}.m-xl-3{margin:1rem!important}.mt-xl-3,.my-xl-3{margin-top:1rem!important}.mr-xl-3,.mx-xl-3{margin-right:1rem!important}.mb-xl-3,.my-xl-3{margin-bottom:1rem!important}.ml-xl-3,.mx-xl-3{margin-left:1rem!important}.m-xl-4{margin:1.5rem!important}.mt-xl-4,.my-xl-4{margin-top:1.5rem!important}.mr-xl-4,.mx-xl-4{margin-right:1.5rem!important}.mb-xl-4,.my-xl-4{margin-bottom:1.5rem!important}.ml-xl-4,.mx-xl-4{margin-left:1.5rem!important}.m-xl-5{margin:3rem!important}.mt-xl-5,.my-xl-5{margin-top:3rem!important}.mr-xl-5,.mx-xl-5{margin-right:3rem!important}.mb-xl-5,.my-xl-5{margin-bottom:3rem!important}.ml-xl-5,.mx-xl-5{margin-left:3rem!important}.p-xl-0{padding:0!important}.pt-xl-0,.py-xl-0{padding-top:0!important}.pr-xl-0,.px-xl-0{padding-right:0!important}.pb-xl-0,.py-xl-0{padding-bottom:0!important}.pl-xl-0,.px-xl-0{padding-left:0!important}.p-xl-1{padding:.25rem!important}.pt-xl-1,.py-xl-1{padding-top:.25rem!important}.pr-xl-1,.px-xl-1{padding-right:.25rem!important}.pb-xl-1,.py-xl-1{padding-bottom:.25rem!important}.pl-xl-1,.px-xl-1{padding-left:.25rem!important}.p-xl-2{padding:.5rem!important}.pt-xl-2,.py-xl-2{padding-top:.5rem!important}.pr-xl-2,.px-xl-2{padding-right:.5rem!important}.pb-xl-2,.py-xl-2{padding-bottom:.5rem!important}.pl-xl-2,.px-xl-2{padding-left:.5rem!important}.p-xl-3{padding:1rem!important}.pt-xl-3,.py-xl-3{padding-top:1rem!important}.pr-xl-3,.px-xl-3{padding-right:1rem!important}.pb-xl-3,.py-xl-3{padding-bottom:1rem!important}.pl-xl-3,.px-xl-3{padding-left:1rem!important}.p-xl-4{padding:1.5rem!important}.pt-xl-4,.py-xl-4{padding-top:1.5rem!important}.pr-xl-4,.px-xl-4{padding-right:1.5rem!important}.pb-xl-4,.py-xl-4{padding-bottom:1.5rem!important}.pl-xl-4,.px-xl-4{padding-left:1.5rem!important}.p-xl-5{padding:3rem!important}.pt-xl-5,.py-xl-5{padding-top:3rem!important}.pr-xl-5,.px-xl-5{padding-right:3rem!important}.pb-xl-5,.py-xl-5{padding-bottom:3rem!important}.pl-xl-5,.px-xl-5{padding-left:3rem!important}.m-xl-n1{margin:-.25rem!important}.mt-xl-n1,.my-xl-n1{margin-top:-.25rem!important}.mr-xl-n1,.mx-xl-n1{margin-right:-.25rem!important}.mb-xl-n1,.my-xl-n1{margin-bottom:-.25rem!important}.ml-xl-n1,.mx-xl-n1{margin-left:-.25rem!important}.m-xl-n2{margin:-.5rem!important}.mt-xl-n2,.my-xl-n2{margin-top:-.5rem!important}.mr-xl-n2,.mx-xl-n2{margin-right:-.5rem!important}.mb-xl-n2,.my-xl-n2{margin-bottom:-.5rem!important}.ml-xl-n2,.mx-xl-n2{margin-left:-.5rem!important}.m-xl-n3{margin:-1rem!important}.mt-xl-n3,.my-xl-n3{margin-top:-1rem!important}.mr-xl-n3,.mx-xl-n3{margin-right:-1rem!important}.mb-xl-n3,.my-xl-n3{margin-bottom:-1rem!important}.ml-xl-n3,.mx-xl-n3{margin-left:-1rem!important}.m-xl-n4{margin:-1.5rem!important}.mt-xl-n4,.my-xl-n4{margin-top:-1.5rem!important}.mr-xl-n4,.mx-xl-n4{margin-right:-1.5rem!important}.mb-xl-n4,.my-xl-n4{margin-bottom:-1.5rem!important}.ml-xl-n4,.mx-xl-n4{margin-left:-1.5rem!important}.m-xl-n5{margin:-3rem!important}.mt-xl-n5,.my-xl-n5{margin-top:-3rem!important}.mr-xl-n5,.mx-xl-n5{margin-right:-3rem!important}.mb-xl-n5,.my-xl-n5{margin-bottom:-3rem!important}.ml-xl-n5,.mx-xl-n5{margin-left:-3rem!important}.m-xl-auto{margin:auto!important}.mt-xl-auto,.my-xl-auto{margin-top:auto!important}.mr-xl-auto,.mx-xl-auto{margin-right:auto!important}.mb-xl-auto,.my-xl-auto{margin-bottom:auto!important}.ml-xl-auto,.mx-xl-auto{margin-left:auto!important}}.stretched-link::after{position:absolute;top:0;right:0;bottom:0;left:0;z-index:1;pointer-events:auto;content:\"\";background-color:rgba(0,0,0,0)}.text-monospace{font-family:SFMono-Regular,Menlo,Monaco,Consolas,\"Liberation Mono\",\"Courier New\",monospace!important}.text-justify{text-align:justify!important}.text-wrap{white-space:normal!important}.text-nowrap{white-space:nowrap!important}.text-truncate{overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.text-left{text-align:left!important}.text-right{text-align:right!important}.text-center{text-align:center!important}@media (min-width:576px){.text-sm-left{text-align:left!important}.text-sm-right{text-align:right!important}.text-sm-center{text-align:center!important}}@media (min-width:768px){.text-md-left{text-align:left!important}.text-md-right{text-align:right!important}.text-md-center{text-align:center!important}}@media (min-width:992px){.text-lg-left{text-align:left!important}.text-lg-right{text-align:right!important}.text-lg-center{text-align:center!important}}@media (min-width:1200px){.text-xl-left{text-align:left!important}.text-xl-right{text-align:right!important}.text-xl-center{text-align:center!important}}.text-lowercase{text-transform:lowercase!important}.text-uppercase{text-transform:uppercase!important}.text-capitalize{text-transform:capitalize!important}.font-weight-light{font-weight:300!important}.font-weight-lighter{font-weight:lighter!important}.font-weight-normal{font-weight:400!important}.font-weight-bold{font-weight:700!important}.font-weight-bolder{font-weight:bolder!important}.font-italic{font-style:italic!important}.text-white{color:#fff!important}.text-primary{color:#007bff!important}a.text-primary:focus,a.text-primary:hover{color:#0056b3!important}.text-secondary{color:#6c757d!important}a.text-secondary:focus,a.text-secondary:hover{color:#494f54!important}.text-success{color:#28a745!important}a.text-success:focus,a.text-success:hover{color:#19692c!important}.text-info{color:#17a2b8!important}a.text-info:focus,a.text-info:hover{color:#0f6674!important}.text-warning{color:#ffc107!important}a.text-warning:focus,a.text-warning:hover{color:#ba8b00!important}.text-danger{color:#dc3545!important}a.text-danger:focus,a.text-danger:hover{color:#a71d2a!important}.text-light{color:#f8f9fa!important}a.text-light:focus,a.text-light:hover{color:#cbd3da!important}.text-dark{color:#343a40!important}a.text-dark:focus,a.text-dark:hover{color:#121416!important}.text-body{color:#212529!important}.text-muted{color:#6c757d!important}.text-black-50{color:rgba(0,0,0,.5)!important}.text-white-50{color:rgba(255,255,255,.5)!important}.text-hide{font:0/0 a;color:transparent;text-shadow:none;background-color:transparent;border:0}.text-decoration-none{text-decoration:none!important}.text-break{word-break:break-word!important;word-wrap:break-word!important}.text-reset{color:inherit!important}.visible{visibility:visible!important}.invisible{visibility:hidden!important}@media print{*,::after,::before{text-shadow:none!important;box-shadow:none!important}a:not(.btn){text-decoration:underline}abbr[title]::after{content:\" (\" attr(title) \")\"}pre{white-space:pre-wrap!important}blockquote,pre{border:1px solid #adb5bd;page-break-inside:avoid}thead{display:table-header-group}img,tr{page-break-inside:avoid}h2,h3,p{orphans:3;widows:3}h2,h3{page-break-after:avoid}@page{size:a3}body{min-width:992px!important}.container{min-width:992px!important}.navbar{display:none}.badge{border:1px solid #000}.table{border-collapse:collapse!important}.table td,.table th{background-color:#fff!important}.table-bordered td,.table-bordered th{border:1px solid #dee2e6!important}.table-dark{color:inherit}.table-dark tbody+tbody,.table-dark td,.table-dark th,.table-dark thead th{border-color:#dee2e6}.table .thead-dark th{color:inherit;border-color:#dee2e6}}</style> <style> .ui-helper-hidden{display:none}.ui-helper-hidden-accessible{border:0;clip:rect(0 0 0 0);height:1px;margin:-1px;overflow:hidden;padding:0;position:absolute;width:1px}.ui-helper-reset{margin:0;padding:0;border:0;outline:0;line-height:1.3;text-decoration:none;font-size:100%;list-style:none}.ui-helper-clearfix:before,.ui-helper-clearfix:after{content:\"\";display:table;border-collapse:collapse}.ui-helper-clearfix:after{clear:both}.ui-helper-zfix{width:100%;height:100%;top:0;left:0;position:absolute;opacity:0;filter:Alpha(Opacity=0)}.ui-front{z-index:100}.ui-state-disabled{cursor:default!important;pointer-events:none}.ui-icon{display:inline-block;vertical-align:middle;margin-top:-.25em;position:relative;text-indent:-99999px;overflow:hidden;background-repeat:no-repeat}.ui-widget-icon-block{left:50%;margin-left:-8px;display:block}.ui-widget-overlay{position:fixed;top:0;left:0;width:100%;height:100%}.ui-slider{position:relative;text-align:left}.ui-slider .ui-slider-handle{position:absolute;z-index:2;width:1.2em;height:1.2em;cursor:default;-ms-touch-action:none;touch-action:none}.ui-slider .ui-slider-range{position:absolute;z-index:1;font-size:.7em;display:block;border:0;background-position:0 0}.ui-slider.ui-state-disabled .ui-slider-handle,.ui-slider.ui-state-disabled .ui-slider-range{filter:inherit}.ui-slider-horizontal{height:.8em}.ui-slider-horizontal .ui-slider-handle{top:-.3em;margin-left:-.6em}.ui-slider-horizontal .ui-slider-range{top:0;height:100%}.ui-slider-horizontal .ui-slider-range-min{left:0}.ui-slider-horizontal .ui-slider-range-max{right:0}.ui-slider-vertical{width:.8em;height:100px}.ui-slider-vertical .ui-slider-handle{left:-.3em;margin-left:0;margin-bottom:-.6em}.ui-slider-vertical .ui-slider-range{left:0;width:100%}.ui-slider-vertical .ui-slider-range-min{bottom:0}.ui-slider-vertical .ui-slider-range-max{top:0}.ui-widget{font-family:Arial,Helvetica,sans-serif;font-size:1em}.ui-widget .ui-widget{font-size:1em}.ui-widget input,.ui-widget select,.ui-widget textarea,.ui-widget button{font-family:Arial,Helvetica,sans-serif;font-size:1em}.ui-widget.ui-widget-content{border:1px solid #c5c5c5}.ui-widget-content{border:1px solid #ddd;background:#fff;color:#333}.ui-widget-content a{color:#333}.ui-widget-header{border:1px solid #ddd;background:#e9e9e9;color:#333;font-weight:bold}.ui-widget-header a{color:#333}.ui-state-default,.ui-widget-content .ui-state-default,.ui-widget-header .ui-state-default,.ui-button,html .ui-button.ui-state-disabled:hover,html .ui-button.ui-state-disabled:active{border:1px solid #c5c5c5;background:#f6f6f6;font-weight:normal;color:#454545}.ui-state-default a,.ui-state-default a:link,.ui-state-default a:visited,a.ui-button,a:link.ui-button,a:visited.ui-button,.ui-button{color:#454545;text-decoration:none}.ui-state-hover,.ui-widget-content .ui-state-hover,.ui-widget-header .ui-state-hover,.ui-state-focus,.ui-widget-content .ui-state-focus,.ui-widget-header .ui-state-focus,.ui-button:hover,.ui-button:focus{border:1px solid #ccc;background:#ededed;font-weight:normal;color:#2b2b2b}.ui-state-hover a,.ui-state-hover a:hover,.ui-state-hover a:link,.ui-state-hover a:visited,.ui-state-focus a,.ui-state-focus a:hover,.ui-state-focus a:link,.ui-state-focus a:visited,a.ui-button:hover,a.ui-button:focus{color:#2b2b2b;text-decoration:none}.ui-visual-focus{box-shadow:0 0 3px 1px rgb(94,158,214)}.ui-state-active,.ui-widget-content .ui-state-active,.ui-widget-header .ui-state-active,a.ui-button:active,.ui-button:active,.ui-button.ui-state-active:hover{border:1px solid #003eff;background:#007fff;font-weight:normal;color:#fff}.ui-icon-background,.ui-state-active .ui-icon-background{border:#003eff;background-color:#fff}.ui-state-active a,.ui-state-active a:link,.ui-state-active a:visited{color:#fff;text-decoration:none}.ui-state-highlight,.ui-widget-content .ui-state-highlight,.ui-widget-header .ui-state-highlight{border:1px solid #dad55e;background:#fffa90;color:#777620}.ui-state-checked{border:1px solid #dad55e;background:#fffa90}.ui-state-highlight a,.ui-widget-content .ui-state-highlight a,.ui-widget-header .ui-state-highlight a{color:#777620}.ui-state-error,.ui-widget-content .ui-state-error,.ui-widget-header .ui-state-error{border:1px solid #f1a899;background:#fddfdf;color:#5f3f3f}.ui-state-error a,.ui-widget-content .ui-state-error a,.ui-widget-header .ui-state-error a{color:#5f3f3f}.ui-state-error-text,.ui-widget-content .ui-state-error-text,.ui-widget-header .ui-state-error-text{color:#5f3f3f}.ui-priority-primary,.ui-widget-content .ui-priority-primary,.ui-widget-header .ui-priority-primary{font-weight:bold}.ui-priority-secondary,.ui-widget-content .ui-priority-secondary,.ui-widget-header .ui-priority-secondary{opacity:.7;filter:Alpha(Opacity=70);font-weight:normal}.ui-state-disabled,.ui-widget-content .ui-state-disabled,.ui-widget-header .ui-state-disabled{opacity:.35;filter:Alpha(Opacity=35);background-image:none}.ui-state-disabled .ui-icon{filter:Alpha(Opacity=35)}.ui-icon{width:16px;height:16px}.ui-icon,.ui-widget-content .ui-icon{background-image:url('data:image/png;base64,')}.ui-widget-header .ui-icon{background-image:url('data:image/png;base64,')}.ui-button .ui-icon{background-image:url('data:image/png;base64,')}.ui-state-hover .ui-icon,.ui-state-focus .ui-icon,.ui-button:hover .ui-icon,.ui-button:focus .ui-icon,.ui-state-default .ui-icon{background-image:url('data:image/png;base64,')}.ui-state-active .ui-icon,.ui-button:active .ui-icon{background-image:url('data:image/png;base64,')}.ui-state-highlight .ui-icon,.ui-button .ui-state-highlight.ui-icon{background-image:url('data:image/png;base64,')}.ui-state-error .ui-icon,.ui-state-error-text .ui-icon{background-image:url('data:image/png;base64,')}.ui-icon-blank{background-position:16px 16px}.ui-icon-caret-1-n{background-position:0 0}.ui-icon-caret-1-ne{background-position:-16px 0}.ui-icon-caret-1-e{background-position:-32px 0}.ui-icon-caret-1-se{background-position:-48px 0}.ui-icon-caret-1-s{background-position:-65px 0}.ui-icon-caret-1-sw{background-position:-80px 0}.ui-icon-caret-1-w{background-position:-96px 0}.ui-icon-caret-1-nw{background-position:-112px 0}.ui-icon-caret-2-n-s{background-position:-128px 0}.ui-icon-caret-2-e-w{background-position:-144px 0}.ui-icon-triangle-1-n{background-position:0 -16px}.ui-icon-triangle-1-ne{background-position:-16px -16px}.ui-icon-triangle-1-e{background-position:-32px -16px}.ui-icon-triangle-1-se{background-position:-48px -16px}.ui-icon-triangle-1-s{background-position:-65px -16px}.ui-icon-triangle-1-sw{background-position:-80px -16px}.ui-icon-triangle-1-w{background-position:-96px -16px}.ui-icon-triangle-1-nw{background-position:-112px -16px}.ui-icon-triangle-2-n-s{background-position:-128px -16px}.ui-icon-triangle-2-e-w{background-position:-144px -16px}.ui-icon-arrow-1-n{background-position:0 -32px}.ui-icon-arrow-1-ne{background-position:-16px -32px}.ui-icon-arrow-1-e{background-position:-32px -32px}.ui-icon-arrow-1-se{background-position:-48px -32px}.ui-icon-arrow-1-s{background-position:-65px -32px}.ui-icon-arrow-1-sw{background-position:-80px -32px}.ui-icon-arrow-1-w{background-position:-96px -32px}.ui-icon-arrow-1-nw{background-position:-112px -32px}.ui-icon-arrow-2-n-s{background-position:-128px -32px}.ui-icon-arrow-2-ne-sw{background-position:-144px -32px}.ui-icon-arrow-2-e-w{background-position:-160px -32px}.ui-icon-arrow-2-se-nw{background-position:-176px -32px}.ui-icon-arrowstop-1-n{background-position:-192px -32px}.ui-icon-arrowstop-1-e{background-position:-208px -32px}.ui-icon-arrowstop-1-s{background-position:-224px -32px}.ui-icon-arrowstop-1-w{background-position:-240px -32px}.ui-icon-arrowthick-1-n{background-position:1px -48px}.ui-icon-arrowthick-1-ne{background-position:-16px -48px}.ui-icon-arrowthick-1-e{background-position:-32px -48px}.ui-icon-arrowthick-1-se{background-position:-48px -48px}.ui-icon-arrowthick-1-s{background-position:-64px -48px}.ui-icon-arrowthick-1-sw{background-position:-80px -48px}.ui-icon-arrowthick-1-w{background-position:-96px -48px}.ui-icon-arrowthick-1-nw{background-position:-112px -48px}.ui-icon-arrowthick-2-n-s{background-position:-128px -48px}.ui-icon-arrowthick-2-ne-sw{background-position:-144px -48px}.ui-icon-arrowthick-2-e-w{background-position:-160px -48px}.ui-icon-arrowthick-2-se-nw{background-position:-176px -48px}.ui-icon-arrowthickstop-1-n{background-position:-192px -48px}.ui-icon-arrowthickstop-1-e{background-position:-208px -48px}.ui-icon-arrowthickstop-1-s{background-position:-224px -48px}.ui-icon-arrowthickstop-1-w{background-position:-240px -48px}.ui-icon-arrowreturnthick-1-w{background-position:0 -64px}.ui-icon-arrowreturnthick-1-n{background-position:-16px -64px}.ui-icon-arrowreturnthick-1-e{background-position:-32px -64px}.ui-icon-arrowreturnthick-1-s{background-position:-48px -64px}.ui-icon-arrowreturn-1-w{background-position:-64px -64px}.ui-icon-arrowreturn-1-n{background-position:-80px -64px}.ui-icon-arrowreturn-1-e{background-position:-96px -64px}.ui-icon-arrowreturn-1-s{background-position:-112px -64px}.ui-icon-arrowrefresh-1-w{background-position:-128px -64px}.ui-icon-arrowrefresh-1-n{background-position:-144px -64px}.ui-icon-arrowrefresh-1-e{background-position:-160px -64px}.ui-icon-arrowrefresh-1-s{background-position:-176px -64px}.ui-icon-arrow-4{background-position:0 -80px}.ui-icon-arrow-4-diag{background-position:-16px -80px}.ui-icon-extlink{background-position:-32px -80px}.ui-icon-newwin{background-position:-48px -80px}.ui-icon-refresh{background-position:-64px -80px}.ui-icon-shuffle{background-position:-80px -80px}.ui-icon-transfer-e-w{background-position:-96px -80px}.ui-icon-transferthick-e-w{background-position:-112px -80px}.ui-icon-folder-collapsed{background-position:0 -96px}.ui-icon-folder-open{background-position:-16px -96px}.ui-icon-document{background-position:-32px -96px}.ui-icon-document-b{background-position:-48px -96px}.ui-icon-note{background-position:-64px -96px}.ui-icon-mail-closed{background-position:-80px -96px}.ui-icon-mail-open{background-position:-96px -96px}.ui-icon-suitcase{background-position:-112px -96px}.ui-icon-comment{background-position:-128px -96px}.ui-icon-person{background-position:-144px -96px}.ui-icon-print{background-position:-160px -96px}.ui-icon-trash{background-position:-176px -96px}.ui-icon-locked{background-position:-192px -96px}.ui-icon-unlocked{background-position:-208px -96px}.ui-icon-bookmark{background-position:-224px -96px}.ui-icon-tag{background-position:-240px -96px}.ui-icon-home{background-position:0 -112px}.ui-icon-flag{background-position:-16px -112px}.ui-icon-calendar{background-position:-32px -112px}.ui-icon-cart{background-position:-48px -112px}.ui-icon-pencil{background-position:-64px -112px}.ui-icon-clock{background-position:-80px -112px}.ui-icon-disk{background-position:-96px -112px}.ui-icon-calculator{background-position:-112px -112px}.ui-icon-zoomin{background-position:-128px -112px}.ui-icon-zoomout{background-position:-144px -112px}.ui-icon-search{background-position:-160px -112px}.ui-icon-wrench{background-position:-176px -112px}.ui-icon-gear{background-position:-192px -112px}.ui-icon-heart{background-position:-208px -112px}.ui-icon-star{background-position:-224px -112px}.ui-icon-link{background-position:-240px -112px}.ui-icon-cancel{background-position:0 -128px}.ui-icon-plus{background-position:-16px -128px}.ui-icon-plusthick{background-position:-32px -128px}.ui-icon-minus{background-position:-48px -128px}.ui-icon-minusthick{background-position:-64px -128px}.ui-icon-close{background-position:-80px -128px}.ui-icon-closethick{background-position:-96px -128px}.ui-icon-key{background-position:-112px -128px}.ui-icon-lightbulb{background-position:-128px -128px}.ui-icon-scissors{background-position:-144px -128px}.ui-icon-clipboard{background-position:-160px -128px}.ui-icon-copy{background-position:-176px -128px}.ui-icon-contact{background-position:-192px -128px}.ui-icon-image{background-position:-208px -128px}.ui-icon-video{background-position:-224px -128px}.ui-icon-script{background-position:-240px -128px}.ui-icon-alert{background-position:0 -144px}.ui-icon-info{background-position:-16px -144px}.ui-icon-notice{background-position:-32px -144px}.ui-icon-help{background-position:-48px -144px}.ui-icon-check{background-position:-64px -144px}.ui-icon-bullet{background-position:-80px -144px}.ui-icon-radio-on{background-position:-96px -144px}.ui-icon-radio-off{background-position:-112px -144px}.ui-icon-pin-w{background-position:-128px -144px}.ui-icon-pin-s{background-position:-144px -144px}.ui-icon-play{background-position:0 -160px}.ui-icon-pause{background-position:-16px -160px}.ui-icon-seek-next{background-position:-32px -160px}.ui-icon-seek-prev{background-position:-48px -160px}.ui-icon-seek-end{background-position:-64px -160px}.ui-icon-seek-start{background-position:-80px -160px}.ui-icon-seek-first{background-position:-80px -160px}.ui-icon-stop{background-position:-96px -160px}.ui-icon-eject{background-position:-112px -160px}.ui-icon-volume-off{background-position:-128px -160px}.ui-icon-volume-on{background-position:-144px -160px}.ui-icon-power{background-position:0 -176px}.ui-icon-signal-diag{background-position:-16px -176px}.ui-icon-signal{background-position:-32px -176px}.ui-icon-battery-0{background-position:-48px -176px}.ui-icon-battery-1{background-position:-64px -176px}.ui-icon-battery-2{background-position:-80px -176px}.ui-icon-battery-3{background-position:-96px -176px}.ui-icon-circle-plus{background-position:0 -192px}.ui-icon-circle-minus{background-position:-16px -192px}.ui-icon-circle-close{background-position:-32px -192px}.ui-icon-circle-triangle-e{background-position:-48px -192px}.ui-icon-circle-triangle-s{background-position:-64px -192px}.ui-icon-circle-triangle-w{background-position:-80px -192px}.ui-icon-circle-triangle-n{background-position:-96px -192px}.ui-icon-circle-arrow-e{background-position:-112px -192px}.ui-icon-circle-arrow-s{background-position:-128px -192px}.ui-icon-circle-arrow-w{background-position:-144px -192px}.ui-icon-circle-arrow-n{background-position:-160px -192px}.ui-icon-circle-zoomin{background-position:-176px -192px}.ui-icon-circle-zoomout{background-position:-192px -192px}.ui-icon-circle-check{background-position:-208px -192px}.ui-icon-circlesmall-plus{background-position:0 -208px}.ui-icon-circlesmall-minus{background-position:-16px -208px}.ui-icon-circlesmall-close{background-position:-32px -208px}.ui-icon-squaresmall-plus{background-position:-48px -208px}.ui-icon-squaresmall-minus{background-position:-64px -208px}.ui-icon-squaresmall-close{background-position:-80px -208px}.ui-icon-grip-dotted-vertical{background-position:0 -224px}.ui-icon-grip-dotted-horizontal{background-position:-16px -224px}.ui-icon-grip-solid-vertical{background-position:-32px -224px}.ui-icon-grip-solid-horizontal{background-position:-48px -224px}.ui-icon-gripsmall-diagonal-se{background-position:-64px -224px}.ui-icon-grip-diagonal-se{background-position:-80px -224px}.ui-corner-all,.ui-corner-top,.ui-corner-left,.ui-corner-tl{border-top-left-radius:3px}.ui-corner-all,.ui-corner-top,.ui-corner-right,.ui-corner-tr{border-top-right-radius:3px}.ui-corner-all,.ui-corner-bottom,.ui-corner-left,.ui-corner-bl{border-bottom-left-radius:3px}.ui-corner-all,.ui-corner-bottom,.ui-corner-right,.ui-corner-br{border-bottom-right-radius:3px}.ui-widget-overlay{background:#aaa;opacity:.3;filter:Alpha(Opacity=30)}.ui-widget-shadow{-webkit-box-shadow:0 0 5px #666;box-shadow:0 0 5px #666}</style> <style>html{ width:100%;min-width:775px;height:100%;overflow:hidden;padding:0;margin:0;background:black; }body{ width:100%;min-width:775px;height:100%;padding:0;margin:0;overflow:hidden; background:black; }p{ margin:15px 0 15px 0;}#basicUI{ position:absolute;top:53px;font-size:14px;color:#34495e;text-align:right;right:0px;width:400px;padding:20px 20px;}#showAdvancedOptions{ color:#ffffff;font-weight:900;}#hideAdvancedOptions{ font-size:14px;color:#34495e;font-weight:900;text-align:right;width:100%;display:inline-block;}#controlsBottom{ width:100%; max-width:850px;margin:auto;position:absolute;bottom:0;right:0;left:0;height:110px;font-weight:900;}#controlsBottom>div{ display:inline-block;}#bottomSliderContainer{ text-align:center;position:absolute;right:auto;left:auto;margin-top:20px;}#bottomSliderContainer>span{ font-size:14px;}#creasePercentBottom{ width:100%;margin-top:14px;margin-bottom:5px;}#creasePercentBottom>.flat-slider{ width:100%;margin:0;background:#e8e8e8;}.sliderEndPt{ text-align:center;width:100px;position:absolute;top:-30px;color:#34495e;line-height:18px;}#flatIndicator{ left:-50px;top:-15px;}.sliderEndPt>img{ width:100%;}#foldedIndicator{ right:-50px;top:-15px;}.sliderEndPt>.fui-triangle-down{ display:block;color:#34495e;margin-top:0px;}.sliderEndPtLabel{ color:#34495e;display:block; }#viewToggle{ display:none !important;left:30px;}#controlsToggle{ display:none !important;right:140px;}.preserveAspect{ width:auto;}.bigToggle{ height:90px;width:140px;text-align:center;position:absolute;font-size:14px; }.bigToggle>div{ border:2px solid #34495e;background:white;height:70px;overflow:hidden;border-radius:10px;margin-bottom:5px;}.bigToggle>div div{ padding:5px;width:50%;height:100%;display:inline-block;text-align:center;font-size:12px;color:#34495e;}.bigToggle div.active{ background:#e8e8e8;}.bigToggle .separator{ width:2px;height:68px;position:absolute;background:#34495e;padding:0;margin:0;}.bigToggle img{ display:inline-block;height:40px;}.bigToggle span{ display:block;width:100%;}#resetBottom{ display:none !important;position:absolute;right:30px;top:13px;color:#34495e;font-weight:900;}#controls{ position:absolute;top:53px;bottom:0;right:-430px;width:430px;padding:20px 20px;overflow:auto;background:rgba(10,10,10,0.1);}#controls>a{ }#controlsLeft{ position:absolute;bottom:0;left:-420px;width:420px;top:53px;padding:20px 20px;max-height:100%;overflow:auto;}#controlsLeft .radio{ width:240px;}.sliderInput{ float:right;display:inline-block;margin-bottom:15px;min-width:100px;}.sliderContainer{ display:block;margin-bottom:15px;}.indent{ padding-left:20px;}.doubleIndent{ padding-left:40px;}#gpuMathCanvas{ display:none;}a, a:hover, a:visited, a:focus{ color:#ec008b;}a.btn:visited, a.btn:focus{ color:white;}button{ border:0;outline:none;}.editable{ color:#34495e;height:42px;display:inline-block;line-height:42px;width:70px;text-overflow:ellipsis;overflow:hidden;white-space:nowrap }.editable:hover{ color:#34495e;cursor:text;}.editableInput{ display:none;outline:grey;padding:5px 7px;height:42px;line-height:42px;}.editableInput:focus{ outline:grey;border:none;}input.form-control{ width:90px;display:inline-block;}.radioSlider{ display:inline-block;float:right;}.form-control, .select2-search input[type=text]{ height:35px;}.floatRight{ float:right;}#threeContainer{ width:100%;height:100%;padding:0;position:absolute;top:0px;left:0px;} #threeContainer canvas, canvas{ background:transparent !important;background-color:transparent !important;} canvas[data-engine=\"three.js\"]{ background:none !important;opacity:1;}.slider.slider-horizontal{ width:200px;margin:0;padding:20px;top:10px;}.slider.slider-vertical{ height:200px;margin:0;padding:20px;}.flat-slider.ui-corner-all, .flat-slider .ui-corner-all{ border-radius:0;}.flat-slider.ui-slider{ border:0;background:#ffffff;border-radius:7px;}.flat-slider.ui-slider-horizontal{ height:6px;}.flat-slider.ui-slider-vertical{ width:6px;}.flat-slider .ui-slider-handle{ width:20px;height:20px;background:#666;border-radius:50%;border:none;cursor:pointer;}.flat-slider.ui-slider-horizontal .ui-slider-handle{ top:50%;margin-top:-10px;opacity:0.8;}.flat-slider.ui-slider-vertical .ui-slider-handle{ left:50%;margin-left:-10px;opacity:0.8;}.flat-slider .ui-slider-handle:hover{ opacity:0.7;}.flat-slider .ui-slider-handle:focus{ outline:none;}.flat-slider{ vertical-align:middle;display:inline-block;width:130px;position:relative;margin:10px 10px 10px 10px; }.modal-content{ border-radius:0;}.modal-body{ padding:20px 35px;}span.modal-close{ display:none;}.titleSpan{ display:inline-block;width:100%;margin-top:15px;}.form-control:focus{ border-color:#666;}.checkbox input.custom-checkbox[type=\"checkbox\"]:checked + .icons .icon-checked, .radio input.custom-checkbox[type=\"checkbox\"]:checked + .icons .icon-checked, .checkbox input.custom-radio[type=\"radio\"]:checked + .icons .icon-checked, .radio input.custom-radio[type=\"radio\"]:checked + .icons .icon-checked{ color:#666;}.checkbox .icon-checked, .radio .icon-checked, .checkbox .icon-unchecked, .radio .icon-unchecked{ color:#bdc3c7;}.radio .icon-checked{ transition-duration:0s;}.radio .icon-unchecked{ transition-duration:0s;}.sliderInput>.flat-slider{ width:90px;}.label-slider{ font-size:15px;}.extraSpace{ display:inline-block;width:100%;height:15px;}.flipped{ direction:rtl;}.flipped>div{ direction:ltr;}.paddingBottom{ margin-bottom:20px;}#svgViewer{ width:100%;height:100%;position:absolute;z-index:3;top:0px;right:0;background:white;display:none;padding-top:56px;}svg{ width:100%;height:100%;}.hexVal{ border-width:4px;}#warningMessage{ padding:30px 0;text-align:center;margin:0 18px;}.about{ margin-right:10px;color:#34495e!important;font-size:18px;line-height:18px;}#controls .about, #basicUI .about{ position:absolute;line-height:1.7;margin-top:2px;right:5px;}#aboutError{ line-height:2.0 }#aboutStiffness{ line-height:28px;}#aboutUserInteraction{ margin-top:10px!important;line-height:21px!important;}#aboutVR{ float:none;margin-left:40px;position:absolute;line-height:1.7;margin-top:2px;}#start, #stepForwardOptions{ display:none;}#stepForwardOptions{ width:100%;}#reset{ margin-left:20px;}#creasePercentNav{ margin-bottom:0;margin-top:12px;color:white;display:none;}.bigLabel{ font-size:16px;margin-top:20px;}.checkbox.bigLabel .icons, .radio .icons{ top:2px;}.smallTxt{ font-size:14px;}input.form-control.bigInput{ width:300px;}.actionButton{ min-width:110px;font-size:16px;}#unitsDropdown{ height:100px;overflow:auto;}.modal img{ width:200px;}a.seeMore{ float:none!important;color:#34495e;}a.seeMore>.fui-triangle-down{ display:inline-block;margin-right:10px;}a.seeMore.closed>.fui-triangle-down{ -ms-transform:rotate(-90deg); -webkit-transform:rotate(-90deg); transform:rotate(-90deg);}.hide{ display:none;}.inlineBlock{ display:inline-block;}.alignRight{ text-align:right;}.fullWidth{ width:100%;}#simulationSettings, #errorInfo, #animationsSettings, #cameraAngle, #edgeVisibility, #virtualReality, #materialSettings{ margin-top:15px;}.modal-body img{ margin-left:auto;margin-right:auto;display:block;}.colorSwatch{ display:inline-block;width:20px;height:10px;margin-right:10px;margin-bottom:2px;}#authorMoreInfo{ display:none;position:absolute;top:0px;left:100px;z-index:5;}#authorMoreInfo>#authorContent{ font-size:14px;background:#f5f5f5;padding:15px 25px;margin-left:20px;color:#34495e;white-space:normal;width:300px;border:2px solid #a8a6ae;}#authorMoreInfo a, #authorMoreInfo a:hover,#authorMoreInfo a:visited,#authorMoreInfo a:focus{ color:#ec008b !important;}#authorMoreInfo:after{ content:'';display:block;position:absolute;top:19px;left:11px;width:20px;height:20px;background:#f5f5f5;border-left:2px solid #a8a6ae;border-bottom:2px solid #a8a6ae;-ms-transform:rotate(45deg); -moz-transform:rotate(45deg);-webkit-transform:rotate(45deg);transform:rotate(45deg);}#helper{ display:none;position:absolute;padding:10px 15px;font-size:14px;background:#f5f5f5;margin-top:20px;opacity:0;top:54px;-webkit-transition:opacity 1s; transition:opacity 1s;left:140px;color:#34495e;white-space:normal;border:2px solid #a8a6ae; }#helper:after{ content:'';display:block;position:absolute;top:-12px;left:105px;width:20px;height:20px;background:#f5f5f5;border-left:2px solid #a8a6ae;border-top:2px solid #a8a6ae;-ms-transform:rotate(45deg); -moz-transform:rotate(45deg);-webkit-transform:rotate(45deg);transform:rotate(45deg);}#screenCaptureModal .modal-content, #animationSetupModal .modal-content{ background:rgba(255,255,255,0.9);}#recordStatus{ position:absolute;bottom:20px;width:350px;left:0;right:0;margin:0 auto;z-index:2;display:none;}#stopRecord{ display:block;margin-left:auto;margin-right:auto;}.animationStep{ margin:7px 0;display:inline-block;padding:5px 15px;background:#fff;}#animationSetupModal p, #animationSetupModal ul, #animationSetupModal div.btns{ text-align:center;padding:0;}.warning{ color:#f1970f;}.red{ color:red!important;}#coverImg{ z-index:5;position:absolute;top:0;left:0;width:100%;height:100%;}object{ width:100%;margin-bottom:10px;}#aboutCorner{ display:none;position:absolute;z-index:6;top:0;right:0;background:rgba(40, 40, 40, 0.7);width:30px;text-align:center;color:white;}#noSupportModal{ text-align:center;}#tipImportSVG{ float:left;display:inline-block;margin-top:8px;margin-left:20px;}#feedbackNotification{ position:absolute;z-index:10;right:130px;top:0;padding:5px 10px 4px;font-size:15px;font-weight:900;background:#ff64bf;display:none;flex-direction:row;align-items:center;}#feedbackNotification>span{ max-width:150px;text-align:center;display:inline-block;line-height:22px;}@media only screen and (max-width:1055px){ #feedbackNotification{ display:none;}}@media only screen and (max-width:890px){ #feedback{ display:none;}} #bottomButtonContainer{ display:flex;gap:20px;margin-left:40px;align-items:center;}#dlButton, #printButton{ color:#b0b0b0;text-decoration:bold;width:5em;text-align:center;font-size:9px;font-weight:500;cursor:pointer;transition:opacity 0.2s ease;border:none;background:none;padding:4px 8px;margin:0;white-space:nowrap;}#dlButton:hover, #printButton:hover{ opacity:0.7;text-decoration:none !important;}#dlButton:focus, #printButton:focus{ outline:none;text-decoration:none !important;}</style> <script>window.nftRenderComplete = false;\n\n        const nftData = JSON.parse(`___NFT_DATA_PLACEHOLDER___`);\n\n        const editMode = false;\n        window.editMode = editMode; \n\n        // public/svgs/SVG\n        const origamiPatterns = [\n            {\n                maxFolding: 95, \n                name: \"airplane.svg\", \n                patternType: \"Airplane\",\n                svgContent: `<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"-103.00553348064423 -102.4 974.0110632658004 1228.8\"><line stroke=\"#000\" opacity=\"1\" x1=\"384\" y1=\"0\" x2=\"0\" y2=\"0\" stroke-width=\"3.4133333333333336\"/><line stroke=\"#000\" opacity=\"1\" x1=\"384\" y1=\"0\" x2=\"768\" y2=\"0\" stroke-width=\"3.4133333333333336\"/><line stroke=\"#000\" opacity=\"1\" x1=\"768\" y1=\"256\" x2=\"768\" y2=\"384\" stroke-width=\"3.4133333333333336\"/><line stroke=\"#000\" opacity=\"1\" x1=\"768\" y1=\"160\" x2=\"768\" y2=\"256\" stroke-width=\"3.4133333333333336\"/><line stroke=\"#000\" opacity=\"1\" x1=\"768\" y1=\"160\" x2=\"768.20849609375\" y2=\"76.08484649658203\" stroke-width=\"3.4133333333333336\"/><line stroke=\"#000\" opacity=\"1\" x1=\"768\" y1=\"384\" x2=\"768.6055297851562\" y2=\"578.7706909179688\" stroke-width=\"3.4133333333333336\"/><line stroke=\"#000\" opacity=\"1\" x1=\"768.20849609375\" y1=\"76.08484649658203\" x2=\"768\" y2=\"0\" stroke-width=\"3.4133333333333336\"/><line stroke=\"#000\" opacity=\"1\" x1=\"768\" y1=\"928\" x2=\"768.6055297851562\" y2=\"578.7706909179688\" stroke-width=\"3.4133333333333336\"/><line stroke=\"#000\" opacity=\"1\" x1=\"768\" y1=\"928\" x2=\"768\" y2=\"1024\" stroke-width=\"3.4133333333333336\"/><line stroke=\"#000\" opacity=\"1\" x1=\"587.2386474609375\" y1=\"1023.8704223632812\" x2=\"768\" y2=\"1024\" stroke-width=\"3.4133333333333336\"/><line stroke=\"#000\" opacity=\"1\" x1=\"384\" y1=\"1024\" x2=\"180.76132202148438\" y2=\"1023.8704223632812\" stroke-width=\"3.4133333333333336\"/><line stroke=\"#000\" opacity=\"1\" x1=\"384\" y1=\"1024\" x2=\"587.2386474609375\" y2=\"1023.8704223632812\" stroke-width=\"3.4133333333333336\"/><line stroke=\"#000\" opacity=\"1\" x1=\"180.76132202148438\" y1=\"1023.8704223632812\" x2=\"0\" y2=\"1024\" stroke-width=\"3.4133333333333336\"/><line stroke=\"#000\" opacity=\"1\" x1=\"0\" y1=\"928\" x2=\"-0.6055334806442261\" y2=\"578.7706909179688\" stroke-width=\"3.4133333333333336\"/><line stroke=\"#000\" opacity=\"1\" x1=\"0\" y1=\"928\" x2=\"0\" y2=\"1024\" stroke-width=\"3.4133333333333336\"/><line stroke=\"#000\" opacity=\"1\" x1=\"0\" y1=\"256\" x2=\"0\" y2=\"384\" stroke-width=\"3.4133333333333336\"/><line stroke=\"#000\" opacity=\"1\" x1=\"0\" y1=\"160\" x2=\"0\" y2=\"256\" stroke-width=\"3.4133333333333336\"/><line stroke=\"#000\" opacity=\"1\" x1=\"0\" y1=\"160\" x2=\"-0.2085195928812027\" y2=\"76.08484649658203\" stroke-width=\"3.4133333333333336\"/><line stroke=\"#000\" opacity=\"1\" x1=\"0\" y1=\"384\" x2=\"-0.6055334806442261\" y2=\"578.7706909179688\" stroke-width=\"3.4133333333333336\"/><line stroke=\"#000\" opacity=\"1\" x1=\"-0.2085195928812027\" y1=\"76.08484649658203\" x2=\"0\" y2=\"0\" stroke-width=\"3.4133333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"384\" y1=\"0\" x2=\"0\" y2=\"160\" stroke-width=\"3.4133333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"384\" y1=\"0\" x2=\"768\" y2=\"160\" stroke-width=\"3.4133333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"384\" y1=\"0\" x2=\"0\" y2=\"256\" stroke-width=\"3.4133333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"384\" y1=\"0\" x2=\"768\" y2=\"256\" stroke-width=\"3.4133333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"0\" y1=\"384\" x2=\"384\" y2=\"0\" stroke-width=\"3.4133333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"768\" y1=\"384\" x2=\"384\" y2=\"0\" stroke-width=\"3.4133333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"384\" y1=\"0\" x2=\"384\" y2=\"1024\" stroke-width=\"3.4133333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"384\" y1=\"0\" x2=\"768\" y2=\"928\" stroke-width=\"3.4133333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"384\" y1=\"0\" x2=\"0\" y2=\"928\" stroke-width=\"3.4133333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"384\" y1=\"0\" x2=\"-0.2085195928812027\" y2=\"76.08484649658203\" stroke-width=\"3.4133333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"384\" y1=\"0\" x2=\"-0.6055334806442261\" y2=\"578.7706909179688\" stroke-width=\"3.4133333333333336\"/><line stroke=\"#00f\" opacity=\"0.5\" x1=\"384\" y1=\"0\" x2=\"180.76132202148438\" y2=\"1023.8704223632812\" stroke-width=\"3.4133333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"384\" y1=\"0\" x2=\"768.20849609375\" y2=\"76.08484649658203\" stroke-width=\"3.4133333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"384\" y1=\"0\" x2=\"768.6055297851562\" y2=\"578.7706909179688\" stroke-width=\"3.4133333333333336\"/><line stroke=\"#00f\" opacity=\"0.5\" x1=\"384\" y1=\"0\" x2=\"587.2386474609375\" y2=\"1023.8704223632812\" stroke-width=\"3.4133333333333336\"/></svg>`\n            },\n            {\n                maxFolding: 97, \n                name: \"traditionalCrane.svg\", \n                patternType: \"Crane\",\n                svgContent: `<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"369.5900909423828 229.02109069824218 706.2798400878906 706.3908325195313\"><line stroke=\"#000\" opacity=\"1\" x1=\"518.68798828125\" y1=\"287.8869934082031\" x2=\"428.4590148925781\" y2=\"288\" stroke-width=\"1.962196756998698\"/><line stroke=\"#000\" opacity=\"1\" x1=\"722.72900390625\" y1=\"288\" x2=\"790.1300048828125\" y2=\"288\" stroke-width=\"1.962196756998698\"/><line stroke=\"#000\" opacity=\"1\" x1=\"722.72900390625\" y1=\"288\" x2=\"518.68798828125\" y2=\"287.8869934082031\" stroke-width=\"1.962196756998698\"/><line stroke=\"#000\" opacity=\"1\" x1=\"790.1300048828125\" y1=\"288\" x2=\"1017.0029907226562\" y2=\"288\" stroke-width=\"1.962196756998698\"/><line stroke=\"#000\" opacity=\"1\" x1=\"1017.0040283203125\" y1=\"515.031982421875\" x2=\"1017.0029907226562\" y2=\"288\" stroke-width=\"1.962196756998698\"/><line stroke=\"#000\" opacity=\"1\" x1=\"1017.0009765625\" y1=\"582.27001953125\" x2=\"1017.0040283203125\" y2=\"515.031982421875\" stroke-width=\"1.962196756998698\"/><line stroke=\"#000\" opacity=\"1\" x1=\"1017.0009765625\" y1=\"582.27001953125\" x2=\"1017.0029907226562\" y2=\"876.5449829101562\" stroke-width=\"1.962196756998698\"/><line stroke=\"#000\" opacity=\"1\" x1=\"722.72900390625\" y1=\"876.5430297851562\" x2=\"655.4910278320312\" y2=\"876.5460205078125\" stroke-width=\"1.962196756998698\"/><line stroke=\"#000\" opacity=\"1\" x1=\"722.72900390625\" y1=\"876.5430297851562\" x2=\"1017.0029907226562\" y2=\"876.5449829101562\" stroke-width=\"1.962196756998698\"/><line stroke=\"#000\" opacity=\"1\" x1=\"655.4910278320312\" y1=\"876.5460205078125\" x2=\"428.4590148925781\" y2=\"876.5440063476562\" stroke-width=\"1.962196756998698\"/><line stroke=\"#000\" opacity=\"1\" x1=\"428.45599365234375\" y1=\"582.27099609375\" x2=\"428.4590148925781\" y2=\"649.6719970703125\" stroke-width=\"1.962196756998698\"/><line stroke=\"#000\" opacity=\"1\" x1=\"428.45599365234375\" y1=\"582.27099609375\" x2=\"428.4630126953125\" y2=\"379.25\" stroke-width=\"1.962196756998698\"/><line stroke=\"#000\" opacity=\"1\" x1=\"428.4590148925781\" y1=\"649.6719970703125\" x2=\"428.4590148925781\" y2=\"876.5440063476562\" stroke-width=\"1.962196756998698\"/><line stroke=\"#000\" opacity=\"1\" x1=\"428.4630126953125\" y1=\"379.25\" x2=\"428.4590148925781\" y2=\"288\" stroke-width=\"1.962196756998698\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"808.9219970703125\" y1=\"668.4619750976562\" x2=\"1017.0029907226562\" y2=\"876.5449829101562\" stroke-width=\"1.962196756998698\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"492.7040100097656\" y1=\"352.2449951171875\" x2=\"636.5369873046875\" y2=\"496.0780029296875\" stroke-width=\"1.962196756998698\"/><line stroke=\"#f00\" opacity=\"0.25\" x1=\"722.7315062710079\" y1=\"582.2720030850569\" x2=\"625.0850219726562\" y2=\"582.2750244140625\" stroke-width=\"1.962196756998698\"/><line stroke=\"#f00\" opacity=\"0.25\" x1=\"722.7315062710079\" y1=\"582.2720030850569\" x2=\"820.3790283203125\" y2=\"582.2730102539062\" stroke-width=\"1.962196756998698\"/><line stroke=\"#f00\" opacity=\"0.25\" x1=\"722.7315062710079\" y1=\"582.2720030850569\" x2=\"722.72900390625\" y2=\"484.6300048828125\" stroke-width=\"1.962196756998698\"/><line stroke=\"#f00\" opacity=\"0.25\" x1=\"722.7315062710079\" y1=\"582.2720030850569\" x2=\"722.7340087890625\" y2=\"679.9199829101562\" stroke-width=\"1.962196756998698\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"895.1110229492188\" y1=\"582.27099609375\" x2=\"1017.0029907226562\" y2=\"876.5449829101562\" stroke-width=\"1.962196756998698\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"864.2529907226562\" y1=\"647.93798828125\" x2=\"820.3790283203125\" y2=\"582.2730102539062\" stroke-width=\"1.962196756998698\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"864.2529907226562\" y1=\"647.93798828125\" x2=\"1017.0029907226562\" y2=\"876.5449829101562\" stroke-width=\"1.962196756998698\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"918.18798828125\" y1=\"526.5609741210938\" x2=\"895.1110229492188\" y2=\"582.27099609375\" stroke-width=\"1.962196756998698\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"938.052978515625\" y1=\"479.6340026855469\" x2=\"918.18798828125\" y2=\"526.5609741210938\" stroke-width=\"1.962196756998698\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"938.052978515625\" y1=\"479.6340026855469\" x2=\"1017.0029907226562\" y2=\"288\" stroke-width=\"1.962196756998698\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"778.6019897460938\" y1=\"386.81500244140625\" x2=\"722.72900390625\" y2=\"409.89300537109375\" stroke-width=\"1.962196756998698\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"825.3709716796875\" y1=\"366.95599365234375\" x2=\"778.6019897460938\" y2=\"386.81500244140625\" stroke-width=\"1.962196756998698\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"825.3709716796875\" y1=\"366.95599365234375\" x2=\"1017.0029907226562\" y2=\"288\" stroke-width=\"1.962196756998698\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"907.4730224609375\" y1=\"499.7699890136719\" x2=\"850.31201171875\" y2=\"537.4769897460938\" stroke-width=\"1.962196756998698\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"907.4730224609375\" y1=\"499.7699890136719\" x2=\"938.052978515625\" y2=\"479.6340026855469\" stroke-width=\"1.962196756998698\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"722.72998046875\" y1=\"754.6519775390625\" x2=\"1017.0029907226562\" y2=\"876.5449829101562\" stroke-width=\"1.962196756998698\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"788.3980102539062\" y1=\"723.7960205078125\" x2=\"722.7340087890625\" y2=\"679.9199829101562\" stroke-width=\"1.962196756998698\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"788.3980102539062\" y1=\"723.7960205078125\" x2=\"1017.0029907226562\" y2=\"876.5449829101562\" stroke-width=\"1.962196756998698\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"667.02001953125\" y1=\"777.72998046875\" x2=\"722.72998046875\" y2=\"754.6519775390625\" stroke-width=\"1.962196756998698\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"620.0919799804688\" y1=\"797.593994140625\" x2=\"667.02001953125\" y2=\"777.72998046875\" stroke-width=\"1.962196756998698\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"620.0919799804688\" y1=\"797.593994140625\" x2=\"428.4590148925781\" y2=\"876.5440063476562\" stroke-width=\"1.962196756998698\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"527.2730102539062\" y1=\"638.1430053710938\" x2=\"550.3469848632812\" y2=\"582.27001953125\" stroke-width=\"1.962196756998698\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"507.4100036621094\" y1=\"684.9169921875\" x2=\"527.2730102539062\" y2=\"638.1430053710938\" stroke-width=\"1.962196756998698\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"507.4100036621094\" y1=\"684.9169921875\" x2=\"428.4590148925781\" y2=\"876.5440063476562\" stroke-width=\"1.962196756998698\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"640.22900390625\" y1=\"767.0159912109375\" x2=\"677.9290161132812\" y2=\"709.85498046875\" stroke-width=\"1.962196756998698\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"640.22900390625\" y1=\"767.0159912109375\" x2=\"620.0919799804688\" y2=\"797.593994140625\" stroke-width=\"1.962196756998698\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"519.2020263671875\" y1=\"325.5920104980469\" x2=\"722.72900390625\" y2=\"409.89300537109375\" stroke-width=\"1.962196756998698\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"519.2020263671875\" y1=\"325.5920104980469\" x2=\"428.4590148925781\" y2=\"288\" stroke-width=\"1.962196756998698\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"657.0609741210938\" y1=\"440.74700927734375\" x2=\"498.7229919433594\" y2=\"335.2149963378906\" stroke-width=\"1.962196756998698\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"657.0609741210938\" y1=\"440.74700927734375\" x2=\"722.72900390625\" y2=\"484.6300048828125\" stroke-width=\"1.962196756998698\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"498.7229919433594\" y1=\"335.2149963378906\" x2=\"428.4590148925781\" y2=\"288\" stroke-width=\"1.962196756998698\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"466.218994140625\" y1=\"378.9389953613281\" x2=\"550.3469848632812\" y2=\"582.27001953125\" stroke-width=\"1.962196756998698\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"466.218994140625\" y1=\"378.9389953613281\" x2=\"428.4590148925781\" y2=\"288\" stroke-width=\"1.962196756998698\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"581.2030029296875\" y1=\"516.6019897460938\" x2=\"475.72698974609375\" y2=\"358.7080078125\" stroke-width=\"1.962196756998698\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"581.2030029296875\" y1=\"516.6019897460938\" x2=\"625.0850219726562\" y2=\"582.2750244140625\" stroke-width=\"1.962196756998698\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"475.72698974609375\" y1=\"358.7080078125\" x2=\"428.4590148925781\" y2=\"288\" stroke-width=\"1.962196756998698\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"805.3930053710938\" y1=\"397.531005859375\" x2=\"767.530029296875\" y2=\"454.6929931640625\" stroke-width=\"1.962196756998698\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"805.3930053710938\" y1=\"397.531005859375\" x2=\"825.3709716796875\" y2=\"366.95599365234375\" stroke-width=\"1.962196756998698\"/><line stroke=\"#f00\" opacity=\"0.75\" x1=\"1017.0009765625\" y1=\"582.27001953125\" x2=\"963.3629760742188\" y2=\"606.8880004882812\" stroke-width=\"1.962196756998698\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"895.1110229492188\" y1=\"582.27099609375\" x2=\"864.2529907226562\" y2=\"647.93798828125\" stroke-width=\"1.962196756998698\"/><line stroke=\"#f00\" opacity=\"0.75\" x1=\"722.72900390625\" y1=\"876.5430297851562\" x2=\"747.3469848632812\" y2=\"822.905029296875\" stroke-width=\"1.962196756998698\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"722.72998046875\" y1=\"754.6519775390625\" x2=\"788.3980102539062\" y2=\"723.7960205078125\" stroke-width=\"1.962196756998698\"/><line stroke=\"#f00\" opacity=\"0.75\" x1=\"722.72900390625\" y1=\"288\" x2=\"698.1119995117188\" y2=\"341.63800048828125\" stroke-width=\"1.962196756998698\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"722.72900390625\" y1=\"409.89300537109375\" x2=\"657.0609741210938\" y2=\"440.74700927734375\" stroke-width=\"1.962196756998698\"/><line stroke=\"#f00\" opacity=\"0.75\" x1=\"428.45599365234375\" y1=\"582.27099609375\" x2=\"482.093994140625\" y2=\"557.6539916992188\" stroke-width=\"1.962196756998698\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"550.3469848632812\" y1=\"582.27001953125\" x2=\"581.2030029296875\" y2=\"516.6019897460938\" stroke-width=\"1.962196756998698\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"537.989990234375\" y1=\"664.9340209960938\" x2=\"595.1500244140625\" y2=\"627.0770263671875\" stroke-width=\"1.962196756998698\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"537.989990234375\" y1=\"664.9340209960938\" x2=\"507.4100036621094\" y2=\"684.9169921875\" stroke-width=\"1.962196756998698\"/><line stroke=\"#f00\" opacity=\"0.25\" x1=\"537.989990234375\" y1=\"664.9340209960938\" x2=\"640.22900390625\" y2=\"767.0159912109375\" stroke-width=\"1.962196756998698\"/><line stroke=\"#f00\" opacity=\"0.25\" x1=\"667.02001953125\" y1=\"777.72998046875\" x2=\"655.4910278320312\" y2=\"804.3629760742188\" stroke-width=\"1.962196756998698\"/><line stroke=\"#f00\" opacity=\"0.25\" x1=\"527.2730102539062\" y1=\"638.1430053710938\" x2=\"500.6419982910156\" y2=\"649.6719970703125\" stroke-width=\"1.962196756998698\"/><line stroke=\"#f00\" opacity=\"0.25\" x1=\"805.3930053710938\" y1=\"397.531005859375\" x2=\"907.4730224609375\" y2=\"499.7699890136719\" stroke-width=\"1.962196756998698\"/><line stroke=\"#f00\" opacity=\"0.25\" x1=\"918.18798828125\" y1=\"526.5609741210938\" x2=\"944.8209838867188\" y2=\"515.031982421875\" stroke-width=\"1.962196756998698\"/><line stroke=\"#f00\" opacity=\"0.25\" x1=\"778.6019897460938\" y1=\"386.81500244140625\" x2=\"790.1300048828125\" y2=\"360.1830139160156\" stroke-width=\"1.962196756998698\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"511.17498779296875\" y1=\"304.2550048828125\" x2=\"519.2020263671875\" y2=\"325.5920104980469\" stroke-width=\"1.962196756998698\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"498.7229919433594\" y1=\"335.2149963378906\" x2=\"492.7040100097656\" y2=\"352.2449951171875\" stroke-width=\"1.962196756998698\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"475.72698974609375\" y1=\"358.7080078125\" x2=\"492.7040100097656\" y2=\"352.2449951171875\" stroke-width=\"1.962196756998698\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"466.218994140625\" y1=\"378.9389953613281\" x2=\"445.06201171875\" y2=\"371.6319885253906\" stroke-width=\"1.962196756998698\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"722.72900390625\" y1=\"484.6300048828125\" x2=\"722.72900390625\" y2=\"409.89300537109375\" stroke-width=\"1.962196756998698\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"625.0850219726562\" y1=\"582.2750244140625\" x2=\"550.3469848632812\" y2=\"582.27001953125\" stroke-width=\"1.962196756998698\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"820.3790283203125\" y1=\"582.2730102539062\" x2=\"895.1110229492188\" y2=\"582.27099609375\" stroke-width=\"1.962196756998698\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"722.7340087890625\" y1=\"679.9199829101562\" x2=\"722.72998046875\" y2=\"754.6519775390625\" stroke-width=\"1.962196756998698\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"944.8209838867188\" y1=\"515.031982421875\" x2=\"938.052978515625\" y2=\"479.6340026855469\" stroke-width=\"1.962196756998698\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"963.3629760742188\" y1=\"606.8880004882812\" x2=\"944.8209838867188\" y2=\"515.031982421875\" stroke-width=\"1.962196756998698\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"963.3629760742188\" y1=\"606.8880004882812\" x2=\"1017.0029907226562\" y2=\"876.5449829101562\" stroke-width=\"1.962196756998698\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"767.530029296875\" y1=\"454.6929931640625\" x2=\"722.72900390625\" y2=\"409.89300537109375\" stroke-width=\"1.962196756998698\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"850.31201171875\" y1=\"537.4769897460938\" x2=\"767.530029296875\" y2=\"454.6929931640625\" stroke-width=\"1.962196756998698\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"850.31201171875\" y1=\"537.4769897460938\" x2=\"895.1110229492188\" y2=\"582.27099609375\" stroke-width=\"1.962196756998698\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"820.3790283203125\" y1=\"582.2730102539062\" x2=\"850.31201171875\" y2=\"537.4769897460938\" stroke-width=\"1.962196756998698\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"655.4910278320312\" y1=\"804.3629760742188\" x2=\"620.0919799804688\" y2=\"797.593994140625\" stroke-width=\"1.962196756998698\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"747.3469848632812\" y1=\"822.905029296875\" x2=\"655.4910278320312\" y2=\"804.3629760742188\" stroke-width=\"1.962196756998698\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"747.3469848632812\" y1=\"822.905029296875\" x2=\"1017.0029907226562\" y2=\"876.5449829101562\" stroke-width=\"1.962196756998698\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"595.1500244140625\" y1=\"627.0770263671875\" x2=\"550.3469848632812\" y2=\"582.27001953125\" stroke-width=\"1.962196756998698\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"677.9290161132812\" y1=\"709.85498046875\" x2=\"595.1500244140625\" y2=\"627.0770263671875\" stroke-width=\"1.962196756998698\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"677.9290161132812\" y1=\"709.85498046875\" x2=\"722.72998046875\" y2=\"754.6519775390625\" stroke-width=\"1.962196756998698\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"722.7340087890625\" y1=\"679.9199829101562\" x2=\"677.9290161132812\" y2=\"709.85498046875\" stroke-width=\"1.962196756998698\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"698.1119995117188\" y1=\"341.63800048828125\" x2=\"790.1300048828125\" y2=\"360.1830139160156\" stroke-width=\"1.962196756998698\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"698.1119995117188\" y1=\"341.63800048828125\" x2=\"511.17498779296875\" y2=\"304.2550048828125\" stroke-width=\"1.962196756998698\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"790.1300048828125\" y1=\"360.1830139160156\" x2=\"825.3709716796875\" y2=\"366.95599365234375\" stroke-width=\"1.962196756998698\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"511.17498779296875\" y1=\"304.2550048828125\" x2=\"428.4590148925781\" y2=\"288\" stroke-width=\"1.962196756998698\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"482.093994140625\" y1=\"557.6539916992188\" x2=\"500.6419982910156\" y2=\"649.6719970703125\" stroke-width=\"1.962196756998698\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"482.093994140625\" y1=\"557.6539916992188\" x2=\"445.06201171875\" y2=\"371.6319885253906\" stroke-width=\"1.962196756998698\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"500.6419982910156\" y1=\"649.6719970703125\" x2=\"507.4100036621094\" y2=\"684.9169921875\" stroke-width=\"1.962196756998698\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"445.06201171875\" y1=\"371.6319885253906\" x2=\"428.4590148925781\" y2=\"288\" stroke-width=\"1.962196756998698\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"722.72900390625\" y1=\"484.6300048828125\" x2=\"767.530029296875\" y2=\"454.6929931640625\" stroke-width=\"1.962196756998698\"/><line stroke=\"#00f\" opacity=\"0.75\" x1=\"963.3629760742188\" y1=\"606.8880004882812\" x2=\"895.1110229492188\" y2=\"582.27099609375\" stroke-width=\"1.962196756998698\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"864.2529907226562\" y1=\"647.93798828125\" x2=\"808.9219970703125\" y2=\"668.4619750976562\" stroke-width=\"1.962196756998698\"/><line stroke=\"#00f\" opacity=\"0.75\" x1=\"747.3469848632812\" y1=\"822.905029296875\" x2=\"722.72998046875\" y2=\"754.6519775390625\" stroke-width=\"1.962196756998698\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"788.3980102539062\" y1=\"723.7960205078125\" x2=\"808.9219970703125\" y2=\"668.4619750976562\" stroke-width=\"1.962196756998698\"/><line stroke=\"#00f\" opacity=\"0.75\" x1=\"698.1119995117188\" y1=\"341.63800048828125\" x2=\"722.72900390625\" y2=\"409.89300537109375\" stroke-width=\"1.962196756998698\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"657.0609741210938\" y1=\"440.74700927734375\" x2=\"636.5369873046875\" y2=\"496.0780029296875\" stroke-width=\"1.962196756998698\"/><line stroke=\"#00f\" opacity=\"0.75\" x1=\"482.093994140625\" y1=\"557.6539916992188\" x2=\"550.3469848632812\" y2=\"582.27001953125\" stroke-width=\"1.962196756998698\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"581.2030029296875\" y1=\"516.6019897460938\" x2=\"636.5369873046875\" y2=\"496.0780029296875\" stroke-width=\"1.962196756998698\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"625.0850219726562\" y1=\"582.2750244140625\" x2=\"595.1500244140625\" y2=\"627.0770263671875\" stroke-width=\"1.962196756998698\"/><line stroke=\"#00f\" opacity=\"0.25\" x1=\"667.02001953125\" y1=\"777.72998046875\" x2=\"640.22900390625\" y2=\"767.0159912109375\" stroke-width=\"1.962196756998698\"/><line stroke=\"#00f\" opacity=\"0.25\" x1=\"655.4910278320312\" y1=\"876.5460205078125\" x2=\"655.4910278320312\" y2=\"804.3629760742188\" stroke-width=\"1.962196756998698\"/><line stroke=\"#00f\" opacity=\"0.25\" x1=\"527.2730102539062\" y1=\"638.1430053710938\" x2=\"537.989990234375\" y2=\"664.9340209960938\" stroke-width=\"1.962196756998698\"/><line stroke=\"#00f\" opacity=\"0.25\" x1=\"428.4590148925781\" y1=\"649.6719970703125\" x2=\"500.6419982910156\" y2=\"649.6719970703125\" stroke-width=\"1.962196756998698\"/><line stroke=\"#00f\" opacity=\"0.25\" x1=\"918.18798828125\" y1=\"526.5609741210938\" x2=\"907.4730224609375\" y2=\"499.7699890136719\" stroke-width=\"1.962196756998698\"/><line stroke=\"#00f\" opacity=\"0.25\" x1=\"1017.0040283203125\" y1=\"515.031982421875\" x2=\"944.8209838867188\" y2=\"515.031982421875\" stroke-width=\"1.962196756998698\"/><line stroke=\"#00f\" opacity=\"0.25\" x1=\"778.6019897460938\" y1=\"386.81500244140625\" x2=\"805.3930053710938\" y2=\"397.531005859375\" stroke-width=\"1.962196756998698\"/><line stroke=\"#00f\" opacity=\"0.25\" x1=\"790.1300048828125\" y1=\"288\" x2=\"790.1300048828125\" y2=\"360.1830139160156\" stroke-width=\"1.962196756998698\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"518.68798828125\" y1=\"287.8869934082031\" x2=\"511.17498779296875\" y2=\"304.2550048828125\" stroke-width=\"1.962196756998698\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"519.2020263671875\" y1=\"325.5920104980469\" x2=\"498.7229919433594\" y2=\"335.2149963378906\" stroke-width=\"1.962196756998698\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"445.06201171875\" y1=\"371.6319885253906\" x2=\"428.4630126953125\" y2=\"379.25\" stroke-width=\"1.962196756998698\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"475.72698974609375\" y1=\"358.7080078125\" x2=\"466.218994140625\" y2=\"378.9389953613281\" stroke-width=\"1.962196756998698\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"492.7040100097656\" y1=\"352.2449951171875\" x2=\"428.4590148925781\" y2=\"288\" stroke-width=\"1.962196756998698\"/><line stroke=\"#00f\" opacity=\"0.5\" x1=\"722.7315062710079\" y1=\"582.2720030850569\" x2=\"636.5369873046875\" y2=\"496.0780029296875\" stroke-width=\"1.962196756998698\"/><line stroke=\"#00f\" opacity=\"0.5\" x1=\"722.7315062710079\" y1=\"582.2720030850569\" x2=\"808.9219970703125\" y2=\"668.4619750976562\" stroke-width=\"1.962196756998698\"/><line stroke=\"#ff0\" opacity=\"1\" x1=\"625.0850219726562\" y1=\"582.2750244140625\" x2=\"722.7340087890625\" y2=\"679.9199829101562\" stroke-width=\"1.962196756998698\"/><line stroke=\"#ff0\" opacity=\"1\" x1=\"722.72900390625\" y1=\"484.6300048828125\" x2=\"820.3790283203125\" y2=\"582.2730102539062\" stroke-width=\"1.962196756998698\"/><line stroke=\"#ff0\" opacity=\"1\" x1=\"722.7340087890625\" y1=\"679.9199829101562\" x2=\"808.9219970703125\" y2=\"668.4619750976562\" stroke-width=\"1.962196756998698\"/><line stroke=\"#ff0\" opacity=\"1\" x1=\"808.9219970703125\" y1=\"668.4619750976562\" x2=\"820.3790283203125\" y2=\"582.2730102539062\" stroke-width=\"1.962196756998698\"/><line stroke=\"#ff0\" opacity=\"1\" x1=\"722.72900390625\" y1=\"484.6300048828125\" x2=\"636.5369873046875\" y2=\"496.0780029296875\" stroke-width=\"1.962196756998698\"/><line stroke=\"#ff0\" opacity=\"1\" x1=\"636.5369873046875\" y1=\"496.0780029296875\" x2=\"625.0850219726562\" y2=\"582.2750244140625\" stroke-width=\"1.962196756998698\"/><line stroke=\"#ff0\" opacity=\"1\" x1=\"428.4590148925781\" y1=\"876.5440063476562\" x2=\"537.989990234375\" y2=\"664.9340209960938\" stroke-width=\"1.962196756998698\"/><line stroke=\"#ff0\" opacity=\"1\" x1=\"640.22900390625\" y1=\"767.0159912109375\" x2=\"428.4590148925781\" y2=\"876.5440063476562\" stroke-width=\"1.962196756998698\"/><line stroke=\"#ff0\" opacity=\"1\" x1=\"907.4730224609375\" y1=\"499.7699890136719\" x2=\"1017.0029907226562\" y2=\"288\" stroke-width=\"1.962196756998698\"/><line stroke=\"#ff0\" opacity=\"1\" x1=\"805.3930053710938\" y1=\"397.531005859375\" x2=\"1017.0029907226562\" y2=\"288\" stroke-width=\"1.962196756998698\"/></svg>`\n            },\n            {\n                maxFolding: 70, \n                name: \"hypar.svg\", \n                patternType: \"Hypar\",\n                svgContent: `<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"57.599999999999994 57.599999999999994 1036.8 1036.8\"><line stroke=\"#000\" opacity=\"1\" x1=\"1008\" y1=\"1008\" x2=\"144\" y2=\"1008\" stroke-width=\"2.88\"/><line stroke=\"#000\" opacity=\"1\" x1=\"144\" y1=\"1008\" x2=\"144\" y2=\"144\" stroke-width=\"2.88\"/><line stroke=\"#000\" opacity=\"1\" x1=\"144\" y1=\"144\" x2=\"1008\" y2=\"144\" stroke-width=\"2.88\"/><line stroke=\"#000\" opacity=\"1\" x1=\"1008\" y1=\"144\" x2=\"1008\" y2=\"1008\" stroke-width=\"2.88\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"666\" y1=\"486\" x2=\"486\" y2=\"486\" stroke-width=\"2.88\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"486\" y1=\"486\" x2=\"486\" y2=\"666\" stroke-width=\"2.88\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"486\" y1=\"666\" x2=\"666\" y2=\"666\" stroke-width=\"2.88\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"666\" y1=\"666\" x2=\"666\" y2=\"486\" stroke-width=\"2.88\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"990\" y1=\"990\" x2=\"162\" y2=\"990\" stroke-width=\"2.88\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"162\" y1=\"990\" x2=\"162\" y2=\"162\" stroke-width=\"2.88\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"162\" y1=\"162\" x2=\"990\" y2=\"162\" stroke-width=\"2.88\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"990\" y1=\"162\" x2=\"990\" y2=\"990\" stroke-width=\"2.88\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"954\" y1=\"198\" x2=\"198\" y2=\"198\" stroke-width=\"2.88\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"198\" y1=\"198\" x2=\"198\" y2=\"954\" stroke-width=\"2.88\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"198\" y1=\"954\" x2=\"954\" y2=\"954\" stroke-width=\"2.88\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"954\" y1=\"954\" x2=\"954\" y2=\"198\" stroke-width=\"2.88\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"918\" y1=\"234\" x2=\"234\" y2=\"234\" stroke-width=\"2.88\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"234\" y1=\"234\" x2=\"234\" y2=\"918\" stroke-width=\"2.88\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"234\" y1=\"918\" x2=\"918\" y2=\"918\" stroke-width=\"2.88\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"918\" y1=\"918\" x2=\"918\" y2=\"234\" stroke-width=\"2.88\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"846\" y1=\"306\" x2=\"306\" y2=\"306\" stroke-width=\"2.88\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"306\" y1=\"306\" x2=\"306\" y2=\"846\" stroke-width=\"2.88\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"306\" y1=\"846\" x2=\"846\" y2=\"846\" stroke-width=\"2.88\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"846\" y1=\"846\" x2=\"846\" y2=\"306\" stroke-width=\"2.88\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"882\" y1=\"270\" x2=\"270\" y2=\"270\" stroke-width=\"2.88\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"270\" y1=\"270\" x2=\"270\" y2=\"882\" stroke-width=\"2.88\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"270\" y1=\"882\" x2=\"882\" y2=\"882\" stroke-width=\"2.88\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"882\" y1=\"882\" x2=\"882\" y2=\"270\" stroke-width=\"2.88\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"810\" y1=\"342\" x2=\"342\" y2=\"342\" stroke-width=\"2.88\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"342\" y1=\"342\" x2=\"342\" y2=\"810\" stroke-width=\"2.88\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"342\" y1=\"810\" x2=\"810\" y2=\"810\" stroke-width=\"2.88\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"810\" y1=\"810\" x2=\"810\" y2=\"342\" stroke-width=\"2.88\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"774\" y1=\"378\" x2=\"378\" y2=\"378\" stroke-width=\"2.88\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"378\" y1=\"378\" x2=\"378\" y2=\"774\" stroke-width=\"2.88\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"378\" y1=\"774\" x2=\"774\" y2=\"774\" stroke-width=\"2.88\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"774\" y1=\"774\" x2=\"774\" y2=\"378\" stroke-width=\"2.88\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"738\" y1=\"414\" x2=\"414\" y2=\"414\" stroke-width=\"2.88\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"414\" y1=\"414\" x2=\"414\" y2=\"738\" stroke-width=\"2.88\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"414\" y1=\"738\" x2=\"738\" y2=\"738\" stroke-width=\"2.88\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"738\" y1=\"738\" x2=\"738\" y2=\"414\" stroke-width=\"2.88\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"702\" y1=\"450\" x2=\"450\" y2=\"450\" stroke-width=\"2.88\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"450\" y1=\"450\" x2=\"450\" y2=\"702\" stroke-width=\"2.88\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"450\" y1=\"702\" x2=\"702\" y2=\"702\" stroke-width=\"2.88\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"702\" y1=\"702\" x2=\"702\" y2=\"450\" stroke-width=\"2.88\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"1008\" y1=\"1008\" x2=\"990\" y2=\"990\" stroke-width=\"2.88\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"972\" y1=\"972\" x2=\"954\" y2=\"954\" stroke-width=\"2.88\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"936\" y1=\"936\" x2=\"918\" y2=\"918\" stroke-width=\"2.88\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"900\" y1=\"900\" x2=\"882\" y2=\"882\" stroke-width=\"2.88\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"864\" y1=\"864\" x2=\"846\" y2=\"846\" stroke-width=\"2.88\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"828\" y1=\"828\" x2=\"810\" y2=\"810\" stroke-width=\"2.88\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"792\" y1=\"792\" x2=\"774\" y2=\"774\" stroke-width=\"2.88\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"756\" y1=\"756\" x2=\"738\" y2=\"738\" stroke-width=\"2.88\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"720\" y1=\"720\" x2=\"702\" y2=\"702\" stroke-width=\"2.88\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"486\" y1=\"486\" x2=\"468\" y2=\"468\" stroke-width=\"2.88\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"450\" y1=\"450\" x2=\"432\" y2=\"432\" stroke-width=\"2.88\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"414\" y1=\"414\" x2=\"396\" y2=\"396\" stroke-width=\"2.88\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"378\" y1=\"378\" x2=\"360\" y2=\"360\" stroke-width=\"2.88\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"342\" y1=\"342\" x2=\"324\" y2=\"324\" stroke-width=\"2.88\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"306\" y1=\"306\" x2=\"288\" y2=\"288\" stroke-width=\"2.88\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"270\" y1=\"270\" x2=\"252\" y2=\"252\" stroke-width=\"2.88\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"234\" y1=\"234\" x2=\"216\" y2=\"216\" stroke-width=\"2.88\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"198\" y1=\"198\" x2=\"180\" y2=\"180\" stroke-width=\"2.88\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"162\" y1=\"162\" x2=\"144\" y2=\"144\" stroke-width=\"2.88\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"1008\" y1=\"144\" x2=\"990\" y2=\"162\" stroke-width=\"2.88\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"972\" y1=\"180\" x2=\"954\" y2=\"198\" stroke-width=\"2.88\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"936\" y1=\"216\" x2=\"918\" y2=\"234\" stroke-width=\"2.88\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"900\" y1=\"252\" x2=\"882\" y2=\"270\" stroke-width=\"2.88\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"864\" y1=\"288\" x2=\"846\" y2=\"306\" stroke-width=\"2.88\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"828\" y1=\"324\" x2=\"810\" y2=\"342\" stroke-width=\"2.88\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"792\" y1=\"360\" x2=\"774\" y2=\"378\" stroke-width=\"2.88\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"756\" y1=\"396\" x2=\"738\" y2=\"414\" stroke-width=\"2.88\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"720\" y1=\"432\" x2=\"702\" y2=\"450\" stroke-width=\"2.88\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"684\" y1=\"468\" x2=\"666\" y2=\"486\" stroke-width=\"2.88\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"144\" y1=\"1008\" x2=\"162\" y2=\"990\" stroke-width=\"2.88\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"180\" y1=\"972\" x2=\"198\" y2=\"954\" stroke-width=\"2.88\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"216\" y1=\"936\" x2=\"234\" y2=\"918\" stroke-width=\"2.88\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"252\" y1=\"900\" x2=\"270\" y2=\"882\" stroke-width=\"2.88\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"288\" y1=\"864\" x2=\"306\" y2=\"846\" stroke-width=\"2.88\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"324\" y1=\"828\" x2=\"342\" y2=\"810\" stroke-width=\"2.88\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"360\" y1=\"792\" x2=\"378\" y2=\"774\" stroke-width=\"2.88\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"396\" y1=\"756\" x2=\"414\" y2=\"738\" stroke-width=\"2.88\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"432\" y1=\"720\" x2=\"450\" y2=\"702\" stroke-width=\"2.88\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"468\" y1=\"684\" x2=\"486\" y2=\"666\" stroke-width=\"2.88\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"666\" y1=\"666\" x2=\"684\" y2=\"684\" stroke-width=\"2.88\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"629.1680297851562\" y1=\"524.833984375\" x2=\"522\" y2=\"522\" stroke-width=\"2.88\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"522\" y1=\"522\" x2=\"522\" y2=\"630\" stroke-width=\"2.88\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"522\" y1=\"630\" x2=\"630\" y2=\"630\" stroke-width=\"2.88\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"630\" y1=\"630\" x2=\"629.1680297851562\" y2=\"524.833984375\" stroke-width=\"2.88\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"594\" y1=\"558\" x2=\"558\" y2=\"558\" stroke-width=\"2.88\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"558\" y1=\"558\" x2=\"558\" y2=\"594\" stroke-width=\"2.88\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"558\" y1=\"594\" x2=\"594\" y2=\"594\" stroke-width=\"2.88\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"594\" y1=\"594\" x2=\"594\" y2=\"558\" stroke-width=\"2.88\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"648\" y1=\"504\" x2=\"629.1680297851562\" y2=\"524.833984375\" stroke-width=\"2.88\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"612\" y1=\"540\" x2=\"594\" y2=\"558\" stroke-width=\"2.88\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"648\" y1=\"648\" x2=\"630\" y2=\"630\" stroke-width=\"2.88\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"594\" y1=\"594\" x2=\"612\" y2=\"612\" stroke-width=\"2.88\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"558\" y1=\"594\" x2=\"540\" y2=\"612\" stroke-width=\"2.88\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"504\" y1=\"648\" x2=\"522\" y2=\"630\" stroke-width=\"2.88\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"504\" y1=\"504\" x2=\"522\" y2=\"522\" stroke-width=\"2.88\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"540\" y1=\"540\" x2=\"558\" y2=\"558\" stroke-width=\"2.88\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"972\" y1=\"972\" x2=\"180\" y2=\"972\" stroke-width=\"2.88\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"180\" y1=\"972\" x2=\"180\" y2=\"180\" stroke-width=\"2.88\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"180\" y1=\"180\" x2=\"972\" y2=\"180\" stroke-width=\"2.88\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"972\" y1=\"180\" x2=\"972\" y2=\"972\" stroke-width=\"2.88\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"936\" y1=\"216\" x2=\"216\" y2=\"216\" stroke-width=\"2.88\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"216\" y1=\"216\" x2=\"216\" y2=\"936\" stroke-width=\"2.88\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"216\" y1=\"936\" x2=\"936\" y2=\"936\" stroke-width=\"2.88\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"936\" y1=\"936\" x2=\"936\" y2=\"216\" stroke-width=\"2.88\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"900\" y1=\"252\" x2=\"252\" y2=\"252\" stroke-width=\"2.88\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"252\" y1=\"252\" x2=\"252\" y2=\"900\" stroke-width=\"2.88\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"252\" y1=\"900\" x2=\"900\" y2=\"900\" stroke-width=\"2.88\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"900\" y1=\"900\" x2=\"900\" y2=\"252\" stroke-width=\"2.88\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"864\" y1=\"288\" x2=\"288\" y2=\"288\" stroke-width=\"2.88\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"288\" y1=\"288\" x2=\"288\" y2=\"864\" stroke-width=\"2.88\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"288\" y1=\"864\" x2=\"864\" y2=\"864\" stroke-width=\"2.88\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"864\" y1=\"864\" x2=\"864\" y2=\"288\" stroke-width=\"2.88\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"828\" y1=\"324\" x2=\"324\" y2=\"324\" stroke-width=\"2.88\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"324\" y1=\"324\" x2=\"324\" y2=\"828\" stroke-width=\"2.88\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"324\" y1=\"828\" x2=\"828\" y2=\"828\" stroke-width=\"2.88\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"828\" y1=\"828\" x2=\"828\" y2=\"324\" stroke-width=\"2.88\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"792\" y1=\"360\" x2=\"360\" y2=\"360\" stroke-width=\"2.88\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"360\" y1=\"360\" x2=\"360\" y2=\"792\" stroke-width=\"2.88\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"360\" y1=\"792\" x2=\"792\" y2=\"792\" stroke-width=\"2.88\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"792\" y1=\"792\" x2=\"792\" y2=\"360\" stroke-width=\"2.88\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"756\" y1=\"396\" x2=\"396\" y2=\"396\" stroke-width=\"2.88\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"396\" y1=\"396\" x2=\"396\" y2=\"756\" stroke-width=\"2.88\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"396\" y1=\"756\" x2=\"756\" y2=\"756\" stroke-width=\"2.88\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"756\" y1=\"756\" x2=\"756\" y2=\"396\" stroke-width=\"2.88\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"720\" y1=\"432\" x2=\"432\" y2=\"432\" stroke-width=\"2.88\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"432\" y1=\"432\" x2=\"432\" y2=\"720\" stroke-width=\"2.88\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"432\" y1=\"720\" x2=\"720\" y2=\"720\" stroke-width=\"2.88\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"720\" y1=\"720\" x2=\"720\" y2=\"432\" stroke-width=\"2.88\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"684\" y1=\"468\" x2=\"468\" y2=\"468\" stroke-width=\"2.88\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"468\" y1=\"468\" x2=\"468\" y2=\"684\" stroke-width=\"2.88\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"468\" y1=\"684\" x2=\"684\" y2=\"684\" stroke-width=\"2.88\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"684\" y1=\"684\" x2=\"684\" y2=\"468\" stroke-width=\"2.88\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"990\" y1=\"990\" x2=\"972\" y2=\"972\" stroke-width=\"2.88\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"954\" y1=\"954\" x2=\"936\" y2=\"936\" stroke-width=\"2.88\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"918\" y1=\"918\" x2=\"900\" y2=\"900\" stroke-width=\"2.88\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"882\" y1=\"882\" x2=\"864\" y2=\"864\" stroke-width=\"2.88\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"846\" y1=\"846\" x2=\"828\" y2=\"828\" stroke-width=\"2.88\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"810\" y1=\"810\" x2=\"792\" y2=\"792\" stroke-width=\"2.88\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"774\" y1=\"774\" x2=\"756\" y2=\"756\" stroke-width=\"2.88\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"738\" y1=\"738\" x2=\"720\" y2=\"720\" stroke-width=\"2.88\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"702\" y1=\"702\" x2=\"684\" y2=\"684\" stroke-width=\"2.88\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"468\" y1=\"468\" x2=\"450\" y2=\"450\" stroke-width=\"2.88\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"432\" y1=\"432\" x2=\"414\" y2=\"414\" stroke-width=\"2.88\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"396\" y1=\"396\" x2=\"378\" y2=\"378\" stroke-width=\"2.88\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"360\" y1=\"360\" x2=\"342\" y2=\"342\" stroke-width=\"2.88\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"324\" y1=\"324\" x2=\"306\" y2=\"306\" stroke-width=\"2.88\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"288\" y1=\"288\" x2=\"270\" y2=\"270\" stroke-width=\"2.88\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"252\" y1=\"252\" x2=\"234\" y2=\"234\" stroke-width=\"2.88\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"216\" y1=\"216\" x2=\"198\" y2=\"198\" stroke-width=\"2.88\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"180\" y1=\"180\" x2=\"162\" y2=\"162\" stroke-width=\"2.88\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"990\" y1=\"162\" x2=\"972\" y2=\"180\" stroke-width=\"2.88\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"954\" y1=\"198\" x2=\"936\" y2=\"216\" stroke-width=\"2.88\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"918\" y1=\"234\" x2=\"900\" y2=\"252\" stroke-width=\"2.88\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"882\" y1=\"270\" x2=\"864\" y2=\"288\" stroke-width=\"2.88\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"846\" y1=\"306\" x2=\"828\" y2=\"324\" stroke-width=\"2.88\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"810\" y1=\"342\" x2=\"792\" y2=\"360\" stroke-width=\"2.88\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"774\" y1=\"378\" x2=\"756\" y2=\"396\" stroke-width=\"2.88\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"738\" y1=\"414\" x2=\"720\" y2=\"432\" stroke-width=\"2.88\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"702\" y1=\"450\" x2=\"684\" y2=\"468\" stroke-width=\"2.88\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"162\" y1=\"990\" x2=\"180\" y2=\"972\" stroke-width=\"2.88\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"198\" y1=\"954\" x2=\"216\" y2=\"936\" stroke-width=\"2.88\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"234\" y1=\"918\" x2=\"252\" y2=\"900\" stroke-width=\"2.88\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"270\" y1=\"882\" x2=\"288\" y2=\"864\" stroke-width=\"2.88\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"306\" y1=\"846\" x2=\"324\" y2=\"828\" stroke-width=\"2.88\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"342\" y1=\"810\" x2=\"360\" y2=\"792\" stroke-width=\"2.88\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"378\" y1=\"774\" x2=\"396\" y2=\"756\" stroke-width=\"2.88\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"414\" y1=\"738\" x2=\"432\" y2=\"720\" stroke-width=\"2.88\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"450\" y1=\"702\" x2=\"468\" y2=\"684\" stroke-width=\"2.88\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"648\" y1=\"504\" x2=\"504\" y2=\"504\" stroke-width=\"2.88\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"504\" y1=\"504\" x2=\"504\" y2=\"648\" stroke-width=\"2.88\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"504\" y1=\"648\" x2=\"648\" y2=\"648\" stroke-width=\"2.88\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"648\" y1=\"648\" x2=\"648\" y2=\"504\" stroke-width=\"2.88\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"612\" y1=\"540\" x2=\"540\" y2=\"540\" stroke-width=\"2.88\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"540\" y1=\"540\" x2=\"540\" y2=\"612\" stroke-width=\"2.88\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"540\" y1=\"612\" x2=\"612\" y2=\"612\" stroke-width=\"2.88\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"612\" y1=\"612\" x2=\"612\" y2=\"540\" stroke-width=\"2.88\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"666\" y1=\"486\" x2=\"648\" y2=\"504\" stroke-width=\"2.88\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"629.1680297851562\" y1=\"524.833984375\" x2=\"612\" y2=\"540\" stroke-width=\"2.88\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"666\" y1=\"666\" x2=\"648\" y2=\"648\" stroke-width=\"2.88\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"630\" y1=\"630\" x2=\"612\" y2=\"612\" stroke-width=\"2.88\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"486\" y1=\"666\" x2=\"504\" y2=\"648\" stroke-width=\"2.88\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"522\" y1=\"630\" x2=\"540\" y2=\"612\" stroke-width=\"2.88\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"486\" y1=\"486\" x2=\"504\" y2=\"504\" stroke-width=\"2.88\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"522\" y1=\"522\" x2=\"540\" y2=\"540\" stroke-width=\"2.88\"/><line stroke=\"#f0f\" opacity=\"1\" x1=\"576\" y1=\"576\" x2=\"558\" y2=\"558\" stroke-width=\"2.88\"/><line stroke=\"#f0f\" opacity=\"1\" x1=\"576\" y1=\"576\" x2=\"594\" y2=\"594\" stroke-width=\"2.88\"/><line stroke=\"#f0f\" opacity=\"1\" x1=\"576\" y1=\"576\" x2=\"558\" y2=\"594\" stroke-width=\"2.88\"/><line stroke=\"#f0f\" opacity=\"1\" x1=\"576\" y1=\"576\" x2=\"594\" y2=\"558\" stroke-width=\"2.88\"/><line stroke=\"#f0f\" opacity=\"1\" x1=\"162\" y1=\"990\" x2=\"144\" y2=\"144\" stroke-width=\"2.88\"/><line stroke=\"#f0f\" opacity=\"1\" x1=\"972\" y1=\"972\" x2=\"162\" y2=\"990\" stroke-width=\"2.88\"/><line stroke=\"#f0f\" opacity=\"1\" x1=\"198\" y1=\"954\" x2=\"180\" y2=\"180\" stroke-width=\"2.88\"/><line stroke=\"#f0f\" opacity=\"1\" x1=\"936\" y1=\"936\" x2=\"198\" y2=\"954\" stroke-width=\"2.88\"/><line stroke=\"#f0f\" opacity=\"1\" x1=\"234\" y1=\"918\" x2=\"216\" y2=\"216\" stroke-width=\"2.88\"/><line stroke=\"#f0f\" opacity=\"1\" x1=\"900\" y1=\"900\" x2=\"234\" y2=\"918\" stroke-width=\"2.88\"/><line stroke=\"#f0f\" opacity=\"1\" x1=\"270\" y1=\"882\" x2=\"252\" y2=\"252\" stroke-width=\"2.88\"/><line stroke=\"#f0f\" opacity=\"1\" x1=\"864\" y1=\"864\" x2=\"270\" y2=\"882\" stroke-width=\"2.88\"/><line stroke=\"#f0f\" opacity=\"1\" x1=\"306\" y1=\"846\" x2=\"288\" y2=\"288\" stroke-width=\"2.88\"/><line stroke=\"#f0f\" opacity=\"1\" x1=\"828\" y1=\"828\" x2=\"306\" y2=\"846\" stroke-width=\"2.88\"/><line stroke=\"#f0f\" opacity=\"1\" x1=\"342\" y1=\"810\" x2=\"324\" y2=\"324\" stroke-width=\"2.88\"/><line stroke=\"#f0f\" opacity=\"1\" x1=\"792\" y1=\"792\" x2=\"342\" y2=\"810\" stroke-width=\"2.88\"/><line stroke=\"#f0f\" opacity=\"1\" x1=\"378\" y1=\"774\" x2=\"360\" y2=\"360\" stroke-width=\"2.88\"/><line stroke=\"#f0f\" opacity=\"1\" x1=\"756\" y1=\"756\" x2=\"378\" y2=\"774\" stroke-width=\"2.88\"/><line stroke=\"#f0f\" opacity=\"1\" x1=\"414\" y1=\"738\" x2=\"396\" y2=\"396\" stroke-width=\"2.88\"/><line stroke=\"#f0f\" opacity=\"1\" x1=\"720\" y1=\"720\" x2=\"414\" y2=\"738\" stroke-width=\"2.88\"/><line stroke=\"#f0f\" opacity=\"1\" x1=\"450\" y1=\"702\" x2=\"432\" y2=\"432\" stroke-width=\"2.88\"/><line stroke=\"#f0f\" opacity=\"1\" x1=\"684\" y1=\"684\" x2=\"450\" y2=\"702\" stroke-width=\"2.88\"/><line stroke=\"#f0f\" opacity=\"1\" x1=\"486\" y1=\"666\" x2=\"468\" y2=\"468\" stroke-width=\"2.88\"/><line stroke=\"#f0f\" opacity=\"1\" x1=\"144\" y1=\"144\" x2=\"990\" y2=\"162\" stroke-width=\"2.88\"/><line stroke=\"#f0f\" opacity=\"1\" x1=\"162\" y1=\"990\" x2=\"180\" y2=\"180\" stroke-width=\"2.88\"/><line stroke=\"#f0f\" opacity=\"1\" x1=\"180\" y1=\"180\" x2=\"954\" y2=\"198\" stroke-width=\"2.88\"/><line stroke=\"#f0f\" opacity=\"1\" x1=\"198\" y1=\"954\" x2=\"216\" y2=\"216\" stroke-width=\"2.88\"/><line stroke=\"#f0f\" opacity=\"1\" x1=\"216\" y1=\"216\" x2=\"918\" y2=\"234\" stroke-width=\"2.88\"/><line stroke=\"#f0f\" opacity=\"1\" x1=\"234\" y1=\"918\" x2=\"252\" y2=\"252\" stroke-width=\"2.88\"/><line stroke=\"#f0f\" opacity=\"1\" x1=\"252\" y1=\"252\" x2=\"882\" y2=\"270\" stroke-width=\"2.88\"/><line stroke=\"#f0f\" opacity=\"1\" x1=\"270\" y1=\"882\" x2=\"288\" y2=\"288\" stroke-width=\"2.88\"/><line stroke=\"#f0f\" opacity=\"1\" x1=\"288\" y1=\"288\" x2=\"846\" y2=\"306\" stroke-width=\"2.88\"/><line stroke=\"#f0f\" opacity=\"1\" x1=\"306\" y1=\"846\" x2=\"324\" y2=\"324\" stroke-width=\"2.88\"/><line stroke=\"#f0f\" opacity=\"1\" x1=\"324\" y1=\"324\" x2=\"810\" y2=\"342\" stroke-width=\"2.88\"/><line stroke=\"#f0f\" opacity=\"1\" x1=\"342\" y1=\"810\" x2=\"360\" y2=\"360\" stroke-width=\"2.88\"/><line stroke=\"#f0f\" opacity=\"1\" x1=\"360\" y1=\"360\" x2=\"774\" y2=\"378\" stroke-width=\"2.88\"/><line stroke=\"#f0f\" opacity=\"1\" x1=\"378\" y1=\"774\" x2=\"396\" y2=\"396\" stroke-width=\"2.88\"/><line stroke=\"#f0f\" opacity=\"1\" x1=\"396\" y1=\"396\" x2=\"738\" y2=\"414\" stroke-width=\"2.88\"/><line stroke=\"#f0f\" opacity=\"1\" x1=\"414\" y1=\"738\" x2=\"432\" y2=\"432\" stroke-width=\"2.88\"/><line stroke=\"#f0f\" opacity=\"1\" x1=\"432\" y1=\"432\" x2=\"702\" y2=\"450\" stroke-width=\"2.88\"/><line stroke=\"#f0f\" opacity=\"1\" x1=\"450\" y1=\"702\" x2=\"468\" y2=\"468\" stroke-width=\"2.88\"/><line stroke=\"#f0f\" opacity=\"1\" x1=\"468\" y1=\"468\" x2=\"666\" y2=\"486\" stroke-width=\"2.88\"/><line stroke=\"#f0f\" opacity=\"1\" x1=\"990\" y1=\"162\" x2=\"1008\" y2=\"1008\" stroke-width=\"2.88\"/><line stroke=\"#f0f\" opacity=\"1\" x1=\"180\" y1=\"180\" x2=\"990\" y2=\"162\" stroke-width=\"2.88\"/><line stroke=\"#f0f\" opacity=\"1\" x1=\"954\" y1=\"198\" x2=\"972\" y2=\"972\" stroke-width=\"2.88\"/><line stroke=\"#f0f\" opacity=\"1\" x1=\"216\" y1=\"216\" x2=\"954\" y2=\"198\" stroke-width=\"2.88\"/><line stroke=\"#f0f\" opacity=\"1\" x1=\"918\" y1=\"234\" x2=\"936\" y2=\"936\" stroke-width=\"2.88\"/><line stroke=\"#f0f\" opacity=\"1\" x1=\"252\" y1=\"252\" x2=\"918\" y2=\"234\" stroke-width=\"2.88\"/><line stroke=\"#f0f\" opacity=\"1\" x1=\"882\" y1=\"270\" x2=\"900\" y2=\"900\" stroke-width=\"2.88\"/><line stroke=\"#f0f\" opacity=\"1\" x1=\"288\" y1=\"288\" x2=\"882\" y2=\"270\" stroke-width=\"2.88\"/><line stroke=\"#f0f\" opacity=\"1\" x1=\"846\" y1=\"306\" x2=\"864\" y2=\"864\" stroke-width=\"2.88\"/><line stroke=\"#f0f\" opacity=\"1\" x1=\"324\" y1=\"324\" x2=\"846\" y2=\"306\" stroke-width=\"2.88\"/><line stroke=\"#f0f\" opacity=\"1\" x1=\"810\" y1=\"342\" x2=\"828\" y2=\"828\" stroke-width=\"2.88\"/><line stroke=\"#f0f\" opacity=\"1\" x1=\"360\" y1=\"360\" x2=\"810\" y2=\"342\" stroke-width=\"2.88\"/><line stroke=\"#f0f\" opacity=\"1\" x1=\"774\" y1=\"378\" x2=\"792\" y2=\"792\" stroke-width=\"2.88\"/><line stroke=\"#f0f\" opacity=\"1\" x1=\"396\" y1=\"396\" x2=\"774\" y2=\"378\" stroke-width=\"2.88\"/><line stroke=\"#f0f\" opacity=\"1\" x1=\"738\" y1=\"414\" x2=\"756\" y2=\"756\" stroke-width=\"2.88\"/><line stroke=\"#f0f\" opacity=\"1\" x1=\"432\" y1=\"432\" x2=\"738\" y2=\"414\" stroke-width=\"2.88\"/><line stroke=\"#f0f\" opacity=\"1\" x1=\"702\" y1=\"450\" x2=\"720\" y2=\"720\" stroke-width=\"2.88\"/><line stroke=\"#f0f\" opacity=\"1\" x1=\"468\" y1=\"468\" x2=\"702\" y2=\"450\" stroke-width=\"2.88\"/><line stroke=\"#f0f\" opacity=\"1\" x1=\"666\" y1=\"486\" x2=\"684\" y2=\"684\" stroke-width=\"2.88\"/><line stroke=\"#f0f\" opacity=\"1\" x1=\"1008\" y1=\"1008\" x2=\"162\" y2=\"990\" stroke-width=\"2.88\"/><line stroke=\"#f0f\" opacity=\"1\" x1=\"990\" y1=\"162\" x2=\"972\" y2=\"972\" stroke-width=\"2.88\"/><line stroke=\"#f0f\" opacity=\"1\" x1=\"972\" y1=\"972\" x2=\"198\" y2=\"954\" stroke-width=\"2.88\"/><line stroke=\"#f0f\" opacity=\"1\" x1=\"954\" y1=\"198\" x2=\"936\" y2=\"936\" stroke-width=\"2.88\"/><line stroke=\"#f0f\" opacity=\"1\" x1=\"936\" y1=\"936\" x2=\"234\" y2=\"918\" stroke-width=\"2.88\"/><line stroke=\"#f0f\" opacity=\"1\" x1=\"918\" y1=\"234\" x2=\"900\" y2=\"900\" stroke-width=\"2.88\"/><line stroke=\"#f0f\" opacity=\"1\" x1=\"900\" y1=\"900\" x2=\"270\" y2=\"882\" stroke-width=\"2.88\"/><line stroke=\"#f0f\" opacity=\"1\" x1=\"882\" y1=\"270\" x2=\"864\" y2=\"864\" stroke-width=\"2.88\"/><line stroke=\"#f0f\" opacity=\"1\" x1=\"864\" y1=\"864\" x2=\"306\" y2=\"846\" stroke-width=\"2.88\"/><line stroke=\"#f0f\" opacity=\"1\" x1=\"846\" y1=\"306\" x2=\"828\" y2=\"828\" stroke-width=\"2.88\"/><line stroke=\"#f0f\" opacity=\"1\" x1=\"828\" y1=\"828\" x2=\"342\" y2=\"810\" stroke-width=\"2.88\"/><line stroke=\"#f0f\" opacity=\"1\" x1=\"810\" y1=\"342\" x2=\"792\" y2=\"792\" stroke-width=\"2.88\"/><line stroke=\"#f0f\" opacity=\"1\" x1=\"792\" y1=\"792\" x2=\"378\" y2=\"774\" stroke-width=\"2.88\"/><line stroke=\"#f0f\" opacity=\"1\" x1=\"774\" y1=\"378\" x2=\"756\" y2=\"756\" stroke-width=\"2.88\"/><line stroke=\"#f0f\" opacity=\"1\" x1=\"756\" y1=\"756\" x2=\"414\" y2=\"738\" stroke-width=\"2.88\"/><line stroke=\"#f0f\" opacity=\"1\" x1=\"738\" y1=\"414\" x2=\"720\" y2=\"720\" stroke-width=\"2.88\"/><line stroke=\"#f0f\" opacity=\"1\" x1=\"720\" y1=\"720\" x2=\"450\" y2=\"702\" stroke-width=\"2.88\"/><line stroke=\"#f0f\" opacity=\"1\" x1=\"702\" y1=\"450\" x2=\"684\" y2=\"684\" stroke-width=\"2.88\"/><line stroke=\"#f0f\" opacity=\"1\" x1=\"684\" y1=\"684\" x2=\"486\" y2=\"666\" stroke-width=\"2.88\"/><line stroke=\"#f0f\" opacity=\"1\" x1=\"666\" y1=\"486\" x2=\"504\" y2=\"504\" stroke-width=\"2.88\"/><line stroke=\"#f0f\" opacity=\"1\" x1=\"504\" y1=\"504\" x2=\"486\" y2=\"666\" stroke-width=\"2.88\"/><line stroke=\"#f0f\" opacity=\"1\" x1=\"486\" y1=\"666\" x2=\"648\" y2=\"648\" stroke-width=\"2.88\"/><line stroke=\"#f0f\" opacity=\"1\" x1=\"648\" y1=\"648\" x2=\"666\" y2=\"486\" stroke-width=\"2.88\"/><line stroke=\"#f0f\" opacity=\"1\" x1=\"504\" y1=\"504\" x2=\"629.1680297851562\" y2=\"524.833984375\" stroke-width=\"2.88\"/><line stroke=\"#f0f\" opacity=\"1\" x1=\"629.1680297851562\" y1=\"524.833984375\" x2=\"648\" y2=\"648\" stroke-width=\"2.88\"/><line stroke=\"#f0f\" opacity=\"1\" x1=\"648\" y1=\"648\" x2=\"522\" y2=\"630\" stroke-width=\"2.88\"/><line stroke=\"#f0f\" opacity=\"1\" x1=\"522\" y1=\"630\" x2=\"504\" y2=\"504\" stroke-width=\"2.88\"/><line stroke=\"#f0f\" opacity=\"1\" x1=\"522\" y1=\"630\" x2=\"540\" y2=\"540\" stroke-width=\"2.88\"/><line stroke=\"#f0f\" opacity=\"1\" x1=\"540\" y1=\"540\" x2=\"629.1680297851562\" y2=\"524.833984375\" stroke-width=\"2.88\"/><line stroke=\"#f0f\" opacity=\"1\" x1=\"629.1680297851562\" y1=\"524.833984375\" x2=\"612\" y2=\"612\" stroke-width=\"2.88\"/><line stroke=\"#f0f\" opacity=\"1\" x1=\"612\" y1=\"612\" x2=\"522\" y2=\"630\" stroke-width=\"2.88\"/><line stroke=\"#f0f\" opacity=\"1\" x1=\"540\" y1=\"540\" x2=\"558\" y2=\"594\" stroke-width=\"2.88\"/><line stroke=\"#f0f\" opacity=\"1\" x1=\"558\" y1=\"594\" x2=\"612\" y2=\"612\" stroke-width=\"2.88\"/><line stroke=\"#f0f\" opacity=\"1\" x1=\"612\" y1=\"612\" x2=\"594\" y2=\"558\" stroke-width=\"2.88\"/><line stroke=\"#f0f\" opacity=\"1\" x1=\"594\" y1=\"558\" x2=\"540\" y2=\"540\" stroke-width=\"2.88\"/></svg>`\n            },\n            {\n                maxFolding: 80, \n                name: \"pinwheelBase.svg\", \n                patternType: \"Pinwheel\",\n                svgContent: `<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"360.5286865234375 365.8817138671875 1863.53173828125 1863.529541015625\"><line stroke=\"#00f\" x1=\"2092.0599365234375\" y1=\"1479.9112548828125\" x2=\"1862.0599365234375\" y2=\"1709.9112548828125\" stroke-width=\"2\"/><line stroke=\"#00f\" x1=\"1862.0599365234375\" y1=\"1709.9112548828125\" x2=\"1632.0599365234375\" y2=\"1479.9112548828125\" stroke-width=\"2\"/><line stroke=\"#00f\" x1=\"1632.0599365234375\" y1=\"1479.9112548828125\" x2=\"1862.0599365234375\" y2=\"1249.9112548828125\" stroke-width=\"2\"/><line stroke=\"#00f\" x1=\"1862.0599365234375\" y1=\"1249.9112548828125\" x2=\"2092.0599365234375\" y2=\"1479.9112548828125\" stroke-width=\"2\"/><line stroke=\"#f00\" x1=\"1862.0599365234375\" y1=\"1249.9112548828125\" x2=\"1862.0599365234375\" y2=\"1709.9112548828125\" stroke-width=\"2\"/><line stroke=\"#f00\" x1=\"1632.0599365234375\" y1=\"1479.9112548828125\" x2=\"2092.0599365234375\" y2=\"1479.9112548828125\" stroke-width=\"2\"/><line stroke=\"#00f\" x1=\"1862.0599365234375\" y1=\"1135.9112548828125\" x2=\"1518.0599365234375\" y2=\"1479.9112548828125\" stroke-width=\"2\"/><line stroke=\"#00f\" x1=\"1518.0599365234375\" y1=\"1479.9112548828125\" x2=\"1862.0599365234375\" y2=\"1823.9112548828125\" stroke-width=\"2\"/><line stroke=\"#00f\" x1=\"1862.0599365234375\" y1=\"1823.9112548828125\" x2=\"2206.0599365234375\" y2=\"1479.9112548828125\" stroke-width=\"2\"/><line stroke=\"#00f\" x1=\"2206.0599365234375\" y1=\"1479.9112548828125\" x2=\"1862.0599365234375\" y2=\"1135.9112548828125\" stroke-width=\"2\"/><line stroke=\"#f00\" x1=\"1862.0599365234375\" y1=\"1135.9112548828125\" x2=\"1862.0599365234375\" y2=\"1823.9112548828125\" stroke-width=\"2\"/><line stroke=\"#f00\" x1=\"1518.0599365234375\" y1=\"1479.9112548828125\" x2=\"2206.0599365234375\" y2=\"1479.9112548828125\" stroke-width=\"2\"/><line stroke=\"#00f\" x1=\"1862.0599365234375\" y1=\"1021.9112548828125\" x2=\"1404.0599365234375\" y2=\"1479.9112548828125\" stroke-width=\"2\"/><line stroke=\"#00f\" x1=\"1404.0599365234375\" y1=\"1479.9112548828125\" x2=\"1862.0599365234375\" y2=\"1937.9112548828125\" stroke-width=\"2\"/><line stroke=\"#00f\" x1=\"1862.0599365234375\" y1=\"1937.9112548828125\" x2=\"2320.0599365234375\" y2=\"1479.9112548828125\" stroke-width=\"2\"/><line stroke=\"#00f\" x1=\"2320.0599365234375\" y1=\"1479.9112548828125\" x2=\"1862.0599365234375\" y2=\"1021.9112548828125\" stroke-width=\"2\"/><line stroke=\"#f00\" x1=\"1862.0599365234375\" y1=\"1021.9112548828125\" x2=\"1862.0599365234375\" y2=\"1937.9112548828125\" stroke-width=\"2\"/><line stroke=\"#f00\" x1=\"1404.0599365234375\" y1=\"1479.9112548828125\" x2=\"2320.0599365234375\" y2=\"1479.9112548828125\" stroke-width=\"2\"/><line stroke=\"#00f\" x1=\"1862.0599365234375\" y1=\"907.9112548828125\" x2=\"1290.0599365234375\" y2=\"1479.9112548828125\" stroke-width=\"2\"/><line stroke=\"#00f\" x1=\"1290.0599365234375\" y1=\"1479.9112548828125\" x2=\"1862.0599365234375\" y2=\"2051.9111328125\" stroke-width=\"2\"/><line stroke=\"#00f\" x1=\"1862.0599365234375\" y1=\"2051.9111328125\" x2=\"2434.0599365234375\" y2=\"1479.9112548828125\" stroke-width=\"2\"/><line stroke=\"#00f\" x1=\"2434.0599365234375\" y1=\"1479.9112548828125\" x2=\"1862.0599365234375\" y2=\"907.9112548828125\" stroke-width=\"2\"/><line stroke=\"#f00\" x1=\"1862.0599365234375\" y1=\"907.9112548828125\" x2=\"1862.0599365234375\" y2=\"2051.9111328125\" stroke-width=\"2\"/><line stroke=\"#f00\" x1=\"1290.0599365234375\" y1=\"1479.9112548828125\" x2=\"2434.0599365234375\" y2=\"1479.9112548828125\" stroke-width=\"2\"/><line stroke=\"#00f\" x1=\"1862.0599365234375\" y1=\"793.9112548828125\" x2=\"1176.0599365234375\" y2=\"1479.9112548828125\" stroke-width=\"2\"/><line stroke=\"#00f\" x1=\"1176.0599365234375\" y1=\"1479.9112548828125\" x2=\"1862.0599365234375\" y2=\"2165.9111328125\" stroke-width=\"2\"/><line stroke=\"#00f\" x1=\"1862.0599365234375\" y1=\"2165.9111328125\" x2=\"2548.0599365234375\" y2=\"1479.9112548828125\" stroke-width=\"2\"/><line stroke=\"#00f\" x1=\"2548.0599365234375\" y1=\"1479.9112548828125\" x2=\"1862.0599365234375\" y2=\"793.9112548828125\" stroke-width=\"2\"/><line stroke=\"#f00\" x1=\"1862.0599365234375\" y1=\"793.9112548828125\" x2=\"1862.0599365234375\" y2=\"2165.9111328125\" stroke-width=\"2\"/><line stroke=\"#f00\" x1=\"1176.0599365234375\" y1=\"1479.9112548828125\" x2=\"2548.0599365234375\" y2=\"1479.9112548828125\" stroke-width=\"2\"/><line stroke=\"#00f\" x1=\"1862.0599365234375\" y1=\"679.9112548828125\" x2=\"1062.0599365234375\" y2=\"1479.9112548828125\" stroke-width=\"2\"/><line stroke=\"#00f\" x1=\"1062.0599365234375\" y1=\"1479.9112548828125\" x2=\"1862.0599365234375\" y2=\"2279.9111328125\" stroke-width=\"2\"/><line stroke=\"#00f\" x1=\"1862.0599365234375\" y1=\"2279.9111328125\" x2=\"2662.0599365234375\" y2=\"1479.9112548828125\" stroke-width=\"2\"/><line stroke=\"#00f\" x1=\"2662.0599365234375\" y1=\"1479.9112548828125\" x2=\"1862.0599365234375\" y2=\"679.9112548828125\" stroke-width=\"2\"/><line stroke=\"#f00\" x1=\"1862.0599365234375\" y1=\"679.9112548828125\" x2=\"1862.0599365234375\" y2=\"2279.9111328125\" stroke-width=\"2\"/><line stroke=\"#f00\" x1=\"1062.0599365234375\" y1=\"1479.9112548828125\" x2=\"2662.0599365234375\" y2=\"1479.9112548828125\" stroke-width=\"2\"/><line stroke=\"#00f\" x1=\"1862.0599365234375\" y1=\"565.9112548828125\" x2=\"948.0599365234375\" y2=\"1479.9112548828125\" stroke-width=\"2\"/><line stroke=\"#00f\" x1=\"948.0599365234375\" y1=\"1479.9112548828125\" x2=\"1862.0599365234375\" y2=\"2393.911376953125\" stroke-width=\"2\"/><line stroke=\"#00f\" x1=\"1862.0599365234375\" y1=\"2393.911376953125\" x2=\"2776.0600585937500\" y2=\"1479.9112548828125\" stroke-width=\"2\"/><line stroke=\"#00f\" x1=\"2776.0600585937500\" y1=\"1479.9112548828125\" x2=\"1862.0599365234375\" y2=\"565.9112548828125\" stroke-width=\"2\"/><line stroke=\"#f00\" x1=\"1862.0599365234375\" y1=\"565.9112548828125\" x2=\"1862.0599365234375\" y2=\"2393.911376953125\" stroke-width=\"2\"/><line stroke=\"#f00\" x1=\"948.0599365234375\" y1=\"1479.9112548828125\" x2=\"2776.0600585937500\" y2=\"1479.9112548828125\" stroke-width=\"2\"/><line stroke=\"#00f\" x1=\"1862.0599365234375\" y1=\"451.9112548828125\" x2=\"834.0599365234375\" y2=\"1479.9112548828125\" stroke-width=\"2\"/><line stroke=\"#00f\" x1=\"834.0599365234375\" y1=\"1479.9112548828125\" x2=\"1862.0599365234375\" y2=\"2507.911376953125\" stroke-width=\"2\"/><line stroke=\"#00f\" x1=\"1862.0599365234375\" y1=\"2507.911376953125\" x2=\"2890.0600585937500\" y2=\"1479.9112548828125\" stroke-width=\"2\"/><line stroke=\"#00f\" x1=\"2890.0600585937500\" y1=\"1479.9112548828125\" x2=\"1862.0599365234375\" y2=\"451.9112548828125\" stroke-width=\"2\"/><line stroke=\"#f00\" x1=\"1862.0599365234375\" y1=\"451.9112548828125\" x2=\"1862.0599365234375\" y2=\"2507.911376953125\" stroke-width=\"2\"/><line stroke=\"#f00\" x1=\"834.0599365234375\" y1=\"1479.9112548828125\" x2=\"2890.0600585937500\" y2=\"1479.9112548828125\" stroke-width=\"2\"/><line stroke=\"#00f\" x1=\"1862.0599365234375\" y1=\"365.8817138671875\" x2=\"748.0286865234375\" y2=\"1479.9112548828125\" stroke-width=\"2\"/><line stroke=\"#00f\" x1=\"748.0286865234375\" y1=\"1479.9112548828125\" x2=\"1862.0599365234375\" y2=\"2593.942871093750\" stroke-width=\"2\"/><line stroke=\"#00f\" x1=\"1862.0599365234375\" y1=\"2593.942871093750\" x2=\"2976.091064453125\" y2=\"1479.9112548828125\" stroke-width=\"2\"/><line stroke=\"#00f\" x1=\"2976.091064453125\" y1=\"1479.9112548828125\" x2=\"1862.0599365234375\" y2=\"365.8817138671875\" stroke-width=\"2\"/><line stroke=\"#f00\" x1=\"1862.0599365234375\" y1=\"365.8817138671875\" x2=\"1862.0599365234375\" y2=\"2593.942871093750\" stroke-width=\"2\"/><line stroke=\"#f00\" x1=\"748.0286865234375\" y1=\"1479.9112548828125\" x2=\"2976.091064453125\" y2=\"1479.9112548828125\" stroke-width=\"2\"/><line stroke=\"#000\" x1=\"1862.0599365234375\" y1=\"365.8817138671875\" x2=\"1862.0599365234375\" y2=\"2229.411376953125\" stroke-width=\"2\"/><line stroke=\"#000\" x1=\"360.5286865234375\" y1=\"1479.9112548828125\" x2=\"2224.060546875000\" y2=\"1479.9112548828125\" stroke-width=\"2\"/></svg>`\n            },\n            {\n                maxFolding: 70,\n                name: \"FTpoly7.svg\", \n                patternType: \"Flower\",\n                svgContent: `<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"-1000 -1000 12000 12000\"><line stroke=\"#000\" opacity=\"1\" x1=\"10000\" y1=\"3660\" x2=\"10000\" y2=\"5000\" stroke-width=\"33.333333333333336\"/><line stroke=\"#000\" opacity=\"1\" x1=\"10000\" y1=\"5000\" x2=\"9999\" y2=\"6339\" stroke-width=\"33.333333333333336\"/><line stroke=\"#000\" opacity=\"1\" x1=\"9999\" y1=\"6339\" x2=\"9330\" y2=\"7500\" stroke-width=\"33.333333333333336\"/><line stroke=\"#000\" opacity=\"1\" x1=\"9330\" y1=\"7500\" x2=\"8660\" y2=\"8660\" stroke-width=\"33.333333333333336\"/><line stroke=\"#000\" opacity=\"1\" x1=\"8660\" y1=\"8660\" x2=\"7499\" y2=\"9330\" stroke-width=\"33.333333333333336\"/><line stroke=\"#000\" opacity=\"1\" x1=\"7499\" y1=\"9330\" x2=\"6339\" y2=\"10000\" stroke-width=\"33.333333333333336\"/><line stroke=\"#000\" opacity=\"1\" x1=\"6339\" y1=\"10000\" x2=\"4999\" y2=\"10000\" stroke-width=\"33.333333333333336\"/><line stroke=\"#000\" opacity=\"1\" x1=\"4999\" y1=\"10000\" x2=\"3660\" y2=\"10000\" stroke-width=\"33.333333333333336\"/><line stroke=\"#000\" opacity=\"1\" x1=\"3660\" y1=\"10000\" x2=\"2500\" y2=\"9330\" stroke-width=\"33.333333333333336\"/><line stroke=\"#000\" opacity=\"1\" x1=\"2500\" y1=\"9330\" x2=\"1339\" y2=\"8660\" stroke-width=\"33.333333333333336\"/><line stroke=\"#000\" opacity=\"1\" x1=\"1339\" y1=\"8660\" x2=\"669\" y2=\"7500\" stroke-width=\"33.333333333333336\"/><line stroke=\"#000\" opacity=\"1\" x1=\"669\" y1=\"7500\" x2=\"0\" y2=\"6339\" stroke-width=\"33.333333333333336\"/><line stroke=\"#000\" opacity=\"1\" x1=\"0\" y1=\"6339\" x2=\"0\" y2=\"5000\" stroke-width=\"33.333333333333336\"/><line stroke=\"#000\" opacity=\"1\" x1=\"0\" y1=\"5000\" x2=\"0\" y2=\"3660\" stroke-width=\"33.333333333333336\"/><line stroke=\"#000\" opacity=\"1\" x1=\"0\" y1=\"3660\" x2=\"669\" y2=\"2500\" stroke-width=\"33.333333333333336\"/><line stroke=\"#000\" opacity=\"1\" x1=\"669\" y1=\"2500\" x2=\"1339\" y2=\"1339\" stroke-width=\"33.333333333333336\"/><line stroke=\"#000\" opacity=\"1\" x1=\"1339\" y1=\"1339\" x2=\"2500\" y2=\"669\" stroke-width=\"33.333333333333336\"/><line stroke=\"#000\" opacity=\"1\" x1=\"2500\" y1=\"669\" x2=\"3660\" y2=\"0\" stroke-width=\"33.333333333333336\"/><line stroke=\"#000\" opacity=\"1\" x1=\"3660\" y1=\"0\" x2=\"5000\" y2=\"0\" stroke-width=\"33.333333333333336\"/><line stroke=\"#000\" opacity=\"1\" x1=\"5000\" y1=\"0\" x2=\"6339\" y2=\"0\" stroke-width=\"33.333333333333336\"/><line stroke=\"#000\" opacity=\"1\" x1=\"6339\" y1=\"0\" x2=\"7500\" y2=\"669\" stroke-width=\"33.333333333333336\"/><line stroke=\"#000\" opacity=\"1\" x1=\"7500\" y1=\"669\" x2=\"8660\" y2=\"1339\" stroke-width=\"33.333333333333336\"/><line stroke=\"#000\" opacity=\"1\" x1=\"8660\" y1=\"1339\" x2=\"9330\" y2=\"2500\" stroke-width=\"33.333333333333336\"/><line stroke=\"#000\" opacity=\"1\" x1=\"9330\" y1=\"2500\" x2=\"10000\" y2=\"3660\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"9226\" y1=\"4999\" x2=\"7679\" y2=\"4999\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"9226\" y1=\"4999\" x2=\"10000\" y2=\"5000\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"8660\" y1=\"2886\" x2=\"7320\" y2=\"3660\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"8660\" y1=\"2886\" x2=\"9330\" y2=\"2500\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"7113\" y1=\"1339\" x2=\"6339\" y2=\"2679\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"7113\" y1=\"1339\" x2=\"7500\" y2=\"669\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"4999\" y1=\"773\" x2=\"4999\" y2=\"2320\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"4999\" y1=\"773\" x2=\"5000\" y2=\"0\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"2886\" y1=\"1339\" x2=\"3660\" y2=\"2679\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"2886\" y1=\"1339\" x2=\"2500\" y2=\"669\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"1339\" y1=\"2886\" x2=\"2679\" y2=\"3660\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"1339\" y1=\"2886\" x2=\"669\" y2=\"2500\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"773\" y1=\"4999\" x2=\"2320\" y2=\"4999\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"773\" y1=\"4999\" x2=\"0\" y2=\"5000\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"1339\" y1=\"7113\" x2=\"2679\" y2=\"6339\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"1339\" y1=\"7113\" x2=\"669\" y2=\"7500\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"2886\" y1=\"8660\" x2=\"3660\" y2=\"7320\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"2886\" y1=\"8660\" x2=\"2500\" y2=\"9330\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"5000\" y1=\"9226\" x2=\"5000\" y2=\"7679\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"5000\" y1=\"9226\" x2=\"4999\" y2=\"10000\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"7113\" y1=\"8660\" x2=\"6339\" y2=\"7320\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"7113\" y1=\"8660\" x2=\"7499\" y2=\"9330\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"8660\" y1=\"7113\" x2=\"7320\" y2=\"6339\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"8660\" y1=\"7113\" x2=\"9330\" y2=\"7500\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"8660\" y1=\"5980\" x2=\"8660\" y2=\"6339\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"8660\" y1=\"7113\" x2=\"7679\" y2=\"7679\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"7679\" y1=\"7679\" x2=\"7500\" y2=\"7990\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"7113\" y1=\"8660\" x2=\"5980\" y2=\"8660\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"5980\" y1=\"8660\" x2=\"5669\" y2=\"8839\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"5000\" y1=\"9226\" x2=\"4019\" y2=\"8660\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"4019\" y1=\"8660\" x2=\"3660\" y2=\"8660\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"2886\" y1=\"8660\" x2=\"2320\" y2=\"7679\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"2320\" y1=\"7679\" x2=\"2009\" y2=\"7500\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"1339\" y1=\"7113\" x2=\"1339\" y2=\"5980\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"1339\" y1=\"5980\" x2=\"1160\" y2=\"5669\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"773\" y1=\"4999\" x2=\"1339\" y2=\"4019\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"1339\" y1=\"4019\" x2=\"1339\" y2=\"3660\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"1339\" y1=\"2886\" x2=\"2320\" y2=\"2320\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"2320\" y1=\"2320\" x2=\"2500\" y2=\"2009\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"2886\" y1=\"1339\" x2=\"4019\" y2=\"1339\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"4019\" y1=\"1339\" x2=\"4330\" y2=\"1160\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"4999\" y1=\"773\" x2=\"5980\" y2=\"1339\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"5980\" y1=\"1339\" x2=\"6339\" y2=\"1339\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"7113\" y1=\"1339\" x2=\"7679\" y2=\"2320\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"7679\" y1=\"2320\" x2=\"7990\" y2=\"2499\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"8660\" y1=\"2886\" x2=\"8660\" y2=\"4019\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"8660\" y1=\"4019\" x2=\"8839\" y2=\"4330\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"9226\" y1=\"4999\" x2=\"8660\" y2=\"5980\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"7113\" y1=\"5566\" x2=\"6339\" y2=\"5358\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"6547\" y1=\"6547\" x2=\"5980\" y2=\"5980\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"5566\" y1=\"7113\" x2=\"5358\" y2=\"6339\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"4433\" y1=\"7113\" x2=\"4641\" y2=\"6339\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"3452\" y1=\"6547\" x2=\"4019\" y2=\"5980\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"2886\" y1=\"5566\" x2=\"3660\" y2=\"5358\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"2886\" y1=\"4433\" x2=\"3660\" y2=\"4641\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"3452\" y1=\"3452\" x2=\"4019\" y2=\"4019\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"4433\" y1=\"2886\" x2=\"4641\" y2=\"3660\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"5566\" y1=\"2886\" x2=\"5358\" y2=\"3660\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"6547\" y1=\"3452\" x2=\"5980\" y2=\"4019\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"7113\" y1=\"4433\" x2=\"6339\" y2=\"4641\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"6961\" y1=\"5000\" x2=\"7009\" y2=\"4820\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"7113\" y1=\"4433\" x2=\"6698\" y2=\"4019\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"6698\" y1=\"4019\" x2=\"6650\" y2=\"3839\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"6547\" y1=\"3452\" x2=\"5980\" y2=\"3301\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"5980\" y1=\"3301\" x2=\"5849\" y2=\"3169\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"5566\" y1=\"2886\" x2=\"5000\" y2=\"3038\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"5000\" y1=\"3038\" x2=\"4820\" y2=\"2990\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"4433\" y1=\"2886\" x2=\"4019\" y2=\"3301\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"4019\" y1=\"3301\" x2=\"3839\" y2=\"3349\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"3452\" y1=\"3452\" x2=\"3301\" y2=\"4019\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"3301\" y1=\"4019\" x2=\"3169\" y2=\"4150\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"2886\" y1=\"4433\" x2=\"3038\" y2=\"5000\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"3038\" y1=\"5000\" x2=\"2990\" y2=\"5179\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"2886\" y1=\"5566\" x2=\"3301\" y2=\"5980\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"3301\" y1=\"5980\" x2=\"3349\" y2=\"6160\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"3452\" y1=\"6547\" x2=\"4019\" y2=\"6698\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"4019\" y1=\"6698\" x2=\"4150\" y2=\"6830\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"4433\" y1=\"7113\" x2=\"5000\" y2=\"6961\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"5000\" y1=\"6961\" x2=\"5179\" y2=\"7009\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"5566\" y1=\"7113\" x2=\"5980\" y2=\"6698\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"5980\" y1=\"6698\" x2=\"6160\" y2=\"6650\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"6547\" y1=\"6547\" x2=\"6698\" y2=\"5980\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"6698\" y1=\"5980\" x2=\"6830\" y2=\"5849\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"7113\" y1=\"5566\" x2=\"6961\" y2=\"5000\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"6132\" y1=\"4999\" x2=\"5717\" y2=\"4999\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"5980\" y1=\"4433\" x2=\"5621\" y2=\"4641\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"5566\" y1=\"4019\" x2=\"5358\" y2=\"4378\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"5000\" y1=\"3867\" x2=\"5000\" y2=\"4282\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"4433\" y1=\"4019\" x2=\"4641\" y2=\"4378\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"4019\" y1=\"4433\" x2=\"4378\" y2=\"4641\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"3867\" y1=\"5000\" x2=\"4282\" y2=\"5000\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"4019\" y1=\"5566\" x2=\"4378\" y2=\"5358\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"4433\" y1=\"5980\" x2=\"4641\" y2=\"5621\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"5000\" y1=\"6132\" x2=\"5000\" y2=\"5717\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"5566\" y1=\"5980\" x2=\"5358\" y2=\"5621\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"5980\" y1=\"5566\" x2=\"5621\" y2=\"5358\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"5980\" y1=\"5262\" x2=\"5980\" y2=\"5358\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"5980\" y1=\"5566\" x2=\"5717\" y2=\"5717\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"5717\" y1=\"5717\" x2=\"5669\" y2=\"5801\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"5566\" y1=\"5980\" x2=\"5262\" y2=\"5980\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"5262\" y1=\"5980\" x2=\"5179\" y2=\"6028\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"5000\" y1=\"6132\" x2=\"4737\" y2=\"5980\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"4737\" y1=\"5980\" x2=\"4641\" y2=\"5980\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"4433\" y1=\"5980\" x2=\"4282\" y2=\"5717\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"4282\" y1=\"5717\" x2=\"4198\" y2=\"5669\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"4019\" y1=\"5566\" x2=\"4019\" y2=\"5262\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"4019\" y1=\"5262\" x2=\"3971\" y2=\"5179\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"3867\" y1=\"5000\" x2=\"4019\" y2=\"4737\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"4019\" y1=\"4737\" x2=\"4019\" y2=\"4641\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"4019\" y1=\"4433\" x2=\"4282\" y2=\"4282\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"4282\" y1=\"4282\" x2=\"4330\" y2=\"4198\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"4433\" y1=\"4019\" x2=\"4737\" y2=\"4019\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"4737\" y1=\"4019\" x2=\"4820\" y2=\"3971\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"5000\" y1=\"3867\" x2=\"5262\" y2=\"4019\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"5262\" y1=\"4019\" x2=\"5358\" y2=\"4019\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"5566\" y1=\"4019\" x2=\"5717\" y2=\"4282\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"5717\" y1=\"4282\" x2=\"5801\" y2=\"4330\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"5980\" y1=\"4433\" x2=\"5980\" y2=\"4737\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"5980\" y1=\"4737\" x2=\"6028\" y2=\"4820\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"6132\" y1=\"4999\" x2=\"5980\" y2=\"5262\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"5566\" y1=\"5151\" x2=\"5358\" y2=\"5096\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"5414\" y1=\"5414\" x2=\"5262\" y2=\"5262\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"5151\" y1=\"5566\" x2=\"5096\" y2=\"5358\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"4848\" y1=\"5566\" x2=\"4903\" y2=\"5358\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"4585\" y1=\"5414\" x2=\"4737\" y2=\"5262\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"4433\" y1=\"5151\" x2=\"4641\" y2=\"5096\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"4433\" y1=\"4848\" x2=\"4641\" y2=\"4903\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"4585\" y1=\"4585\" x2=\"4737\" y2=\"4737\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"4848\" y1=\"4433\" x2=\"4903\" y2=\"4641\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"5151\" y1=\"4433\" x2=\"5096\" y2=\"4641\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"5414\" y1=\"4585\" x2=\"5262\" y2=\"4737\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"5566\" y1=\"4848\" x2=\"5358\" y2=\"4903\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"5525\" y1=\"5000\" x2=\"5538\" y2=\"4951\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"5566\" y1=\"4848\" x2=\"5455\" y2=\"4737\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"5455\" y1=\"4737\" x2=\"5442\" y2=\"4689\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"5414\" y1=\"4585\" x2=\"5262\" y2=\"4544\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"5262\" y1=\"4544\" x2=\"5227\" y2=\"4509\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"5151\" y1=\"4433\" x2=\"5000\" y2=\"4474\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"5000\" y1=\"4474\" x2=\"4951\" y2=\"4461\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"4848\" y1=\"4433\" x2=\"4737\" y2=\"4544\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"4737\" y1=\"4544\" x2=\"4689\" y2=\"4557\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"4585\" y1=\"4585\" x2=\"4544\" y2=\"4737\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"4544\" y1=\"4737\" x2=\"4509\" y2=\"4772\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"4433\" y1=\"4848\" x2=\"4474\" y2=\"5000\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"4474\" y1=\"5000\" x2=\"4461\" y2=\"5048\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"4433\" y1=\"5151\" x2=\"4544\" y2=\"5262\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"4544\" y1=\"5262\" x2=\"4557\" y2=\"5310\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"4585\" y1=\"5414\" x2=\"4737\" y2=\"5455\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"4737\" y1=\"5455\" x2=\"4772\" y2=\"5490\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"4848\" y1=\"5566\" x2=\"5000\" y2=\"5525\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"5000\" y1=\"5525\" x2=\"5048\" y2=\"5538\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"5151\" y1=\"5566\" x2=\"5262\" y2=\"5455\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"5262\" y1=\"5455\" x2=\"5310\" y2=\"5442\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"5414\" y1=\"5414\" x2=\"5455\" y2=\"5262\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"5455\" y1=\"5262\" x2=\"5490\" y2=\"5227\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"5566\" y1=\"5151\" x2=\"5525\" y2=\"5000\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"5303\" y1=\"4999\" x2=\"5192\" y2=\"5000\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"5262\" y1=\"4848\" x2=\"5166\" y2=\"4903\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"5151\" y1=\"4737\" x2=\"5096\" y2=\"4833\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"5000\" y1=\"4696\" x2=\"5000\" y2=\"4807\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"4848\" y1=\"4737\" x2=\"4903\" y2=\"4833\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"4737\" y1=\"4848\" x2=\"4833\" y2=\"4903\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"4696\" y1=\"5000\" x2=\"4807\" y2=\"5000\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"4737\" y1=\"5151\" x2=\"4833\" y2=\"5096\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"4848\" y1=\"5262\" x2=\"4903\" y2=\"5166\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"5000\" y1=\"5303\" x2=\"5000\" y2=\"5192\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"5151\" y1=\"5262\" x2=\"5096\" y2=\"5166\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"5262\" y1=\"5151\" x2=\"5166\" y2=\"5096\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"5262\" y1=\"5070\" x2=\"5262\" y2=\"5096\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"5262\" y1=\"5151\" x2=\"5192\" y2=\"5192\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"5192\" y1=\"5192\" x2=\"5179\" y2=\"5214\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"5151\" y1=\"5262\" x2=\"5070\" y2=\"5262\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"5070\" y1=\"5262\" x2=\"5048\" y2=\"5275\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"5000\" y1=\"5303\" x2=\"4929\" y2=\"5262\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"4929\" y1=\"5262\" x2=\"4903\" y2=\"5262\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"4848\" y1=\"5262\" x2=\"4807\" y2=\"5192\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"4807\" y1=\"5192\" x2=\"4785\" y2=\"5179\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"4737\" y1=\"5151\" x2=\"4737\" y2=\"5070\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"4737\" y1=\"5070\" x2=\"4724\" y2=\"5048\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"4696\" y1=\"5000\" x2=\"4737\" y2=\"4929\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"4737\" y1=\"4929\" x2=\"4737\" y2=\"4903\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"4737\" y1=\"4848\" x2=\"4807\" y2=\"4807\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"4807\" y1=\"4807\" x2=\"4820\" y2=\"4785\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"4848\" y1=\"4737\" x2=\"4929\" y2=\"4737\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"4929\" y1=\"4737\" x2=\"4951\" y2=\"4724\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"5000\" y1=\"4696\" x2=\"5070\" y2=\"4737\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"5070\" y1=\"4737\" x2=\"5096\" y2=\"4737\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"5151\" y1=\"4737\" x2=\"5192\" y2=\"4807\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"5192\" y1=\"4807\" x2=\"5214\" y2=\"4820\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"5262\" y1=\"4848\" x2=\"5262\" y2=\"4929\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"5262\" y1=\"4929\" x2=\"5275\" y2=\"4951\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"5303\" y1=\"4999\" x2=\"5262\" y2=\"5070\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"5151\" y1=\"5040\" x2=\"5096\" y2=\"5025\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"5111\" y1=\"5111\" x2=\"5070\" y2=\"5070\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"5040\" y1=\"5151\" x2=\"5025\" y2=\"5096\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"4959\" y1=\"5151\" x2=\"4974\" y2=\"5096\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"4888\" y1=\"5111\" x2=\"4929\" y2=\"5070\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"4848\" y1=\"5040\" x2=\"4903\" y2=\"5025\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"4848\" y1=\"4959\" x2=\"4903\" y2=\"4974\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"4888\" y1=\"4888\" x2=\"4929\" y2=\"4929\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"4959\" y1=\"4848\" x2=\"4974\" y2=\"4903\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"5040\" y1=\"4848\" x2=\"5025\" y2=\"4903\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"5111\" y1=\"4888\" x2=\"5070\" y2=\"4929\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"5151\" y1=\"4959\" x2=\"5096\" y2=\"4974\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"5140\" y1=\"5000\" x2=\"5144\" y2=\"4987\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"5151\" y1=\"4959\" x2=\"5121\" y2=\"4929\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"5121\" y1=\"4929\" x2=\"5118\" y2=\"4916\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"5111\" y1=\"4888\" x2=\"5070\" y2=\"4878\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"5070\" y1=\"4878\" x2=\"5060\" y2=\"4868\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"5040\" y1=\"4848\" x2=\"5000\" y2=\"4859\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"5000\" y1=\"4859\" x2=\"4987\" y2=\"4855\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"4959\" y1=\"4848\" x2=\"4929\" y2=\"4878\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"4929\" y1=\"4878\" x2=\"4916\" y2=\"4881\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"4888\" y1=\"4888\" x2=\"4878\" y2=\"4929\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"4878\" y1=\"4929\" x2=\"4868\" y2=\"4939\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"4848\" y1=\"4959\" x2=\"4859\" y2=\"5000\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"4859\" y1=\"5000\" x2=\"4855\" y2=\"5012\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"4848\" y1=\"5040\" x2=\"4878\" y2=\"5070\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"4878\" y1=\"5070\" x2=\"4881\" y2=\"5083\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"4888\" y1=\"5111\" x2=\"4929\" y2=\"5121\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"4929\" y1=\"5121\" x2=\"4939\" y2=\"5131\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"4959\" y1=\"5151\" x2=\"5000\" y2=\"5140\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"5000\" y1=\"5140\" x2=\"5012\" y2=\"5144\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"5040\" y1=\"5151\" x2=\"5070\" y2=\"5121\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"5070\" y1=\"5121\" x2=\"5083\" y2=\"5118\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"5111\" y1=\"5111\" x2=\"5121\" y2=\"5070\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"5121\" y1=\"5070\" x2=\"5131\" y2=\"5060\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"5151\" y1=\"5040\" x2=\"5140\" y2=\"5000\" stroke-width=\"33.333333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"8839\" y1=\"4330\" x2=\"7679\" y2=\"4999\" stroke-width=\"33.333333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"8839\" y1=\"4330\" x2=\"10000\" y2=\"3660\" stroke-width=\"33.333333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"7990\" y1=\"2499\" x2=\"7320\" y2=\"3660\" stroke-width=\"33.333333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"7990\" y1=\"2499\" x2=\"8660\" y2=\"1339\" stroke-width=\"33.333333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"6339\" y1=\"1339\" x2=\"6339\" y2=\"2679\" stroke-width=\"33.333333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"6339\" y1=\"1339\" x2=\"6339\" y2=\"0\" stroke-width=\"33.333333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"4330\" y1=\"1160\" x2=\"4999\" y2=\"2320\" stroke-width=\"33.333333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"4330\" y1=\"1160\" x2=\"3660\" y2=\"0\" stroke-width=\"33.333333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"2500\" y1=\"2009\" x2=\"3660\" y2=\"2679\" stroke-width=\"33.333333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"2500\" y1=\"2009\" x2=\"1339\" y2=\"1339\" stroke-width=\"33.333333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"1339\" y1=\"3660\" x2=\"2679\" y2=\"3660\" stroke-width=\"33.333333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"1339\" y1=\"3660\" x2=\"0\" y2=\"3660\" stroke-width=\"33.333333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"1160\" y1=\"5669\" x2=\"2320\" y2=\"4999\" stroke-width=\"33.333333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"1160\" y1=\"5669\" x2=\"0\" y2=\"6339\" stroke-width=\"33.333333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"2009\" y1=\"7500\" x2=\"2679\" y2=\"6339\" stroke-width=\"33.333333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"2009\" y1=\"7500\" x2=\"1339\" y2=\"8660\" stroke-width=\"33.333333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"3660\" y1=\"8660\" x2=\"3660\" y2=\"7320\" stroke-width=\"33.333333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"3660\" y1=\"8660\" x2=\"3660\" y2=\"10000\" stroke-width=\"33.333333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"5669\" y1=\"8839\" x2=\"5000\" y2=\"7679\" stroke-width=\"33.333333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"5669\" y1=\"8839\" x2=\"6339\" y2=\"10000\" stroke-width=\"33.333333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"7500\" y1=\"7990\" x2=\"6339\" y2=\"7320\" stroke-width=\"33.333333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"7500\" y1=\"7990\" x2=\"8660\" y2=\"8660\" stroke-width=\"33.333333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"8660\" y1=\"6339\" x2=\"7320\" y2=\"6339\" stroke-width=\"33.333333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"8660\" y1=\"6339\" x2=\"9999\" y2=\"6339\" stroke-width=\"33.333333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"8660\" y1=\"6339\" x2=\"8660\" y2=\"7113\" stroke-width=\"33.333333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"7500\" y1=\"7990\" x2=\"7113\" y2=\"8660\" stroke-width=\"33.333333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"5669\" y1=\"8839\" x2=\"5000\" y2=\"9226\" stroke-width=\"33.333333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"3660\" y1=\"8660\" x2=\"2886\" y2=\"8660\" stroke-width=\"33.333333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"2009\" y1=\"7500\" x2=\"1339\" y2=\"7113\" stroke-width=\"33.333333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"1160\" y1=\"5669\" x2=\"773\" y2=\"4999\" stroke-width=\"33.333333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"1339\" y1=\"3660\" x2=\"1339\" y2=\"2886\" stroke-width=\"33.333333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"2500\" y1=\"2009\" x2=\"2886\" y2=\"1339\" stroke-width=\"33.333333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"4330\" y1=\"1160\" x2=\"4999\" y2=\"773\" stroke-width=\"33.333333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"6339\" y1=\"1339\" x2=\"7113\" y2=\"1339\" stroke-width=\"33.333333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"7990\" y1=\"2499\" x2=\"8660\" y2=\"2886\" stroke-width=\"33.333333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"8839\" y1=\"4330\" x2=\"9226\" y2=\"4999\" stroke-width=\"33.333333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"8660\" y1=\"5980\" x2=\"7679\" y2=\"4999\" stroke-width=\"33.333333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"6830\" y1=\"5849\" x2=\"6339\" y2=\"5358\" stroke-width=\"33.333333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"6830\" y1=\"5849\" x2=\"7320\" y2=\"6339\" stroke-width=\"33.333333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"7679\" y1=\"7679\" x2=\"7320\" y2=\"6339\" stroke-width=\"33.333333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"6160\" y1=\"6650\" x2=\"5980\" y2=\"5980\" stroke-width=\"33.333333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"6160\" y1=\"6650\" x2=\"6339\" y2=\"7320\" stroke-width=\"33.333333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"5980\" y1=\"8660\" x2=\"6339\" y2=\"7320\" stroke-width=\"33.333333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"5179\" y1=\"7009\" x2=\"5358\" y2=\"6339\" stroke-width=\"33.333333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"5179\" y1=\"7009\" x2=\"5000\" y2=\"7679\" stroke-width=\"33.333333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"4019\" y1=\"8660\" x2=\"5000\" y2=\"7679\" stroke-width=\"33.333333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"4150\" y1=\"6830\" x2=\"4641\" y2=\"6339\" stroke-width=\"33.333333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"4150\" y1=\"6830\" x2=\"3660\" y2=\"7320\" stroke-width=\"33.333333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"2320\" y1=\"7679\" x2=\"3660\" y2=\"7320\" stroke-width=\"33.333333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"3349\" y1=\"6160\" x2=\"4019\" y2=\"5980\" stroke-width=\"33.333333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"3349\" y1=\"6160\" x2=\"2679\" y2=\"6339\" stroke-width=\"33.333333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"1339\" y1=\"5980\" x2=\"2679\" y2=\"6339\" stroke-width=\"33.333333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"2990\" y1=\"5179\" x2=\"3660\" y2=\"5358\" stroke-width=\"33.333333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"2990\" y1=\"5179\" x2=\"2320\" y2=\"4999\" stroke-width=\"33.333333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"1339\" y1=\"4019\" x2=\"2320\" y2=\"4999\" stroke-width=\"33.333333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"3169\" y1=\"4150\" x2=\"3660\" y2=\"4641\" stroke-width=\"33.333333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"3169\" y1=\"4150\" x2=\"2679\" y2=\"3660\" stroke-width=\"33.333333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"2320\" y1=\"2320\" x2=\"2679\" y2=\"3660\" stroke-width=\"33.333333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"3839\" y1=\"3349\" x2=\"4019\" y2=\"4019\" stroke-width=\"33.333333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"3839\" y1=\"3349\" x2=\"3660\" y2=\"2679\" stroke-width=\"33.333333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"4019\" y1=\"1339\" x2=\"3660\" y2=\"2679\" stroke-width=\"33.333333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"4820\" y1=\"2990\" x2=\"4641\" y2=\"3660\" stroke-width=\"33.333333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"4820\" y1=\"2990\" x2=\"4999\" y2=\"2320\" stroke-width=\"33.333333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"5980\" y1=\"1339\" x2=\"4999\" y2=\"2320\" stroke-width=\"33.333333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"5849\" y1=\"3169\" x2=\"5358\" y2=\"3660\" stroke-width=\"33.333333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"5849\" y1=\"3169\" x2=\"6339\" y2=\"2679\" stroke-width=\"33.333333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"7679\" y1=\"2320\" x2=\"6339\" y2=\"2679\" stroke-width=\"33.333333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"6650\" y1=\"3839\" x2=\"5980\" y2=\"4019\" stroke-width=\"33.333333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"6650\" y1=\"3839\" x2=\"7320\" y2=\"3660\" stroke-width=\"33.333333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"8660\" y1=\"4019\" x2=\"7320\" y2=\"3660\" stroke-width=\"33.333333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"7009\" y1=\"4820\" x2=\"6339\" y2=\"4641\" stroke-width=\"33.333333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"7009\" y1=\"4820\" x2=\"7679\" y2=\"4999\" stroke-width=\"33.333333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"7009\" y1=\"4820\" x2=\"7113\" y2=\"4433\" stroke-width=\"33.333333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"6650\" y1=\"3839\" x2=\"6547\" y2=\"3452\" stroke-width=\"33.333333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"5849\" y1=\"3169\" x2=\"5566\" y2=\"2886\" stroke-width=\"33.333333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"4820\" y1=\"2990\" x2=\"4433\" y2=\"2886\" stroke-width=\"33.333333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"3839\" y1=\"3349\" x2=\"3452\" y2=\"3452\" stroke-width=\"33.333333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"3169\" y1=\"4150\" x2=\"2886\" y2=\"4433\" stroke-width=\"33.333333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"2990\" y1=\"5179\" x2=\"2886\" y2=\"5566\" stroke-width=\"33.333333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"3349\" y1=\"6160\" x2=\"3452\" y2=\"6547\" stroke-width=\"33.333333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"4150\" y1=\"6830\" x2=\"4433\" y2=\"7113\" stroke-width=\"33.333333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"5179\" y1=\"7009\" x2=\"5566\" y2=\"7113\" stroke-width=\"33.333333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"6160\" y1=\"6650\" x2=\"6547\" y2=\"6547\" stroke-width=\"33.333333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"6830\" y1=\"5849\" x2=\"7113\" y2=\"5566\" stroke-width=\"33.333333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"6961\" y1=\"5000\" x2=\"6339\" y2=\"5358\" stroke-width=\"33.333333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"6028\" y1=\"4820\" x2=\"5717\" y2=\"4999\" stroke-width=\"33.333333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"6028\" y1=\"4820\" x2=\"6339\" y2=\"4641\" stroke-width=\"33.333333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"6698\" y1=\"4019\" x2=\"6339\" y2=\"4641\" stroke-width=\"33.333333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"5801\" y1=\"4330\" x2=\"5621\" y2=\"4641\" stroke-width=\"33.333333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"5801\" y1=\"4330\" x2=\"5980\" y2=\"4019\" stroke-width=\"33.333333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"5980\" y1=\"3301\" x2=\"5980\" y2=\"4019\" stroke-width=\"33.333333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"5358\" y1=\"4019\" x2=\"5358\" y2=\"4378\" stroke-width=\"33.333333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"5358\" y1=\"4019\" x2=\"5358\" y2=\"3660\" stroke-width=\"33.333333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"5000\" y1=\"3038\" x2=\"5358\" y2=\"3660\" stroke-width=\"33.333333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"4820\" y1=\"3971\" x2=\"5000\" y2=\"4282\" stroke-width=\"33.333333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"4820\" y1=\"3971\" x2=\"4641\" y2=\"3660\" stroke-width=\"33.333333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"4019\" y1=\"3301\" x2=\"4641\" y2=\"3660\" stroke-width=\"33.333333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"4330\" y1=\"4198\" x2=\"4641\" y2=\"4378\" stroke-width=\"33.333333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"4330\" y1=\"4198\" x2=\"4019\" y2=\"4019\" stroke-width=\"33.333333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"3301\" y1=\"4019\" x2=\"4019\" y2=\"4019\" stroke-width=\"33.333333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"4019\" y1=\"4641\" x2=\"4378\" y2=\"4641\" stroke-width=\"33.333333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"4019\" y1=\"4641\" x2=\"3660\" y2=\"4641\" stroke-width=\"33.333333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"3038\" y1=\"5000\" x2=\"3660\" y2=\"4641\" stroke-width=\"33.333333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"3971\" y1=\"5179\" x2=\"4282\" y2=\"5000\" stroke-width=\"33.333333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"3971\" y1=\"5179\" x2=\"3660\" y2=\"5358\" stroke-width=\"33.333333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"3301\" y1=\"5980\" x2=\"3660\" y2=\"5358\" stroke-width=\"33.333333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"4198\" y1=\"5669\" x2=\"4378\" y2=\"5358\" stroke-width=\"33.333333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"4198\" y1=\"5669\" x2=\"4019\" y2=\"5980\" stroke-width=\"33.333333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"4019\" y1=\"6698\" x2=\"4019\" y2=\"5980\" stroke-width=\"33.333333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"4641\" y1=\"5980\" x2=\"4641\" y2=\"5621\" stroke-width=\"33.333333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"4641\" y1=\"5980\" x2=\"4641\" y2=\"6339\" stroke-width=\"33.333333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"5000\" y1=\"6961\" x2=\"4641\" y2=\"6339\" stroke-width=\"33.333333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"5179\" y1=\"6028\" x2=\"5000\" y2=\"5717\" stroke-width=\"33.333333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"5179\" y1=\"6028\" x2=\"5358\" y2=\"6339\" stroke-width=\"33.333333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"5980\" y1=\"6698\" x2=\"5358\" y2=\"6339\" stroke-width=\"33.333333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"5669\" y1=\"5801\" x2=\"5358\" y2=\"5621\" stroke-width=\"33.333333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"5669\" y1=\"5801\" x2=\"5980\" y2=\"5980\" stroke-width=\"33.333333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"6698\" y1=\"5980\" x2=\"5980\" y2=\"5980\" stroke-width=\"33.333333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"5980\" y1=\"5358\" x2=\"5621\" y2=\"5358\" stroke-width=\"33.333333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"5980\" y1=\"5358\" x2=\"6339\" y2=\"5358\" stroke-width=\"33.333333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"5980\" y1=\"5358\" x2=\"5980\" y2=\"5566\" stroke-width=\"33.333333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"5669\" y1=\"5801\" x2=\"5566\" y2=\"5980\" stroke-width=\"33.333333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"5179\" y1=\"6028\" x2=\"5000\" y2=\"6132\" stroke-width=\"33.333333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"4641\" y1=\"5980\" x2=\"4433\" y2=\"5980\" stroke-width=\"33.333333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"4198\" y1=\"5669\" x2=\"4019\" y2=\"5566\" stroke-width=\"33.333333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"3971\" y1=\"5179\" x2=\"3867\" y2=\"5000\" stroke-width=\"33.333333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"4019\" y1=\"4641\" x2=\"4019\" y2=\"4433\" stroke-width=\"33.333333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"4330\" y1=\"4198\" x2=\"4433\" y2=\"4019\" stroke-width=\"33.333333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"4820\" y1=\"3971\" x2=\"5000\" y2=\"3867\" stroke-width=\"33.333333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"5358\" y1=\"4019\" x2=\"5566\" y2=\"4019\" stroke-width=\"33.333333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"5801\" y1=\"4330\" x2=\"5980\" y2=\"4433\" stroke-width=\"33.333333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"6028\" y1=\"4820\" x2=\"6132\" y2=\"4999\" stroke-width=\"33.333333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"5980\" y1=\"5262\" x2=\"5717\" y2=\"4999\" stroke-width=\"33.333333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"5490\" y1=\"5227\" x2=\"5358\" y2=\"5096\" stroke-width=\"33.333333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"5490\" y1=\"5227\" x2=\"5621\" y2=\"5358\" stroke-width=\"33.333333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"5717\" y1=\"5717\" x2=\"5621\" y2=\"5358\" stroke-width=\"33.333333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"5310\" y1=\"5442\" x2=\"5262\" y2=\"5262\" stroke-width=\"33.333333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"5310\" y1=\"5442\" x2=\"5358\" y2=\"5621\" stroke-width=\"33.333333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"5262\" y1=\"5980\" x2=\"5358\" y2=\"5621\" stroke-width=\"33.333333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"5048\" y1=\"5538\" x2=\"5096\" y2=\"5358\" stroke-width=\"33.333333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"5048\" y1=\"5538\" x2=\"5000\" y2=\"5717\" stroke-width=\"33.333333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"4737\" y1=\"5980\" x2=\"5000\" y2=\"5717\" stroke-width=\"33.333333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"4772\" y1=\"5490\" x2=\"4903\" y2=\"5358\" stroke-width=\"33.333333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"4772\" y1=\"5490\" x2=\"4641\" y2=\"5621\" stroke-width=\"33.333333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"4282\" y1=\"5717\" x2=\"4641\" y2=\"5621\" stroke-width=\"33.333333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"4557\" y1=\"5310\" x2=\"4737\" y2=\"5262\" stroke-width=\"33.333333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"4557\" y1=\"5310\" x2=\"4378\" y2=\"5358\" stroke-width=\"33.333333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"4019\" y1=\"5262\" x2=\"4378\" y2=\"5358\" stroke-width=\"33.333333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"4461\" y1=\"5048\" x2=\"4641\" y2=\"5096\" stroke-width=\"33.333333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"4461\" y1=\"5048\" x2=\"4282\" y2=\"5000\" stroke-width=\"33.333333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"4019\" y1=\"4737\" x2=\"4282\" y2=\"5000\" stroke-width=\"33.333333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"4509\" y1=\"4772\" x2=\"4641\" y2=\"4903\" stroke-width=\"33.333333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"4509\" y1=\"4772\" x2=\"4378\" y2=\"4641\" stroke-width=\"33.333333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"4282\" y1=\"4282\" x2=\"4378\" y2=\"4641\" stroke-width=\"33.333333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"4689\" y1=\"4557\" x2=\"4737\" y2=\"4737\" stroke-width=\"33.333333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"4689\" y1=\"4557\" x2=\"4641\" y2=\"4378\" stroke-width=\"33.333333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"4737\" y1=\"4019\" x2=\"4641\" y2=\"4378\" stroke-width=\"33.333333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"4951\" y1=\"4461\" x2=\"4903\" y2=\"4641\" stroke-width=\"33.333333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"4951\" y1=\"4461\" x2=\"5000\" y2=\"4282\" stroke-width=\"33.333333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"5262\" y1=\"4019\" x2=\"5000\" y2=\"4282\" stroke-width=\"33.333333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"5227\" y1=\"4509\" x2=\"5096\" y2=\"4641\" stroke-width=\"33.333333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"5227\" y1=\"4509\" x2=\"5358\" y2=\"4378\" stroke-width=\"33.333333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"5717\" y1=\"4282\" x2=\"5358\" y2=\"4378\" stroke-width=\"33.333333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"5442\" y1=\"4689\" x2=\"5262\" y2=\"4737\" stroke-width=\"33.333333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"5442\" y1=\"4689\" x2=\"5621\" y2=\"4641\" stroke-width=\"33.333333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"5980\" y1=\"4737\" x2=\"5621\" y2=\"4641\" stroke-width=\"33.333333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"5538\" y1=\"4951\" x2=\"5358\" y2=\"4903\" stroke-width=\"33.333333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"5538\" y1=\"4951\" x2=\"5717\" y2=\"4999\" stroke-width=\"33.333333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"5538\" y1=\"4951\" x2=\"5566\" y2=\"4848\" stroke-width=\"33.333333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"5442\" y1=\"4689\" x2=\"5414\" y2=\"4585\" stroke-width=\"33.333333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"5227\" y1=\"4509\" x2=\"5151\" y2=\"4433\" stroke-width=\"33.333333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"4951\" y1=\"4461\" x2=\"4848\" y2=\"4433\" stroke-width=\"33.333333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"4689\" y1=\"4557\" x2=\"4585\" y2=\"4585\" stroke-width=\"33.333333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"4509\" y1=\"4772\" x2=\"4433\" y2=\"4848\" stroke-width=\"33.333333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"4461\" y1=\"5048\" x2=\"4433\" y2=\"5151\" stroke-width=\"33.333333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"4557\" y1=\"5310\" x2=\"4585\" y2=\"5414\" stroke-width=\"33.333333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"4772\" y1=\"5490\" x2=\"4848\" y2=\"5566\" stroke-width=\"33.333333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"5048\" y1=\"5538\" x2=\"5151\" y2=\"5566\" stroke-width=\"33.333333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"5310\" y1=\"5442\" x2=\"5414\" y2=\"5414\" stroke-width=\"33.333333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"5490\" y1=\"5227\" x2=\"5566\" y2=\"5151\" stroke-width=\"33.333333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"5525\" y1=\"5000\" x2=\"5358\" y2=\"5096\" stroke-width=\"33.333333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"5275\" y1=\"4951\" x2=\"5192\" y2=\"5000\" stroke-width=\"33.333333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"5275\" y1=\"4951\" x2=\"5358\" y2=\"4903\" stroke-width=\"33.333333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"5455\" y1=\"4737\" x2=\"5358\" y2=\"4903\" stroke-width=\"33.333333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"5214\" y1=\"4820\" x2=\"5166\" y2=\"4903\" stroke-width=\"33.333333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"5214\" y1=\"4820\" x2=\"5262\" y2=\"4737\" stroke-width=\"33.333333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"5262\" y1=\"4544\" x2=\"5262\" y2=\"4737\" stroke-width=\"33.333333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"5096\" y1=\"4737\" x2=\"5096\" y2=\"4833\" stroke-width=\"33.333333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"5096\" y1=\"4737\" x2=\"5096\" y2=\"4641\" stroke-width=\"33.333333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"5000\" y1=\"4474\" x2=\"5096\" y2=\"4641\" stroke-width=\"33.333333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"4951\" y1=\"4724\" x2=\"5000\" y2=\"4807\" stroke-width=\"33.333333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"4951\" y1=\"4724\" x2=\"4903\" y2=\"4641\" stroke-width=\"33.333333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"4737\" y1=\"4544\" x2=\"4903\" y2=\"4641\" stroke-width=\"33.333333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"4820\" y1=\"4785\" x2=\"4903\" y2=\"4833\" stroke-width=\"33.333333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"4820\" y1=\"4785\" x2=\"4737\" y2=\"4737\" stroke-width=\"33.333333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"4544\" y1=\"4737\" x2=\"4737\" y2=\"4737\" stroke-width=\"33.333333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"4737\" y1=\"4903\" x2=\"4833\" y2=\"4903\" stroke-width=\"33.333333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"4737\" y1=\"4903\" x2=\"4641\" y2=\"4903\" stroke-width=\"33.333333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"4474\" y1=\"5000\" x2=\"4641\" y2=\"4903\" stroke-width=\"33.333333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"4724\" y1=\"5048\" x2=\"4807\" y2=\"5000\" stroke-width=\"33.333333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"4724\" y1=\"5048\" x2=\"4641\" y2=\"5096\" stroke-width=\"33.333333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"4544\" y1=\"5262\" x2=\"4641\" y2=\"5096\" stroke-width=\"33.333333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"4785\" y1=\"5179\" x2=\"4833\" y2=\"5096\" stroke-width=\"33.333333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"4785\" y1=\"5179\" x2=\"4737\" y2=\"5262\" stroke-width=\"33.333333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"4737\" y1=\"5455\" x2=\"4737\" y2=\"5262\" stroke-width=\"33.333333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"4903\" y1=\"5262\" x2=\"4903\" y2=\"5166\" stroke-width=\"33.333333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"4903\" y1=\"5262\" x2=\"4903\" y2=\"5358\" stroke-width=\"33.333333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"5000\" y1=\"5525\" x2=\"4903\" y2=\"5358\" stroke-width=\"33.333333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"5048\" y1=\"5275\" x2=\"5000\" y2=\"5192\" stroke-width=\"33.333333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"5048\" y1=\"5275\" x2=\"5096\" y2=\"5358\" stroke-width=\"33.333333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"5262\" y1=\"5455\" x2=\"5096\" y2=\"5358\" stroke-width=\"33.333333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"5179\" y1=\"5214\" x2=\"5096\" y2=\"5166\" stroke-width=\"33.333333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"5179\" y1=\"5214\" x2=\"5262\" y2=\"5262\" stroke-width=\"33.333333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"5455\" y1=\"5262\" x2=\"5262\" y2=\"5262\" stroke-width=\"33.333333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"5262\" y1=\"5096\" x2=\"5166\" y2=\"5096\" stroke-width=\"33.333333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"5262\" y1=\"5096\" x2=\"5358\" y2=\"5096\" stroke-width=\"33.333333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"5262\" y1=\"5096\" x2=\"5262\" y2=\"5151\" stroke-width=\"33.333333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"5179\" y1=\"5214\" x2=\"5151\" y2=\"5262\" stroke-width=\"33.333333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"5048\" y1=\"5275\" x2=\"5000\" y2=\"5303\" stroke-width=\"33.333333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"4903\" y1=\"5262\" x2=\"4848\" y2=\"5262\" stroke-width=\"33.333333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"4785\" y1=\"5179\" x2=\"4737\" y2=\"5151\" stroke-width=\"33.333333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"4724\" y1=\"5048\" x2=\"4696\" y2=\"5000\" stroke-width=\"33.333333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"4737\" y1=\"4903\" x2=\"4737\" y2=\"4848\" stroke-width=\"33.333333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"4820\" y1=\"4785\" x2=\"4848\" y2=\"4737\" stroke-width=\"33.333333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"4951\" y1=\"4724\" x2=\"5000\" y2=\"4696\" stroke-width=\"33.333333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"5096\" y1=\"4737\" x2=\"5151\" y2=\"4737\" stroke-width=\"33.333333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"5214\" y1=\"4820\" x2=\"5262\" y2=\"4848\" stroke-width=\"33.333333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"5275\" y1=\"4951\" x2=\"5303\" y2=\"4999\" stroke-width=\"33.333333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"5262\" y1=\"5070\" x2=\"5192\" y2=\"5000\" stroke-width=\"33.333333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"5131\" y1=\"5060\" x2=\"5096\" y2=\"5025\" stroke-width=\"33.333333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"5131\" y1=\"5060\" x2=\"5166\" y2=\"5096\" stroke-width=\"33.333333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"5192\" y1=\"5192\" x2=\"5166\" y2=\"5096\" stroke-width=\"33.333333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"5083\" y1=\"5118\" x2=\"5070\" y2=\"5070\" stroke-width=\"33.333333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"5083\" y1=\"5118\" x2=\"5096\" y2=\"5166\" stroke-width=\"33.333333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"5070\" y1=\"5262\" x2=\"5096\" y2=\"5166\" stroke-width=\"33.333333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"5012\" y1=\"5144\" x2=\"5025\" y2=\"5096\" stroke-width=\"33.333333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"5012\" y1=\"5144\" x2=\"5000\" y2=\"5192\" stroke-width=\"33.333333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"4929\" y1=\"5262\" x2=\"5000\" y2=\"5192\" stroke-width=\"33.333333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"4939\" y1=\"5131\" x2=\"4974\" y2=\"5096\" stroke-width=\"33.333333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"4939\" y1=\"5131\" x2=\"4903\" y2=\"5166\" stroke-width=\"33.333333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"4807\" y1=\"5192\" x2=\"4903\" y2=\"5166\" stroke-width=\"33.333333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"4881\" y1=\"5083\" x2=\"4929\" y2=\"5070\" stroke-width=\"33.333333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"4881\" y1=\"5083\" x2=\"4833\" y2=\"5096\" stroke-width=\"33.333333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"4737\" y1=\"5070\" x2=\"4833\" y2=\"5096\" stroke-width=\"33.333333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"4855\" y1=\"5012\" x2=\"4903\" y2=\"5025\" stroke-width=\"33.333333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"4855\" y1=\"5012\" x2=\"4807\" y2=\"5000\" stroke-width=\"33.333333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"4737\" y1=\"4929\" x2=\"4807\" y2=\"5000\" stroke-width=\"33.333333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"4868\" y1=\"4939\" x2=\"4903\" y2=\"4974\" stroke-width=\"33.333333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"4868\" y1=\"4939\" x2=\"4833\" y2=\"4903\" stroke-width=\"33.333333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"4807\" y1=\"4807\" x2=\"4833\" y2=\"4903\" stroke-width=\"33.333333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"4916\" y1=\"4881\" x2=\"4929\" y2=\"4929\" stroke-width=\"33.333333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"4916\" y1=\"4881\" x2=\"4903\" y2=\"4833\" stroke-width=\"33.333333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"4929\" y1=\"4737\" x2=\"4903\" y2=\"4833\" stroke-width=\"33.333333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"4987\" y1=\"4855\" x2=\"4974\" y2=\"4903\" stroke-width=\"33.333333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"4987\" y1=\"4855\" x2=\"5000\" y2=\"4807\" stroke-width=\"33.333333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"5070\" y1=\"4737\" x2=\"5000\" y2=\"4807\" stroke-width=\"33.333333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"5060\" y1=\"4868\" x2=\"5025\" y2=\"4903\" stroke-width=\"33.333333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"5060\" y1=\"4868\" x2=\"5096\" y2=\"4833\" stroke-width=\"33.333333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"5192\" y1=\"4807\" x2=\"5096\" y2=\"4833\" stroke-width=\"33.333333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"5118\" y1=\"4916\" x2=\"5070\" y2=\"4929\" stroke-width=\"33.333333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"5118\" y1=\"4916\" x2=\"5166\" y2=\"4903\" stroke-width=\"33.333333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"5262\" y1=\"4929\" x2=\"5166\" y2=\"4903\" stroke-width=\"33.333333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"5144\" y1=\"4987\" x2=\"5096\" y2=\"4974\" stroke-width=\"33.333333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"5144\" y1=\"4987\" x2=\"5192\" y2=\"5000\" stroke-width=\"33.333333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"5144\" y1=\"4987\" x2=\"5151\" y2=\"4959\" stroke-width=\"33.333333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"5118\" y1=\"4916\" x2=\"5111\" y2=\"4888\" stroke-width=\"33.333333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"5060\" y1=\"4868\" x2=\"5040\" y2=\"4848\" stroke-width=\"33.333333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"4987\" y1=\"4855\" x2=\"4959\" y2=\"4848\" stroke-width=\"33.333333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"4916\" y1=\"4881\" x2=\"4888\" y2=\"4888\" stroke-width=\"33.333333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"4868\" y1=\"4939\" x2=\"4848\" y2=\"4959\" stroke-width=\"33.333333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"4855\" y1=\"5012\" x2=\"4848\" y2=\"5040\" stroke-width=\"33.333333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"4881\" y1=\"5083\" x2=\"4888\" y2=\"5111\" stroke-width=\"33.333333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"4939\" y1=\"5131\" x2=\"4959\" y2=\"5151\" stroke-width=\"33.333333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"5012\" y1=\"5144\" x2=\"5040\" y2=\"5151\" stroke-width=\"33.333333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"5083\" y1=\"5118\" x2=\"5111\" y2=\"5111\" stroke-width=\"33.333333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"5131\" y1=\"5060\" x2=\"5151\" y2=\"5040\" stroke-width=\"33.333333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"5140\" y1=\"5000\" x2=\"5096\" y2=\"5025\" stroke-width=\"33.333333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"5051\" y1=\"5000\" x2=\"5096\" y2=\"4974\" stroke-width=\"33.333333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"5121\" y1=\"4929\" x2=\"5096\" y2=\"4974\" stroke-width=\"33.333333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"5044\" y1=\"4974\" x2=\"5070\" y2=\"4929\" stroke-width=\"33.333333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"5070\" y1=\"4878\" x2=\"5070\" y2=\"4929\" stroke-width=\"33.333333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"5025\" y1=\"4955\" x2=\"5025\" y2=\"4903\" stroke-width=\"33.333333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"5000\" y1=\"4859\" x2=\"5025\" y2=\"4903\" stroke-width=\"33.333333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"5000\" y1=\"4948\" x2=\"4974\" y2=\"4903\" stroke-width=\"33.333333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"4929\" y1=\"4878\" x2=\"4974\" y2=\"4903\" stroke-width=\"33.333333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"4974\" y1=\"4955\" x2=\"4929\" y2=\"4929\" stroke-width=\"33.333333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"4878\" y1=\"4929\" x2=\"4929\" y2=\"4929\" stroke-width=\"33.333333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"4955\" y1=\"4974\" x2=\"4903\" y2=\"4974\" stroke-width=\"33.333333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"4859\" y1=\"5000\" x2=\"4903\" y2=\"4974\" stroke-width=\"33.333333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"4948\" y1=\"5000\" x2=\"4903\" y2=\"5025\" stroke-width=\"33.333333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"4878\" y1=\"5070\" x2=\"4903\" y2=\"5025\" stroke-width=\"33.333333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"4955\" y1=\"5025\" x2=\"4929\" y2=\"5070\" stroke-width=\"33.333333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"4929\" y1=\"5121\" x2=\"4929\" y2=\"5070\" stroke-width=\"33.333333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"4974\" y1=\"5044\" x2=\"4974\" y2=\"5096\" stroke-width=\"33.333333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"5000\" y1=\"5140\" x2=\"4974\" y2=\"5096\" stroke-width=\"33.333333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"5000\" y1=\"5051\" x2=\"5025\" y2=\"5096\" stroke-width=\"33.333333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"5070\" y1=\"5121\" x2=\"5025\" y2=\"5096\" stroke-width=\"33.333333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"5025\" y1=\"5044\" x2=\"5070\" y2=\"5070\" stroke-width=\"33.333333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"5121\" y1=\"5070\" x2=\"5070\" y2=\"5070\" stroke-width=\"33.333333333333336\"/><line stroke=\"#00f\" opacity=\"1\" x1=\"5044\" y1=\"5025\" x2=\"5096\" y2=\"5025\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"7113\" y1=\"5566\" x2=\"8660\" y2=\"5980\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"6547\" y1=\"6547\" x2=\"7679\" y2=\"7679\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"5566\" y1=\"7113\" x2=\"5980\" y2=\"8660\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"4433\" y1=\"7113\" x2=\"4019\" y2=\"8660\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"3452\" y1=\"6547\" x2=\"2320\" y2=\"7679\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"2886\" y1=\"5566\" x2=\"1339\" y2=\"5980\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"2886\" y1=\"4433\" x2=\"1339\" y2=\"4019\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"3452\" y1=\"3452\" x2=\"2320\" y2=\"2320\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"4433\" y1=\"2886\" x2=\"4019\" y2=\"1339\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"5566\" y1=\"2886\" x2=\"5980\" y2=\"1339\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"6547\" y1=\"3452\" x2=\"7679\" y2=\"2320\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"7113\" y1=\"4433\" x2=\"8660\" y2=\"4019\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"6132\" y1=\"4999\" x2=\"6961\" y2=\"5000\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"5980\" y1=\"4433\" x2=\"6698\" y2=\"4019\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"5566\" y1=\"4019\" x2=\"5980\" y2=\"3301\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"5000\" y1=\"3867\" x2=\"5000\" y2=\"3038\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"4433\" y1=\"4019\" x2=\"4019\" y2=\"3301\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"4019\" y1=\"4433\" x2=\"3301\" y2=\"4019\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"3867\" y1=\"5000\" x2=\"3038\" y2=\"5000\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"4019\" y1=\"5566\" x2=\"3301\" y2=\"5980\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"4433\" y1=\"5980\" x2=\"4019\" y2=\"6698\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"5000\" y1=\"6132\" x2=\"5000\" y2=\"6961\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"5566\" y1=\"5980\" x2=\"5980\" y2=\"6698\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"5980\" y1=\"5566\" x2=\"6698\" y2=\"5980\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"5566\" y1=\"5151\" x2=\"5980\" y2=\"5262\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"5414\" y1=\"5414\" x2=\"5717\" y2=\"5717\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"5151\" y1=\"5566\" x2=\"5262\" y2=\"5980\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"4848\" y1=\"5566\" x2=\"4737\" y2=\"5980\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"4585\" y1=\"5414\" x2=\"4282\" y2=\"5717\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"4433\" y1=\"5151\" x2=\"4019\" y2=\"5262\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"4433\" y1=\"4848\" x2=\"4019\" y2=\"4737\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"4585\" y1=\"4585\" x2=\"4282\" y2=\"4282\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"4848\" y1=\"4433\" x2=\"4737\" y2=\"4019\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"5151\" y1=\"4433\" x2=\"5262\" y2=\"4019\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"5414\" y1=\"4585\" x2=\"5717\" y2=\"4282\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"5566\" y1=\"4848\" x2=\"5980\" y2=\"4737\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"5303\" y1=\"4999\" x2=\"5525\" y2=\"5000\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"5262\" y1=\"4848\" x2=\"5455\" y2=\"4737\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"5151\" y1=\"4737\" x2=\"5262\" y2=\"4544\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"5000\" y1=\"4696\" x2=\"5000\" y2=\"4474\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"4848\" y1=\"4737\" x2=\"4737\" y2=\"4544\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"4737\" y1=\"4848\" x2=\"4544\" y2=\"4737\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"4696\" y1=\"5000\" x2=\"4474\" y2=\"5000\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"4737\" y1=\"5151\" x2=\"4544\" y2=\"5262\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"4848\" y1=\"5262\" x2=\"4737\" y2=\"5455\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"5000\" y1=\"5303\" x2=\"5000\" y2=\"5525\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"5151\" y1=\"5262\" x2=\"5262\" y2=\"5455\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"5262\" y1=\"5151\" x2=\"5455\" y2=\"5262\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"5151\" y1=\"5040\" x2=\"5262\" y2=\"5070\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"5111\" y1=\"5111\" x2=\"5192\" y2=\"5192\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"5040\" y1=\"5151\" x2=\"5070\" y2=\"5262\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"4959\" y1=\"5151\" x2=\"4929\" y2=\"5262\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"4888\" y1=\"5111\" x2=\"4807\" y2=\"5192\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"4848\" y1=\"5040\" x2=\"4737\" y2=\"5070\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"4848\" y1=\"4959\" x2=\"4737\" y2=\"4929\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"4888\" y1=\"4888\" x2=\"4807\" y2=\"4807\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"4959\" y1=\"4848\" x2=\"4929\" y2=\"4737\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"5040\" y1=\"4848\" x2=\"5070\" y2=\"4737\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"5111\" y1=\"4888\" x2=\"5192\" y2=\"4807\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"5151\" y1=\"4959\" x2=\"5262\" y2=\"4929\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"5051\" y1=\"5000\" x2=\"5044\" y2=\"4974\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"5044\" y1=\"4974\" x2=\"5025\" y2=\"4955\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"5025\" y1=\"4955\" x2=\"5000\" y2=\"4948\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"5000\" y1=\"4948\" x2=\"4974\" y2=\"4955\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"4974\" y1=\"4955\" x2=\"4955\" y2=\"4974\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"4955\" y1=\"4974\" x2=\"4948\" y2=\"5000\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"4948\" y1=\"5000\" x2=\"4955\" y2=\"5025\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"4955\" y1=\"5025\" x2=\"4974\" y2=\"5044\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"4974\" y1=\"5044\" x2=\"5000\" y2=\"5051\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"5000\" y1=\"5051\" x2=\"5025\" y2=\"5044\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"5025\" y1=\"5044\" x2=\"5044\" y2=\"5025\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"5044\" y1=\"5025\" x2=\"5051\" y2=\"5000\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"5051\" y1=\"5000\" x2=\"5140\" y2=\"5000\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"5044\" y1=\"4974\" x2=\"5121\" y2=\"4929\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"5025\" y1=\"4955\" x2=\"5070\" y2=\"4878\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"5000\" y1=\"4948\" x2=\"5000\" y2=\"4859\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"4974\" y1=\"4955\" x2=\"4929\" y2=\"4878\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"4955\" y1=\"4974\" x2=\"4878\" y2=\"4929\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"4948\" y1=\"5000\" x2=\"4859\" y2=\"5000\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"4955\" y1=\"5025\" x2=\"4878\" y2=\"5070\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"4974\" y1=\"5044\" x2=\"4929\" y2=\"5121\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"5000\" y1=\"5051\" x2=\"5000\" y2=\"5140\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"5025\" y1=\"5044\" x2=\"5070\" y2=\"5121\" stroke-width=\"33.333333333333336\"/><line stroke=\"#f00\" opacity=\"1\" x1=\"5044\" y1=\"5025\" x2=\"5121\" y2=\"5070\" stroke-width=\"33.333333333333336\"/></svg>` \n            }\n        ];</script> <style> .edit-mode-disabled #globalNav{ display:none !important;}.edit-mode-disabled body{ padding-top:0 !important; }.edit-mode-disabled .main-content{ margin-top:0 !important; } #loadingScreen{ position:fixed;top:0;left:0;width:100%;height:100%;background-color:#000000;display:flex;justify-content:center;align-items:center;z-index:9999;font-family:'Lato', 'Helvetica', Arial, sans-serif;}#loadingText{ color:#ffffff;font-size:16px;font-weight:300;letter-spacing:2px;}.loading-dots{ display:inline-block;width:60px;text-align:left;}.loading-dots::after{ content:'';animation:loadingDots 1.5s infinite;}@keyframes loadingDots{ 0%{ content:'';}25%{ content:'.';}50%{ content:'..';}75%{ content:'...';}100%{ content:'';}} .loading-hidden #loadingScreen{ opacity:0;pointer-events:none;transition:opacity 0.5s ease-out;} .fade-out-loading #loadingScreen{ animation:fadeOutLoading 0.8s ease-out forwards;}@keyframes fadeOutLoading{ 0%{ opacity:1;visibility:visible;}100%{ opacity:0;visibility:hidden;}}</style> <script id=\"vertexShader\" type=\"x-shader/x-vertex\">\n        attribute vec2 a_position;\n        void main() {\n           gl_Position = vec4(a_position, 0, 1);\n        }\n    </script> <script id=\"packToBytesShader\" type=\"x-shader/x-fragment\">\n        precision mediump float;\n        uniform vec2 u_floatTextureDim;\n        uniform sampler2D u_floatTexture;\n        uniform float u_vectorLength;\n        float shift_right (float v, float amt) {\n            v = floor(v) + 0.5;\n            return floor(v / exp2(amt));\n        }\n        float shift_left (float v, float amt) {\n            return floor(v * exp2(amt) + 0.5);\n        }\n        float mask_last (float v, float bits) {\n            return mod(v, shift_left(1.0, bits));\n        }\n        float extract_bits (float num, float from, float to) {\n            from = floor(from + 0.5); to = floor(to + 0.5);\n            return mask_last(shift_right(num, from), to - from);\n        }\n        vec4 encode_float (float val) {\n            if (val == 0.0) return vec4(0, 0, 0, 0);\n            float sign = val > 0.0 ? 0.0 : 1.0;\n            val = abs(val);\n            float exponent = floor(log2(val));\n            float biased_exponent = exponent + 127.0;\n            float fraction = ((val / exp2(exponent)) - 1.0) * 8388608.0;\n            float t = biased_exponent / 2.0;\n            float last_bit_of_biased_exponent = fract(t) * 2.0;\n            float remaining_bits_of_biased_exponent = floor(t);\n            float byte4 = extract_bits(fraction, 0.0, 8.0) / 255.0;\n            float byte3 = extract_bits(fraction, 8.0, 16.0) / 255.0;\n            float byte2 = (last_bit_of_biased_exponent * 128.0 + extract_bits(fraction, 16.0, 23.0)) / 255.0;\n            float byte1 = (sign * 128.0 + remaining_bits_of_biased_exponent) / 255.0;\n            return vec4(byte4, byte3, byte2, byte1);\n        }\n        void main(){\n            vec2 fragCoord = gl_FragCoord.xy;\n            float textureXcoord = floor((fragCoord.x - 0.5)/u_vectorLength+0.0001) + 0.5;\n            vec4 data = texture2D(u_floatTexture, vec2(textureXcoord, fragCoord.y)/u_floatTextureDim);\n            int textureIndex = int(floor(mod(fragCoord.x-0.5+0.0001, u_vectorLength)));\n            if (textureIndex == 0) gl_FragColor = encode_float(data[0]);\n            else if (textureIndex == 1) gl_FragColor = encode_float(data[1]);\n            else if (textureIndex == 2) gl_FragColor = encode_float(data[2]);\n            else if (textureIndex == 3) gl_FragColor = encode_float(data[3]);\n        }\n    </script> <script id=\"zeroTexture\" type=\"x-shader/x-fragment\">\n        precision mediump float;\n        void main(){\n            gl_FragColor = vec4(0.0);\n        }\n    </script> <script id=\"zeroThetaTexture\" type=\"x-shader/x-fragment\">\n        precision mediump float;\n        uniform sampler2D u_theta;\n        uniform vec2 u_textureDimCreases;\n        void main(){\n            vec2 fragCoord = gl_FragCoord.xy;\n            vec2 scaledFragCoord = fragCoord/u_textureDimCreases;\n            vec4 theta = texture2D(u_theta, scaledFragCoord);\n            gl_FragColor = vec4(0.0, 0.0, theta[2], theta[3]);\n        }\n    </script> <script id=\"centerTexture\" type=\"x-shader/x-fragment\">\n        precision mediump float;\n        uniform sampler2D u_lastPosition;\n        uniform vec2 u_textureDim;\n        uniform vec3 u_center;\n        void main(){\n            vec2 fragCoord = gl_FragCoord.xy;\n            vec2 scaledFragCoord = fragCoord/u_textureDim;\n            vec3 position = texture2D(u_lastPosition, scaledFragCoord).xyz;\n            gl_FragColor = vec4(position-u_center, 0.0);\n        }\n    </script> <script id=\"copyTexture\" type=\"x-shader/x-fragment\">\n        precision mediump float;\n        uniform sampler2D u_orig;\n        uniform vec2 u_textureDim;\n        void main(){\n            gl_FragColor = texture2D(u_orig, gl_FragCoord.xy/u_textureDim);\n        }\n    </script> <script id=\"positionCalcShader\" type=\"x-shader/x-fragment\">\n        precision mediump float;\n        uniform vec2 u_textureDim;\n        uniform float u_dt;\n        uniform sampler2D u_lastPosition;\n        uniform sampler2D u_velocity;\n        uniform sampler2D u_mass;\n\n        void main(){\n            vec2 fragCoord = gl_FragCoord.xy;\n            vec2 scaledFragCoord = fragCoord/u_textureDim;\n\n            vec3 lastPosition = texture2D(u_lastPosition, scaledFragCoord).xyz;\n\n            float isFixed = texture2D(u_mass, scaledFragCoord).y;\n            if (isFixed == 1.0){\n                gl_FragColor = vec4(lastPosition, 0.0);\n                return;\n            }\n\n            vec4 velocityData = texture2D(u_velocity, scaledFragCoord);\n            vec3 position = velocityData.xyz*u_dt + lastPosition;\n            gl_FragColor = vec4(position, velocityData.a);//velocity.a has error info\n        }\n    </script> <script id=\"velocityCalcVerletShader\" type=\"x-shader/x-fragment\">\n        precision mediump float;\n        uniform vec2 u_textureDim;\n        uniform float u_dt;\n        uniform sampler2D u_position;\n        uniform sampler2D u_lastPosition;\n        uniform sampler2D u_mass;\n\n        void main(){\n            vec2 fragCoord = gl_FragCoord.xy;\n            vec2 scaledFragCoord = fragCoord/u_textureDim;\n\n            float isFixed = texture2D(u_mass, scaledFragCoord).y;\n            if (isFixed == 1.0){\n                gl_FragColor = vec4(0.0);\n                return;\n            }\n\n            vec3 position = texture2D(u_position, scaledFragCoord).xyz;\n            vec3 lastPosition = texture2D(u_lastPosition, scaledFragCoord).xyz;\n            gl_FragColor = vec4((position-lastPosition)/u_dt,0.0);\n        }\n    </script> <script id=\"velocityCalcShader\" type=\"x-shader/x-fragment\">\n        precision mediump float;\n        uniform vec2 u_textureDim;\n        uniform vec2 u_textureDimEdges;\n        uniform vec2 u_textureDimFaces;\n        uniform vec2 u_textureDimCreases;\n        uniform vec2 u_textureDimNodeCreases;\n        uniform vec2 u_textureDimNodeFaces;\n        uniform float u_creasePercent;\n        uniform float u_dt;\n        uniform float u_axialStiffness;\n        uniform float u_faceStiffness;\n        uniform sampler2D u_lastPosition;\n        uniform sampler2D u_lastVelocity;\n        uniform sampler2D u_originalPosition;\n        uniform sampler2D u_externalForces;\n        uniform sampler2D u_mass;\n        uniform sampler2D u_meta;//[beamsIndex, numBeam, nodeCreaseMetaIndex, numCreases]\n        uniform sampler2D u_beamMeta;//[k, d, length, otherNodeIndex]\n        uniform sampler2D u_creaseMeta;//[k, d, targetTheta]\n        uniform sampler2D u_nodeCreaseMeta;//[creaseIndex, nodeIndex, -, -]\n        uniform sampler2D u_normals;\n        uniform sampler2D u_theta;//[theta, z, normal1Index, normal2Index]\n        uniform sampler2D u_creaseGeo;//[h1, h2, coef1, coef2]\n        uniform sampler2D u_meta2;//[nodesFaceIndex, numFaces]\n        uniform sampler2D u_nodeFaceMeta;//[faceIndex, a, b, c]\n        uniform sampler2D u_nominalTriangles;//[angleA, angleB, angleC]\n        uniform bool u_calcFaceStrain;\n\n        vec4 getFromArray(float index1D, vec2 dimensions, sampler2D tex){\n            vec2 index = vec2(mod(index1D, dimensions.x)+0.5, floor(index1D/dimensions.x)+0.5);\n            vec2 scaledIndex = index/dimensions;\n            return texture2D(tex, scaledIndex);\n        }\n\n        vec3 getPosition(float index1D){\n            vec2 index = vec2(mod(index1D, u_textureDim.x)+0.5, floor(index1D/u_textureDim.x)+0.5);\n            vec2 scaledIndex = index/u_textureDim;\n            return texture2D(u_lastPosition, scaledIndex).xyz + texture2D(u_originalPosition, scaledIndex).xyz;\n        }\n\n        void main(){\n            vec2 fragCoord = gl_FragCoord.xy;\n            vec2 scaledFragCoord = fragCoord/u_textureDim;\n\n            vec2 mass = texture2D(u_mass, scaledFragCoord).xy;\n            if (mass[1] == 1.0){//fixed\n                gl_FragColor = vec4(0.0);\n                return;\n            }\n            vec3 force = texture2D(u_externalForces, scaledFragCoord).xyz;\n            vec3 lastPosition = texture2D(u_lastPosition, scaledFragCoord).xyz;\n            vec3 lastVelocity = texture2D(u_lastVelocity, scaledFragCoord).xyz;\n            vec3 originalPosition = texture2D(u_originalPosition, scaledFragCoord).xyz;\n\n            vec4 neighborIndices = texture2D(u_meta, scaledFragCoord);\n            vec4 meta = texture2D(u_meta, scaledFragCoord);\n            vec2 meta2 = texture2D(u_meta2, scaledFragCoord).xy;\n\n            float nodeError = 0.0;\n\n            for (int j=0;j<100;j++){//for all beams (up to 100, had to put a const int in here)\n                if (j >= int(meta[1])) break;\n\n                vec4 beamMeta = getFromArray(meta[0]+float(j), u_textureDimEdges, u_beamMeta);\n\n                float neighborIndex1D = beamMeta[3];\n                vec2 neighborIndex = vec2(mod(neighborIndex1D, u_textureDim.x)+0.5, floor(neighborIndex1D/u_textureDim.x)+0.5);\n                vec2 scaledNeighborIndex = neighborIndex/u_textureDim;\n                vec3 neighborLastPosition = texture2D(u_lastPosition, scaledNeighborIndex).xyz;\n                vec3 neighborLastVelocity = texture2D(u_lastVelocity, scaledNeighborIndex).xyz;\n                vec3 neighborOriginalPosition = texture2D(u_originalPosition, scaledNeighborIndex).xyz;\n\n                vec3 nominalDist = neighborOriginalPosition-originalPosition;\n                vec3 deltaP = neighborLastPosition-lastPosition+nominalDist;\n                float deltaPLength = length(deltaP);\n                deltaP -= deltaP*(beamMeta[2]/deltaPLength);\n                if (!u_calcFaceStrain) nodeError += abs(deltaPLength/length(nominalDist) - 1.0);\n                vec3 deltaV = neighborLastVelocity-lastVelocity;\n\n                vec3 _force = deltaP*beamMeta[0] + deltaV*beamMeta[1];\n                force += _force;\n            }\n            if (!u_calcFaceStrain) nodeError /= meta[1];\n\n            for (int j=0;j<100;j++){//for all creases (up to 100, had to put a const int in here)\n                if (j >= int(meta[3])) break;\n\n                vec4 nodeCreaseMeta = getFromArray(meta[2]+float(j), u_textureDimNodeCreases, u_nodeCreaseMeta);\n\n                float creaseIndex1D = nodeCreaseMeta[0];\n                vec2 creaseIndex = vec2(mod(creaseIndex1D, u_textureDimCreases.x)+0.5, floor(creaseIndex1D/u_textureDimCreases.x)+0.5);\n                vec2 scaledCreaseIndex = creaseIndex/u_textureDimCreases;\n\n                vec4 thetas = texture2D(u_theta, scaledCreaseIndex);\n                vec3 creaseMeta = texture2D(u_creaseMeta, scaledCreaseIndex).xyz;//[k, d, targetTheta]\n                vec4 creaseGeo = texture2D(u_creaseGeo, scaledCreaseIndex);//[h1, h2, coef1, coef2]\n                if (creaseGeo[0]< 0.0) continue;//crease disabled bc it has collapsed too much\n\n                float targetTheta = creaseMeta[2] * u_creasePercent;\n                float angForce = creaseMeta[0]*(targetTheta-thetas[0]);// + creaseMeta[1]*thetas[1];\n\n                float nodeNum = nodeCreaseMeta[1];//1, 2, 3, 4\n\n                if (nodeNum > 2.0){//crease reaction, node is on a crease\n\n                    //node #1\n                    vec3 normal1 = getFromArray(thetas[2], u_textureDimFaces, u_normals).xyz;\n\n                    //node #2\n                    vec3 normal2 = getFromArray(thetas[3], u_textureDimFaces, u_normals).xyz;\n\n                    float coef1 = creaseGeo[2];\n                    float coef2 = creaseGeo[3];\n\n                    if (nodeNum == 3.0){\n                        coef1 = 1.0-coef1;\n                        coef2 = 1.0-coef2;\n                    }\n\n                    vec3 _force = -angForce*(coef1/creaseGeo[0]*normal1 + coef2/creaseGeo[1]*normal2);\n                    force += _force;\n\n                } else {\n\n                    float normalIndex1D = thetas[2];//node #1\n                    float momentArm = creaseGeo[0];//node #1\n                    if (nodeNum == 2.0) {\n                        normalIndex1D = thetas[3];//node #2\n                        momentArm = creaseGeo[1];//node #2\n                    }\n\n                    vec3 normal = getFromArray(normalIndex1D, u_textureDimFaces, u_normals).xyz;\n\n                    vec3 _force = angForce/momentArm*normal;\n                    force += _force;\n                }\n            }\n\n            for (int j=0;j<100;j++){//for all faces (up to 100, had to put a const int in here)\n                if (j >= int(meta2[1])) break;\n\n                vec4 faceMeta = getFromArray(meta2[0]+float(j), u_textureDimNodeFaces, u_nodeFaceMeta);//[face index, a, b, c]\n                vec3 nominalAngles = getFromArray(faceMeta[0], u_textureDimFaces, u_nominalTriangles).xyz;//[angA, angB, angC]\n\n                int faceIndex = 0;\n                if (faceMeta[2] < 0.0) faceIndex = 1;\n                if (faceMeta[3] < 0.0) faceIndex = 2;\n\n                //get node positions\n                vec3 a = faceIndex == 0 ? lastPosition+originalPosition : getPosition(faceMeta[1]);\n                vec3 b = faceIndex == 1 ? lastPosition+originalPosition : getPosition(faceMeta[2]);\n                vec3 c = faceIndex == 2 ? lastPosition+originalPosition : getPosition(faceMeta[3]);\n\n                //calc angles\n                vec3 ab = b-a;\n                vec3 ac = c-a;\n                vec3 bc = c-b;\n\n                float lengthAB = length(ab);\n                float lengthAC = length(ac);\n                float lengthBC = length(bc);\n\n                float tol = 0.0000001;\n                if (abs(lengthAB) < tol || abs(lengthBC) < tol || abs(lengthAC) < tol) continue;\n\n                ab /= lengthAB;\n                ac /= lengthAC;\n                bc /= lengthBC;\n\n                vec3 angles = vec3(acos(dot(ab, ac)),\n                    acos(-1.0*dot(ab, bc)),\n                    acos(dot(ac, bc)));\n                vec3 anglesDiff = nominalAngles-angles;\n\n                vec3 normal = getFromArray(faceMeta[0], u_textureDimFaces, u_normals).xyz;\n\n                //calc forces\n                anglesDiff *= u_faceStiffness;\n                if (faceIndex == 0){//a\n                    vec3 normalCrossAC = cross(normal, ac)/lengthAC;\n                    vec3 normalCrossAB = cross(normal, ab)/lengthAB;\n                    force -= anglesDiff[0]*(normalCrossAC - normalCrossAB);\n                    if (u_calcFaceStrain) nodeError += abs((nominalAngles[0]-angles[0])/nominalAngles[0]);\n                    force -= anglesDiff[1]*normalCrossAB;\n                    force += anglesDiff[2]*normalCrossAC;\n                } else if (faceIndex == 1){\n                    vec3 normalCrossAB = cross(normal, ab)/lengthAB;\n                    vec3 normalCrossBC = cross(normal, bc)/lengthBC;\n                    force -= anglesDiff[0]*normalCrossAB;\n                    force += anglesDiff[1]*(normalCrossAB + normalCrossBC);\n                    if (u_calcFaceStrain) nodeError += abs((nominalAngles[1]-angles[1])/nominalAngles[1]);\n                    force -= anglesDiff[2]*normalCrossBC;\n                } else if (faceIndex == 2){\n                    vec3 normalCrossAC = cross(normal, ac)/lengthAC;\n                    vec3 normalCrossBC = cross(normal, bc)/lengthBC;\n                    force += anglesDiff[0]*normalCrossAC;\n                    force -= anglesDiff[1]*normalCrossBC;\n                    force += anglesDiff[2]*(normalCrossBC - normalCrossAC);\n                    if (u_calcFaceStrain) nodeError += abs((nominalAngles[2]-angles[2])/nominalAngles[2]);\n                }\n\n            }\n            if (u_calcFaceStrain) nodeError /= meta2[1];\n\n            vec3 velocity = force*u_dt/mass[0] + lastVelocity;\n            gl_FragColor = vec4(velocity,nodeError);\n        }\n    </script> <script id=\"positionCalcVerletShader\" type=\"x-shader/x-fragment\">\n        precision mediump float;\n        uniform vec2 u_textureDim;\n        uniform vec2 u_textureDimEdges;\n        uniform vec2 u_textureDimFaces;\n        uniform vec2 u_textureDimCreases;\n        uniform vec2 u_textureDimNodeCreases;\n        uniform vec2 u_textureDimNodeFaces;\n        uniform float u_creasePercent;\n        uniform float u_dt;\n        uniform float u_axialStiffness;\n        uniform float u_faceStiffness;\n        uniform sampler2D u_lastPosition;\n        uniform sampler2D u_lastLastPosition;\n        uniform sampler2D u_lastVelocity;\n        uniform sampler2D u_originalPosition;\n        uniform sampler2D u_externalForces;\n        uniform sampler2D u_mass;\n        uniform sampler2D u_meta;//[beamsIndex, numBeam, nodeCreaseMetaIndex, numCreases]\n        uniform sampler2D u_beamMeta;//[k, d, length, otherNodeIndex]\n        uniform sampler2D u_creaseMeta;//[k, d, targetTheta]\n        uniform sampler2D u_nodeCreaseMeta;//[creaseIndex, nodeIndex, -, -]\n        uniform sampler2D u_normals;\n        uniform sampler2D u_theta;//[theta, z, normal1Index, normal2Index]\n        uniform sampler2D u_creaseGeo;//[h1, h2, coef1, coef2]\n        uniform sampler2D u_meta2;//[nodesFaceIndex, numFaces]\n        uniform sampler2D u_nodeFaceMeta;//[faceIndex, a, b, c]\n        uniform sampler2D u_nominalTriangles;//[angleA, angleB, angleC]\n\n        vec4 getFromArray(float index1D, vec2 dimensions, sampler2D tex){\n            vec2 index = vec2(mod(index1D, dimensions.x)+0.5, floor(index1D/dimensions.x)+0.5);\n            vec2 scaledIndex = index/dimensions;\n            return texture2D(tex, scaledIndex);\n        }\n\n        vec3 getPosition(float index1D){\n            vec2 index = vec2(mod(index1D, u_textureDim.x)+0.5, floor(index1D/u_textureDim.x)+0.5);\n            vec2 scaledIndex = index/u_textureDim;\n            return texture2D(u_lastPosition, scaledIndex).xyz + texture2D(u_originalPosition, scaledIndex).xyz;\n        }\n\n        void main(){\n            vec2 fragCoord = gl_FragCoord.xy;\n            vec2 scaledFragCoord = fragCoord/u_textureDim;\n\n            vec3 lastPosition = texture2D(u_lastPosition, scaledFragCoord).xyz;\n\n            vec2 mass = texture2D(u_mass, scaledFragCoord).xy;\n            if (mass[1] == 1.0){//fixed\n                gl_FragColor = vec4(lastPosition, 0.0);\n                return;\n            }\n            vec3 force = texture2D(u_externalForces, scaledFragCoord).xyz;\n            vec3 lastLastPosition = texture2D(u_lastLastPosition, scaledFragCoord).xyz;\n            vec3 lastVelocity = texture2D(u_lastVelocity, scaledFragCoord).xyz;\n            vec3 originalPosition = texture2D(u_originalPosition, scaledFragCoord).xyz;\n\n            vec4 neighborIndices = texture2D(u_meta, scaledFragCoord);\n            vec4 meta = texture2D(u_meta, scaledFragCoord);\n            vec2 meta2 = texture2D(u_meta2, scaledFragCoord).xy;\n\n            float nodeError = 0.0;\n\n            for (int j=0;j<100;j++){//for all beams (up to 100, had to put a const int in here)\n                if (j >= int(meta[1])) break;\n\n                vec4 beamMeta = getFromArray(meta[0]+float(j), u_textureDimEdges, u_beamMeta);\n\n                float neighborIndex1D = beamMeta[3];\n                vec2 neighborIndex = vec2(mod(neighborIndex1D, u_textureDim.x)+0.5, floor(neighborIndex1D/u_textureDim.x)+0.5);\n                vec2 scaledNeighborIndex = neighborIndex/u_textureDim;\n                vec3 neighborLastPosition = texture2D(u_lastPosition, scaledNeighborIndex).xyz;\n                vec3 neighborLastVelocity = texture2D(u_lastVelocity, scaledNeighborIndex).xyz;\n                vec3 neighborOriginalPosition = texture2D(u_originalPosition, scaledNeighborIndex).xyz;\n\n                vec3 deltaP = neighborLastPosition+neighborOriginalPosition-lastPosition-originalPosition;\n                float deltaPLength = length(deltaP);\n                float nominalLength = beamMeta[2];\n                deltaP *= (1.0-nominalLength/deltaPLength);\n                nodeError += abs(deltaPLength/nominalLength - 1.0);\n                vec3 deltaV = neighborLastVelocity-lastVelocity;\n\n                vec3 _force = deltaP*beamMeta[0] + deltaV*beamMeta[1];\n                force += _force;\n            }\n            nodeError /= meta[1];\n\n            for (int j=0;j<100;j++){//for all creases (up to 100, had to put a const int in here)\n                if (j >= int(meta[3])) break;\n\n                vec4 nodeCreaseMeta = getFromArray(meta[2]+float(j), u_textureDimNodeCreases, u_nodeCreaseMeta);\n\n                float creaseIndex1D = nodeCreaseMeta[0];\n                vec2 creaseIndex = vec2(mod(creaseIndex1D, u_textureDimCreases.x)+0.5, floor(creaseIndex1D/u_textureDimCreases.x)+0.5);\n                vec2 scaledCreaseIndex = creaseIndex/u_textureDimCreases;\n\n                vec4 thetas = texture2D(u_theta, scaledCreaseIndex);\n                vec3 creaseMeta = texture2D(u_creaseMeta, scaledCreaseIndex).xyz;//[k, d, targetTheta]\n                vec4 creaseGeo = texture2D(u_creaseGeo, scaledCreaseIndex);//[h1, h2, coef1, coef2]\n                if (creaseGeo[0]< 0.0) continue;//crease disabled bc it has collapsed too much\n\n                float targetTheta = creaseMeta[2] * u_creasePercent;\n                float angForce = creaseMeta[0]*(targetTheta-thetas[0]);// + creaseMeta[1]*thetas[1];\n\n                float nodeNum = nodeCreaseMeta[1];//1, 2, 3, 4\n\n                if (nodeNum > 2.0){//crease reaction, node is on a crease\n\n                    //node #1\n                    vec3 normal1 = getFromArray(thetas[2], u_textureDimFaces, u_normals).xyz;\n\n                    //node #2\n                    vec3 normal2 = getFromArray(thetas[3], u_textureDimFaces, u_normals).xyz;\n\n                    float coef1 = creaseGeo[2];\n                    float coef2 = creaseGeo[3];\n\n                    if (nodeNum == 3.0){\n                        coef1 = 1.0-coef1;\n                        coef2 = 1.0-coef2;\n                    }\n\n                    vec3 _force = -angForce*(coef1/creaseGeo[0]*normal1 + coef2/creaseGeo[1]*normal2);\n                    force += _force;\n\n                } else {\n\n                    float normalIndex1D = thetas[2];//node #1\n                    float momentArm = creaseGeo[0];//node #1\n                    if (nodeNum == 2.0) {\n                        normalIndex1D = thetas[3];//node #2\n                        momentArm = creaseGeo[1];//node #2\n                    }\n\n                    vec3 normal = getFromArray(normalIndex1D, u_textureDimFaces, u_normals).xyz;\n\n                    vec3 _force = angForce/momentArm*normal;\n                    force += _force;\n                }\n            }\n\n            for (int j=0;j<100;j++){//for all faces (up to 100, had to put a const int in here)\n                if (j >= int(meta2[1])) break;\n\n                vec4 faceMeta = getFromArray(meta2[0]+float(j), u_textureDimNodeFaces, u_nodeFaceMeta);//[face index, a, b, c]\n                vec3 nominalAngles = getFromArray(faceMeta[0], u_textureDimFaces, u_nominalTriangles).xyz;//[angA, angB, angC]\n\n                int faceIndex = 0;\n                if (faceMeta[2] < 0.0) faceIndex = 1;\n                if (faceMeta[3] < 0.0) faceIndex = 2;\n\n                //get node positions\n                vec3 a = faceIndex == 0 ? lastPosition+originalPosition : getPosition(faceMeta[1]);\n                vec3 b = faceIndex == 1 ? lastPosition+originalPosition : getPosition(faceMeta[2]);\n                vec3 c = faceIndex == 2 ? lastPosition+originalPosition : getPosition(faceMeta[3]);\n\n                //calc angles\n                vec3 ab = b-a;\n                vec3 ac = c-a;\n                vec3 bc = c-b;\n\n                float lengthAB = length(ab);\n                float lengthAC = length(ac);\n                float lengthBC = length(bc);\n\n                float tol = 0.0000001;\n                if (abs(lengthAB) < tol || abs(lengthBC) < tol || abs(lengthAC) < tol) continue;\n\n                ab /= lengthAB;\n                ac /= lengthAC;\n                bc /= lengthBC;\n\n                vec3 angles = vec3(acos(dot(ab, ac)),\n                    acos(-1.0*dot(ab, bc)),\n                    acos(dot(ac, bc)));\n                vec3 anglesDiff = nominalAngles-angles;\n\n                vec3 normal = getFromArray(faceMeta[0], u_textureDimFaces, u_normals).xyz;\n\n                //calc forces\n                anglesDiff *= u_faceStiffness;\n                if (faceIndex == 0){//a\n                    vec3 normalCrossAC = cross(normal, ac)/lengthAC;\n                    vec3 normalCrossAB = cross(normal, ab)/lengthAB;\n                    force -= anglesDiff[0]*(normalCrossAC - normalCrossAB);\n                    force -= anglesDiff[1]*normalCrossAB;\n                    force += anglesDiff[2]*normalCrossAC;\n                } else if (faceIndex == 1){\n                    vec3 normalCrossAB = cross(normal, ab)/lengthAB;\n                    vec3 normalCrossBC = cross(normal, bc)/lengthBC;\n                    force -= anglesDiff[0]*normalCrossAB;\n                    force += anglesDiff[1]*(normalCrossAB + normalCrossBC);\n                    force -= anglesDiff[2]*normalCrossBC;\n                } else if (faceIndex == 2){\n                    vec3 normalCrossAC = cross(normal, ac)/lengthAC;\n                    vec3 normalCrossBC = cross(normal, bc)/lengthBC;\n                    force += anglesDiff[0]*normalCrossAC;\n                    force -= anglesDiff[1]*normalCrossBC;\n                    force += anglesDiff[2]*(normalCrossBC - normalCrossAC);\n                }\n\n            }\n\n            vec3 nextPosition = force*u_dt*u_dt/mass[0] + 2.0*lastPosition - lastLastPosition;\n            gl_FragColor = vec4(nextPosition,nodeError);//position.a has error info\n        }\n    </script> <script id=\"thetaCalcShader\" type=\"x-shader/x-fragment\">\n        #define TWO_PI 6.283185307179586476925286766559\n        precision mediump float;\n        uniform vec2 u_textureDim;\n        uniform vec2 u_textureDimFaces;\n        uniform vec2 u_textureDimCreases;\n        uniform sampler2D u_normals;\n        uniform sampler2D u_lastTheta;\n        uniform sampler2D u_creaseVectors;\n        uniform sampler2D u_lastPosition;\n        uniform sampler2D u_originalPosition;\n        uniform float u_dt;\n\n        vec4 getFromArray(float index1D, vec2 dimensions, sampler2D tex){\n            vec2 index = vec2(mod(index1D, dimensions.x)+0.5, floor(index1D/dimensions.x)+0.5);\n            vec2 scaledIndex = index/dimensions;\n            return texture2D(tex, scaledIndex);\n        }\n\n        void main(){\n\n            vec2 fragCoord = gl_FragCoord.xy;\n            vec2 scaledFragCoord = fragCoord/u_textureDimCreases;\n\n            vec4 lastTheta = texture2D(u_lastTheta, scaledFragCoord);\n\n            if (lastTheta[2]<0.0){\n                gl_FragColor = vec4(lastTheta[0], 0.0, -1.0, -1.0);\n                return;\n            }\n\n            vec3 normal1 = getFromArray(lastTheta[2], u_textureDimFaces, u_normals).xyz;\n            vec3 normal2 = getFromArray(lastTheta[3], u_textureDimFaces, u_normals).xyz;\n\n            float dotNormals = dot(normal1, normal2);//normals are already normalized, no need to divide by length\n            if (dotNormals < -1.0) dotNormals = -1.0;\n            else if (dotNormals > 1.0) dotNormals = 1.0;\n\n            vec2 creaseVectorIndices = texture2D(u_creaseVectors, scaledFragCoord).xy;\n            vec2 creaseNodeIndex = vec2(mod(creaseVectorIndices[0], u_textureDim.x)+0.5, floor(creaseVectorIndices[0]/u_textureDim.x)+0.5);\n            vec2 scaledNodeIndex = creaseNodeIndex/u_textureDim;\n            vec3 node0 = texture2D(u_lastPosition, scaledNodeIndex).xyz + texture2D(u_originalPosition, scaledNodeIndex).xyz;\n            creaseNodeIndex = vec2(mod(creaseVectorIndices[1], u_textureDim.x)+0.5, floor(creaseVectorIndices[1]/u_textureDim.x)+0.5);\n            scaledNodeIndex = creaseNodeIndex/u_textureDim;\n            vec3 node1 = texture2D(u_lastPosition, scaledNodeIndex).xyz + texture2D(u_originalPosition, scaledNodeIndex).xyz;\n\n            //https://math.stackexchange.com/questions/47059/how-do-i-calculate-a-dihedral-angle-given-cartesian-coordinates\n            vec3 creaseVector = normalize(node1-node0);\n            float x = dotNormals;\n            float y = dot(cross(normal1, creaseVector), normal2);\n\n            float theta = atan(y, x);\n\n            float diff = theta-lastTheta[0];\n            float origDiff = diff;\n            if (diff < -5.0) {\n                diff += TWO_PI;\n            } else if (diff > 5.0) {\n                diff -= TWO_PI;\n            }\n            theta = lastTheta[0] + diff;\n            gl_FragColor = vec4(theta, diff, lastTheta[2], lastTheta[3]);//[theta, w, normal1Index, normal2Index]\n        }\n    </script> <script id=\"normalCalc\" type=\"x-shader/x-fragment\">\n        precision mediump float;\n        uniform vec2 u_textureDim;\n        uniform vec2 u_textureDimFaces;\n        uniform sampler2D u_faceVertexIndices;\n        uniform sampler2D u_lastPosition;\n        uniform sampler2D u_originalPosition;\n\n        vec3 getPosition(float index1D){\n            vec2 index = vec2(mod(index1D, u_textureDim.x)+0.5, floor(index1D/u_textureDim.x)+0.5);\n            vec2 scaledIndex = index/u_textureDim;\n            return texture2D(u_lastPosition, scaledIndex).xyz + texture2D(u_originalPosition, scaledIndex).xyz;\n        }\n\n        void main(){\n            vec2 fragCoord = gl_FragCoord.xy;\n            vec2 scaledFragCoord = fragCoord/u_textureDimFaces;\n\n            vec3 indices = texture2D(u_faceVertexIndices, scaledFragCoord).xyz;\n\n            vec3 a = getPosition(indices[0]);\n            vec3 b = getPosition(indices[1]);\n            vec3 c = getPosition(indices[2]);\n\n            vec3 normal = normalize(cross(b-a, c-a));\n\n            gl_FragColor = vec4(normal, 0.0);\n        }\n    </script> <script id=\"updateCreaseGeo\" type=\"x-shader/x-fragment\">\n        precision mediump float;\n        uniform vec2 u_textureDim;\n        uniform vec2 u_textureDimCreases;\n        uniform sampler2D u_lastPosition;\n        uniform sampler2D u_originalPosition;\n        uniform sampler2D u_creaseMeta2;\n\n        vec3 getPosition(float index1D){\n            vec2 index = vec2(mod(index1D, u_textureDim.x)+0.5, floor(index1D/u_textureDim.x)+0.5);\n            vec2 scaledIndex = index/u_textureDim;\n            return texture2D(u_lastPosition, scaledIndex).xyz + texture2D(u_originalPosition, scaledIndex).xyz;\n        }\n\n        void main(){\n            vec2 fragCoord = gl_FragCoord.xy;\n            vec2 scaledFragCoord = fragCoord/u_textureDimCreases;\n\n            vec4 creaseMeta = texture2D(u_creaseMeta2, scaledFragCoord);\n\n            vec3 node1 = getPosition(creaseMeta[0]);\n            vec3 node2 = getPosition(creaseMeta[1]);\n            vec3 node3 = getPosition(creaseMeta[2]);\n            vec3 node4 = getPosition(creaseMeta[3]);\n\n            float tol = 0.000001;\n\n            vec3 creaseVector = node4-node3;\n            float creaseLength = length(creaseVector);\n\n            if (abs(creaseLength)<tol) {\n                gl_FragColor = vec4(-1);//disable crease\n                return;\n            }\n            creaseVector /= creaseLength;\n\n            vec3 vector1 = node1-node3;\n            vec3 vector2 = node2-node3;\n\n            float proj1Length = dot(creaseVector, vector1);\n            float proj2Length = dot(creaseVector, vector2);\n\n            float dist1 = sqrt(abs(vector1.x*vector1.x+vector1.y*vector1.y+vector1.z*vector1.z-proj1Length*proj1Length));\n            float dist2 = sqrt(abs(vector2.x*vector2.x+vector2.y*vector2.y+vector2.z*vector2.z-proj2Length*proj2Length));\n\n            if (dist1<tol || dist2<tol){\n                gl_FragColor = vec4(-1);//disable crease\n                return;\n            }\n\n            gl_FragColor = vec4(dist1, dist2, proj1Length/creaseLength, proj2Length/creaseLength);\n        }\n    </script> <script src=\"https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.0/jquery.min.js\" integrity=\"sha512-b6lGn9+1aD2DgwZXuSY4BhhdrDURVzu7f/PASu4H1i5+CRpEalOOz/HNhgmxZTK9lObM1Q7ZG9jONPYz8klIMg==\" crossorigin=\"anonymous\" referrerpolicy=\"no-referrer\"></script> <script src=\"https://cdnjs.cloudflare.com/ajax/libs/flat-ui/2.3.0/js/flat-ui.min.js\" integrity=\"sha512-GG/1z6B4MVJdQOw35lE4otrbjd2WYV+zhXgjUR+DTeaAc7s/ijgWsexEScSOIo8J4RlhC28CVerDjYQSH89ekQ==\" crossorigin=\"anonymous\" referrerpolicy=\"no-referrer\"></script> <script type=\"text/javascript\">// threejs.org/license\n(function(m,na){\"object\"===typeof exports&&\"undefined\"!==typeof module?na(exports):\"function\"===typeof define&&define.amd?define([\"exports\"],na):na(m.THREE=m.THREE||{})})(this,function(m){function na(){}function D(a,b){this.x=a||0;this.y=b||0}function N(a,b,c,d,e,f,g,h,k,l){Object.defineProperty(this,\"id\",{value:lf++});this.uuid=R.generateUUID();this.name=\"\";this.image=void 0!==a?a:N.DEFAULT_IMAGE;this.mipmaps=[];this.mapping=void 0!==b?b:N.DEFAULT_MAPPING;this.wrapS=void 0!==c?c:1001;this.wrapT=\nvoid 0!==d?d:1001;this.magFilter=void 0!==e?e:1006;this.minFilter=void 0!==f?f:1008;this.anisotropy=void 0!==k?k:1;this.format=void 0!==g?g:1023;this.type=void 0!==h?h:1009;this.offset=new D(0,0);this.repeat=new D(1,1);this.generateMipmaps=!0;this.premultiplyAlpha=!1;this.flipY=!0;this.unpackAlignment=4;this.encoding=void 0!==l?l:3E3;this.version=0;this.onUpdate=null}function S(a,b,c,d){this.x=a||0;this.y=b||0;this.z=c||0;this.w=void 0!==d?d:1}function Ab(a,b,c){this.uuid=R.generateUUID();this.width=\na;this.height=b;this.scissor=new S(0,0,a,b);this.scissorTest=!1;this.viewport=new S(0,0,a,b);c=c||{};void 0===c.minFilter&&(c.minFilter=1006);this.texture=new N(void 0,void 0,c.wrapS,c.wrapT,c.magFilter,c.minFilter,c.format,c.type,c.anisotropy,c.encoding);this.depthBuffer=void 0!==c.depthBuffer?c.depthBuffer:!0;this.stencilBuffer=void 0!==c.stencilBuffer?c.stencilBuffer:!0;this.depthTexture=void 0!==c.depthTexture?c.depthTexture:null}function Bb(a,b,c){Ab.call(this,a,b,c);this.activeMipMapLevel=this.activeCubeFace=\n0}function ia(a,b,c,d){this._x=a||0;this._y=b||0;this._z=c||0;this._w=void 0!==d?d:1}function n(a,b,c){this.x=a||0;this.y=b||0;this.z=c||0}function O(){this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];0<arguments.length&&console.error(\"THREE.Matrix4: the constructor no longer reads arguments. use .set() instead.\")}function bb(a,b,c,d,e,f,g,h,k,l,q,p){N.call(this,null,f,g,h,k,l,d,e,q,p);this.image={data:a,width:b,height:c};this.magFilter=void 0!==k?k:1003;this.minFilter=void 0!==l?l:1003;this.flipY=\nthis.generateMipmaps=!1;this.unpackAlignment=1}function Va(a,b,c,d,e,f,g,h,k,l){a=void 0!==a?a:[];N.call(this,a,void 0!==b?b:301,c,d,e,f,g,h,k,l);this.flipY=!1}function Cb(a,b,c){var d=a[0];if(0>=d||0<d)return a;var e=b*c,f=ye[e];void 0===f&&(f=new Float32Array(e),ye[e]=f);if(0!==b)for(d.toArray(f,0),d=1,e=0;d!==b;++d)e+=c,a[d].toArray(f,e);return f}function ze(a,b){var c=Ae[b];void 0===c&&(c=new Int32Array(b),Ae[b]=c);for(var d=0;d!==b;++d)c[d]=a.allocTextureUnit();return c}function mf(a,b){a.uniform1f(this.addr,\nb)}function nf(a,b){a.uniform1i(this.addr,b)}function of(a,b){void 0===b.x?a.uniform2fv(this.addr,b):a.uniform2f(this.addr,b.x,b.y)}function pf(a,b){void 0!==b.x?a.uniform3f(this.addr,b.x,b.y,b.z):void 0!==b.r?a.uniform3f(this.addr,b.r,b.g,b.b):a.uniform3fv(this.addr,b)}function qf(a,b){void 0===b.x?a.uniform4fv(this.addr,b):a.uniform4f(this.addr,b.x,b.y,b.z,b.w)}function rf(a,b){a.uniformMatrix2fv(this.addr,!1,b.elements||b)}function sf(a,b){void 0===b.elements?a.uniformMatrix3fv(this.addr,!1,b):\n(Be.set(b.elements),a.uniformMatrix3fv(this.addr,!1,Be))}function tf(a,b){void 0===b.elements?a.uniformMatrix4fv(this.addr,!1,b):(Ce.set(b.elements),a.uniformMatrix4fv(this.addr,!1,Ce))}function uf(a,b,c){var d=c.allocTextureUnit();a.uniform1i(this.addr,d);c.setTexture2D(b||De,d)}function vf(a,b,c){var d=c.allocTextureUnit();a.uniform1i(this.addr,d);c.setTextureCube(b||Ee,d)}function Fe(a,b){a.uniform2iv(this.addr,b)}function Ge(a,b){a.uniform3iv(this.addr,b)}function He(a,b){a.uniform4iv(this.addr,\nb)}function wf(a){switch(a){case 5126:return mf;case 35664:return of;case 35665:return pf;case 35666:return qf;case 35674:return rf;case 35675:return sf;case 35676:return tf;case 35678:case 36198:return uf;case 35680:return vf;case 5124:case 35670:return nf;case 35667:case 35671:return Fe;case 35668:case 35672:return Ge;case 35669:case 35673:return He}}function xf(a,b){a.uniform1fv(this.addr,b)}function yf(a,b){a.uniform1iv(this.addr,b)}function zf(a,b){a.uniform2fv(this.addr,Cb(b,this.size,2))}function Af(a,\nb){a.uniform3fv(this.addr,Cb(b,this.size,3))}function Bf(a,b){a.uniform4fv(this.addr,Cb(b,this.size,4))}function Cf(a,b){a.uniformMatrix2fv(this.addr,!1,Cb(b,this.size,4))}function Df(a,b){a.uniformMatrix3fv(this.addr,!1,Cb(b,this.size,9))}function Ef(a,b){a.uniformMatrix4fv(this.addr,!1,Cb(b,this.size,16))}function Ff(a,b,c){var d=b.length,e=ze(c,d);a.uniform1iv(this.addr,e);for(a=0;a!==d;++a)c.setTexture2D(b[a]||De,e[a])}function Gf(a,b,c){var d=b.length,e=ze(c,d);a.uniform1iv(this.addr,e);for(a=\n0;a!==d;++a)c.setTextureCube(b[a]||Ee,e[a])}function Hf(a){switch(a){case 5126:return xf;case 35664:return zf;case 35665:return Af;case 35666:return Bf;case 35674:return Cf;case 35675:return Df;case 35676:return Ef;case 35678:return Ff;case 35680:return Gf;case 5124:case 35670:return yf;case 35667:case 35671:return Fe;case 35668:case 35672:return Ge;case 35669:case 35673:return He}}function If(a,b,c){this.id=a;this.addr=c;this.setValue=wf(b.type)}function Jf(a,b,c){this.id=a;this.addr=c;this.size=\nb.size;this.setValue=Hf(b.type)}function Ie(a){this.id=a;this.seq=[];this.map={}}function cb(a,b,c){this.seq=[];this.map={};this.renderer=c;c=a.getProgramParameter(b,a.ACTIVE_UNIFORMS);for(var d=0;d<c;++d){var e=a.getActiveUniform(b,d),f=a.getUniformLocation(b,e.name),g=this,h=e.name,k=h.length;for(Pd.lastIndex=0;;){var l=Pd.exec(h),q=Pd.lastIndex,p=l[1],t=l[3];\"]\"===l[2]&&(p|=0);if(void 0===t||\"[\"===t&&q+2===k){h=g;e=void 0===t?new If(p,e,f):new Jf(p,e,f);h.seq.push(e);h.map[e.id]=e;break}else t=\ng.map[p],void 0===t&&(t=new Ie(p),p=g,g=t,p.seq.push(g),p.map[g.id]=g),g=t}}}function C(a,b,c){return void 0===b&&void 0===c?this.set(a):this.setRGB(a,b,c)}function id(a,b){this.min=void 0!==a?a:new D(Infinity,Infinity);this.max=void 0!==b?b:new D(-Infinity,-Infinity)}function Kf(a,b,c,d,e){var f,g,h,k,l,q,p,t,r,m,u,x,y,A,I,B;this.render=function(a,v,xa,la){if(0!==a.length){v=new n;var H=la.w/la.z,va=.5*la.z,jd=.5*la.w,J=16/la.w,Ga=new D(J*H,J),ga=new n(1,1,0),M=new D(1,1),T=new id;T.min.set(la.x,\nla.y);T.max.set(la.x+(la.z-16),la.y+(la.w-16));if(void 0===A){var J=new Float32Array([-1,-1,0,0,1,-1,1,0,1,1,1,1,-1,1,0,1]),La=new Uint16Array([0,1,2,0,2,3]);u=b.createBuffer();x=b.createBuffer();b.bindBuffer(b.ARRAY_BUFFER,u);b.bufferData(b.ARRAY_BUFFER,J,b.STATIC_DRAW);b.bindBuffer(b.ELEMENT_ARRAY_BUFFER,x);b.bufferData(b.ELEMENT_ARRAY_BUFFER,La,b.STATIC_DRAW);I=b.createTexture();B=b.createTexture();c.bindTexture(b.TEXTURE_2D,I);b.texImage2D(b.TEXTURE_2D,0,b.RGB,16,16,0,b.RGB,b.UNSIGNED_BYTE,null);\nb.texParameteri(b.TEXTURE_2D,b.TEXTURE_WRAP_S,b.CLAMP_TO_EDGE);b.texParameteri(b.TEXTURE_2D,b.TEXTURE_WRAP_T,b.CLAMP_TO_EDGE);b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MAG_FILTER,b.NEAREST);b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MIN_FILTER,b.NEAREST);c.bindTexture(b.TEXTURE_2D,B);b.texImage2D(b.TEXTURE_2D,0,b.RGBA,16,16,0,b.RGBA,b.UNSIGNED_BYTE,null);b.texParameteri(b.TEXTURE_2D,b.TEXTURE_WRAP_S,b.CLAMP_TO_EDGE);b.texParameteri(b.TEXTURE_2D,b.TEXTURE_WRAP_T,b.CLAMP_TO_EDGE);b.texParameteri(b.TEXTURE_2D,\nb.TEXTURE_MAG_FILTER,b.NEAREST);b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MIN_FILTER,b.NEAREST);var J=y={vertexShader:\"uniform lowp int renderType;\\nuniform vec3 screenPosition;\\nuniform vec2 scale;\\nuniform float rotation;\\nuniform sampler2D occlusionMap;\\nattribute vec2 position;\\nattribute vec2 uv;\\nvarying vec2 vUV;\\nvarying float vVisibility;\\nvoid main() {\\nvUV = uv;\\nvec2 pos = position;\\nif ( renderType == 2 ) {\\nvec4 visibility = texture2D( occlusionMap, vec2( 0.1, 0.1 ) );\\nvisibility += texture2D( occlusionMap, vec2( 0.5, 0.1 ) );\\nvisibility += texture2D( occlusionMap, vec2( 0.9, 0.1 ) );\\nvisibility += texture2D( occlusionMap, vec2( 0.9, 0.5 ) );\\nvisibility += texture2D( occlusionMap, vec2( 0.9, 0.9 ) );\\nvisibility += texture2D( occlusionMap, vec2( 0.5, 0.9 ) );\\nvisibility += texture2D( occlusionMap, vec2( 0.1, 0.9 ) );\\nvisibility += texture2D( occlusionMap, vec2( 0.1, 0.5 ) );\\nvisibility += texture2D( occlusionMap, vec2( 0.5, 0.5 ) );\\nvVisibility =        visibility.r / 9.0;\\nvVisibility *= 1.0 - visibility.g / 9.0;\\nvVisibility *=       visibility.b / 9.0;\\nvVisibility *= 1.0 - visibility.a / 9.0;\\npos.x = cos( rotation ) * position.x - sin( rotation ) * position.y;\\npos.y = sin( rotation ) * position.x + cos( rotation ) * position.y;\\n}\\ngl_Position = vec4( ( pos * scale + screenPosition.xy ).xy, screenPosition.z, 1.0 );\\n}\",\nfragmentShader:\"uniform lowp int renderType;\\nuniform sampler2D map;\\nuniform float opacity;\\nuniform vec3 color;\\nvarying vec2 vUV;\\nvarying float vVisibility;\\nvoid main() {\\nif ( renderType == 0 ) {\\ngl_FragColor = vec4( 1.0, 0.0, 1.0, 0.0 );\\n} else if ( renderType == 1 ) {\\ngl_FragColor = texture2D( map, vUV );\\n} else {\\nvec4 texture = texture2D( map, vUV );\\ntexture.a *= opacity * vVisibility;\\ngl_FragColor = texture;\\ngl_FragColor.rgb *= color;\\n}\\n}\"},La=b.createProgram(),z=b.createShader(b.FRAGMENT_SHADER),\nY=b.createShader(b.VERTEX_SHADER),w=\"precision \"+e.precision+\" float;\\n\";b.shaderSource(z,w+J.fragmentShader);b.shaderSource(Y,w+J.vertexShader);b.compileShader(z);b.compileShader(Y);b.attachShader(La,z);b.attachShader(La,Y);b.linkProgram(La);A=La;r=b.getAttribLocation(A,\"position\");m=b.getAttribLocation(A,\"uv\");f=b.getUniformLocation(A,\"renderType\");g=b.getUniformLocation(A,\"map\");h=b.getUniformLocation(A,\"occlusionMap\");k=b.getUniformLocation(A,\"opacity\");l=b.getUniformLocation(A,\"color\");q=b.getUniformLocation(A,\n\"scale\");p=b.getUniformLocation(A,\"rotation\");t=b.getUniformLocation(A,\"screenPosition\")}c.useProgram(A);c.initAttributes();c.enableAttribute(r);c.enableAttribute(m);c.disableUnusedAttributes();b.uniform1i(h,0);b.uniform1i(g,1);b.bindBuffer(b.ARRAY_BUFFER,u);b.vertexAttribPointer(r,2,b.FLOAT,!1,16,0);b.vertexAttribPointer(m,2,b.FLOAT,!1,16,8);b.bindBuffer(b.ELEMENT_ARRAY_BUFFER,x);c.disable(b.CULL_FACE);c.buffers.depth.setMask(!1);La=0;for(z=a.length;La<z;La++)if(J=16/la.w,Ga.set(J*H,J),Y=a[La],v.set(Y.matrixWorld.elements[12],\nY.matrixWorld.elements[13],Y.matrixWorld.elements[14]),v.applyMatrix4(xa.matrixWorldInverse),v.applyMatrix4(xa.projectionMatrix),ga.copy(v),M.x=la.x+ga.x*va+va-8,M.y=la.y+ga.y*jd+jd-8,!0===T.containsPoint(M)){c.activeTexture(b.TEXTURE0);c.bindTexture(b.TEXTURE_2D,null);c.activeTexture(b.TEXTURE1);c.bindTexture(b.TEXTURE_2D,I);b.copyTexImage2D(b.TEXTURE_2D,0,b.RGB,M.x,M.y,16,16,0);b.uniform1i(f,0);b.uniform2f(q,Ga.x,Ga.y);b.uniform3f(t,ga.x,ga.y,ga.z);c.disable(b.BLEND);c.enable(b.DEPTH_TEST);b.drawElements(b.TRIANGLES,\n6,b.UNSIGNED_SHORT,0);c.activeTexture(b.TEXTURE0);c.bindTexture(b.TEXTURE_2D,B);b.copyTexImage2D(b.TEXTURE_2D,0,b.RGBA,M.x,M.y,16,16,0);b.uniform1i(f,1);c.disable(b.DEPTH_TEST);c.activeTexture(b.TEXTURE1);c.bindTexture(b.TEXTURE_2D,I);b.drawElements(b.TRIANGLES,6,b.UNSIGNED_SHORT,0);Y.positionScreen.copy(ga);Y.customUpdateCallback?Y.customUpdateCallback(Y):Y.updateLensFlares();b.uniform1i(f,2);c.enable(b.BLEND);for(var w=0,F=Y.lensFlares.length;w<F;w++){var C=Y.lensFlares[w];.001<C.opacity&&.001<\nC.scale&&(ga.x=C.x,ga.y=C.y,ga.z=C.z,J=C.size*C.scale/la.w,Ga.x=J*H,Ga.y=J,b.uniform3f(t,ga.x,ga.y,ga.z),b.uniform2f(q,Ga.x,Ga.y),b.uniform1f(p,C.rotation),b.uniform1f(k,C.opacity),b.uniform3f(l,C.color.r,C.color.g,C.color.b),c.setBlending(C.blending,C.blendEquation,C.blendSrc,C.blendDst),d.setTexture2D(C.texture,1),b.drawElements(b.TRIANGLES,6,b.UNSIGNED_SHORT,0))}}c.enable(b.CULL_FACE);c.enable(b.DEPTH_TEST);c.buffers.depth.setMask(!0);c.reset()}}}function oc(a,b,c,d,e,f,g,h,k){N.call(this,a,b,\nc,d,e,f,g,h,k);this.needsUpdate=!0}function Lf(a,b,c,d,e){var f,g,h,k,l,q,p,t,r,m,u,x,y,A,I,B,H;function va(a,b){return a.renderOrder!==b.renderOrder?a.renderOrder-b.renderOrder:a.z!==b.z?b.z-a.z:b.id-a.id}var xa,la,ba,Je,jd=new n,J=new ia,Ga=new n;this.render=function(v,n,T){if(0!==v.length){if(void 0===ba){var M=new Float32Array([-.5,-.5,0,0,.5,-.5,1,0,.5,.5,1,1,-.5,.5,0,1]),z=new Uint16Array([0,1,2,0,2,3]);xa=b.createBuffer();la=b.createBuffer();b.bindBuffer(b.ARRAY_BUFFER,xa);b.bufferData(b.ARRAY_BUFFER,\nM,b.STATIC_DRAW);b.bindBuffer(b.ELEMENT_ARRAY_BUFFER,la);b.bufferData(b.ELEMENT_ARRAY_BUFFER,z,b.STATIC_DRAW);M=b.createProgram();z=b.createShader(b.VERTEX_SHADER);var w=b.createShader(b.FRAGMENT_SHADER);b.shaderSource(z,[\"precision \"+e.precision+\" float;\",\"#define SHADER_NAME SpriteMaterial\\nuniform mat4 modelViewMatrix;\\nuniform mat4 projectionMatrix;\\nuniform float rotation;\\nuniform vec2 scale;\\nuniform vec2 uvOffset;\\nuniform vec2 uvScale;\\nattribute vec2 position;\\nattribute vec2 uv;\\nvarying vec2 vUV;\\nvoid main() {\\nvUV = uvOffset + uv * uvScale;\\nvec2 alignedPosition = position * scale;\\nvec2 rotatedPosition;\\nrotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;\\nrotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;\\nvec4 finalPosition;\\nfinalPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );\\nfinalPosition.xy += rotatedPosition;\\nfinalPosition = projectionMatrix * finalPosition;\\ngl_Position = finalPosition;\\n}\"].join(\"\\n\"));\nb.shaderSource(w,[\"precision \"+e.precision+\" float;\",\"#define SHADER_NAME SpriteMaterial\\nuniform vec3 color;\\nuniform sampler2D map;\\nuniform float opacity;\\nuniform int fogType;\\nuniform vec3 fogColor;\\nuniform float fogDensity;\\nuniform float fogNear;\\nuniform float fogFar;\\nuniform float alphaTest;\\nvarying vec2 vUV;\\nvoid main() {\\nvec4 texture = texture2D( map, vUV );\\nif ( texture.a < alphaTest ) discard;\\ngl_FragColor = vec4( color * texture.xyz, texture.a * opacity );\\nif ( fogType > 0 ) {\\nfloat depth = gl_FragCoord.z / gl_FragCoord.w;\\nfloat fogFactor = 0.0;\\nif ( fogType == 1 ) {\\nfogFactor = smoothstep( fogNear, fogFar, depth );\\n} else {\\nconst float LOG2 = 1.442695;\\nfogFactor = exp2( - fogDensity * fogDensity * depth * depth * LOG2 );\\nfogFactor = 1.0 - clamp( fogFactor, 0.0, 1.0 );\\n}\\ngl_FragColor = mix( gl_FragColor, vec4( fogColor, gl_FragColor.w ), fogFactor );\\n}\\n}\"].join(\"\\n\"));\nb.compileShader(z);b.compileShader(w);b.attachShader(M,z);b.attachShader(M,w);b.linkProgram(M);ba=M;B=b.getAttribLocation(ba,\"position\");H=b.getAttribLocation(ba,\"uv\");f=b.getUniformLocation(ba,\"uvOffset\");g=b.getUniformLocation(ba,\"uvScale\");h=b.getUniformLocation(ba,\"rotation\");k=b.getUniformLocation(ba,\"scale\");l=b.getUniformLocation(ba,\"color\");q=b.getUniformLocation(ba,\"map\");p=b.getUniformLocation(ba,\"opacity\");t=b.getUniformLocation(ba,\"modelViewMatrix\");r=b.getUniformLocation(ba,\"projectionMatrix\");\nm=b.getUniformLocation(ba,\"fogType\");u=b.getUniformLocation(ba,\"fogDensity\");x=b.getUniformLocation(ba,\"fogNear\");y=b.getUniformLocation(ba,\"fogFar\");A=b.getUniformLocation(ba,\"fogColor\");I=b.getUniformLocation(ba,\"alphaTest\");M=document.createElementNS(\"http://www.w3.org/1999/xhtml\",\"canvas\");M.width=8;M.height=8;z=M.getContext(\"2d\");z.fillStyle=\"white\";z.fillRect(0,0,8,8);Je=new oc(M)}c.useProgram(ba);c.initAttributes();c.enableAttribute(B);c.enableAttribute(H);c.disableUnusedAttributes();c.disable(b.CULL_FACE);\nc.enable(b.BLEND);b.bindBuffer(b.ARRAY_BUFFER,xa);b.vertexAttribPointer(B,2,b.FLOAT,!1,16,0);b.vertexAttribPointer(H,2,b.FLOAT,!1,16,8);b.bindBuffer(b.ELEMENT_ARRAY_BUFFER,la);b.uniformMatrix4fv(r,!1,T.projectionMatrix.elements);c.activeTexture(b.TEXTURE0);b.uniform1i(q,0);z=M=0;(w=n.fog)?(b.uniform3f(A,w.color.r,w.color.g,w.color.b),w.isFog?(b.uniform1f(x,w.near),b.uniform1f(y,w.far),b.uniform1i(m,1),z=M=1):w.isFogExp2&&(b.uniform1f(u,w.density),b.uniform1i(m,2),z=M=2)):(b.uniform1i(m,0),z=M=0);\nfor(var D=0,C=v.length;D<C;D++)w=v[D],w.modelViewMatrix.multiplyMatrices(T.matrixWorldInverse,w.matrixWorld),w.z=-w.modelViewMatrix.elements[14];v.sort(va);for(var ga=[],D=0,C=v.length;D<C;D++){w=v[D];var G=w.material;if(!1!==G.visible){w.onBeforeRender(a,n,T,void 0,G,void 0);b.uniform1f(I,G.alphaTest);b.uniformMatrix4fv(t,!1,w.modelViewMatrix.elements);w.matrixWorld.decompose(jd,J,Ga);ga[0]=Ga.x;ga[1]=Ga.y;var F=0;n.fog&&G.fog&&(F=z);M!==F&&(b.uniform1i(m,F),M=F);null!==G.map?(b.uniform2f(f,G.map.offset.x,\nG.map.offset.y),b.uniform2f(g,G.map.repeat.x,G.map.repeat.y)):(b.uniform2f(f,0,0),b.uniform2f(g,1,1));b.uniform1f(p,G.opacity);b.uniform3f(l,G.color.r,G.color.g,G.color.b);b.uniform1f(h,G.rotation);b.uniform2fv(k,ga);c.setBlending(G.blending,G.blendEquation,G.blendSrc,G.blendDst,G.blendEquationAlpha,G.blendSrcAlpha,G.blendDstAlpha,G.premultipliedAlpha);c.buffers.depth.setTest(G.depthTest);c.buffers.depth.setMask(G.depthWrite);d.setTexture2D(G.map||Je,0);b.drawElements(b.TRIANGLES,6,b.UNSIGNED_SHORT,\n0);w.onAfterRender(a,n,T,void 0,G,void 0)}}c.enable(b.CULL_FACE);c.reset()}}}function P(){Object.defineProperty(this,\"id\",{value:Mf++});this.uuid=R.generateUUID();this.name=\"\";this.type=\"Material\";this.lights=this.fog=!0;this.blending=1;this.side=0;this.flatShading=!1;this.vertexColors=0;this.opacity=1;this.transparent=!1;this.blendSrc=204;this.blendDst=205;this.blendEquation=100;this.blendEquationAlpha=this.blendDstAlpha=this.blendSrcAlpha=null;this.depthFunc=3;this.depthWrite=this.depthTest=!0;\nthis.clippingPlanes=null;this.clipShadows=this.clipIntersection=!1;this.colorWrite=!0;this.precision=null;this.polygonOffset=!1;this.polygonOffsetUnits=this.polygonOffsetFactor=0;this.dithering=!1;this.alphaTest=0;this.premultipliedAlpha=!1;this.overdraw=0;this.visible=!0;this.userData={};this.needsUpdate=!0}function ya(a){P.call(this);this.type=\"ShaderMaterial\";this.defines={};this.uniforms={};this.vertexShader=\"void main() {\\n\\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\\n}\";\nthis.fragmentShader=\"void main() {\\n\\tgl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\\n}\";this.linewidth=1;this.wireframe=!1;this.wireframeLinewidth=1;this.morphNormals=this.morphTargets=this.skinning=this.clipping=this.lights=this.fog=!1;this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1};this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv2:[0,0]};this.index0AttributeName=void 0;void 0!==a&&(void 0!==a.attributes&&console.error(\"THREE.ShaderMaterial: attributes should now be defined in THREE.BufferGeometry instead.\"),\nthis.setValues(a))}function Wa(a){P.call(this);this.type=\"MeshDepthMaterial\";this.depthPacking=3200;this.morphTargets=this.skinning=!1;this.displacementMap=this.alphaMap=this.map=null;this.displacementScale=1;this.displacementBias=0;this.wireframe=!1;this.wireframeLinewidth=1;this.lights=this.fog=!1;this.setValues(a)}function Xa(a){P.call(this);this.type=\"MeshDistanceMaterial\";this.referencePosition=new n;this.nearDistance=1;this.farDistance=1E3;this.morphTargets=this.skinning=!1;this.displacementMap=\nthis.alphaMap=this.map=null;this.displacementScale=1;this.displacementBias=0;this.lights=this.fog=!1;this.setValues(a)}function Pa(a,b){this.min=void 0!==a?a:new n(Infinity,Infinity,Infinity);this.max=void 0!==b?b:new n(-Infinity,-Infinity,-Infinity)}function Ca(a,b){this.center=void 0!==a?a:new n;this.radius=void 0!==b?b:0}function qa(){this.elements=[1,0,0,0,1,0,0,0,1];0<arguments.length&&console.error(\"THREE.Matrix3: the constructor no longer reads arguments. use .set() instead.\")}function za(a,\nb){this.normal=void 0!==a?a:new n(1,0,0);this.constant=void 0!==b?b:0}function kd(a,b,c,d,e,f){this.planes=[void 0!==a?a:new za,void 0!==b?b:new za,void 0!==c?c:new za,void 0!==d?d:new za,void 0!==e?e:new za,void 0!==f?f:new za]}function Ke(a,b,c){function d(b,c,d,e,f,g){var h=b.geometry;var l=p;var k=b.customDepthMaterial;d&&(l=t,k=b.customDistanceMaterial);k?l=k:(k=!1,c.morphTargets&&(h&&h.isBufferGeometry?k=h.morphAttributes&&h.morphAttributes.position&&0<h.morphAttributes.position.length:h&&h.isGeometry&&\n(k=h.morphTargets&&0<h.morphTargets.length)),b.isSkinnedMesh&&!1===c.skinning&&console.warn(\"THREE.WebGLShadowMap: THREE.SkinnedMesh with material.skinning set to false:\",b),b=b.isSkinnedMesh&&c.skinning,h=0,k&&(h|=1),b&&(h|=2),l=l[h]);a.localClippingEnabled&&!0===c.clipShadows&&0!==c.clippingPlanes.length&&(h=l.uuid,k=c.uuid,b=r[h],void 0===b&&(b={},r[h]=b),h=b[k],void 0===h&&(h=l.clone(),b[k]=h),l=h);l.visible=c.visible;l.wireframe=c.wireframe;k=c.side;B.renderSingleSided&&2==k&&(k=0);B.renderReverseSided&&\n(0===k?k=1:1===k&&(k=0));l.side=k;l.clipShadows=c.clipShadows;l.clippingPlanes=c.clippingPlanes;l.clipIntersection=c.clipIntersection;l.wireframeLinewidth=c.wireframeLinewidth;l.linewidth=c.linewidth;d&&l.isMeshDistanceMaterial&&(l.referencePosition.copy(e),l.nearDistance=f,l.farDistance=g);return l}function e(c,g,h,l){var k;if(!1!==c.visible){if(c.layers.test(g.layers)&&(c.isMesh||c.isLine||c.isPoints)&&c.castShadow&&(!c.frustumCulled||f.intersectsObject(c))){c.modelViewMatrix.multiplyMatrices(h.matrixWorldInverse,\nc.matrixWorld);var p=b.update(c),t=c.material;if(Array.isArray(t))for(var r=p.groups,A=0,m=r.length;A<m;A++){var v=r[A];(k=t[v.materialIndex])&&k.visible&&(k=d(c,k,l,q,h.near,h.far),a.renderBufferDirect(h,null,p,k,c,v))}else t.visible&&(k=d(c,t,l,q,h.near,h.far),a.renderBufferDirect(h,null,p,k,c,null))}c=c.children;p=0;for(t=c.length;p<t;p++)e(c[p],g,h,l)}}var f=new kd,g=new O,h=new D,k=new D(c,c),l=new n,q=new n,p=Array(4),t=Array(4),r={},m=[new n(1,0,0),new n(-1,0,0),new n(0,0,1),new n(0,0,-1),\nnew n(0,1,0),new n(0,-1,0)],u=[new n(0,1,0),new n(0,1,0),new n(0,1,0),new n(0,1,0),new n(0,0,1),new n(0,0,-1)],x=[new S,new S,new S,new S,new S,new S];for(c=0;4!==c;++c){var y=0!==(c&1),A=0!==(c&2),I=new Wa({depthPacking:3201,morphTargets:y,skinning:A});p[c]=I;y=new Xa({morphTargets:y,skinning:A});t[c]=y}var B=this;this.enabled=!1;this.autoUpdate=!0;this.needsUpdate=!1;this.type=1;this.renderSingleSided=this.renderReverseSided=!0;this.render=function(b,c,d){if(!1!==B.enabled&&(!1!==B.autoUpdate||\n!1!==B.needsUpdate)&&0!==b.length){var p=a.state;p.disable(a.context.BLEND);p.buffers.color.setClear(1,1,1,1);p.buffers.depth.setTest(!0);p.setScissorTest(!1);for(var t,r=0,A=b.length;r<A;r++){var v=b[r];t=v.shadow;var I=v&&v.isPointLight;if(void 0===t)console.warn(\"THREE.WebGLShadowMap:\",v,\"has no shadow.\");else{var n=t.camera;h.copy(t.mapSize);h.min(k);if(I){var y=h.x,H=h.y;x[0].set(2*y,H,y,H);x[1].set(0,H,y,H);x[2].set(3*y,H,y,H);x[3].set(y,H,y,H);x[4].set(3*y,0,y,H);x[5].set(y,0,y,H);h.x*=4;h.y*=\n2}null===t.map&&(t.map=new Ab(h.x,h.y,{minFilter:1003,magFilter:1003,format:1023}),t.map.texture.name=v.name+\".shadowMap\",n.updateProjectionMatrix());t.isSpotLightShadow&&t.update(v);y=t.map;H=t.matrix;q.setFromMatrixPosition(v.matrixWorld);n.position.copy(q);I?(t=6,H.makeTranslation(-q.x,-q.y,-q.z)):(t=1,l.setFromMatrixPosition(v.target.matrixWorld),n.lookAt(l),n.updateMatrixWorld(),H.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),H.multiply(n.projectionMatrix),H.multiply(n.matrixWorldInverse));a.setRenderTarget(y);\na.clear();for(v=0;v<t;v++)I&&(l.copy(n.position),l.add(m[v]),n.up.copy(u[v]),n.lookAt(l),n.updateMatrixWorld(),p.viewport(x[v])),g.multiplyMatrices(n.projectionMatrix,n.matrixWorldInverse),f.setFromMatrix(g),e(c,d,n,I)}}B.needsUpdate=!1}}}function Nf(a){var b={};return{get:function(a){a.isInterleavedBufferAttribute&&(a=a.data);return b[a.uuid]},remove:function(c){c.isInterleavedBufferAttribute&&(c=c.data);var d=b[c.uuid];d&&(a.deleteBuffer(d.buffer),delete b[c.uuid])},update:function(c,d){c.isInterleavedBufferAttribute&&\n(c=c.data);var e=b[c.uuid];if(void 0===e){var e=c.uuid,f=c.array,g=c.dynamic?a.DYNAMIC_DRAW:a.STATIC_DRAW,h=a.createBuffer();a.bindBuffer(d,h);a.bufferData(d,f,g);c.onUploadCallback();d=a.FLOAT;f instanceof Float32Array?d=a.FLOAT:f instanceof Float64Array?console.warn(\"THREE.WebGLAttributes: Unsupported data buffer format: Float64Array.\"):f instanceof Uint16Array?d=a.UNSIGNED_SHORT:f instanceof Int16Array?d=a.SHORT:f instanceof Uint32Array?d=a.UNSIGNED_INT:f instanceof Int32Array?d=a.INT:f instanceof\nInt8Array?d=a.BYTE:f instanceof Uint8Array&&(d=a.UNSIGNED_BYTE);b[e]={buffer:h,type:d,bytesPerElement:f.BYTES_PER_ELEMENT,version:c.version}}else e.version<c.version&&(f=c,h=f.array,g=f.updateRange,a.bindBuffer(d,e.buffer),!1===f.dynamic?a.bufferData(d,h,a.STATIC_DRAW):-1===g.count?a.bufferSubData(d,0,h):0===g.count?console.error(\"THREE.WebGLObjects.updateBuffer: dynamic THREE.BufferAttribute marked as needsUpdate but updateRange.count is 0, ensure you are using set methods or updating manually.\"):\n(a.bufferSubData(d,g.offset*h.BYTES_PER_ELEMENT,h.subarray(g.offset,g.offset+g.count)),g.count=-1),e.version=c.version)}}}function Ya(a,b,c,d){this._x=a||0;this._y=b||0;this._z=c||0;this._order=d||Ya.DefaultOrder}function Qd(){this.mask=1}function w(){Object.defineProperty(this,\"id\",{value:Of++});this.uuid=R.generateUUID();this.name=\"\";this.type=\"Object3D\";this.parent=null;this.children=[];this.up=w.DefaultUp.clone();var a=new n,b=new Ya,c=new ia,d=new n(1,1,1);b.onChange(function(){c.setFromEuler(b,\n!1)});c.onChange(function(){b.setFromQuaternion(c,void 0,!1)});Object.defineProperties(this,{position:{enumerable:!0,value:a},rotation:{enumerable:!0,value:b},quaternion:{enumerable:!0,value:c},scale:{enumerable:!0,value:d},modelViewMatrix:{value:new O},normalMatrix:{value:new qa}});this.matrix=new O;this.matrixWorld=new O;this.matrixAutoUpdate=w.DefaultMatrixAutoUpdate;this.matrixWorldNeedsUpdate=!1;this.layers=new Qd;this.visible=!0;this.receiveShadow=this.castShadow=!1;this.frustumCulled=!0;this.renderOrder=\n0;this.userData={}}function Ma(){w.call(this);this.type=\"Camera\";this.matrixWorldInverse=new O;this.projectionMatrix=new O}function Db(a,b,c,d,e,f){Ma.call(this);this.type=\"OrthographicCamera\";this.zoom=1;this.view=null;this.left=a;this.right=b;this.top=c;this.bottom=d;this.near=void 0!==e?e:.1;this.far=void 0!==f?f:2E3;this.updateProjectionMatrix()}function ja(a,b,c,d){Ma.call(this);this.type=\"PerspectiveCamera\";this.fov=void 0!==a?a:50;this.zoom=1;this.near=void 0!==c?c:.1;this.far=void 0!==d?d:\n2E3;this.focus=10;this.aspect=void 0!==b?b:1;this.view=null;this.filmGauge=35;this.filmOffset=0;this.updateProjectionMatrix()}function Qa(a,b,c,d,e,f){this.a=a;this.b=b;this.c=c;this.normal=d&&d.isVector3?d:new n;this.vertexNormals=Array.isArray(d)?d:[];this.color=e&&e.isColor?e:new C;this.vertexColors=Array.isArray(e)?e:[];this.materialIndex=void 0!==f?f:0}function Q(){Object.defineProperty(this,\"id\",{value:Rd++});this.uuid=R.generateUUID();this.name=\"\";this.type=\"Geometry\";this.vertices=[];this.colors=\n[];this.faces=[];this.faceVertexUvs=[[]];this.morphTargets=[];this.morphNormals=[];this.skinWeights=[];this.skinIndices=[];this.lineDistances=[];this.boundingSphere=this.boundingBox=null;this.groupsNeedUpdate=this.lineDistancesNeedUpdate=this.colorsNeedUpdate=this.normalsNeedUpdate=this.uvsNeedUpdate=this.verticesNeedUpdate=this.elementsNeedUpdate=!1}function K(a,b,c){if(Array.isArray(a))throw new TypeError(\"THREE.BufferAttribute: array should be a Typed Array.\");this.uuid=R.generateUUID();this.name=\n\"\";this.array=a;this.itemSize=b;this.count=void 0!==a?a.length/b:0;this.normalized=!0===c;this.dynamic=!1;this.updateRange={offset:0,count:-1};this.onUploadCallback=function(){};this.version=0}function pc(a,b){K.call(this,new Int8Array(a),b)}function qc(a,b){K.call(this,new Uint8Array(a),b)}function rc(a,b){K.call(this,new Uint8ClampedArray(a),b)}function sc(a,b){K.call(this,new Int16Array(a),b)}function db(a,b){K.call(this,new Uint16Array(a),b)}function tc(a,b){K.call(this,new Int32Array(a),b)}function eb(a,\nb){K.call(this,new Uint32Array(a),b)}function z(a,b){K.call(this,new Float32Array(a),b)}function uc(a,b){K.call(this,new Float64Array(a),b)}function Le(){this.indices=[];this.vertices=[];this.normals=[];this.colors=[];this.uvs=[];this.uvs2=[];this.groups=[];this.morphTargets={};this.skinWeights=[];this.skinIndices=[];this.boundingSphere=this.boundingBox=null;this.groupsNeedUpdate=this.uvsNeedUpdate=this.colorsNeedUpdate=this.normalsNeedUpdate=this.verticesNeedUpdate=!1}function Sd(a){if(0===a.length)return-Infinity;\nfor(var b=a[0],c=1,d=a.length;c<d;++c)a[c]>b&&(b=a[c]);return b}function F(){Object.defineProperty(this,\"id\",{value:Rd++});this.uuid=R.generateUUID();this.name=\"\";this.type=\"BufferGeometry\";this.index=null;this.attributes={};this.morphAttributes={};this.groups=[];this.boundingSphere=this.boundingBox=null;this.drawRange={start:0,count:Infinity}}function Eb(a,b,c,d,e,f){Q.call(this);this.type=\"BoxGeometry\";this.parameters={width:a,height:b,depth:c,widthSegments:d,heightSegments:e,depthSegments:f};this.fromBufferGeometry(new fb(a,\nb,c,d,e,f));this.mergeVertices()}function fb(a,b,c,d,e,f){function g(a,b,c,d,e,f,g,m,va,xa,la){var A=f/va,v=g/xa,u=f/2,x=g/2,I=m/2;g=va+1;var B=xa+1,y=f=0,H,w,z=new n;for(w=0;w<B;w++){var D=w*v-x;for(H=0;H<g;H++)z[a]=(H*A-u)*d,z[b]=D*e,z[c]=I,l.push(z.x,z.y,z.z),z[a]=0,z[b]=0,z[c]=0<m?1:-1,q.push(z.x,z.y,z.z),p.push(H/va),p.push(1-w/xa),f+=1}for(w=0;w<xa;w++)for(H=0;H<va;H++)a=t+H+g*(w+1),b=t+(H+1)+g*(w+1),c=t+(H+1)+g*w,k.push(t+H+g*w,a,c),k.push(a,b,c),y+=6;h.addGroup(r,y,la);r+=y;t+=f}F.call(this);\nthis.type=\"BoxBufferGeometry\";this.parameters={width:a,height:b,depth:c,widthSegments:d,heightSegments:e,depthSegments:f};var h=this;d=Math.floor(d)||1;e=Math.floor(e)||1;f=Math.floor(f)||1;var k=[],l=[],q=[],p=[],t=0,r=0;g(\"z\",\"y\",\"x\",-1,-1,c,b,a,f,e,0);g(\"z\",\"y\",\"x\",1,-1,c,b,-a,f,e,1);g(\"x\",\"z\",\"y\",1,1,a,c,b,d,f,2);g(\"x\",\"z\",\"y\",1,-1,a,c,-b,d,f,3);g(\"x\",\"y\",\"z\",1,-1,a,b,c,d,e,4);g(\"x\",\"y\",\"z\",-1,-1,a,b,-c,d,e,5);this.setIndex(k);this.addAttribute(\"position\",new z(l,3));this.addAttribute(\"normal\",\nnew z(q,3));this.addAttribute(\"uv\",new z(p,2))}function vc(a,b,c,d){Q.call(this);this.type=\"PlaneGeometry\";this.parameters={width:a,height:b,widthSegments:c,heightSegments:d};this.fromBufferGeometry(new gb(a,b,c,d));this.mergeVertices()}function gb(a,b,c,d){F.call(this);this.type=\"PlaneBufferGeometry\";this.parameters={width:a,height:b,widthSegments:c,heightSegments:d};var e=a/2,f=b/2;c=Math.floor(c)||1;d=Math.floor(d)||1;var g=c+1,h=d+1,k=a/c,l=b/d,q=[],p=[],t=[],r=[];for(a=0;a<h;a++){var m=a*l-f;\nfor(b=0;b<g;b++)p.push(b*k-e,-m,0),t.push(0,0,1),r.push(b/c),r.push(1-a/d)}for(a=0;a<d;a++)for(b=0;b<c;b++)e=b+g*(a+1),f=b+1+g*(a+1),h=b+1+g*a,q.push(b+g*a,e,h),q.push(e,f,h);this.setIndex(q);this.addAttribute(\"position\",new z(p,3));this.addAttribute(\"normal\",new z(t,3));this.addAttribute(\"uv\",new z(r,2))}function sa(a){P.call(this);this.type=\"MeshBasicMaterial\";this.color=new C(16777215);this.lightMap=this.map=null;this.lightMapIntensity=1;this.aoMap=null;this.aoMapIntensity=1;this.envMap=this.alphaMap=\nthis.specularMap=null;this.combine=0;this.reflectivity=1;this.refractionRatio=.98;this.wireframe=!1;this.wireframeLinewidth=1;this.wireframeLinejoin=this.wireframeLinecap=\"round\";this.lights=this.morphTargets=this.skinning=!1;this.setValues(a)}function hb(a,b){this.origin=void 0!==a?a:new n;this.direction=void 0!==b?b:new n}function Fb(a,b){this.start=void 0!==a?a:new n;this.end=void 0!==b?b:new n}function Ra(a,b,c){this.a=void 0!==a?a:new n;this.b=void 0!==b?b:new n;this.c=void 0!==c?c:new n}function fa(a,\nb){w.call(this);this.type=\"Mesh\";this.geometry=void 0!==a?a:new F;this.material=void 0!==b?b:new sa({color:16777215*Math.random()});this.drawMode=0;this.updateMorphTargets()}function Pf(a,b,c,d){function e(a,c){b.buffers.color.setClear(a.r,a.g,a.b,c,d)}var f=new C(0),g=0,h,k,l;return{getClearColor:function(){return f},setClearColor:function(a,b){f.set(a);g=void 0!==b?b:1;e(f,g)},getClearAlpha:function(){return g},setClearAlpha:function(a){g=a;e(f,g)},render:function(b,d,t,r){d=d.background;null===\nd?e(f,g):d&&d.isColor&&(e(d,1),r=!0);(a.autoClear||r)&&a.clear(a.autoClearColor,a.autoClearDepth,a.autoClearStencil);d&&d.isCubeTexture?(void 0===l&&(l=new fa(new fb(1,1,1),new ya({uniforms:ib.cube.uniforms,vertexShader:ib.cube.vertexShader,fragmentShader:ib.cube.fragmentShader,side:1,depthTest:!0,depthWrite:!1,polygonOffset:!0,fog:!1})),l.geometry.removeAttribute(\"normal\"),l.geometry.removeAttribute(\"uv\"),l.onBeforeRender=function(a,b,c){a=c.far;this.matrixWorld.makeScale(a,a,a);this.matrixWorld.copyPosition(c.matrixWorld);\nthis.material.polygonOffsetUnits=10*a},c.update(l.geometry)),l.material.uniforms.tCube.value=d,b.push(l,l.geometry,l.material,0,null)):d&&d.isTexture&&(void 0===h&&(h=new Db(-1,1,1,-1,0,1),k=new fa(new gb(2,2),new sa({depthTest:!1,depthWrite:!1,fog:!1})),c.update(k.geometry)),k.material.map=d,a.renderBufferDirect(h,null,k.geometry,k.material,k,null))}}}function Qf(a,b){return a.renderOrder!==b.renderOrder?a.renderOrder-b.renderOrder:a.program&&b.program&&a.program!==b.program?a.program.id-b.program.id:\na.material.id!==b.material.id?a.material.id-b.material.id:a.z!==b.z?a.z-b.z:a.id-b.id}function Rf(a,b){return a.renderOrder!==b.renderOrder?a.renderOrder-b.renderOrder:a.z!==b.z?b.z-a.z:a.id-b.id}function Sf(){var a=[],b=0,c=[],d=[];return{opaque:c,transparent:d,init:function(){b=0;c.length=0;d.length=0},push:function(e,f,g,h,k){var l=a[b];void 0===l?(l={id:e.id,object:e,geometry:f,material:g,program:g.program,renderOrder:e.renderOrder,z:h,group:k},a[b]=l):(l.id=e.id,l.object=e,l.geometry=f,l.material=\ng,l.program=g.program,l.renderOrder=e.renderOrder,l.z=h,l.group=k);(!0===g.transparent?d:c).push(l);b++},sort:function(){1<c.length&&c.sort(Qf);1<d.length&&d.sort(Rf)}}}function Tf(){var a={};return{get:function(b,c){b=b.id+\",\"+c.id;c=a[b];void 0===c&&(c=new Sf,a[b]=c);return c},dispose:function(){a={}}}}function Uf(a,b){return Math.abs(b[1])-Math.abs(a[1])}function Vf(a){var b={},c=new Float32Array(8);return{update:function(d,e,f,g){var h=d.morphTargetInfluences,k=h.length;d=b[e.id];if(void 0===\nd){d=[];for(var l=0;l<k;l++)d[l]=[l,0];b[e.id]=d}var q=f.morphTargets&&e.morphAttributes.position;f=f.morphNormals&&e.morphAttributes.normal;for(l=0;l<k;l++){var p=d[l];0!==p[1]&&(q&&e.removeAttribute(\"morphTarget\"+l),f&&e.removeAttribute(\"morphNormal\"+l))}for(l=0;l<k;l++)p=d[l],p[0]=l,p[1]=h[l];d.sort(Uf);for(l=0;8>l;l++){if(p=d[l])if(h=p[0],p=p[1]){q&&e.addAttribute(\"morphTarget\"+l,q[h]);f&&e.addAttribute(\"morphNormal\"+l,f[h]);c[l]=p;continue}c[l]=0}g.getUniforms().setValue(a,\"morphTargetInfluences\",\nc)}}}function Wf(a,b,c){var d,e,f;this.setMode=function(a){d=a};this.setIndex=function(a){e=a.type;f=a.bytesPerElement};this.render=function(b,h){a.drawElements(d,h,e,b*f);c.calls++;c.vertices+=h;d===a.TRIANGLES?c.faces+=h/3:d===a.POINTS&&(c.points+=h)};this.renderInstances=function(g,h,k){var l=b.get(\"ANGLE_instanced_arrays\");null===l?console.error(\"THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.\"):(l.drawElementsInstancedANGLE(d,\nk,e,h*f,g.maxInstancedCount),c.calls++,c.vertices+=k*g.maxInstancedCount,d===a.TRIANGLES?c.faces+=g.maxInstancedCount*k/3:d===a.POINTS&&(c.points+=g.maxInstancedCount*k))}}function Xf(a,b,c){var d;this.setMode=function(a){d=a};this.render=function(b,f){a.drawArrays(d,b,f);c.calls++;c.vertices+=f;d===a.TRIANGLES?c.faces+=f/3:d===a.POINTS&&(c.points+=f)};this.renderInstances=function(e,f,g){var h=b.get(\"ANGLE_instanced_arrays\");if(null===h)console.error(\"THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.\");\nelse{var k=e.attributes.position;k.isInterleavedBufferAttribute?(g=k.data.count,h.drawArraysInstancedANGLE(d,0,g,e.maxInstancedCount)):h.drawArraysInstancedANGLE(d,f,g,e.maxInstancedCount);c.calls++;c.vertices+=g*e.maxInstancedCount;d===a.TRIANGLES?c.faces+=e.maxInstancedCount*g/3:d===a.POINTS&&(c.points+=e.maxInstancedCount*g)}}}function Yf(a,b,c){function d(a){a=a.target;var g=e[a.id];null!==g.index&&b.remove(g.index);for(var k in g.attributes)b.remove(g.attributes[k]);a.removeEventListener(\"dispose\",\nd);delete e[a.id];if(k=f[a.id])b.remove(k),delete f[a.id];if(k=f[g.id])b.remove(k),delete f[g.id];c.geometries--}var e={},f={};return{get:function(a,b){var f=e[b.id];if(f)return f;b.addEventListener(\"dispose\",d);b.isBufferGeometry?f=b:b.isGeometry&&(void 0===b._bufferGeometry&&(b._bufferGeometry=(new F).setFromObject(a)),f=b._bufferGeometry);e[b.id]=f;c.geometries++;return f},update:function(c){var d=c.index,e=c.attributes;null!==d&&b.update(d,a.ELEMENT_ARRAY_BUFFER);for(var f in e)b.update(e[f],\na.ARRAY_BUFFER);c=c.morphAttributes;for(f in c)for(var d=c[f],e=0,g=d.length;e<g;e++)b.update(d[e],a.ARRAY_BUFFER)},getWireframeAttribute:function(c){var d=f[c.id];if(d)return d;d=[];var e=c.index;var g=c.attributes;if(null!==e){var q=e.array;for(var p=0,t=q.length;p<t;p+=3){var r=q[p+0];g=q[p+1];e=q[p+2];d.push(r,g,g,e,e,r)}}else for(q=g.position.array,p=0,t=q.length/3-1;p<t;p+=3)r=p+0,g=p+1,e=p+2,d.push(r,g,g,e,e,r);d=new (65535<Sd(d)?eb:db)(d,1);b.update(d,a.ELEMENT_ARRAY_BUFFER);return f[c.id]=\nd}}}function Zf(){var a={};return{get:function(b){if(void 0!==a[b.id])return a[b.id];switch(b.type){case \"DirectionalLight\":var c={direction:new n,color:new C,shadow:!1,shadowBias:0,shadowRadius:1,shadowMapSize:new D};break;case \"SpotLight\":c={position:new n,direction:new n,color:new C,distance:0,coneCos:0,penumbraCos:0,decay:0,shadow:!1,shadowBias:0,shadowRadius:1,shadowMapSize:new D};break;case \"PointLight\":c={position:new n,color:new C,distance:0,decay:0,shadow:!1,shadowBias:0,shadowRadius:1,shadowMapSize:new D,\nshadowCameraNear:1,shadowCameraFar:1E3};break;case \"HemisphereLight\":c={direction:new n,skyColor:new C,groundColor:new C};break;case \"RectAreaLight\":c={color:new C,position:new n,halfWidth:new n,halfHeight:new n}}return a[b.id]=c}}}function $f(){var a=new Zf,b={hash:\"\",ambient:[0,0,0],directional:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotShadowMap:[],spotShadowMatrix:[],rectArea:[],point:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[]},c=new n,d=new O,e=new O;return{setup:function(f,\ng,h){for(var k,l=0,q=0,p=0,t=0,r=0,m=0,u=0,x=0,n=h.matrixWorldInverse,A=0,I=f.length;A<I;A++){var B=f[A];k=B.color;var H=B.intensity,va=B.distance,xa=B.shadow&&B.shadow.map?B.shadow.map.texture:null;if(B.isAmbientLight)l+=k.r*H,q+=k.g*H,p+=k.b*H;else if(B.isDirectionalLight){h=a.get(B);h.color.copy(B.color).multiplyScalar(B.intensity);h.direction.setFromMatrixPosition(B.matrixWorld);c.setFromMatrixPosition(B.target.matrixWorld);h.direction.sub(c);h.direction.transformDirection(n);if(h.shadow=B.castShadow)k=\nB.shadow,h.shadowBias=k.bias,h.shadowRadius=k.radius,h.shadowMapSize=k.mapSize;b.directionalShadowMap[t]=xa;b.directionalShadowMatrix[t]=B.shadow.matrix;b.directional[t]=h;t++}else if(B.isSpotLight){h=a.get(B);h.position.setFromMatrixPosition(B.matrixWorld);h.position.applyMatrix4(n);h.color.copy(k).multiplyScalar(H);h.distance=va;h.direction.setFromMatrixPosition(B.matrixWorld);c.setFromMatrixPosition(B.target.matrixWorld);h.direction.sub(c);h.direction.transformDirection(n);h.coneCos=Math.cos(B.angle);\nh.penumbraCos=Math.cos(B.angle*(1-B.penumbra));h.decay=0===B.distance?0:B.decay;if(h.shadow=B.castShadow)k=B.shadow,h.shadowBias=k.bias,h.shadowRadius=k.radius,h.shadowMapSize=k.mapSize;b.spotShadowMap[m]=xa;b.spotShadowMatrix[m]=B.shadow.matrix;b.spot[m]=h;m++}else if(B.isRectAreaLight)h=a.get(B),h.color.copy(k).multiplyScalar(H/(B.width*B.height)),h.position.setFromMatrixPosition(B.matrixWorld),h.position.applyMatrix4(n),e.identity(),d.copy(B.matrixWorld),d.premultiply(n),e.extractRotation(d),h.halfWidth.set(.5*\nB.width,0,0),h.halfHeight.set(0,.5*B.height,0),h.halfWidth.applyMatrix4(e),h.halfHeight.applyMatrix4(e),b.rectArea[u]=h,u++;else if(B.isPointLight){h=a.get(B);h.position.setFromMatrixPosition(B.matrixWorld);h.position.applyMatrix4(n);h.color.copy(B.color).multiplyScalar(B.intensity);h.distance=B.distance;h.decay=0===B.distance?0:B.decay;if(h.shadow=B.castShadow)k=B.shadow,h.shadowBias=k.bias,h.shadowRadius=k.radius,h.shadowMapSize=k.mapSize,h.shadowCameraNear=k.camera.near,h.shadowCameraFar=k.camera.far;\nb.pointShadowMap[r]=xa;b.pointShadowMatrix[r]=B.shadow.matrix;b.point[r]=h;r++}else B.isHemisphereLight&&(h=a.get(B),h.direction.setFromMatrixPosition(B.matrixWorld),h.direction.transformDirection(n),h.direction.normalize(),h.skyColor.copy(B.color).multiplyScalar(H),h.groundColor.copy(B.groundColor).multiplyScalar(H),b.hemi[x]=h,x++)}b.ambient[0]=l;b.ambient[1]=q;b.ambient[2]=p;b.directional.length=t;b.spot.length=m;b.rectArea.length=u;b.point.length=r;b.hemi.length=x;b.hash=t+\",\"+r+\",\"+m+\",\"+u+\",\"+\nx+\",\"+g.length},state:b}}function ag(a,b){var c={};return{update:function(d){var e=b.frame,f=d.geometry,g=a.get(d,f);c[g.id]!==e&&(f.isGeometry&&g.updateFromObject(d),a.update(g),c[g.id]=e);return g},clear:function(){c={}}}}function bg(a){a=a.split(\"\\n\");for(var b=0;b<a.length;b++)a[b]=b+1+\": \"+a[b];return a.join(\"\\n\")}function Me(a,b,c){var d=a.createShader(b);a.shaderSource(d,c);a.compileShader(d);!1===a.getShaderParameter(d,a.COMPILE_STATUS)&&console.error(\"THREE.WebGLShader: Shader couldn't compile.\");\n\"\"!==a.getShaderInfoLog(d)&&console.warn(\"THREE.WebGLShader: gl.getShaderInfoLog()\",b===a.VERTEX_SHADER?\"vertex\":\"fragment\",a.getShaderInfoLog(d),bg(c));return d}function Ne(a){switch(a){case 3E3:return[\"Linear\",\"( value )\"];case 3001:return[\"sRGB\",\"( value )\"];case 3002:return[\"RGBE\",\"( value )\"];case 3004:return[\"RGBM\",\"( value, 7.0 )\"];case 3005:return[\"RGBM\",\"( value, 16.0 )\"];case 3006:return[\"RGBD\",\"( value, 256.0 )\"];case 3007:return[\"Gamma\",\"( value, float( GAMMA_FACTOR ) )\"];default:throw Error(\"unsupported encoding: \"+\na);}}function Td(a,b){b=Ne(b);return\"vec4 \"+a+\"( vec4 value ) { return \"+b[0]+\"ToLinear\"+b[1]+\"; }\"}function cg(a,b){b=Ne(b);return\"vec4 \"+a+\"( vec4 value ) { return LinearTo\"+b[0]+b[1]+\"; }\"}function dg(a,b){switch(b){case 1:b=\"Linear\";break;case 2:b=\"Reinhard\";break;case 3:b=\"Uncharted2\";break;case 4:b=\"OptimizedCineon\";break;default:throw Error(\"unsupported toneMapping: \"+b);}return\"vec3 \"+a+\"( vec3 color ) { return \"+b+\"ToneMapping( color ); }\"}function eg(a,b,c){a=a||{};return[a.derivatives||\nb.envMapCubeUV||b.bumpMap||b.normalMap||b.flatShading?\"#extension GL_OES_standard_derivatives : enable\":\"\",(a.fragDepth||b.logarithmicDepthBuffer)&&c.get(\"EXT_frag_depth\")?\"#extension GL_EXT_frag_depth : enable\":\"\",a.drawBuffers&&c.get(\"WEBGL_draw_buffers\")?\"#extension GL_EXT_draw_buffers : require\":\"\",(a.shaderTextureLOD||b.envMap)&&c.get(\"EXT_shader_texture_lod\")?\"#extension GL_EXT_shader_texture_lod : enable\":\"\"].filter(wc).join(\"\\n\")}function fg(a){var b=[],c;for(c in a){var d=a[c];!1!==d&&b.push(\"#define \"+\nc+\" \"+d)}return b.join(\"\\n\")}function wc(a){return\"\"!==a}function Oe(a,b){return a.replace(/NUM_DIR_LIGHTS/g,b.numDirLights).replace(/NUM_SPOT_LIGHTS/g,b.numSpotLights).replace(/NUM_RECT_AREA_LIGHTS/g,b.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,b.numPointLights).replace(/NUM_HEMI_LIGHTS/g,b.numHemiLights)}function Ud(a){return a.replace(/^[ \\t]*#include +<([\\w\\d.]+)>/gm,function(a,c){a=V[c];if(void 0===a)throw Error(\"Can not resolve #include <\"+c+\">\");return Ud(a)})}function Pe(a){return a.replace(/for \\( int i \\= (\\d+)\\; i < (\\d+)\\; i \\+\\+ \\) \\{([\\s\\S]+?)(?=\\})\\}/g,\nfunction(a,c,d,e){a=\"\";for(c=parseInt(c);c<parseInt(d);c++)a+=e.replace(/\\[ i \\]/g,\"[ \"+c+\" ]\");return a})}function gg(a,b,c,d,e,f){var g=a.context,h=d.defines,k=e.vertexShader,l=e.fragmentShader,q=\"SHADOWMAP_TYPE_BASIC\";1===f.shadowMapType?q=\"SHADOWMAP_TYPE_PCF\":2===f.shadowMapType&&(q=\"SHADOWMAP_TYPE_PCF_SOFT\");var p=\"ENVMAP_TYPE_CUBE\",t=\"ENVMAP_MODE_REFLECTION\",r=\"ENVMAP_BLENDING_MULTIPLY\";if(f.envMap){switch(d.envMap.mapping){case 301:case 302:p=\"ENVMAP_TYPE_CUBE\";break;case 306:case 307:p=\"ENVMAP_TYPE_CUBE_UV\";\nbreak;case 303:case 304:p=\"ENVMAP_TYPE_EQUIREC\";break;case 305:p=\"ENVMAP_TYPE_SPHERE\"}switch(d.envMap.mapping){case 302:case 304:t=\"ENVMAP_MODE_REFRACTION\"}switch(d.combine){case 0:r=\"ENVMAP_BLENDING_MULTIPLY\";break;case 1:r=\"ENVMAP_BLENDING_MIX\";break;case 2:r=\"ENVMAP_BLENDING_ADD\"}}var m=0<a.gammaFactor?a.gammaFactor:1,u=eg(d.extensions,f,b),x=fg(h),n=g.createProgram();d.isRawShaderMaterial?(h=[x,\"\\n\"].filter(wc).join(\"\\n\"),b=[u,x,\"\\n\"].filter(wc).join(\"\\n\")):(h=[\"precision \"+f.precision+\" float;\",\n\"precision \"+f.precision+\" int;\",\"#define SHADER_NAME \"+e.name,x,f.supportsVertexTextures?\"#define VERTEX_TEXTURES\":\"\",\"#define GAMMA_FACTOR \"+m,\"#define MAX_BONES \"+f.maxBones,f.useFog&&f.fog?\"#define USE_FOG\":\"\",f.useFog&&f.fogExp?\"#define FOG_EXP2\":\"\",f.map?\"#define USE_MAP\":\"\",f.envMap?\"#define USE_ENVMAP\":\"\",f.envMap?\"#define \"+t:\"\",f.lightMap?\"#define USE_LIGHTMAP\":\"\",f.aoMap?\"#define USE_AOMAP\":\"\",f.emissiveMap?\"#define USE_EMISSIVEMAP\":\"\",f.bumpMap?\"#define USE_BUMPMAP\":\"\",f.normalMap?\"#define USE_NORMALMAP\":\n\"\",f.displacementMap&&f.supportsVertexTextures?\"#define USE_DISPLACEMENTMAP\":\"\",f.specularMap?\"#define USE_SPECULARMAP\":\"\",f.roughnessMap?\"#define USE_ROUGHNESSMAP\":\"\",f.metalnessMap?\"#define USE_METALNESSMAP\":\"\",f.alphaMap?\"#define USE_ALPHAMAP\":\"\",f.vertexColors?\"#define USE_COLOR\":\"\",f.flatShading?\"#define FLAT_SHADED\":\"\",f.skinning?\"#define USE_SKINNING\":\"\",f.useVertexTexture?\"#define BONE_TEXTURE\":\"\",f.morphTargets?\"#define USE_MORPHTARGETS\":\"\",f.morphNormals&&!1===f.flatShading?\"#define USE_MORPHNORMALS\":\n\"\",f.doubleSided?\"#define DOUBLE_SIDED\":\"\",f.flipSided?\"#define FLIP_SIDED\":\"\",\"#define NUM_CLIPPING_PLANES \"+f.numClippingPlanes,f.shadowMapEnabled?\"#define USE_SHADOWMAP\":\"\",f.shadowMapEnabled?\"#define \"+q:\"\",f.sizeAttenuation?\"#define USE_SIZEATTENUATION\":\"\",f.logarithmicDepthBuffer?\"#define USE_LOGDEPTHBUF\":\"\",f.logarithmicDepthBuffer&&b.get(\"EXT_frag_depth\")?\"#define USE_LOGDEPTHBUF_EXT\":\"\",\"uniform mat4 modelMatrix;\",\"uniform mat4 modelViewMatrix;\",\"uniform mat4 projectionMatrix;\",\"uniform mat4 viewMatrix;\",\n\"uniform mat3 normalMatrix;\",\"uniform vec3 cameraPosition;\",\"attribute vec3 position;\",\"attribute vec3 normal;\",\"attribute vec2 uv;\",\"#ifdef USE_COLOR\",\"\\tattribute vec3 color;\",\"#endif\",\"#ifdef USE_MORPHTARGETS\",\"\\tattribute vec3 morphTarget0;\",\"\\tattribute vec3 morphTarget1;\",\"\\tattribute vec3 morphTarget2;\",\"\\tattribute vec3 morphTarget3;\",\"\\t#ifdef USE_MORPHNORMALS\",\"\\t\\tattribute vec3 morphNormal0;\",\"\\t\\tattribute vec3 morphNormal1;\",\"\\t\\tattribute vec3 morphNormal2;\",\"\\t\\tattribute vec3 morphNormal3;\",\n\"\\t#else\",\"\\t\\tattribute vec3 morphTarget4;\",\"\\t\\tattribute vec3 morphTarget5;\",\"\\t\\tattribute vec3 morphTarget6;\",\"\\t\\tattribute vec3 morphTarget7;\",\"\\t#endif\",\"#endif\",\"#ifdef USE_SKINNING\",\"\\tattribute vec4 skinIndex;\",\"\\tattribute vec4 skinWeight;\",\"#endif\",\"\\n\"].filter(wc).join(\"\\n\"),b=[u,\"precision \"+f.precision+\" float;\",\"precision \"+f.precision+\" int;\",\"#define SHADER_NAME \"+e.name,x,f.alphaTest?\"#define ALPHATEST \"+f.alphaTest:\"\",\"#define GAMMA_FACTOR \"+m,f.useFog&&f.fog?\"#define USE_FOG\":\n\"\",f.useFog&&f.fogExp?\"#define FOG_EXP2\":\"\",f.map?\"#define USE_MAP\":\"\",f.envMap?\"#define USE_ENVMAP\":\"\",f.envMap?\"#define \"+p:\"\",f.envMap?\"#define \"+t:\"\",f.envMap?\"#define \"+r:\"\",f.lightMap?\"#define USE_LIGHTMAP\":\"\",f.aoMap?\"#define USE_AOMAP\":\"\",f.emissiveMap?\"#define USE_EMISSIVEMAP\":\"\",f.bumpMap?\"#define USE_BUMPMAP\":\"\",f.normalMap?\"#define USE_NORMALMAP\":\"\",f.specularMap?\"#define USE_SPECULARMAP\":\"\",f.roughnessMap?\"#define USE_ROUGHNESSMAP\":\"\",f.metalnessMap?\"#define USE_METALNESSMAP\":\"\",f.alphaMap?\n\"#define USE_ALPHAMAP\":\"\",f.vertexColors?\"#define USE_COLOR\":\"\",f.gradientMap?\"#define USE_GRADIENTMAP\":\"\",f.flatShading?\"#define FLAT_SHADED\":\"\",f.doubleSided?\"#define DOUBLE_SIDED\":\"\",f.flipSided?\"#define FLIP_SIDED\":\"\",\"#define NUM_CLIPPING_PLANES \"+f.numClippingPlanes,\"#define UNION_CLIPPING_PLANES \"+(f.numClippingPlanes-f.numClipIntersection),f.shadowMapEnabled?\"#define USE_SHADOWMAP\":\"\",f.shadowMapEnabled?\"#define \"+q:\"\",f.premultipliedAlpha?\"#define PREMULTIPLIED_ALPHA\":\"\",f.physicallyCorrectLights?\n\"#define PHYSICALLY_CORRECT_LIGHTS\":\"\",f.logarithmicDepthBuffer?\"#define USE_LOGDEPTHBUF\":\"\",f.logarithmicDepthBuffer&&b.get(\"EXT_frag_depth\")?\"#define USE_LOGDEPTHBUF_EXT\":\"\",f.envMap&&b.get(\"EXT_shader_texture_lod\")?\"#define TEXTURE_LOD_EXT\":\"\",\"uniform mat4 viewMatrix;\",\"uniform vec3 cameraPosition;\",0!==f.toneMapping?\"#define TONE_MAPPING\":\"\",0!==f.toneMapping?V.tonemapping_pars_fragment:\"\",0!==f.toneMapping?dg(\"toneMapping\",f.toneMapping):\"\",f.dithering?\"#define DITHERING\":\"\",f.outputEncoding||\nf.mapEncoding||f.envMapEncoding||f.emissiveMapEncoding?V.encodings_pars_fragment:\"\",f.mapEncoding?Td(\"mapTexelToLinear\",f.mapEncoding):\"\",f.envMapEncoding?Td(\"envMapTexelToLinear\",f.envMapEncoding):\"\",f.emissiveMapEncoding?Td(\"emissiveMapTexelToLinear\",f.emissiveMapEncoding):\"\",f.outputEncoding?cg(\"linearToOutputTexel\",f.outputEncoding):\"\",f.depthPacking?\"#define DEPTH_PACKING \"+d.depthPacking:\"\",\"\\n\"].filter(wc).join(\"\\n\"));k=Ud(k);k=Oe(k,f);l=Ud(l);l=Oe(l,f);d.isShaderMaterial||(k=Pe(k),l=Pe(l));\nl=b+l;k=Me(g,g.VERTEX_SHADER,h+k);l=Me(g,g.FRAGMENT_SHADER,l);g.attachShader(n,k);g.attachShader(n,l);void 0!==d.index0AttributeName?g.bindAttribLocation(n,0,d.index0AttributeName):!0===f.morphTargets&&g.bindAttribLocation(n,0,\"position\");g.linkProgram(n);f=g.getProgramInfoLog(n);e=g.getShaderInfoLog(k);q=g.getShaderInfoLog(l);t=p=!0;if(!1===g.getProgramParameter(n,g.LINK_STATUS))p=!1,console.error(\"THREE.WebGLProgram: shader error: \",g.getError(),\"gl.VALIDATE_STATUS\",g.getProgramParameter(n,g.VALIDATE_STATUS),\n\"gl.getProgramInfoLog\",f,e,q);else if(\"\"!==f)console.warn(\"THREE.WebGLProgram: gl.getProgramInfoLog()\",f);else if(\"\"===e||\"\"===q)t=!1;t&&(this.diagnostics={runnable:p,material:d,programLog:f,vertexShader:{log:e,prefix:h},fragmentShader:{log:q,prefix:b}});g.deleteShader(k);g.deleteShader(l);var A;this.getUniforms=function(){void 0===A&&(A=new cb(g,n,a));return A};var I;this.getAttributes=function(){if(void 0===I){for(var a={},b=g.getProgramParameter(n,g.ACTIVE_ATTRIBUTES),c=0;c<b;c++){var d=g.getActiveAttrib(n,\nc).name;a[d]=g.getAttribLocation(n,d)}I=a}return I};this.destroy=function(){g.deleteProgram(n);this.program=void 0};Object.defineProperties(this,{uniforms:{get:function(){console.warn(\"THREE.WebGLProgram: .uniforms is now .getUniforms().\");return this.getUniforms()}},attributes:{get:function(){console.warn(\"THREE.WebGLProgram: .attributes is now .getAttributes().\");return this.getAttributes()}}});this.id=hg++;this.code=c;this.usedTimes=1;this.program=n;this.vertexShader=k;this.fragmentShader=l;return this}\nfunction ig(a,b,c){function d(a,b){if(a)a.isTexture?c=a.encoding:a.isWebGLRenderTarget&&(console.warn(\"THREE.WebGLPrograms.getTextureEncodingFromMap: don't use render targets as textures. Use their .texture property instead.\"),c=a.texture.encoding);else var c=3E3;3E3===c&&b&&(c=3007);return c}var e=[],f={MeshDepthMaterial:\"depth\",MeshDistanceMaterial:\"distanceRGBA\",MeshNormalMaterial:\"normal\",MeshBasicMaterial:\"basic\",MeshLambertMaterial:\"lambert\",MeshPhongMaterial:\"phong\",MeshToonMaterial:\"phong\",\nMeshStandardMaterial:\"physical\",MeshPhysicalMaterial:\"physical\",LineBasicMaterial:\"basic\",LineDashedMaterial:\"dashed\",PointsMaterial:\"points\",ShadowMaterial:\"shadow\"},g=\"precision supportsVertexTextures map mapEncoding envMap envMapMode envMapEncoding lightMap aoMap emissiveMap emissiveMapEncoding bumpMap normalMap displacementMap specularMap roughnessMap metalnessMap gradientMap alphaMap combine vertexColors fog useFog fogExp flatShading sizeAttenuation logarithmicDepthBuffer skinning maxBones useVertexTexture morphTargets morphNormals maxMorphTargets maxMorphNormals premultipliedAlpha numDirLights numPointLights numSpotLights numHemiLights numRectAreaLights shadowMapEnabled shadowMapType toneMapping physicallyCorrectLights alphaTest doubleSided flipSided numClippingPlanes numClipIntersection depthPacking dithering\".split(\" \");\nthis.getParameters=function(b,e,g,q,p,t,r){var h=f[b.type];if(r.isSkinnedMesh){var l=r.skeleton.bones;if(c.floatVertexTextures)l=1024;else{var k=Math.min(Math.floor((c.maxVertexUniforms-20)/4),l.length);k<l.length?(console.warn(\"THREE.WebGLRenderer: Skeleton has \"+l.length+\" bones. This GPU supports \"+k+\".\"),l=0):l=k}}else l=0;k=c.precision;null!==b.precision&&(k=c.getMaxPrecision(b.precision),k!==b.precision&&console.warn(\"THREE.WebGLProgram.getParameters:\",b.precision,\"not supported, using\",k,\"instead.\"));\nvar m=a.getRenderTarget();return{shaderID:h,precision:k,supportsVertexTextures:c.vertexTextures,outputEncoding:d(m?m.texture:null,a.gammaOutput),map:!!b.map,mapEncoding:d(b.map,a.gammaInput),envMap:!!b.envMap,envMapMode:b.envMap&&b.envMap.mapping,envMapEncoding:d(b.envMap,a.gammaInput),envMapCubeUV:!!b.envMap&&(306===b.envMap.mapping||307===b.envMap.mapping),lightMap:!!b.lightMap,aoMap:!!b.aoMap,emissiveMap:!!b.emissiveMap,emissiveMapEncoding:d(b.emissiveMap,a.gammaInput),bumpMap:!!b.bumpMap,normalMap:!!b.normalMap,\ndisplacementMap:!!b.displacementMap,roughnessMap:!!b.roughnessMap,metalnessMap:!!b.metalnessMap,specularMap:!!b.specularMap,alphaMap:!!b.alphaMap,gradientMap:!!b.gradientMap,combine:b.combine,vertexColors:b.vertexColors,fog:!!q,useFog:b.fog,fogExp:q&&q.isFogExp2,flatShading:b.flatShading,sizeAttenuation:b.sizeAttenuation,logarithmicDepthBuffer:c.logarithmicDepthBuffer,skinning:b.skinning&&0<l,maxBones:l,useVertexTexture:c.floatVertexTextures,morphTargets:b.morphTargets,morphNormals:b.morphNormals,\nmaxMorphTargets:a.maxMorphTargets,maxMorphNormals:a.maxMorphNormals,numDirLights:e.directional.length,numPointLights:e.point.length,numSpotLights:e.spot.length,numRectAreaLights:e.rectArea.length,numHemiLights:e.hemi.length,numClippingPlanes:p,numClipIntersection:t,dithering:b.dithering,shadowMapEnabled:a.shadowMap.enabled&&r.receiveShadow&&0<g.length,shadowMapType:a.shadowMap.type,toneMapping:a.toneMapping,physicallyCorrectLights:a.physicallyCorrectLights,premultipliedAlpha:b.premultipliedAlpha,\nalphaTest:b.alphaTest,doubleSided:2===b.side,flipSided:1===b.side,depthPacking:void 0!==b.depthPacking?b.depthPacking:!1}};this.getProgramCode=function(b,c){var d=[];c.shaderID?d.push(c.shaderID):(d.push(b.fragmentShader),d.push(b.vertexShader));if(void 0!==b.defines)for(var e in b.defines)d.push(e),d.push(b.defines[e]);for(e=0;e<g.length;e++)d.push(c[g[e]]);d.push(b.onBeforeCompile.toString());d.push(a.gammaOutput);return d.join()};this.acquireProgram=function(c,d,f,g){for(var h,l=0,k=e.length;l<\nk;l++){var q=e[l];if(q.code===g){h=q;++h.usedTimes;break}}void 0===h&&(h=new gg(a,b,g,c,d,f),e.push(h));return h};this.releaseProgram=function(a){if(0===--a.usedTimes){var b=e.indexOf(a);e[b]=e[e.length-1];e.pop();a.destroy()}};this.programs=e}function jg(a,b,c,d,e,f,g){function h(a,b){if(a.width>b||a.height>b){b/=Math.max(a.width,a.height);var c=document.createElementNS(\"http://www.w3.org/1999/xhtml\",\"canvas\");c.width=Math.floor(a.width*b);c.height=Math.floor(a.height*b);c.getContext(\"2d\").drawImage(a,\n0,0,a.width,a.height,0,0,c.width,c.height);console.warn(\"THREE.WebGLRenderer: image is too big (\"+a.width+\"x\"+a.height+\"). Resized to \"+c.width+\"x\"+c.height,a);return c}return a}function k(a){return R.isPowerOfTwo(a.width)&&R.isPowerOfTwo(a.height)}function l(a,b){return a.generateMipmaps&&b&&1003!==a.minFilter&&1006!==a.minFilter}function q(b){return 1003===b||1004===b||1005===b?a.NEAREST:a.LINEAR}function p(b){b=b.target;b.removeEventListener(\"dispose\",p);a:{var c=d.get(b);if(b.image&&c.__image__webglTextureCube)a.deleteTexture(c.__image__webglTextureCube);\nelse{if(void 0===c.__webglInit)break a;a.deleteTexture(c.__webglTexture)}d.remove(b)}g.textures--}function t(b){b=b.target;b.removeEventListener(\"dispose\",t);var c=d.get(b),e=d.get(b.texture);if(b){void 0!==e.__webglTexture&&a.deleteTexture(e.__webglTexture);b.depthTexture&&b.depthTexture.dispose();if(b.isWebGLRenderTargetCube)for(e=0;6>e;e++)a.deleteFramebuffer(c.__webglFramebuffer[e]),c.__webglDepthbuffer&&a.deleteRenderbuffer(c.__webglDepthbuffer[e]);else a.deleteFramebuffer(c.__webglFramebuffer),\nc.__webglDepthbuffer&&a.deleteRenderbuffer(c.__webglDepthbuffer);d.remove(b.texture);d.remove(b)}g.textures--}function r(b,q){var t=d.get(b);if(0<b.version&&t.__version!==b.version){var r=b.image;if(void 0===r)console.warn(\"THREE.WebGLRenderer: Texture marked for update but image is undefined\",b);else if(!1===r.complete)console.warn(\"THREE.WebGLRenderer: Texture marked for update but image is incomplete\",b);else{void 0===t.__webglInit&&(t.__webglInit=!0,b.addEventListener(\"dispose\",p),t.__webglTexture=\na.createTexture(),g.textures++);c.activeTexture(a.TEXTURE0+q);c.bindTexture(a.TEXTURE_2D,t.__webglTexture);a.pixelStorei(a.UNPACK_FLIP_Y_WEBGL,b.flipY);a.pixelStorei(a.UNPACK_PREMULTIPLY_ALPHA_WEBGL,b.premultiplyAlpha);a.pixelStorei(a.UNPACK_ALIGNMENT,b.unpackAlignment);var v=h(b.image,e.maxTextureSize);(1001!==b.wrapS||1001!==b.wrapT||1003!==b.minFilter&&1006!==b.minFilter)&&!1===k(v)&&(q=v,q instanceof HTMLImageElement||q instanceof HTMLCanvasElement?(r=document.createElementNS(\"http://www.w3.org/1999/xhtml\",\n\"canvas\"),r.width=R.nearestPowerOfTwo(q.width),r.height=R.nearestPowerOfTwo(q.height),r.getContext(\"2d\").drawImage(q,0,0,r.width,r.height),console.warn(\"THREE.WebGLRenderer: image is not power of two (\"+q.width+\"x\"+q.height+\"). Resized to \"+r.width+\"x\"+r.height,q),v=r):v=q);q=k(v);var r=f.convert(b.format),A=f.convert(b.type);m(a.TEXTURE_2D,b,q);var n=b.mipmaps;if(b.isDepthTexture){n=a.DEPTH_COMPONENT;if(1015===b.type){if(!y)throw Error(\"Float Depth Texture only supported in WebGL2.0\");n=a.DEPTH_COMPONENT32F}else y&&\n(n=a.DEPTH_COMPONENT16);1026===b.format&&n===a.DEPTH_COMPONENT&&1012!==b.type&&1014!==b.type&&(console.warn(\"THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture.\"),b.type=1012,A=f.convert(b.type));1027===b.format&&(n=a.DEPTH_STENCIL,1020!==b.type&&(console.warn(\"THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture.\"),b.type=1020,A=f.convert(b.type)));c.texImage2D(a.TEXTURE_2D,0,n,v.width,v.height,0,r,A,null)}else if(b.isDataTexture)if(0<\nn.length&&q){for(var u=0,x=n.length;u<x;u++)v=n[u],c.texImage2D(a.TEXTURE_2D,u,r,v.width,v.height,0,r,A,v.data);b.generateMipmaps=!1}else c.texImage2D(a.TEXTURE_2D,0,r,v.width,v.height,0,r,A,v.data);else if(b.isCompressedTexture)for(u=0,x=n.length;u<x;u++)v=n[u],1023!==b.format&&1022!==b.format?-1<c.getCompressedTextureFormats().indexOf(r)?c.compressedTexImage2D(a.TEXTURE_2D,u,r,v.width,v.height,0,v.data):console.warn(\"THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()\"):\nc.texImage2D(a.TEXTURE_2D,u,r,v.width,v.height,0,r,A,v.data);else if(0<n.length&&q){u=0;for(x=n.length;u<x;u++)v=n[u],c.texImage2D(a.TEXTURE_2D,u,r,r,A,v);b.generateMipmaps=!1}else c.texImage2D(a.TEXTURE_2D,0,r,r,A,v);l(b,q)&&a.generateMipmap(a.TEXTURE_2D);t.__version=b.version;if(b.onUpdate)b.onUpdate(b);return}}c.activeTexture(a.TEXTURE0+q);c.bindTexture(a.TEXTURE_2D,t.__webglTexture)}function m(c,g,h){h?(a.texParameteri(c,a.TEXTURE_WRAP_S,f.convert(g.wrapS)),a.texParameteri(c,a.TEXTURE_WRAP_T,\nf.convert(g.wrapT)),a.texParameteri(c,a.TEXTURE_MAG_FILTER,f.convert(g.magFilter)),a.texParameteri(c,a.TEXTURE_MIN_FILTER,f.convert(g.minFilter))):(a.texParameteri(c,a.TEXTURE_WRAP_S,a.CLAMP_TO_EDGE),a.texParameteri(c,a.TEXTURE_WRAP_T,a.CLAMP_TO_EDGE),1001===g.wrapS&&1001===g.wrapT||console.warn(\"THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping.\",g),a.texParameteri(c,a.TEXTURE_MAG_FILTER,q(g.magFilter)),a.texParameteri(c,\na.TEXTURE_MIN_FILTER,q(g.minFilter)),1003!==g.minFilter&&1006!==g.minFilter&&console.warn(\"THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.\",g));!(h=b.get(\"EXT_texture_filter_anisotropic\"))||1015===g.type&&null===b.get(\"OES_texture_float_linear\")||1016===g.type&&null===b.get(\"OES_texture_half_float_linear\")||!(1<g.anisotropy||d.get(g).__currentAnisotropy)||(a.texParameterf(c,h.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(g.anisotropy,\ne.getMaxAnisotropy())),d.get(g).__currentAnisotropy=g.anisotropy)}function n(b,e,g,h){var l=f.convert(e.texture.format),k=f.convert(e.texture.type);c.texImage2D(h,0,l,e.width,e.height,0,l,k,null);a.bindFramebuffer(a.FRAMEBUFFER,b);a.framebufferTexture2D(a.FRAMEBUFFER,g,h,d.get(e.texture).__webglTexture,0);a.bindFramebuffer(a.FRAMEBUFFER,null)}function x(b,c){a.bindRenderbuffer(a.RENDERBUFFER,b);c.depthBuffer&&!c.stencilBuffer?(a.renderbufferStorage(a.RENDERBUFFER,a.DEPTH_COMPONENT16,c.width,c.height),\na.framebufferRenderbuffer(a.FRAMEBUFFER,a.DEPTH_ATTACHMENT,a.RENDERBUFFER,b)):c.depthBuffer&&c.stencilBuffer?(a.renderbufferStorage(a.RENDERBUFFER,a.DEPTH_STENCIL,c.width,c.height),a.framebufferRenderbuffer(a.FRAMEBUFFER,a.DEPTH_STENCIL_ATTACHMENT,a.RENDERBUFFER,b)):a.renderbufferStorage(a.RENDERBUFFER,a.RGBA4,c.width,c.height);a.bindRenderbuffer(a.RENDERBUFFER,null)}var y=\"undefined\"!==typeof WebGL2RenderingContext&&a instanceof WebGL2RenderingContext;this.setTexture2D=r;this.setTextureCube=function(b,\nq){var t=d.get(b);if(6===b.image.length)if(0<b.version&&t.__version!==b.version){t.__image__webglTextureCube||(b.addEventListener(\"dispose\",p),t.__image__webglTextureCube=a.createTexture(),g.textures++);c.activeTexture(a.TEXTURE0+q);c.bindTexture(a.TEXTURE_CUBE_MAP,t.__image__webglTextureCube);a.pixelStorei(a.UNPACK_FLIP_Y_WEBGL,b.flipY);q=b&&b.isCompressedTexture;for(var r=b.image[0]&&b.image[0].isDataTexture,v=[],n=0;6>n;n++)v[n]=q||r?r?b.image[n].image:b.image[n]:h(b.image[n],e.maxCubemapSize);\nvar u=k(v[0]),x=f.convert(b.format),A=f.convert(b.type);m(a.TEXTURE_CUBE_MAP,b,u);for(n=0;6>n;n++)if(q)for(var y,I=v[n].mipmaps,w=0,z=I.length;w<z;w++)y=I[w],1023!==b.format&&1022!==b.format?-1<c.getCompressedTextureFormats().indexOf(x)?c.compressedTexImage2D(a.TEXTURE_CUBE_MAP_POSITIVE_X+n,w,x,y.width,y.height,0,y.data):console.warn(\"THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()\"):c.texImage2D(a.TEXTURE_CUBE_MAP_POSITIVE_X+n,w,x,y.width,y.height,\n0,x,A,y.data);else r?c.texImage2D(a.TEXTURE_CUBE_MAP_POSITIVE_X+n,0,x,v[n].width,v[n].height,0,x,A,v[n].data):c.texImage2D(a.TEXTURE_CUBE_MAP_POSITIVE_X+n,0,x,x,A,v[n]);l(b,u)&&a.generateMipmap(a.TEXTURE_CUBE_MAP);t.__version=b.version;if(b.onUpdate)b.onUpdate(b)}else c.activeTexture(a.TEXTURE0+q),c.bindTexture(a.TEXTURE_CUBE_MAP,t.__image__webglTextureCube)};this.setTextureCubeDynamic=function(b,e){c.activeTexture(a.TEXTURE0+e);c.bindTexture(a.TEXTURE_CUBE_MAP,d.get(b).__webglTexture)};this.setupRenderTarget=\nfunction(b){var e=d.get(b),f=d.get(b.texture);b.addEventListener(\"dispose\",t);f.__webglTexture=a.createTexture();g.textures++;var h=!0===b.isWebGLRenderTargetCube,p=k(b);if(h){e.__webglFramebuffer=[];for(var q=0;6>q;q++)e.__webglFramebuffer[q]=a.createFramebuffer()}else e.__webglFramebuffer=a.createFramebuffer();if(h){c.bindTexture(a.TEXTURE_CUBE_MAP,f.__webglTexture);m(a.TEXTURE_CUBE_MAP,b.texture,p);for(q=0;6>q;q++)n(e.__webglFramebuffer[q],b,a.COLOR_ATTACHMENT0,a.TEXTURE_CUBE_MAP_POSITIVE_X+q);\nl(b.texture,p)&&a.generateMipmap(a.TEXTURE_CUBE_MAP);c.bindTexture(a.TEXTURE_CUBE_MAP,null)}else c.bindTexture(a.TEXTURE_2D,f.__webglTexture),m(a.TEXTURE_2D,b.texture,p),n(e.__webglFramebuffer,b,a.COLOR_ATTACHMENT0,a.TEXTURE_2D),l(b.texture,p)&&a.generateMipmap(a.TEXTURE_2D),c.bindTexture(a.TEXTURE_2D,null);if(b.depthBuffer){e=d.get(b);f=!0===b.isWebGLRenderTargetCube;if(b.depthTexture){if(f)throw Error(\"target.depthTexture not supported in Cube render targets\");if(b&&b.isWebGLRenderTargetCube)throw Error(\"Depth Texture with cube render targets is not supported\");\na.bindFramebuffer(a.FRAMEBUFFER,e.__webglFramebuffer);if(!b.depthTexture||!b.depthTexture.isDepthTexture)throw Error(\"renderTarget.depthTexture must be an instance of THREE.DepthTexture\");d.get(b.depthTexture).__webglTexture&&b.depthTexture.image.width===b.width&&b.depthTexture.image.height===b.height||(b.depthTexture.image.width=b.width,b.depthTexture.image.height=b.height,b.depthTexture.needsUpdate=!0);r(b.depthTexture,0);e=d.get(b.depthTexture).__webglTexture;if(1026===b.depthTexture.format)a.framebufferTexture2D(a.FRAMEBUFFER,\na.DEPTH_ATTACHMENT,a.TEXTURE_2D,e,0);else if(1027===b.depthTexture.format)a.framebufferTexture2D(a.FRAMEBUFFER,a.DEPTH_STENCIL_ATTACHMENT,a.TEXTURE_2D,e,0);else throw Error(\"Unknown depthTexture format\");}else if(f)for(e.__webglDepthbuffer=[],f=0;6>f;f++)a.bindFramebuffer(a.FRAMEBUFFER,e.__webglFramebuffer[f]),e.__webglDepthbuffer[f]=a.createRenderbuffer(),x(e.__webglDepthbuffer[f],b);else a.bindFramebuffer(a.FRAMEBUFFER,e.__webglFramebuffer),e.__webglDepthbuffer=a.createRenderbuffer(),x(e.__webglDepthbuffer,\nb);a.bindFramebuffer(a.FRAMEBUFFER,null)}};this.updateRenderTargetMipmap=function(b){var e=b.texture,f=k(b);l(e,f)&&(b=b.isWebGLRenderTargetCube?a.TEXTURE_CUBE_MAP:a.TEXTURE_2D,e=d.get(e).__webglTexture,c.bindTexture(b,e),a.generateMipmap(b),c.bindTexture(b,null))}}function kg(){var a={};return{get:function(b){b=b.uuid;var c=a[b];void 0===c&&(c={},a[b]=c);return c},remove:function(b){delete a[b.uuid]},clear:function(){a={}}}}function lg(a,b,c){function d(b,c,d){var e=new Uint8Array(4),f=a.createTexture();\na.bindTexture(b,f);a.texParameteri(b,a.TEXTURE_MIN_FILTER,a.NEAREST);a.texParameteri(b,a.TEXTURE_MAG_FILTER,a.NEAREST);for(b=0;b<d;b++)a.texImage2D(c+b,0,a.RGBA,1,1,0,a.RGBA,a.UNSIGNED_BYTE,e);return f}function e(b){!0!==A[b]&&(a.enable(b),A[b]=!0)}function f(b){!1!==A[b]&&(a.disable(b),A[b]=!1)}function g(b,d,g,h,l,k,p,q){0!==b?e(a.BLEND):f(a.BLEND);if(5!==b){if(b!==H||q!==J)switch(b){case 2:q?(a.blendEquationSeparate(a.FUNC_ADD,a.FUNC_ADD),a.blendFuncSeparate(a.ONE,a.ONE,a.ONE,a.ONE)):(a.blendEquation(a.FUNC_ADD),\na.blendFunc(a.SRC_ALPHA,a.ONE));break;case 3:q?(a.blendEquationSeparate(a.FUNC_ADD,a.FUNC_ADD),a.blendFuncSeparate(a.ZERO,a.ZERO,a.ONE_MINUS_SRC_COLOR,a.ONE_MINUS_SRC_ALPHA)):(a.blendEquation(a.FUNC_ADD),a.blendFunc(a.ZERO,a.ONE_MINUS_SRC_COLOR));break;case 4:q?(a.blendEquationSeparate(a.FUNC_ADD,a.FUNC_ADD),a.blendFuncSeparate(a.ZERO,a.SRC_COLOR,a.ZERO,a.SRC_ALPHA)):(a.blendEquation(a.FUNC_ADD),a.blendFunc(a.ZERO,a.SRC_COLOR));break;default:q?(a.blendEquationSeparate(a.FUNC_ADD,a.FUNC_ADD),a.blendFuncSeparate(a.ONE,\na.ONE_MINUS_SRC_ALPHA,a.ONE,a.ONE_MINUS_SRC_ALPHA)):(a.blendEquationSeparate(a.FUNC_ADD,a.FUNC_ADD),a.blendFuncSeparate(a.SRC_ALPHA,a.ONE_MINUS_SRC_ALPHA,a.ONE,a.ONE_MINUS_SRC_ALPHA))}C=D=ba=z=w=va=null}else{l=l||d;k=k||g;p=p||h;if(d!==va||l!==ba)a.blendEquationSeparate(c.convert(d),c.convert(l)),va=d,ba=l;if(g!==w||h!==z||k!==D||p!==C)a.blendFuncSeparate(c.convert(g),c.convert(h),c.convert(k),c.convert(p)),w=g,z=h,D=k,C=p}H=b;J=q}function h(b){F!==b&&(b?a.frontFace(a.CW):a.frontFace(a.CCW),F=b)}\nfunction k(b){0!==b?(e(a.CULL_FACE),b!==ga&&(1===b?a.cullFace(a.BACK):2===b?a.cullFace(a.FRONT):a.cullFace(a.FRONT_AND_BACK))):f(a.CULL_FACE);ga=b}function l(b,c,d){if(b){if(e(a.POLYGON_OFFSET_FILL),T!==c||L!==d)a.polygonOffset(c,d),T=c,L=d}else f(a.POLYGON_OFFSET_FILL)}function q(b){void 0===b&&(b=a.TEXTURE0+O-1);K!==b&&(a.activeTexture(b),K=b)}var p=new function(){var b=!1,c=new S,d=null,e=new S(0,0,0,0);return{setMask:function(c){d===c||b||(a.colorMask(c,c,c,c),d=c)},setLocked:function(a){b=a},\nsetClear:function(b,d,f,g,h){!0===h&&(b*=g,d*=g,f*=g);c.set(b,d,f,g);!1===e.equals(c)&&(a.clearColor(b,d,f,g),e.copy(c))},reset:function(){b=!1;d=null;e.set(-1,0,0,0)}}},t=new function(){var b=!1,c=null,d=null,g=null;return{setTest:function(b){b?e(a.DEPTH_TEST):f(a.DEPTH_TEST)},setMask:function(d){c===d||b||(a.depthMask(d),c=d)},setFunc:function(b){if(d!==b){if(b)switch(b){case 0:a.depthFunc(a.NEVER);break;case 1:a.depthFunc(a.ALWAYS);break;case 2:a.depthFunc(a.LESS);break;case 3:a.depthFunc(a.LEQUAL);\nbreak;case 4:a.depthFunc(a.EQUAL);break;case 5:a.depthFunc(a.GEQUAL);break;case 6:a.depthFunc(a.GREATER);break;case 7:a.depthFunc(a.NOTEQUAL);break;default:a.depthFunc(a.LEQUAL)}else a.depthFunc(a.LEQUAL);d=b}},setLocked:function(a){b=a},setClear:function(b){g!==b&&(a.clearDepth(b),g=b)},reset:function(){b=!1;g=d=c=null}}},r=new function(){var b=!1,c=null,d=null,g=null,h=null,l=null,k=null,p=null,q=null;return{setTest:function(b){b?e(a.STENCIL_TEST):f(a.STENCIL_TEST)},setMask:function(d){c===d||b||\n(a.stencilMask(d),c=d)},setFunc:function(b,c,e){if(d!==b||g!==c||h!==e)a.stencilFunc(b,c,e),d=b,g=c,h=e},setOp:function(b,c,d){if(l!==b||k!==c||p!==d)a.stencilOp(b,c,d),l=b,k=c,p=d},setLocked:function(a){b=a},setClear:function(b){q!==b&&(a.clearStencil(b),q=b)},reset:function(){b=!1;q=p=k=l=h=g=d=c=null}}},m=a.getParameter(a.MAX_VERTEX_ATTRIBS),n=new Uint8Array(m),x=new Uint8Array(m),y=new Uint8Array(m),A={},I=null,B=null,H=null,va=null,w=null,z=null,ba=null,D=null,C=null,J=!1,F=null,ga=null,M=null,\nT=null,L=null,O=a.getParameter(a.MAX_COMBINED_TEXTURE_IMAGE_UNITS),m=parseFloat(/^WebGL\\ ([0-9])/.exec(a.getParameter(a.VERSION))[1]),Q=1<=parseFloat(m),K=null,R={},P=new S,G=new S,U={};U[a.TEXTURE_2D]=d(a.TEXTURE_2D,a.TEXTURE_2D,1);U[a.TEXTURE_CUBE_MAP]=d(a.TEXTURE_CUBE_MAP,a.TEXTURE_CUBE_MAP_POSITIVE_X,6);p.setClear(0,0,0,1);t.setClear(1);r.setClear(0);e(a.DEPTH_TEST);t.setFunc(3);h(!1);k(1);e(a.CULL_FACE);e(a.BLEND);g(1);return{buffers:{color:p,depth:t,stencil:r},initAttributes:function(){for(var a=\n0,b=n.length;a<b;a++)n[a]=0},enableAttribute:function(c){n[c]=1;0===x[c]&&(a.enableVertexAttribArray(c),x[c]=1);0!==y[c]&&(b.get(\"ANGLE_instanced_arrays\").vertexAttribDivisorANGLE(c,0),y[c]=0)},enableAttributeAndDivisor:function(c,d){n[c]=1;0===x[c]&&(a.enableVertexAttribArray(c),x[c]=1);y[c]!==d&&(b.get(\"ANGLE_instanced_arrays\").vertexAttribDivisorANGLE(c,d),y[c]=d)},disableUnusedAttributes:function(){for(var b=0,c=x.length;b!==c;++b)x[b]!==n[b]&&(a.disableVertexAttribArray(b),x[b]=0)},enable:e,\ndisable:f,getCompressedTextureFormats:function(){if(null===I&&(I=[],b.get(\"WEBGL_compressed_texture_pvrtc\")||b.get(\"WEBGL_compressed_texture_s3tc\")||b.get(\"WEBGL_compressed_texture_etc1\")))for(var c=a.getParameter(a.COMPRESSED_TEXTURE_FORMATS),d=0;d<c.length;d++)I.push(c[d]);return I},useProgram:function(b){return B!==b?(a.useProgram(b),B=b,!0):!1},setBlending:g,setMaterial:function(b){2===b.side?f(a.CULL_FACE):e(a.CULL_FACE);h(1===b.side);!0===b.transparent?g(b.blending,b.blendEquation,b.blendSrc,\nb.blendDst,b.blendEquationAlpha,b.blendSrcAlpha,b.blendDstAlpha,b.premultipliedAlpha):g(0);t.setFunc(b.depthFunc);t.setTest(b.depthTest);t.setMask(b.depthWrite);p.setMask(b.colorWrite);l(b.polygonOffset,b.polygonOffsetFactor,b.polygonOffsetUnits)},setFlipSided:h,setCullFace:k,setLineWidth:function(b){b!==M&&(Q&&a.lineWidth(b),M=b)},setPolygonOffset:l,setScissorTest:function(b){b?e(a.SCISSOR_TEST):f(a.SCISSOR_TEST)},activeTexture:q,bindTexture:function(b,c){null===K&&q();var d=R[K];void 0===d&&(d=\n{type:void 0,texture:void 0},R[K]=d);if(d.type!==b||d.texture!==c)a.bindTexture(b,c||U[b]),d.type=b,d.texture=c},compressedTexImage2D:function(){try{a.compressedTexImage2D.apply(a,arguments)}catch(ca){console.error(\"THREE.WebGLState:\",ca)}},texImage2D:function(){try{a.texImage2D.apply(a,arguments)}catch(ca){console.error(\"THREE.WebGLState:\",ca)}},scissor:function(b){!1===P.equals(b)&&(a.scissor(b.x,b.y,b.z,b.w),P.copy(b))},viewport:function(b){!1===G.equals(b)&&(a.viewport(b.x,b.y,b.z,b.w),G.copy(b))},\nreset:function(){for(var b=0;b<x.length;b++)1===x[b]&&(a.disableVertexAttribArray(b),x[b]=0);A={};K=I=null;R={};ga=F=H=B=null;p.reset();t.reset();r.reset()}}}function mg(a,b,c){function d(b){if(\"highp\"===b){if(0<a.getShaderPrecisionFormat(a.VERTEX_SHADER,a.HIGH_FLOAT).precision&&0<a.getShaderPrecisionFormat(a.FRAGMENT_SHADER,a.HIGH_FLOAT).precision)return\"highp\";b=\"mediump\"}return\"mediump\"===b&&0<a.getShaderPrecisionFormat(a.VERTEX_SHADER,a.MEDIUM_FLOAT).precision&&0<a.getShaderPrecisionFormat(a.FRAGMENT_SHADER,\na.MEDIUM_FLOAT).precision?\"mediump\":\"lowp\"}var e,f=void 0!==c.precision?c.precision:\"highp\",g=d(f);g!==f&&(console.warn(\"THREE.WebGLRenderer:\",f,\"not supported, using\",g,\"instead.\"),f=g);c=!0===c.logarithmicDepthBuffer&&!!b.get(\"EXT_frag_depth\");var g=a.getParameter(a.MAX_TEXTURE_IMAGE_UNITS),h=a.getParameter(a.MAX_VERTEX_TEXTURE_IMAGE_UNITS),k=a.getParameter(a.MAX_TEXTURE_SIZE),l=a.getParameter(a.MAX_CUBE_MAP_TEXTURE_SIZE),q=a.getParameter(a.MAX_VERTEX_ATTRIBS),p=a.getParameter(a.MAX_VERTEX_UNIFORM_VECTORS),\nt=a.getParameter(a.MAX_VARYING_VECTORS),r=a.getParameter(a.MAX_FRAGMENT_UNIFORM_VECTORS),m=0<h,n=!!b.get(\"OES_texture_float\");return{getMaxAnisotropy:function(){if(void 0!==e)return e;var c=b.get(\"EXT_texture_filter_anisotropic\");return e=null!==c?a.getParameter(c.MAX_TEXTURE_MAX_ANISOTROPY_EXT):0},getMaxPrecision:d,precision:f,logarithmicDepthBuffer:c,maxTextures:g,maxVertexTextures:h,maxTextureSize:k,maxCubemapSize:l,maxAttributes:q,maxVertexUniforms:p,maxVaryings:t,maxFragmentUniforms:r,vertexTextures:m,\nfloatFragmentTextures:n,floatVertexTextures:m&&n}}function md(a){ja.call(this);this.cameras=a||[]}function ng(a){function b(){if(null!==d&&d.isPresenting){var b=d.getEyeParameters(\"left\"),e=b.renderWidth,b=b.renderHeight;t=a.getPixelRatio();p=a.getSize();a.setDrawingBufferSize(2*e,b,1)}else c.enabled&&a.setDrawingBufferSize(p.width,p.height,t)}var c=this,d=null,e=null;\"VRFrameData\"in window&&(e=new window.VRFrameData);var f=new O,g=new O,h=new O,k=new ja;k.bounds=new S(0,0,.5,1);k.layers.enable(1);\nvar l=new ja;l.bounds=new S(.5,0,.5,1);l.layers.enable(2);var q=new md([k,l]);q.layers.enable(1);q.layers.enable(2);var p,t;window.addEventListener(\"vrdisplaypresentchange\",b,!1);this.standing=this.enabled=!1;this.getDevice=function(){return d};this.setDevice=function(a){void 0!==a&&(d=a)};this.getCamera=function(a){if(null===d)return a;d.depthNear=a.near;d.depthFar=a.far;d.getFrameData(e);var b=e.pose;null!==b.position?a.position.fromArray(b.position):a.position.set(0,0,0);null!==b.orientation&&\na.quaternion.fromArray(b.orientation);a.updateMatrixWorld();b=d.stageParameters;this.standing&&b&&(g.fromArray(b.sittingToStandingTransform),h.getInverse(g),a.matrixWorld.multiply(g),a.matrixWorldInverse.multiply(h));if(!1===d.isPresenting)return a;k.near=a.near;l.near=a.near;k.far=a.far;l.far=a.far;q.matrixWorld.copy(a.matrixWorld);q.matrixWorldInverse.copy(a.matrixWorldInverse);k.matrixWorldInverse.fromArray(e.leftViewMatrix);l.matrixWorldInverse.fromArray(e.rightViewMatrix);this.standing&&b&&(k.matrixWorldInverse.multiply(h),\nl.matrixWorldInverse.multiply(h));a=a.parent;null!==a&&(f.getInverse(a.matrixWorld),k.matrixWorldInverse.multiply(f),l.matrixWorldInverse.multiply(f));k.matrixWorld.getInverse(k.matrixWorldInverse);l.matrixWorld.getInverse(l.matrixWorldInverse);k.projectionMatrix.fromArray(e.leftProjectionMatrix);l.projectionMatrix.fromArray(e.rightProjectionMatrix);q.projectionMatrix.copy(k.projectionMatrix);a=d.getLayers();a.length&&(a=a[0],null!==a.leftBounds&&4===a.leftBounds.length&&k.bounds.fromArray(a.leftBounds),\nnull!==a.rightBounds&&4===a.rightBounds.length&&l.bounds.fromArray(a.rightBounds));return q};this.getStandingMatrix=function(){return g};this.submitFrame=function(){d&&d.isPresenting&&d.submitFrame()};this.dispose=function(){window.removeEventListener(\"vrdisplaypresentchange\",b)}}function og(a){var b={};return{get:function(c){if(void 0!==b[c])return b[c];switch(c){case \"WEBGL_depth_texture\":var d=a.getExtension(\"WEBGL_depth_texture\")||a.getExtension(\"MOZ_WEBGL_depth_texture\")||a.getExtension(\"WEBKIT_WEBGL_depth_texture\");\nbreak;case \"EXT_texture_filter_anisotropic\":d=a.getExtension(\"EXT_texture_filter_anisotropic\")||a.getExtension(\"MOZ_EXT_texture_filter_anisotropic\")||a.getExtension(\"WEBKIT_EXT_texture_filter_anisotropic\");break;case \"WEBGL_compressed_texture_s3tc\":d=a.getExtension(\"WEBGL_compressed_texture_s3tc\")||a.getExtension(\"MOZ_WEBGL_compressed_texture_s3tc\")||a.getExtension(\"WEBKIT_WEBGL_compressed_texture_s3tc\");break;case \"WEBGL_compressed_texture_pvrtc\":d=a.getExtension(\"WEBGL_compressed_texture_pvrtc\")||\na.getExtension(\"WEBKIT_WEBGL_compressed_texture_pvrtc\");break;case \"WEBGL_compressed_texture_etc1\":d=a.getExtension(\"WEBGL_compressed_texture_etc1\");break;default:d=a.getExtension(c)}null===d&&console.warn(\"THREE.WebGLRenderer: \"+c+\" extension not supported.\");return b[c]=d}}}function pg(){function a(){l.value!==d&&(l.value=d,l.needsUpdate=0<e);c.numPlanes=e;c.numIntersection=0}function b(a,b,d,e){var f=null!==a?a.length:0,g=null;if(0!==f){g=l.value;if(!0!==e||null===g){e=d+4*f;b=b.matrixWorldInverse;\nk.getNormalMatrix(b);if(null===g||g.length<e)g=new Float32Array(e);for(e=0;e!==f;++e,d+=4)h.copy(a[e]).applyMatrix4(b,k),h.normal.toArray(g,d),g[d+3]=h.constant}l.value=g;l.needsUpdate=!0}c.numPlanes=f;return g}var c=this,d=null,e=0,f=!1,g=!1,h=new za,k=new qa,l={value:null,needsUpdate:!1};this.uniform=l;this.numIntersection=this.numPlanes=0;this.init=function(a,c,g){var h=0!==a.length||c||0!==e||f;f=c;d=b(a,g,0);e=a.length;return h};this.beginShadows=function(){g=!0;b(null)};this.endShadows=function(){g=\n!1;a()};this.setState=function(c,h,k,r,m,n){if(!f||null===c||0===c.length||g&&!k)g?b(null):a();else{k=g?0:e;var p=4*k,q=m.clippingState||null;l.value=q;q=b(c,r,p,n);for(c=0;c!==p;++c)q[c]=d[c];m.clippingState=q;this.numIntersection=h?this.numPlanes:0;this.numPlanes+=k}}}function Qe(a,b){return{convert:function(c){if(1E3===c)return a.REPEAT;if(1001===c)return a.CLAMP_TO_EDGE;if(1002===c)return a.MIRRORED_REPEAT;if(1003===c)return a.NEAREST;if(1004===c)return a.NEAREST_MIPMAP_NEAREST;if(1005===c)return a.NEAREST_MIPMAP_LINEAR;\nif(1006===c)return a.LINEAR;if(1007===c)return a.LINEAR_MIPMAP_NEAREST;if(1008===c)return a.LINEAR_MIPMAP_LINEAR;if(1009===c)return a.UNSIGNED_BYTE;if(1017===c)return a.UNSIGNED_SHORT_4_4_4_4;if(1018===c)return a.UNSIGNED_SHORT_5_5_5_1;if(1019===c)return a.UNSIGNED_SHORT_5_6_5;if(1010===c)return a.BYTE;if(1011===c)return a.SHORT;if(1012===c)return a.UNSIGNED_SHORT;if(1013===c)return a.INT;if(1014===c)return a.UNSIGNED_INT;if(1015===c)return a.FLOAT;if(1016===c){var d=b.get(\"OES_texture_half_float\");\nif(null!==d)return d.HALF_FLOAT_OES}if(1021===c)return a.ALPHA;if(1022===c)return a.RGB;if(1023===c)return a.RGBA;if(1024===c)return a.LUMINANCE;if(1025===c)return a.LUMINANCE_ALPHA;if(1026===c)return a.DEPTH_COMPONENT;if(1027===c)return a.DEPTH_STENCIL;if(100===c)return a.FUNC_ADD;if(101===c)return a.FUNC_SUBTRACT;if(102===c)return a.FUNC_REVERSE_SUBTRACT;if(200===c)return a.ZERO;if(201===c)return a.ONE;if(202===c)return a.SRC_COLOR;if(203===c)return a.ONE_MINUS_SRC_COLOR;if(204===c)return a.SRC_ALPHA;\nif(205===c)return a.ONE_MINUS_SRC_ALPHA;if(206===c)return a.DST_ALPHA;if(207===c)return a.ONE_MINUS_DST_ALPHA;if(208===c)return a.DST_COLOR;if(209===c)return a.ONE_MINUS_DST_COLOR;if(210===c)return a.SRC_ALPHA_SATURATE;if(2001===c||2002===c||2003===c||2004===c)if(d=b.get(\"WEBGL_compressed_texture_s3tc\"),null!==d){if(2001===c)return d.COMPRESSED_RGB_S3TC_DXT1_EXT;if(2002===c)return d.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(2003===c)return d.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(2004===c)return d.COMPRESSED_RGBA_S3TC_DXT5_EXT}if(2100===\nc||2101===c||2102===c||2103===c)if(d=b.get(\"WEBGL_compressed_texture_pvrtc\"),null!==d){if(2100===c)return d.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(2101===c)return d.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(2102===c)return d.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(2103===c)return d.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}if(2151===c&&(d=b.get(\"WEBGL_compressed_texture_etc1\"),null!==d))return d.COMPRESSED_RGB_ETC1_WEBGL;if(103===c||104===c)if(d=b.get(\"EXT_blend_minmax\"),null!==d){if(103===c)return d.MIN_EXT;if(104===c)return d.MAX_EXT}return 1020===\nc&&(d=b.get(\"WEBGL_depth_texture\"),null!==d)?d.UNSIGNED_INT_24_8_WEBGL:0}}}function Yd(a){function b(){ka=new og(E);ka.get(\"WEBGL_depth_texture\");ka.get(\"OES_texture_float\");ka.get(\"OES_texture_float_linear\");ka.get(\"OES_texture_half_float\");ka.get(\"OES_texture_half_float_linear\");ka.get(\"OES_standard_derivatives\");ka.get(\"ANGLE_instanced_arrays\");ka.get(\"OES_element_index_uint\")&&(F.MaxIndex=4294967296);qa=new Qe(E,ka);ea=new mg(E,ka,a);Z=new lg(E,ka,qa);Z.scissor(W.copy(ia).multiplyScalar(N));Z.viewport(V.copy(aa).multiplyScalar(N));\nda=new kg;fa=new jg(E,ka,Z,da,ea,qa,Xd);pa=new Nf(E);ra=new Yf(E,pa,Xd);ua=new ag(ra,Sa);wa=new Vf(E);na=new ig(J,ka,ea);ta=new $f;sa=new Tf;oa=new Pf(J,Z,ra,H);ya=new Xf(E,ka,Sa);za=new Wf(E,ka,Sa);Ba=new Kf(J,E,Z,fa,ea);Ca=new Lf(J,E,Z,fa,ea);J.info.programs=na.programs;J.context=E;J.capabilities=ea;J.extensions=ka;J.properties=da;J.renderLists=sa;J.state=Z}function c(a){a.preventDefault();console.log(\"THREE.WebGLRenderer: Context Lost.\");Q=!0}function d(a){console.log(\"THREE.WebGLRenderer: Context Restored.\");\nQ=!1;b()}function e(a){a=a.target;a.removeEventListener(\"dispose\",e);f(a);da.remove(a)}function f(a){var b=da.get(a).program;a.program=void 0;void 0!==b&&na.releaseProgram(b)}function g(a,b,c){a.render(function(a){J.renderBufferImmediate(a,b,c)})}function h(a){null!==Aa&&Aa(a);(ma.getDevice()||window).requestAnimationFrame(h)}function k(a,b,c){if(a.visible){if(a.layers.test(b.layers))if(a.isLight)w.push(a),a.castShadow&&z.push(a);else if(a.isSprite)a.frustumCulled&&!Vd.intersectsSprite(a)||D.push(a);\nelse if(a.isLensFlare)C.push(a);else if(a.isImmediateRenderObject)c&&Gb.setFromMatrixPosition(a.matrixWorld).applyMatrix4(ld),ba.push(a,null,a.material,Gb.z,null);else if(a.isMesh||a.isLine||a.isPoints)if(a.isSkinnedMesh&&a.skeleton.update(),!a.frustumCulled||Vd.intersectsObject(a)){c&&Gb.setFromMatrixPosition(a.matrixWorld).applyMatrix4(ld);var d=ua.update(a),e=a.material;if(Array.isArray(e))for(var f=d.groups,g=0,h=f.length;g<h;g++){var l=f[g],p=e[l.materialIndex];p&&p.visible&&ba.push(a,d,p,Gb.z,\nl)}else e.visible&&ba.push(a,d,e,Gb.z,null)}a=a.children;g=0;for(h=a.length;g<h;g++)k(a[g],b,c)}}function l(a,b,c,d){for(var e=0,f=a.length;e<f;e++){var g=a[e],h=g.object,l=g.geometry,k=void 0===d?g.material:d,g=g.group;if(c.isArrayCamera){Y=c;for(var p=c.cameras,t=0,r=p.length;t<r;t++){var m=p[t];if(h.layers.test(m.layers)){var v=m.bounds;Z.viewport(V.set(v.x*U,v.y*ca,v.z*U,v.w*ca).multiplyScalar(N));q(h,b,m,l,k,g)}}}else Y=null,q(h,b,c,l,k,g)}}function q(a,b,c,d,e,f){a.onBeforeRender(J,b,c,d,e,\nf);a.modelViewMatrix.multiplyMatrices(c.matrixWorldInverse,a.matrixWorld);a.normalMatrix.getNormalMatrix(a.modelViewMatrix);if(a.isImmediateRenderObject){Z.setMaterial(e);var h=t(c,b.fog,e,a);K=\"\";g(a,h,e)}else J.renderBufferDirect(c,b.fog,d,e,a,f);a.onAfterRender(J,b,c,d,e,f)}function p(a,b,c){var d=da.get(a);c=na.getParameters(a,ta.state,z,b,Ha.numPlanes,Ha.numIntersection,c);var g=na.getProgramCode(a,c),h=d.program,l=!0;if(void 0===h)a.addEventListener(\"dispose\",e);else if(h.code!==g)f(a);else{if(void 0!==\nc.shaderID)return;l=!1}l&&(c.shaderID?(h=ib[c.shaderID],d.shader={name:a.type,uniforms:Da.clone(h.uniforms),vertexShader:h.vertexShader,fragmentShader:h.fragmentShader}):d.shader={name:a.type,uniforms:a.uniforms,vertexShader:a.vertexShader,fragmentShader:a.fragmentShader},a.onBeforeCompile(d.shader),h=na.acquireProgram(a,d.shader,c,g),d.program=h,a.program=h);c=h.getAttributes();if(a.morphTargets)for(g=a.numSupportedMorphTargets=0;g<J.maxMorphTargets;g++)0<=c[\"morphTarget\"+g]&&a.numSupportedMorphTargets++;\nif(a.morphNormals)for(g=a.numSupportedMorphNormals=0;g<J.maxMorphNormals;g++)0<=c[\"morphNormal\"+g]&&a.numSupportedMorphNormals++;c=d.shader.uniforms;if(!a.isShaderMaterial&&!a.isRawShaderMaterial||!0===a.clipping)d.numClippingPlanes=Ha.numPlanes,d.numIntersection=Ha.numIntersection,c.clippingPlanes=Ha.uniform;d.fog=b;d.lightsHash=ta.state.hash;a.lights&&(c.ambientLightColor.value=ta.state.ambient,c.directionalLights.value=ta.state.directional,c.spotLights.value=ta.state.spot,c.rectAreaLights.value=\nta.state.rectArea,c.pointLights.value=ta.state.point,c.hemisphereLights.value=ta.state.hemi,c.directionalShadowMap.value=ta.state.directionalShadowMap,c.directionalShadowMatrix.value=ta.state.directionalShadowMatrix,c.spotShadowMap.value=ta.state.spotShadowMap,c.spotShadowMatrix.value=ta.state.spotShadowMatrix,c.pointShadowMap.value=ta.state.pointShadowMap,c.pointShadowMatrix.value=ta.state.pointShadowMatrix);a=d.program.getUniforms();a=cb.seqWithValue(a.seq,c);d.uniformsList=a}function t(a,b,c,d){G=\n0;var e=da.get(c);ja&&(Wd||a!==P)&&Ha.setState(c.clippingPlanes,c.clipIntersection,c.clipShadows,a,e,a===P&&c.id===T);!1===c.needsUpdate&&(void 0===e.program?c.needsUpdate=!0:c.fog&&e.fog!==b?c.needsUpdate=!0:c.lights&&e.lightsHash!==ta.state.hash?c.needsUpdate=!0:void 0===e.numClippingPlanes||e.numClippingPlanes===Ha.numPlanes&&e.numIntersection===Ha.numIntersection||(c.needsUpdate=!0));c.needsUpdate&&(p(c,b,d),c.needsUpdate=!1);var f=!1,g=!1,h=!1,l=e.program,k=l.getUniforms(),q=e.shader.uniforms;\nZ.useProgram(l.program)&&(h=g=f=!0);c.id!==T&&(T=c.id,g=!0);if(f||a!==P){k.setValue(E,\"projectionMatrix\",a.projectionMatrix);ea.logarithmicDepthBuffer&&k.setValue(E,\"logDepthBufFC\",2/(Math.log(a.far+1)/Math.LN2));P!==(Y||a)&&(P=Y||a,h=g=!0);if(c.isShaderMaterial||c.isMeshPhongMaterial||c.isMeshStandardMaterial||c.envMap)f=k.map.cameraPosition,void 0!==f&&f.setValue(E,Gb.setFromMatrixPosition(a.matrixWorld));(c.isMeshPhongMaterial||c.isMeshLambertMaterial||c.isMeshBasicMaterial||c.isMeshStandardMaterial||\nc.isShaderMaterial||c.skinning)&&k.setValue(E,\"viewMatrix\",a.matrixWorldInverse)}if(c.skinning&&(k.setOptional(E,d,\"bindMatrix\"),k.setOptional(E,d,\"bindMatrixInverse\"),a=d.skeleton))if(f=a.bones,ea.floatVertexTextures){if(void 0===a.boneTexture){var f=Math.sqrt(4*f.length),f=R.nextPowerOfTwo(Math.ceil(f)),f=Math.max(f,4),t=new Float32Array(f*f*4);t.set(a.boneMatrices);var v=new bb(t,f,f,1023,1015);a.boneMatrices=t;a.boneTexture=v;a.boneTextureSize=f}k.setValue(E,\"boneTexture\",a.boneTexture);k.setValue(E,\n\"boneTextureSize\",a.boneTextureSize)}else k.setOptional(E,a,\"boneMatrices\");g&&(k.setValue(E,\"toneMappingExposure\",J.toneMappingExposure),k.setValue(E,\"toneMappingWhitePoint\",J.toneMappingWhitePoint),c.lights&&(g=h,q.ambientLightColor.needsUpdate=g,q.directionalLights.needsUpdate=g,q.pointLights.needsUpdate=g,q.spotLights.needsUpdate=g,q.rectAreaLights.needsUpdate=g,q.hemisphereLights.needsUpdate=g),b&&c.fog&&(q.fogColor.value=b.color,b.isFog?(q.fogNear.value=b.near,q.fogFar.value=b.far):b.isFogExp2&&\n(q.fogDensity.value=b.density)),c.isMeshBasicMaterial?r(q,c):c.isMeshLambertMaterial?(r(q,c),c.emissiveMap&&(q.emissiveMap.value=c.emissiveMap)):c.isMeshPhongMaterial?(r(q,c),c.isMeshToonMaterial?(m(q,c),c.gradientMap&&(q.gradientMap.value=c.gradientMap)):m(q,c)):c.isMeshStandardMaterial?(r(q,c),c.isMeshPhysicalMaterial&&(q.clearCoat.value=c.clearCoat,q.clearCoatRoughness.value=c.clearCoatRoughness),q.roughness.value=c.roughness,q.metalness.value=c.metalness,c.roughnessMap&&(q.roughnessMap.value=\nc.roughnessMap),c.metalnessMap&&(q.metalnessMap.value=c.metalnessMap),c.emissiveMap&&(q.emissiveMap.value=c.emissiveMap),c.bumpMap&&(q.bumpMap.value=c.bumpMap,q.bumpScale.value=c.bumpScale),c.normalMap&&(q.normalMap.value=c.normalMap,q.normalScale.value.copy(c.normalScale)),c.displacementMap&&(q.displacementMap.value=c.displacementMap,q.displacementScale.value=c.displacementScale,q.displacementBias.value=c.displacementBias),c.envMap&&(q.envMapIntensity.value=c.envMapIntensity)):c.isMeshDepthMaterial?\n(r(q,c),c.displacementMap&&(q.displacementMap.value=c.displacementMap,q.displacementScale.value=c.displacementScale,q.displacementBias.value=c.displacementBias)):c.isMeshDistanceMaterial?(r(q,c),c.displacementMap&&(q.displacementMap.value=c.displacementMap,q.displacementScale.value=c.displacementScale,q.displacementBias.value=c.displacementBias),q.referencePosition.value.copy(c.referencePosition),q.nearDistance.value=c.nearDistance,q.farDistance.value=c.farDistance):c.isMeshNormalMaterial?(r(q,c),\nc.bumpMap&&(q.bumpMap.value=c.bumpMap,q.bumpScale.value=c.bumpScale),c.normalMap&&(q.normalMap.value=c.normalMap,q.normalScale.value.copy(c.normalScale)),c.displacementMap&&(q.displacementMap.value=c.displacementMap,q.displacementScale.value=c.displacementScale,q.displacementBias.value=c.displacementBias)):c.isLineBasicMaterial?(q.diffuse.value=c.color,q.opacity.value=c.opacity,c.isLineDashedMaterial&&(q.dashSize.value=c.dashSize,q.totalSize.value=c.dashSize+c.gapSize,q.scale.value=c.scale)):c.isPointsMaterial?\n(q.diffuse.value=c.color,q.opacity.value=c.opacity,q.size.value=c.size*N,q.scale.value=.5*ca,q.map.value=c.map,null!==c.map&&(b=c.map.offset,c=c.map.repeat,q.offsetRepeat.value.set(b.x,b.y,c.x,c.y))):c.isShadowMaterial&&(q.color.value=c.color,q.opacity.value=c.opacity),void 0!==q.ltcMat&&(q.ltcMat.value=L.LTC_MAT_TEXTURE),void 0!==q.ltcMag&&(q.ltcMag.value=L.LTC_MAG_TEXTURE),cb.upload(E,e.uniformsList,q,J));k.setValue(E,\"modelViewMatrix\",d.modelViewMatrix);k.setValue(E,\"normalMatrix\",d.normalMatrix);\nk.setValue(E,\"modelMatrix\",d.matrixWorld);return l}function r(a,b){a.opacity.value=b.opacity;b.color&&(a.diffuse.value=b.color);b.emissive&&a.emissive.value.copy(b.emissive).multiplyScalar(b.emissiveIntensity);b.map&&(a.map.value=b.map);b.alphaMap&&(a.alphaMap.value=b.alphaMap);b.specularMap&&(a.specularMap.value=b.specularMap);b.envMap&&(a.envMap.value=b.envMap,a.flipEnvMap.value=b.envMap&&b.envMap.isCubeTexture?-1:1,a.reflectivity.value=b.reflectivity,a.refractionRatio.value=b.refractionRatio);\nb.lightMap&&(a.lightMap.value=b.lightMap,a.lightMapIntensity.value=b.lightMapIntensity);b.aoMap&&(a.aoMap.value=b.aoMap,a.aoMapIntensity.value=b.aoMapIntensity);if(b.map)var c=b.map;else b.specularMap?c=b.specularMap:b.displacementMap?c=b.displacementMap:b.normalMap?c=b.normalMap:b.bumpMap?c=b.bumpMap:b.roughnessMap?c=b.roughnessMap:b.metalnessMap?c=b.metalnessMap:b.alphaMap?c=b.alphaMap:b.emissiveMap&&(c=b.emissiveMap);void 0!==c&&(c.isWebGLRenderTarget&&(c=c.texture),b=c.offset,c=c.repeat,a.offsetRepeat.value.set(b.x,\nb.y,c.x,c.y))}function m(a,b){a.specular.value=b.specular;a.shininess.value=Math.max(b.shininess,1E-4);b.emissiveMap&&(a.emissiveMap.value=b.emissiveMap);b.bumpMap&&(a.bumpMap.value=b.bumpMap,a.bumpScale.value=b.bumpScale);b.normalMap&&(a.normalMap.value=b.normalMap,a.normalScale.value.copy(b.normalScale));b.displacementMap&&(a.displacementMap.value=b.displacementMap,a.displacementScale.value=b.displacementScale,a.displacementBias.value=b.displacementBias)}console.log(\"THREE.WebGLRenderer\",\"87\");\na=a||{};var u=void 0!==a.canvas?a.canvas:document.createElementNS(\"http://www.w3.org/1999/xhtml\",\"canvas\"),x=void 0!==a.context?a.context:null,y=void 0!==a.alpha?a.alpha:!1,A=void 0!==a.depth?a.depth:!0,I=void 0!==a.stencil?a.stencil:!0,B=void 0!==a.antialias?a.antialias:!1,H=void 0!==a.premultipliedAlpha?a.premultipliedAlpha:!0,va=void 0!==a.preserveDrawingBuffer?a.preserveDrawingBuffer:!1,w=[],z=[],ba=null,D=[],C=[];this.domElement=u;this.context=null;this.sortObjects=this.autoClearStencil=this.autoClearDepth=\nthis.autoClearColor=this.autoClear=!0;this.clippingPlanes=[];this.localClippingEnabled=!1;this.gammaFactor=2;this.physicallyCorrectLights=this.gammaOutput=this.gammaInput=!1;this.toneMappingWhitePoint=this.toneMappingExposure=this.toneMapping=1;this.maxMorphTargets=8;this.maxMorphNormals=4;var J=this,Q=!1,ga=null,M=null,T=-1,K=\"\",P=null,Y=null,V=new S,W=new S,X=null,G=0,U=u.width,ca=u.height,N=1,aa=new S(0,0,U,ca),ia=new S(0,0,U,ca),ha=!1,Vd=new kd,Ha=new pg,ja=!1,Wd=!1,ld=new O,Gb=new n,Xd={geometries:0,\ntextures:0},Sa={frame:0,calls:0,vertices:0,faces:0,points:0};this.info={render:Sa,memory:Xd,programs:null};try{y={alpha:y,depth:A,stencil:I,antialias:B,premultipliedAlpha:H,preserveDrawingBuffer:va};var E=x||u.getContext(\"webgl\",y)||u.getContext(\"experimental-webgl\",y);if(null===E){if(null!==u.getContext(\"webgl\"))throw\"Error creating WebGL context with your selected attributes.\";throw\"Error creating WebGL context.\";}void 0===E.getShaderPrecisionFormat&&(E.getShaderPrecisionFormat=function(){return{rangeMin:1,\nrangeMax:1,precision:1}});u.addEventListener(\"webglcontextlost\",c,!1);u.addEventListener(\"webglcontextrestored\",d,!1)}catch(qg){console.error(\"THREE.WebGLRenderer: \"+qg)}var ka,ea,Z,da,fa,pa,ra,ua,ta,na,sa,oa,wa,ya,za,Ba,Ca,qa;b();var ma=new ng(J);this.vr=ma;var Ea=new Ke(J,ua,ea.maxTextureSize);this.shadowMap=Ea;this.getContext=function(){return E};this.getContextAttributes=function(){return E.getContextAttributes()};this.forceContextLoss=function(){var a=ka.get(\"WEBGL_lose_context\");a&&a.loseContext()};\nthis.forceContextRestore=function(){var a=ka.get(\"WEBGL_lose_context\");a&&a.restoreContext()};this.getPixelRatio=function(){return N};this.setPixelRatio=function(a){void 0!==a&&(N=a,this.setSize(U,ca,!1))};this.getSize=function(){return{width:U,height:ca}};this.setSize=function(a,b,c){var d=ma.getDevice();d&&d.isPresenting?console.warn(\"THREE.WebGLRenderer: Can't change size while VR device is presenting.\"):(U=a,ca=b,u.width=a*N,u.height=b*N,!1!==c&&(u.style.width=a+\"px\",u.style.height=b+\"px\"),this.setViewport(0,\n0,a,b))};this.getDrawingBufferSize=function(){return{width:U*N,height:ca*N}};this.setDrawingBufferSize=function(a,b,c){U=a;ca=b;N=c;u.width=a*c;u.height=b*c;this.setViewport(0,0,a,b)};this.setViewport=function(a,b,c,d){aa.set(a,ca-b-d,c,d);Z.viewport(V.copy(aa).multiplyScalar(N))};this.setScissor=function(a,b,c,d){ia.set(a,ca-b-d,c,d);Z.scissor(W.copy(ia).multiplyScalar(N))};this.setScissorTest=function(a){Z.setScissorTest(ha=a)};this.getClearColor=oa.getClearColor;this.setClearColor=oa.setClearColor;\nthis.getClearAlpha=oa.getClearAlpha;this.setClearAlpha=oa.setClearAlpha;this.clear=function(a,b,c){var d=0;if(void 0===a||a)d|=E.COLOR_BUFFER_BIT;if(void 0===b||b)d|=E.DEPTH_BUFFER_BIT;if(void 0===c||c)d|=E.STENCIL_BUFFER_BIT;E.clear(d)};this.clearColor=function(){this.clear(!0,!1,!1)};this.clearDepth=function(){this.clear(!1,!0,!1)};this.clearStencil=function(){this.clear(!1,!1,!0)};this.clearTarget=function(a,b,c,d){this.setRenderTarget(a);this.clear(b,c,d)};this.dispose=function(){u.removeEventListener(\"webglcontextlost\",\nc,!1);u.removeEventListener(\"webglcontextrestored\",d,!1);sa.dispose();ma.dispose()};this.renderBufferImmediate=function(a,b,c){Z.initAttributes();var d=da.get(a);a.hasPositions&&!d.position&&(d.position=E.createBuffer());a.hasNormals&&!d.normal&&(d.normal=E.createBuffer());a.hasUvs&&!d.uv&&(d.uv=E.createBuffer());a.hasColors&&!d.color&&(d.color=E.createBuffer());b=b.getAttributes();a.hasPositions&&(E.bindBuffer(E.ARRAY_BUFFER,d.position),E.bufferData(E.ARRAY_BUFFER,a.positionArray,E.DYNAMIC_DRAW),\nZ.enableAttribute(b.position),E.vertexAttribPointer(b.position,3,E.FLOAT,!1,0,0));if(a.hasNormals){E.bindBuffer(E.ARRAY_BUFFER,d.normal);if(!c.isMeshPhongMaterial&&!c.isMeshStandardMaterial&&!c.isMeshNormalMaterial&&!0===c.flatShading)for(var e=0,f=3*a.count;e<f;e+=9){var g=a.normalArray,h=(g[e+0]+g[e+3]+g[e+6])/3,l=(g[e+1]+g[e+4]+g[e+7])/3,k=(g[e+2]+g[e+5]+g[e+8])/3;g[e+0]=h;g[e+1]=l;g[e+2]=k;g[e+3]=h;g[e+4]=l;g[e+5]=k;g[e+6]=h;g[e+7]=l;g[e+8]=k}E.bufferData(E.ARRAY_BUFFER,a.normalArray,E.DYNAMIC_DRAW);\nZ.enableAttribute(b.normal);E.vertexAttribPointer(b.normal,3,E.FLOAT,!1,0,0)}a.hasUvs&&c.map&&(E.bindBuffer(E.ARRAY_BUFFER,d.uv),E.bufferData(E.ARRAY_BUFFER,a.uvArray,E.DYNAMIC_DRAW),Z.enableAttribute(b.uv),E.vertexAttribPointer(b.uv,2,E.FLOAT,!1,0,0));a.hasColors&&0!==c.vertexColors&&(E.bindBuffer(E.ARRAY_BUFFER,d.color),E.bufferData(E.ARRAY_BUFFER,a.colorArray,E.DYNAMIC_DRAW),Z.enableAttribute(b.color),E.vertexAttribPointer(b.color,3,E.FLOAT,!1,0,0));Z.disableUnusedAttributes();E.drawArrays(E.TRIANGLES,\n0,a.count);a.count=0};this.renderBufferDirect=function(a,b,c,d,e,f){Z.setMaterial(d);var g=t(a,b,d,e);a=c.id+\"_\"+g.id+\"_\"+(!0===d.wireframe);var h=!1;a!==K&&(K=a,h=!0);e.morphTargetInfluences&&(wa.update(e,c,d,g),h=!0);var l=c.index,k=c.attributes.position;b=1;!0===d.wireframe&&(l=ra.getWireframeAttribute(c),b=2);a=ya;if(null!==l){var q=pa.get(l);a=za;a.setIndex(q)}if(h){h=void 0;if(c&&c.isInstancedBufferGeometry&&null===ka.get(\"ANGLE_instanced_arrays\"))console.error(\"THREE.WebGLRenderer.setupVertexAttributes: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.\");\nelse{void 0===h&&(h=0);Z.initAttributes();var p=c.attributes,g=g.getAttributes(),r=d.defaultAttributeValues;for(H in g){var m=g[H];if(0<=m){var v=p[H];if(void 0!==v){var n=v.normalized,x=v.itemSize,u=pa.get(v);if(void 0!==u){var A=u.buffer,B=u.type,u=u.bytesPerElement;if(v.isInterleavedBufferAttribute){var y=v.data,I=y.stride,v=v.offset;y&&y.isInstancedInterleavedBuffer?(Z.enableAttributeAndDivisor(m,y.meshPerAttribute),void 0===c.maxInstancedCount&&(c.maxInstancedCount=y.meshPerAttribute*y.count)):\nZ.enableAttribute(m);E.bindBuffer(E.ARRAY_BUFFER,A);E.vertexAttribPointer(m,x,B,n,I*u,(h*I+v)*u)}else v.isInstancedBufferAttribute?(Z.enableAttributeAndDivisor(m,v.meshPerAttribute),void 0===c.maxInstancedCount&&(c.maxInstancedCount=v.meshPerAttribute*v.count)):Z.enableAttribute(m),E.bindBuffer(E.ARRAY_BUFFER,A),E.vertexAttribPointer(m,x,B,n,0,h*x*u)}}else if(void 0!==r&&(n=r[H],void 0!==n))switch(n.length){case 2:E.vertexAttrib2fv(m,n);break;case 3:E.vertexAttrib3fv(m,n);break;case 4:E.vertexAttrib4fv(m,\nn);break;default:E.vertexAttrib1fv(m,n)}}}Z.disableUnusedAttributes()}null!==l&&E.bindBuffer(E.ELEMENT_ARRAY_BUFFER,q.buffer)}q=0;null!==l?q=l.count:void 0!==k&&(q=k.count);l=c.drawRange.start*b;k=null!==f?f.start*b:0;var H=Math.max(l,k);f=Math.max(0,Math.min(q,l+c.drawRange.count*b,k+(null!==f?f.count*b:Infinity))-1-H+1);if(0!==f){if(e.isMesh)if(!0===d.wireframe)Z.setLineWidth(d.wireframeLinewidth*(null===ga?N:1)),a.setMode(E.LINES);else switch(e.drawMode){case 0:a.setMode(E.TRIANGLES);break;case 1:a.setMode(E.TRIANGLE_STRIP);\nbreak;case 2:a.setMode(E.TRIANGLE_FAN)}else e.isLine?(d=d.linewidth,void 0===d&&(d=1),Z.setLineWidth(d*(null===ga?N:1)),e.isLineSegments?a.setMode(E.LINES):e.isLineLoop?a.setMode(E.LINE_LOOP):a.setMode(E.LINE_STRIP)):e.isPoints&&a.setMode(E.POINTS);c&&c.isInstancedBufferGeometry?0<c.maxInstancedCount&&a.renderInstances(c,H,f):a.render(H,f)}};this.compile=function(a,b){w.length=0;z.length=0;a.traverse(function(a){a.isLight&&(w.push(a),a.castShadow&&z.push(a))});ta.setup(w,z,b);a.traverse(function(b){if(b.material)if(Array.isArray(b.material))for(var c=\n0;c<b.material.length;c++)p(b.material[c],a.fog,b);else p(b.material,a.fog,b)})};var Fa=!1,Aa=null;this.animate=function(a){Aa=a;Fa||((ma.getDevice()||window).requestAnimationFrame(h),Fa=!0)};this.render=function(a,b,c,d){if(!b||!b.isCamera)console.error(\"THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.\");else if(!Q){K=\"\";T=-1;P=null;!0===a.autoUpdate&&a.updateMatrixWorld();null===b.parent&&b.updateMatrixWorld();ma.enabled&&(b=ma.getCamera(b));ld.multiplyMatrices(b.projectionMatrix,\nb.matrixWorldInverse);Vd.setFromMatrix(ld);w.length=0;z.length=0;D.length=0;C.length=0;Wd=this.localClippingEnabled;ja=Ha.init(this.clippingPlanes,Wd,b);ba=sa.get(a,b);ba.init();k(a,b,J.sortObjects);!0===J.sortObjects&&ba.sort();ja&&Ha.beginShadows();Ea.render(z,a,b);ta.setup(w,z,b);ja&&Ha.endShadows();Sa.frame++;Sa.calls=0;Sa.vertices=0;Sa.faces=0;Sa.points=0;void 0===c&&(c=null);this.setRenderTarget(c);oa.render(ba,a,b,d);d=ba.opaque;var e=ba.transparent;if(a.overrideMaterial){var f=a.overrideMaterial;\nd.length&&l(d,a,b,f);e.length&&l(e,a,b,f)}else d.length&&l(d,a,b),e.length&&l(e,a,b);Ca.render(D,a,b);Ba.render(C,a,b,V);c&&fa.updateRenderTargetMipmap(c);Z.buffers.depth.setTest(!0);Z.buffers.depth.setMask(!0);Z.buffers.color.setMask(!0);Z.setPolygonOffset(!1);ma.enabled&&ma.submitFrame()}};this.setFaceCulling=function(a,b){Z.setCullFace(a);Z.setFlipSided(0===b)};this.allocTextureUnit=function(){var a=G;a>=ea.maxTextures&&console.warn(\"THREE.WebGLRenderer: Trying to use \"+a+\" texture units while this GPU supports only \"+\nea.maxTextures);G+=1;return a};this.setTexture2D=function(){var a=!1;return function(b,c){b&&b.isWebGLRenderTarget&&(a||(console.warn(\"THREE.WebGLRenderer.setTexture2D: don't use render targets as textures. Use their .texture property instead.\"),a=!0),b=b.texture);fa.setTexture2D(b,c)}}();this.setTexture=function(){var a=!1;return function(b,c){a||(console.warn(\"THREE.WebGLRenderer: .setTexture is deprecated, use setTexture2D instead.\"),a=!0);fa.setTexture2D(b,c)}}();this.setTextureCube=function(){var a=\n!1;return function(b,c){b&&b.isWebGLRenderTargetCube&&(a||(console.warn(\"THREE.WebGLRenderer.setTextureCube: don't use cube render targets as textures. Use their .texture property instead.\"),a=!0),b=b.texture);b&&b.isCubeTexture||Array.isArray(b.image)&&6===b.image.length?fa.setTextureCube(b,c):fa.setTextureCubeDynamic(b,c)}}();this.getRenderTarget=function(){return ga};this.setRenderTarget=function(a){(ga=a)&&void 0===da.get(a).__webglFramebuffer&&fa.setupRenderTarget(a);var b=null,c=!1;a?(b=da.get(a).__webglFramebuffer,\na.isWebGLRenderTargetCube&&(b=b[a.activeCubeFace],c=!0),V.copy(a.viewport),W.copy(a.scissor),X=a.scissorTest):(V.copy(aa).multiplyScalar(N),W.copy(ia).multiplyScalar(N),X=ha);M!==b&&(E.bindFramebuffer(E.FRAMEBUFFER,b),M=b);Z.viewport(V);Z.scissor(W);Z.setScissorTest(X);c&&(c=da.get(a.texture),E.framebufferTexture2D(E.FRAMEBUFFER,E.COLOR_ATTACHMENT0,E.TEXTURE_CUBE_MAP_POSITIVE_X+a.activeCubeFace,c.__webglTexture,a.activeMipMapLevel))};this.readRenderTargetPixels=function(a,b,c,d,e,f){if(a&&a.isWebGLRenderTarget){var g=\nda.get(a).__webglFramebuffer;if(g){var h=!1;g!==M&&(E.bindFramebuffer(E.FRAMEBUFFER,g),h=!0);try{var l=a.texture,k=l.format,q=l.type;1023!==k&&qa.convert(k)!==E.getParameter(E.IMPLEMENTATION_COLOR_READ_FORMAT)?console.error(\"THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.\"):1009===q||qa.convert(q)===E.getParameter(E.IMPLEMENTATION_COLOR_READ_TYPE)||1015===q&&(ka.get(\"OES_texture_float\")||ka.get(\"WEBGL_color_buffer_float\"))||1016===q&&ka.get(\"EXT_color_buffer_half_float\")?\nE.checkFramebufferStatus(E.FRAMEBUFFER)===E.FRAMEBUFFER_COMPLETE?0<=b&&b<=a.width-d&&0<=c&&c<=a.height-e&&E.readPixels(b,c,d,e,qa.convert(k),qa.convert(q),f):console.error(\"THREE.WebGLRenderer.readRenderTargetPixels: readPixels from renderTarget failed. Framebuffer not complete.\"):console.error(\"THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.\")}finally{h&&E.bindFramebuffer(E.FRAMEBUFFER,M)}}}else console.error(\"THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.\")}}\nfunction Hb(a,b){this.name=\"\";this.color=new C(a);this.density=void 0!==b?b:2.5E-4}function Ib(a,b,c){this.name=\"\";this.color=new C(a);this.near=void 0!==b?b:1;this.far=void 0!==c?c:1E3}function nd(){w.call(this);this.type=\"Scene\";this.overrideMaterial=this.fog=this.background=null;this.autoUpdate=!0}function Zd(a,b,c,d,e){w.call(this);this.lensFlares=[];this.positionScreen=new n;this.customUpdateCallback=void 0;void 0!==a&&this.add(a,b,c,d,e)}function Za(a){P.call(this);this.type=\"SpriteMaterial\";\nthis.color=new C(16777215);this.map=null;this.rotation=0;this.lights=this.fog=!1;this.setValues(a)}function xc(a){w.call(this);this.type=\"Sprite\";this.material=void 0!==a?a:new Za}function yc(){w.call(this);this.type=\"LOD\";Object.defineProperties(this,{levels:{enumerable:!0,value:[]}})}function zc(a,b){a=a||[];this.bones=a.slice(0);this.boneMatrices=new Float32Array(16*this.bones.length);if(void 0===b)this.calculateInverses();else if(this.bones.length===b.length)this.boneInverses=b.slice(0);else for(console.warn(\"THREE.Skeleton boneInverses is the wrong length.\"),\nthis.boneInverses=[],a=0,b=this.bones.length;a<b;a++)this.boneInverses.push(new O)}function od(){w.call(this);this.type=\"Bone\"}function pd(a,b){fa.call(this,a,b);this.type=\"SkinnedMesh\";this.bindMode=\"attached\";this.bindMatrix=new O;this.bindMatrixInverse=new O;a=this.initBones();a=new zc(a);this.bind(a,this.matrixWorld);this.normalizeSkinWeights()}function W(a){P.call(this);this.type=\"LineBasicMaterial\";this.color=new C(16777215);this.linewidth=1;this.linejoin=this.linecap=\"round\";this.lights=!1;\nthis.setValues(a)}function ra(a,b,c){if(1===c)return console.warn(\"THREE.Line: parameter THREE.LinePieces no longer supported. Created THREE.LineSegments instead.\"),new X(a,b);w.call(this);this.type=\"Line\";this.geometry=void 0!==a?a:new F;this.material=void 0!==b?b:new W({color:16777215*Math.random()})}function X(a,b){ra.call(this,a,b);this.type=\"LineSegments\"}function qd(a,b){ra.call(this,a,b);this.type=\"LineLoop\"}function ma(a){P.call(this);this.type=\"PointsMaterial\";this.color=new C(16777215);\nthis.map=null;this.size=1;this.sizeAttenuation=!0;this.lights=!1;this.setValues(a)}function Jb(a,b){w.call(this);this.type=\"Points\";this.geometry=void 0!==a?a:new F;this.material=void 0!==b?b:new ma({color:16777215*Math.random()})}function Ac(){w.call(this);this.type=\"Group\"}function rd(a,b,c,d,e,f,g,h,k){function l(){requestAnimationFrame(l);a.readyState>=a.HAVE_CURRENT_DATA&&(q.needsUpdate=!0)}N.call(this,a,b,c,d,e,f,g,h,k);this.generateMipmaps=!1;var q=this;l()}function Kb(a,b,c,d,e,f,g,h,k,l,\nq,p){N.call(this,null,f,g,h,k,l,d,e,q,p);this.image={width:b,height:c};this.mipmaps=a;this.generateMipmaps=this.flipY=!1}function Bc(a,b,c,d,e,f,g,h,k,l){l=void 0!==l?l:1026;if(1026!==l&&1027!==l)throw Error(\"DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat\");void 0===c&&1026===l&&(c=1012);void 0===c&&1027===l&&(c=1020);N.call(this,null,d,e,f,g,h,l,c,k);this.image={width:a,height:b};this.magFilter=void 0!==g?g:1003;this.minFilter=void 0!==h?h:1003;this.generateMipmaps=\nthis.flipY=!1}function Lb(a){F.call(this);this.type=\"WireframeGeometry\";var b=[],c,d,e,f=[0,0],g={},h=[\"a\",\"b\",\"c\"];if(a&&a.isGeometry){var k=a.faces;var l=0;for(d=k.length;l<d;l++){var q=k[l];for(c=0;3>c;c++){var p=q[h[c]];var t=q[h[(c+1)%3]];f[0]=Math.min(p,t);f[1]=Math.max(p,t);p=f[0]+\",\"+f[1];void 0===g[p]&&(g[p]={index1:f[0],index2:f[1]})}}for(p in g)l=g[p],h=a.vertices[l.index1],b.push(h.x,h.y,h.z),h=a.vertices[l.index2],b.push(h.x,h.y,h.z)}else if(a&&a.isBufferGeometry){var h=new n;if(null!==\na.index){k=a.attributes.position;q=a.index;var r=a.groups;0===r.length&&(r=[{start:0,count:q.count,materialIndex:0}]);a=0;for(e=r.length;a<e;++a)for(l=r[a],c=l.start,d=l.count,l=c,d=c+d;l<d;l+=3)for(c=0;3>c;c++)p=q.getX(l+c),t=q.getX(l+(c+1)%3),f[0]=Math.min(p,t),f[1]=Math.max(p,t),p=f[0]+\",\"+f[1],void 0===g[p]&&(g[p]={index1:f[0],index2:f[1]});for(p in g)l=g[p],h.fromBufferAttribute(k,l.index1),b.push(h.x,h.y,h.z),h.fromBufferAttribute(k,l.index2),b.push(h.x,h.y,h.z)}else for(k=a.attributes.position,\nl=0,d=k.count/3;l<d;l++)for(c=0;3>c;c++)g=3*l+c,h.fromBufferAttribute(k,g),b.push(h.x,h.y,h.z),g=3*l+(c+1)%3,h.fromBufferAttribute(k,g),b.push(h.x,h.y,h.z)}this.addAttribute(\"position\",new z(b,3))}function Cc(a,b,c){Q.call(this);this.type=\"ParametricGeometry\";this.parameters={func:a,slices:b,stacks:c};this.fromBufferGeometry(new Mb(a,b,c));this.mergeVertices()}function Mb(a,b,c){F.call(this);this.type=\"ParametricBufferGeometry\";this.parameters={func:a,slices:b,stacks:c};var d=[],e=[],f=[],g=[],h=\nnew n,k=new n,l=new n,q=new n,p=new n,t,r,m=b+1;for(t=0;t<=c;t++){var u=t/c;for(r=0;r<=b;r++){var x=r/b,k=a(x,u,k);e.push(k.x,k.y,k.z);0<=x-1E-5?(l=a(x-1E-5,u,l),q.subVectors(k,l)):(l=a(x+1E-5,u,l),q.subVectors(l,k));0<=u-1E-5?(l=a(x,u-1E-5,l),p.subVectors(k,l)):(l=a(x,u+1E-5,l),p.subVectors(l,k));h.crossVectors(q,p).normalize();f.push(h.x,h.y,h.z);g.push(x,u)}}for(t=0;t<c;t++)for(r=0;r<b;r++)a=t*m+r+1,h=(t+1)*m+r+1,k=(t+1)*m+r,d.push(t*m+r,a,k),d.push(a,h,k);this.setIndex(d);this.addAttribute(\"position\",\nnew z(e,3));this.addAttribute(\"normal\",new z(f,3));this.addAttribute(\"uv\",new z(g,2))}function Dc(a,b,c,d){Q.call(this);this.type=\"PolyhedronGeometry\";this.parameters={vertices:a,indices:b,radius:c,detail:d};this.fromBufferGeometry(new ua(a,b,c,d));this.mergeVertices()}function ua(a,b,c,d){function e(a){h.push(a.x,a.y,a.z)}function f(b,c){b*=3;c.x=a[b+0];c.y=a[b+1];c.z=a[b+2]}function g(a,b,c,d){0>d&&1===a.x&&(k[b]=a.x-1);0===c.x&&0===c.z&&(k[b]=d/2/Math.PI+.5)}F.call(this);this.type=\"PolyhedronBufferGeometry\";\nthis.parameters={vertices:a,indices:b,radius:c,detail:d};c=c||1;d=d||0;var h=[],k=[];(function(a){for(var c=new n,d=new n,g=new n,h=0;h<b.length;h+=3){f(b[h+0],c);f(b[h+1],d);f(b[h+2],g);var l,k,m=c,y=d,A=g,I=Math.pow(2,a),B=[];for(k=0;k<=I;k++){B[k]=[];var H=m.clone().lerp(A,k/I),w=y.clone().lerp(A,k/I),z=I-k;for(l=0;l<=z;l++)B[k][l]=0===l&&k===I?H:H.clone().lerp(w,l/z)}for(k=0;k<I;k++)for(l=0;l<2*(I-k)-1;l++)m=Math.floor(l/2),0===l%2?(e(B[k][m+1]),e(B[k+1][m]),e(B[k][m])):(e(B[k][m+1]),e(B[k+1][m+\n1]),e(B[k+1][m]))}})(d);(function(a){for(var b=new n,c=0;c<h.length;c+=3)b.x=h[c+0],b.y=h[c+1],b.z=h[c+2],b.normalize().multiplyScalar(a),h[c+0]=b.x,h[c+1]=b.y,h[c+2]=b.z})(c);(function(){for(var a=new n,b=0;b<h.length;b+=3)a.x=h[b+0],a.y=h[b+1],a.z=h[b+2],k.push(Math.atan2(a.z,-a.x)/2/Math.PI+.5,1-(Math.atan2(-a.y,Math.sqrt(a.x*a.x+a.z*a.z))/Math.PI+.5));for(var a=new n,b=new n,c=new n,d=new n,e=new D,f=new D,m=new D,x=0,y=0;x<h.length;x+=9,y+=6){a.set(h[x+0],h[x+1],h[x+2]);b.set(h[x+3],h[x+4],h[x+\n5]);c.set(h[x+6],h[x+7],h[x+8]);e.set(k[y+0],k[y+1]);f.set(k[y+2],k[y+3]);m.set(k[y+4],k[y+5]);d.copy(a).add(b).add(c).divideScalar(3);var A=Math.atan2(d.z,-d.x);g(e,y+0,a,A);g(f,y+2,b,A);g(m,y+4,c,A)}for(a=0;a<k.length;a+=6)b=k[a+0],c=k[a+2],d=k[a+4],e=Math.min(b,c,d),.9<Math.max(b,c,d)&&.1>e&&(.2>b&&(k[a+0]+=1),.2>c&&(k[a+2]+=1),.2>d&&(k[a+4]+=1))})();this.addAttribute(\"position\",new z(h,3));this.addAttribute(\"normal\",new z(h.slice(),3));this.addAttribute(\"uv\",new z(k,2));0===d?this.computeVertexNormals():\nthis.normalizeNormals()}function Ec(a,b){Q.call(this);this.type=\"TetrahedronGeometry\";this.parameters={radius:a,detail:b};this.fromBufferGeometry(new Nb(a,b));this.mergeVertices()}function Nb(a,b){ua.call(this,[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],[2,1,0,0,3,2,1,3,0,2,3,1],a,b);this.type=\"TetrahedronBufferGeometry\";this.parameters={radius:a,detail:b}}function Fc(a,b){Q.call(this);this.type=\"OctahedronGeometry\";this.parameters={radius:a,detail:b};this.fromBufferGeometry(new jb(a,b));this.mergeVertices()}\nfunction jb(a,b){ua.call(this,[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2],a,b);this.type=\"OctahedronBufferGeometry\";this.parameters={radius:a,detail:b}}function Gc(a,b){Q.call(this);this.type=\"IcosahedronGeometry\";this.parameters={radius:a,detail:b};this.fromBufferGeometry(new Ob(a,b));this.mergeVertices()}function Ob(a,b){var c=(1+Math.sqrt(5))/2;ua.call(this,[-1,c,0,1,c,0,-1,-c,0,1,-c,0,0,-1,c,0,1,c,0,-1,-c,0,1,-c,c,0,-1,c,0,1,-c,0,-1,-c,0,1],[0,11,\n5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1],a,b);this.type=\"IcosahedronBufferGeometry\";this.parameters={radius:a,detail:b}}function Hc(a,b){Q.call(this);this.type=\"DodecahedronGeometry\";this.parameters={radius:a,detail:b};this.fromBufferGeometry(new Pb(a,b));this.mergeVertices()}function Pb(a,b){var c=(1+Math.sqrt(5))/2,d=1/c;ua.call(this,[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-d,-c,0,-d,c,0,\nd,-c,0,d,c,-d,-c,0,-d,c,0,d,-c,0,d,c,0,-c,0,-d,c,0,-d,-c,0,d,c,0,d],[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9],a,b);this.type=\"DodecahedronBufferGeometry\";this.parameters={radius:a,detail:b}}function Ic(a,b,c,d,e,f){Q.call(this);this.type=\"TubeGeometry\";this.parameters={path:a,\ntubularSegments:b,radius:c,radialSegments:d,closed:e};void 0!==f&&console.warn(\"THREE.TubeGeometry: taper has been removed.\");a=new Qb(a,b,c,d,e);this.tangents=a.tangents;this.normals=a.normals;this.binormals=a.binormals;this.fromBufferGeometry(a);this.mergeVertices()}function Qb(a,b,c,d,e){function f(e){var f=a.getPointAt(e/b),l=g.normals[e];e=g.binormals[e];for(p=0;p<=d;p++){var q=p/d*Math.PI*2,r=Math.sin(q),q=-Math.cos(q);k.x=q*l.x+r*e.x;k.y=q*l.y+r*e.y;k.z=q*l.z+r*e.z;k.normalize();m.push(k.x,\nk.y,k.z);h.x=f.x+c*k.x;h.y=f.y+c*k.y;h.z=f.z+c*k.z;t.push(h.x,h.y,h.z)}}F.call(this);this.type=\"TubeBufferGeometry\";this.parameters={path:a,tubularSegments:b,radius:c,radialSegments:d,closed:e};b=b||64;c=c||1;d=d||8;e=e||!1;var g=a.computeFrenetFrames(b,e);this.tangents=g.tangents;this.normals=g.normals;this.binormals=g.binormals;var h=new n,k=new n,l=new D,q,p,t=[],m=[],v=[],u=[];for(q=0;q<b;q++)f(q);f(!1===e?b:0);for(q=0;q<=b;q++)for(p=0;p<=d;p++)l.x=q/b,l.y=p/d,v.push(l.x,l.y);(function(){for(p=\n1;p<=b;p++)for(q=1;q<=d;q++){var a=(d+1)*p+(q-1),c=(d+1)*p+q,e=(d+1)*(p-1)+q;u.push((d+1)*(p-1)+(q-1),a,e);u.push(a,c,e)}})();this.setIndex(u);this.addAttribute(\"position\",new z(t,3));this.addAttribute(\"normal\",new z(m,3));this.addAttribute(\"uv\",new z(v,2))}function Jc(a,b,c,d,e,f,g){Q.call(this);this.type=\"TorusKnotGeometry\";this.parameters={radius:a,tube:b,tubularSegments:c,radialSegments:d,p:e,q:f};void 0!==g&&console.warn(\"THREE.TorusKnotGeometry: heightScale has been deprecated. Use .scale( x, y, z ) instead.\");\nthis.fromBufferGeometry(new Rb(a,b,c,d,e,f));this.mergeVertices()}function Rb(a,b,c,d,e,f){function g(a,b,c,d,e){var f=Math.sin(a);b=c/b*a;c=Math.cos(b);e.x=d*(2+c)*.5*Math.cos(a);e.y=d*(2+c)*f*.5;e.z=d*Math.sin(b)*.5}F.call(this);this.type=\"TorusKnotBufferGeometry\";this.parameters={radius:a,tube:b,tubularSegments:c,radialSegments:d,p:e,q:f};a=a||100;b=b||40;c=Math.floor(c)||64;d=Math.floor(d)||8;e=e||2;f=f||3;var h=[],k=[],l=[],q=[],p,t=new n,m=new n,v=new n,u=new n,x=new n,y=new n,A=new n;for(p=\n0;p<=c;++p){var I=p/c*e*Math.PI*2;g(I,e,f,a,v);g(I+.01,e,f,a,u);y.subVectors(u,v);A.addVectors(u,v);x.crossVectors(y,A);A.crossVectors(x,y);x.normalize();A.normalize();for(I=0;I<=d;++I){var B=I/d*Math.PI*2,H=-b*Math.cos(B),B=b*Math.sin(B);t.x=v.x+(H*A.x+B*x.x);t.y=v.y+(H*A.y+B*x.y);t.z=v.z+(H*A.z+B*x.z);k.push(t.x,t.y,t.z);m.subVectors(t,v).normalize();l.push(m.x,m.y,m.z);q.push(p/c);q.push(I/d)}}for(I=1;I<=c;I++)for(p=1;p<=d;p++)a=(d+1)*I+(p-1),b=(d+1)*I+p,e=(d+1)*(I-1)+p,h.push((d+1)*(I-1)+(p-1),\na,e),h.push(a,b,e);this.setIndex(h);this.addAttribute(\"position\",new z(k,3));this.addAttribute(\"normal\",new z(l,3));this.addAttribute(\"uv\",new z(q,2))}function Kc(a,b,c,d,e){Q.call(this);this.type=\"TorusGeometry\";this.parameters={radius:a,tube:b,radialSegments:c,tubularSegments:d,arc:e};this.fromBufferGeometry(new Sb(a,b,c,d,e));this.mergeVertices()}function Sb(a,b,c,d,e){F.call(this);this.type=\"TorusBufferGeometry\";this.parameters={radius:a,tube:b,radialSegments:c,tubularSegments:d,arc:e};a=a||100;\nb=b||40;c=Math.floor(c)||8;d=Math.floor(d)||6;e=e||2*Math.PI;var f=[],g=[],h=[],k=[],l=new n,q=new n,p=new n,t,m;for(t=0;t<=c;t++)for(m=0;m<=d;m++){var v=m/d*e,u=t/c*Math.PI*2;q.x=(a+b*Math.cos(u))*Math.cos(v);q.y=(a+b*Math.cos(u))*Math.sin(v);q.z=b*Math.sin(u);g.push(q.x,q.y,q.z);l.x=a*Math.cos(v);l.y=a*Math.sin(v);p.subVectors(q,l).normalize();h.push(p.x,p.y,p.z);k.push(m/d);k.push(t/c)}for(t=1;t<=c;t++)for(m=1;m<=d;m++)a=(d+1)*(t-1)+m-1,b=(d+1)*(t-1)+m,e=(d+1)*t+m,f.push((d+1)*t+m-1,a,e),f.push(a,\nb,e);this.setIndex(f);this.addAttribute(\"position\",new z(g,3));this.addAttribute(\"normal\",new z(h,3));this.addAttribute(\"uv\",new z(k,2))}function $a(a,b){Q.call(this);this.type=\"ExtrudeGeometry\";this.parameters={shapes:a,options:b};this.fromBufferGeometry(new Ea(a,b));this.mergeVertices()}function Ea(a,b){\"undefined\"!==typeof a&&(F.call(this),this.type=\"ExtrudeBufferGeometry\",a=Array.isArray(a)?a:[a],this.addShapeList(a,b),this.computeVertexNormals())}function Lc(a,b){Q.call(this);this.type=\"TextGeometry\";\nthis.parameters={text:a,parameters:b};this.fromBufferGeometry(new Tb(a,b));this.mergeVertices()}function Tb(a,b){b=b||{};var c=b.font;if(!c||!c.isFont)return console.error(\"THREE.TextGeometry: font parameter is not an instance of THREE.Font.\"),new Q;a=c.generateShapes(a,b.size,b.curveSegments);b.amount=void 0!==b.height?b.height:50;void 0===b.bevelThickness&&(b.bevelThickness=10);void 0===b.bevelSize&&(b.bevelSize=8);void 0===b.bevelEnabled&&(b.bevelEnabled=!1);Ea.call(this,a,b);this.type=\"TextBufferGeometry\"}\nfunction Mc(a,b,c,d,e,f,g){Q.call(this);this.type=\"SphereGeometry\";this.parameters={radius:a,widthSegments:b,heightSegments:c,phiStart:d,phiLength:e,thetaStart:f,thetaLength:g};this.fromBufferGeometry(new kb(a,b,c,d,e,f,g));this.mergeVertices()}function kb(a,b,c,d,e,f,g){F.call(this);this.type=\"SphereBufferGeometry\";this.parameters={radius:a,widthSegments:b,heightSegments:c,phiStart:d,phiLength:e,thetaStart:f,thetaLength:g};a=a||50;b=Math.max(3,Math.floor(b)||8);c=Math.max(2,Math.floor(c)||6);d=void 0!==\nd?d:0;e=void 0!==e?e:2*Math.PI;f=void 0!==f?f:0;g=void 0!==g?g:Math.PI;var h=f+g,k,l,q=0,p=[],t=new n,m=new n,v=[],u=[],x=[],y=[];for(l=0;l<=c;l++){var A=[],I=l/c;for(k=0;k<=b;k++){var B=k/b;t.x=-a*Math.cos(d+B*e)*Math.sin(f+I*g);t.y=a*Math.cos(f+I*g);t.z=a*Math.sin(d+B*e)*Math.sin(f+I*g);u.push(t.x,t.y,t.z);m.set(t.x,t.y,t.z).normalize();x.push(m.x,m.y,m.z);y.push(B,1-I);A.push(q++)}p.push(A)}for(l=0;l<c;l++)for(k=0;k<b;k++)a=p[l][k+1],d=p[l][k],e=p[l+1][k],g=p[l+1][k+1],(0!==l||0<f)&&v.push(a,d,\ng),(l!==c-1||h<Math.PI)&&v.push(d,e,g);this.setIndex(v);this.addAttribute(\"position\",new z(u,3));this.addAttribute(\"normal\",new z(x,3));this.addAttribute(\"uv\",new z(y,2))}function Nc(a,b,c,d,e,f){Q.call(this);this.type=\"RingGeometry\";this.parameters={innerRadius:a,outerRadius:b,thetaSegments:c,phiSegments:d,thetaStart:e,thetaLength:f};this.fromBufferGeometry(new Ub(a,b,c,d,e,f));this.mergeVertices()}function Ub(a,b,c,d,e,f){F.call(this);this.type=\"RingBufferGeometry\";this.parameters={innerRadius:a,\nouterRadius:b,thetaSegments:c,phiSegments:d,thetaStart:e,thetaLength:f};a=a||20;b=b||50;e=void 0!==e?e:0;f=void 0!==f?f:2*Math.PI;c=void 0!==c?Math.max(3,c):8;d=void 0!==d?Math.max(1,d):1;var g=[],h=[],k=[],l=[],q=a,p=(b-a)/d,t=new n,m=new D,v,u;for(v=0;v<=d;v++){for(u=0;u<=c;u++)a=e+u/c*f,t.x=q*Math.cos(a),t.y=q*Math.sin(a),h.push(t.x,t.y,t.z),k.push(0,0,1),m.x=(t.x/b+1)/2,m.y=(t.y/b+1)/2,l.push(m.x,m.y);q+=p}for(v=0;v<d;v++)for(b=v*(c+1),u=0;u<c;u++)a=u+b,e=a+c+1,f=a+c+2,q=a+1,g.push(a,e,q),g.push(e,\nf,q);this.setIndex(g);this.addAttribute(\"position\",new z(h,3));this.addAttribute(\"normal\",new z(k,3));this.addAttribute(\"uv\",new z(l,2))}function Oc(a,b,c,d){Q.call(this);this.type=\"LatheGeometry\";this.parameters={points:a,segments:b,phiStart:c,phiLength:d};this.fromBufferGeometry(new Vb(a,b,c,d));this.mergeVertices()}function Vb(a,b,c,d){F.call(this);this.type=\"LatheBufferGeometry\";this.parameters={points:a,segments:b,phiStart:c,phiLength:d};b=Math.floor(b)||12;c=c||0;d=d||2*Math.PI;d=R.clamp(d,\n0,2*Math.PI);var e=[],f=[],g=[],h=1/b,k=new n,l=new D,q;for(q=0;q<=b;q++){var p=c+q*h*d;var t=Math.sin(p),m=Math.cos(p);for(p=0;p<=a.length-1;p++)k.x=a[p].x*t,k.y=a[p].y,k.z=a[p].x*m,f.push(k.x,k.y,k.z),l.x=q/b,l.y=p/(a.length-1),g.push(l.x,l.y)}for(q=0;q<b;q++)for(p=0;p<a.length-1;p++)c=p+q*a.length,h=c+a.length,k=c+a.length+1,l=c+1,e.push(c,h,l),e.push(h,k,l);this.setIndex(e);this.addAttribute(\"position\",new z(f,3));this.addAttribute(\"uv\",new z(g,2));this.computeVertexNormals();if(d===2*Math.PI)for(d=\nthis.attributes.normal.array,e=new n,f=new n,g=new n,c=b*a.length*3,p=q=0;q<a.length;q++,p+=3)e.x=d[p+0],e.y=d[p+1],e.z=d[p+2],f.x=d[c+p+0],f.y=d[c+p+1],f.z=d[c+p+2],g.addVectors(e,f).normalize(),d[p+0]=d[c+p+0]=g.x,d[p+1]=d[c+p+1]=g.y,d[p+2]=d[c+p+2]=g.z}function Wb(a,b){Q.call(this);this.type=\"ShapeGeometry\";\"object\"===typeof b&&(console.warn(\"THREE.ShapeGeometry: Options parameter has been removed.\"),b=b.curveSegments);this.parameters={shapes:a,curveSegments:b};this.fromBufferGeometry(new Xb(a,\nb));this.mergeVertices()}function Xb(a,b){function c(a){var c,h=e.length/3;a=a.extractPoints(b);var l=a.shape,q=a.holes;if(!1===Fa.isClockWise(l))for(l=l.reverse(),a=0,c=q.length;a<c;a++){var m=q[a];!0===Fa.isClockWise(m)&&(q[a]=m.reverse())}var n=Fa.triangulateShape(l,q);a=0;for(c=q.length;a<c;a++)m=q[a],l=l.concat(m);a=0;for(c=l.length;a<c;a++)m=l[a],e.push(m.x,m.y,0),f.push(0,0,1),g.push(m.x,m.y);a=0;for(c=n.length;a<c;a++)l=n[a],d.push(l[0]+h,l[1]+h,l[2]+h),k+=3}F.call(this);this.type=\"ShapeBufferGeometry\";\nthis.parameters={shapes:a,curveSegments:b};b=b||12;var d=[],e=[],f=[],g=[],h=0,k=0;if(!1===Array.isArray(a))c(a);else for(var l=0;l<a.length;l++)c(a[l]),this.addGroup(h,k,l),h+=k,k=0;this.setIndex(d);this.addAttribute(\"position\",new z(e,3));this.addAttribute(\"normal\",new z(f,3));this.addAttribute(\"uv\",new z(g,2))}function Yb(a,b){F.call(this);this.type=\"EdgesGeometry\";this.parameters={thresholdAngle:b};var c=[];b=Math.cos(R.DEG2RAD*(void 0!==b?b:1));var d=[0,0],e={},f=[\"a\",\"b\",\"c\"];if(a.isBufferGeometry){var g=\nnew Q;g.fromBufferGeometry(a)}else g=a.clone();g.mergeVertices();g.computeFaceNormals();a=g.vertices;g=g.faces;for(var h=0,k=g.length;h<k;h++)for(var l=g[h],q=0;3>q;q++){var p=l[f[q]];var t=l[f[(q+1)%3]];d[0]=Math.min(p,t);d[1]=Math.max(p,t);p=d[0]+\",\"+d[1];void 0===e[p]?e[p]={index1:d[0],index2:d[1],face1:h,face2:void 0}:e[p].face2=h}for(p in e)if(d=e[p],void 0===d.face2||g[d.face1].normal.dot(g[d.face2].normal)<=b)f=a[d.index1],c.push(f.x,f.y,f.z),f=a[d.index2],c.push(f.x,f.y,f.z);this.addAttribute(\"position\",\nnew z(c,3))}function lb(a,b,c,d,e,f,g,h){Q.call(this);this.type=\"CylinderGeometry\";this.parameters={radiusTop:a,radiusBottom:b,height:c,radialSegments:d,heightSegments:e,openEnded:f,thetaStart:g,thetaLength:h};this.fromBufferGeometry(new Ta(a,b,c,d,e,f,g,h));this.mergeVertices()}function Ta(a,b,c,d,e,f,g,h){function k(c){var e,f=new D,k=new n,r=0,u=!0===c?a:b,A=!0===c?1:-1;var w=v;for(e=1;e<=d;e++)p.push(0,x*A,0),t.push(0,A,0),m.push(.5,.5),v++;var z=v;for(e=0;e<=d;e++){var C=e/d*h+g,J=Math.cos(C),\nC=Math.sin(C);k.x=u*C;k.y=x*A;k.z=u*J;p.push(k.x,k.y,k.z);t.push(0,A,0);f.x=.5*J+.5;f.y=.5*C*A+.5;m.push(f.x,f.y);v++}for(e=0;e<d;e++)f=w+e,k=z+e,!0===c?q.push(k,k+1,f):q.push(k+1,k,f),r+=3;l.addGroup(y,r,!0===c?1:2);y+=r}F.call(this);this.type=\"CylinderBufferGeometry\";this.parameters={radiusTop:a,radiusBottom:b,height:c,radialSegments:d,heightSegments:e,openEnded:f,thetaStart:g,thetaLength:h};var l=this;a=void 0!==a?a:20;b=void 0!==b?b:20;c=void 0!==c?c:100;d=Math.floor(d)||8;e=Math.floor(e)||1;\nf=void 0!==f?f:!1;g=void 0!==g?g:0;h=void 0!==h?h:2*Math.PI;var q=[],p=[],t=[],m=[],v=0,u=[],x=c/2,y=0;(function(){var f,k,r=new n,H=new n,w=0,z=(b-a)/c;for(k=0;k<=e;k++){var D=[],C=k/e,F=C*(b-a)+a;for(f=0;f<=d;f++){var L=f/d,J=L*h+g,K=Math.sin(J),J=Math.cos(J);H.x=F*K;H.y=-C*c+x;H.z=F*J;p.push(H.x,H.y,H.z);r.set(K,z,J).normalize();t.push(r.x,r.y,r.z);m.push(L,1-C);D.push(v++)}u.push(D)}for(f=0;f<d;f++)for(k=0;k<e;k++)r=u[k+1][f],H=u[k+1][f+1],z=u[k][f+1],q.push(u[k][f],r,z),q.push(r,H,z),w+=6;l.addGroup(y,\nw,0);y+=w})();!1===f&&(0<a&&k(!0),0<b&&k(!1));this.setIndex(q);this.addAttribute(\"position\",new z(p,3));this.addAttribute(\"normal\",new z(t,3));this.addAttribute(\"uv\",new z(m,2))}function Pc(a,b,c,d,e,f,g){lb.call(this,0,a,b,c,d,e,f,g);this.type=\"ConeGeometry\";this.parameters={radius:a,height:b,radialSegments:c,heightSegments:d,openEnded:e,thetaStart:f,thetaLength:g}}function Qc(a,b,c,d,e,f,g){Ta.call(this,0,a,b,c,d,e,f,g);this.type=\"ConeBufferGeometry\";this.parameters={radius:a,height:b,radialSegments:c,\nheightSegments:d,openEnded:e,thetaStart:f,thetaLength:g}}function Rc(a,b,c,d){Q.call(this);this.type=\"CircleGeometry\";this.parameters={radius:a,segments:b,thetaStart:c,thetaLength:d};this.fromBufferGeometry(new Zb(a,b,c,d));this.mergeVertices()}function Zb(a,b,c,d){F.call(this);this.type=\"CircleBufferGeometry\";this.parameters={radius:a,segments:b,thetaStart:c,thetaLength:d};a=a||50;b=void 0!==b?Math.max(3,b):8;c=void 0!==c?c:0;d=void 0!==d?d:2*Math.PI;var e=[],f=[],g=[],h=[],k,l=new n,q=new D;f.push(0,\n0,0);g.push(0,0,1);h.push(.5,.5);var p=0;for(k=3;p<=b;p++,k+=3){var t=c+p/b*d;l.x=a*Math.cos(t);l.y=a*Math.sin(t);f.push(l.x,l.y,l.z);g.push(0,0,1);q.x=(f[k]/a+1)/2;q.y=(f[k+1]/a+1)/2;h.push(q.x,q.y)}for(k=1;k<=b;k++)e.push(k,k+1,0);this.setIndex(e);this.addAttribute(\"position\",new z(f,3));this.addAttribute(\"normal\",new z(g,3));this.addAttribute(\"uv\",new z(h,2))}function $b(a){P.call(this);this.type=\"ShadowMaterial\";this.color=new C(0);this.opacity=1;this.transparent=this.lights=!0;this.setValues(a)}\nfunction ac(a){ya.call(this,a);this.type=\"RawShaderMaterial\"}function Na(a){P.call(this);this.defines={STANDARD:\"\"};this.type=\"MeshStandardMaterial\";this.color=new C(16777215);this.metalness=this.roughness=.5;this.lightMap=this.map=null;this.lightMapIntensity=1;this.aoMap=null;this.aoMapIntensity=1;this.emissive=new C(0);this.emissiveIntensity=1;this.bumpMap=this.emissiveMap=null;this.bumpScale=1;this.normalMap=null;this.normalScale=new D(1,1);this.displacementMap=null;this.displacementScale=1;this.displacementBias=\n0;this.envMap=this.alphaMap=this.metalnessMap=this.roughnessMap=null;this.envMapIntensity=1;this.refractionRatio=.98;this.wireframe=!1;this.wireframeLinewidth=1;this.wireframeLinejoin=this.wireframeLinecap=\"round\";this.morphNormals=this.morphTargets=this.skinning=!1;this.setValues(a)}function mb(a){Na.call(this);this.defines={PHYSICAL:\"\"};this.type=\"MeshPhysicalMaterial\";this.reflectivity=.5;this.clearCoatRoughness=this.clearCoat=0;this.setValues(a)}function Aa(a){P.call(this);this.type=\"MeshPhongMaterial\";\nthis.color=new C(16777215);this.specular=new C(1118481);this.shininess=30;this.lightMap=this.map=null;this.lightMapIntensity=1;this.aoMap=null;this.aoMapIntensity=1;this.emissive=new C(0);this.emissiveIntensity=1;this.bumpMap=this.emissiveMap=null;this.bumpScale=1;this.normalMap=null;this.normalScale=new D(1,1);this.displacementMap=null;this.displacementScale=1;this.displacementBias=0;this.envMap=this.alphaMap=this.specularMap=null;this.combine=0;this.reflectivity=1;this.refractionRatio=.98;this.wireframe=\n!1;this.wireframeLinewidth=1;this.wireframeLinejoin=this.wireframeLinecap=\"round\";this.morphNormals=this.morphTargets=this.skinning=!1;this.setValues(a)}function nb(a){Aa.call(this);this.defines={TOON:\"\"};this.type=\"MeshToonMaterial\";this.gradientMap=null;this.setValues(a)}function ob(a){P.call(this);this.type=\"MeshNormalMaterial\";this.bumpMap=null;this.bumpScale=1;this.normalMap=null;this.normalScale=new D(1,1);this.displacementMap=null;this.displacementScale=1;this.displacementBias=0;this.wireframe=\n!1;this.wireframeLinewidth=1;this.morphNormals=this.morphTargets=this.skinning=this.lights=this.fog=!1;this.setValues(a)}function pb(a){P.call(this);this.type=\"MeshLambertMaterial\";this.color=new C(16777215);this.lightMap=this.map=null;this.lightMapIntensity=1;this.aoMap=null;this.aoMapIntensity=1;this.emissive=new C(0);this.emissiveIntensity=1;this.envMap=this.alphaMap=this.specularMap=this.emissiveMap=null;this.combine=0;this.reflectivity=1;this.refractionRatio=.98;this.wireframe=!1;this.wireframeLinewidth=\n1;this.wireframeLinejoin=this.wireframeLinecap=\"round\";this.morphNormals=this.morphTargets=this.skinning=!1;this.setValues(a)}function qb(a){W.call(this);this.type=\"LineDashedMaterial\";this.scale=1;this.dashSize=3;this.gapSize=1;this.setValues(a)}function $d(a,b,c){var d=this,e=!1,f=0,g=0;this.onStart=void 0;this.onLoad=a;this.onProgress=b;this.onError=c;this.itemStart=function(a){g++;if(!1===e&&void 0!==d.onStart)d.onStart(a,f,g);e=!0};this.itemEnd=function(a){f++;if(void 0!==d.onProgress)d.onProgress(a,\nf,g);if(f===g&&(e=!1,void 0!==d.onLoad))d.onLoad()};this.itemError=function(a){if(void 0!==d.onError)d.onError(a)}}function Ia(a){this.manager=void 0!==a?a:oa}function Re(a){this.manager=void 0!==a?a:oa;this._parser=null}function ae(a){this.manager=void 0!==a?a:oa;this._parser=null}function Sc(a){this.manager=void 0!==a?a:oa}function be(a){this.manager=void 0!==a?a:oa}function sd(a){this.manager=void 0!==a?a:oa}function aa(a,b){w.call(this);this.type=\"Light\";this.color=new C(a);this.intensity=void 0!==\nb?b:1;this.receiveShadow=void 0}function td(a,b,c){aa.call(this,a,c);this.type=\"HemisphereLight\";this.castShadow=void 0;this.position.copy(w.DefaultUp);this.updateMatrix();this.groundColor=new C(b)}function rb(a){this.camera=a;this.bias=0;this.radius=1;this.mapSize=new D(512,512);this.map=null;this.matrix=new O}function ud(){rb.call(this,new ja(50,1,.5,500))}function vd(a,b,c,d,e,f){aa.call(this,a,b);this.type=\"SpotLight\";this.position.copy(w.DefaultUp);this.updateMatrix();this.target=new w;Object.defineProperty(this,\n\"power\",{get:function(){return this.intensity*Math.PI},set:function(a){this.intensity=a/Math.PI}});this.distance=void 0!==c?c:0;this.angle=void 0!==d?d:Math.PI/3;this.penumbra=void 0!==e?e:0;this.decay=void 0!==f?f:1;this.shadow=new ud}function wd(a,b,c,d){aa.call(this,a,b);this.type=\"PointLight\";Object.defineProperty(this,\"power\",{get:function(){return 4*this.intensity*Math.PI},set:function(a){this.intensity=a/(4*Math.PI)}});this.distance=void 0!==c?c:0;this.decay=void 0!==d?d:1;this.shadow=new rb(new ja(90,\n1,.5,500))}function xd(){rb.call(this,new Db(-5,5,5,-5,.5,500))}function yd(a,b){aa.call(this,a,b);this.type=\"DirectionalLight\";this.position.copy(w.DefaultUp);this.updateMatrix();this.target=new w;this.shadow=new xd}function zd(a,b){aa.call(this,a,b);this.type=\"AmbientLight\";this.castShadow=void 0}function Ad(a,b,c,d){aa.call(this,a,b);this.type=\"RectAreaLight\";this.position.set(0,1,0);this.updateMatrix();this.width=void 0!==c?c:10;this.height=void 0!==d?d:10}function wa(a,b,c,d){this.parameterPositions=\na;this._cachedIndex=0;this.resultBuffer=void 0!==d?d:new b.constructor(c);this.sampleValues=b;this.valueSize=c}function Bd(a,b,c,d){wa.call(this,a,b,c,d);this._offsetNext=this._weightNext=this._offsetPrev=this._weightPrev=-0}function Tc(a,b,c,d){wa.call(this,a,b,c,d)}function Cd(a,b,c,d){wa.call(this,a,b,c,d)}function sb(a,b,c,d){if(void 0===a)throw Error(\"track name is undefined\");if(void 0===b||0===b.length)throw Error(\"no keyframes in track named \"+a);this.name=a;this.times=ea.convertArray(b,this.TimeBufferType);\nthis.values=ea.convertArray(c,this.ValueBufferType);this.setInterpolation(d||this.DefaultInterpolation);this.validate();this.optimize()}function bc(a,b,c,d){sb.call(this,a,b,c,d)}function Dd(a,b,c,d){wa.call(this,a,b,c,d)}function Uc(a,b,c,d){sb.call(this,a,b,c,d)}function cc(a,b,c,d){sb.call(this,a,b,c,d)}function Ed(a,b,c,d){sb.call(this,a,b,c,d)}function Fd(a,b,c){sb.call(this,a,b,c)}function Gd(a,b,c,d){sb.call(this,a,b,c,d)}function tb(a,b,c,d){sb.apply(this,arguments)}function Ba(a,b,c){this.name=\na;this.tracks=c;this.duration=void 0!==b?b:-1;this.uuid=R.generateUUID();0>this.duration&&this.resetDuration();this.optimize()}function Hd(a){this.manager=void 0!==a?a:oa;this.textures={}}function ce(a){this.manager=void 0!==a?a:oa}function dc(){this.onLoadStart=function(){};this.onLoadProgress=function(){};this.onLoadComplete=function(){}}function de(a){\"boolean\"===typeof a&&(console.warn(\"THREE.JSONLoader: showStatus parameter has been removed from constructor.\"),a=void 0);this.manager=void 0!==\na?a:oa;this.withCredentials=!1}function Se(a){this.manager=void 0!==a?a:oa;this.texturePath=\"\"}function Te(a,b,c,d,e){b=.5*(d-b);e=.5*(e-c);var f=a*a;return(2*c-2*d+b+e)*a*f+(-3*c+3*d-2*b-e)*f+b*a+c}function ub(a,b,c,d){var e=1-a;return e*e*b+2*(1-a)*a*c+a*a*d}function vb(a,b,c,d,e){var f=1-a,g=1-a;return f*f*f*b+3*g*g*a*c+3*(1-a)*a*a*d+a*a*a*e}function pa(){this.arcLengthDivisions=200}function Oa(a,b){this.arcLengthDivisions=200;this.v1=a;this.v2=b}function Vc(){this.arcLengthDivisions=200;this.curves=\n[];this.autoClose=!1}function Ua(a,b,c,d,e,f,g,h){this.arcLengthDivisions=200;this.aX=a;this.aY=b;this.xRadius=c;this.yRadius=d;this.aStartAngle=e;this.aEndAngle=f;this.aClockwise=g;this.aRotation=h||0}function wb(a){this.arcLengthDivisions=200;this.points=void 0===a?[]:a}function ec(a,b,c,d){this.arcLengthDivisions=200;this.v0=a;this.v1=b;this.v2=c;this.v3=d}function fc(a,b,c){this.arcLengthDivisions=200;this.v0=a;this.v1=b;this.v2=c}function Wc(a){Vc.call(this);this.currentPoint=new D;a&&this.fromPoints(a)}\nfunction xb(){Wc.apply(this,arguments);this.holes=[]}function ee(){this.subPaths=[];this.currentPath=null}function fe(a){this.data=a}function Ue(a){this.manager=void 0!==a?a:oa}function ge(a){this.manager=void 0!==a?a:oa}function Ve(){this.type=\"StereoCamera\";this.aspect=1;this.eyeSep=.064;this.cameraL=new ja;this.cameraL.layers.enable(1);this.cameraL.matrixAutoUpdate=!1;this.cameraR=new ja;this.cameraR.layers.enable(2);this.cameraR.matrixAutoUpdate=!1}function Xc(a,b,c){w.call(this);this.type=\"CubeCamera\";\nvar d=new ja(90,1,a,b);d.up.set(0,-1,0);d.lookAt(new n(1,0,0));this.add(d);var e=new ja(90,1,a,b);e.up.set(0,-1,0);e.lookAt(new n(-1,0,0));this.add(e);var f=new ja(90,1,a,b);f.up.set(0,0,1);f.lookAt(new n(0,1,0));this.add(f);var g=new ja(90,1,a,b);g.up.set(0,0,-1);g.lookAt(new n(0,-1,0));this.add(g);var h=new ja(90,1,a,b);h.up.set(0,-1,0);h.lookAt(new n(0,0,1));this.add(h);var k=new ja(90,1,a,b);k.up.set(0,-1,0);k.lookAt(new n(0,0,-1));this.add(k);this.renderTarget=new Bb(c,c,{format:1022,magFilter:1006,\nminFilter:1006});this.renderTarget.texture.name=\"CubeCamera\";this.update=function(a,b){null===this.parent&&this.updateMatrixWorld();var c=this.renderTarget,l=c.texture.generateMipmaps;c.texture.generateMipmaps=!1;c.activeCubeFace=0;a.render(b,d,c);c.activeCubeFace=1;a.render(b,e,c);c.activeCubeFace=2;a.render(b,f,c);c.activeCubeFace=3;a.render(b,g,c);c.activeCubeFace=4;a.render(b,h,c);c.texture.generateMipmaps=l;c.activeCubeFace=5;a.render(b,k,c);a.setRenderTarget(null)};this.clear=function(a,b,c,\nd){for(var e=this.renderTarget,f=0;6>f;f++)e.activeCubeFace=f,a.setRenderTarget(e),a.clear(b,c,d);a.setRenderTarget(null)}}function he(){w.call(this);this.type=\"AudioListener\";this.context=ie.getContext();this.gain=this.context.createGain();this.gain.connect(this.context.destination);this.filter=null}function gc(a){w.call(this);this.type=\"Audio\";this.context=a.context;this.gain=this.context.createGain();this.gain.connect(a.getInput());this.autoplay=!1;this.buffer=null;this.loop=!1;this.startTime=\n0;this.playbackRate=1;this.isPlaying=!1;this.hasPlaybackControl=!0;this.sourceType=\"empty\";this.filters=[]}function je(a){gc.call(this,a);this.panner=this.context.createPanner();this.panner.connect(this.gain)}function ke(a,b){this.analyser=a.context.createAnalyser();this.analyser.fftSize=void 0!==b?b:2048;this.data=new Uint8Array(this.analyser.frequencyBinCount);a.getOutput().connect(this.analyser)}function le(a,b,c){this.binding=a;this.valueSize=c;a=Float64Array;switch(b){case \"quaternion\":b=this._slerp;\nbreak;case \"string\":case \"bool\":a=Array;b=this._select;break;default:b=this._lerp}this.buffer=new a(4*c);this._mixBufferRegion=b;this.referenceCount=this.useCount=this.cumulativeWeight=0}function We(a,b,c){c=c||da.parseTrackName(b);this._targetGroup=a;this._bindings=a.subscribe_(b,c)}function da(a,b,c){this.path=b;this.parsedPath=c||da.parseTrackName(b);this.node=da.findNode(a,this.parsedPath.nodeName)||a;this.rootNode=a}function Xe(a){this.uuid=R.generateUUID();this._objects=Array.prototype.slice.call(arguments);\nthis.nCachedObjects_=0;var b={};this._indicesByUUID=b;for(var c=0,d=arguments.length;c!==d;++c)b[arguments[c].uuid]=c;this._paths=[];this._parsedPaths=[];this._bindings=[];this._bindingsIndicesByPath={};var e=this;this.stats={objects:{get total(){return e._objects.length},get inUse(){return this.total-e.nCachedObjects_}},get bindingsPerObject(){return e._bindings.length}}}function Ye(a,b,c){this._mixer=a;this._clip=b;this._localRoot=c||null;a=b.tracks;b=a.length;c=Array(b);for(var d={endingStart:2400,\nendingEnd:2400},e=0;e!==b;++e){var f=a[e].createInterpolant(null);c[e]=f;f.settings=d}this._interpolantSettings=d;this._interpolants=c;this._propertyBindings=Array(b);this._weightInterpolant=this._timeScaleInterpolant=this._byClipCacheIndex=this._cacheIndex=null;this.loop=2201;this._loopCount=-1;this._startTime=null;this.time=0;this._effectiveWeight=this.weight=this._effectiveTimeScale=this.timeScale=1;this.repetitions=Infinity;this.paused=!1;this.enabled=!0;this.clampWhenFinished=!1;this.zeroSlopeAtEnd=\nthis.zeroSlopeAtStart=!0}function Ze(a){this._root=a;this._initMemoryManager();this.time=this._accuIndex=0;this.timeScale=1}function Id(a,b){\"string\"===typeof a&&(console.warn(\"THREE.Uniform: Type parameter is no longer needed.\"),a=b);this.value=a}function me(){F.call(this);this.type=\"InstancedBufferGeometry\";this.maxInstancedCount=void 0}function ne(a,b,c,d){this.uuid=R.generateUUID();this.data=a;this.itemSize=b;this.offset=c;this.normalized=!0===d}function hc(a,b){this.uuid=R.generateUUID();this.array=\na;this.stride=b;this.count=void 0!==a?a.length/b:0;this.dynamic=!1;this.updateRange={offset:0,count:-1};this.onUploadCallback=function(){};this.version=0}function oe(a,b,c){hc.call(this,a,b);this.meshPerAttribute=c||1}function pe(a,b,c){K.call(this,a,b);this.meshPerAttribute=c||1}function $e(a,b,c,d){this.ray=new hb(a,b);this.near=c||0;this.far=d||Infinity;this.params={Mesh:{},Line:{},LOD:{},Points:{threshold:1},Sprite:{}};Object.defineProperties(this.params,{PointCloud:{get:function(){console.warn(\"THREE.Raycaster: params.PointCloud has been renamed to params.Points.\");\nreturn this.Points}}})}function af(a,b){return a.distance-b.distance}function qe(a,b,c,d){if(!1!==a.visible&&(a.raycast(b,c),!0===d)){a=a.children;d=0;for(var e=a.length;d<e;d++)qe(a[d],b,c,!0)}}function bf(a){this.autoStart=void 0!==a?a:!0;this.elapsedTime=this.oldTime=this.startTime=0;this.running=!1}function cf(a,b,c){this.radius=void 0!==a?a:1;this.phi=void 0!==b?b:0;this.theta=void 0!==c?c:0;return this}function df(a,b,c){this.radius=void 0!==a?a:1;this.theta=void 0!==b?b:0;this.y=void 0!==c?\nc:0;return this}function Yc(a){w.call(this);this.material=a;this.render=function(a){}}function Zc(a,b,c,d){this.object=a;this.size=void 0!==b?b:1;a=void 0!==c?c:16711680;d=void 0!==d?d:1;b=0;(c=this.object.geometry)&&c.isGeometry?b=3*c.faces.length:c&&c.isBufferGeometry&&(b=c.attributes.normal.count);c=new F;b=new z(6*b,3);c.addAttribute(\"position\",b);X.call(this,c,new W({color:a,linewidth:d}));this.matrixAutoUpdate=!1;this.update()}function ic(a,b){w.call(this);this.light=a;this.light.updateMatrixWorld();\nthis.matrix=a.matrixWorld;this.matrixAutoUpdate=!1;this.color=b;a=new F;b=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1];for(var c=0,d=1;32>c;c++,d++){var e=c/32*Math.PI*2,f=d/32*Math.PI*2;b.push(Math.cos(e),Math.sin(e),1,Math.cos(f),Math.sin(f),1)}a.addAttribute(\"position\",new z(b,3));b=new W({fog:!1});this.cone=new X(a,b);this.add(this.cone);this.update()}function ef(a){var b=[];a&&a.isBone&&b.push(a);for(var c=0;c<a.children.length;c++)b.push.apply(b,ef(a.children[c]));return b}\nfunction jc(a){for(var b=ef(a),c=new F,d=[],e=[],f=new C(0,0,1),g=new C(0,1,0),h=0;h<b.length;h++){var k=b[h];k.parent&&k.parent.isBone&&(d.push(0,0,0),d.push(0,0,0),e.push(f.r,f.g,f.b),e.push(g.r,g.g,g.b))}c.addAttribute(\"position\",new z(d,3));c.addAttribute(\"color\",new z(e,3));d=new W({vertexColors:2,depthTest:!1,depthWrite:!1,transparent:!0});X.call(this,c,d);this.root=a;this.bones=b;this.matrix=a.matrixWorld;this.matrixAutoUpdate=!1;this.onBeforeRender()}function kc(a,b,c){this.light=a;this.light.updateMatrixWorld();\nthis.color=c;a=new kb(b,4,2);b=new sa({wireframe:!0,fog:!1});fa.call(this,a,b);this.matrix=this.light.matrixWorld;this.matrixAutoUpdate=!1;this.update()}function lc(a,b){w.call(this);this.light=a;this.light.updateMatrixWorld();this.matrix=a.matrixWorld;this.matrixAutoUpdate=!1;this.color=b;a=new W({fog:!1});b=new F;b.addAttribute(\"position\",new K(new Float32Array(15),3));this.line=new ra(b,a);this.add(this.line);this.update()}function mc(a,b,c){w.call(this);this.light=a;this.light.updateMatrixWorld();\nthis.matrix=a.matrixWorld;this.matrixAutoUpdate=!1;this.color=c;a=new jb(b);a.rotateY(.5*Math.PI);this.material=new sa({wireframe:!0,fog:!1});void 0===this.color&&(this.material.vertexColors=2);b=a.getAttribute(\"position\");b=new Float32Array(3*b.count);a.addAttribute(\"color\",new K(b,3));this.add(new fa(a,this.material));this.update()}function $c(a,b,c,d){a=a||10;b=b||10;c=new C(void 0!==c?c:4473924);d=new C(void 0!==d?d:8947848);var e=b/2,f=a/b,g=a/2;a=[];for(var h=[],k=0,l=0,q=-g;k<=b;k++,q+=f){a.push(-g,\n0,q,g,0,q);a.push(q,0,-g,q,0,g);var p=k===e?c:d;p.toArray(h,l);l+=3;p.toArray(h,l);l+=3;p.toArray(h,l);l+=3;p.toArray(h,l);l+=3}b=new F;b.addAttribute(\"position\",new z(a,3));b.addAttribute(\"color\",new z(h,3));c=new W({vertexColors:2});X.call(this,b,c)}function Jd(a,b,c,d,e,f){a=a||10;b=b||16;c=c||8;d=d||64;e=new C(void 0!==e?e:4473924);f=new C(void 0!==f?f:8947848);var g=[],h=[],k;for(k=0;k<=b;k++){var l=k/b*2*Math.PI;var q=Math.sin(l)*a;l=Math.cos(l)*a;g.push(0,0,0);g.push(q,0,l);var p=k&1?e:f;h.push(p.r,\np.g,p.b);h.push(p.r,p.g,p.b)}for(k=0;k<=c;k++){p=k&1?e:f;var m=a-a/c*k;for(b=0;b<d;b++)l=b/d*2*Math.PI,q=Math.sin(l)*m,l=Math.cos(l)*m,g.push(q,0,l),h.push(p.r,p.g,p.b),l=(b+1)/d*2*Math.PI,q=Math.sin(l)*m,l=Math.cos(l)*m,g.push(q,0,l),h.push(p.r,p.g,p.b)}a=new F;a.addAttribute(\"position\",new z(g,3));a.addAttribute(\"color\",new z(h,3));g=new W({vertexColors:2});X.call(this,a,g)}function ad(a,b,c,d){this.object=a;this.size=void 0!==b?b:1;a=void 0!==c?c:16776960;d=void 0!==d?d:1;b=0;(c=this.object.geometry)&&\nc.isGeometry?b=c.faces.length:console.warn(\"THREE.FaceNormalsHelper: only THREE.Geometry is supported. Use THREE.VertexNormalsHelper, instead.\");c=new F;b=new z(6*b,3);c.addAttribute(\"position\",b);X.call(this,c,new W({color:a,linewidth:d}));this.matrixAutoUpdate=!1;this.update()}function nc(a,b,c){w.call(this);this.light=a;this.light.updateMatrixWorld();this.matrix=a.matrixWorld;this.matrixAutoUpdate=!1;this.color=c;void 0===b&&(b=1);a=new F;a.addAttribute(\"position\",new z([-b,b,0,b,b,0,b,-b,0,-b,\n-b,0,-b,b,0],3));b=new W({fog:!1});this.lightPlane=new ra(a,b);this.add(this.lightPlane);a=new F;a.addAttribute(\"position\",new z([0,0,0,0,0,1],3));this.targetLine=new ra(a,b);this.add(this.targetLine);this.update()}function bd(a){function b(a,b,d){c(a,d);c(b,d)}function c(a,b){f.push(0,0,0);g.push(b.r,b.g,b.b);void 0===h[a]&&(h[a]=[]);h[a].push(f.length/3-1)}var d=new F,e=new W({color:16777215,vertexColors:1}),f=[],g=[],h={},k=new C(16755200),l=new C(16711680),q=new C(43775),p=new C(16777215),m=new C(3355443);\nb(\"n1\",\"n2\",k);b(\"n2\",\"n4\",k);b(\"n4\",\"n3\",k);b(\"n3\",\"n1\",k);b(\"f1\",\"f2\",k);b(\"f2\",\"f4\",k);b(\"f4\",\"f3\",k);b(\"f3\",\"f1\",k);b(\"n1\",\"f1\",k);b(\"n2\",\"f2\",k);b(\"n3\",\"f3\",k);b(\"n4\",\"f4\",k);b(\"p\",\"n1\",l);b(\"p\",\"n2\",l);b(\"p\",\"n3\",l);b(\"p\",\"n4\",l);b(\"u1\",\"u2\",q);b(\"u2\",\"u3\",q);b(\"u3\",\"u1\",q);b(\"c\",\"t\",p);b(\"p\",\"c\",m);b(\"cn1\",\"cn2\",m);b(\"cn3\",\"cn4\",m);b(\"cf1\",\"cf2\",m);b(\"cf3\",\"cf4\",m);d.addAttribute(\"position\",new z(f,3));d.addAttribute(\"color\",new z(g,3));X.call(this,d,e);this.camera=a;this.camera.updateProjectionMatrix&&\nthis.camera.updateProjectionMatrix();this.matrix=a.matrixWorld;this.matrixAutoUpdate=!1;this.pointMap=h;this.update()}function yb(a,b){this.object=a;void 0===b&&(b=16776960);a=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]);var c=new Float32Array(24),d=new F;d.setIndex(new K(a,1));d.addAttribute(\"position\",new K(c,3));X.call(this,d,new W({color:b}));this.matrixAutoUpdate=!1;this.update()}function cd(a,b){this.type=\"Box3Helper\";this.box=a;a=void 0!==b?b:16776960;b=new Uint16Array([0,\n1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]);var c=new F;c.setIndex(new K(b,1));c.addAttribute(\"position\",new z([1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],3));X.call(this,c,new W({color:a}));this.geometry.computeBoundingSphere();this.onBeforeRender()}function dd(a,b,c){this.type=\"PlaneHelper\";this.plane=a;this.size=void 0===b?1:b;a=void 0!==c?c:16776960;b=new F;b.addAttribute(\"position\",new z([1,-1,1,-1,1,1,-1,-1,1,1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,1,0,0,1,0,0,0],3));b.computeBoundingSphere();\nra.call(this,b,new W({color:a}));b=new F;b.addAttribute(\"position\",new z([1,1,1,-1,1,1,-1,-1,1,1,1,1,-1,-1,1,1,-1,1],3));b.computeBoundingSphere();this.add(new fa(b,new sa({color:a,opacity:.2,transparent:!0,depthWrite:!1})));this.onBeforeRender()}function zb(a,b,c,d,e,f){w.call(this);void 0===d&&(d=16776960);void 0===c&&(c=1);void 0===e&&(e=.2*c);void 0===f&&(f=.2*e);void 0===Kd&&(Kd=new F,Kd.addAttribute(\"position\",new z([0,0,0,0,1,0],3)),re=new Ta(0,.5,1,5,1),re.translate(0,-.5,0));this.position.copy(b);\nthis.line=new ra(Kd,new W({color:d}));this.line.matrixAutoUpdate=!1;this.add(this.line);this.cone=new fa(re,new sa({color:d}));this.cone.matrixAutoUpdate=!1;this.add(this.cone);this.setDirection(a);this.setLength(c,e,f)}function Ld(a){a=a||1;var b=[0,0,0,a,0,0,0,0,0,0,a,0,0,0,0,0,0,a];a=new F;a.addAttribute(\"position\",new z(b,3));a.addAttribute(\"color\",new z([1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],3));b=new W({vertexColors:2});X.call(this,a,b)}function se(){var a=0,b=0,c=0,d=0;return{initCatmullRom:function(e,\nf,g,h,k){e=k*(g-e);h=k*(h-f);a=f;b=e;c=-3*f+3*g-2*e-h;d=2*f-2*g+e+h},initNonuniformCatmullRom:function(e,f,g,h,k,l,q){e=((f-e)/k-(g-e)/(k+l)+(g-f)/l)*l;h=((g-f)/l-(h-f)/(l+q)+(h-g)/q)*l;a=f;b=e;c=-3*f+3*g-2*e-h;d=2*f-2*g+e+h},calc:function(e){var f=e*e;return a+b*e+c*f+d*f*e}}}function Ja(a){this.arcLengthDivisions=200;2>a.length&&console.warn(\"THREE.CatmullRomCurve3: Points array needs at least two entries.\");this.points=a||[];this.closed=!1}function ed(a,b,c,d){this.arcLengthDivisions=200;this.v0=\na;this.v1=b;this.v2=c;this.v3=d}function fd(a,b,c){this.arcLengthDivisions=200;this.v0=a;this.v1=b;this.v2=c}function gd(a,b){this.arcLengthDivisions=200;this.v1=a;this.v2=b}function Md(a,b,c,d,e,f){Ua.call(this,a,b,c,c,d,e,f)}function ff(a){console.warn(\"THREE.ClosedSplineCurve3 has been deprecated. Use THREE.CatmullRomCurve3 instead.\");Ja.call(this,a);this.type=\"catmullrom\";this.closed=!0}function gf(a){console.warn(\"THREE.SplineCurve3 has been deprecated. Use THREE.CatmullRomCurve3 instead.\");\nJa.call(this,a);this.type=\"catmullrom\"}function te(a){console.warn(\"THREE.Spline has been removed. Use THREE.CatmullRomCurve3 instead.\");Ja.call(this,a);this.type=\"catmullrom\"}void 0===Number.EPSILON&&(Number.EPSILON=Math.pow(2,-52));void 0===Number.isInteger&&(Number.isInteger=function(a){return\"number\"===typeof a&&isFinite(a)&&Math.floor(a)===a});void 0===Math.sign&&(Math.sign=function(a){return 0>a?-1:0<a?1:+a});void 0===Function.prototype.name&&Object.defineProperty(Function.prototype,\"name\",\n{get:function(){return this.toString().match(/^\\s*function\\s*([^\\(\\s]*)/)[1]}});void 0===Object.assign&&function(){Object.assign=function(a){if(void 0===a||null===a)throw new TypeError(\"Cannot convert undefined or null to object\");for(var b=Object(a),c=1;c<arguments.length;c++){var d=arguments[c];if(void 0!==d&&null!==d)for(var e in d)Object.prototype.hasOwnProperty.call(d,e)&&(b[e]=d[e])}return b}}();Object.assign(na.prototype,{addEventListener:function(a,b){void 0===this._listeners&&(this._listeners=\n{});var c=this._listeners;void 0===c[a]&&(c[a]=[]);-1===c[a].indexOf(b)&&c[a].push(b)},hasEventListener:function(a,b){if(void 0===this._listeners)return!1;var c=this._listeners;return void 0!==c[a]&&-1!==c[a].indexOf(b)},removeEventListener:function(a,b){void 0!==this._listeners&&(a=this._listeners[a],void 0!==a&&(b=a.indexOf(b),-1!==b&&a.splice(b,1)))},dispatchEvent:function(a){if(void 0!==this._listeners){var b=this._listeners[a.type];if(void 0!==b){a.target=this;for(var b=b.slice(0),c=0,d=b.length;c<\nd;c++)b[c].call(this,a)}}}});var R={DEG2RAD:Math.PI/180,RAD2DEG:180/Math.PI,generateUUID:function(){var a=\"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz\".split(\"\"),b=Array(36),c=0,d;return function(){for(var e=0;36>e;e++)8===e||13===e||18===e||23===e?b[e]=\"-\":14===e?b[e]=\"4\":(2>=c&&(c=33554432+16777216*Math.random()|0),d=c&15,c>>=4,b[e]=a[19===e?d&3|8:d]);return b.join(\"\")}}(),clamp:function(a,b,c){return Math.max(b,Math.min(c,a))},euclideanModulo:function(a,b){return(a%b+b)%b},mapLinear:function(a,\nb,c,d,e){return d+(a-b)*(e-d)/(c-b)},lerp:function(a,b,c){return(1-c)*a+c*b},smoothstep:function(a,b,c){if(a<=b)return 0;if(a>=c)return 1;a=(a-b)/(c-b);return a*a*(3-2*a)},smootherstep:function(a,b,c){if(a<=b)return 0;if(a>=c)return 1;a=(a-b)/(c-b);return a*a*a*(a*(6*a-15)+10)},randInt:function(a,b){return a+Math.floor(Math.random()*(b-a+1))},randFloat:function(a,b){return a+Math.random()*(b-a)},randFloatSpread:function(a){return a*(.5-Math.random())},degToRad:function(a){return a*R.DEG2RAD},radToDeg:function(a){return a*\nR.RAD2DEG},isPowerOfTwo:function(a){return 0===(a&a-1)&&0!==a},nearestPowerOfTwo:function(a){return Math.pow(2,Math.round(Math.log(a)/Math.LN2))},nextPowerOfTwo:function(a){a--;a|=a>>1;a|=a>>2;a|=a>>4;a|=a>>8;a|=a>>16;a++;return a}};Object.defineProperties(D.prototype,{width:{get:function(){return this.x},set:function(a){this.x=a}},height:{get:function(){return this.y},set:function(a){this.y=a}}});Object.assign(D.prototype,{isVector2:!0,set:function(a,b){this.x=a;this.y=b;return this},setScalar:function(a){this.y=\nthis.x=a;return this},setX:function(a){this.x=a;return this},setY:function(a){this.y=a;return this},setComponent:function(a,b){switch(a){case 0:this.x=b;break;case 1:this.y=b;break;default:throw Error(\"index is out of range: \"+a);}return this},getComponent:function(a){switch(a){case 0:return this.x;case 1:return this.y;default:throw Error(\"index is out of range: \"+a);}},clone:function(){return new this.constructor(this.x,this.y)},copy:function(a){this.x=a.x;this.y=a.y;return this},add:function(a,\nb){if(void 0!==b)return console.warn(\"THREE.Vector2: .add() now only accepts one argument. Use .addVectors( a, b ) instead.\"),this.addVectors(a,b);this.x+=a.x;this.y+=a.y;return this},addScalar:function(a){this.x+=a;this.y+=a;return this},addVectors:function(a,b){this.x=a.x+b.x;this.y=a.y+b.y;return this},addScaledVector:function(a,b){this.x+=a.x*b;this.y+=a.y*b;return this},sub:function(a,b){if(void 0!==b)return console.warn(\"THREE.Vector2: .sub() now only accepts one argument. Use .subVectors( a, b ) instead.\"),\nthis.subVectors(a,b);this.x-=a.x;this.y-=a.y;return this},subScalar:function(a){this.x-=a;this.y-=a;return this},subVectors:function(a,b){this.x=a.x-b.x;this.y=a.y-b.y;return this},multiply:function(a){this.x*=a.x;this.y*=a.y;return this},multiplyScalar:function(a){this.x*=a;this.y*=a;return this},divide:function(a){this.x/=a.x;this.y/=a.y;return this},divideScalar:function(a){return this.multiplyScalar(1/a)},min:function(a){this.x=Math.min(this.x,a.x);this.y=Math.min(this.y,a.y);return this},max:function(a){this.x=\nMath.max(this.x,a.x);this.y=Math.max(this.y,a.y);return this},clamp:function(a,b){this.x=Math.max(a.x,Math.min(b.x,this.x));this.y=Math.max(a.y,Math.min(b.y,this.y));return this},clampScalar:function(){var a=new D,b=new D;return function(c,d){a.set(c,c);b.set(d,d);return this.clamp(a,b)}}(),clampLength:function(a,b){var c=this.length();return this.divideScalar(c||1).multiplyScalar(Math.max(a,Math.min(b,c)))},floor:function(){this.x=Math.floor(this.x);this.y=Math.floor(this.y);return this},ceil:function(){this.x=\nMath.ceil(this.x);this.y=Math.ceil(this.y);return this},round:function(){this.x=Math.round(this.x);this.y=Math.round(this.y);return this},roundToZero:function(){this.x=0>this.x?Math.ceil(this.x):Math.floor(this.x);this.y=0>this.y?Math.ceil(this.y):Math.floor(this.y);return this},negate:function(){this.x=-this.x;this.y=-this.y;return this},dot:function(a){return this.x*a.x+this.y*a.y},lengthSq:function(){return this.x*this.x+this.y*this.y},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},\nlengthManhattan:function(){return Math.abs(this.x)+Math.abs(this.y)},normalize:function(){return this.divideScalar(this.length()||1)},angle:function(){var a=Math.atan2(this.y,this.x);0>a&&(a+=2*Math.PI);return a},distanceTo:function(a){return Math.sqrt(this.distanceToSquared(a))},distanceToSquared:function(a){var b=this.x-a.x;a=this.y-a.y;return b*b+a*a},distanceToManhattan:function(a){return Math.abs(this.x-a.x)+Math.abs(this.y-a.y)},setLength:function(a){return this.normalize().multiplyScalar(a)},\nlerp:function(a,b){this.x+=(a.x-this.x)*b;this.y+=(a.y-this.y)*b;return this},lerpVectors:function(a,b,c){return this.subVectors(b,a).multiplyScalar(c).add(a)},equals:function(a){return a.x===this.x&&a.y===this.y},fromArray:function(a,b){void 0===b&&(b=0);this.x=a[b];this.y=a[b+1];return this},toArray:function(a,b){void 0===a&&(a=[]);void 0===b&&(b=0);a[b]=this.x;a[b+1]=this.y;return a},fromBufferAttribute:function(a,b,c){void 0!==c&&console.warn(\"THREE.Vector2: offset has been removed from .fromBufferAttribute().\");\nthis.x=a.getX(b);this.y=a.getY(b);return this},rotateAround:function(a,b){var c=Math.cos(b);b=Math.sin(b);var d=this.x-a.x,e=this.y-a.y;this.x=d*c-e*b+a.x;this.y=d*b+e*c+a.y;return this}});var lf=0;N.DEFAULT_IMAGE=void 0;N.DEFAULT_MAPPING=300;Object.defineProperty(N.prototype,\"needsUpdate\",{set:function(a){!0===a&&this.version++}});Object.assign(N.prototype,na.prototype,{constructor:N,isTexture:!0,clone:function(){return(new this.constructor).copy(this)},copy:function(a){this.name=a.name;this.image=\na.image;this.mipmaps=a.mipmaps.slice(0);this.mapping=a.mapping;this.wrapS=a.wrapS;this.wrapT=a.wrapT;this.magFilter=a.magFilter;this.minFilter=a.minFilter;this.anisotropy=a.anisotropy;this.format=a.format;this.type=a.type;this.offset.copy(a.offset);this.repeat.copy(a.repeat);this.generateMipmaps=a.generateMipmaps;this.premultiplyAlpha=a.premultiplyAlpha;this.flipY=a.flipY;this.unpackAlignment=a.unpackAlignment;this.encoding=a.encoding;return this},toJSON:function(a){if(void 0!==a.textures[this.uuid])return a.textures[this.uuid];\nvar b={metadata:{version:4.5,type:\"Texture\",generator:\"Texture.toJSON\"},uuid:this.uuid,name:this.name,mapping:this.mapping,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],wrap:[this.wrapS,this.wrapT],minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY};if(void 0!==this.image){var c=this.image;void 0===c.uuid&&(c.uuid=R.generateUUID());if(void 0===a.images[c.uuid]){var d=a.images,e=c.uuid,f=c.uuid;if(c instanceof HTMLCanvasElement)var g=\nc;else{g=document.createElementNS(\"http://www.w3.org/1999/xhtml\",\"canvas\");g.width=c.width;g.height=c.height;var h=g.getContext(\"2d\");c instanceof ImageData?h.putImageData(c,0,0):h.drawImage(c,0,0,c.width,c.height)}g=2048<g.width||2048<g.height?g.toDataURL(\"image/jpeg\",.6):g.toDataURL(\"image/png\");d[e]={uuid:f,url:g}}b.image=c.uuid}return a.textures[this.uuid]=b},dispose:function(){this.dispatchEvent({type:\"dispose\"})},transformUv:function(a){if(300===this.mapping){a.multiply(this.repeat);a.add(this.offset);\nif(0>a.x||1<a.x)switch(this.wrapS){case 1E3:a.x-=Math.floor(a.x);break;case 1001:a.x=0>a.x?0:1;break;case 1002:a.x=1===Math.abs(Math.floor(a.x)%2)?Math.ceil(a.x)-a.x:a.x-Math.floor(a.x)}if(0>a.y||1<a.y)switch(this.wrapT){case 1E3:a.y-=Math.floor(a.y);break;case 1001:a.y=0>a.y?0:1;break;case 1002:a.y=1===Math.abs(Math.floor(a.y)%2)?Math.ceil(a.y)-a.y:a.y-Math.floor(a.y)}this.flipY&&(a.y=1-a.y)}}});Object.assign(S.prototype,{isVector4:!0,set:function(a,b,c,d){this.x=a;this.y=b;this.z=c;this.w=d;return this},\nsetScalar:function(a){this.w=this.z=this.y=this.x=a;return this},setX:function(a){this.x=a;return this},setY:function(a){this.y=a;return this},setZ:function(a){this.z=a;return this},setW:function(a){this.w=a;return this},setComponent:function(a,b){switch(a){case 0:this.x=b;break;case 1:this.y=b;break;case 2:this.z=b;break;case 3:this.w=b;break;default:throw Error(\"index is out of range: \"+a);}return this},getComponent:function(a){switch(a){case 0:return this.x;case 1:return this.y;case 2:return this.z;\ncase 3:return this.w;default:throw Error(\"index is out of range: \"+a);}},clone:function(){return new this.constructor(this.x,this.y,this.z,this.w)},copy:function(a){this.x=a.x;this.y=a.y;this.z=a.z;this.w=void 0!==a.w?a.w:1;return this},add:function(a,b){if(void 0!==b)return console.warn(\"THREE.Vector4: .add() now only accepts one argument. Use .addVectors( a, b ) instead.\"),this.addVectors(a,b);this.x+=a.x;this.y+=a.y;this.z+=a.z;this.w+=a.w;return this},addScalar:function(a){this.x+=a;this.y+=a;\nthis.z+=a;this.w+=a;return this},addVectors:function(a,b){this.x=a.x+b.x;this.y=a.y+b.y;this.z=a.z+b.z;this.w=a.w+b.w;return this},addScaledVector:function(a,b){this.x+=a.x*b;this.y+=a.y*b;this.z+=a.z*b;this.w+=a.w*b;return this},sub:function(a,b){if(void 0!==b)return console.warn(\"THREE.Vector4: .sub() now only accepts one argument. Use .subVectors( a, b ) instead.\"),this.subVectors(a,b);this.x-=a.x;this.y-=a.y;this.z-=a.z;this.w-=a.w;return this},subScalar:function(a){this.x-=a;this.y-=a;this.z-=\na;this.w-=a;return this},subVectors:function(a,b){this.x=a.x-b.x;this.y=a.y-b.y;this.z=a.z-b.z;this.w=a.w-b.w;return this},multiplyScalar:function(a){this.x*=a;this.y*=a;this.z*=a;this.w*=a;return this},applyMatrix4:function(a){var b=this.x,c=this.y,d=this.z,e=this.w;a=a.elements;this.x=a[0]*b+a[4]*c+a[8]*d+a[12]*e;this.y=a[1]*b+a[5]*c+a[9]*d+a[13]*e;this.z=a[2]*b+a[6]*c+a[10]*d+a[14]*e;this.w=a[3]*b+a[7]*c+a[11]*d+a[15]*e;return this},divideScalar:function(a){return this.multiplyScalar(1/a)},setAxisAngleFromQuaternion:function(a){this.w=\n2*Math.acos(a.w);var b=Math.sqrt(1-a.w*a.w);1E-4>b?(this.x=1,this.z=this.y=0):(this.x=a.x/b,this.y=a.y/b,this.z=a.z/b);return this},setAxisAngleFromRotationMatrix:function(a){a=a.elements;var b=a[0];var c=a[4];var d=a[8],e=a[1],f=a[5],g=a[9];var h=a[2];var k=a[6];var l=a[10];if(.01>Math.abs(c-e)&&.01>Math.abs(d-h)&&.01>Math.abs(g-k)){if(.1>Math.abs(c+e)&&.1>Math.abs(d+h)&&.1>Math.abs(g+k)&&.1>Math.abs(b+f+l-3))return this.set(1,0,0,0),this;a=Math.PI;b=(b+1)/2;f=(f+1)/2;l=(l+1)/2;c=(c+e)/4;d=(d+h)/\n4;g=(g+k)/4;b>f&&b>l?.01>b?(k=0,c=h=.707106781):(k=Math.sqrt(b),h=c/k,c=d/k):f>l?.01>f?(k=.707106781,h=0,c=.707106781):(h=Math.sqrt(f),k=c/h,c=g/h):.01>l?(h=k=.707106781,c=0):(c=Math.sqrt(l),k=d/c,h=g/c);this.set(k,h,c,a);return this}a=Math.sqrt((k-g)*(k-g)+(d-h)*(d-h)+(e-c)*(e-c));.001>Math.abs(a)&&(a=1);this.x=(k-g)/a;this.y=(d-h)/a;this.z=(e-c)/a;this.w=Math.acos((b+f+l-1)/2);return this},min:function(a){this.x=Math.min(this.x,a.x);this.y=Math.min(this.y,a.y);this.z=Math.min(this.z,a.z);this.w=\nMath.min(this.w,a.w);return this},max:function(a){this.x=Math.max(this.x,a.x);this.y=Math.max(this.y,a.y);this.z=Math.max(this.z,a.z);this.w=Math.max(this.w,a.w);return this},clamp:function(a,b){this.x=Math.max(a.x,Math.min(b.x,this.x));this.y=Math.max(a.y,Math.min(b.y,this.y));this.z=Math.max(a.z,Math.min(b.z,this.z));this.w=Math.max(a.w,Math.min(b.w,this.w));return this},clampScalar:function(){var a,b;return function(c,d){void 0===a&&(a=new S,b=new S);a.set(c,c,c,c);b.set(d,d,d,d);return this.clamp(a,\nb)}}(),clampLength:function(a,b){var c=this.length();return this.divideScalar(c||1).multiplyScalar(Math.max(a,Math.min(b,c)))},floor:function(){this.x=Math.floor(this.x);this.y=Math.floor(this.y);this.z=Math.floor(this.z);this.w=Math.floor(this.w);return this},ceil:function(){this.x=Math.ceil(this.x);this.y=Math.ceil(this.y);this.z=Math.ceil(this.z);this.w=Math.ceil(this.w);return this},round:function(){this.x=Math.round(this.x);this.y=Math.round(this.y);this.z=Math.round(this.z);this.w=Math.round(this.w);\nreturn this},roundToZero:function(){this.x=0>this.x?Math.ceil(this.x):Math.floor(this.x);this.y=0>this.y?Math.ceil(this.y):Math.floor(this.y);this.z=0>this.z?Math.ceil(this.z):Math.floor(this.z);this.w=0>this.w?Math.ceil(this.w):Math.floor(this.w);return this},negate:function(){this.x=-this.x;this.y=-this.y;this.z=-this.z;this.w=-this.w;return this},dot:function(a){return this.x*a.x+this.y*a.y+this.z*a.z+this.w*a.w},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w},\nlength:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)},lengthManhattan:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)},normalize:function(){return this.divideScalar(this.length()||1)},setLength:function(a){return this.normalize().multiplyScalar(a)},lerp:function(a,b){this.x+=(a.x-this.x)*b;this.y+=(a.y-this.y)*b;this.z+=(a.z-this.z)*b;this.w+=(a.w-this.w)*b;return this},lerpVectors:function(a,b,c){return this.subVectors(b,\na).multiplyScalar(c).add(a)},equals:function(a){return a.x===this.x&&a.y===this.y&&a.z===this.z&&a.w===this.w},fromArray:function(a,b){void 0===b&&(b=0);this.x=a[b];this.y=a[b+1];this.z=a[b+2];this.w=a[b+3];return this},toArray:function(a,b){void 0===a&&(a=[]);void 0===b&&(b=0);a[b]=this.x;a[b+1]=this.y;a[b+2]=this.z;a[b+3]=this.w;return a},fromBufferAttribute:function(a,b,c){void 0!==c&&console.warn(\"THREE.Vector4: offset has been removed from .fromBufferAttribute().\");this.x=a.getX(b);this.y=a.getY(b);\nthis.z=a.getZ(b);this.w=a.getW(b);return this}});Object.assign(Ab.prototype,na.prototype,{isWebGLRenderTarget:!0,setSize:function(a,b){if(this.width!==a||this.height!==b)this.width=a,this.height=b,this.dispose();this.viewport.set(0,0,a,b);this.scissor.set(0,0,a,b)},clone:function(){return(new this.constructor).copy(this)},copy:function(a){this.width=a.width;this.height=a.height;this.viewport.copy(a.viewport);this.texture=a.texture.clone();this.depthBuffer=a.depthBuffer;this.stencilBuffer=a.stencilBuffer;\nthis.depthTexture=a.depthTexture;return this},dispose:function(){this.dispatchEvent({type:\"dispose\"})}});Bb.prototype=Object.create(Ab.prototype);Bb.prototype.constructor=Bb;Bb.prototype.isWebGLRenderTargetCube=!0;Object.assign(ia,{slerp:function(a,b,c,d){return c.copy(a).slerp(b,d)},slerpFlat:function(a,b,c,d,e,f,g){var h=c[d+0],k=c[d+1],l=c[d+2];c=c[d+3];d=e[f+0];var q=e[f+1],p=e[f+2];e=e[f+3];if(c!==e||h!==d||k!==q||l!==p){f=1-g;var m=h*d+k*q+l*p+c*e,r=0<=m?1:-1,n=1-m*m;n>Number.EPSILON&&(n=Math.sqrt(n),\nm=Math.atan2(n,m*r),f=Math.sin(f*m)/n,g=Math.sin(g*m)/n);r*=g;h=h*f+d*r;k=k*f+q*r;l=l*f+p*r;c=c*f+e*r;f===1-g&&(g=1/Math.sqrt(h*h+k*k+l*l+c*c),h*=g,k*=g,l*=g,c*=g)}a[b]=h;a[b+1]=k;a[b+2]=l;a[b+3]=c}});Object.defineProperties(ia.prototype,{x:{get:function(){return this._x},set:function(a){this._x=a;this.onChangeCallback()}},y:{get:function(){return this._y},set:function(a){this._y=a;this.onChangeCallback()}},z:{get:function(){return this._z},set:function(a){this._z=a;this.onChangeCallback()}},w:{get:function(){return this._w},\nset:function(a){this._w=a;this.onChangeCallback()}}});Object.assign(ia.prototype,{set:function(a,b,c,d){this._x=a;this._y=b;this._z=c;this._w=d;this.onChangeCallback();return this},clone:function(){return new this.constructor(this._x,this._y,this._z,this._w)},copy:function(a){this._x=a.x;this._y=a.y;this._z=a.z;this._w=a.w;this.onChangeCallback();return this},setFromEuler:function(a,b){if(!a||!a.isEuler)throw Error(\"THREE.Quaternion: .setFromEuler() now expects an Euler rotation rather than a Vector3 and order.\");\nvar c=a._x,d=a._y,e=a._z;a=a.order;var f=Math.cos,g=Math.sin,h=f(c/2),k=f(d/2),f=f(e/2),c=g(c/2),d=g(d/2),e=g(e/2);\"XYZ\"===a?(this._x=c*k*f+h*d*e,this._y=h*d*f-c*k*e,this._z=h*k*e+c*d*f,this._w=h*k*f-c*d*e):\"YXZ\"===a?(this._x=c*k*f+h*d*e,this._y=h*d*f-c*k*e,this._z=h*k*e-c*d*f,this._w=h*k*f+c*d*e):\"ZXY\"===a?(this._x=c*k*f-h*d*e,this._y=h*d*f+c*k*e,this._z=h*k*e+c*d*f,this._w=h*k*f-c*d*e):\"ZYX\"===a?(this._x=c*k*f-h*d*e,this._y=h*d*f+c*k*e,this._z=h*k*e-c*d*f,this._w=h*k*f+c*d*e):\"YZX\"===a?(this._x=\nc*k*f+h*d*e,this._y=h*d*f+c*k*e,this._z=h*k*e-c*d*f,this._w=h*k*f-c*d*e):\"XZY\"===a&&(this._x=c*k*f-h*d*e,this._y=h*d*f-c*k*e,this._z=h*k*e+c*d*f,this._w=h*k*f+c*d*e);if(!1!==b)this.onChangeCallback();return this},setFromAxisAngle:function(a,b){b/=2;var c=Math.sin(b);this._x=a.x*c;this._y=a.y*c;this._z=a.z*c;this._w=Math.cos(b);this.onChangeCallback();return this},setFromRotationMatrix:function(a){var b=a.elements,c=b[0];a=b[4];var d=b[8],e=b[1],f=b[5],g=b[9],h=b[2],k=b[6],b=b[10],l=c+f+b;0<l?(c=.5/\nMath.sqrt(l+1),this._w=.25/c,this._x=(k-g)*c,this._y=(d-h)*c,this._z=(e-a)*c):c>f&&c>b?(c=2*Math.sqrt(1+c-f-b),this._w=(k-g)/c,this._x=.25*c,this._y=(a+e)/c,this._z=(d+h)/c):f>b?(c=2*Math.sqrt(1+f-c-b),this._w=(d-h)/c,this._x=(a+e)/c,this._y=.25*c,this._z=(g+k)/c):(c=2*Math.sqrt(1+b-c-f),this._w=(e-a)/c,this._x=(d+h)/c,this._y=(g+k)/c,this._z=.25*c);this.onChangeCallback();return this},setFromUnitVectors:function(){var a=new n,b;return function(c,d){void 0===a&&(a=new n);b=c.dot(d)+1;1E-6>b?(b=0,\nMath.abs(c.x)>Math.abs(c.z)?a.set(-c.y,c.x,0):a.set(0,-c.z,c.y)):a.crossVectors(c,d);this._x=a.x;this._y=a.y;this._z=a.z;this._w=b;return this.normalize()}}(),inverse:function(){return this.conjugate().normalize()},conjugate:function(){this._x*=-1;this._y*=-1;this._z*=-1;this.onChangeCallback();return this},dot:function(a){return this._x*a._x+this._y*a._y+this._z*a._z+this._w*a._w},lengthSq:function(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w},length:function(){return Math.sqrt(this._x*\nthis._x+this._y*this._y+this._z*this._z+this._w*this._w)},normalize:function(){var a=this.length();0===a?(this._z=this._y=this._x=0,this._w=1):(a=1/a,this._x*=a,this._y*=a,this._z*=a,this._w*=a);this.onChangeCallback();return this},multiply:function(a,b){return void 0!==b?(console.warn(\"THREE.Quaternion: .multiply() now only accepts one argument. Use .multiplyQuaternions( a, b ) instead.\"),this.multiplyQuaternions(a,b)):this.multiplyQuaternions(this,a)},premultiply:function(a){return this.multiplyQuaternions(a,\nthis)},multiplyQuaternions:function(a,b){var c=a._x,d=a._y,e=a._z;a=a._w;var f=b._x,g=b._y,h=b._z;b=b._w;this._x=c*b+a*f+d*h-e*g;this._y=d*b+a*g+e*f-c*h;this._z=e*b+a*h+c*g-d*f;this._w=a*b-c*f-d*g-e*h;this.onChangeCallback();return this},slerp:function(a,b){if(0===b)return this;if(1===b)return this.copy(a);var c=this._x,d=this._y,e=this._z,f=this._w,g=f*a._w+c*a._x+d*a._y+e*a._z;0>g?(this._w=-a._w,this._x=-a._x,this._y=-a._y,this._z=-a._z,g=-g):this.copy(a);if(1<=g)return this._w=f,this._x=c,this._y=\nd,this._z=e,this;a=Math.sqrt(1-g*g);if(.001>Math.abs(a))return this._w=.5*(f+this._w),this._x=.5*(c+this._x),this._y=.5*(d+this._y),this._z=.5*(e+this._z),this;var h=Math.atan2(a,g),g=Math.sin((1-b)*h)/a;b=Math.sin(b*h)/a;this._w=f*g+this._w*b;this._x=c*g+this._x*b;this._y=d*g+this._y*b;this._z=e*g+this._z*b;this.onChangeCallback();return this},equals:function(a){return a._x===this._x&&a._y===this._y&&a._z===this._z&&a._w===this._w},fromArray:function(a,b){void 0===b&&(b=0);this._x=a[b];this._y=a[b+\n1];this._z=a[b+2];this._w=a[b+3];this.onChangeCallback();return this},toArray:function(a,b){void 0===a&&(a=[]);void 0===b&&(b=0);a[b]=this._x;a[b+1]=this._y;a[b+2]=this._z;a[b+3]=this._w;return a},onChange:function(a){this.onChangeCallback=a;return this},onChangeCallback:function(){}});Object.assign(n.prototype,{isVector3:!0,set:function(a,b,c){this.x=a;this.y=b;this.z=c;return this},setScalar:function(a){this.z=this.y=this.x=a;return this},setX:function(a){this.x=a;return this},setY:function(a){this.y=\na;return this},setZ:function(a){this.z=a;return this},setComponent:function(a,b){switch(a){case 0:this.x=b;break;case 1:this.y=b;break;case 2:this.z=b;break;default:throw Error(\"index is out of range: \"+a);}return this},getComponent:function(a){switch(a){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw Error(\"index is out of range: \"+a);}},clone:function(){return new this.constructor(this.x,this.y,this.z)},copy:function(a){this.x=a.x;this.y=a.y;this.z=a.z;return this},\nadd:function(a,b){if(void 0!==b)return console.warn(\"THREE.Vector3: .add() now only accepts one argument. Use .addVectors( a, b ) instead.\"),this.addVectors(a,b);this.x+=a.x;this.y+=a.y;this.z+=a.z;return this},addScalar:function(a){this.x+=a;this.y+=a;this.z+=a;return this},addVectors:function(a,b){this.x=a.x+b.x;this.y=a.y+b.y;this.z=a.z+b.z;return this},addScaledVector:function(a,b){this.x+=a.x*b;this.y+=a.y*b;this.z+=a.z*b;return this},sub:function(a,b){if(void 0!==b)return console.warn(\"THREE.Vector3: .sub() now only accepts one argument. Use .subVectors( a, b ) instead.\"),\nthis.subVectors(a,b);this.x-=a.x;this.y-=a.y;this.z-=a.z;return this},subScalar:function(a){this.x-=a;this.y-=a;this.z-=a;return this},subVectors:function(a,b){this.x=a.x-b.x;this.y=a.y-b.y;this.z=a.z-b.z;return this},multiply:function(a,b){if(void 0!==b)return console.warn(\"THREE.Vector3: .multiply() now only accepts one argument. Use .multiplyVectors( a, b ) instead.\"),this.multiplyVectors(a,b);this.x*=a.x;this.y*=a.y;this.z*=a.z;return this},multiplyScalar:function(a){this.x*=a;this.y*=a;this.z*=\na;return this},multiplyVectors:function(a,b){this.x=a.x*b.x;this.y=a.y*b.y;this.z=a.z*b.z;return this},applyEuler:function(){var a=new ia;return function(b){b&&b.isEuler||console.error(\"THREE.Vector3: .applyEuler() now expects an Euler rotation rather than a Vector3 and order.\");return this.applyQuaternion(a.setFromEuler(b))}}(),applyAxisAngle:function(){var a=new ia;return function(b,c){return this.applyQuaternion(a.setFromAxisAngle(b,c))}}(),applyMatrix3:function(a){var b=this.x,c=this.y,d=this.z;\na=a.elements;this.x=a[0]*b+a[3]*c+a[6]*d;this.y=a[1]*b+a[4]*c+a[7]*d;this.z=a[2]*b+a[5]*c+a[8]*d;return this},applyMatrix4:function(a){var b=this.x,c=this.y,d=this.z;a=a.elements;var e=1/(a[3]*b+a[7]*c+a[11]*d+a[15]);this.x=(a[0]*b+a[4]*c+a[8]*d+a[12])*e;this.y=(a[1]*b+a[5]*c+a[9]*d+a[13])*e;this.z=(a[2]*b+a[6]*c+a[10]*d+a[14])*e;return this},applyQuaternion:function(a){var b=this.x,c=this.y,d=this.z,e=a.x,f=a.y,g=a.z;a=a.w;var h=a*b+f*d-g*c,k=a*c+g*b-e*d,l=a*d+e*c-f*b,b=-e*b-f*c-g*d;this.x=h*a+b*\n-e+k*-g-l*-f;this.y=k*a+b*-f+l*-e-h*-g;this.z=l*a+b*-g+h*-f-k*-e;return this},project:function(){var a=new O;return function(b){a.multiplyMatrices(b.projectionMatrix,a.getInverse(b.matrixWorld));return this.applyMatrix4(a)}}(),unproject:function(){var a=new O;return function(b){a.multiplyMatrices(b.matrixWorld,a.getInverse(b.projectionMatrix));return this.applyMatrix4(a)}}(),transformDirection:function(a){var b=this.x,c=this.y,d=this.z;a=a.elements;this.x=a[0]*b+a[4]*c+a[8]*d;this.y=a[1]*b+a[5]*c+\na[9]*d;this.z=a[2]*b+a[6]*c+a[10]*d;return this.normalize()},divide:function(a){this.x/=a.x;this.y/=a.y;this.z/=a.z;return this},divideScalar:function(a){return this.multiplyScalar(1/a)},min:function(a){this.x=Math.min(this.x,a.x);this.y=Math.min(this.y,a.y);this.z=Math.min(this.z,a.z);return this},max:function(a){this.x=Math.max(this.x,a.x);this.y=Math.max(this.y,a.y);this.z=Math.max(this.z,a.z);return this},clamp:function(a,b){this.x=Math.max(a.x,Math.min(b.x,this.x));this.y=Math.max(a.y,Math.min(b.y,\nthis.y));this.z=Math.max(a.z,Math.min(b.z,this.z));return this},clampScalar:function(){var a=new n,b=new n;return function(c,d){a.set(c,c,c);b.set(d,d,d);return this.clamp(a,b)}}(),clampLength:function(a,b){var c=this.length();return this.divideScalar(c||1).multiplyScalar(Math.max(a,Math.min(b,c)))},floor:function(){this.x=Math.floor(this.x);this.y=Math.floor(this.y);this.z=Math.floor(this.z);return this},ceil:function(){this.x=Math.ceil(this.x);this.y=Math.ceil(this.y);this.z=Math.ceil(this.z);return this},\nround:function(){this.x=Math.round(this.x);this.y=Math.round(this.y);this.z=Math.round(this.z);return this},roundToZero:function(){this.x=0>this.x?Math.ceil(this.x):Math.floor(this.x);this.y=0>this.y?Math.ceil(this.y):Math.floor(this.y);this.z=0>this.z?Math.ceil(this.z):Math.floor(this.z);return this},negate:function(){this.x=-this.x;this.y=-this.y;this.z=-this.z;return this},dot:function(a){return this.x*a.x+this.y*a.y+this.z*a.z},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z},\nlength:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)},lengthManhattan:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)},normalize:function(){return this.divideScalar(this.length()||1)},setLength:function(a){return this.normalize().multiplyScalar(a)},lerp:function(a,b){this.x+=(a.x-this.x)*b;this.y+=(a.y-this.y)*b;this.z+=(a.z-this.z)*b;return this},lerpVectors:function(a,b,c){return this.subVectors(b,a).multiplyScalar(c).add(a)},cross:function(a,b){if(void 0!==\nb)return console.warn(\"THREE.Vector3: .cross() now only accepts one argument. Use .crossVectors( a, b ) instead.\"),this.crossVectors(a,b);b=this.x;var c=this.y,d=this.z;this.x=c*a.z-d*a.y;this.y=d*a.x-b*a.z;this.z=b*a.y-c*a.x;return this},crossVectors:function(a,b){var c=a.x,d=a.y;a=a.z;var e=b.x,f=b.y;b=b.z;this.x=d*b-a*f;this.y=a*e-c*b;this.z=c*f-d*e;return this},projectOnVector:function(a){var b=a.dot(this)/a.lengthSq();return this.copy(a).multiplyScalar(b)},projectOnPlane:function(){var a=new n;\nreturn function(b){a.copy(this).projectOnVector(b);return this.sub(a)}}(),reflect:function(){var a=new n;return function(b){return this.sub(a.copy(b).multiplyScalar(2*this.dot(b)))}}(),angleTo:function(a){a=this.dot(a)/Math.sqrt(this.lengthSq()*a.lengthSq());return Math.acos(R.clamp(a,-1,1))},distanceTo:function(a){return Math.sqrt(this.distanceToSquared(a))},distanceToSquared:function(a){var b=this.x-a.x,c=this.y-a.y;a=this.z-a.z;return b*b+c*c+a*a},distanceToManhattan:function(a){return Math.abs(this.x-\na.x)+Math.abs(this.y-a.y)+Math.abs(this.z-a.z)},setFromSpherical:function(a){var b=Math.sin(a.phi)*a.radius;this.x=b*Math.sin(a.theta);this.y=Math.cos(a.phi)*a.radius;this.z=b*Math.cos(a.theta);return this},setFromCylindrical:function(a){this.x=a.radius*Math.sin(a.theta);this.y=a.y;this.z=a.radius*Math.cos(a.theta);return this},setFromMatrixPosition:function(a){a=a.elements;this.x=a[12];this.y=a[13];this.z=a[14];return this},setFromMatrixScale:function(a){var b=this.setFromMatrixColumn(a,0).length(),\nc=this.setFromMatrixColumn(a,1).length();a=this.setFromMatrixColumn(a,2).length();this.x=b;this.y=c;this.z=a;return this},setFromMatrixColumn:function(a,b){return this.fromArray(a.elements,4*b)},equals:function(a){return a.x===this.x&&a.y===this.y&&a.z===this.z},fromArray:function(a,b){void 0===b&&(b=0);this.x=a[b];this.y=a[b+1];this.z=a[b+2];return this},toArray:function(a,b){void 0===a&&(a=[]);void 0===b&&(b=0);a[b]=this.x;a[b+1]=this.y;a[b+2]=this.z;return a},fromBufferAttribute:function(a,b,c){void 0!==\nc&&console.warn(\"THREE.Vector3: offset has been removed from .fromBufferAttribute().\");this.x=a.getX(b);this.y=a.getY(b);this.z=a.getZ(b);return this}});Object.assign(O.prototype,{isMatrix4:!0,set:function(a,b,c,d,e,f,g,h,k,l,q,p,m,r,n,u){var t=this.elements;t[0]=a;t[4]=b;t[8]=c;t[12]=d;t[1]=e;t[5]=f;t[9]=g;t[13]=h;t[2]=k;t[6]=l;t[10]=q;t[14]=p;t[3]=m;t[7]=r;t[11]=n;t[15]=u;return this},identity:function(){this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1);return this},clone:function(){return(new O).fromArray(this.elements)},\ncopy:function(a){var b=this.elements;a=a.elements;b[0]=a[0];b[1]=a[1];b[2]=a[2];b[3]=a[3];b[4]=a[4];b[5]=a[5];b[6]=a[6];b[7]=a[7];b[8]=a[8];b[9]=a[9];b[10]=a[10];b[11]=a[11];b[12]=a[12];b[13]=a[13];b[14]=a[14];b[15]=a[15];return this},copyPosition:function(a){var b=this.elements;a=a.elements;b[12]=a[12];b[13]=a[13];b[14]=a[14];return this},extractBasis:function(a,b,c){a.setFromMatrixColumn(this,0);b.setFromMatrixColumn(this,1);c.setFromMatrixColumn(this,2);return this},makeBasis:function(a,b,c){this.set(a.x,\nb.x,c.x,0,a.y,b.y,c.y,0,a.z,b.z,c.z,0,0,0,0,1);return this},extractRotation:function(){var a=new n;return function(b){var c=this.elements,d=b.elements,e=1/a.setFromMatrixColumn(b,0).length(),f=1/a.setFromMatrixColumn(b,1).length();b=1/a.setFromMatrixColumn(b,2).length();c[0]=d[0]*e;c[1]=d[1]*e;c[2]=d[2]*e;c[4]=d[4]*f;c[5]=d[5]*f;c[6]=d[6]*f;c[8]=d[8]*b;c[9]=d[9]*b;c[10]=d[10]*b;return this}}(),makeRotationFromEuler:function(a){a&&a.isEuler||console.error(\"THREE.Matrix4: .makeRotationFromEuler() now expects a Euler rotation rather than a Vector3 and order.\");\nvar b=this.elements,c=a.x,d=a.y,e=a.z,f=Math.cos(c),c=Math.sin(c),g=Math.cos(d),d=Math.sin(d),h=Math.cos(e),e=Math.sin(e);if(\"XYZ\"===a.order){var k=f*h;var l=f*e;var q=c*h;a=c*e;b[0]=g*h;b[4]=-g*e;b[8]=d;b[1]=l+q*d;b[5]=k-a*d;b[9]=-c*g;b[2]=a-k*d;b[6]=q+l*d;b[10]=f*g}else\"YXZ\"===a.order?(k=g*h,l=g*e,q=d*h,a=d*e,b[0]=k+a*c,b[4]=q*c-l,b[8]=f*d,b[1]=f*e,b[5]=f*h,b[9]=-c,b[2]=l*c-q,b[6]=a+k*c,b[10]=f*g):\"ZXY\"===a.order?(k=g*h,l=g*e,q=d*h,a=d*e,b[0]=k-a*c,b[4]=-f*e,b[8]=q+l*c,b[1]=l+q*c,b[5]=f*h,b[9]=\na-k*c,b[2]=-f*d,b[6]=c,b[10]=f*g):\"ZYX\"===a.order?(k=f*h,l=f*e,q=c*h,a=c*e,b[0]=g*h,b[4]=q*d-l,b[8]=k*d+a,b[1]=g*e,b[5]=a*d+k,b[9]=l*d-q,b[2]=-d,b[6]=c*g,b[10]=f*g):\"YZX\"===a.order?(k=f*g,l=f*d,q=c*g,a=c*d,b[0]=g*h,b[4]=a-k*e,b[8]=q*e+l,b[1]=e,b[5]=f*h,b[9]=-c*h,b[2]=-d*h,b[6]=l*e+q,b[10]=k-a*e):\"XZY\"===a.order&&(k=f*g,l=f*d,q=c*g,a=c*d,b[0]=g*h,b[4]=-e,b[8]=d*h,b[1]=k*e+a,b[5]=f*h,b[9]=l*e-q,b[2]=q*e-l,b[6]=c*h,b[10]=a*e+k);b[3]=0;b[7]=0;b[11]=0;b[12]=0;b[13]=0;b[14]=0;b[15]=1;return this},makeRotationFromQuaternion:function(a){var b=\nthis.elements,c=a._x,d=a._y,e=a._z,f=a._w,g=c+c,h=d+d,k=e+e;a=c*g;var l=c*h,c=c*k,q=d*h,d=d*k,e=e*k,g=f*g,h=f*h,f=f*k;b[0]=1-(q+e);b[4]=l-f;b[8]=c+h;b[1]=l+f;b[5]=1-(a+e);b[9]=d-g;b[2]=c-h;b[6]=d+g;b[10]=1-(a+q);b[3]=0;b[7]=0;b[11]=0;b[12]=0;b[13]=0;b[14]=0;b[15]=1;return this},lookAt:function(){var a=new n,b=new n,c=new n;return function(d,e,f){var g=this.elements;c.subVectors(d,e);0===c.lengthSq()&&(c.z=1);c.normalize();a.crossVectors(f,c);0===a.lengthSq()&&(1===Math.abs(f.z)?c.x+=1E-4:c.z+=1E-4,\nc.normalize(),a.crossVectors(f,c));a.normalize();b.crossVectors(c,a);g[0]=a.x;g[4]=b.x;g[8]=c.x;g[1]=a.y;g[5]=b.y;g[9]=c.y;g[2]=a.z;g[6]=b.z;g[10]=c.z;return this}}(),multiply:function(a,b){return void 0!==b?(console.warn(\"THREE.Matrix4: .multiply() now only accepts one argument. Use .multiplyMatrices( a, b ) instead.\"),this.multiplyMatrices(a,b)):this.multiplyMatrices(this,a)},premultiply:function(a){return this.multiplyMatrices(a,this)},multiplyMatrices:function(a,b){var c=a.elements,d=b.elements;\nb=this.elements;a=c[0];var e=c[4],f=c[8],g=c[12],h=c[1],k=c[5],l=c[9],q=c[13],p=c[2],m=c[6],r=c[10],n=c[14],u=c[3],x=c[7],y=c[11],c=c[15],A=d[0],I=d[4],B=d[8],H=d[12],w=d[1],z=d[5],D=d[9],C=d[13],F=d[2],L=d[6],J=d[10],K=d[14],ga=d[3],M=d[7],T=d[11],d=d[15];b[0]=a*A+e*w+f*F+g*ga;b[4]=a*I+e*z+f*L+g*M;b[8]=a*B+e*D+f*J+g*T;b[12]=a*H+e*C+f*K+g*d;b[1]=h*A+k*w+l*F+q*ga;b[5]=h*I+k*z+l*L+q*M;b[9]=h*B+k*D+l*J+q*T;b[13]=h*H+k*C+l*K+q*d;b[2]=p*A+m*w+r*F+n*ga;b[6]=p*I+m*z+r*L+n*M;b[10]=p*B+m*D+r*J+n*T;b[14]=p*\nH+m*C+r*K+n*d;b[3]=u*A+x*w+y*F+c*ga;b[7]=u*I+x*z+y*L+c*M;b[11]=u*B+x*D+y*J+c*T;b[15]=u*H+x*C+y*K+c*d;return this},multiplyScalar:function(a){var b=this.elements;b[0]*=a;b[4]*=a;b[8]*=a;b[12]*=a;b[1]*=a;b[5]*=a;b[9]*=a;b[13]*=a;b[2]*=a;b[6]*=a;b[10]*=a;b[14]*=a;b[3]*=a;b[7]*=a;b[11]*=a;b[15]*=a;return this},applyToBufferAttribute:function(){var a=new n;return function(b){for(var c=0,d=b.count;c<d;c++)a.x=b.getX(c),a.y=b.getY(c),a.z=b.getZ(c),a.applyMatrix4(this),b.setXYZ(c,a.x,a.y,a.z);return b}}(),\ndeterminant:function(){var a=this.elements,b=a[0],c=a[4],d=a[8],e=a[12],f=a[1],g=a[5],h=a[9],k=a[13],l=a[2],q=a[6],p=a[10],m=a[14];return a[3]*(+e*h*q-d*k*q-e*g*p+c*k*p+d*g*m-c*h*m)+a[7]*(+b*h*m-b*k*p+e*f*p-d*f*m+d*k*l-e*h*l)+a[11]*(+b*k*q-b*g*m-e*f*q+c*f*m+e*g*l-c*k*l)+a[15]*(-d*g*l-b*h*q+b*g*p+d*f*q-c*f*p+c*h*l)},transpose:function(){var a=this.elements;var b=a[1];a[1]=a[4];a[4]=b;b=a[2];a[2]=a[8];a[8]=b;b=a[6];a[6]=a[9];a[9]=b;b=a[3];a[3]=a[12];a[12]=b;b=a[7];a[7]=a[13];a[13]=b;b=a[11];a[11]=a[14];\na[14]=b;return this},setPosition:function(a){var b=this.elements;b[12]=a.x;b[13]=a.y;b[14]=a.z;return this},getInverse:function(a,b){var c=this.elements,d=a.elements;a=d[0];var e=d[1],f=d[2],g=d[3],h=d[4],k=d[5],l=d[6],q=d[7],p=d[8],m=d[9],r=d[10],n=d[11],u=d[12],x=d[13],y=d[14],d=d[15],A=m*y*q-x*r*q+x*l*n-k*y*n-m*l*d+k*r*d,I=u*r*q-p*y*q-u*l*n+h*y*n+p*l*d-h*r*d,B=p*x*q-u*m*q+u*k*n-h*x*n-p*k*d+h*m*d,H=u*m*l-p*x*l-u*k*r+h*x*r+p*k*y-h*m*y,w=a*A+e*I+f*B+g*H;if(0===w){if(!0===b)throw Error(\"THREE.Matrix4: .getInverse() can't invert matrix, determinant is 0\");\nconsole.warn(\"THREE.Matrix4: .getInverse() can't invert matrix, determinant is 0\");return this.identity()}b=1/w;c[0]=A*b;c[1]=(x*r*g-m*y*g-x*f*n+e*y*n+m*f*d-e*r*d)*b;c[2]=(k*y*g-x*l*g+x*f*q-e*y*q-k*f*d+e*l*d)*b;c[3]=(m*l*g-k*r*g-m*f*q+e*r*q+k*f*n-e*l*n)*b;c[4]=I*b;c[5]=(p*y*g-u*r*g+u*f*n-a*y*n-p*f*d+a*r*d)*b;c[6]=(u*l*g-h*y*g-u*f*q+a*y*q+h*f*d-a*l*d)*b;c[7]=(h*r*g-p*l*g+p*f*q-a*r*q-h*f*n+a*l*n)*b;c[8]=B*b;c[9]=(u*m*g-p*x*g-u*e*n+a*x*n+p*e*d-a*m*d)*b;c[10]=(h*x*g-u*k*g+u*e*q-a*x*q-h*e*d+a*k*d)*b;c[11]=\n(p*k*g-h*m*g-p*e*q+a*m*q+h*e*n-a*k*n)*b;c[12]=H*b;c[13]=(p*x*f-u*m*f+u*e*r-a*x*r-p*e*y+a*m*y)*b;c[14]=(u*k*f-h*x*f-u*e*l+a*x*l+h*e*y-a*k*y)*b;c[15]=(h*m*f-p*k*f+p*e*l-a*m*l-h*e*r+a*k*r)*b;return this},scale:function(a){var b=this.elements,c=a.x,d=a.y;a=a.z;b[0]*=c;b[4]*=d;b[8]*=a;b[1]*=c;b[5]*=d;b[9]*=a;b[2]*=c;b[6]*=d;b[10]*=a;b[3]*=c;b[7]*=d;b[11]*=a;return this},getMaxScaleOnAxis:function(){var a=this.elements;return Math.sqrt(Math.max(a[0]*a[0]+a[1]*a[1]+a[2]*a[2],a[4]*a[4]+a[5]*a[5]+a[6]*a[6],\na[8]*a[8]+a[9]*a[9]+a[10]*a[10]))},makeTranslation:function(a,b,c){this.set(1,0,0,a,0,1,0,b,0,0,1,c,0,0,0,1);return this},makeRotationX:function(a){var b=Math.cos(a);a=Math.sin(a);this.set(1,0,0,0,0,b,-a,0,0,a,b,0,0,0,0,1);return this},makeRotationY:function(a){var b=Math.cos(a);a=Math.sin(a);this.set(b,0,a,0,0,1,0,0,-a,0,b,0,0,0,0,1);return this},makeRotationZ:function(a){var b=Math.cos(a);a=Math.sin(a);this.set(b,-a,0,0,a,b,0,0,0,0,1,0,0,0,0,1);return this},makeRotationAxis:function(a,b){var c=\nMath.cos(b);b=Math.sin(b);var d=1-c,e=a.x,f=a.y;a=a.z;var g=d*e,h=d*f;this.set(g*e+c,g*f-b*a,g*a+b*f,0,g*f+b*a,h*f+c,h*a-b*e,0,g*a-b*f,h*a+b*e,d*a*a+c,0,0,0,0,1);return this},makeScale:function(a,b,c){this.set(a,0,0,0,0,b,0,0,0,0,c,0,0,0,0,1);return this},makeShear:function(a,b,c){this.set(1,b,c,0,a,1,c,0,a,b,1,0,0,0,0,1);return this},compose:function(a,b,c){this.makeRotationFromQuaternion(b);this.scale(c);this.setPosition(a);return this},decompose:function(){var a=new n,b=new O;return function(c,\nd,e){var f=this.elements,g=a.set(f[0],f[1],f[2]).length(),h=a.set(f[4],f[5],f[6]).length(),k=a.set(f[8],f[9],f[10]).length();0>this.determinant()&&(g=-g);c.x=f[12];c.y=f[13];c.z=f[14];b.copy(this);c=1/g;var f=1/h,l=1/k;b.elements[0]*=c;b.elements[1]*=c;b.elements[2]*=c;b.elements[4]*=f;b.elements[5]*=f;b.elements[6]*=f;b.elements[8]*=l;b.elements[9]*=l;b.elements[10]*=l;d.setFromRotationMatrix(b);e.x=g;e.y=h;e.z=k;return this}}(),makePerspective:function(a,b,c,d,e,f){void 0===f&&console.warn(\"THREE.Matrix4: .makePerspective() has been redefined and has a new signature. Please check the docs.\");\nvar g=this.elements;g[0]=2*e/(b-a);g[4]=0;g[8]=(b+a)/(b-a);g[12]=0;g[1]=0;g[5]=2*e/(c-d);g[9]=(c+d)/(c-d);g[13]=0;g[2]=0;g[6]=0;g[10]=-(f+e)/(f-e);g[14]=-2*f*e/(f-e);g[3]=0;g[7]=0;g[11]=-1;g[15]=0;return this},makeOrthographic:function(a,b,c,d,e,f){var g=this.elements,h=1/(b-a),k=1/(c-d),l=1/(f-e);g[0]=2*h;g[4]=0;g[8]=0;g[12]=-((b+a)*h);g[1]=0;g[5]=2*k;g[9]=0;g[13]=-((c+d)*k);g[2]=0;g[6]=0;g[10]=-2*l;g[14]=-((f+e)*l);g[3]=0;g[7]=0;g[11]=0;g[15]=1;return this},equals:function(a){var b=this.elements;\na=a.elements;for(var c=0;16>c;c++)if(b[c]!==a[c])return!1;return!0},fromArray:function(a,b){void 0===b&&(b=0);for(var c=0;16>c;c++)this.elements[c]=a[c+b];return this},toArray:function(a,b){void 0===a&&(a=[]);void 0===b&&(b=0);var c=this.elements;a[b]=c[0];a[b+1]=c[1];a[b+2]=c[2];a[b+3]=c[3];a[b+4]=c[4];a[b+5]=c[5];a[b+6]=c[6];a[b+7]=c[7];a[b+8]=c[8];a[b+9]=c[9];a[b+10]=c[10];a[b+11]=c[11];a[b+12]=c[12];a[b+13]=c[13];a[b+14]=c[14];a[b+15]=c[15];return a}});bb.prototype=Object.create(N.prototype);\nbb.prototype.constructor=bb;bb.prototype.isDataTexture=!0;Va.prototype=Object.create(N.prototype);Va.prototype.constructor=Va;Va.prototype.isCubeTexture=!0;Object.defineProperty(Va.prototype,\"images\",{get:function(){return this.image},set:function(a){this.image=a}});var De=new N,Ee=new Va,ye=[],Ae=[],Ce=new Float32Array(16),Be=new Float32Array(9);Ie.prototype.setValue=function(a,b){for(var c=this.seq,d=0,e=c.length;d!==e;++d){var f=c[d];f.setValue(a,b[f.id])}};var Pd=/([\\w\\d_]+)(\\])?(\\[|\\.)?/g;cb.prototype.setValue=\nfunction(a,b,c){b=this.map[b];void 0!==b&&b.setValue(a,c,this.renderer)};cb.prototype.setOptional=function(a,b,c){b=b[c];void 0!==b&&this.setValue(a,c,b)};cb.upload=function(a,b,c,d){for(var e=0,f=b.length;e!==f;++e){var g=b[e],h=c[g.id];!1!==h.needsUpdate&&g.setValue(a,h.value,d)}};cb.seqWithValue=function(a,b){for(var c=[],d=0,e=a.length;d!==e;++d){var f=a[d];f.id in b&&c.push(f)}return c};var rg={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,\nbisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,\ndarkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,\nlavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,\nmediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,\nplum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,\nyellow:16776960,yellowgreen:10145074};Object.assign(C.prototype,{isColor:!0,r:1,g:1,b:1,set:function(a){a&&a.isColor?this.copy(a):\"number\"===typeof a?this.setHex(a):\"string\"===typeof a&&this.setStyle(a);return this},setScalar:function(a){this.b=this.g=this.r=a;return this},setHex:function(a){a=Math.floor(a);this.r=(a>>16&255)/255;this.g=(a>>8&255)/255;this.b=(a&255)/255;return this},setRGB:function(a,b,c){this.r=a;this.g=b;this.b=c;return this},setHSL:function(){function a(a,c,d){0>d&&(d+=1);1<d&&\n--d;return d<1/6?a+6*(c-a)*d:.5>d?c:d<2/3?a+6*(c-a)*(2/3-d):a}return function(b,c,d){b=R.euclideanModulo(b,1);c=R.clamp(c,0,1);d=R.clamp(d,0,1);0===c?this.r=this.g=this.b=d:(c=.5>=d?d*(1+c):d+c-d*c,d=2*d-c,this.r=a(d,c,b+1/3),this.g=a(d,c,b),this.b=a(d,c,b-1/3));return this}}(),setStyle:function(a){function b(b){void 0!==b&&1>parseFloat(b)&&console.warn(\"THREE.Color: Alpha component of \"+a+\" will be ignored.\")}var c;if(c=/^((?:rgb|hsl)a?)\\(\\s*([^\\)]*)\\)/.exec(a)){var d=c[2];switch(c[1]){case \"rgb\":case \"rgba\":if(c=\n/^(\\d+)\\s*,\\s*(\\d+)\\s*,\\s*(\\d+)\\s*(,\\s*([0-9]*\\.?[0-9]+)\\s*)?$/.exec(d))return this.r=Math.min(255,parseInt(c[1],10))/255,this.g=Math.min(255,parseInt(c[2],10))/255,this.b=Math.min(255,parseInt(c[3],10))/255,b(c[5]),this;if(c=/^(\\d+)\\%\\s*,\\s*(\\d+)\\%\\s*,\\s*(\\d+)\\%\\s*(,\\s*([0-9]*\\.?[0-9]+)\\s*)?$/.exec(d))return this.r=Math.min(100,parseInt(c[1],10))/100,this.g=Math.min(100,parseInt(c[2],10))/100,this.b=Math.min(100,parseInt(c[3],10))/100,b(c[5]),this;break;case \"hsl\":case \"hsla\":if(c=/^([0-9]*\\.?[0-9]+)\\s*,\\s*(\\d+)\\%\\s*,\\s*(\\d+)\\%\\s*(,\\s*([0-9]*\\.?[0-9]+)\\s*)?$/.exec(d)){var d=\nparseFloat(c[1])/360,e=parseInt(c[2],10)/100,f=parseInt(c[3],10)/100;b(c[5]);return this.setHSL(d,e,f)}}}else if(c=/^\\#([A-Fa-f0-9]+)$/.exec(a)){c=c[1];d=c.length;if(3===d)return this.r=parseInt(c.charAt(0)+c.charAt(0),16)/255,this.g=parseInt(c.charAt(1)+c.charAt(1),16)/255,this.b=parseInt(c.charAt(2)+c.charAt(2),16)/255,this;if(6===d)return this.r=parseInt(c.charAt(0)+c.charAt(1),16)/255,this.g=parseInt(c.charAt(2)+c.charAt(3),16)/255,this.b=parseInt(c.charAt(4)+c.charAt(5),16)/255,this}a&&0<a.length&&\n(c=rg[a],void 0!==c?this.setHex(c):console.warn(\"THREE.Color: Unknown color \"+a));return this},clone:function(){return new this.constructor(this.r,this.g,this.b)},copy:function(a){this.r=a.r;this.g=a.g;this.b=a.b;return this},copyGammaToLinear:function(a,b){void 0===b&&(b=2);this.r=Math.pow(a.r,b);this.g=Math.pow(a.g,b);this.b=Math.pow(a.b,b);return this},copyLinearToGamma:function(a,b){void 0===b&&(b=2);b=0<b?1/b:1;this.r=Math.pow(a.r,b);this.g=Math.pow(a.g,b);this.b=Math.pow(a.b,b);return this},\nconvertGammaToLinear:function(){var a=this.r,b=this.g,c=this.b;this.r=a*a;this.g=b*b;this.b=c*c;return this},convertLinearToGamma:function(){this.r=Math.sqrt(this.r);this.g=Math.sqrt(this.g);this.b=Math.sqrt(this.b);return this},getHex:function(){return 255*this.r<<16^255*this.g<<8^255*this.b<<0},getHexString:function(){return(\"000000\"+this.getHex().toString(16)).slice(-6)},getHSL:function(a){a=a||{h:0,s:0,l:0};var b=this.r,c=this.g,d=this.b,e=Math.max(b,c,d),f=Math.min(b,c,d),g,h=(f+e)/2;if(f===\ne)f=g=0;else{var k=e-f,f=.5>=h?k/(e+f):k/(2-e-f);switch(e){case b:g=(c-d)/k+(c<d?6:0);break;case c:g=(d-b)/k+2;break;case d:g=(b-c)/k+4}g/=6}a.h=g;a.s=f;a.l=h;return a},getStyle:function(){return\"rgb(\"+(255*this.r|0)+\",\"+(255*this.g|0)+\",\"+(255*this.b|0)+\")\"},offsetHSL:function(a,b,c){var d=this.getHSL();d.h+=a;d.s+=b;d.l+=c;this.setHSL(d.h,d.s,d.l);return this},add:function(a){this.r+=a.r;this.g+=a.g;this.b+=a.b;return this},addColors:function(a,b){this.r=a.r+b.r;this.g=a.g+b.g;this.b=a.b+b.b;return this},\naddScalar:function(a){this.r+=a;this.g+=a;this.b+=a;return this},sub:function(a){this.r=Math.max(0,this.r-a.r);this.g=Math.max(0,this.g-a.g);this.b=Math.max(0,this.b-a.b);return this},multiply:function(a){this.r*=a.r;this.g*=a.g;this.b*=a.b;return this},multiplyScalar:function(a){this.r*=a;this.g*=a;this.b*=a;return this},lerp:function(a,b){this.r+=(a.r-this.r)*b;this.g+=(a.g-this.g)*b;this.b+=(a.b-this.b)*b;return this},equals:function(a){return a.r===this.r&&a.g===this.g&&a.b===this.b},fromArray:function(a,\nb){void 0===b&&(b=0);this.r=a[b];this.g=a[b+1];this.b=a[b+2];return this},toArray:function(a,b){void 0===a&&(a=[]);void 0===b&&(b=0);a[b]=this.r;a[b+1]=this.g;a[b+2]=this.b;return a},toJSON:function(){return this.getHex()}});var L={common:{diffuse:{value:new C(15658734)},opacity:{value:1},map:{value:null},offsetRepeat:{value:new S(0,0,1,1)},alphaMap:{value:null}},specularmap:{specularMap:{value:null}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},refractionRatio:{value:.98}},\naomap:{aoMap:{value:null},aoMapIntensity:{value:1}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1}},emissivemap:{emissiveMap:{value:null}},bumpmap:{bumpMap:{value:null},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalScale:{value:new D(1,1)}},displacementmap:{displacementMap:{value:null},displacementScale:{value:1},displacementBias:{value:0}},roughnessmap:{roughnessMap:{value:null}},metalnessmap:{metalnessMap:{value:null}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:2.5E-4},\nfogNear:{value:1},fogFar:{value:2E3},fogColor:{value:new C(16777215)}},lights:{ambientLightColor:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{},shadow:{},shadowBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{},shadow:{},shadowBias:{},shadowRadius:{},shadowMapSize:{}}},spotShadowMap:{value:[]},spotShadowMatrix:{value:[]},\npointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{},shadow:{},shadowBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}}},points:{diffuse:{value:new C(15658734)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},offsetRepeat:{value:new S(0,\n0,1,1)}}},Da={merge:function(a){for(var b={},c=0;c<a.length;c++){var d=this.clone(a[c]),e;for(e in d)b[e]=d[e]}return b},clone:function(a){var b={},c;for(c in a){b[c]={};for(var d in a[c]){var e=a[c][d];e&&(e.isColor||e.isMatrix3||e.isMatrix4||e.isVector2||e.isVector3||e.isVector4||e.isTexture)?b[c][d]=e.clone():Array.isArray(e)?b[c][d]=e.slice():b[c][d]=e}}return b}},V={alphamap_fragment:\"#ifdef USE_ALPHAMAP\\n\\tdiffuseColor.a *= texture2D( alphaMap, vUv ).g;\\n#endif\\n\",alphamap_pars_fragment:\"#ifdef USE_ALPHAMAP\\n\\tuniform sampler2D alphaMap;\\n#endif\\n\",\nalphatest_fragment:\"#ifdef ALPHATEST\\n\\tif ( diffuseColor.a < ALPHATEST ) discard;\\n#endif\\n\",aomap_fragment:\"#ifdef USE_AOMAP\\n\\tfloat ambientOcclusion = ( texture2D( aoMap, vUv2 ).r - 1.0 ) * aoMapIntensity + 1.0;\\n\\treflectedLight.indirectDiffuse *= ambientOcclusion;\\n\\t#if defined( USE_ENVMAP ) && defined( PHYSICAL )\\n\\t\\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\\n\\t\\treflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.specularRoughness );\\n\\t#endif\\n#endif\\n\",\naomap_pars_fragment:\"#ifdef USE_AOMAP\\n\\tuniform sampler2D aoMap;\\n\\tuniform float aoMapIntensity;\\n#endif\",begin_vertex:\"\\nvec3 transformed = vec3( position );\\n\",beginnormal_vertex:\"\\nvec3 objectNormal = vec3( normal );\\n\",bsdfs:\"float punctualLightIntensityToIrradianceFactor( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {\\n\\tif( decayExponent > 0.0 ) {\\n#if defined ( PHYSICALLY_CORRECT_LIGHTS )\\n\\t\\tfloat distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );\\n\\t\\tfloat maxDistanceCutoffFactor = pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );\\n\\t\\treturn distanceFalloff * maxDistanceCutoffFactor;\\n#else\\n\\t\\treturn pow( saturate( -lightDistance / cutoffDistance + 1.0 ), decayExponent );\\n#endif\\n\\t}\\n\\treturn 1.0;\\n}\\nvec3 BRDF_Diffuse_Lambert( const in vec3 diffuseColor ) {\\n\\treturn RECIPROCAL_PI * diffuseColor;\\n}\\nvec3 F_Schlick( const in vec3 specularColor, const in float dotLH ) {\\n\\tfloat fresnel = exp2( ( -5.55473 * dotLH - 6.98316 ) * dotLH );\\n\\treturn ( 1.0 - specularColor ) * fresnel + specularColor;\\n}\\nfloat G_GGX_Smith( const in float alpha, const in float dotNL, const in float dotNV ) {\\n\\tfloat a2 = pow2( alpha );\\n\\tfloat gl = dotNL + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\\n\\tfloat gv = dotNV + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\\n\\treturn 1.0 / ( gl * gv );\\n}\\nfloat G_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {\\n\\tfloat a2 = pow2( alpha );\\n\\tfloat gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\\n\\tfloat gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\\n\\treturn 0.5 / max( gv + gl, EPSILON );\\n}\\nfloat D_GGX( const in float alpha, const in float dotNH ) {\\n\\tfloat a2 = pow2( alpha );\\n\\tfloat denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;\\n\\treturn RECIPROCAL_PI * a2 / pow2( denom );\\n}\\nvec3 BRDF_Specular_GGX( const in IncidentLight incidentLight, const in GeometricContext geometry, const in vec3 specularColor, const in float roughness ) {\\n\\tfloat alpha = pow2( roughness );\\n\\tvec3 halfDir = normalize( incidentLight.direction + geometry.viewDir );\\n\\tfloat dotNL = saturate( dot( geometry.normal, incidentLight.direction ) );\\n\\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\\n\\tfloat dotNH = saturate( dot( geometry.normal, halfDir ) );\\n\\tfloat dotLH = saturate( dot( incidentLight.direction, halfDir ) );\\n\\tvec3 F = F_Schlick( specularColor, dotLH );\\n\\tfloat G = G_GGX_SmithCorrelated( alpha, dotNL, dotNV );\\n\\tfloat D = D_GGX( alpha, dotNH );\\n\\treturn F * ( G * D );\\n}\\nvec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {\\n\\tconst float LUT_SIZE  = 64.0;\\n\\tconst float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;\\n\\tconst float LUT_BIAS  = 0.5 / LUT_SIZE;\\n\\tfloat theta = acos( dot( N, V ) );\\n\\tvec2 uv = vec2(\\n\\t\\tsqrt( saturate( roughness ) ),\\n\\t\\tsaturate( theta / ( 0.5 * PI ) ) );\\n\\tuv = uv * LUT_SCALE + LUT_BIAS;\\n\\treturn uv;\\n}\\nfloat LTC_ClippedSphereFormFactor( const in vec3 f ) {\\n\\tfloat l = length( f );\\n\\treturn max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );\\n}\\nvec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {\\n\\tfloat x = dot( v1, v2 );\\n\\tfloat y = abs( x );\\n\\tfloat a = 0.86267 + (0.49788 + 0.01436 * y ) * y;\\n\\tfloat b = 3.45068 + (4.18814 + y) * y;\\n\\tfloat v = a / b;\\n\\tfloat theta_sintheta = (x > 0.0) ? v : 0.5 * inversesqrt( 1.0 - x * x ) - v;\\n\\treturn cross( v1, v2 ) * theta_sintheta;\\n}\\nvec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {\\n\\tvec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];\\n\\tvec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];\\n\\tvec3 lightNormal = cross( v1, v2 );\\n\\tif( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );\\n\\tvec3 T1, T2;\\n\\tT1 = normalize( V - N * dot( V, N ) );\\n\\tT2 = - cross( N, T1 );\\n\\tmat3 mat = mInv * transpose( mat3( T1, T2, N ) );\\n\\tvec3 coords[ 4 ];\\n\\tcoords[ 0 ] = mat * ( rectCoords[ 0 ] - P );\\n\\tcoords[ 1 ] = mat * ( rectCoords[ 1 ] - P );\\n\\tcoords[ 2 ] = mat * ( rectCoords[ 2 ] - P );\\n\\tcoords[ 3 ] = mat * ( rectCoords[ 3 ] - P );\\n\\tcoords[ 0 ] = normalize( coords[ 0 ] );\\n\\tcoords[ 1 ] = normalize( coords[ 1 ] );\\n\\tcoords[ 2 ] = normalize( coords[ 2 ] );\\n\\tcoords[ 3 ] = normalize( coords[ 3 ] );\\n\\tvec3 vectorFormFactor = vec3( 0.0 );\\n\\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );\\n\\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );\\n\\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );\\n\\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );\\n\\tvec3 result = vec3( LTC_ClippedSphereFormFactor( vectorFormFactor ) );\\n\\treturn result;\\n}\\nvec3 BRDF_Specular_GGX_Environment( const in GeometricContext geometry, const in vec3 specularColor, const in float roughness ) {\\n\\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\\n\\tconst vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );\\n\\tconst vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );\\n\\tvec4 r = roughness * c0 + c1;\\n\\tfloat a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;\\n\\tvec2 AB = vec2( -1.04, 1.04 ) * a004 + r.zw;\\n\\treturn specularColor * AB.x + AB.y;\\n}\\nfloat G_BlinnPhong_Implicit( ) {\\n\\treturn 0.25;\\n}\\nfloat D_BlinnPhong( const in float shininess, const in float dotNH ) {\\n\\treturn RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );\\n}\\nvec3 BRDF_Specular_BlinnPhong( const in IncidentLight incidentLight, const in GeometricContext geometry, const in vec3 specularColor, const in float shininess ) {\\n\\tvec3 halfDir = normalize( incidentLight.direction + geometry.viewDir );\\n\\tfloat dotNH = saturate( dot( geometry.normal, halfDir ) );\\n\\tfloat dotLH = saturate( dot( incidentLight.direction, halfDir ) );\\n\\tvec3 F = F_Schlick( specularColor, dotLH );\\n\\tfloat G = G_BlinnPhong_Implicit( );\\n\\tfloat D = D_BlinnPhong( shininess, dotNH );\\n\\treturn F * ( G * D );\\n}\\nfloat GGXRoughnessToBlinnExponent( const in float ggxRoughness ) {\\n\\treturn ( 2.0 / pow2( ggxRoughness + 0.0001 ) - 2.0 );\\n}\\nfloat BlinnExponentToGGXRoughness( const in float blinnExponent ) {\\n\\treturn sqrt( 2.0 / ( blinnExponent + 2.0 ) );\\n}\\n\",\nbumpmap_pars_fragment:\"#ifdef USE_BUMPMAP\\n\\tuniform sampler2D bumpMap;\\n\\tuniform float bumpScale;\\n\\tvec2 dHdxy_fwd() {\\n\\t\\tvec2 dSTdx = dFdx( vUv );\\n\\t\\tvec2 dSTdy = dFdy( vUv );\\n\\t\\tfloat Hll = bumpScale * texture2D( bumpMap, vUv ).x;\\n\\t\\tfloat dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;\\n\\t\\tfloat dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;\\n\\t\\treturn vec2( dBx, dBy );\\n\\t}\\n\\tvec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy ) {\\n\\t\\tvec3 vSigmaX = vec3( dFdx( surf_pos.x ), dFdx( surf_pos.y ), dFdx( surf_pos.z ) );\\n\\t\\tvec3 vSigmaY = vec3( dFdy( surf_pos.x ), dFdy( surf_pos.y ), dFdy( surf_pos.z ) );\\n\\t\\tvec3 vN = surf_norm;\\n\\t\\tvec3 R1 = cross( vSigmaY, vN );\\n\\t\\tvec3 R2 = cross( vN, vSigmaX );\\n\\t\\tfloat fDet = dot( vSigmaX, R1 );\\n\\t\\tvec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\\n\\t\\treturn normalize( abs( fDet ) * surf_norm - vGrad );\\n\\t}\\n#endif\\n\",\nclipping_planes_fragment:\"#if NUM_CLIPPING_PLANES > 0\\n\\tfor ( int i = 0; i < UNION_CLIPPING_PLANES; ++ i ) {\\n\\t\\tvec4 plane = clippingPlanes[ i ];\\n\\t\\tif ( dot( vViewPosition, plane.xyz ) > plane.w ) discard;\\n\\t}\\n\\t\\t\\n\\t#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES\\n\\t\\tbool clipped = true;\\n\\t\\tfor ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; ++ i ) {\\n\\t\\t\\tvec4 plane = clippingPlanes[ i ];\\n\\t\\t\\tclipped = ( dot( vViewPosition, plane.xyz ) > plane.w ) && clipped;\\n\\t\\t}\\n\\t\\tif ( clipped ) discard;\\n\\t\\n\\t#endif\\n#endif\\n\",\nclipping_planes_pars_fragment:\"#if NUM_CLIPPING_PLANES > 0\\n\\t#if ! defined( PHYSICAL ) && ! defined( PHONG )\\n\\t\\tvarying vec3 vViewPosition;\\n\\t#endif\\n\\tuniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];\\n#endif\\n\",clipping_planes_pars_vertex:\"#if NUM_CLIPPING_PLANES > 0 && ! defined( PHYSICAL ) && ! defined( PHONG )\\n\\tvarying vec3 vViewPosition;\\n#endif\\n\",clipping_planes_vertex:\"#if NUM_CLIPPING_PLANES > 0 && ! defined( PHYSICAL ) && ! defined( PHONG )\\n\\tvViewPosition = - mvPosition.xyz;\\n#endif\\n\",\ncolor_fragment:\"#ifdef USE_COLOR\\n\\tdiffuseColor.rgb *= vColor;\\n#endif\",color_pars_fragment:\"#ifdef USE_COLOR\\n\\tvarying vec3 vColor;\\n#endif\\n\",color_pars_vertex:\"#ifdef USE_COLOR\\n\\tvarying vec3 vColor;\\n#endif\",color_vertex:\"#ifdef USE_COLOR\\n\\tvColor.xyz = color.xyz;\\n#endif\",common:\"#define PI 3.14159265359\\n#define PI2 6.28318530718\\n#define PI_HALF 1.5707963267949\\n#define RECIPROCAL_PI 0.31830988618\\n#define RECIPROCAL_PI2 0.15915494\\n#define LOG2 1.442695\\n#define EPSILON 1e-6\\n#define saturate(a) clamp( a, 0.0, 1.0 )\\n#define whiteCompliment(a) ( 1.0 - saturate( a ) )\\nfloat pow2( const in float x ) { return x*x; }\\nfloat pow3( const in float x ) { return x*x*x; }\\nfloat pow4( const in float x ) { float x2 = x*x; return x2*x2; }\\nfloat average( const in vec3 color ) { return dot( color, vec3( 0.3333 ) ); }\\nhighp float rand( const in vec2 uv ) {\\n\\tconst highp float a = 12.9898, b = 78.233, c = 43758.5453;\\n\\thighp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );\\n\\treturn fract(sin(sn) * c);\\n}\\nstruct IncidentLight {\\n\\tvec3 color;\\n\\tvec3 direction;\\n\\tbool visible;\\n};\\nstruct ReflectedLight {\\n\\tvec3 directDiffuse;\\n\\tvec3 directSpecular;\\n\\tvec3 indirectDiffuse;\\n\\tvec3 indirectSpecular;\\n};\\nstruct GeometricContext {\\n\\tvec3 position;\\n\\tvec3 normal;\\n\\tvec3 viewDir;\\n};\\nvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\\n\\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\\n}\\nvec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {\\n\\treturn normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );\\n}\\nvec3 projectOnPlane(in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {\\n\\tfloat distance = dot( planeNormal, point - pointOnPlane );\\n\\treturn - distance * planeNormal + point;\\n}\\nfloat sideOfPlane( in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {\\n\\treturn sign( dot( point - pointOnPlane, planeNormal ) );\\n}\\nvec3 linePlaneIntersect( in vec3 pointOnLine, in vec3 lineDirection, in vec3 pointOnPlane, in vec3 planeNormal ) {\\n\\treturn lineDirection * ( dot( planeNormal, pointOnPlane - pointOnLine ) / dot( planeNormal, lineDirection ) ) + pointOnLine;\\n}\\nmat3 transpose( const in mat3 v ) {\\n\\tmat3 tmp;\\n\\ttmp[0] = vec3(v[0].x, v[1].x, v[2].x);\\n\\ttmp[1] = vec3(v[0].y, v[1].y, v[2].y);\\n\\ttmp[2] = vec3(v[0].z, v[1].z, v[2].z);\\n\\treturn tmp;\\n}\\n\",\ncube_uv_reflection_fragment:\"#ifdef ENVMAP_TYPE_CUBE_UV\\n#define cubeUV_textureSize (1024.0)\\nint getFaceFromDirection(vec3 direction) {\\n\\tvec3 absDirection = abs(direction);\\n\\tint face = -1;\\n\\tif( absDirection.x > absDirection.z ) {\\n\\t\\tif(absDirection.x > absDirection.y )\\n\\t\\t\\tface = direction.x > 0.0 ? 0 : 3;\\n\\t\\telse\\n\\t\\t\\tface = direction.y > 0.0 ? 1 : 4;\\n\\t}\\n\\telse {\\n\\t\\tif(absDirection.z > absDirection.y )\\n\\t\\t\\tface = direction.z > 0.0 ? 2 : 5;\\n\\t\\telse\\n\\t\\t\\tface = direction.y > 0.0 ? 1 : 4;\\n\\t}\\n\\treturn face;\\n}\\n#define cubeUV_maxLods1  (log2(cubeUV_textureSize*0.25) - 1.0)\\n#define cubeUV_rangeClamp (exp2((6.0 - 1.0) * 2.0))\\nvec2 MipLevelInfo( vec3 vec, float roughnessLevel, float roughness ) {\\n\\tfloat scale = exp2(cubeUV_maxLods1 - roughnessLevel);\\n\\tfloat dxRoughness = dFdx(roughness);\\n\\tfloat dyRoughness = dFdy(roughness);\\n\\tvec3 dx = dFdx( vec * scale * dxRoughness );\\n\\tvec3 dy = dFdy( vec * scale * dyRoughness );\\n\\tfloat d = max( dot( dx, dx ), dot( dy, dy ) );\\n\\td = clamp(d, 1.0, cubeUV_rangeClamp);\\n\\tfloat mipLevel = 0.5 * log2(d);\\n\\treturn vec2(floor(mipLevel), fract(mipLevel));\\n}\\n#define cubeUV_maxLods2 (log2(cubeUV_textureSize*0.25) - 2.0)\\n#define cubeUV_rcpTextureSize (1.0 / cubeUV_textureSize)\\nvec2 getCubeUV(vec3 direction, float roughnessLevel, float mipLevel) {\\n\\tmipLevel = roughnessLevel > cubeUV_maxLods2 - 3.0 ? 0.0 : mipLevel;\\n\\tfloat a = 16.0 * cubeUV_rcpTextureSize;\\n\\tvec2 exp2_packed = exp2( vec2( roughnessLevel, mipLevel ) );\\n\\tvec2 rcp_exp2_packed = vec2( 1.0 ) / exp2_packed;\\n\\tfloat powScale = exp2_packed.x * exp2_packed.y;\\n\\tfloat scale = rcp_exp2_packed.x * rcp_exp2_packed.y * 0.25;\\n\\tfloat mipOffset = 0.75*(1.0 - rcp_exp2_packed.y) * rcp_exp2_packed.x;\\n\\tbool bRes = mipLevel == 0.0;\\n\\tscale =  bRes && (scale < a) ? a : scale;\\n\\tvec3 r;\\n\\tvec2 offset;\\n\\tint face = getFaceFromDirection(direction);\\n\\tfloat rcpPowScale = 1.0 / powScale;\\n\\tif( face == 0) {\\n\\t\\tr = vec3(direction.x, -direction.z, direction.y);\\n\\t\\toffset = vec2(0.0+mipOffset,0.75 * rcpPowScale);\\n\\t\\toffset.y = bRes && (offset.y < 2.0*a) ? a : offset.y;\\n\\t}\\n\\telse if( face == 1) {\\n\\t\\tr = vec3(direction.y, direction.x, direction.z);\\n\\t\\toffset = vec2(scale+mipOffset, 0.75 * rcpPowScale);\\n\\t\\toffset.y = bRes && (offset.y < 2.0*a) ? a : offset.y;\\n\\t}\\n\\telse if( face == 2) {\\n\\t\\tr = vec3(direction.z, direction.x, direction.y);\\n\\t\\toffset = vec2(2.0*scale+mipOffset, 0.75 * rcpPowScale);\\n\\t\\toffset.y = bRes && (offset.y < 2.0*a) ? a : offset.y;\\n\\t}\\n\\telse if( face == 3) {\\n\\t\\tr = vec3(direction.x, direction.z, direction.y);\\n\\t\\toffset = vec2(0.0+mipOffset,0.5 * rcpPowScale);\\n\\t\\toffset.y = bRes && (offset.y < 2.0*a) ? 0.0 : offset.y;\\n\\t}\\n\\telse if( face == 4) {\\n\\t\\tr = vec3(direction.y, direction.x, -direction.z);\\n\\t\\toffset = vec2(scale+mipOffset, 0.5 * rcpPowScale);\\n\\t\\toffset.y = bRes && (offset.y < 2.0*a) ? 0.0 : offset.y;\\n\\t}\\n\\telse {\\n\\t\\tr = vec3(direction.z, -direction.x, direction.y);\\n\\t\\toffset = vec2(2.0*scale+mipOffset, 0.5 * rcpPowScale);\\n\\t\\toffset.y = bRes && (offset.y < 2.0*a) ? 0.0 : offset.y;\\n\\t}\\n\\tr = normalize(r);\\n\\tfloat texelOffset = 0.5 * cubeUV_rcpTextureSize;\\n\\tvec2 s = ( r.yz / abs( r.x ) + vec2( 1.0 ) ) * 0.5;\\n\\tvec2 base = offset + vec2( texelOffset );\\n\\treturn base + s * ( scale - 2.0 * texelOffset );\\n}\\n#define cubeUV_maxLods3 (log2(cubeUV_textureSize*0.25) - 3.0)\\nvec4 textureCubeUV(vec3 reflectedDirection, float roughness ) {\\n\\tfloat roughnessVal = roughness* cubeUV_maxLods3;\\n\\tfloat r1 = floor(roughnessVal);\\n\\tfloat r2 = r1 + 1.0;\\n\\tfloat t = fract(roughnessVal);\\n\\tvec2 mipInfo = MipLevelInfo(reflectedDirection, r1, roughness);\\n\\tfloat s = mipInfo.y;\\n\\tfloat level0 = mipInfo.x;\\n\\tfloat level1 = level0 + 1.0;\\n\\tlevel1 = level1 > 5.0 ? 5.0 : level1;\\n\\tlevel0 += min( floor( s + 0.5 ), 5.0 );\\n\\tvec2 uv_10 = getCubeUV(reflectedDirection, r1, level0);\\n\\tvec4 color10 = envMapTexelToLinear(texture2D(envMap, uv_10));\\n\\tvec2 uv_20 = getCubeUV(reflectedDirection, r2, level0);\\n\\tvec4 color20 = envMapTexelToLinear(texture2D(envMap, uv_20));\\n\\tvec4 result = mix(color10, color20, t);\\n\\treturn vec4(result.rgb, 1.0);\\n}\\n#endif\\n\",\ndefaultnormal_vertex:\"vec3 transformedNormal = normalMatrix * objectNormal;\\n#ifdef FLIP_SIDED\\n\\ttransformedNormal = - transformedNormal;\\n#endif\\n\",displacementmap_pars_vertex:\"#ifdef USE_DISPLACEMENTMAP\\n\\tuniform sampler2D displacementMap;\\n\\tuniform float displacementScale;\\n\\tuniform float displacementBias;\\n#endif\\n\",displacementmap_vertex:\"#ifdef USE_DISPLACEMENTMAP\\n\\ttransformed += normalize( objectNormal ) * ( texture2D( displacementMap, uv ).x * displacementScale + displacementBias );\\n#endif\\n\",\nemissivemap_fragment:\"#ifdef USE_EMISSIVEMAP\\n\\tvec4 emissiveColor = texture2D( emissiveMap, vUv );\\n\\temissiveColor.rgb = emissiveMapTexelToLinear( emissiveColor ).rgb;\\n\\ttotalEmissiveRadiance *= emissiveColor.rgb;\\n#endif\\n\",emissivemap_pars_fragment:\"#ifdef USE_EMISSIVEMAP\\n\\tuniform sampler2D emissiveMap;\\n#endif\\n\",encodings_fragment:\"  gl_FragColor = linearToOutputTexel( gl_FragColor );\\n\",encodings_pars_fragment:\"\\nvec4 LinearToLinear( in vec4 value ) {\\n\\treturn value;\\n}\\nvec4 GammaToLinear( in vec4 value, in float gammaFactor ) {\\n\\treturn vec4( pow( value.xyz, vec3( gammaFactor ) ), value.w );\\n}\\nvec4 LinearToGamma( in vec4 value, in float gammaFactor ) {\\n\\treturn vec4( pow( value.xyz, vec3( 1.0 / gammaFactor ) ), value.w );\\n}\\nvec4 sRGBToLinear( in vec4 value ) {\\n\\treturn vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.w );\\n}\\nvec4 LinearTosRGB( in vec4 value ) {\\n\\treturn vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.w );\\n}\\nvec4 RGBEToLinear( in vec4 value ) {\\n\\treturn vec4( value.rgb * exp2( value.a * 255.0 - 128.0 ), 1.0 );\\n}\\nvec4 LinearToRGBE( in vec4 value ) {\\n\\tfloat maxComponent = max( max( value.r, value.g ), value.b );\\n\\tfloat fExp = clamp( ceil( log2( maxComponent ) ), -128.0, 127.0 );\\n\\treturn vec4( value.rgb / exp2( fExp ), ( fExp + 128.0 ) / 255.0 );\\n}\\nvec4 RGBMToLinear( in vec4 value, in float maxRange ) {\\n\\treturn vec4( value.xyz * value.w * maxRange, 1.0 );\\n}\\nvec4 LinearToRGBM( in vec4 value, in float maxRange ) {\\n\\tfloat maxRGB = max( value.x, max( value.g, value.b ) );\\n\\tfloat M      = clamp( maxRGB / maxRange, 0.0, 1.0 );\\n\\tM            = ceil( M * 255.0 ) / 255.0;\\n\\treturn vec4( value.rgb / ( M * maxRange ), M );\\n}\\nvec4 RGBDToLinear( in vec4 value, in float maxRange ) {\\n\\treturn vec4( value.rgb * ( ( maxRange / 255.0 ) / value.a ), 1.0 );\\n}\\nvec4 LinearToRGBD( in vec4 value, in float maxRange ) {\\n\\tfloat maxRGB = max( value.x, max( value.g, value.b ) );\\n\\tfloat D      = max( maxRange / maxRGB, 1.0 );\\n\\tD            = min( floor( D ) / 255.0, 1.0 );\\n\\treturn vec4( value.rgb * ( D * ( 255.0 / maxRange ) ), D );\\n}\\nconst mat3 cLogLuvM = mat3( 0.2209, 0.3390, 0.4184, 0.1138, 0.6780, 0.7319, 0.0102, 0.1130, 0.2969 );\\nvec4 LinearToLogLuv( in vec4 value )  {\\n\\tvec3 Xp_Y_XYZp = value.rgb * cLogLuvM;\\n\\tXp_Y_XYZp = max(Xp_Y_XYZp, vec3(1e-6, 1e-6, 1e-6));\\n\\tvec4 vResult;\\n\\tvResult.xy = Xp_Y_XYZp.xy / Xp_Y_XYZp.z;\\n\\tfloat Le = 2.0 * log2(Xp_Y_XYZp.y) + 127.0;\\n\\tvResult.w = fract(Le);\\n\\tvResult.z = (Le - (floor(vResult.w*255.0))/255.0)/255.0;\\n\\treturn vResult;\\n}\\nconst mat3 cLogLuvInverseM = mat3( 6.0014, -2.7008, -1.7996, -1.3320, 3.1029, -5.7721, 0.3008, -1.0882, 5.6268 );\\nvec4 LogLuvToLinear( in vec4 value ) {\\n\\tfloat Le = value.z * 255.0 + value.w;\\n\\tvec3 Xp_Y_XYZp;\\n\\tXp_Y_XYZp.y = exp2((Le - 127.0) / 2.0);\\n\\tXp_Y_XYZp.z = Xp_Y_XYZp.y / value.y;\\n\\tXp_Y_XYZp.x = value.x * Xp_Y_XYZp.z;\\n\\tvec3 vRGB = Xp_Y_XYZp.rgb * cLogLuvInverseM;\\n\\treturn vec4( max(vRGB, 0.0), 1.0 );\\n}\\n\",\nenvmap_fragment:\"#ifdef USE_ENVMAP\\n\\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\\n\\t\\tvec3 cameraToVertex = normalize( vWorldPosition - cameraPosition );\\n\\t\\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\\n\\t\\t#ifdef ENVMAP_MODE_REFLECTION\\n\\t\\t\\tvec3 reflectVec = reflect( cameraToVertex, worldNormal );\\n\\t\\t#else\\n\\t\\t\\tvec3 reflectVec = refract( cameraToVertex, worldNormal, refractionRatio );\\n\\t\\t#endif\\n\\t#else\\n\\t\\tvec3 reflectVec = vReflect;\\n\\t#endif\\n\\t#ifdef ENVMAP_TYPE_CUBE\\n\\t\\tvec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\\n\\t#elif defined( ENVMAP_TYPE_EQUIREC )\\n\\t\\tvec2 sampleUV;\\n\\t\\treflectVec = normalize( reflectVec );\\n\\t\\tsampleUV.y = asin( clamp( reflectVec.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\\n\\t\\tsampleUV.x = atan( reflectVec.z, reflectVec.x ) * RECIPROCAL_PI2 + 0.5;\\n\\t\\tvec4 envColor = texture2D( envMap, sampleUV );\\n\\t#elif defined( ENVMAP_TYPE_SPHERE )\\n\\t\\treflectVec = normalize( reflectVec );\\n\\t\\tvec3 reflectView = normalize( ( viewMatrix * vec4( reflectVec, 0.0 ) ).xyz + vec3( 0.0, 0.0, 1.0 ) );\\n\\t\\tvec4 envColor = texture2D( envMap, reflectView.xy * 0.5 + 0.5 );\\n\\t#else\\n\\t\\tvec4 envColor = vec4( 0.0 );\\n\\t#endif\\n\\tenvColor = envMapTexelToLinear( envColor );\\n\\t#ifdef ENVMAP_BLENDING_MULTIPLY\\n\\t\\toutgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );\\n\\t#elif defined( ENVMAP_BLENDING_MIX )\\n\\t\\toutgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );\\n\\t#elif defined( ENVMAP_BLENDING_ADD )\\n\\t\\toutgoingLight += envColor.xyz * specularStrength * reflectivity;\\n\\t#endif\\n#endif\\n\",\nenvmap_pars_fragment:\"#if defined( USE_ENVMAP ) || defined( PHYSICAL )\\n\\tuniform float reflectivity;\\n\\tuniform float envMapIntensity;\\n#endif\\n#ifdef USE_ENVMAP\\n\\t#if ! defined( PHYSICAL ) && ( defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) )\\n\\t\\tvarying vec3 vWorldPosition;\\n\\t#endif\\n\\t#ifdef ENVMAP_TYPE_CUBE\\n\\t\\tuniform samplerCube envMap;\\n\\t#else\\n\\t\\tuniform sampler2D envMap;\\n\\t#endif\\n\\tuniform float flipEnvMap;\\n\\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( PHYSICAL )\\n\\t\\tuniform float refractionRatio;\\n\\t#else\\n\\t\\tvarying vec3 vReflect;\\n\\t#endif\\n#endif\\n\",\nenvmap_pars_vertex:\"#ifdef USE_ENVMAP\\n\\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\\n\\t\\tvarying vec3 vWorldPosition;\\n\\t#else\\n\\t\\tvarying vec3 vReflect;\\n\\t\\tuniform float refractionRatio;\\n\\t#endif\\n#endif\\n\",envmap_vertex:\"#ifdef USE_ENVMAP\\n\\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\\n\\t\\tvWorldPosition = worldPosition.xyz;\\n\\t#else\\n\\t\\tvec3 cameraToVertex = normalize( worldPosition.xyz - cameraPosition );\\n\\t\\tvec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\\n\\t\\t#ifdef ENVMAP_MODE_REFLECTION\\n\\t\\t\\tvReflect = reflect( cameraToVertex, worldNormal );\\n\\t\\t#else\\n\\t\\t\\tvReflect = refract( cameraToVertex, worldNormal, refractionRatio );\\n\\t\\t#endif\\n\\t#endif\\n#endif\\n\",\nfog_vertex:\"\\n#ifdef USE_FOG\\nfogDepth = -mvPosition.z;\\n#endif\",fog_pars_vertex:\"#ifdef USE_FOG\\n  varying float fogDepth;\\n#endif\\n\",fog_fragment:\"#ifdef USE_FOG\\n\\t#ifdef FOG_EXP2\\n\\t\\tfloat fogFactor = whiteCompliment( exp2( - fogDensity * fogDensity * fogDepth * fogDepth * LOG2 ) );\\n\\t#else\\n\\t\\tfloat fogFactor = smoothstep( fogNear, fogFar, fogDepth );\\n\\t#endif\\n\\tgl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );\\n#endif\\n\",fog_pars_fragment:\"#ifdef USE_FOG\\n\\tuniform vec3 fogColor;\\n\\tvarying float fogDepth;\\n\\t#ifdef FOG_EXP2\\n\\t\\tuniform float fogDensity;\\n\\t#else\\n\\t\\tuniform float fogNear;\\n\\t\\tuniform float fogFar;\\n\\t#endif\\n#endif\\n\",\ngradientmap_pars_fragment:\"#ifdef TOON\\n\\tuniform sampler2D gradientMap;\\n\\tvec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {\\n\\t\\tfloat dotNL = dot( normal, lightDirection );\\n\\t\\tvec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );\\n\\t\\t#ifdef USE_GRADIENTMAP\\n\\t\\t\\treturn texture2D( gradientMap, coord ).rgb;\\n\\t\\t#else\\n\\t\\t\\treturn ( coord.x < 0.7 ) ? vec3( 0.7 ) : vec3( 1.0 );\\n\\t\\t#endif\\n\\t}\\n#endif\\n\",lightmap_fragment:\"#ifdef USE_LIGHTMAP\\n\\treflectedLight.indirectDiffuse += PI * texture2D( lightMap, vUv2 ).xyz * lightMapIntensity;\\n#endif\\n\",\nlightmap_pars_fragment:\"#ifdef USE_LIGHTMAP\\n\\tuniform sampler2D lightMap;\\n\\tuniform float lightMapIntensity;\\n#endif\",lights_lambert_vertex:\"vec3 diffuse = vec3( 1.0 );\\nGeometricContext geometry;\\ngeometry.position = mvPosition.xyz;\\ngeometry.normal = normalize( transformedNormal );\\ngeometry.viewDir = normalize( -mvPosition.xyz );\\nGeometricContext backGeometry;\\nbackGeometry.position = geometry.position;\\nbackGeometry.normal = -geometry.normal;\\nbackGeometry.viewDir = geometry.viewDir;\\nvLightFront = vec3( 0.0 );\\n#ifdef DOUBLE_SIDED\\n\\tvLightBack = vec3( 0.0 );\\n#endif\\nIncidentLight directLight;\\nfloat dotNL;\\nvec3 directLightColor_Diffuse;\\n#if NUM_POINT_LIGHTS > 0\\n\\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\\n\\t\\tgetPointDirectLightIrradiance( pointLights[ i ], geometry, directLight );\\n\\t\\tdotNL = dot( geometry.normal, directLight.direction );\\n\\t\\tdirectLightColor_Diffuse = PI * directLight.color;\\n\\t\\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\\n\\t\\t#ifdef DOUBLE_SIDED\\n\\t\\t\\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\\n\\t\\t#endif\\n\\t}\\n#endif\\n#if NUM_SPOT_LIGHTS > 0\\n\\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\\n\\t\\tgetSpotDirectLightIrradiance( spotLights[ i ], geometry, directLight );\\n\\t\\tdotNL = dot( geometry.normal, directLight.direction );\\n\\t\\tdirectLightColor_Diffuse = PI * directLight.color;\\n\\t\\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\\n\\t\\t#ifdef DOUBLE_SIDED\\n\\t\\t\\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\\n\\t\\t#endif\\n\\t}\\n#endif\\n#if NUM_DIR_LIGHTS > 0\\n\\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\\n\\t\\tgetDirectionalDirectLightIrradiance( directionalLights[ i ], geometry, directLight );\\n\\t\\tdotNL = dot( geometry.normal, directLight.direction );\\n\\t\\tdirectLightColor_Diffuse = PI * directLight.color;\\n\\t\\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\\n\\t\\t#ifdef DOUBLE_SIDED\\n\\t\\t\\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\\n\\t\\t#endif\\n\\t}\\n#endif\\n#if NUM_HEMI_LIGHTS > 0\\n\\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\\n\\t\\tvLightFront += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );\\n\\t\\t#ifdef DOUBLE_SIDED\\n\\t\\t\\tvLightBack += getHemisphereLightIrradiance( hemisphereLights[ i ], backGeometry );\\n\\t\\t#endif\\n\\t}\\n#endif\\n\",\nlights_pars:\"uniform vec3 ambientLightColor;\\nvec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {\\n\\tvec3 irradiance = ambientLightColor;\\n\\t#ifndef PHYSICALLY_CORRECT_LIGHTS\\n\\t\\tirradiance *= PI;\\n\\t#endif\\n\\treturn irradiance;\\n}\\n#if NUM_DIR_LIGHTS > 0\\n\\tstruct DirectionalLight {\\n\\t\\tvec3 direction;\\n\\t\\tvec3 color;\\n\\t\\tint shadow;\\n\\t\\tfloat shadowBias;\\n\\t\\tfloat shadowRadius;\\n\\t\\tvec2 shadowMapSize;\\n\\t};\\n\\tuniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];\\n\\tvoid getDirectionalDirectLightIrradiance( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight directLight ) {\\n\\t\\tdirectLight.color = directionalLight.color;\\n\\t\\tdirectLight.direction = directionalLight.direction;\\n\\t\\tdirectLight.visible = true;\\n\\t}\\n#endif\\n#if NUM_POINT_LIGHTS > 0\\n\\tstruct PointLight {\\n\\t\\tvec3 position;\\n\\t\\tvec3 color;\\n\\t\\tfloat distance;\\n\\t\\tfloat decay;\\n\\t\\tint shadow;\\n\\t\\tfloat shadowBias;\\n\\t\\tfloat shadowRadius;\\n\\t\\tvec2 shadowMapSize;\\n\\t\\tfloat shadowCameraNear;\\n\\t\\tfloat shadowCameraFar;\\n\\t};\\n\\tuniform PointLight pointLights[ NUM_POINT_LIGHTS ];\\n\\tvoid getPointDirectLightIrradiance( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight directLight ) {\\n\\t\\tvec3 lVector = pointLight.position - geometry.position;\\n\\t\\tdirectLight.direction = normalize( lVector );\\n\\t\\tfloat lightDistance = length( lVector );\\n\\t\\tdirectLight.color = pointLight.color;\\n\\t\\tdirectLight.color *= punctualLightIntensityToIrradianceFactor( lightDistance, pointLight.distance, pointLight.decay );\\n\\t\\tdirectLight.visible = ( directLight.color != vec3( 0.0 ) );\\n\\t}\\n#endif\\n#if NUM_SPOT_LIGHTS > 0\\n\\tstruct SpotLight {\\n\\t\\tvec3 position;\\n\\t\\tvec3 direction;\\n\\t\\tvec3 color;\\n\\t\\tfloat distance;\\n\\t\\tfloat decay;\\n\\t\\tfloat coneCos;\\n\\t\\tfloat penumbraCos;\\n\\t\\tint shadow;\\n\\t\\tfloat shadowBias;\\n\\t\\tfloat shadowRadius;\\n\\t\\tvec2 shadowMapSize;\\n\\t};\\n\\tuniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];\\n\\tvoid getSpotDirectLightIrradiance( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight directLight  ) {\\n\\t\\tvec3 lVector = spotLight.position - geometry.position;\\n\\t\\tdirectLight.direction = normalize( lVector );\\n\\t\\tfloat lightDistance = length( lVector );\\n\\t\\tfloat angleCos = dot( directLight.direction, spotLight.direction );\\n\\t\\tif ( angleCos > spotLight.coneCos ) {\\n\\t\\t\\tfloat spotEffect = smoothstep( spotLight.coneCos, spotLight.penumbraCos, angleCos );\\n\\t\\t\\tdirectLight.color = spotLight.color;\\n\\t\\t\\tdirectLight.color *= spotEffect * punctualLightIntensityToIrradianceFactor( lightDistance, spotLight.distance, spotLight.decay );\\n\\t\\t\\tdirectLight.visible = true;\\n\\t\\t} else {\\n\\t\\t\\tdirectLight.color = vec3( 0.0 );\\n\\t\\t\\tdirectLight.visible = false;\\n\\t\\t}\\n\\t}\\n#endif\\n#if NUM_RECT_AREA_LIGHTS > 0\\n\\tstruct RectAreaLight {\\n\\t\\tvec3 color;\\n\\t\\tvec3 position;\\n\\t\\tvec3 halfWidth;\\n\\t\\tvec3 halfHeight;\\n\\t};\\n\\tuniform sampler2D ltcMat;\\tuniform sampler2D ltcMag;\\n\\tuniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];\\n#endif\\n#if NUM_HEMI_LIGHTS > 0\\n\\tstruct HemisphereLight {\\n\\t\\tvec3 direction;\\n\\t\\tvec3 skyColor;\\n\\t\\tvec3 groundColor;\\n\\t};\\n\\tuniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];\\n\\tvec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in GeometricContext geometry ) {\\n\\t\\tfloat dotNL = dot( geometry.normal, hemiLight.direction );\\n\\t\\tfloat hemiDiffuseWeight = 0.5 * dotNL + 0.5;\\n\\t\\tvec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );\\n\\t\\t#ifndef PHYSICALLY_CORRECT_LIGHTS\\n\\t\\t\\tirradiance *= PI;\\n\\t\\t#endif\\n\\t\\treturn irradiance;\\n\\t}\\n#endif\\n#if defined( USE_ENVMAP ) && defined( PHYSICAL )\\n\\tvec3 getLightProbeIndirectIrradiance( const in GeometricContext geometry, const in int maxMIPLevel ) {\\n\\t\\tvec3 worldNormal = inverseTransformDirection( geometry.normal, viewMatrix );\\n\\t\\t#ifdef ENVMAP_TYPE_CUBE\\n\\t\\t\\tvec3 queryVec = vec3( flipEnvMap * worldNormal.x, worldNormal.yz );\\n\\t\\t\\t#ifdef TEXTURE_LOD_EXT\\n\\t\\t\\t\\tvec4 envMapColor = textureCubeLodEXT( envMap, queryVec, float( maxMIPLevel ) );\\n\\t\\t\\t#else\\n\\t\\t\\t\\tvec4 envMapColor = textureCube( envMap, queryVec, float( maxMIPLevel ) );\\n\\t\\t\\t#endif\\n\\t\\t\\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\\n\\t\\t#elif defined( ENVMAP_TYPE_CUBE_UV )\\n\\t\\t\\tvec3 queryVec = vec3( flipEnvMap * worldNormal.x, worldNormal.yz );\\n\\t\\t\\tvec4 envMapColor = textureCubeUV( queryVec, 1.0 );\\n\\t\\t#else\\n\\t\\t\\tvec4 envMapColor = vec4( 0.0 );\\n\\t\\t#endif\\n\\t\\treturn PI * envMapColor.rgb * envMapIntensity;\\n\\t}\\n\\tfloat getSpecularMIPLevel( const in float blinnShininessExponent, const in int maxMIPLevel ) {\\n\\t\\tfloat maxMIPLevelScalar = float( maxMIPLevel );\\n\\t\\tfloat desiredMIPLevel = maxMIPLevelScalar - 0.79248 - 0.5 * log2( pow2( blinnShininessExponent ) + 1.0 );\\n\\t\\treturn clamp( desiredMIPLevel, 0.0, maxMIPLevelScalar );\\n\\t}\\n\\tvec3 getLightProbeIndirectRadiance( const in GeometricContext geometry, const in float blinnShininessExponent, const in int maxMIPLevel ) {\\n\\t\\t#ifdef ENVMAP_MODE_REFLECTION\\n\\t\\t\\tvec3 reflectVec = reflect( -geometry.viewDir, geometry.normal );\\n\\t\\t#else\\n\\t\\t\\tvec3 reflectVec = refract( -geometry.viewDir, geometry.normal, refractionRatio );\\n\\t\\t#endif\\n\\t\\treflectVec = inverseTransformDirection( reflectVec, viewMatrix );\\n\\t\\tfloat specularMIPLevel = getSpecularMIPLevel( blinnShininessExponent, maxMIPLevel );\\n\\t\\t#ifdef ENVMAP_TYPE_CUBE\\n\\t\\t\\tvec3 queryReflectVec = vec3( flipEnvMap * reflectVec.x, reflectVec.yz );\\n\\t\\t\\t#ifdef TEXTURE_LOD_EXT\\n\\t\\t\\t\\tvec4 envMapColor = textureCubeLodEXT( envMap, queryReflectVec, specularMIPLevel );\\n\\t\\t\\t#else\\n\\t\\t\\t\\tvec4 envMapColor = textureCube( envMap, queryReflectVec, specularMIPLevel );\\n\\t\\t\\t#endif\\n\\t\\t\\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\\n\\t\\t#elif defined( ENVMAP_TYPE_CUBE_UV )\\n\\t\\t\\tvec3 queryReflectVec = vec3( flipEnvMap * reflectVec.x, reflectVec.yz );\\n\\t\\t\\tvec4 envMapColor = textureCubeUV(queryReflectVec, BlinnExponentToGGXRoughness(blinnShininessExponent));\\n\\t\\t#elif defined( ENVMAP_TYPE_EQUIREC )\\n\\t\\t\\tvec2 sampleUV;\\n\\t\\t\\tsampleUV.y = asin( clamp( reflectVec.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\\n\\t\\t\\tsampleUV.x = atan( reflectVec.z, reflectVec.x ) * RECIPROCAL_PI2 + 0.5;\\n\\t\\t\\t#ifdef TEXTURE_LOD_EXT\\n\\t\\t\\t\\tvec4 envMapColor = texture2DLodEXT( envMap, sampleUV, specularMIPLevel );\\n\\t\\t\\t#else\\n\\t\\t\\t\\tvec4 envMapColor = texture2D( envMap, sampleUV, specularMIPLevel );\\n\\t\\t\\t#endif\\n\\t\\t\\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\\n\\t\\t#elif defined( ENVMAP_TYPE_SPHERE )\\n\\t\\t\\tvec3 reflectView = normalize( ( viewMatrix * vec4( reflectVec, 0.0 ) ).xyz + vec3( 0.0,0.0,1.0 ) );\\n\\t\\t\\t#ifdef TEXTURE_LOD_EXT\\n\\t\\t\\t\\tvec4 envMapColor = texture2DLodEXT( envMap, reflectView.xy * 0.5 + 0.5, specularMIPLevel );\\n\\t\\t\\t#else\\n\\t\\t\\t\\tvec4 envMapColor = texture2D( envMap, reflectView.xy * 0.5 + 0.5, specularMIPLevel );\\n\\t\\t\\t#endif\\n\\t\\t\\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\\n\\t\\t#endif\\n\\t\\treturn envMapColor.rgb * envMapIntensity;\\n\\t}\\n#endif\\n\",\nlights_phong_fragment:\"BlinnPhongMaterial material;\\nmaterial.diffuseColor = diffuseColor.rgb;\\nmaterial.specularColor = specular;\\nmaterial.specularShininess = shininess;\\nmaterial.specularStrength = specularStrength;\\n\",lights_phong_pars_fragment:\"varying vec3 vViewPosition;\\n#ifndef FLAT_SHADED\\n\\tvarying vec3 vNormal;\\n#endif\\nstruct BlinnPhongMaterial {\\n\\tvec3\\tdiffuseColor;\\n\\tvec3\\tspecularColor;\\n\\tfloat\\tspecularShininess;\\n\\tfloat\\tspecularStrength;\\n};\\nvoid RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\\n\\t#ifdef TOON\\n\\t\\tvec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;\\n\\t#else\\n\\t\\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\\n\\t\\tvec3 irradiance = dotNL * directLight.color;\\n\\t#endif\\n\\t#ifndef PHYSICALLY_CORRECT_LIGHTS\\n\\t\\tirradiance *= PI;\\n\\t#endif\\n\\treflectedLight.directDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\\n\\treflectedLight.directSpecular += irradiance * BRDF_Specular_BlinnPhong( directLight, geometry, material.specularColor, material.specularShininess ) * material.specularStrength;\\n}\\nvoid RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\\n\\treflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\\n}\\n#define RE_Direct\\t\\t\\t\\tRE_Direct_BlinnPhong\\n#define RE_IndirectDiffuse\\t\\tRE_IndirectDiffuse_BlinnPhong\\n#define Material_LightProbeLOD( material )\\t(0)\\n\",\nlights_physical_fragment:\"PhysicalMaterial material;\\nmaterial.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );\\nmaterial.specularRoughness = clamp( roughnessFactor, 0.04, 1.0 );\\n#ifdef STANDARD\\n\\tmaterial.specularColor = mix( vec3( DEFAULT_SPECULAR_COEFFICIENT ), diffuseColor.rgb, metalnessFactor );\\n#else\\n\\tmaterial.specularColor = mix( vec3( MAXIMUM_SPECULAR_COEFFICIENT * pow2( reflectivity ) ), diffuseColor.rgb, metalnessFactor );\\n\\tmaterial.clearCoat = saturate( clearCoat );\\tmaterial.clearCoatRoughness = clamp( clearCoatRoughness, 0.04, 1.0 );\\n#endif\\n\",\nlights_physical_pars_fragment:\"struct PhysicalMaterial {\\n\\tvec3\\tdiffuseColor;\\n\\tfloat\\tspecularRoughness;\\n\\tvec3\\tspecularColor;\\n\\t#ifndef STANDARD\\n\\t\\tfloat clearCoat;\\n\\t\\tfloat clearCoatRoughness;\\n\\t#endif\\n};\\n#define MAXIMUM_SPECULAR_COEFFICIENT 0.16\\n#define DEFAULT_SPECULAR_COEFFICIENT 0.04\\nfloat clearCoatDHRApprox( const in float roughness, const in float dotNL ) {\\n\\treturn DEFAULT_SPECULAR_COEFFICIENT + ( 1.0 - DEFAULT_SPECULAR_COEFFICIENT ) * ( pow( 1.0 - dotNL, 5.0 ) * pow( 1.0 - roughness, 2.0 ) );\\n}\\n#if NUM_RECT_AREA_LIGHTS > 0\\n\\tvoid RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\\n\\t\\tvec3 normal = geometry.normal;\\n\\t\\tvec3 viewDir = geometry.viewDir;\\n\\t\\tvec3 position = geometry.position;\\n\\t\\tvec3 lightPos = rectAreaLight.position;\\n\\t\\tvec3 halfWidth = rectAreaLight.halfWidth;\\n\\t\\tvec3 halfHeight = rectAreaLight.halfHeight;\\n\\t\\tvec3 lightColor = rectAreaLight.color;\\n\\t\\tfloat roughness = material.specularRoughness;\\n\\t\\tvec3 rectCoords[ 4 ];\\n\\t\\trectCoords[ 0 ] = lightPos - halfWidth - halfHeight;\\t\\trectCoords[ 1 ] = lightPos + halfWidth - halfHeight;\\n\\t\\trectCoords[ 2 ] = lightPos + halfWidth + halfHeight;\\n\\t\\trectCoords[ 3 ] = lightPos - halfWidth + halfHeight;\\n\\t\\tvec2 uv = LTC_Uv( normal, viewDir, roughness );\\n\\t\\tfloat norm = texture2D( ltcMag, uv ).a;\\n\\t\\tvec4 t = texture2D( ltcMat, uv );\\n\\t\\tmat3 mInv = mat3(\\n\\t\\t\\tvec3(   1,   0, t.y ),\\n\\t\\t\\tvec3(   0, t.z,   0 ),\\n\\t\\t\\tvec3( t.w,   0, t.x )\\n\\t\\t);\\n\\t\\treflectedLight.directSpecular += lightColor * material.specularColor * norm * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );\\n\\t\\treflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1 ), rectCoords );\\n\\t}\\n#endif\\nvoid RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\\n\\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\\n\\tvec3 irradiance = dotNL * directLight.color;\\n\\t#ifndef PHYSICALLY_CORRECT_LIGHTS\\n\\t\\tirradiance *= PI;\\n\\t#endif\\n\\t#ifndef STANDARD\\n\\t\\tfloat clearCoatDHR = material.clearCoat * clearCoatDHRApprox( material.clearCoatRoughness, dotNL );\\n\\t#else\\n\\t\\tfloat clearCoatDHR = 0.0;\\n\\t#endif\\n\\treflectedLight.directSpecular += ( 1.0 - clearCoatDHR ) * irradiance * BRDF_Specular_GGX( directLight, geometry, material.specularColor, material.specularRoughness );\\n\\treflectedLight.directDiffuse += ( 1.0 - clearCoatDHR ) * irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\\n\\t#ifndef STANDARD\\n\\t\\treflectedLight.directSpecular += irradiance * material.clearCoat * BRDF_Specular_GGX( directLight, geometry, vec3( DEFAULT_SPECULAR_COEFFICIENT ), material.clearCoatRoughness );\\n\\t#endif\\n}\\nvoid RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\\n\\treflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\\n}\\nvoid RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 clearCoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\\n\\t#ifndef STANDARD\\n\\t\\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\\n\\t\\tfloat dotNL = dotNV;\\n\\t\\tfloat clearCoatDHR = material.clearCoat * clearCoatDHRApprox( material.clearCoatRoughness, dotNL );\\n\\t#else\\n\\t\\tfloat clearCoatDHR = 0.0;\\n\\t#endif\\n\\treflectedLight.indirectSpecular += ( 1.0 - clearCoatDHR ) * radiance * BRDF_Specular_GGX_Environment( geometry, material.specularColor, material.specularRoughness );\\n\\t#ifndef STANDARD\\n\\t\\treflectedLight.indirectSpecular += clearCoatRadiance * material.clearCoat * BRDF_Specular_GGX_Environment( geometry, vec3( DEFAULT_SPECULAR_COEFFICIENT ), material.clearCoatRoughness );\\n\\t#endif\\n}\\n#define RE_Direct\\t\\t\\t\\tRE_Direct_Physical\\n#define RE_Direct_RectArea\\t\\tRE_Direct_RectArea_Physical\\n#define RE_IndirectDiffuse\\t\\tRE_IndirectDiffuse_Physical\\n#define RE_IndirectSpecular\\t\\tRE_IndirectSpecular_Physical\\n#define Material_BlinnShininessExponent( material )   GGXRoughnessToBlinnExponent( material.specularRoughness )\\n#define Material_ClearCoat_BlinnShininessExponent( material )   GGXRoughnessToBlinnExponent( material.clearCoatRoughness )\\nfloat computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {\\n\\treturn saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );\\n}\\n\",\nlights_template:\"\\nGeometricContext geometry;\\ngeometry.position = - vViewPosition;\\ngeometry.normal = normal;\\ngeometry.viewDir = normalize( vViewPosition );\\nIncidentLight directLight;\\n#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )\\n\\tPointLight pointLight;\\n\\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\\n\\t\\tpointLight = pointLights[ i ];\\n\\t\\tgetPointDirectLightIrradiance( pointLight, geometry, directLight );\\n\\t\\t#ifdef USE_SHADOWMAP\\n\\t\\tdirectLight.color *= all( bvec2( pointLight.shadow, directLight.visible ) ) ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\\n\\t\\t#endif\\n\\t\\tRE_Direct( directLight, geometry, material, reflectedLight );\\n\\t}\\n#endif\\n#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )\\n\\tSpotLight spotLight;\\n\\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\\n\\t\\tspotLight = spotLights[ i ];\\n\\t\\tgetSpotDirectLightIrradiance( spotLight, geometry, directLight );\\n\\t\\t#ifdef USE_SHADOWMAP\\n\\t\\tdirectLight.color *= all( bvec2( spotLight.shadow, directLight.visible ) ) ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\\n\\t\\t#endif\\n\\t\\tRE_Direct( directLight, geometry, material, reflectedLight );\\n\\t}\\n#endif\\n#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )\\n\\tDirectionalLight directionalLight;\\n\\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\\n\\t\\tdirectionalLight = directionalLights[ i ];\\n\\t\\tgetDirectionalDirectLightIrradiance( directionalLight, geometry, directLight );\\n\\t\\t#ifdef USE_SHADOWMAP\\n\\t\\tdirectLight.color *= all( bvec2( directionalLight.shadow, directLight.visible ) ) ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\\n\\t\\t#endif\\n\\t\\tRE_Direct( directLight, geometry, material, reflectedLight );\\n\\t}\\n#endif\\n#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )\\n\\tRectAreaLight rectAreaLight;\\n\\tfor ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {\\n\\t\\trectAreaLight = rectAreaLights[ i ];\\n\\t\\tRE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );\\n\\t}\\n#endif\\n#if defined( RE_IndirectDiffuse )\\n\\tvec3 irradiance = getAmbientLightIrradiance( ambientLightColor );\\n\\t#ifdef USE_LIGHTMAP\\n\\t\\tvec3 lightMapIrradiance = texture2D( lightMap, vUv2 ).xyz * lightMapIntensity;\\n\\t\\t#ifndef PHYSICALLY_CORRECT_LIGHTS\\n\\t\\t\\tlightMapIrradiance *= PI;\\n\\t\\t#endif\\n\\t\\tirradiance += lightMapIrradiance;\\n\\t#endif\\n\\t#if ( NUM_HEMI_LIGHTS > 0 )\\n\\t\\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\\n\\t\\t\\tirradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );\\n\\t\\t}\\n\\t#endif\\n\\t#if defined( USE_ENVMAP ) && defined( PHYSICAL ) && defined( ENVMAP_TYPE_CUBE_UV )\\n\\t\\tirradiance += getLightProbeIndirectIrradiance( geometry, 8 );\\n\\t#endif\\n\\tRE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );\\n#endif\\n#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )\\n\\tvec3 radiance = getLightProbeIndirectRadiance( geometry, Material_BlinnShininessExponent( material ), 8 );\\n\\t#ifndef STANDARD\\n\\t\\tvec3 clearCoatRadiance = getLightProbeIndirectRadiance( geometry, Material_ClearCoat_BlinnShininessExponent( material ), 8 );\\n\\t#else\\n\\t\\tvec3 clearCoatRadiance = vec3( 0.0 );\\n\\t#endif\\n\\tRE_IndirectSpecular( radiance, clearCoatRadiance, geometry, material, reflectedLight );\\n#endif\\n\",\nlogdepthbuf_fragment:\"#if defined(USE_LOGDEPTHBUF) && defined(USE_LOGDEPTHBUF_EXT)\\n\\tgl_FragDepthEXT = log2(vFragDepth) * logDepthBufFC * 0.5;\\n#endif\",logdepthbuf_pars_fragment:\"#ifdef USE_LOGDEPTHBUF\\n\\tuniform float logDepthBufFC;\\n\\t#ifdef USE_LOGDEPTHBUF_EXT\\n\\t\\tvarying float vFragDepth;\\n\\t#endif\\n#endif\\n\",logdepthbuf_pars_vertex:\"#ifdef USE_LOGDEPTHBUF\\n\\t#ifdef USE_LOGDEPTHBUF_EXT\\n\\t\\tvarying float vFragDepth;\\n\\t#endif\\n\\tuniform float logDepthBufFC;\\n#endif\",logdepthbuf_vertex:\"#ifdef USE_LOGDEPTHBUF\\n\\tgl_Position.z = log2(max( EPSILON, gl_Position.w + 1.0 )) * logDepthBufFC;\\n\\t#ifdef USE_LOGDEPTHBUF_EXT\\n\\t\\tvFragDepth = 1.0 + gl_Position.w;\\n\\t#else\\n\\t\\tgl_Position.z = (gl_Position.z - 1.0) * gl_Position.w;\\n\\t#endif\\n#endif\\n\",\nmap_fragment:\"#ifdef USE_MAP\\n\\tvec4 texelColor = texture2D( map, vUv );\\n\\ttexelColor = mapTexelToLinear( texelColor );\\n\\tdiffuseColor *= texelColor;\\n#endif\\n\",map_pars_fragment:\"#ifdef USE_MAP\\n\\tuniform sampler2D map;\\n#endif\\n\",map_particle_fragment:\"#ifdef USE_MAP\\n\\tvec4 mapTexel = texture2D( map, vec2( gl_PointCoord.x, 1.0 - gl_PointCoord.y ) * offsetRepeat.zw + offsetRepeat.xy );\\n\\tdiffuseColor *= mapTexelToLinear( mapTexel );\\n#endif\\n\",map_particle_pars_fragment:\"#ifdef USE_MAP\\n\\tuniform vec4 offsetRepeat;\\n\\tuniform sampler2D map;\\n#endif\\n\",\nmetalnessmap_fragment:\"float metalnessFactor = metalness;\\n#ifdef USE_METALNESSMAP\\n\\tvec4 texelMetalness = texture2D( metalnessMap, vUv );\\n\\tmetalnessFactor *= texelMetalness.b;\\n#endif\\n\",metalnessmap_pars_fragment:\"#ifdef USE_METALNESSMAP\\n\\tuniform sampler2D metalnessMap;\\n#endif\",morphnormal_vertex:\"#ifdef USE_MORPHNORMALS\\n\\tobjectNormal += ( morphNormal0 - normal ) * morphTargetInfluences[ 0 ];\\n\\tobjectNormal += ( morphNormal1 - normal ) * morphTargetInfluences[ 1 ];\\n\\tobjectNormal += ( morphNormal2 - normal ) * morphTargetInfluences[ 2 ];\\n\\tobjectNormal += ( morphNormal3 - normal ) * morphTargetInfluences[ 3 ];\\n#endif\\n\",\nmorphtarget_pars_vertex:\"#ifdef USE_MORPHTARGETS\\n\\t#ifndef USE_MORPHNORMALS\\n\\tuniform float morphTargetInfluences[ 8 ];\\n\\t#else\\n\\tuniform float morphTargetInfluences[ 4 ];\\n\\t#endif\\n#endif\",morphtarget_vertex:\"#ifdef USE_MORPHTARGETS\\n\\ttransformed += ( morphTarget0 - position ) * morphTargetInfluences[ 0 ];\\n\\ttransformed += ( morphTarget1 - position ) * morphTargetInfluences[ 1 ];\\n\\ttransformed += ( morphTarget2 - position ) * morphTargetInfluences[ 2 ];\\n\\ttransformed += ( morphTarget3 - position ) * morphTargetInfluences[ 3 ];\\n\\t#ifndef USE_MORPHNORMALS\\n\\ttransformed += ( morphTarget4 - position ) * morphTargetInfluences[ 4 ];\\n\\ttransformed += ( morphTarget5 - position ) * morphTargetInfluences[ 5 ];\\n\\ttransformed += ( morphTarget6 - position ) * morphTargetInfluences[ 6 ];\\n\\ttransformed += ( morphTarget7 - position ) * morphTargetInfluences[ 7 ];\\n\\t#endif\\n#endif\\n\",\nnormal_fragment:\"#ifdef FLAT_SHADED\\n\\tvec3 fdx = vec3( dFdx( vViewPosition.x ), dFdx( vViewPosition.y ), dFdx( vViewPosition.z ) );\\n\\tvec3 fdy = vec3( dFdy( vViewPosition.x ), dFdy( vViewPosition.y ), dFdy( vViewPosition.z ) );\\n\\tvec3 normal = normalize( cross( fdx, fdy ) );\\n#else\\n\\tvec3 normal = normalize( vNormal );\\n\\t#ifdef DOUBLE_SIDED\\n\\t\\tnormal = normal * ( float( gl_FrontFacing ) * 2.0 - 1.0 );\\n\\t#endif\\n#endif\\n#ifdef USE_NORMALMAP\\n\\tnormal = perturbNormal2Arb( -vViewPosition, normal );\\n#elif defined( USE_BUMPMAP )\\n\\tnormal = perturbNormalArb( -vViewPosition, normal, dHdxy_fwd() );\\n#endif\\n\",\nnormalmap_pars_fragment:\"#ifdef USE_NORMALMAP\\n\\tuniform sampler2D normalMap;\\n\\tuniform vec2 normalScale;\\n\\tvec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm ) {\\n\\t\\tvec3 q0 = vec3( dFdx( eye_pos.x ), dFdx( eye_pos.y ), dFdx( eye_pos.z ) );\\n\\t\\tvec3 q1 = vec3( dFdy( eye_pos.x ), dFdy( eye_pos.y ), dFdy( eye_pos.z ) );\\n\\t\\tvec2 st0 = dFdx( vUv.st );\\n\\t\\tvec2 st1 = dFdy( vUv.st );\\n\\t\\tvec3 S = normalize( q0 * st1.t - q1 * st0.t );\\n\\t\\tvec3 T = normalize( -q0 * st1.s + q1 * st0.s );\\n\\t\\tvec3 N = normalize( surf_norm );\\n\\t\\tvec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\\n\\t\\tmapN.xy = normalScale * mapN.xy;\\n\\t\\tmat3 tsn = mat3( S, T, N );\\n\\t\\treturn normalize( tsn * mapN );\\n\\t}\\n#endif\\n\",\npacking:\"vec3 packNormalToRGB( const in vec3 normal ) {\\n\\treturn normalize( normal ) * 0.5 + 0.5;\\n}\\nvec3 unpackRGBToNormal( const in vec3 rgb ) {\\n\\treturn 1.0 - 2.0 * rgb.xyz;\\n}\\nconst float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;\\nconst vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256.,  256. );\\nconst vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );\\nconst float ShiftRight8 = 1. / 256.;\\nvec4 packDepthToRGBA( const in float v ) {\\n\\tvec4 r = vec4( fract( v * PackFactors ), v );\\n\\tr.yzw -= r.xyz * ShiftRight8;\\treturn r * PackUpscale;\\n}\\nfloat unpackRGBAToDepth( const in vec4 v ) {\\n\\treturn dot( v, UnpackFactors );\\n}\\nfloat viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {\\n\\treturn ( viewZ + near ) / ( near - far );\\n}\\nfloat orthographicDepthToViewZ( const in float linearClipZ, const in float near, const in float far ) {\\n\\treturn linearClipZ * ( near - far ) - near;\\n}\\nfloat viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {\\n\\treturn (( near + viewZ ) * far ) / (( far - near ) * viewZ );\\n}\\nfloat perspectiveDepthToViewZ( const in float invClipZ, const in float near, const in float far ) {\\n\\treturn ( near * far ) / ( ( far - near ) * invClipZ - far );\\n}\\n\",\npremultiplied_alpha_fragment:\"#ifdef PREMULTIPLIED_ALPHA\\n\\tgl_FragColor.rgb *= gl_FragColor.a;\\n#endif\\n\",project_vertex:\"vec4 mvPosition = modelViewMatrix * vec4( transformed, 1.0 );\\ngl_Position = projectionMatrix * mvPosition;\\n\",dithering_fragment:\"#if defined( DITHERING )\\n  gl_FragColor.rgb = dithering( gl_FragColor.rgb );\\n#endif\\n\",dithering_pars_fragment:\"#if defined( DITHERING )\\n\\tvec3 dithering( vec3 color ) {\\n\\t\\tfloat grid_position = rand( gl_FragCoord.xy );\\n\\t\\tvec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );\\n\\t\\tdither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );\\n\\t\\treturn color + dither_shift_RGB;\\n\\t}\\n#endif\\n\",\nroughnessmap_fragment:\"float roughnessFactor = roughness;\\n#ifdef USE_ROUGHNESSMAP\\n\\tvec4 texelRoughness = texture2D( roughnessMap, vUv );\\n\\troughnessFactor *= texelRoughness.g;\\n#endif\\n\",roughnessmap_pars_fragment:\"#ifdef USE_ROUGHNESSMAP\\n\\tuniform sampler2D roughnessMap;\\n#endif\",shadowmap_pars_fragment:\"#ifdef USE_SHADOWMAP\\n\\t#if NUM_DIR_LIGHTS > 0\\n\\t\\tuniform sampler2D directionalShadowMap[ NUM_DIR_LIGHTS ];\\n\\t\\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHTS ];\\n\\t#endif\\n\\t#if NUM_SPOT_LIGHTS > 0\\n\\t\\tuniform sampler2D spotShadowMap[ NUM_SPOT_LIGHTS ];\\n\\t\\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHTS ];\\n\\t#endif\\n\\t#if NUM_POINT_LIGHTS > 0\\n\\t\\tuniform sampler2D pointShadowMap[ NUM_POINT_LIGHTS ];\\n\\t\\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHTS ];\\n\\t#endif\\n\\tfloat texture2DCompare( sampler2D depths, vec2 uv, float compare ) {\\n\\t\\treturn step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );\\n\\t}\\n\\tfloat texture2DShadowLerp( sampler2D depths, vec2 size, vec2 uv, float compare ) {\\n\\t\\tconst vec2 offset = vec2( 0.0, 1.0 );\\n\\t\\tvec2 texelSize = vec2( 1.0 ) / size;\\n\\t\\tvec2 centroidUV = floor( uv * size + 0.5 ) / size;\\n\\t\\tfloat lb = texture2DCompare( depths, centroidUV + texelSize * offset.xx, compare );\\n\\t\\tfloat lt = texture2DCompare( depths, centroidUV + texelSize * offset.xy, compare );\\n\\t\\tfloat rb = texture2DCompare( depths, centroidUV + texelSize * offset.yx, compare );\\n\\t\\tfloat rt = texture2DCompare( depths, centroidUV + texelSize * offset.yy, compare );\\n\\t\\tvec2 f = fract( uv * size + 0.5 );\\n\\t\\tfloat a = mix( lb, lt, f.y );\\n\\t\\tfloat b = mix( rb, rt, f.y );\\n\\t\\tfloat c = mix( a, b, f.x );\\n\\t\\treturn c;\\n\\t}\\n\\tfloat getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\\n\\t\\tfloat shadow = 1.0;\\n\\t\\tshadowCoord.xyz /= shadowCoord.w;\\n\\t\\tshadowCoord.z += shadowBias;\\n\\t\\tbvec4 inFrustumVec = bvec4 ( shadowCoord.x >= 0.0, shadowCoord.x <= 1.0, shadowCoord.y >= 0.0, shadowCoord.y <= 1.0 );\\n\\t\\tbool inFrustum = all( inFrustumVec );\\n\\t\\tbvec2 frustumTestVec = bvec2( inFrustum, shadowCoord.z <= 1.0 );\\n\\t\\tbool frustumTest = all( frustumTestVec );\\n\\t\\tif ( frustumTest ) {\\n\\t\\t#if defined( SHADOWMAP_TYPE_PCF )\\n\\t\\t\\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\\n\\t\\t\\tfloat dx0 = - texelSize.x * shadowRadius;\\n\\t\\t\\tfloat dy0 = - texelSize.y * shadowRadius;\\n\\t\\t\\tfloat dx1 = + texelSize.x * shadowRadius;\\n\\t\\t\\tfloat dy1 = + texelSize.y * shadowRadius;\\n\\t\\t\\tshadow = (\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\\n\\t\\t\\t) * ( 1.0 / 9.0 );\\n\\t\\t#elif defined( SHADOWMAP_TYPE_PCF_SOFT )\\n\\t\\t\\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\\n\\t\\t\\tfloat dx0 = - texelSize.x * shadowRadius;\\n\\t\\t\\tfloat dy0 = - texelSize.y * shadowRadius;\\n\\t\\t\\tfloat dx1 = + texelSize.x * shadowRadius;\\n\\t\\t\\tfloat dy1 = + texelSize.y * shadowRadius;\\n\\t\\t\\tshadow = (\\n\\t\\t\\t\\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy, shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\\n\\t\\t\\t) * ( 1.0 / 9.0 );\\n\\t\\t#else\\n\\t\\t\\tshadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );\\n\\t\\t#endif\\n\\t\\t}\\n\\t\\treturn shadow;\\n\\t}\\n\\tvec2 cubeToUV( vec3 v, float texelSizeY ) {\\n\\t\\tvec3 absV = abs( v );\\n\\t\\tfloat scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );\\n\\t\\tabsV *= scaleToCube;\\n\\t\\tv *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );\\n\\t\\tvec2 planar = v.xy;\\n\\t\\tfloat almostATexel = 1.5 * texelSizeY;\\n\\t\\tfloat almostOne = 1.0 - almostATexel;\\n\\t\\tif ( absV.z >= almostOne ) {\\n\\t\\t\\tif ( v.z > 0.0 )\\n\\t\\t\\t\\tplanar.x = 4.0 - v.x;\\n\\t\\t} else if ( absV.x >= almostOne ) {\\n\\t\\t\\tfloat signX = sign( v.x );\\n\\t\\t\\tplanar.x = v.z * signX + 2.0 * signX;\\n\\t\\t} else if ( absV.y >= almostOne ) {\\n\\t\\t\\tfloat signY = sign( v.y );\\n\\t\\t\\tplanar.x = v.x + 2.0 * signY + 2.0;\\n\\t\\t\\tplanar.y = v.z * signY - 2.0;\\n\\t\\t}\\n\\t\\treturn vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );\\n\\t}\\n\\tfloat getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {\\n\\t\\tvec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );\\n\\t\\tvec3 lightToPosition = shadowCoord.xyz;\\n\\t\\tfloat dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );\\t\\tdp += shadowBias;\\n\\t\\tvec3 bd3D = normalize( lightToPosition );\\n\\t\\t#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT )\\n\\t\\t\\tvec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;\\n\\t\\t\\treturn (\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )\\n\\t\\t\\t) * ( 1.0 / 9.0 );\\n\\t\\t#else\\n\\t\\t\\treturn texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );\\n\\t\\t#endif\\n\\t}\\n#endif\\n\",\nshadowmap_pars_vertex:\"#ifdef USE_SHADOWMAP\\n\\t#if NUM_DIR_LIGHTS > 0\\n\\t\\tuniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHTS ];\\n\\t\\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHTS ];\\n\\t#endif\\n\\t#if NUM_SPOT_LIGHTS > 0\\n\\t\\tuniform mat4 spotShadowMatrix[ NUM_SPOT_LIGHTS ];\\n\\t\\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHTS ];\\n\\t#endif\\n\\t#if NUM_POINT_LIGHTS > 0\\n\\t\\tuniform mat4 pointShadowMatrix[ NUM_POINT_LIGHTS ];\\n\\t\\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHTS ];\\n\\t#endif\\n#endif\\n\",\nshadowmap_vertex:\"#ifdef USE_SHADOWMAP\\n\\t#if NUM_DIR_LIGHTS > 0\\n\\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\\n\\t\\tvDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * worldPosition;\\n\\t}\\n\\t#endif\\n\\t#if NUM_SPOT_LIGHTS > 0\\n\\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\\n\\t\\tvSpotShadowCoord[ i ] = spotShadowMatrix[ i ] * worldPosition;\\n\\t}\\n\\t#endif\\n\\t#if NUM_POINT_LIGHTS > 0\\n\\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\\n\\t\\tvPointShadowCoord[ i ] = pointShadowMatrix[ i ] * worldPosition;\\n\\t}\\n\\t#endif\\n#endif\\n\",\nshadowmask_pars_fragment:\"float getShadowMask() {\\n\\tfloat shadow = 1.0;\\n\\t#ifdef USE_SHADOWMAP\\n\\t#if NUM_DIR_LIGHTS > 0\\n\\tDirectionalLight directionalLight;\\n\\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\\n\\t\\tdirectionalLight = directionalLights[ i ];\\n\\t\\tshadow *= bool( directionalLight.shadow ) ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\\n\\t}\\n\\t#endif\\n\\t#if NUM_SPOT_LIGHTS > 0\\n\\tSpotLight spotLight;\\n\\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\\n\\t\\tspotLight = spotLights[ i ];\\n\\t\\tshadow *= bool( spotLight.shadow ) ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\\n\\t}\\n\\t#endif\\n\\t#if NUM_POINT_LIGHTS > 0\\n\\tPointLight pointLight;\\n\\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\\n\\t\\tpointLight = pointLights[ i ];\\n\\t\\tshadow *= bool( pointLight.shadow ) ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\\n\\t}\\n\\t#endif\\n\\t#endif\\n\\treturn shadow;\\n}\\n\",\nskinbase_vertex:\"#ifdef USE_SKINNING\\n\\tmat4 boneMatX = getBoneMatrix( skinIndex.x );\\n\\tmat4 boneMatY = getBoneMatrix( skinIndex.y );\\n\\tmat4 boneMatZ = getBoneMatrix( skinIndex.z );\\n\\tmat4 boneMatW = getBoneMatrix( skinIndex.w );\\n#endif\",skinning_pars_vertex:\"#ifdef USE_SKINNING\\n\\tuniform mat4 bindMatrix;\\n\\tuniform mat4 bindMatrixInverse;\\n\\t#ifdef BONE_TEXTURE\\n\\t\\tuniform sampler2D boneTexture;\\n\\t\\tuniform int boneTextureSize;\\n\\t\\tmat4 getBoneMatrix( const in float i ) {\\n\\t\\t\\tfloat j = i * 4.0;\\n\\t\\t\\tfloat x = mod( j, float( boneTextureSize ) );\\n\\t\\t\\tfloat y = floor( j / float( boneTextureSize ) );\\n\\t\\t\\tfloat dx = 1.0 / float( boneTextureSize );\\n\\t\\t\\tfloat dy = 1.0 / float( boneTextureSize );\\n\\t\\t\\ty = dy * ( y + 0.5 );\\n\\t\\t\\tvec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );\\n\\t\\t\\tvec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );\\n\\t\\t\\tvec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );\\n\\t\\t\\tvec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );\\n\\t\\t\\tmat4 bone = mat4( v1, v2, v3, v4 );\\n\\t\\t\\treturn bone;\\n\\t\\t}\\n\\t#else\\n\\t\\tuniform mat4 boneMatrices[ MAX_BONES ];\\n\\t\\tmat4 getBoneMatrix( const in float i ) {\\n\\t\\t\\tmat4 bone = boneMatrices[ int(i) ];\\n\\t\\t\\treturn bone;\\n\\t\\t}\\n\\t#endif\\n#endif\\n\",\nskinning_vertex:\"#ifdef USE_SKINNING\\n\\tvec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );\\n\\tvec4 skinned = vec4( 0.0 );\\n\\tskinned += boneMatX * skinVertex * skinWeight.x;\\n\\tskinned += boneMatY * skinVertex * skinWeight.y;\\n\\tskinned += boneMatZ * skinVertex * skinWeight.z;\\n\\tskinned += boneMatW * skinVertex * skinWeight.w;\\n\\ttransformed = ( bindMatrixInverse * skinned ).xyz;\\n#endif\\n\",skinnormal_vertex:\"#ifdef USE_SKINNING\\n\\tmat4 skinMatrix = mat4( 0.0 );\\n\\tskinMatrix += skinWeight.x * boneMatX;\\n\\tskinMatrix += skinWeight.y * boneMatY;\\n\\tskinMatrix += skinWeight.z * boneMatZ;\\n\\tskinMatrix += skinWeight.w * boneMatW;\\n\\tskinMatrix  = bindMatrixInverse * skinMatrix * bindMatrix;\\n\\tobjectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;\\n#endif\\n\",\nspecularmap_fragment:\"float specularStrength;\\n#ifdef USE_SPECULARMAP\\n\\tvec4 texelSpecular = texture2D( specularMap, vUv );\\n\\tspecularStrength = texelSpecular.r;\\n#else\\n\\tspecularStrength = 1.0;\\n#endif\",specularmap_pars_fragment:\"#ifdef USE_SPECULARMAP\\n\\tuniform sampler2D specularMap;\\n#endif\",tonemapping_fragment:\"#if defined( TONE_MAPPING )\\n  gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );\\n#endif\\n\",tonemapping_pars_fragment:\"#define saturate(a) clamp( a, 0.0, 1.0 )\\nuniform float toneMappingExposure;\\nuniform float toneMappingWhitePoint;\\nvec3 LinearToneMapping( vec3 color ) {\\n\\treturn toneMappingExposure * color;\\n}\\nvec3 ReinhardToneMapping( vec3 color ) {\\n\\tcolor *= toneMappingExposure;\\n\\treturn saturate( color / ( vec3( 1.0 ) + color ) );\\n}\\n#define Uncharted2Helper( x ) max( ( ( x * ( 0.15 * x + 0.10 * 0.50 ) + 0.20 * 0.02 ) / ( x * ( 0.15 * x + 0.50 ) + 0.20 * 0.30 ) ) - 0.02 / 0.30, vec3( 0.0 ) )\\nvec3 Uncharted2ToneMapping( vec3 color ) {\\n\\tcolor *= toneMappingExposure;\\n\\treturn saturate( Uncharted2Helper( color ) / Uncharted2Helper( vec3( toneMappingWhitePoint ) ) );\\n}\\nvec3 OptimizedCineonToneMapping( vec3 color ) {\\n\\tcolor *= toneMappingExposure;\\n\\tcolor = max( vec3( 0.0 ), color - 0.004 );\\n\\treturn pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );\\n}\\n\",\nuv_pars_fragment:\"#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP ) || defined( USE_EMISSIVEMAP ) || defined( USE_ROUGHNESSMAP ) || defined( USE_METALNESSMAP )\\n\\tvarying vec2 vUv;\\n#endif\",uv_pars_vertex:\"#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP ) || defined( USE_EMISSIVEMAP ) || defined( USE_ROUGHNESSMAP ) || defined( USE_METALNESSMAP )\\n\\tvarying vec2 vUv;\\n\\tuniform vec4 offsetRepeat;\\n#endif\\n\",\nuv_vertex:\"#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP ) || defined( USE_EMISSIVEMAP ) || defined( USE_ROUGHNESSMAP ) || defined( USE_METALNESSMAP )\\n\\tvUv = uv * offsetRepeat.zw + offsetRepeat.xy;\\n#endif\",uv2_pars_fragment:\"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\\n\\tvarying vec2 vUv2;\\n#endif\",uv2_pars_vertex:\"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\\n\\tattribute vec2 uv2;\\n\\tvarying vec2 vUv2;\\n#endif\",\nuv2_vertex:\"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\\n\\tvUv2 = uv2;\\n#endif\",worldpos_vertex:\"#if defined( USE_ENVMAP ) || defined( PHONG ) || defined( PHYSICAL ) || defined( LAMBERT ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP )\\n\\tvec4 worldPosition = modelMatrix * vec4( transformed, 1.0 );\\n#endif\\n\",cube_frag:\"uniform samplerCube tCube;\\nuniform float tFlip;\\nuniform float opacity;\\nvarying vec3 vWorldPosition;\\nvoid main() {\\n\\tgl_FragColor = textureCube( tCube, vec3( tFlip * vWorldPosition.x, vWorldPosition.yz ) );\\n\\tgl_FragColor.a *= opacity;\\n}\\n\",\ncube_vert:\"varying vec3 vWorldPosition;\\n#include <common>\\nvoid main() {\\n\\tvWorldPosition = transformDirection( position, modelMatrix );\\n\\t#include <begin_vertex>\\n\\t#include <project_vertex>\\n}\\n\",depth_frag:\"#if DEPTH_PACKING == 3200\\n\\tuniform float opacity;\\n#endif\\n#include <common>\\n#include <packing>\\n#include <uv_pars_fragment>\\n#include <map_pars_fragment>\\n#include <alphamap_pars_fragment>\\n#include <logdepthbuf_pars_fragment>\\n#include <clipping_planes_pars_fragment>\\nvoid main() {\\n\\t#include <clipping_planes_fragment>\\n\\tvec4 diffuseColor = vec4( 1.0 );\\n\\t#if DEPTH_PACKING == 3200\\n\\t\\tdiffuseColor.a = opacity;\\n\\t#endif\\n\\t#include <map_fragment>\\n\\t#include <alphamap_fragment>\\n\\t#include <alphatest_fragment>\\n\\t#include <logdepthbuf_fragment>\\n\\t#if DEPTH_PACKING == 3200\\n\\t\\tgl_FragColor = vec4( vec3( gl_FragCoord.z ), opacity );\\n\\t#elif DEPTH_PACKING == 3201\\n\\t\\tgl_FragColor = packDepthToRGBA( gl_FragCoord.z );\\n\\t#endif\\n}\\n\",\ndepth_vert:\"#include <common>\\n#include <uv_pars_vertex>\\n#include <displacementmap_pars_vertex>\\n#include <morphtarget_pars_vertex>\\n#include <skinning_pars_vertex>\\n#include <logdepthbuf_pars_vertex>\\n#include <clipping_planes_pars_vertex>\\nvoid main() {\\n\\t#include <uv_vertex>\\n\\t#include <skinbase_vertex>\\n\\t#ifdef USE_DISPLACEMENTMAP\\n\\t\\t#include <beginnormal_vertex>\\n\\t\\t#include <morphnormal_vertex>\\n\\t\\t#include <skinnormal_vertex>\\n\\t#endif\\n\\t#include <begin_vertex>\\n\\t#include <morphtarget_vertex>\\n\\t#include <skinning_vertex>\\n\\t#include <displacementmap_vertex>\\n\\t#include <project_vertex>\\n\\t#include <logdepthbuf_vertex>\\n\\t#include <clipping_planes_vertex>\\n}\\n\",\ndistanceRGBA_frag:\"#define DISTANCE\\nuniform vec3 referencePosition;\\nuniform float nearDistance;\\nuniform float farDistance;\\nvarying vec3 vWorldPosition;\\n#include <common>\\n#include <packing>\\n#include <uv_pars_fragment>\\n#include <map_pars_fragment>\\n#include <alphamap_pars_fragment>\\n#include <clipping_planes_pars_fragment>\\nvoid main () {\\n\\t#include <clipping_planes_fragment>\\n\\tvec4 diffuseColor = vec4( 1.0 );\\n\\t#include <map_fragment>\\n\\t#include <alphamap_fragment>\\n\\t#include <alphatest_fragment>\\n\\tfloat dist = length( vWorldPosition - referencePosition );\\n\\tdist = ( dist - nearDistance ) / ( farDistance - nearDistance );\\n\\tdist = saturate( dist );\\n\\tgl_FragColor = packDepthToRGBA( dist );\\n}\\n\",\ndistanceRGBA_vert:\"#define DISTANCE\\nvarying vec3 vWorldPosition;\\n#include <common>\\n#include <uv_pars_vertex>\\n#include <displacementmap_pars_vertex>\\n#include <morphtarget_pars_vertex>\\n#include <skinning_pars_vertex>\\n#include <clipping_planes_pars_vertex>\\nvoid main() {\\n\\t#include <uv_vertex>\\n\\t#include <skinbase_vertex>\\n\\t#ifdef USE_DISPLACEMENTMAP\\n\\t\\t#include <beginnormal_vertex>\\n\\t\\t#include <morphnormal_vertex>\\n\\t\\t#include <skinnormal_vertex>\\n\\t#endif\\n\\t#include <begin_vertex>\\n\\t#include <morphtarget_vertex>\\n\\t#include <skinning_vertex>\\n\\t#include <displacementmap_vertex>\\n\\t#include <project_vertex>\\n\\t#include <worldpos_vertex>\\n\\t#include <clipping_planes_vertex>\\n\\tvWorldPosition = worldPosition.xyz;\\n}\\n\",\nequirect_frag:\"uniform sampler2D tEquirect;\\nvarying vec3 vWorldPosition;\\n#include <common>\\nvoid main() {\\n\\tvec3 direction = normalize( vWorldPosition );\\n\\tvec2 sampleUV;\\n\\tsampleUV.y = asin( clamp( direction.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\\n\\tsampleUV.x = atan( direction.z, direction.x ) * RECIPROCAL_PI2 + 0.5;\\n\\tgl_FragColor = texture2D( tEquirect, sampleUV );\\n}\\n\",equirect_vert:\"varying vec3 vWorldPosition;\\n#include <common>\\nvoid main() {\\n\\tvWorldPosition = transformDirection( position, modelMatrix );\\n\\t#include <begin_vertex>\\n\\t#include <project_vertex>\\n}\\n\",\nlinedashed_frag:\"uniform vec3 diffuse;\\nuniform float opacity;\\nuniform float dashSize;\\nuniform float totalSize;\\nvarying float vLineDistance;\\n#include <common>\\n#include <color_pars_fragment>\\n#include <fog_pars_fragment>\\n#include <logdepthbuf_pars_fragment>\\n#include <clipping_planes_pars_fragment>\\nvoid main() {\\n\\t#include <clipping_planes_fragment>\\n\\tif ( mod( vLineDistance, totalSize ) > dashSize ) {\\n\\t\\tdiscard;\\n\\t}\\n\\tvec3 outgoingLight = vec3( 0.0 );\\n\\tvec4 diffuseColor = vec4( diffuse, opacity );\\n\\t#include <logdepthbuf_fragment>\\n\\t#include <color_fragment>\\n\\toutgoingLight = diffuseColor.rgb;\\n\\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\\n\\t#include <premultiplied_alpha_fragment>\\n\\t#include <tonemapping_fragment>\\n\\t#include <encodings_fragment>\\n\\t#include <fog_fragment>\\n}\\n\",\nlinedashed_vert:\"uniform float scale;\\nattribute float lineDistance;\\nvarying float vLineDistance;\\n#include <common>\\n#include <color_pars_vertex>\\n#include <fog_pars_vertex>\\n#include <logdepthbuf_pars_vertex>\\n#include <clipping_planes_pars_vertex>\\nvoid main() {\\n\\t#include <color_vertex>\\n\\tvLineDistance = scale * lineDistance;\\n\\tvec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );\\n\\tgl_Position = projectionMatrix * mvPosition;\\n\\t#include <logdepthbuf_vertex>\\n\\t#include <clipping_planes_vertex>\\n\\t#include <fog_vertex>\\n}\\n\",\nmeshbasic_frag:\"uniform vec3 diffuse;\\nuniform float opacity;\\n#ifndef FLAT_SHADED\\n\\tvarying vec3 vNormal;\\n#endif\\n#include <common>\\n#include <color_pars_fragment>\\n#include <uv_pars_fragment>\\n#include <uv2_pars_fragment>\\n#include <map_pars_fragment>\\n#include <alphamap_pars_fragment>\\n#include <aomap_pars_fragment>\\n#include <lightmap_pars_fragment>\\n#include <envmap_pars_fragment>\\n#include <fog_pars_fragment>\\n#include <specularmap_pars_fragment>\\n#include <logdepthbuf_pars_fragment>\\n#include <clipping_planes_pars_fragment>\\nvoid main() {\\n\\t#include <clipping_planes_fragment>\\n\\tvec4 diffuseColor = vec4( diffuse, opacity );\\n\\t#include <logdepthbuf_fragment>\\n\\t#include <map_fragment>\\n\\t#include <color_fragment>\\n\\t#include <alphamap_fragment>\\n\\t#include <alphatest_fragment>\\n\\t#include <specularmap_fragment>\\n\\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\\n\\t#ifdef USE_LIGHTMAP\\n\\t\\treflectedLight.indirectDiffuse += texture2D( lightMap, vUv2 ).xyz * lightMapIntensity;\\n\\t#else\\n\\t\\treflectedLight.indirectDiffuse += vec3( 1.0 );\\n\\t#endif\\n\\t#include <aomap_fragment>\\n\\treflectedLight.indirectDiffuse *= diffuseColor.rgb;\\n\\tvec3 outgoingLight = reflectedLight.indirectDiffuse;\\n\\t#include <envmap_fragment>\\n\\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\\n\\t#include <premultiplied_alpha_fragment>\\n\\t#include <tonemapping_fragment>\\n\\t#include <encodings_fragment>\\n\\t#include <fog_fragment>\\n}\\n\",\nmeshbasic_vert:\"#include <common>\\n#include <uv_pars_vertex>\\n#include <uv2_pars_vertex>\\n#include <envmap_pars_vertex>\\n#include <color_pars_vertex>\\n#include <fog_pars_vertex>\\n#include <morphtarget_pars_vertex>\\n#include <skinning_pars_vertex>\\n#include <logdepthbuf_pars_vertex>\\n#include <clipping_planes_pars_vertex>\\nvoid main() {\\n\\t#include <uv_vertex>\\n\\t#include <uv2_vertex>\\n\\t#include <color_vertex>\\n\\t#include <skinbase_vertex>\\n\\t#ifdef USE_ENVMAP\\n\\t#include <beginnormal_vertex>\\n\\t#include <morphnormal_vertex>\\n\\t#include <skinnormal_vertex>\\n\\t#include <defaultnormal_vertex>\\n\\t#endif\\n\\t#include <begin_vertex>\\n\\t#include <morphtarget_vertex>\\n\\t#include <skinning_vertex>\\n\\t#include <project_vertex>\\n\\t#include <logdepthbuf_vertex>\\n\\t#include <worldpos_vertex>\\n\\t#include <clipping_planes_vertex>\\n\\t#include <envmap_vertex>\\n\\t#include <fog_vertex>\\n}\\n\",\nmeshlambert_frag:\"uniform vec3 diffuse;\\nuniform vec3 emissive;\\nuniform float opacity;\\nvarying vec3 vLightFront;\\n#ifdef DOUBLE_SIDED\\n\\tvarying vec3 vLightBack;\\n#endif\\n#include <common>\\n#include <packing>\\n#include <dithering_pars_fragment>\\n#include <color_pars_fragment>\\n#include <uv_pars_fragment>\\n#include <uv2_pars_fragment>\\n#include <map_pars_fragment>\\n#include <alphamap_pars_fragment>\\n#include <aomap_pars_fragment>\\n#include <lightmap_pars_fragment>\\n#include <emissivemap_pars_fragment>\\n#include <envmap_pars_fragment>\\n#include <bsdfs>\\n#include <lights_pars>\\n#include <fog_pars_fragment>\\n#include <shadowmap_pars_fragment>\\n#include <shadowmask_pars_fragment>\\n#include <specularmap_pars_fragment>\\n#include <logdepthbuf_pars_fragment>\\n#include <clipping_planes_pars_fragment>\\nvoid main() {\\n\\t#include <clipping_planes_fragment>\\n\\tvec4 diffuseColor = vec4( diffuse, opacity );\\n\\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\\n\\tvec3 totalEmissiveRadiance = emissive;\\n\\t#include <logdepthbuf_fragment>\\n\\t#include <map_fragment>\\n\\t#include <color_fragment>\\n\\t#include <alphamap_fragment>\\n\\t#include <alphatest_fragment>\\n\\t#include <specularmap_fragment>\\n\\t#include <emissivemap_fragment>\\n\\treflectedLight.indirectDiffuse = getAmbientLightIrradiance( ambientLightColor );\\n\\t#include <lightmap_fragment>\\n\\treflectedLight.indirectDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb );\\n\\t#ifdef DOUBLE_SIDED\\n\\t\\treflectedLight.directDiffuse = ( gl_FrontFacing ) ? vLightFront : vLightBack;\\n\\t#else\\n\\t\\treflectedLight.directDiffuse = vLightFront;\\n\\t#endif\\n\\treflectedLight.directDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb ) * getShadowMask();\\n\\t#include <aomap_fragment>\\n\\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\\n\\t#include <envmap_fragment>\\n\\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\\n\\t#include <tonemapping_fragment>\\n\\t#include <encodings_fragment>\\n\\t#include <fog_fragment>\\n\\t#include <premultiplied_alpha_fragment>\\n\\t#include <dithering_fragment>\\n}\\n\",\nmeshlambert_vert:\"#define LAMBERT\\nvarying vec3 vLightFront;\\n#ifdef DOUBLE_SIDED\\n\\tvarying vec3 vLightBack;\\n#endif\\n#include <common>\\n#include <uv_pars_vertex>\\n#include <uv2_pars_vertex>\\n#include <envmap_pars_vertex>\\n#include <bsdfs>\\n#include <lights_pars>\\n#include <color_pars_vertex>\\n#include <fog_pars_vertex>\\n#include <morphtarget_pars_vertex>\\n#include <skinning_pars_vertex>\\n#include <shadowmap_pars_vertex>\\n#include <logdepthbuf_pars_vertex>\\n#include <clipping_planes_pars_vertex>\\nvoid main() {\\n\\t#include <uv_vertex>\\n\\t#include <uv2_vertex>\\n\\t#include <color_vertex>\\n\\t#include <beginnormal_vertex>\\n\\t#include <morphnormal_vertex>\\n\\t#include <skinbase_vertex>\\n\\t#include <skinnormal_vertex>\\n\\t#include <defaultnormal_vertex>\\n\\t#include <begin_vertex>\\n\\t#include <morphtarget_vertex>\\n\\t#include <skinning_vertex>\\n\\t#include <project_vertex>\\n\\t#include <logdepthbuf_vertex>\\n\\t#include <clipping_planes_vertex>\\n\\t#include <worldpos_vertex>\\n\\t#include <envmap_vertex>\\n\\t#include <lights_lambert_vertex>\\n\\t#include <shadowmap_vertex>\\n\\t#include <fog_vertex>\\n}\\n\",\nmeshphong_frag:\"#define PHONG\\nuniform vec3 diffuse;\\nuniform vec3 emissive;\\nuniform vec3 specular;\\nuniform float shininess;\\nuniform float opacity;\\n#include <common>\\n#include <packing>\\n#include <dithering_pars_fragment>\\n#include <color_pars_fragment>\\n#include <uv_pars_fragment>\\n#include <uv2_pars_fragment>\\n#include <map_pars_fragment>\\n#include <alphamap_pars_fragment>\\n#include <aomap_pars_fragment>\\n#include <lightmap_pars_fragment>\\n#include <emissivemap_pars_fragment>\\n#include <envmap_pars_fragment>\\n#include <gradientmap_pars_fragment>\\n#include <fog_pars_fragment>\\n#include <bsdfs>\\n#include <lights_pars>\\n#include <lights_phong_pars_fragment>\\n#include <shadowmap_pars_fragment>\\n#include <bumpmap_pars_fragment>\\n#include <normalmap_pars_fragment>\\n#include <specularmap_pars_fragment>\\n#include <logdepthbuf_pars_fragment>\\n#include <clipping_planes_pars_fragment>\\nvoid main() {\\n\\t#include <clipping_planes_fragment>\\n\\tvec4 diffuseColor = vec4( diffuse, opacity );\\n\\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\\n\\tvec3 totalEmissiveRadiance = emissive;\\n\\t#include <logdepthbuf_fragment>\\n\\t#include <map_fragment>\\n\\t#include <color_fragment>\\n\\t#include <alphamap_fragment>\\n\\t#include <alphatest_fragment>\\n\\t#include <specularmap_fragment>\\n\\t#include <normal_fragment>\\n\\t#include <emissivemap_fragment>\\n\\t#include <lights_phong_fragment>\\n\\t#include <lights_template>\\n\\t#include <aomap_fragment>\\n\\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\\n\\t#include <envmap_fragment>\\n\\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\\n\\t#include <tonemapping_fragment>\\n\\t#include <encodings_fragment>\\n\\t#include <fog_fragment>\\n\\t#include <premultiplied_alpha_fragment>\\n\\t#include <dithering_fragment>\\n}\\n\",\nmeshphong_vert:\"#define PHONG\\nvarying vec3 vViewPosition;\\n#ifndef FLAT_SHADED\\n\\tvarying vec3 vNormal;\\n#endif\\n#include <common>\\n#include <uv_pars_vertex>\\n#include <uv2_pars_vertex>\\n#include <displacementmap_pars_vertex>\\n#include <envmap_pars_vertex>\\n#include <color_pars_vertex>\\n#include <fog_pars_vertex>\\n#include <morphtarget_pars_vertex>\\n#include <skinning_pars_vertex>\\n#include <shadowmap_pars_vertex>\\n#include <logdepthbuf_pars_vertex>\\n#include <clipping_planes_pars_vertex>\\nvoid main() {\\n\\t#include <uv_vertex>\\n\\t#include <uv2_vertex>\\n\\t#include <color_vertex>\\n\\t#include <beginnormal_vertex>\\n\\t#include <morphnormal_vertex>\\n\\t#include <skinbase_vertex>\\n\\t#include <skinnormal_vertex>\\n\\t#include <defaultnormal_vertex>\\n#ifndef FLAT_SHADED\\n\\tvNormal = normalize( transformedNormal );\\n#endif\\n\\t#include <begin_vertex>\\n\\t#include <morphtarget_vertex>\\n\\t#include <skinning_vertex>\\n\\t#include <displacementmap_vertex>\\n\\t#include <project_vertex>\\n\\t#include <logdepthbuf_vertex>\\n\\t#include <clipping_planes_vertex>\\n\\tvViewPosition = - mvPosition.xyz;\\n\\t#include <worldpos_vertex>\\n\\t#include <envmap_vertex>\\n\\t#include <shadowmap_vertex>\\n\\t#include <fog_vertex>\\n}\\n\",\nmeshphysical_frag:\"#define PHYSICAL\\nuniform vec3 diffuse;\\nuniform vec3 emissive;\\nuniform float roughness;\\nuniform float metalness;\\nuniform float opacity;\\n#ifndef STANDARD\\n\\tuniform float clearCoat;\\n\\tuniform float clearCoatRoughness;\\n#endif\\nvarying vec3 vViewPosition;\\n#ifndef FLAT_SHADED\\n\\tvarying vec3 vNormal;\\n#endif\\n#include <common>\\n#include <packing>\\n#include <dithering_pars_fragment>\\n#include <color_pars_fragment>\\n#include <uv_pars_fragment>\\n#include <uv2_pars_fragment>\\n#include <map_pars_fragment>\\n#include <alphamap_pars_fragment>\\n#include <aomap_pars_fragment>\\n#include <lightmap_pars_fragment>\\n#include <emissivemap_pars_fragment>\\n#include <envmap_pars_fragment>\\n#include <fog_pars_fragment>\\n#include <bsdfs>\\n#include <cube_uv_reflection_fragment>\\n#include <lights_pars>\\n#include <lights_physical_pars_fragment>\\n#include <shadowmap_pars_fragment>\\n#include <bumpmap_pars_fragment>\\n#include <normalmap_pars_fragment>\\n#include <roughnessmap_pars_fragment>\\n#include <metalnessmap_pars_fragment>\\n#include <logdepthbuf_pars_fragment>\\n#include <clipping_planes_pars_fragment>\\nvoid main() {\\n\\t#include <clipping_planes_fragment>\\n\\tvec4 diffuseColor = vec4( diffuse, opacity );\\n\\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\\n\\tvec3 totalEmissiveRadiance = emissive;\\n\\t#include <logdepthbuf_fragment>\\n\\t#include <map_fragment>\\n\\t#include <color_fragment>\\n\\t#include <alphamap_fragment>\\n\\t#include <alphatest_fragment>\\n\\t#include <roughnessmap_fragment>\\n\\t#include <metalnessmap_fragment>\\n\\t#include <normal_fragment>\\n\\t#include <emissivemap_fragment>\\n\\t#include <lights_physical_fragment>\\n\\t#include <lights_template>\\n\\t#include <aomap_fragment>\\n\\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\\n\\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\\n\\t#include <tonemapping_fragment>\\n\\t#include <encodings_fragment>\\n\\t#include <fog_fragment>\\n\\t#include <premultiplied_alpha_fragment>\\n\\t#include <dithering_fragment>\\n}\\n\",\nmeshphysical_vert:\"#define PHYSICAL\\nvarying vec3 vViewPosition;\\n#ifndef FLAT_SHADED\\n\\tvarying vec3 vNormal;\\n#endif\\n#include <common>\\n#include <uv_pars_vertex>\\n#include <uv2_pars_vertex>\\n#include <displacementmap_pars_vertex>\\n#include <color_pars_vertex>\\n#include <fog_pars_vertex>\\n#include <morphtarget_pars_vertex>\\n#include <skinning_pars_vertex>\\n#include <shadowmap_pars_vertex>\\n#include <logdepthbuf_pars_vertex>\\n#include <clipping_planes_pars_vertex>\\nvoid main() {\\n\\t#include <uv_vertex>\\n\\t#include <uv2_vertex>\\n\\t#include <color_vertex>\\n\\t#include <beginnormal_vertex>\\n\\t#include <morphnormal_vertex>\\n\\t#include <skinbase_vertex>\\n\\t#include <skinnormal_vertex>\\n\\t#include <defaultnormal_vertex>\\n#ifndef FLAT_SHADED\\n\\tvNormal = normalize( transformedNormal );\\n#endif\\n\\t#include <begin_vertex>\\n\\t#include <morphtarget_vertex>\\n\\t#include <skinning_vertex>\\n\\t#include <displacementmap_vertex>\\n\\t#include <project_vertex>\\n\\t#include <logdepthbuf_vertex>\\n\\t#include <clipping_planes_vertex>\\n\\tvViewPosition = - mvPosition.xyz;\\n\\t#include <worldpos_vertex>\\n\\t#include <shadowmap_vertex>\\n\\t#include <fog_vertex>\\n}\\n\",\nnormal_frag:\"#define NORMAL\\nuniform float opacity;\\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP )\\n\\tvarying vec3 vViewPosition;\\n#endif\\n#ifndef FLAT_SHADED\\n\\tvarying vec3 vNormal;\\n#endif\\n#include <packing>\\n#include <uv_pars_fragment>\\n#include <bumpmap_pars_fragment>\\n#include <normalmap_pars_fragment>\\n#include <logdepthbuf_pars_fragment>\\nvoid main() {\\n\\t#include <logdepthbuf_fragment>\\n\\t#include <normal_fragment>\\n\\tgl_FragColor = vec4( packNormalToRGB( normal ), opacity );\\n}\\n\",\nnormal_vert:\"#define NORMAL\\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP )\\n\\tvarying vec3 vViewPosition;\\n#endif\\n#ifndef FLAT_SHADED\\n\\tvarying vec3 vNormal;\\n#endif\\n#include <uv_pars_vertex>\\n#include <displacementmap_pars_vertex>\\n#include <morphtarget_pars_vertex>\\n#include <skinning_pars_vertex>\\n#include <logdepthbuf_pars_vertex>\\nvoid main() {\\n\\t#include <uv_vertex>\\n\\t#include <beginnormal_vertex>\\n\\t#include <morphnormal_vertex>\\n\\t#include <skinbase_vertex>\\n\\t#include <skinnormal_vertex>\\n\\t#include <defaultnormal_vertex>\\n#ifndef FLAT_SHADED\\n\\tvNormal = normalize( transformedNormal );\\n#endif\\n\\t#include <begin_vertex>\\n\\t#include <morphtarget_vertex>\\n\\t#include <skinning_vertex>\\n\\t#include <displacementmap_vertex>\\n\\t#include <project_vertex>\\n\\t#include <logdepthbuf_vertex>\\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP )\\n\\tvViewPosition = - mvPosition.xyz;\\n#endif\\n}\\n\",\npoints_frag:\"uniform vec3 diffuse;\\nuniform float opacity;\\n#include <common>\\n#include <packing>\\n#include <color_pars_fragment>\\n#include <map_particle_pars_fragment>\\n#include <fog_pars_fragment>\\n#include <shadowmap_pars_fragment>\\n#include <logdepthbuf_pars_fragment>\\n#include <clipping_planes_pars_fragment>\\nvoid main() {\\n\\t#include <clipping_planes_fragment>\\n\\tvec3 outgoingLight = vec3( 0.0 );\\n\\tvec4 diffuseColor = vec4( diffuse, opacity );\\n\\t#include <logdepthbuf_fragment>\\n\\t#include <map_particle_fragment>\\n\\t#include <color_fragment>\\n\\t#include <alphatest_fragment>\\n\\toutgoingLight = diffuseColor.rgb;\\n\\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\\n\\t#include <premultiplied_alpha_fragment>\\n\\t#include <tonemapping_fragment>\\n\\t#include <encodings_fragment>\\n\\t#include <fog_fragment>\\n}\\n\",\npoints_vert:\"uniform float size;\\nuniform float scale;\\n#include <common>\\n#include <color_pars_vertex>\\n#include <fog_pars_vertex>\\n#include <shadowmap_pars_vertex>\\n#include <logdepthbuf_pars_vertex>\\n#include <clipping_planes_pars_vertex>\\nvoid main() {\\n\\t#include <color_vertex>\\n\\t#include <begin_vertex>\\n\\t#include <project_vertex>\\n\\t#ifdef USE_SIZEATTENUATION\\n\\t\\tgl_PointSize = size * ( scale / - mvPosition.z );\\n\\t#else\\n\\t\\tgl_PointSize = size;\\n\\t#endif\\n\\t#include <logdepthbuf_vertex>\\n\\t#include <clipping_planes_vertex>\\n\\t#include <worldpos_vertex>\\n\\t#include <shadowmap_vertex>\\n\\t#include <fog_vertex>\\n}\\n\",\nshadow_frag:\"uniform vec3 color;\\nuniform float opacity;\\n#include <common>\\n#include <packing>\\n#include <bsdfs>\\n#include <lights_pars>\\n#include <shadowmap_pars_fragment>\\n#include <shadowmask_pars_fragment>\\nvoid main() {\\n\\tgl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );\\n}\\n\",shadow_vert:\"#include <shadowmap_pars_vertex>\\nvoid main() {\\n\\t#include <begin_vertex>\\n\\t#include <project_vertex>\\n\\t#include <worldpos_vertex>\\n\\t#include <shadowmap_vertex>\\n}\\n\"},ib={basic:{uniforms:Da.merge([L.common,\nL.specularmap,L.envmap,L.aomap,L.lightmap,L.fog]),vertexShader:V.meshbasic_vert,fragmentShader:V.meshbasic_frag},lambert:{uniforms:Da.merge([L.common,L.specularmap,L.envmap,L.aomap,L.lightmap,L.emissivemap,L.fog,L.lights,{emissive:{value:new C(0)}}]),vertexShader:V.meshlambert_vert,fragmentShader:V.meshlambert_frag},phong:{uniforms:Da.merge([L.common,L.specularmap,L.envmap,L.aomap,L.lightmap,L.emissivemap,L.bumpmap,L.normalmap,L.displacementmap,L.gradientmap,L.fog,L.lights,{emissive:{value:new C(0)},\nspecular:{value:new C(1118481)},shininess:{value:30}}]),vertexShader:V.meshphong_vert,fragmentShader:V.meshphong_frag},standard:{uniforms:Da.merge([L.common,L.envmap,L.aomap,L.lightmap,L.emissivemap,L.bumpmap,L.normalmap,L.displacementmap,L.roughnessmap,L.metalnessmap,L.fog,L.lights,{emissive:{value:new C(0)},roughness:{value:.5},metalness:{value:.5},envMapIntensity:{value:1}}]),vertexShader:V.meshphysical_vert,fragmentShader:V.meshphysical_frag},points:{uniforms:Da.merge([L.points,L.fog]),vertexShader:V.points_vert,\nfragmentShader:V.points_frag},dashed:{uniforms:Da.merge([L.common,L.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:V.linedashed_vert,fragmentShader:V.linedashed_frag},depth:{uniforms:Da.merge([L.common,L.displacementmap]),vertexShader:V.depth_vert,fragmentShader:V.depth_frag},normal:{uniforms:Da.merge([L.common,L.bumpmap,L.normalmap,L.displacementmap,{opacity:{value:1}}]),vertexShader:V.normal_vert,fragmentShader:V.normal_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},\nopacity:{value:1}},vertexShader:V.cube_vert,fragmentShader:V.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:V.equirect_vert,fragmentShader:V.equirect_frag},distanceRGBA:{uniforms:Da.merge([L.common,L.displacementmap,{referencePosition:{value:new n},nearDistance:{value:1},farDistance:{value:1E3}}]),vertexShader:V.distanceRGBA_vert,fragmentShader:V.distanceRGBA_frag},shadow:{uniforms:Da.merge([L.lights,{color:{value:new C(0)},opacity:{value:1}}]),vertexShader:V.shadow_vert,fragmentShader:V.shadow_frag}};\nib.physical={uniforms:Da.merge([ib.standard.uniforms,{clearCoat:{value:0},clearCoatRoughness:{value:0}}]),vertexShader:V.meshphysical_vert,fragmentShader:V.meshphysical_frag};Object.assign(id.prototype,{set:function(a,b){this.min.copy(a);this.max.copy(b);return this},setFromPoints:function(a){this.makeEmpty();for(var b=0,c=a.length;b<c;b++)this.expandByPoint(a[b]);return this},setFromCenterAndSize:function(){var a=new D;return function(b,c){c=a.copy(c).multiplyScalar(.5);this.min.copy(b).sub(c);this.max.copy(b).add(c);\nreturn this}}(),clone:function(){return(new this.constructor).copy(this)},copy:function(a){this.min.copy(a.min);this.max.copy(a.max);return this},makeEmpty:function(){this.min.x=this.min.y=Infinity;this.max.x=this.max.y=-Infinity;return this},isEmpty:function(){return this.max.x<this.min.x||this.max.y<this.min.y},getCenter:function(a){a=a||new D;return this.isEmpty()?a.set(0,0):a.addVectors(this.min,this.max).multiplyScalar(.5)},getSize:function(a){a=a||new D;return this.isEmpty()?a.set(0,0):a.subVectors(this.max,\nthis.min)},expandByPoint:function(a){this.min.min(a);this.max.max(a);return this},expandByVector:function(a){this.min.sub(a);this.max.add(a);return this},expandByScalar:function(a){this.min.addScalar(-a);this.max.addScalar(a);return this},containsPoint:function(a){return a.x<this.min.x||a.x>this.max.x||a.y<this.min.y||a.y>this.max.y?!1:!0},containsBox:function(a){return this.min.x<=a.min.x&&a.max.x<=this.max.x&&this.min.y<=a.min.y&&a.max.y<=this.max.y},getParameter:function(a,b){return(b||new D).set((a.x-\nthis.min.x)/(this.max.x-this.min.x),(a.y-this.min.y)/(this.max.y-this.min.y))},intersectsBox:function(a){return a.max.x<this.min.x||a.min.x>this.max.x||a.max.y<this.min.y||a.min.y>this.max.y?!1:!0},clampPoint:function(a,b){return(b||new D).copy(a).clamp(this.min,this.max)},distanceToPoint:function(){var a=new D;return function(b){return a.copy(b).clamp(this.min,this.max).sub(b).length()}}(),intersect:function(a){this.min.max(a.min);this.max.min(a.max);return this},union:function(a){this.min.min(a.min);\nthis.max.max(a.max);return this},translate:function(a){this.min.add(a);this.max.add(a);return this},equals:function(a){return a.min.equals(this.min)&&a.max.equals(this.max)}});oc.prototype=Object.create(N.prototype);oc.prototype.constructor=oc;var Mf=0;Object.assign(P.prototype,na.prototype,{isMaterial:!0,onBeforeCompile:function(){},setValues:function(a){if(void 0!==a)for(var b in a){var c=a[b];if(void 0===c)console.warn(\"THREE.Material: '\"+b+\"' parameter is undefined.\");else if(\"shading\"===b)console.warn(\"THREE.\"+\nthis.type+\": .shading has been removed. Use the boolean .flatShading instead.\"),this.flatShading=1===c?!0:!1;else{var d=this[b];void 0===d?console.warn(\"THREE.\"+this.type+\": '\"+b+\"' is not a property of this material.\"):d&&d.isColor?d.set(c):d&&d.isVector3&&c&&c.isVector3?d.copy(c):this[b]=\"overdraw\"===b?Number(c):c}}},toJSON:function(a){function b(a){var b=[],c;for(c in a){var d=a[c];delete d.metadata;b.push(d)}return b}var c=void 0===a;c&&(a={textures:{},images:{}});var d={metadata:{version:4.5,\ntype:\"Material\",generator:\"Material.toJSON\"}};d.uuid=this.uuid;d.type=this.type;\"\"!==this.name&&(d.name=this.name);this.color&&this.color.isColor&&(d.color=this.color.getHex());void 0!==this.roughness&&(d.roughness=this.roughness);void 0!==this.metalness&&(d.metalness=this.metalness);this.emissive&&this.emissive.isColor&&(d.emissive=this.emissive.getHex());this.specular&&this.specular.isColor&&(d.specular=this.specular.getHex());void 0!==this.shininess&&(d.shininess=this.shininess);void 0!==this.clearCoat&&\n(d.clearCoat=this.clearCoat);void 0!==this.clearCoatRoughness&&(d.clearCoatRoughness=this.clearCoatRoughness);this.map&&this.map.isTexture&&(d.map=this.map.toJSON(a).uuid);this.alphaMap&&this.alphaMap.isTexture&&(d.alphaMap=this.alphaMap.toJSON(a).uuid);this.lightMap&&this.lightMap.isTexture&&(d.lightMap=this.lightMap.toJSON(a).uuid);this.bumpMap&&this.bumpMap.isTexture&&(d.bumpMap=this.bumpMap.toJSON(a).uuid,d.bumpScale=this.bumpScale);this.normalMap&&this.normalMap.isTexture&&(d.normalMap=this.normalMap.toJSON(a).uuid,\nd.normalScale=this.normalScale.toArray());this.displacementMap&&this.displacementMap.isTexture&&(d.displacementMap=this.displacementMap.toJSON(a).uuid,d.displacementScale=this.displacementScale,d.displacementBias=this.displacementBias);this.roughnessMap&&this.roughnessMap.isTexture&&(d.roughnessMap=this.roughnessMap.toJSON(a).uuid);this.metalnessMap&&this.metalnessMap.isTexture&&(d.metalnessMap=this.metalnessMap.toJSON(a).uuid);this.emissiveMap&&this.emissiveMap.isTexture&&(d.emissiveMap=this.emissiveMap.toJSON(a).uuid);\nthis.specularMap&&this.specularMap.isTexture&&(d.specularMap=this.specularMap.toJSON(a).uuid);this.envMap&&this.envMap.isTexture&&(d.envMap=this.envMap.toJSON(a).uuid,d.reflectivity=this.reflectivity);this.gradientMap&&this.gradientMap.isTexture&&(d.gradientMap=this.gradientMap.toJSON(a).uuid);void 0!==this.size&&(d.size=this.size);void 0!==this.sizeAttenuation&&(d.sizeAttenuation=this.sizeAttenuation);1!==this.blending&&(d.blending=this.blending);!0===this.flatShading&&(d.flatShading=this.flatShading);\n0!==this.side&&(d.side=this.side);0!==this.vertexColors&&(d.vertexColors=this.vertexColors);1>this.opacity&&(d.opacity=this.opacity);!0===this.transparent&&(d.transparent=this.transparent);d.depthFunc=this.depthFunc;d.depthTest=this.depthTest;d.depthWrite=this.depthWrite;!0===this.dithering&&(d.dithering=!0);0<this.alphaTest&&(d.alphaTest=this.alphaTest);!0===this.premultipliedAlpha&&(d.premultipliedAlpha=this.premultipliedAlpha);!0===this.wireframe&&(d.wireframe=this.wireframe);1<this.wireframeLinewidth&&\n(d.wireframeLinewidth=this.wireframeLinewidth);\"round\"!==this.wireframeLinecap&&(d.wireframeLinecap=this.wireframeLinecap);\"round\"!==this.wireframeLinejoin&&(d.wireframeLinejoin=this.wireframeLinejoin);!0===this.morphTargets&&(d.morphTargets=!0);!0===this.skinning&&(d.skinning=!0);!1===this.visible&&(d.visible=!1);\"{}\"!==JSON.stringify(this.userData)&&(d.userData=this.userData);c&&(c=b(a.textures),a=b(a.images),0<c.length&&(d.textures=c),0<a.length&&(d.images=a));return d},clone:function(){return(new this.constructor).copy(this)},\ncopy:function(a){this.name=a.name;this.fog=a.fog;this.lights=a.lights;this.blending=a.blending;this.side=a.side;this.flatShading=a.flatShading;this.vertexColors=a.vertexColors;this.opacity=a.opacity;this.transparent=a.transparent;this.blendSrc=a.blendSrc;this.blendDst=a.blendDst;this.blendEquation=a.blendEquation;this.blendSrcAlpha=a.blendSrcAlpha;this.blendDstAlpha=a.blendDstAlpha;this.blendEquationAlpha=a.blendEquationAlpha;this.depthFunc=a.depthFunc;this.depthTest=a.depthTest;this.depthWrite=a.depthWrite;\nthis.colorWrite=a.colorWrite;this.precision=a.precision;this.polygonOffset=a.polygonOffset;this.polygonOffsetFactor=a.polygonOffsetFactor;this.polygonOffsetUnits=a.polygonOffsetUnits;this.dithering=a.dithering;this.alphaTest=a.alphaTest;this.premultipliedAlpha=a.premultipliedAlpha;this.overdraw=a.overdraw;this.visible=a.visible;this.userData=JSON.parse(JSON.stringify(a.userData));this.clipShadows=a.clipShadows;this.clipIntersection=a.clipIntersection;a=a.clippingPlanes;var b=null;if(null!==a)for(var c=\na.length,b=Array(c),d=0;d!==c;++d)b[d]=a[d].clone();this.clippingPlanes=b;return this},dispose:function(){this.dispatchEvent({type:\"dispose\"})}});ya.prototype=Object.create(P.prototype);ya.prototype.constructor=ya;ya.prototype.isShaderMaterial=!0;ya.prototype.copy=function(a){P.prototype.copy.call(this,a);this.fragmentShader=a.fragmentShader;this.vertexShader=a.vertexShader;this.uniforms=Da.clone(a.uniforms);this.defines=a.defines;this.wireframe=a.wireframe;this.wireframeLinewidth=a.wireframeLinewidth;\nthis.lights=a.lights;this.clipping=a.clipping;this.skinning=a.skinning;this.morphTargets=a.morphTargets;this.morphNormals=a.morphNormals;this.extensions=a.extensions;return this};ya.prototype.toJSON=function(a){a=P.prototype.toJSON.call(this,a);a.uniforms=this.uniforms;a.vertexShader=this.vertexShader;a.fragmentShader=this.fragmentShader;return a};Wa.prototype=Object.create(P.prototype);Wa.prototype.constructor=Wa;Wa.prototype.isMeshDepthMaterial=!0;Wa.prototype.copy=function(a){P.prototype.copy.call(this,\na);this.depthPacking=a.depthPacking;this.skinning=a.skinning;this.morphTargets=a.morphTargets;this.map=a.map;this.alphaMap=a.alphaMap;this.displacementMap=a.displacementMap;this.displacementScale=a.displacementScale;this.displacementBias=a.displacementBias;this.wireframe=a.wireframe;this.wireframeLinewidth=a.wireframeLinewidth;return this};Xa.prototype=Object.create(P.prototype);Xa.prototype.constructor=Xa;Xa.prototype.isMeshDistanceMaterial=!0;Xa.prototype.copy=function(a){P.prototype.copy.call(this,\na);this.referencePosition.copy(a.referencePosition);this.nearDistance=a.nearDistance;this.farDistance=a.farDistance;this.skinning=a.skinning;this.morphTargets=a.morphTargets;this.map=a.map;this.alphaMap=a.alphaMap;this.displacementMap=a.displacementMap;this.displacementScale=a.displacementScale;this.displacementBias=a.displacementBias;return this};Object.assign(Pa.prototype,{isBox3:!0,set:function(a,b){this.min.copy(a);this.max.copy(b);return this},setFromArray:function(a){for(var b=Infinity,c=Infinity,\nd=Infinity,e=-Infinity,f=-Infinity,g=-Infinity,h=0,k=a.length;h<k;h+=3){var l=a[h],q=a[h+1],p=a[h+2];l<b&&(b=l);q<c&&(c=q);p<d&&(d=p);l>e&&(e=l);q>f&&(f=q);p>g&&(g=p)}this.min.set(b,c,d);this.max.set(e,f,g);return this},setFromBufferAttribute:function(a){for(var b=Infinity,c=Infinity,d=Infinity,e=-Infinity,f=-Infinity,g=-Infinity,h=0,k=a.count;h<k;h++){var l=a.getX(h),q=a.getY(h),p=a.getZ(h);l<b&&(b=l);q<c&&(c=q);p<d&&(d=p);l>e&&(e=l);q>f&&(f=q);p>g&&(g=p)}this.min.set(b,c,d);this.max.set(e,f,g);\nreturn this},setFromPoints:function(a){this.makeEmpty();for(var b=0,c=a.length;b<c;b++)this.expandByPoint(a[b]);return this},setFromCenterAndSize:function(){var a=new n;return function(b,c){c=a.copy(c).multiplyScalar(.5);this.min.copy(b).sub(c);this.max.copy(b).add(c);return this}}(),setFromObject:function(a){this.makeEmpty();return this.expandByObject(a)},clone:function(){return(new this.constructor).copy(this)},copy:function(a){this.min.copy(a.min);this.max.copy(a.max);return this},makeEmpty:function(){this.min.x=\nthis.min.y=this.min.z=Infinity;this.max.x=this.max.y=this.max.z=-Infinity;return this},isEmpty:function(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z},getCenter:function(a){a=a||new n;return this.isEmpty()?a.set(0,0,0):a.addVectors(this.min,this.max).multiplyScalar(.5)},getSize:function(a){a=a||new n;return this.isEmpty()?a.set(0,0,0):a.subVectors(this.max,this.min)},expandByPoint:function(a){this.min.min(a);this.max.max(a);return this},expandByVector:function(a){this.min.sub(a);\nthis.max.add(a);return this},expandByScalar:function(a){this.min.addScalar(-a);this.max.addScalar(a);return this},expandByObject:function(){var a=new n;return function(b){var c=this;b.updateMatrixWorld(!0);b.traverse(function(b){var d;var f=b.geometry;if(void 0!==f)if(f.isGeometry){var g=f.vertices;f=0;for(d=g.length;f<d;f++)a.copy(g[f]),a.applyMatrix4(b.matrixWorld),c.expandByPoint(a)}else if(f.isBufferGeometry&&(g=f.attributes.position,void 0!==g))for(f=0,d=g.count;f<d;f++)a.fromBufferAttribute(g,\nf).applyMatrix4(b.matrixWorld),c.expandByPoint(a)});return this}}(),containsPoint:function(a){return a.x<this.min.x||a.x>this.max.x||a.y<this.min.y||a.y>this.max.y||a.z<this.min.z||a.z>this.max.z?!1:!0},containsBox:function(a){return this.min.x<=a.min.x&&a.max.x<=this.max.x&&this.min.y<=a.min.y&&a.max.y<=this.max.y&&this.min.z<=a.min.z&&a.max.z<=this.max.z},getParameter:function(a,b){return(b||new n).set((a.x-this.min.x)/(this.max.x-this.min.x),(a.y-this.min.y)/(this.max.y-this.min.y),(a.z-this.min.z)/\n(this.max.z-this.min.z))},intersectsBox:function(a){return a.max.x<this.min.x||a.min.x>this.max.x||a.max.y<this.min.y||a.min.y>this.max.y||a.max.z<this.min.z||a.min.z>this.max.z?!1:!0},intersectsSphere:function(){var a=new n;return function(b){this.clampPoint(b.center,a);return a.distanceToSquared(b.center)<=b.radius*b.radius}}(),intersectsPlane:function(a){if(0<a.normal.x){var b=a.normal.x*this.min.x;var c=a.normal.x*this.max.x}else b=a.normal.x*this.max.x,c=a.normal.x*this.min.x;0<a.normal.y?(b+=\na.normal.y*this.min.y,c+=a.normal.y*this.max.y):(b+=a.normal.y*this.max.y,c+=a.normal.y*this.min.y);0<a.normal.z?(b+=a.normal.z*this.min.z,c+=a.normal.z*this.max.z):(b+=a.normal.z*this.max.z,c+=a.normal.z*this.min.z);return b<=a.constant&&c>=a.constant},clampPoint:function(a,b){return(b||new n).copy(a).clamp(this.min,this.max)},distanceToPoint:function(){var a=new n;return function(b){return a.copy(b).clamp(this.min,this.max).sub(b).length()}}(),getBoundingSphere:function(){var a=new n;return function(b){b=\nb||new Ca;this.getCenter(b.center);b.radius=.5*this.getSize(a).length();return b}}(),intersect:function(a){this.min.max(a.min);this.max.min(a.max);this.isEmpty()&&this.makeEmpty();return this},union:function(a){this.min.min(a.min);this.max.max(a.max);return this},applyMatrix4:function(){var a=[new n,new n,new n,new n,new n,new n,new n,new n];return function(b){if(this.isEmpty())return this;a[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(b);a[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(b);\na[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(b);a[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(b);a[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(b);a[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(b);a[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(b);a[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(b);this.setFromPoints(a);return this}}(),translate:function(a){this.min.add(a);this.max.add(a);return this},equals:function(a){return a.min.equals(this.min)&&\na.max.equals(this.max)}});Object.assign(Ca.prototype,{set:function(a,b){this.center.copy(a);this.radius=b;return this},setFromPoints:function(){var a=new Pa;return function(b,c){var d=this.center;void 0!==c?d.copy(c):a.setFromPoints(b).getCenter(d);for(var e=c=0,f=b.length;e<f;e++)c=Math.max(c,d.distanceToSquared(b[e]));this.radius=Math.sqrt(c);return this}}(),clone:function(){return(new this.constructor).copy(this)},copy:function(a){this.center.copy(a.center);this.radius=a.radius;return this},empty:function(){return 0>=\nthis.radius},containsPoint:function(a){return a.distanceToSquared(this.center)<=this.radius*this.radius},distanceToPoint:function(a){return a.distanceTo(this.center)-this.radius},intersectsSphere:function(a){var b=this.radius+a.radius;return a.center.distanceToSquared(this.center)<=b*b},intersectsBox:function(a){return a.intersectsSphere(this)},intersectsPlane:function(a){return Math.abs(a.distanceToPoint(this.center))<=this.radius},clampPoint:function(a,b){var c=this.center.distanceToSquared(a);\nb=b||new n;b.copy(a);c>this.radius*this.radius&&(b.sub(this.center).normalize(),b.multiplyScalar(this.radius).add(this.center));return b},getBoundingBox:function(a){a=a||new Pa;a.set(this.center,this.center);a.expandByScalar(this.radius);return a},applyMatrix4:function(a){this.center.applyMatrix4(a);this.radius*=a.getMaxScaleOnAxis();return this},translate:function(a){this.center.add(a);return this},equals:function(a){return a.center.equals(this.center)&&a.radius===this.radius}});Object.assign(qa.prototype,\n{isMatrix3:!0,set:function(a,b,c,d,e,f,g,h,k){var l=this.elements;l[0]=a;l[1]=d;l[2]=g;l[3]=b;l[4]=e;l[5]=h;l[6]=c;l[7]=f;l[8]=k;return this},identity:function(){this.set(1,0,0,0,1,0,0,0,1);return this},clone:function(){return(new this.constructor).fromArray(this.elements)},copy:function(a){var b=this.elements;a=a.elements;b[0]=a[0];b[1]=a[1];b[2]=a[2];b[3]=a[3];b[4]=a[4];b[5]=a[5];b[6]=a[6];b[7]=a[7];b[8]=a[8];return this},setFromMatrix4:function(a){a=a.elements;this.set(a[0],a[4],a[8],a[1],a[5],\na[9],a[2],a[6],a[10]);return this},applyToBufferAttribute:function(){var a=new n;return function(b){for(var c=0,d=b.count;c<d;c++)a.x=b.getX(c),a.y=b.getY(c),a.z=b.getZ(c),a.applyMatrix3(this),b.setXYZ(c,a.x,a.y,a.z);return b}}(),multiply:function(a){return this.multiplyMatrices(this,a)},premultiply:function(a){return this.multiplyMatrices(a,this)},multiplyMatrices:function(a,b){var c=a.elements,d=b.elements;b=this.elements;a=c[0];var e=c[3],f=c[6],g=c[1],h=c[4],k=c[7],l=c[2],q=c[5],c=c[8],p=d[0],\nm=d[3],r=d[6],n=d[1],u=d[4],x=d[7],y=d[2],A=d[5],d=d[8];b[0]=a*p+e*n+f*y;b[3]=a*m+e*u+f*A;b[6]=a*r+e*x+f*d;b[1]=g*p+h*n+k*y;b[4]=g*m+h*u+k*A;b[7]=g*r+h*x+k*d;b[2]=l*p+q*n+c*y;b[5]=l*m+q*u+c*A;b[8]=l*r+q*x+c*d;return this},multiplyScalar:function(a){var b=this.elements;b[0]*=a;b[3]*=a;b[6]*=a;b[1]*=a;b[4]*=a;b[7]*=a;b[2]*=a;b[5]*=a;b[8]*=a;return this},determinant:function(){var a=this.elements,b=a[0],c=a[1],d=a[2],e=a[3],f=a[4],g=a[5],h=a[6],k=a[7],a=a[8];return b*f*a-b*g*k-c*e*a+c*g*h+d*e*k-d*f*\nh},getInverse:function(a,b){a&&a.isMatrix4&&console.error(\"THREE.Matrix3: .getInverse() no longer takes a Matrix4 argument.\");var c=a.elements;a=this.elements;var d=c[0],e=c[1],f=c[2],g=c[3],h=c[4],k=c[5],l=c[6],q=c[7],c=c[8],p=c*h-k*q,m=k*l-c*g,r=q*g-h*l,n=d*p+e*m+f*r;if(0===n){if(!0===b)throw Error(\"THREE.Matrix3: .getInverse() can't invert matrix, determinant is 0\");console.warn(\"THREE.Matrix3: .getInverse() can't invert matrix, determinant is 0\");return this.identity()}b=1/n;a[0]=p*b;a[1]=(f*\nq-c*e)*b;a[2]=(k*e-f*h)*b;a[3]=m*b;a[4]=(c*d-f*l)*b;a[5]=(f*g-k*d)*b;a[6]=r*b;a[7]=(e*l-q*d)*b;a[8]=(h*d-e*g)*b;return this},transpose:function(){var a=this.elements;var b=a[1];a[1]=a[3];a[3]=b;b=a[2];a[2]=a[6];a[6]=b;b=a[5];a[5]=a[7];a[7]=b;return this},getNormalMatrix:function(a){return this.setFromMatrix4(a).getInverse(this).transpose()},transposeIntoArray:function(a){var b=this.elements;a[0]=b[0];a[1]=b[3];a[2]=b[6];a[3]=b[1];a[4]=b[4];a[5]=b[7];a[6]=b[2];a[7]=b[5];a[8]=b[8];return this},equals:function(a){var b=\nthis.elements;a=a.elements;for(var c=0;9>c;c++)if(b[c]!==a[c])return!1;return!0},fromArray:function(a,b){void 0===b&&(b=0);for(var c=0;9>c;c++)this.elements[c]=a[c+b];return this},toArray:function(a,b){void 0===a&&(a=[]);void 0===b&&(b=0);var c=this.elements;a[b]=c[0];a[b+1]=c[1];a[b+2]=c[2];a[b+3]=c[3];a[b+4]=c[4];a[b+5]=c[5];a[b+6]=c[6];a[b+7]=c[7];a[b+8]=c[8];return a}});Object.assign(za.prototype,{set:function(a,b){this.normal.copy(a);this.constant=b;return this},setComponents:function(a,b,c,\nd){this.normal.set(a,b,c);this.constant=d;return this},setFromNormalAndCoplanarPoint:function(a,b){this.normal.copy(a);this.constant=-b.dot(this.normal);return this},setFromCoplanarPoints:function(){var a=new n,b=new n;return function(c,d,e){d=a.subVectors(e,d).cross(b.subVectors(c,d)).normalize();this.setFromNormalAndCoplanarPoint(d,c);return this}}(),clone:function(){return(new this.constructor).copy(this)},copy:function(a){this.normal.copy(a.normal);this.constant=a.constant;return this},normalize:function(){var a=\n1/this.normal.length();this.normal.multiplyScalar(a);this.constant*=a;return this},negate:function(){this.constant*=-1;this.normal.negate();return this},distanceToPoint:function(a){return this.normal.dot(a)+this.constant},distanceToSphere:function(a){return this.distanceToPoint(a.center)-a.radius},projectPoint:function(a,b){return(b||new n).copy(this.normal).multiplyScalar(-this.distanceToPoint(a)).add(a)},intersectLine:function(){var a=new n;return function(b,c){c=c||new n;var d=b.delta(a),e=this.normal.dot(d);\nif(0===e){if(0===this.distanceToPoint(b.start))return c.copy(b.start)}else if(e=-(b.start.dot(this.normal)+this.constant)/e,!(0>e||1<e))return c.copy(d).multiplyScalar(e).add(b.start)}}(),intersectsLine:function(a){var b=this.distanceToPoint(a.start);a=this.distanceToPoint(a.end);return 0>b&&0<a||0>a&&0<b},intersectsBox:function(a){return a.intersectsPlane(this)},intersectsSphere:function(a){return a.intersectsPlane(this)},coplanarPoint:function(a){return(a||new n).copy(this.normal).multiplyScalar(-this.constant)},\napplyMatrix4:function(){var a=new n,b=new qa;return function(c,d){d=d||b.getNormalMatrix(c);c=this.coplanarPoint(a).applyMatrix4(c);d=this.normal.applyMatrix3(d).normalize();this.constant=-c.dot(d);return this}}(),translate:function(a){this.constant-=a.dot(this.normal);return this},equals:function(a){return a.normal.equals(this.normal)&&a.constant===this.constant}});Object.assign(kd.prototype,{set:function(a,b,c,d,e,f){var g=this.planes;g[0].copy(a);g[1].copy(b);g[2].copy(c);g[3].copy(d);g[4].copy(e);\ng[5].copy(f);return this},clone:function(){return(new this.constructor).copy(this)},copy:function(a){for(var b=this.planes,c=0;6>c;c++)b[c].copy(a.planes[c]);return this},setFromMatrix:function(a){var b=this.planes,c=a.elements;a=c[0];var d=c[1],e=c[2],f=c[3],g=c[4],h=c[5],k=c[6],l=c[7],q=c[8],p=c[9],m=c[10],r=c[11],n=c[12],u=c[13],x=c[14],c=c[15];b[0].setComponents(f-a,l-g,r-q,c-n).normalize();b[1].setComponents(f+a,l+g,r+q,c+n).normalize();b[2].setComponents(f+d,l+h,r+p,c+u).normalize();b[3].setComponents(f-\nd,l-h,r-p,c-u).normalize();b[4].setComponents(f-e,l-k,r-m,c-x).normalize();b[5].setComponents(f+e,l+k,r+m,c+x).normalize();return this},intersectsObject:function(){var a=new Ca;return function(b){var c=b.geometry;null===c.boundingSphere&&c.computeBoundingSphere();a.copy(c.boundingSphere).applyMatrix4(b.matrixWorld);return this.intersectsSphere(a)}}(),intersectsSprite:function(){var a=new Ca;return function(b){a.center.set(0,0,0);a.radius=.7071067811865476;a.applyMatrix4(b.matrixWorld);return this.intersectsSphere(a)}}(),\nintersectsSphere:function(a){var b=this.planes,c=a.center;a=-a.radius;for(var d=0;6>d;d++)if(b[d].distanceToPoint(c)<a)return!1;return!0},intersectsBox:function(){var a=new n,b=new n;return function(c){for(var d=this.planes,e=0;6>e;e++){var f=d[e];a.x=0<f.normal.x?c.min.x:c.max.x;b.x=0<f.normal.x?c.max.x:c.min.x;a.y=0<f.normal.y?c.min.y:c.max.y;b.y=0<f.normal.y?c.max.y:c.min.y;a.z=0<f.normal.z?c.min.z:c.max.z;b.z=0<f.normal.z?c.max.z:c.min.z;var g=f.distanceToPoint(a),f=f.distanceToPoint(b);if(0>\ng&&0>f)return!1}return!0}}(),containsPoint:function(a){for(var b=this.planes,c=0;6>c;c++)if(0>b[c].distanceToPoint(a))return!1;return!0}});Ya.RotationOrders=\"XYZ YZX ZXY XZY YXZ ZYX\".split(\" \");Ya.DefaultOrder=\"XYZ\";Object.defineProperties(Ya.prototype,{x:{get:function(){return this._x},set:function(a){this._x=a;this.onChangeCallback()}},y:{get:function(){return this._y},set:function(a){this._y=a;this.onChangeCallback()}},z:{get:function(){return this._z},set:function(a){this._z=a;this.onChangeCallback()}},\norder:{get:function(){return this._order},set:function(a){this._order=a;this.onChangeCallback()}}});Object.assign(Ya.prototype,{isEuler:!0,set:function(a,b,c,d){this._x=a;this._y=b;this._z=c;this._order=d||this._order;this.onChangeCallback();return this},clone:function(){return new this.constructor(this._x,this._y,this._z,this._order)},copy:function(a){this._x=a._x;this._y=a._y;this._z=a._z;this._order=a._order;this.onChangeCallback();return this},setFromRotationMatrix:function(a,b,c){var d=R.clamp,\ne=a.elements;a=e[0];var f=e[4],g=e[8],h=e[1],k=e[5],l=e[9],q=e[2],p=e[6],e=e[10];b=b||this._order;\"XYZ\"===b?(this._y=Math.asin(d(g,-1,1)),.99999>Math.abs(g)?(this._x=Math.atan2(-l,e),this._z=Math.atan2(-f,a)):(this._x=Math.atan2(p,k),this._z=0)):\"YXZ\"===b?(this._x=Math.asin(-d(l,-1,1)),.99999>Math.abs(l)?(this._y=Math.atan2(g,e),this._z=Math.atan2(h,k)):(this._y=Math.atan2(-q,a),this._z=0)):\"ZXY\"===b?(this._x=Math.asin(d(p,-1,1)),.99999>Math.abs(p)?(this._y=Math.atan2(-q,e),this._z=Math.atan2(-f,\nk)):(this._y=0,this._z=Math.atan2(h,a))):\"ZYX\"===b?(this._y=Math.asin(-d(q,-1,1)),.99999>Math.abs(q)?(this._x=Math.atan2(p,e),this._z=Math.atan2(h,a)):(this._x=0,this._z=Math.atan2(-f,k))):\"YZX\"===b?(this._z=Math.asin(d(h,-1,1)),.99999>Math.abs(h)?(this._x=Math.atan2(-l,k),this._y=Math.atan2(-q,a)):(this._x=0,this._y=Math.atan2(g,e))):\"XZY\"===b?(this._z=Math.asin(-d(f,-1,1)),.99999>Math.abs(f)?(this._x=Math.atan2(p,k),this._y=Math.atan2(g,a)):(this._x=Math.atan2(-l,e),this._y=0)):console.warn(\"THREE.Euler: .setFromRotationMatrix() given unsupported order: \"+\nb);this._order=b;if(!1!==c)this.onChangeCallback();return this},setFromQuaternion:function(){var a=new O;return function(b,c,d){a.makeRotationFromQuaternion(b);return this.setFromRotationMatrix(a,c,d)}}(),setFromVector3:function(a,b){return this.set(a.x,a.y,a.z,b||this._order)},reorder:function(){var a=new ia;return function(b){a.setFromEuler(this);return this.setFromQuaternion(a,b)}}(),equals:function(a){return a._x===this._x&&a._y===this._y&&a._z===this._z&&a._order===this._order},fromArray:function(a){this._x=\na[0];this._y=a[1];this._z=a[2];void 0!==a[3]&&(this._order=a[3]);this.onChangeCallback();return this},toArray:function(a,b){void 0===a&&(a=[]);void 0===b&&(b=0);a[b]=this._x;a[b+1]=this._y;a[b+2]=this._z;a[b+3]=this._order;return a},toVector3:function(a){return a?a.set(this._x,this._y,this._z):new n(this._x,this._y,this._z)},onChange:function(a){this.onChangeCallback=a;return this},onChangeCallback:function(){}});Object.assign(Qd.prototype,{set:function(a){this.mask=1<<a|0},enable:function(a){this.mask=\nthis.mask|1<<a|0},toggle:function(a){this.mask^=1<<a|0},disable:function(a){this.mask&=~(1<<a|0)},test:function(a){return 0!==(this.mask&a.mask)}});var Of=0;w.DefaultUp=new n(0,1,0);w.DefaultMatrixAutoUpdate=!0;Object.assign(w.prototype,na.prototype,{isObject3D:!0,onBeforeRender:function(){},onAfterRender:function(){},applyMatrix:function(a){this.matrix.multiplyMatrices(a,this.matrix);this.matrix.decompose(this.position,this.quaternion,this.scale)},applyQuaternion:function(a){this.quaternion.premultiply(a);\nreturn this},setRotationFromAxisAngle:function(a,b){this.quaternion.setFromAxisAngle(a,b)},setRotationFromEuler:function(a){this.quaternion.setFromEuler(a,!0)},setRotationFromMatrix:function(a){this.quaternion.setFromRotationMatrix(a)},setRotationFromQuaternion:function(a){this.quaternion.copy(a)},rotateOnAxis:function(){var a=new ia;return function(b,c){a.setFromAxisAngle(b,c);this.quaternion.multiply(a);return this}}(),rotateX:function(){var a=new n(1,0,0);return function(b){return this.rotateOnAxis(a,\nb)}}(),rotateY:function(){var a=new n(0,1,0);return function(b){return this.rotateOnAxis(a,b)}}(),rotateZ:function(){var a=new n(0,0,1);return function(b){return this.rotateOnAxis(a,b)}}(),translateOnAxis:function(){var a=new n;return function(b,c){a.copy(b).applyQuaternion(this.quaternion);this.position.add(a.multiplyScalar(c));return this}}(),translateX:function(){var a=new n(1,0,0);return function(b){return this.translateOnAxis(a,b)}}(),translateY:function(){var a=new n(0,1,0);return function(b){return this.translateOnAxis(a,\nb)}}(),translateZ:function(){var a=new n(0,0,1);return function(b){return this.translateOnAxis(a,b)}}(),localToWorld:function(a){return a.applyMatrix4(this.matrixWorld)},worldToLocal:function(){var a=new O;return function(b){return b.applyMatrix4(a.getInverse(this.matrixWorld))}}(),lookAt:function(){var a=new O;return function(b){this.isCamera?a.lookAt(this.position,b,this.up):a.lookAt(b,this.position,this.up);this.quaternion.setFromRotationMatrix(a)}}(),add:function(a){if(1<arguments.length){for(var b=\n0;b<arguments.length;b++)this.add(arguments[b]);return this}if(a===this)return console.error(\"THREE.Object3D.add: object can't be added as a child of itself.\",a),this;a&&a.isObject3D?(null!==a.parent&&a.parent.remove(a),a.parent=this,a.dispatchEvent({type:\"added\"}),this.children.push(a)):console.error(\"THREE.Object3D.add: object not an instance of THREE.Object3D.\",a);return this},remove:function(a){if(1<arguments.length){for(var b=0;b<arguments.length;b++)this.remove(arguments[b]);return this}b=this.children.indexOf(a);\n-1!==b&&(a.parent=null,a.dispatchEvent({type:\"removed\"}),this.children.splice(b,1));return this},getObjectById:function(a){return this.getObjectByProperty(\"id\",a)},getObjectByName:function(a){return this.getObjectByProperty(\"name\",a)},getObjectByProperty:function(a,b){if(this[a]===b)return this;for(var c=0,d=this.children.length;c<d;c++){var e=this.children[c].getObjectByProperty(a,b);if(void 0!==e)return e}},getWorldPosition:function(a){a=a||new n;this.updateMatrixWorld(!0);return a.setFromMatrixPosition(this.matrixWorld)},\ngetWorldQuaternion:function(){var a=new n,b=new n;return function(c){c=c||new ia;this.updateMatrixWorld(!0);this.matrixWorld.decompose(a,c,b);return c}}(),getWorldRotation:function(){var a=new ia;return function(b){b=b||new Ya;this.getWorldQuaternion(a);return b.setFromQuaternion(a,this.rotation.order,!1)}}(),getWorldScale:function(){var a=new n,b=new ia;return function(c){c=c||new n;this.updateMatrixWorld(!0);this.matrixWorld.decompose(a,b,c);return c}}(),getWorldDirection:function(){var a=new ia;\nreturn function(b){b=b||new n;this.getWorldQuaternion(a);return b.set(0,0,1).applyQuaternion(a)}}(),raycast:function(){},traverse:function(a){a(this);for(var b=this.children,c=0,d=b.length;c<d;c++)b[c].traverse(a)},traverseVisible:function(a){if(!1!==this.visible){a(this);for(var b=this.children,c=0,d=b.length;c<d;c++)b[c].traverseVisible(a)}},traverseAncestors:function(a){var b=this.parent;null!==b&&(a(b),b.traverseAncestors(a))},updateMatrix:function(){this.matrix.compose(this.position,this.quaternion,\nthis.scale);this.matrixWorldNeedsUpdate=!0},updateMatrixWorld:function(a){this.matrixAutoUpdate&&this.updateMatrix();if(this.matrixWorldNeedsUpdate||a)null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,a=!0;for(var b=this.children,c=0,d=b.length;c<d;c++)b[c].updateMatrixWorld(a)},toJSON:function(a){function b(b,c){void 0===b[c.uuid]&&(b[c.uuid]=c.toJSON(a));return c.uuid}function c(a){var b=[],\nc;for(c in a){var d=a[c];delete d.metadata;b.push(d)}return b}var d=void 0===a||\"\"===a,e={};d&&(a={geometries:{},materials:{},textures:{},images:{}},e.metadata={version:4.5,type:\"Object\",generator:\"Object3D.toJSON\"});var f={};f.uuid=this.uuid;f.type=this.type;\"\"!==this.name&&(f.name=this.name);!0===this.castShadow&&(f.castShadow=!0);!0===this.receiveShadow&&(f.receiveShadow=!0);!1===this.visible&&(f.visible=!1);\"{}\"!==JSON.stringify(this.userData)&&(f.userData=this.userData);f.matrix=this.matrix.toArray();\nvoid 0!==this.geometry&&(f.geometry=b(a.geometries,this.geometry));if(void 0!==this.material)if(Array.isArray(this.material)){for(var g=[],h=0,k=this.material.length;h<k;h++)g.push(b(a.materials,this.material[h]));f.material=g}else f.material=b(a.materials,this.material);if(0<this.children.length)for(f.children=[],h=0;h<this.children.length;h++)f.children.push(this.children[h].toJSON(a).object);d&&(d=c(a.geometries),g=c(a.materials),h=c(a.textures),k=c(a.images),0<d.length&&(e.geometries=d),0<g.length&&\n(e.materials=g),0<h.length&&(e.textures=h),0<k.length&&(e.images=k));e.object=f;return e},clone:function(a){return(new this.constructor).copy(this,a)},copy:function(a,b){void 0===b&&(b=!0);this.name=a.name;this.up.copy(a.up);this.position.copy(a.position);this.quaternion.copy(a.quaternion);this.scale.copy(a.scale);this.matrix.copy(a.matrix);this.matrixWorld.copy(a.matrixWorld);this.matrixAutoUpdate=a.matrixAutoUpdate;this.matrixWorldNeedsUpdate=a.matrixWorldNeedsUpdate;this.layers.mask=a.layers.mask;\nthis.visible=a.visible;this.castShadow=a.castShadow;this.receiveShadow=a.receiveShadow;this.frustumCulled=a.frustumCulled;this.renderOrder=a.renderOrder;this.userData=JSON.parse(JSON.stringify(a.userData));if(!0===b)for(b=0;b<a.children.length;b++)this.add(a.children[b].clone());return this}});Ma.prototype=Object.assign(Object.create(w.prototype),{constructor:Ma,isCamera:!0,copy:function(a,b){w.prototype.copy.call(this,a,b);this.matrixWorldInverse.copy(a.matrixWorldInverse);this.projectionMatrix.copy(a.projectionMatrix);\nreturn this},getWorldDirection:function(){var a=new ia;return function(b){b=b||new n;this.getWorldQuaternion(a);return b.set(0,0,-1).applyQuaternion(a)}}(),updateMatrixWorld:function(a){w.prototype.updateMatrixWorld.call(this,a);this.matrixWorldInverse.getInverse(this.matrixWorld)},clone:function(){return(new this.constructor).copy(this)}});Db.prototype=Object.assign(Object.create(Ma.prototype),{constructor:Db,isOrthographicCamera:!0,copy:function(a,b){Ma.prototype.copy.call(this,a,b);this.left=a.left;\nthis.right=a.right;this.top=a.top;this.bottom=a.bottom;this.near=a.near;this.far=a.far;this.zoom=a.zoom;this.view=null===a.view?null:Object.assign({},a.view);return this},setViewOffset:function(a,b,c,d,e,f){this.view={fullWidth:a,fullHeight:b,offsetX:c,offsetY:d,width:e,height:f};this.updateProjectionMatrix()},clearViewOffset:function(){this.view=null;this.updateProjectionMatrix()},updateProjectionMatrix:function(){var a=(this.right-this.left)/(2*this.zoom),b=(this.top-this.bottom)/(2*this.zoom),\nc=(this.right+this.left)/2,d=(this.top+this.bottom)/2,e=c-a,c=c+a,a=d+b,b=d-b;if(null!==this.view)var c=this.zoom/(this.view.width/this.view.fullWidth),b=this.zoom/(this.view.height/this.view.fullHeight),f=(this.right-this.left)/this.view.width,d=(this.top-this.bottom)/this.view.height,e=e+this.view.offsetX/c*f,c=e+this.view.width/c*f,a=a-this.view.offsetY/b*d,b=a-this.view.height/b*d;this.projectionMatrix.makeOrthographic(e,c,a,b,this.near,this.far)},toJSON:function(a){a=w.prototype.toJSON.call(this,\na);a.object.zoom=this.zoom;a.object.left=this.left;a.object.right=this.right;a.object.top=this.top;a.object.bottom=this.bottom;a.object.near=this.near;a.object.far=this.far;null!==this.view&&(a.object.view=Object.assign({},this.view));return a}});ja.prototype=Object.assign(Object.create(Ma.prototype),{constructor:ja,isPerspectiveCamera:!0,copy:function(a,b){Ma.prototype.copy.call(this,a,b);this.fov=a.fov;this.zoom=a.zoom;this.near=a.near;this.far=a.far;this.focus=a.focus;this.aspect=a.aspect;this.view=\nnull===a.view?null:Object.assign({},a.view);this.filmGauge=a.filmGauge;this.filmOffset=a.filmOffset;return this},setFocalLength:function(a){a=.5*this.getFilmHeight()/a;this.fov=2*R.RAD2DEG*Math.atan(a);this.updateProjectionMatrix()},getFocalLength:function(){var a=Math.tan(.5*R.DEG2RAD*this.fov);return.5*this.getFilmHeight()/a},getEffectiveFOV:function(){return 2*R.RAD2DEG*Math.atan(Math.tan(.5*R.DEG2RAD*this.fov)/this.zoom)},getFilmWidth:function(){return this.filmGauge*Math.min(this.aspect,1)},\ngetFilmHeight:function(){return this.filmGauge/Math.max(this.aspect,1)},setViewOffset:function(a,b,c,d,e,f){this.aspect=a/b;this.view={fullWidth:a,fullHeight:b,offsetX:c,offsetY:d,width:e,height:f};this.updateProjectionMatrix()},clearViewOffset:function(){this.view=null;this.updateProjectionMatrix()},updateProjectionMatrix:function(){var a=this.near,b=a*Math.tan(.5*R.DEG2RAD*this.fov)/this.zoom,c=2*b,d=this.aspect*c,e=-.5*d,f=this.view;if(null!==f)var g=f.fullWidth,h=f.fullHeight,e=e+f.offsetX*d/\ng,b=b-f.offsetY*c/h,d=f.width/g*d,c=f.height/h*c;f=this.filmOffset;0!==f&&(e+=a*f/this.getFilmWidth());this.projectionMatrix.makePerspective(e,e+d,b,b-c,a,this.far)},toJSON:function(a){a=w.prototype.toJSON.call(this,a);a.object.fov=this.fov;a.object.zoom=this.zoom;a.object.near=this.near;a.object.far=this.far;a.object.focus=this.focus;a.object.aspect=this.aspect;null!==this.view&&(a.object.view=Object.assign({},this.view));a.object.filmGauge=this.filmGauge;a.object.filmOffset=this.filmOffset;return a}});\nObject.assign(Qa.prototype,{clone:function(){return(new this.constructor).copy(this)},copy:function(a){this.a=a.a;this.b=a.b;this.c=a.c;this.normal.copy(a.normal);this.color.copy(a.color);this.materialIndex=a.materialIndex;for(var b=0,c=a.vertexNormals.length;b<c;b++)this.vertexNormals[b]=a.vertexNormals[b].clone();b=0;for(c=a.vertexColors.length;b<c;b++)this.vertexColors[b]=a.vertexColors[b].clone();return this}});var Rd=0;Object.assign(Q.prototype,na.prototype,{isGeometry:!0,applyMatrix:function(a){for(var b=\n(new qa).getNormalMatrix(a),c=0,d=this.vertices.length;c<d;c++)this.vertices[c].applyMatrix4(a);c=0;for(d=this.faces.length;c<d;c++){a=this.faces[c];a.normal.applyMatrix3(b).normalize();for(var e=0,f=a.vertexNormals.length;e<f;e++)a.vertexNormals[e].applyMatrix3(b).normalize()}null!==this.boundingBox&&this.computeBoundingBox();null!==this.boundingSphere&&this.computeBoundingSphere();this.normalsNeedUpdate=this.verticesNeedUpdate=!0;return this},rotateX:function(){var a=new O;return function(b){a.makeRotationX(b);\nthis.applyMatrix(a);return this}}(),rotateY:function(){var a=new O;return function(b){a.makeRotationY(b);this.applyMatrix(a);return this}}(),rotateZ:function(){var a=new O;return function(b){a.makeRotationZ(b);this.applyMatrix(a);return this}}(),translate:function(){var a=new O;return function(b,c,d){a.makeTranslation(b,c,d);this.applyMatrix(a);return this}}(),scale:function(){var a=new O;return function(b,c,d){a.makeScale(b,c,d);this.applyMatrix(a);return this}}(),lookAt:function(){var a=new w;return function(b){a.lookAt(b);\na.updateMatrix();this.applyMatrix(a.matrix)}}(),fromBufferGeometry:function(a){function b(a,b,d,e){var f=void 0!==g?[q[a].clone(),q[b].clone(),q[d].clone()]:[],t=void 0!==h?[c.colors[a].clone(),c.colors[b].clone(),c.colors[d].clone()]:[];e=new Qa(a,b,d,f,t,e);c.faces.push(e);void 0!==k&&c.faceVertexUvs[0].push([p[a].clone(),p[b].clone(),p[d].clone()]);void 0!==l&&c.faceVertexUvs[1].push([m[a].clone(),m[b].clone(),m[d].clone()])}var c=this,d=null!==a.index?a.index.array:void 0,e=a.attributes,f=e.position.array,\ng=void 0!==e.normal?e.normal.array:void 0,h=void 0!==e.color?e.color.array:void 0,k=void 0!==e.uv?e.uv.array:void 0,l=void 0!==e.uv2?e.uv2.array:void 0;void 0!==l&&(this.faceVertexUvs[1]=[]);for(var q=[],p=[],m=[],r=e=0;e<f.length;e+=3,r+=2)c.vertices.push(new n(f[e],f[e+1],f[e+2])),void 0!==g&&q.push(new n(g[e],g[e+1],g[e+2])),void 0!==h&&c.colors.push(new C(h[e],h[e+1],h[e+2])),void 0!==k&&p.push(new D(k[r],k[r+1])),void 0!==l&&m.push(new D(l[r],l[r+1]));var v=a.groups;if(0<v.length)for(e=0;e<v.length;e++)for(var f=\nv[e],u=f.start,x=f.count,r=u,u=u+x;r<u;r+=3)void 0!==d?b(d[r],d[r+1],d[r+2],f.materialIndex):b(r,r+1,r+2,f.materialIndex);else if(void 0!==d)for(e=0;e<d.length;e+=3)b(d[e],d[e+1],d[e+2]);else for(e=0;e<f.length/3;e+=3)b(e,e+1,e+2);this.computeFaceNormals();null!==a.boundingBox&&(this.boundingBox=a.boundingBox.clone());null!==a.boundingSphere&&(this.boundingSphere=a.boundingSphere.clone());return this},center:function(){this.computeBoundingBox();var a=this.boundingBox.getCenter().negate();this.translate(a.x,\na.y,a.z);return a},normalize:function(){this.computeBoundingSphere();var a=this.boundingSphere.center,b=this.boundingSphere.radius,b=0===b?1:1/b,c=new O;c.set(b,0,0,-b*a.x,0,b,0,-b*a.y,0,0,b,-b*a.z,0,0,0,1);this.applyMatrix(c);return this},computeFaceNormals:function(){for(var a=new n,b=new n,c=0,d=this.faces.length;c<d;c++){var e=this.faces[c],f=this.vertices[e.a],g=this.vertices[e.b];a.subVectors(this.vertices[e.c],g);b.subVectors(f,g);a.cross(b);a.normalize();e.normal.copy(a)}},computeVertexNormals:function(a){void 0===\na&&(a=!0);var b;var c=Array(this.vertices.length);var d=0;for(b=this.vertices.length;d<b;d++)c[d]=new n;if(a){var e=new n,f=new n;a=0;for(d=this.faces.length;a<d;a++){b=this.faces[a];var g=this.vertices[b.a];var h=this.vertices[b.b];var k=this.vertices[b.c];e.subVectors(k,h);f.subVectors(g,h);e.cross(f);c[b.a].add(e);c[b.b].add(e);c[b.c].add(e)}}else for(this.computeFaceNormals(),a=0,d=this.faces.length;a<d;a++)b=this.faces[a],c[b.a].add(b.normal),c[b.b].add(b.normal),c[b.c].add(b.normal);d=0;for(b=\nthis.vertices.length;d<b;d++)c[d].normalize();a=0;for(d=this.faces.length;a<d;a++)b=this.faces[a],g=b.vertexNormals,3===g.length?(g[0].copy(c[b.a]),g[1].copy(c[b.b]),g[2].copy(c[b.c])):(g[0]=c[b.a].clone(),g[1]=c[b.b].clone(),g[2]=c[b.c].clone());0<this.faces.length&&(this.normalsNeedUpdate=!0)},computeFlatVertexNormals:function(){var a;this.computeFaceNormals();var b=0;for(a=this.faces.length;b<a;b++){var c=this.faces[b];var d=c.vertexNormals;3===d.length?(d[0].copy(c.normal),d[1].copy(c.normal),\nd[2].copy(c.normal)):(d[0]=c.normal.clone(),d[1]=c.normal.clone(),d[2]=c.normal.clone())}0<this.faces.length&&(this.normalsNeedUpdate=!0)},computeMorphNormals:function(){var a,b;var c=0;for(b=this.faces.length;c<b;c++){var d=this.faces[c];d.__originalFaceNormal?d.__originalFaceNormal.copy(d.normal):d.__originalFaceNormal=d.normal.clone();d.__originalVertexNormals||(d.__originalVertexNormals=[]);var e=0;for(a=d.vertexNormals.length;e<a;e++)d.__originalVertexNormals[e]?d.__originalVertexNormals[e].copy(d.vertexNormals[e]):\nd.__originalVertexNormals[e]=d.vertexNormals[e].clone()}var f=new Q;f.faces=this.faces;e=0;for(a=this.morphTargets.length;e<a;e++){if(!this.morphNormals[e]){this.morphNormals[e]={};this.morphNormals[e].faceNormals=[];this.morphNormals[e].vertexNormals=[];d=this.morphNormals[e].faceNormals;var g=this.morphNormals[e].vertexNormals;c=0;for(b=this.faces.length;c<b;c++){var h=new n;var k={a:new n,b:new n,c:new n};d.push(h);g.push(k)}}g=this.morphNormals[e];f.vertices=this.morphTargets[e].vertices;f.computeFaceNormals();\nf.computeVertexNormals();c=0;for(b=this.faces.length;c<b;c++)d=this.faces[c],h=g.faceNormals[c],k=g.vertexNormals[c],h.copy(d.normal),k.a.copy(d.vertexNormals[0]),k.b.copy(d.vertexNormals[1]),k.c.copy(d.vertexNormals[2])}c=0;for(b=this.faces.length;c<b;c++)d=this.faces[c],d.normal=d.__originalFaceNormal,d.vertexNormals=d.__originalVertexNormals},computeLineDistances:function(){for(var a=0,b=this.vertices,c=0,d=b.length;c<d;c++)0<c&&(a+=b[c].distanceTo(b[c-1])),this.lineDistances[c]=a},computeBoundingBox:function(){null===\nthis.boundingBox&&(this.boundingBox=new Pa);this.boundingBox.setFromPoints(this.vertices)},computeBoundingSphere:function(){null===this.boundingSphere&&(this.boundingSphere=new Ca);this.boundingSphere.setFromPoints(this.vertices)},merge:function(a,b,c){if(a&&a.isGeometry){var d,e=this.vertices.length,f=this.vertices,g=a.vertices,h=this.faces,k=a.faces,l=this.faceVertexUvs[0],q=a.faceVertexUvs[0],p=this.colors,m=a.colors;void 0===c&&(c=0);void 0!==b&&(d=(new qa).getNormalMatrix(b));a=0;for(var r=g.length;a<\nr;a++){var n=g[a].clone();void 0!==b&&n.applyMatrix4(b);f.push(n)}a=0;for(r=m.length;a<r;a++)p.push(m[a].clone());a=0;for(r=k.length;a<r;a++){var g=k[a],u=g.vertexNormals,m=g.vertexColors,p=new Qa(g.a+e,g.b+e,g.c+e);p.normal.copy(g.normal);void 0!==d&&p.normal.applyMatrix3(d).normalize();b=0;for(f=u.length;b<f;b++)n=u[b].clone(),void 0!==d&&n.applyMatrix3(d).normalize(),p.vertexNormals.push(n);p.color.copy(g.color);b=0;for(f=m.length;b<f;b++)n=m[b],p.vertexColors.push(n.clone());p.materialIndex=g.materialIndex+\nc;h.push(p)}a=0;for(r=q.length;a<r;a++)if(c=q[a],d=[],void 0!==c){b=0;for(f=c.length;b<f;b++)d.push(c[b].clone());l.push(d)}}else console.error(\"THREE.Geometry.merge(): geometry not an instance of THREE.Geometry.\",a)},mergeMesh:function(a){a&&a.isMesh?(a.matrixAutoUpdate&&a.updateMatrix(),this.merge(a.geometry,a.matrix)):console.error(\"THREE.Geometry.mergeMesh(): mesh not an instance of THREE.Mesh.\",a)},mergeVertices:function(){var a={},b=[],c=[],d=Math.pow(10,4),e;var f=0;for(e=this.vertices.length;f<\ne;f++){var g=this.vertices[f];g=Math.round(g.x*d)+\"_\"+Math.round(g.y*d)+\"_\"+Math.round(g.z*d);void 0===a[g]?(a[g]=f,b.push(this.vertices[f]),c[f]=b.length-1):c[f]=c[a[g]]}a=[];f=0;for(e=this.faces.length;f<e;f++)for(d=this.faces[f],d.a=c[d.a],d.b=c[d.b],d.c=c[d.c],d=[d.a,d.b,d.c],g=0;3>g;g++)if(d[g]===d[(g+1)%3]){a.push(f);break}for(f=a.length-1;0<=f;f--)for(d=a[f],this.faces.splice(d,1),c=0,e=this.faceVertexUvs.length;c<e;c++)this.faceVertexUvs[c].splice(d,1);f=this.vertices.length-b.length;this.vertices=\nb;return f},sortFacesByMaterialIndex:function(){for(var a=this.faces,b=a.length,c=0;c<b;c++)a[c]._id=c;a.sort(function(a,b){return a.materialIndex-b.materialIndex});var d=this.faceVertexUvs[0],e=this.faceVertexUvs[1],f,g;d&&d.length===b&&(f=[]);e&&e.length===b&&(g=[]);for(c=0;c<b;c++){var h=a[c]._id;f&&f.push(d[h]);g&&g.push(e[h])}f&&(this.faceVertexUvs[0]=f);g&&(this.faceVertexUvs[1]=g)},toJSON:function(){function a(a,b,c){return c?a|1<<b:a&~(1<<b)}function b(a){var b=a.x.toString()+a.y.toString()+\na.z.toString();if(void 0!==l[b])return l[b];l[b]=k.length/3;k.push(a.x,a.y,a.z);return l[b]}function c(a){var b=a.r.toString()+a.g.toString()+a.b.toString();if(void 0!==p[b])return p[b];p[b]=q.length;q.push(a.getHex());return p[b]}function d(a){var b=a.x.toString()+a.y.toString();if(void 0!==r[b])return r[b];r[b]=m.length/2;m.push(a.x,a.y);return r[b]}var e={metadata:{version:4.5,type:\"Geometry\",generator:\"Geometry.toJSON\"}};e.uuid=this.uuid;e.type=this.type;\"\"!==this.name&&(e.name=this.name);if(void 0!==\nthis.parameters){var f=this.parameters,g;for(g in f)void 0!==f[g]&&(e[g]=f[g]);return e}f=[];for(g=0;g<this.vertices.length;g++){var h=this.vertices[g];f.push(h.x,h.y,h.z)}var h=[],k=[],l={},q=[],p={},m=[],r={};for(g=0;g<this.faces.length;g++){var n=this.faces[g],u=void 0!==this.faceVertexUvs[0][g],x=0<n.normal.length(),y=0<n.vertexNormals.length,A=1!==n.color.r||1!==n.color.g||1!==n.color.b,I=0<n.vertexColors.length,B=0,B=a(B,0,0),B=a(B,1,!0),B=a(B,2,!1),B=a(B,3,u),B=a(B,4,x),B=a(B,5,y),B=a(B,6,\nA),B=a(B,7,I);h.push(B);h.push(n.a,n.b,n.c);h.push(n.materialIndex);u&&(u=this.faceVertexUvs[0][g],h.push(d(u[0]),d(u[1]),d(u[2])));x&&h.push(b(n.normal));y&&(x=n.vertexNormals,h.push(b(x[0]),b(x[1]),b(x[2])));A&&h.push(c(n.color));I&&(n=n.vertexColors,h.push(c(n[0]),c(n[1]),c(n[2])))}e.data={};e.data.vertices=f;e.data.normals=k;0<q.length&&(e.data.colors=q);0<m.length&&(e.data.uvs=[m]);e.data.faces=h;return e},clone:function(){return(new Q).copy(this)},copy:function(a){var b,c,d;this.vertices=[];\nthis.colors=[];this.faces=[];this.faceVertexUvs=[[]];this.morphTargets=[];this.morphNormals=[];this.skinWeights=[];this.skinIndices=[];this.lineDistances=[];this.boundingSphere=this.boundingBox=null;this.name=a.name;var e=a.vertices;var f=0;for(b=e.length;f<b;f++)this.vertices.push(e[f].clone());e=a.colors;f=0;for(b=e.length;f<b;f++)this.colors.push(e[f].clone());e=a.faces;f=0;for(b=e.length;f<b;f++)this.faces.push(e[f].clone());f=0;for(b=a.faceVertexUvs.length;f<b;f++){var g=a.faceVertexUvs[f];void 0===\nthis.faceVertexUvs[f]&&(this.faceVertexUvs[f]=[]);e=0;for(c=g.length;e<c;e++){var h=g[e],k=[];var l=0;for(d=h.length;l<d;l++)k.push(h[l].clone());this.faceVertexUvs[f].push(k)}}l=a.morphTargets;f=0;for(b=l.length;f<b;f++){d={};d.name=l[f].name;if(void 0!==l[f].vertices)for(d.vertices=[],e=0,c=l[f].vertices.length;e<c;e++)d.vertices.push(l[f].vertices[e].clone());if(void 0!==l[f].normals)for(d.normals=[],e=0,c=l[f].normals.length;e<c;e++)d.normals.push(l[f].normals[e].clone());this.morphTargets.push(d)}l=\na.morphNormals;f=0;for(b=l.length;f<b;f++){d={};if(void 0!==l[f].vertexNormals)for(d.vertexNormals=[],e=0,c=l[f].vertexNormals.length;e<c;e++)g=l[f].vertexNormals[e],h={},h.a=g.a.clone(),h.b=g.b.clone(),h.c=g.c.clone(),d.vertexNormals.push(h);if(void 0!==l[f].faceNormals)for(d.faceNormals=[],e=0,c=l[f].faceNormals.length;e<c;e++)d.faceNormals.push(l[f].faceNormals[e].clone());this.morphNormals.push(d)}e=a.skinWeights;f=0;for(b=e.length;f<b;f++)this.skinWeights.push(e[f].clone());e=a.skinIndices;f=\n0;for(b=e.length;f<b;f++)this.skinIndices.push(e[f].clone());e=a.lineDistances;f=0;for(b=e.length;f<b;f++)this.lineDistances.push(e[f]);f=a.boundingBox;null!==f&&(this.boundingBox=f.clone());f=a.boundingSphere;null!==f&&(this.boundingSphere=f.clone());this.elementsNeedUpdate=a.elementsNeedUpdate;this.verticesNeedUpdate=a.verticesNeedUpdate;this.uvsNeedUpdate=a.uvsNeedUpdate;this.normalsNeedUpdate=a.normalsNeedUpdate;this.colorsNeedUpdate=a.colorsNeedUpdate;this.lineDistancesNeedUpdate=a.lineDistancesNeedUpdate;\nthis.groupsNeedUpdate=a.groupsNeedUpdate;return this},dispose:function(){this.dispatchEvent({type:\"dispose\"})}});Object.defineProperty(K.prototype,\"needsUpdate\",{set:function(a){!0===a&&this.version++}});Object.assign(K.prototype,{isBufferAttribute:!0,setArray:function(a){if(Array.isArray(a))throw new TypeError(\"THREE.BufferAttribute: array should be a Typed Array.\");this.count=void 0!==a?a.length/this.itemSize:0;this.array=a},setDynamic:function(a){this.dynamic=a;return this},copy:function(a){this.array=\nnew a.array.constructor(a.array);this.itemSize=a.itemSize;this.count=a.count;this.normalized=a.normalized;this.dynamic=a.dynamic;return this},copyAt:function(a,b,c){a*=this.itemSize;c*=b.itemSize;for(var d=0,e=this.itemSize;d<e;d++)this.array[a+d]=b.array[c+d];return this},copyArray:function(a){this.array.set(a);return this},copyColorsArray:function(a){for(var b=this.array,c=0,d=0,e=a.length;d<e;d++){var f=a[d];void 0===f&&(console.warn(\"THREE.BufferAttribute.copyColorsArray(): color is undefined\",\nd),f=new C);b[c++]=f.r;b[c++]=f.g;b[c++]=f.b}return this},copyIndicesArray:function(a){for(var b=this.array,c=0,d=0,e=a.length;d<e;d++){var f=a[d];b[c++]=f.a;b[c++]=f.b;b[c++]=f.c}return this},copyVector2sArray:function(a){for(var b=this.array,c=0,d=0,e=a.length;d<e;d++){var f=a[d];void 0===f&&(console.warn(\"THREE.BufferAttribute.copyVector2sArray(): vector is undefined\",d),f=new D);b[c++]=f.x;b[c++]=f.y}return this},copyVector3sArray:function(a){for(var b=this.array,c=0,d=0,e=a.length;d<e;d++){var f=\na[d];void 0===f&&(console.warn(\"THREE.BufferAttribute.copyVector3sArray(): vector is undefined\",d),f=new n);b[c++]=f.x;b[c++]=f.y;b[c++]=f.z}return this},copyVector4sArray:function(a){for(var b=this.array,c=0,d=0,e=a.length;d<e;d++){var f=a[d];void 0===f&&(console.warn(\"THREE.BufferAttribute.copyVector4sArray(): vector is undefined\",d),f=new S);b[c++]=f.x;b[c++]=f.y;b[c++]=f.z;b[c++]=f.w}return this},set:function(a,b){void 0===b&&(b=0);this.array.set(a,b);return this},getX:function(a){return this.array[a*\nthis.itemSize]},setX:function(a,b){this.array[a*this.itemSize]=b;return this},getY:function(a){return this.array[a*this.itemSize+1]},setY:function(a,b){this.array[a*this.itemSize+1]=b;return this},getZ:function(a){return this.array[a*this.itemSize+2]},setZ:function(a,b){this.array[a*this.itemSize+2]=b;return this},getW:function(a){return this.array[a*this.itemSize+3]},setW:function(a,b){this.array[a*this.itemSize+3]=b;return this},setXY:function(a,b,c){a*=this.itemSize;this.array[a+0]=b;this.array[a+\n1]=c;return this},setXYZ:function(a,b,c,d){a*=this.itemSize;this.array[a+0]=b;this.array[a+1]=c;this.array[a+2]=d;return this},setXYZW:function(a,b,c,d,e){a*=this.itemSize;this.array[a+0]=b;this.array[a+1]=c;this.array[a+2]=d;this.array[a+3]=e;return this},onUpload:function(a){this.onUploadCallback=a;return this},clone:function(){return(new this.constructor(this.array,this.itemSize)).copy(this)}});pc.prototype=Object.create(K.prototype);pc.prototype.constructor=pc;qc.prototype=Object.create(K.prototype);\nqc.prototype.constructor=qc;rc.prototype=Object.create(K.prototype);rc.prototype.constructor=rc;sc.prototype=Object.create(K.prototype);sc.prototype.constructor=sc;db.prototype=Object.create(K.prototype);db.prototype.constructor=db;tc.prototype=Object.create(K.prototype);tc.prototype.constructor=tc;eb.prototype=Object.create(K.prototype);eb.prototype.constructor=eb;z.prototype=Object.create(K.prototype);z.prototype.constructor=z;uc.prototype=Object.create(K.prototype);uc.prototype.constructor=uc;\nObject.assign(Le.prototype,{computeGroups:function(a){var b=[],c=void 0;a=a.faces;for(var d=0;d<a.length;d++){var e=a[d];if(e.materialIndex!==c){c=e.materialIndex;void 0!==f&&(f.count=3*d-f.start,b.push(f));var f={start:3*d,materialIndex:c}}}void 0!==f&&(f.count=3*d-f.start,b.push(f));this.groups=b},fromGeometry:function(a){var b=a.faces,c=a.vertices,d=a.faceVertexUvs,e=d[0]&&0<d[0].length,f=d[1]&&0<d[1].length,g=a.morphTargets,h=g.length;if(0<h){var k=[];for(var l=0;l<h;l++)k[l]=[];this.morphTargets.position=\nk}var q=a.morphNormals,p=q.length;if(0<p){var m=[];for(l=0;l<p;l++)m[l]=[];this.morphTargets.normal=m}for(var n=a.skinIndices,v=a.skinWeights,u=n.length===c.length,x=v.length===c.length,l=0;l<b.length;l++){var y=b[l];this.vertices.push(c[y.a],c[y.b],c[y.c]);var A=y.vertexNormals;3===A.length?this.normals.push(A[0],A[1],A[2]):(A=y.normal,this.normals.push(A,A,A));A=y.vertexColors;3===A.length?this.colors.push(A[0],A[1],A[2]):(A=y.color,this.colors.push(A,A,A));!0===e&&(A=d[0][l],void 0!==A?this.uvs.push(A[0],\nA[1],A[2]):(console.warn(\"THREE.DirectGeometry.fromGeometry(): Undefined vertexUv \",l),this.uvs.push(new D,new D,new D)));!0===f&&(A=d[1][l],void 0!==A?this.uvs2.push(A[0],A[1],A[2]):(console.warn(\"THREE.DirectGeometry.fromGeometry(): Undefined vertexUv2 \",l),this.uvs2.push(new D,new D,new D)));for(A=0;A<h;A++){var I=g[A].vertices;k[A].push(I[y.a],I[y.b],I[y.c])}for(A=0;A<p;A++)I=q[A].vertexNormals[l],m[A].push(I.a,I.b,I.c);u&&this.skinIndices.push(n[y.a],n[y.b],n[y.c]);x&&this.skinWeights.push(v[y.a],\nv[y.b],v[y.c])}this.computeGroups(a);this.verticesNeedUpdate=a.verticesNeedUpdate;this.normalsNeedUpdate=a.normalsNeedUpdate;this.colorsNeedUpdate=a.colorsNeedUpdate;this.uvsNeedUpdate=a.uvsNeedUpdate;this.groupsNeedUpdate=a.groupsNeedUpdate;return this}});F.MaxIndex=65535;Object.assign(F.prototype,na.prototype,{isBufferGeometry:!0,getIndex:function(){return this.index},setIndex:function(a){Array.isArray(a)?this.index=new (65535<Sd(a)?eb:db)(a,1):this.index=a},addAttribute:function(a,b,c){if(b&&b.isBufferAttribute||\nb&&b.isInterleavedBufferAttribute)if(\"index\"===a)console.warn(\"THREE.BufferGeometry.addAttribute: Use .setIndex() for index attribute.\"),this.setIndex(b);else return this.attributes[a]=b,this;else console.warn(\"THREE.BufferGeometry: .addAttribute() now expects ( name, attribute ).\"),this.addAttribute(a,new K(b,c))},getAttribute:function(a){return this.attributes[a]},removeAttribute:function(a){delete this.attributes[a];return this},addGroup:function(a,b,c){this.groups.push({start:a,count:b,materialIndex:void 0!==\nc?c:0})},clearGroups:function(){this.groups=[]},setDrawRange:function(a,b){this.drawRange.start=a;this.drawRange.count=b},applyMatrix:function(a){var b=this.attributes.position;void 0!==b&&(a.applyToBufferAttribute(b),b.needsUpdate=!0);b=this.attributes.normal;void 0!==b&&((new qa).getNormalMatrix(a).applyToBufferAttribute(b),b.needsUpdate=!0);null!==this.boundingBox&&this.computeBoundingBox();null!==this.boundingSphere&&this.computeBoundingSphere();return this},rotateX:function(){var a=new O;return function(b){a.makeRotationX(b);\nthis.applyMatrix(a);return this}}(),rotateY:function(){var a=new O;return function(b){a.makeRotationY(b);this.applyMatrix(a);return this}}(),rotateZ:function(){var a=new O;return function(b){a.makeRotationZ(b);this.applyMatrix(a);return this}}(),translate:function(){var a=new O;return function(b,c,d){a.makeTranslation(b,c,d);this.applyMatrix(a);return this}}(),scale:function(){var a=new O;return function(b,c,d){a.makeScale(b,c,d);this.applyMatrix(a);return this}}(),lookAt:function(){var a=new w;return function(b){a.lookAt(b);\na.updateMatrix();this.applyMatrix(a.matrix)}}(),center:function(){this.computeBoundingBox();var a=this.boundingBox.getCenter().negate();this.translate(a.x,a.y,a.z);return a},setFromObject:function(a){var b=a.geometry;if(a.isPoints||a.isLine){a=new z(3*b.vertices.length,3);var c=new z(3*b.colors.length,3);this.addAttribute(\"position\",a.copyVector3sArray(b.vertices));this.addAttribute(\"color\",c.copyColorsArray(b.colors));b.lineDistances&&b.lineDistances.length===b.vertices.length&&(a=new z(b.lineDistances.length,\n1),this.addAttribute(\"lineDistance\",a.copyArray(b.lineDistances)));null!==b.boundingSphere&&(this.boundingSphere=b.boundingSphere.clone());null!==b.boundingBox&&(this.boundingBox=b.boundingBox.clone())}else a.isMesh&&b&&b.isGeometry&&this.fromGeometry(b);return this},updateFromObject:function(a){var b=a.geometry;if(a.isMesh){var c=b.__directGeometry;!0===b.elementsNeedUpdate&&(c=void 0,b.elementsNeedUpdate=!1);if(void 0===c)return this.fromGeometry(b);c.verticesNeedUpdate=b.verticesNeedUpdate;c.normalsNeedUpdate=\nb.normalsNeedUpdate;c.colorsNeedUpdate=b.colorsNeedUpdate;c.uvsNeedUpdate=b.uvsNeedUpdate;c.groupsNeedUpdate=b.groupsNeedUpdate;b.verticesNeedUpdate=!1;b.normalsNeedUpdate=!1;b.colorsNeedUpdate=!1;b.uvsNeedUpdate=!1;b.groupsNeedUpdate=!1;b=c}!0===b.verticesNeedUpdate&&(c=this.attributes.position,void 0!==c&&(c.copyVector3sArray(b.vertices),c.needsUpdate=!0),b.verticesNeedUpdate=!1);!0===b.normalsNeedUpdate&&(c=this.attributes.normal,void 0!==c&&(c.copyVector3sArray(b.normals),c.needsUpdate=!0),b.normalsNeedUpdate=\n!1);!0===b.colorsNeedUpdate&&(c=this.attributes.color,void 0!==c&&(c.copyColorsArray(b.colors),c.needsUpdate=!0),b.colorsNeedUpdate=!1);b.uvsNeedUpdate&&(c=this.attributes.uv,void 0!==c&&(c.copyVector2sArray(b.uvs),c.needsUpdate=!0),b.uvsNeedUpdate=!1);b.lineDistancesNeedUpdate&&(c=this.attributes.lineDistance,void 0!==c&&(c.copyArray(b.lineDistances),c.needsUpdate=!0),b.lineDistancesNeedUpdate=!1);b.groupsNeedUpdate&&(b.computeGroups(a.geometry),this.groups=b.groups,b.groupsNeedUpdate=!1);return this},\nfromGeometry:function(a){a.__directGeometry=(new Le).fromGeometry(a);return this.fromDirectGeometry(a.__directGeometry)},fromDirectGeometry:function(a){var b=new Float32Array(3*a.vertices.length);this.addAttribute(\"position\",(new K(b,3)).copyVector3sArray(a.vertices));0<a.normals.length&&(b=new Float32Array(3*a.normals.length),this.addAttribute(\"normal\",(new K(b,3)).copyVector3sArray(a.normals)));0<a.colors.length&&(b=new Float32Array(3*a.colors.length),this.addAttribute(\"color\",(new K(b,3)).copyColorsArray(a.colors)));\n0<a.uvs.length&&(b=new Float32Array(2*a.uvs.length),this.addAttribute(\"uv\",(new K(b,2)).copyVector2sArray(a.uvs)));0<a.uvs2.length&&(b=new Float32Array(2*a.uvs2.length),this.addAttribute(\"uv2\",(new K(b,2)).copyVector2sArray(a.uvs2)));0<a.indices.length&&(b=new (65535<Sd(a.indices)?Uint32Array:Uint16Array)(3*a.indices.length),this.setIndex((new K(b,1)).copyIndicesArray(a.indices)));this.groups=a.groups;for(var c in a.morphTargets){for(var b=[],d=a.morphTargets[c],e=0,f=d.length;e<f;e++){var g=d[e],\nh=new z(3*g.length,3);b.push(h.copyVector3sArray(g))}this.morphAttributes[c]=b}0<a.skinIndices.length&&(c=new z(4*a.skinIndices.length,4),this.addAttribute(\"skinIndex\",c.copyVector4sArray(a.skinIndices)));0<a.skinWeights.length&&(c=new z(4*a.skinWeights.length,4),this.addAttribute(\"skinWeight\",c.copyVector4sArray(a.skinWeights)));null!==a.boundingSphere&&(this.boundingSphere=a.boundingSphere.clone());null!==a.boundingBox&&(this.boundingBox=a.boundingBox.clone());return this},computeBoundingBox:function(){null===\nthis.boundingBox&&(this.boundingBox=new Pa);var a=this.attributes.position;void 0!==a?this.boundingBox.setFromBufferAttribute(a):this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox: Computed min/max have NaN values. The \"position\" attribute is likely to have NaN values.',this)},computeBoundingSphere:function(){var a=new Pa,b=new n;return function(){null===this.boundingSphere&&\n(this.boundingSphere=new Ca);var c=this.attributes.position;if(c){var d=this.boundingSphere.center;a.setFromBufferAttribute(c);a.getCenter(d);for(var e=0,f=0,g=c.count;f<g;f++)b.x=c.getX(f),b.y=c.getY(f),b.z=c.getZ(f),e=Math.max(e,d.distanceToSquared(b));this.boundingSphere.radius=Math.sqrt(e);isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The \"position\" attribute is likely to have NaN values.',this)}}}(),computeFaceNormals:function(){},\ncomputeVertexNormals:function(){var a=this.index,b=this.attributes,c=this.groups;if(b.position){var d=b.position.array;if(void 0===b.normal)this.addAttribute(\"normal\",new K(new Float32Array(d.length),3));else for(var e=b.normal.array,f=0,g=e.length;f<g;f++)e[f]=0;var e=b.normal.array,h=new n,k=new n,l=new n,q=new n,p=new n;if(a){a=a.array;0===c.length&&this.addGroup(0,a.length);for(var m=0,r=c.length;m<r;++m){f=c[m];g=f.start;var v=f.count;f=g;for(g+=v;f<g;f+=3){v=3*a[f+0];var u=3*a[f+1];var x=3*\na[f+2];h.fromArray(d,v);k.fromArray(d,u);l.fromArray(d,x);q.subVectors(l,k);p.subVectors(h,k);q.cross(p);e[v]+=q.x;e[v+1]+=q.y;e[v+2]+=q.z;e[u]+=q.x;e[u+1]+=q.y;e[u+2]+=q.z;e[x]+=q.x;e[x+1]+=q.y;e[x+2]+=q.z}}}else for(f=0,g=d.length;f<g;f+=9)h.fromArray(d,f),k.fromArray(d,f+3),l.fromArray(d,f+6),q.subVectors(l,k),p.subVectors(h,k),q.cross(p),e[f]=q.x,e[f+1]=q.y,e[f+2]=q.z,e[f+3]=q.x,e[f+4]=q.y,e[f+5]=q.z,e[f+6]=q.x,e[f+7]=q.y,e[f+8]=q.z;this.normalizeNormals();b.normal.needsUpdate=!0}},merge:function(a,\nb){if(a&&a.isBufferGeometry){void 0===b&&(b=0);var c=this.attributes,d;for(d in c)if(void 0!==a.attributes[d])for(var e=c[d].array,f=a.attributes[d],g=f.array,h=0,f=f.itemSize*b;h<g.length;h++,f++)e[f]=g[h];return this}console.error(\"THREE.BufferGeometry.merge(): geometry not an instance of THREE.BufferGeometry.\",a)},normalizeNormals:function(){var a=new n;return function(){for(var b=this.attributes.normal,c=0,d=b.count;c<d;c++)a.x=b.getX(c),a.y=b.getY(c),a.z=b.getZ(c),a.normalize(),b.setXYZ(c,a.x,\na.y,a.z)}}(),toNonIndexed:function(){if(null===this.index)return console.warn(\"THREE.BufferGeometry.toNonIndexed(): Geometry is already non-indexed.\"),this;var a=new F,b=this.index.array,c=this.attributes,d;for(d in c){for(var e=c[d],f=e.array,e=e.itemSize,g=new f.constructor(b.length*e),h,k=0,l=0,q=b.length;l<q;l++){h=b[l]*e;for(var m=0;m<e;m++)g[k++]=f[h++]}a.addAttribute(d,new K(g,e))}return a},toJSON:function(){var a={metadata:{version:4.5,type:\"BufferGeometry\",generator:\"BufferGeometry.toJSON\"}};\na.uuid=this.uuid;a.type=this.type;\"\"!==this.name&&(a.name=this.name);if(void 0!==this.parameters){var b=this.parameters;for(var c in b)void 0!==b[c]&&(a[c]=b[c]);return a}a.data={attributes:{}};var d=this.index;null!==d&&(b=Array.prototype.slice.call(d.array),a.data.index={type:d.array.constructor.name,array:b});d=this.attributes;for(c in d){var e=d[c];b=Array.prototype.slice.call(e.array);a.data.attributes[c]={itemSize:e.itemSize,type:e.array.constructor.name,array:b,normalized:e.normalized}}c=this.groups;\n0<c.length&&(a.data.groups=JSON.parse(JSON.stringify(c)));c=this.boundingSphere;null!==c&&(a.data.boundingSphere={center:c.center.toArray(),radius:c.radius});return a},clone:function(){return(new F).copy(this)},copy:function(a){var b;this.index=null;this.attributes={};this.morphAttributes={};this.groups=[];this.boundingSphere=this.boundingBox=null;this.name=a.name;var c=a.index;null!==c&&this.setIndex(c.clone());c=a.attributes;for(g in c)this.addAttribute(g,c[g].clone());var d=a.morphAttributes;for(g in d){var e=\n[],f=d[g];c=0;for(b=f.length;c<b;c++)e.push(f[c].clone());this.morphAttributes[g]=e}var g=a.groups;c=0;for(b=g.length;c<b;c++)d=g[c],this.addGroup(d.start,d.count,d.materialIndex);g=a.boundingBox;null!==g&&(this.boundingBox=g.clone());g=a.boundingSphere;null!==g&&(this.boundingSphere=g.clone());this.drawRange.start=a.drawRange.start;this.drawRange.count=a.drawRange.count;return this},dispose:function(){this.dispatchEvent({type:\"dispose\"})}});Eb.prototype=Object.create(Q.prototype);Eb.prototype.constructor=\nEb;fb.prototype=Object.create(F.prototype);fb.prototype.constructor=fb;vc.prototype=Object.create(Q.prototype);vc.prototype.constructor=vc;gb.prototype=Object.create(F.prototype);gb.prototype.constructor=gb;sa.prototype=Object.create(P.prototype);sa.prototype.constructor=sa;sa.prototype.isMeshBasicMaterial=!0;sa.prototype.copy=function(a){P.prototype.copy.call(this,a);this.color.copy(a.color);this.map=a.map;this.lightMap=a.lightMap;this.lightMapIntensity=a.lightMapIntensity;this.aoMap=a.aoMap;this.aoMapIntensity=\na.aoMapIntensity;this.specularMap=a.specularMap;this.alphaMap=a.alphaMap;this.envMap=a.envMap;this.combine=a.combine;this.reflectivity=a.reflectivity;this.refractionRatio=a.refractionRatio;this.wireframe=a.wireframe;this.wireframeLinewidth=a.wireframeLinewidth;this.wireframeLinecap=a.wireframeLinecap;this.wireframeLinejoin=a.wireframeLinejoin;this.skinning=a.skinning;this.morphTargets=a.morphTargets;return this};Object.assign(hb.prototype,{set:function(a,b){this.origin.copy(a);this.direction.copy(b);\nreturn this},clone:function(){return(new this.constructor).copy(this)},copy:function(a){this.origin.copy(a.origin);this.direction.copy(a.direction);return this},at:function(a,b){return(b||new n).copy(this.direction).multiplyScalar(a).add(this.origin)},lookAt:function(a){this.direction.copy(a).sub(this.origin).normalize();return this},recast:function(){var a=new n;return function(b){this.origin.copy(this.at(b,a));return this}}(),closestPointToPoint:function(a,b){b=b||new n;b.subVectors(a,this.origin);\na=b.dot(this.direction);return 0>a?b.copy(this.origin):b.copy(this.direction).multiplyScalar(a).add(this.origin)},distanceToPoint:function(a){return Math.sqrt(this.distanceSqToPoint(a))},distanceSqToPoint:function(){var a=new n;return function(b){var c=a.subVectors(b,this.origin).dot(this.direction);if(0>c)return this.origin.distanceToSquared(b);a.copy(this.direction).multiplyScalar(c).add(this.origin);return a.distanceToSquared(b)}}(),distanceSqToSegment:function(){var a=new n,b=new n,c=new n;return function(d,\ne,f,g){a.copy(d).add(e).multiplyScalar(.5);b.copy(e).sub(d).normalize();c.copy(this.origin).sub(a);var h=.5*d.distanceTo(e),k=-this.direction.dot(b),l=c.dot(this.direction),q=-c.dot(b),m=c.lengthSq(),t=Math.abs(1-k*k);if(0<t){d=k*q-l;e=k*l-q;var n=h*t;0<=d?e>=-n?e<=n?(h=1/t,d*=h,e*=h,k=d*(d+k*e+2*l)+e*(k*d+e+2*q)+m):(e=h,d=Math.max(0,-(k*e+l)),k=-d*d+e*(e+2*q)+m):(e=-h,d=Math.max(0,-(k*e+l)),k=-d*d+e*(e+2*q)+m):e<=-n?(d=Math.max(0,-(-k*h+l)),e=0<d?-h:Math.min(Math.max(-h,-q),h),k=-d*d+e*(e+2*q)+m):\ne<=n?(d=0,e=Math.min(Math.max(-h,-q),h),k=e*(e+2*q)+m):(d=Math.max(0,-(k*h+l)),e=0<d?h:Math.min(Math.max(-h,-q),h),k=-d*d+e*(e+2*q)+m)}else e=0<k?-h:h,d=Math.max(0,-(k*e+l)),k=-d*d+e*(e+2*q)+m;f&&f.copy(this.direction).multiplyScalar(d).add(this.origin);g&&g.copy(b).multiplyScalar(e).add(a);return k}}(),intersectSphere:function(){var a=new n;return function(b,c){a.subVectors(b.center,this.origin);var d=a.dot(this.direction),e=a.dot(a)-d*d;b=b.radius*b.radius;if(e>b)return null;b=Math.sqrt(b-e);e=\nd-b;d+=b;return 0>e&&0>d?null:0>e?this.at(d,c):this.at(e,c)}}(),intersectsSphere:function(a){return this.distanceToPoint(a.center)<=a.radius},distanceToPlane:function(a){var b=a.normal.dot(this.direction);if(0===b)return 0===a.distanceToPoint(this.origin)?0:null;a=-(this.origin.dot(a.normal)+a.constant)/b;return 0<=a?a:null},intersectPlane:function(a,b){a=this.distanceToPlane(a);return null===a?null:this.at(a,b)},intersectsPlane:function(a){var b=a.distanceToPoint(this.origin);return 0===b||0>a.normal.dot(this.direction)*\nb?!0:!1},intersectBox:function(a,b){var c=1/this.direction.x;var d=1/this.direction.y;var e=1/this.direction.z,f=this.origin;if(0<=c){var g=(a.min.x-f.x)*c;c*=a.max.x-f.x}else g=(a.max.x-f.x)*c,c*=a.min.x-f.x;if(0<=d){var h=(a.min.y-f.y)*d;d*=a.max.y-f.y}else h=(a.max.y-f.y)*d,d*=a.min.y-f.y;if(g>d||h>c)return null;if(h>g||g!==g)g=h;if(d<c||c!==c)c=d;0<=e?(h=(a.min.z-f.z)*e,a=(a.max.z-f.z)*e):(h=(a.max.z-f.z)*e,a=(a.min.z-f.z)*e);if(g>a||h>c)return null;if(h>g||g!==g)g=h;if(a<c||c!==c)c=a;return 0>\nc?null:this.at(0<=g?g:c,b)},intersectsBox:function(){var a=new n;return function(b){return null!==this.intersectBox(b,a)}}(),intersectTriangle:function(){var a=new n,b=new n,c=new n,d=new n;return function(e,f,g,h,k){b.subVectors(f,e);c.subVectors(g,e);d.crossVectors(b,c);f=this.direction.dot(d);if(0<f){if(h)return null;h=1}else if(0>f)h=-1,f=-f;else return null;a.subVectors(this.origin,e);e=h*this.direction.dot(c.crossVectors(a,c));if(0>e)return null;g=h*this.direction.dot(b.cross(a));if(0>g||e+\ng>f)return null;e=-h*a.dot(d);return 0>e?null:this.at(e/f,k)}}(),applyMatrix4:function(a){this.origin.applyMatrix4(a);this.direction.transformDirection(a);return this},equals:function(a){return a.origin.equals(this.origin)&&a.direction.equals(this.direction)}});Object.assign(Fb.prototype,{set:function(a,b){this.start.copy(a);this.end.copy(b);return this},clone:function(){return(new this.constructor).copy(this)},copy:function(a){this.start.copy(a.start);this.end.copy(a.end);return this},getCenter:function(a){return(a||\nnew n).addVectors(this.start,this.end).multiplyScalar(.5)},delta:function(a){return(a||new n).subVectors(this.end,this.start)},distanceSq:function(){return this.start.distanceToSquared(this.end)},distance:function(){return this.start.distanceTo(this.end)},at:function(a,b){b=b||new n;return this.delta(b).multiplyScalar(a).add(this.start)},closestPointToPointParameter:function(){var a=new n,b=new n;return function(c,d){a.subVectors(c,this.start);b.subVectors(this.end,this.start);c=b.dot(b);c=b.dot(a)/\nc;d&&(c=R.clamp(c,0,1));return c}}(),closestPointToPoint:function(a,b,c){a=this.closestPointToPointParameter(a,b);c=c||new n;return this.delta(c).multiplyScalar(a).add(this.start)},applyMatrix4:function(a){this.start.applyMatrix4(a);this.end.applyMatrix4(a);return this},equals:function(a){return a.start.equals(this.start)&&a.end.equals(this.end)}});Object.assign(Ra,{normal:function(){var a=new n;return function(b,c,d,e){e=e||new n;e.subVectors(d,c);a.subVectors(b,c);e.cross(a);b=e.lengthSq();return 0<\nb?e.multiplyScalar(1/Math.sqrt(b)):e.set(0,0,0)}}(),barycoordFromPoint:function(){var a=new n,b=new n,c=new n;return function(d,e,f,g,h){a.subVectors(g,e);b.subVectors(f,e);c.subVectors(d,e);d=a.dot(a);e=a.dot(b);f=a.dot(c);var k=b.dot(b);g=b.dot(c);var l=d*k-e*e;h=h||new n;if(0===l)return h.set(-2,-1,-1);l=1/l;k=(k*f-e*g)*l;d=(d*g-e*f)*l;return h.set(1-k-d,d,k)}}(),containsPoint:function(){var a=new n;return function(b,c,d,e){b=Ra.barycoordFromPoint(b,c,d,e,a);return 0<=b.x&&0<=b.y&&1>=b.x+b.y}}()});\nObject.assign(Ra.prototype,{set:function(a,b,c){this.a.copy(a);this.b.copy(b);this.c.copy(c);return this},setFromPointsAndIndices:function(a,b,c,d){this.a.copy(a[b]);this.b.copy(a[c]);this.c.copy(a[d]);return this},clone:function(){return(new this.constructor).copy(this)},copy:function(a){this.a.copy(a.a);this.b.copy(a.b);this.c.copy(a.c);return this},area:function(){var a=new n,b=new n;return function(){a.subVectors(this.c,this.b);b.subVectors(this.a,this.b);return.5*a.cross(b).length()}}(),midpoint:function(a){return(a||\nnew n).addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)},normal:function(a){return Ra.normal(this.a,this.b,this.c,a)},plane:function(a){return(a||new za).setFromCoplanarPoints(this.a,this.b,this.c)},barycoordFromPoint:function(a,b){return Ra.barycoordFromPoint(a,this.a,this.b,this.c,b)},containsPoint:function(a){return Ra.containsPoint(a,this.a,this.b,this.c)},closestPointToPoint:function(){var a=new za,b=[new Fb,new Fb,new Fb],c=new n,d=new n;return function(e,f){f=f||new n;var g=Infinity;\na.setFromCoplanarPoints(this.a,this.b,this.c);a.projectPoint(e,c);if(!0===this.containsPoint(c))f.copy(c);else for(b[0].set(this.a,this.b),b[1].set(this.b,this.c),b[2].set(this.c,this.a),e=0;e<b.length;e++){b[e].closestPointToPoint(c,!0,d);var h=c.distanceToSquared(d);h<g&&(g=h,f.copy(d))}return f}}(),equals:function(a){return a.a.equals(this.a)&&a.b.equals(this.b)&&a.c.equals(this.c)}});fa.prototype=Object.assign(Object.create(w.prototype),{constructor:fa,isMesh:!0,setDrawMode:function(a){this.drawMode=\na},copy:function(a){w.prototype.copy.call(this,a);this.drawMode=a.drawMode;return this},updateMorphTargets:function(){var a=this.geometry;if(a.isBufferGeometry){a=a.morphAttributes;var b=Object.keys(a);if(0<b.length){var c=a[b[0]];if(void 0!==c)for(this.morphTargetInfluences=[],this.morphTargetDictionary={},a=0,b=c.length;a<b;a++){var d=c[a].name||String(a);this.morphTargetInfluences.push(0);this.morphTargetDictionary[d]=a}}}else if(c=a.morphTargets,void 0!==c&&0<c.length)for(this.morphTargetInfluences=\n[],this.morphTargetDictionary={},a=0,b=c.length;a<b;a++)d=c[a].name||String(a),this.morphTargetInfluences.push(0),this.morphTargetDictionary[d]=a},raycast:function(){function a(a,b,c,d,e,f,g){Ra.barycoordFromPoint(a,b,c,d,u);e.multiplyScalar(u.x);f.multiplyScalar(u.y);g.multiplyScalar(u.z);e.add(f).add(g);return e.clone()}function b(a,b,c,d,e,f,g,h){if(null===(1===b.side?d.intersectTriangle(g,f,e,!0,h):d.intersectTriangle(e,f,g,2!==b.side,h)))return null;y.copy(h);y.applyMatrix4(a.matrixWorld);b=\nc.ray.origin.distanceTo(y);return b<c.near||b>c.far?null:{distance:b,point:y.clone(),object:a}}function c(c,d,e,f,l,q,m,p){g.fromBufferAttribute(f,q);h.fromBufferAttribute(f,m);k.fromBufferAttribute(f,p);if(c=b(c,c.material,d,e,g,h,k,x))l&&(t.fromBufferAttribute(l,q),r.fromBufferAttribute(l,m),v.fromBufferAttribute(l,p),c.uv=a(x,g,h,k,t,r,v)),c.face=new Qa(q,m,p,Ra.normal(g,h,k)),c.faceIndex=q;return c}var d=new O,e=new hb,f=new Ca,g=new n,h=new n,k=new n,l=new n,q=new n,m=new n,t=new D,r=new D,v=\nnew D,u=new n,x=new n,y=new n;return function(p,n){var u=this.geometry,y=this.material,A=this.matrixWorld;if(void 0!==y&&(null===u.boundingSphere&&u.computeBoundingSphere(),f.copy(u.boundingSphere),f.applyMatrix4(A),!1!==p.ray.intersectsSphere(f)&&(d.getInverse(A),e.copy(p.ray).applyMatrix4(d),null===u.boundingBox||!1!==e.intersectsBox(u.boundingBox)))){var w;if(u.isBufferGeometry){var y=u.index,I=u.attributes.position,A=u.attributes.uv,z;if(null!==y){var D=0;for(z=y.count;D<z;D+=3){u=y.getX(D);var C=\ny.getX(D+1);var J=y.getX(D+2);if(w=c(this,p,e,I,A,u,C,J))w.faceIndex=Math.floor(D/3),n.push(w)}}else for(D=0,z=I.count;D<z;D+=3)if(u=D,C=D+1,J=D+2,w=c(this,p,e,I,A,u,C,J))w.index=u,n.push(w)}else if(u.isGeometry){var A=Array.isArray(y);D=u.vertices;z=u.faces;C=u.faceVertexUvs[0];0<C.length&&(I=C);for(var F=0,L=z.length;F<L;F++){var M=z[F];w=A?y[M.materialIndex]:y;if(void 0!==w){C=D[M.a];J=D[M.b];var T=D[M.c];if(!0===w.morphTargets){var K=u.morphTargets,Q=this.morphTargetInfluences;g.set(0,0,0);h.set(0,\n0,0);k.set(0,0,0);for(var O=0,P=K.length;O<P;O++){var R=Q[O];if(0!==R){var N=K[O].vertices;g.addScaledVector(l.subVectors(N[M.a],C),R);h.addScaledVector(q.subVectors(N[M.b],J),R);k.addScaledVector(m.subVectors(N[M.c],T),R)}}g.add(C);h.add(J);k.add(T);C=g;J=h;T=k}if(w=b(this,w,p,e,C,J,T,x))I&&I[F]&&(K=I[F],t.copy(K[0]),r.copy(K[1]),v.copy(K[2]),w.uv=a(x,C,J,T,t,r,v)),w.face=M,w.faceIndex=F,n.push(w)}}}}}}(),clone:function(){return(new this.constructor(this.geometry,this.material)).copy(this)}});var hg=\n0;md.prototype=Object.assign(Object.create(ja.prototype),{constructor:md,isArrayCamera:!0});Hb.prototype.isFogExp2=!0;Hb.prototype.clone=function(){return new Hb(this.color.getHex(),this.density)};Hb.prototype.toJSON=function(a){return{type:\"FogExp2\",color:this.color.getHex(),density:this.density}};Ib.prototype.isFog=!0;Ib.prototype.clone=function(){return new Ib(this.color.getHex(),this.near,this.far)};Ib.prototype.toJSON=function(a){return{type:\"Fog\",color:this.color.getHex(),near:this.near,far:this.far}};\nnd.prototype=Object.assign(Object.create(w.prototype),{constructor:nd,copy:function(a,b){w.prototype.copy.call(this,a,b);null!==a.background&&(this.background=a.background.clone());null!==a.fog&&(this.fog=a.fog.clone());null!==a.overrideMaterial&&(this.overrideMaterial=a.overrideMaterial.clone());this.autoUpdate=a.autoUpdate;this.matrixAutoUpdate=a.matrixAutoUpdate;return this},toJSON:function(a){var b=w.prototype.toJSON.call(this,a);null!==this.background&&(b.object.background=this.background.toJSON(a));\nnull!==this.fog&&(b.object.fog=this.fog.toJSON());return b}});Zd.prototype=Object.assign(Object.create(w.prototype),{constructor:Zd,isLensFlare:!0,copy:function(a){w.prototype.copy.call(this,a);this.positionScreen.copy(a.positionScreen);this.customUpdateCallback=a.customUpdateCallback;for(var b=0,c=a.lensFlares.length;b<c;b++)this.lensFlares.push(a.lensFlares[b]);return this},add:function(a,b,c,d,e,f){void 0===b&&(b=-1);void 0===c&&(c=0);void 0===f&&(f=1);void 0===e&&(e=new C(16777215));void 0===\nd&&(d=1);c=Math.min(c,Math.max(0,c));this.lensFlares.push({texture:a,size:b,distance:c,x:0,y:0,z:0,scale:1,rotation:0,opacity:f,color:e,blending:d})},updateLensFlares:function(){var a,b=this.lensFlares.length,c=2*-this.positionScreen.x,d=2*-this.positionScreen.y;for(a=0;a<b;a++){var e=this.lensFlares[a];e.x=this.positionScreen.x+c*e.distance;e.y=this.positionScreen.y+d*e.distance;e.wantedRotation=e.x*Math.PI*.25;e.rotation+=.25*(e.wantedRotation-e.rotation)}}});Za.prototype=Object.create(P.prototype);\nZa.prototype.constructor=Za;Za.prototype.isSpriteMaterial=!0;Za.prototype.copy=function(a){P.prototype.copy.call(this,a);this.color.copy(a.color);this.map=a.map;this.rotation=a.rotation;return this};xc.prototype=Object.assign(Object.create(w.prototype),{constructor:xc,isSprite:!0,raycast:function(){var a=new n,b=new n,c=new n;return function(d,e){b.setFromMatrixPosition(this.matrixWorld);d.ray.closestPointToPoint(b,a);c.setFromMatrixScale(this.matrixWorld);var f=c.x*c.y/4;b.distanceToSquared(a)>f||\n(f=d.ray.origin.distanceTo(a),f<d.near||f>d.far||e.push({distance:f,point:a.clone(),face:null,object:this}))}}(),clone:function(){return(new this.constructor(this.material)).copy(this)}});yc.prototype=Object.assign(Object.create(w.prototype),{constructor:yc,copy:function(a){w.prototype.copy.call(this,a,!1);a=a.levels;for(var b=0,c=a.length;b<c;b++){var d=a[b];this.addLevel(d.object.clone(),d.distance)}return this},addLevel:function(a,b){void 0===b&&(b=0);b=Math.abs(b);for(var c=this.levels,d=0;d<\nc.length&&!(b<c[d].distance);d++);c.splice(d,0,{distance:b,object:a});this.add(a)},getObjectForDistance:function(a){for(var b=this.levels,c=1,d=b.length;c<d&&!(a<b[c].distance);c++);return b[c-1].object},raycast:function(){var a=new n;return function(b,c){a.setFromMatrixPosition(this.matrixWorld);var d=b.ray.origin.distanceTo(a);this.getObjectForDistance(d).raycast(b,c)}}(),update:function(){var a=new n,b=new n;return function(c){var d=this.levels;if(1<d.length){a.setFromMatrixPosition(c.matrixWorld);\nb.setFromMatrixPosition(this.matrixWorld);c=a.distanceTo(b);d[0].object.visible=!0;for(var e=1,f=d.length;e<f;e++)if(c>=d[e].distance)d[e-1].object.visible=!1,d[e].object.visible=!0;else break;for(;e<f;e++)d[e].object.visible=!1}}}(),toJSON:function(a){a=w.prototype.toJSON.call(this,a);a.object.levels=[];for(var b=this.levels,c=0,d=b.length;c<d;c++){var e=b[c];a.object.levels.push({object:e.object.uuid,distance:e.distance})}return a}});Object.assign(zc.prototype,{calculateInverses:function(){this.boneInverses=\n[];for(var a=0,b=this.bones.length;a<b;a++){var c=new O;this.bones[a]&&c.getInverse(this.bones[a].matrixWorld);this.boneInverses.push(c)}},pose:function(){var a,b;var c=0;for(b=this.bones.length;c<b;c++)(a=this.bones[c])&&a.matrixWorld.getInverse(this.boneInverses[c]);c=0;for(b=this.bones.length;c<b;c++)if(a=this.bones[c])a.parent&&a.parent.isBone?(a.matrix.getInverse(a.parent.matrixWorld),a.matrix.multiply(a.matrixWorld)):a.matrix.copy(a.matrixWorld),a.matrix.decompose(a.position,a.quaternion,a.scale)},\nupdate:function(){var a=new O,b=new O;return function(){for(var c=this.bones,d=this.boneInverses,e=this.boneMatrices,f=this.boneTexture,g=0,h=c.length;g<h;g++)a.multiplyMatrices(c[g]?c[g].matrixWorld:b,d[g]),a.toArray(e,16*g);void 0!==f&&(f.needsUpdate=!0)}}(),clone:function(){return new zc(this.bones,this.boneInverses)}});od.prototype=Object.assign(Object.create(w.prototype),{constructor:od,isBone:!0});pd.prototype=Object.assign(Object.create(fa.prototype),{constructor:pd,isSkinnedMesh:!0,initBones:function(){var a=\n[],b;if(this.geometry&&void 0!==this.geometry.bones){var c=0;for(b=this.geometry.bones.length;c<b;c++){var d=this.geometry.bones[c];var e=new od;a.push(e);e.name=d.name;e.position.fromArray(d.pos);e.quaternion.fromArray(d.rotq);void 0!==d.scl&&e.scale.fromArray(d.scl)}c=0;for(b=this.geometry.bones.length;c<b;c++)d=this.geometry.bones[c],-1!==d.parent&&null!==d.parent&&void 0!==a[d.parent]?a[d.parent].add(a[c]):this.add(a[c])}this.updateMatrixWorld(!0);return a},bind:function(a,b){this.skeleton=a;\nvoid 0===b&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),b=this.matrixWorld);this.bindMatrix.copy(b);this.bindMatrixInverse.getInverse(b)},pose:function(){this.skeleton.pose()},normalizeSkinWeights:function(){var a;if(this.geometry&&this.geometry.isGeometry)for(a=0;a<this.geometry.skinWeights.length;a++){var b=this.geometry.skinWeights[a];var c=1/b.lengthManhattan();Infinity!==c?b.multiplyScalar(c):b.set(1,0,0,0)}else if(this.geometry&&this.geometry.isBufferGeometry){var b=new S,\nd=this.geometry.attributes.skinWeight;for(a=0;a<d.count;a++)b.x=d.getX(a),b.y=d.getY(a),b.z=d.getZ(a),b.w=d.getW(a),c=1/b.lengthManhattan(),Infinity!==c?b.multiplyScalar(c):b.set(1,0,0,0),d.setXYZW(a,b.x,b.y,b.z,b.w)}},updateMatrixWorld:function(a){fa.prototype.updateMatrixWorld.call(this,a);\"attached\"===this.bindMode?this.bindMatrixInverse.getInverse(this.matrixWorld):\"detached\"===this.bindMode?this.bindMatrixInverse.getInverse(this.bindMatrix):console.warn(\"THREE.SkinnedMesh: Unrecognized bindMode: \"+\nthis.bindMode)},clone:function(){return(new this.constructor(this.geometry,this.material)).copy(this)}});W.prototype=Object.create(P.prototype);W.prototype.constructor=W;W.prototype.isLineBasicMaterial=!0;W.prototype.copy=function(a){P.prototype.copy.call(this,a);this.color.copy(a.color);this.linewidth=a.linewidth;this.linecap=a.linecap;this.linejoin=a.linejoin;return this};ra.prototype=Object.assign(Object.create(w.prototype),{constructor:ra,isLine:!0,raycast:function(){var a=new O,b=new hb,c=new Ca;\nreturn function(d,e){var f=d.linePrecision,f=f*f,g=this.geometry,h=this.matrixWorld;null===g.boundingSphere&&g.computeBoundingSphere();c.copy(g.boundingSphere);c.applyMatrix4(h);if(!1!==d.ray.intersectsSphere(c)){a.getInverse(h);b.copy(d.ray).applyMatrix4(a);var k=new n,l=new n,h=new n,q=new n,m=this&&this.isLineSegments?2:1;if(g.isBufferGeometry){var t=g.index;var r=g.attributes.position.array;if(null!==t)for(var v=t.array,g=0,u=v.length-1;g<u;g+=m)t=v[g+1],k.fromArray(r,3*v[g]),l.fromArray(r,3*\nt),t=b.distanceSqToSegment(k,l,q,h),t>f||(q.applyMatrix4(this.matrixWorld),t=d.ray.origin.distanceTo(q),t<d.near||t>d.far||e.push({distance:t,point:h.clone().applyMatrix4(this.matrixWorld),index:g,face:null,faceIndex:null,object:this}));else for(g=0,u=r.length/3-1;g<u;g+=m)k.fromArray(r,3*g),l.fromArray(r,3*g+3),t=b.distanceSqToSegment(k,l,q,h),t>f||(q.applyMatrix4(this.matrixWorld),t=d.ray.origin.distanceTo(q),t<d.near||t>d.far||e.push({distance:t,point:h.clone().applyMatrix4(this.matrixWorld),index:g,\nface:null,faceIndex:null,object:this}))}else if(g.isGeometry)for(k=g.vertices,l=k.length,g=0;g<l-1;g+=m)t=b.distanceSqToSegment(k[g],k[g+1],q,h),t>f||(q.applyMatrix4(this.matrixWorld),t=d.ray.origin.distanceTo(q),t<d.near||t>d.far||e.push({distance:t,point:h.clone().applyMatrix4(this.matrixWorld),index:g,face:null,faceIndex:null,object:this}))}}}(),clone:function(){return(new this.constructor(this.geometry,this.material)).copy(this)}});X.prototype=Object.assign(Object.create(ra.prototype),{constructor:X,\nisLineSegments:!0});qd.prototype=Object.assign(Object.create(ra.prototype),{constructor:qd,isLineLoop:!0});ma.prototype=Object.create(P.prototype);ma.prototype.constructor=ma;ma.prototype.isPointsMaterial=!0;ma.prototype.copy=function(a){P.prototype.copy.call(this,a);this.color.copy(a.color);this.map=a.map;this.size=a.size;this.sizeAttenuation=a.sizeAttenuation;return this};Jb.prototype=Object.assign(Object.create(w.prototype),{constructor:Jb,isPoints:!0,raycast:function(){var a=new O,b=new hb,c=\nnew Ca;return function(d,e){function f(a,c){var f=b.distanceSqToPoint(a);if(f<q){a=b.closestPointToPoint(a);a.applyMatrix4(k);var h=d.ray.origin.distanceTo(a);h<d.near||h>d.far||e.push({distance:h,distanceToRay:Math.sqrt(f),point:a.clone(),index:c,face:null,object:g})}}var g=this,h=this.geometry,k=this.matrixWorld,l=d.params.Points.threshold;null===h.boundingSphere&&h.computeBoundingSphere();c.copy(h.boundingSphere);c.applyMatrix4(k);c.radius+=l;if(!1!==d.ray.intersectsSphere(c)){a.getInverse(k);\nb.copy(d.ray).applyMatrix4(a);var l=l/((this.scale.x+this.scale.y+this.scale.z)/3),q=l*l,l=new n;if(h.isBufferGeometry){var m=h.index,h=h.attributes.position.array;if(null!==m)for(var t=m.array,m=0,r=t.length;m<r;m++){var v=t[m];l.fromArray(h,3*v);f(l,v)}else for(m=0,t=h.length/3;m<t;m++)l.fromArray(h,3*m),f(l,m)}else for(l=h.vertices,m=0,t=l.length;m<t;m++)f(l[m],m)}}}(),clone:function(){return(new this.constructor(this.geometry,this.material)).copy(this)}});Ac.prototype=Object.assign(Object.create(w.prototype),\n{constructor:Ac});rd.prototype=Object.create(N.prototype);rd.prototype.constructor=rd;Kb.prototype=Object.create(N.prototype);Kb.prototype.constructor=Kb;Kb.prototype.isCompressedTexture=!0;Bc.prototype=Object.create(N.prototype);Bc.prototype.constructor=Bc;Bc.prototype.isDepthTexture=!0;Lb.prototype=Object.create(F.prototype);Lb.prototype.constructor=Lb;Cc.prototype=Object.create(Q.prototype);Cc.prototype.constructor=Cc;Mb.prototype=Object.create(F.prototype);Mb.prototype.constructor=Mb;Dc.prototype=\nObject.create(Q.prototype);Dc.prototype.constructor=Dc;ua.prototype=Object.create(F.prototype);ua.prototype.constructor=ua;Ec.prototype=Object.create(Q.prototype);Ec.prototype.constructor=Ec;Nb.prototype=Object.create(ua.prototype);Nb.prototype.constructor=Nb;Fc.prototype=Object.create(Q.prototype);Fc.prototype.constructor=Fc;jb.prototype=Object.create(ua.prototype);jb.prototype.constructor=jb;Gc.prototype=Object.create(Q.prototype);Gc.prototype.constructor=Gc;Ob.prototype=Object.create(ua.prototype);\nOb.prototype.constructor=Ob;Hc.prototype=Object.create(Q.prototype);Hc.prototype.constructor=Hc;Pb.prototype=Object.create(ua.prototype);Pb.prototype.constructor=Pb;Ic.prototype=Object.create(Q.prototype);Ic.prototype.constructor=Ic;Qb.prototype=Object.create(F.prototype);Qb.prototype.constructor=Qb;Jc.prototype=Object.create(Q.prototype);Jc.prototype.constructor=Jc;Rb.prototype=Object.create(F.prototype);Rb.prototype.constructor=Rb;Kc.prototype=Object.create(Q.prototype);Kc.prototype.constructor=\nKc;Sb.prototype=Object.create(F.prototype);Sb.prototype.constructor=Sb;var Fa={area:function(a){for(var b=a.length,c=0,d=b-1,e=0;e<b;d=e++)c+=a[d].x*a[e].y-a[e].x*a[d].y;return.5*c},triangulate:function(){return function(a,b){var c=a.length;if(3>c)return null;var d=[],e=[],f=[],g;if(0<Fa.area(a))for(g=0;g<c;g++)e[g]=g;else for(g=0;g<c;g++)e[g]=c-1-g;var h=2*c;for(g=c-1;2<c;){if(0>=h--){console.warn(\"THREE.ShapeUtils: Unable to triangulate polygon! in triangulate()\");break}var k=g;c<=k&&(k=0);g=k+\n1;c<=g&&(g=0);var l=g+1;c<=l&&(l=0);a:{var m;var p=a[e[k]].x;var t=a[e[k]].y;var n=a[e[g]].x;var v=a[e[g]].y;var u=a[e[l]].x;var x=a[e[l]].y;if(0>=(n-p)*(x-t)-(v-t)*(u-p))var y=!1;else{var A=u-n;var w=x-v;var B=p-u;var z=t-x;var D=n-p;y=v-t;for(m=0;m<c;m++){var C=a[e[m]].x;var F=a[e[m]].y;if(!(C===p&&F===t||C===n&&F===v||C===u&&F===x)){var K=C-p;var L=F-t;var O=C-n;var J=F-v;C-=u;F-=x;J=A*J-w*O;L=D*L-y*K;C=B*F-z*C;if(J>=-Number.EPSILON&&C>=-Number.EPSILON&&L>=-Number.EPSILON){y=!1;break a}}}y=!0}}if(y){d.push([a[e[k]],\na[e[g]],a[e[l]]]);f.push([e[k],e[g],e[l]]);k=g;for(l=g+1;l<c;k++,l++)e[k]=e[l];c--;h=2*c}}return b?f:d}}(),triangulateShape:function(a,b){function c(a){var b=a.length;2<b&&a[b-1].equals(a[0])&&a.pop()}function d(a,b,c){return a.x!==b.x?a.x<b.x?a.x<=c.x&&c.x<=b.x:b.x<=c.x&&c.x<=a.x:a.y<b.y?a.y<=c.y&&c.y<=b.y:b.y<=c.y&&c.y<=a.y}function e(a,b,c,e,f){var g=b.x-a.x,h=b.y-a.y,k=e.x-c.x,l=e.y-c.y,m=a.x-c.x,q=a.y-c.y,p=h*k-g*l,n=h*m-g*q;if(Math.abs(p)>Number.EPSILON){if(0<p){if(0>n||n>p)return[];k=l*m-k*\nq;if(0>k||k>p)return[]}else{if(0<n||n<p)return[];k=l*m-k*q;if(0<k||k<p)return[]}if(0===k)return!f||0!==n&&n!==p?[a]:[];if(k===p)return!f||0!==n&&n!==p?[b]:[];if(0===n)return[c];if(n===p)return[e];f=k/p;return[{x:a.x+f*g,y:a.y+f*h}]}if(0!==n||l*m!==k*q)return[];h=0===g&&0===h;k=0===k&&0===l;if(h&&k)return a.x!==c.x||a.y!==c.y?[]:[a];if(h)return d(c,e,a)?[a]:[];if(k)return d(a,b,c)?[c]:[];0!==g?(a.x<b.x?(g=a,k=a.x,h=b,a=b.x):(g=b,k=b.x,h=a,a=a.x),c.x<e.x?(b=c,p=c.x,l=e,c=e.x):(b=e,p=e.x,l=c,c=c.x)):\n(a.y<b.y?(g=a,k=a.y,h=b,a=b.y):(g=b,k=b.y,h=a,a=a.y),c.y<e.y?(b=c,p=c.y,l=e,c=e.y):(b=e,p=e.y,l=c,c=c.y));return k<=p?a<p?[]:a===p?f?[]:[b]:a<=c?[b,h]:[b,l]:k>c?[]:k===c?f?[]:[g]:a<=c?[g,h]:[g,l]}function f(a,b,c,d){var e=b.x-a.x,f=b.y-a.y;b=c.x-a.x;c=c.y-a.y;var g=d.x-a.x;d=d.y-a.y;a=e*c-f*b;e=e*d-f*g;return Math.abs(a)>Number.EPSILON?(b=g*c-d*b,0<a?0<=e&&0<=b:0<=e||0<=b):0<e}c(a);b.forEach(c);var g,h={},k=a.concat();var l=0;for(g=b.length;l<g;l++)Array.prototype.push.apply(k,b[l]);l=0;for(g=k.length;l<\ng;l++){var m=k[l].x+\":\"+k[l].y;void 0!==h[m]&&console.warn(\"THREE.ShapeUtils: Duplicate point\",m,l);h[m]=l}l=function(a,b){function c(a,b){var c=h.length-1,d=a-1;0>d&&(d=c);var e=a+1;e>c&&(e=0);c=f(h[a],h[d],h[e],D[b]);if(!c)return!1;c=D.length-1;d=b-1;0>d&&(d=c);e=b+1;e>c&&(e=0);return(c=f(D[b],D[d],D[e],h[a]))?!0:!1}function d(a,b){var c;for(c=0;c<h.length;c++){var d=c+1;d%=h.length;d=e(a,b,h[c],h[d],!0);if(0<d.length)return!0}return!1}function g(a,c){var d,f;for(d=0;d<k.length;d++){var g=b[k[d]];\nfor(f=0;f<g.length;f++){var h=f+1;h%=g.length;h=e(a,c,g[f],g[h],!0);if(0<h.length)return!0}}return!1}var h=a.concat(),k=[],l,m;a=[];var q,p=0;for(l=b.length;p<l;p++)k.push(p);var n=0;for(var t=2*k.length;0<k.length;){t--;if(0>t){console.log('THREE.ShapeUtils: Infinite Loop! Holes left:\" + indepHoles.length + \", Probably Hole outside Shape!');break}for(m=n;m<h.length;m++){var w=h[m];l=-1;for(p=0;p<k.length;p++){var z=k[p];var C=w.x+\":\"+w.y+\":\"+z;if(void 0===a[C]){var D=b[z];for(q=0;q<D.length;q++)if(z=\nD[q],c(m,q)&&!d(w,z)&&!g(w,z)){l=q;k.splice(p,1);n=h.slice(0,m+1);z=h.slice(m);q=D.slice(l);var F=D.slice(0,l+1);h=n.concat(q).concat(F).concat(z);n=m;break}if(0<=l)break;a[C]=!0}}if(0<=l)break}}return h}(a,b);k=Fa.triangulate(l,!1);l=0;for(g=k.length;l<g;l++)for(b=k[l],a=0;3>a;a++)m=b[a].x+\":\"+b[a].y,m=h[m],void 0!==m&&(b[a]=m);return k.concat()},isClockWise:function(a){return 0>Fa.area(a)}};$a.prototype=Object.create(Q.prototype);$a.prototype.constructor=$a;Ea.prototype=Object.create(F.prototype);\nEa.prototype.constructor=Ea;Ea.prototype.getArrays=function(){var a=this.getAttribute(\"position\"),a=a?Array.prototype.slice.call(a.array):[],b=this.getAttribute(\"uv\"),b=b?Array.prototype.slice.call(b.array):[],c=this.index,c=c?Array.prototype.slice.call(c.array):[];return{position:a,uv:b,index:c}};Ea.prototype.addShapeList=function(a,b){var c=a.length;b.arrays=this.getArrays();for(var d=0;d<c;d++)this.addShape(a[d],b);this.setIndex(b.arrays.index);this.addAttribute(\"position\",new z(b.arrays.position,\n3));this.addAttribute(\"uv\",new z(b.arrays.uv,2))};Ea.prototype.addShape=function(a,b){function c(a,b,c){b||console.error(\"THREE.ExtrudeGeometry: vec does not exist\");return b.clone().multiplyScalar(c).add(a)}function d(a,b,c){var d=a.x-b.x;var e=a.y-b.y;var f=c.x-a.x;var g=c.y-a.y,h=d*d+e*e;if(Math.abs(d*g-e*f)>Number.EPSILON){var k=Math.sqrt(h),l=Math.sqrt(f*f+g*g),h=b.x-e/k;b=b.y+d/k;g=((c.x-g/l-h)*g-(c.y+f/l-b)*f)/(d*g-e*f);f=h+d*g-a.x;d=b+e*g-a.y;e=f*f+d*d;if(2>=e)return new D(f,d);e=Math.sqrt(e/\n2)}else a=!1,d>Number.EPSILON?f>Number.EPSILON&&(a=!0):d<-Number.EPSILON?f<-Number.EPSILON&&(a=!0):Math.sign(e)===Math.sign(g)&&(a=!0),a?(f=-e,e=Math.sqrt(h)):(f=d,d=e,e=Math.sqrt(h/2));return new D(f/e,d/e)}function e(a,b){for(G=a.length;0<=--G;){var c=G;var d=G-1;0>d&&(d=a.length-1);var e,f=w+2*x;for(e=0;e<f;e++){var g=X*e,l=X*(e+1),q=b+d+g,p=b+d+l,l=b+c+l;h(b+c+g);h(q);h(l);h(q);h(p);h(l);g=m.length/3;g=F.generateSideWallUV(R,m,g-6,g-3,g-2,g-1);k(g[0]);k(g[1]);k(g[3]);k(g[1]);k(g[2]);k(g[3])}}}\nfunction f(a,b,c){r.push(a);r.push(b);r.push(c)}function g(a,b,c){h(a);h(b);h(c);a=m.length/3;a=F.generateTopUV(R,m,a-3,a-2,a-1);k(a[0]);k(a[1]);k(a[2])}function h(a){p.push(m.length/3);m.push(r[3*a+0]);m.push(r[3*a+1]);m.push(r[3*a+2])}function k(a){t.push(a.x);t.push(a.y)}var l=b.arrays?b.arrays:this.getArrays(),m=l.position,p=l.index,t=l.uv,r=[],l=void 0!==b.amount?b.amount:100,v=void 0!==b.bevelThickness?b.bevelThickness:6,u=void 0!==b.bevelSize?b.bevelSize:v-2,x=void 0!==b.bevelSegments?b.bevelSegments:\n3,y=void 0!==b.bevelEnabled?b.bevelEnabled:!0,A=void 0!==b.curveSegments?b.curveSegments:12,w=void 0!==b.steps?b.steps:1,B=b.extrudePath,C=!1,F=void 0!==b.UVGenerator?b.UVGenerator:$a.WorldUVGenerator;if(B){var K=B.getSpacedPoints(w);C=!0;y=!1;var L=void 0!==b.frames?b.frames:B.computeFrenetFrames(w,!1);var O=new n;var Q=new n;var P=new n}y||(u=v=x=0);var J,R=this,A=a.extractPoints(A);a=A.shape;var N=A.holes;if(!Fa.isClockWise(a)){a=a.reverse();var M=0;for(J=N.length;M<J;M++){var T=N[M];Fa.isClockWise(T)&&\n(N[M]=T.reverse())}}var V=Fa.triangulateShape(a,N),W=a;M=0;for(J=N.length;M<J;M++)T=N[M],a=a.concat(T);var Y,X=a.length,S,da=V.length,A=[],G=0;var U=W.length;var ca=U-1;for(Y=G+1;G<U;G++,ca++,Y++)ca===U&&(ca=0),Y===U&&(Y=0),A[G]=d(W[G],W[ca],W[Y]);var B=[],ea=A.concat();M=0;for(J=N.length;M<J;M++){T=N[M];var aa=[];G=0;U=T.length;ca=U-1;for(Y=G+1;G<U;G++,ca++,Y++)ca===U&&(ca=0),Y===U&&(Y=0),aa[G]=d(T[G],T[ca],T[Y]);B.push(aa);ea=ea.concat(aa)}for(ca=0;ca<x;ca++){U=ca/x;var fa=v*Math.cos(U*Math.PI/\n2);Y=u*Math.sin(U*Math.PI/2);G=0;for(U=W.length;G<U;G++){var ha=c(W[G],A[G],Y);f(ha.x,ha.y,-fa)}M=0;for(J=N.length;M<J;M++)for(T=N[M],aa=B[M],G=0,U=T.length;G<U;G++)ha=c(T[G],aa[G],Y),f(ha.x,ha.y,-fa)}Y=u;for(G=0;G<X;G++)ha=y?c(a[G],ea[G],Y):a[G],C?(Q.copy(L.normals[0]).multiplyScalar(ha.x),O.copy(L.binormals[0]).multiplyScalar(ha.y),P.copy(K[0]).add(Q).add(O),f(P.x,P.y,P.z)):f(ha.x,ha.y,0);for(U=1;U<=w;U++)for(G=0;G<X;G++)ha=y?c(a[G],ea[G],Y):a[G],C?(Q.copy(L.normals[U]).multiplyScalar(ha.x),O.copy(L.binormals[U]).multiplyScalar(ha.y),\nP.copy(K[U]).add(Q).add(O),f(P.x,P.y,P.z)):f(ha.x,ha.y,l/w*U);for(ca=x-1;0<=ca;ca--){U=ca/x;fa=v*Math.cos(U*Math.PI/2);Y=u*Math.sin(U*Math.PI/2);G=0;for(U=W.length;G<U;G++)ha=c(W[G],A[G],Y),f(ha.x,ha.y,l+fa);M=0;for(J=N.length;M<J;M++)for(T=N[M],aa=B[M],G=0,U=T.length;G<U;G++)ha=c(T[G],aa[G],Y),C?f(ha.x,ha.y+K[w-1].y,K[w-1].x+fa):f(ha.x,ha.y,l+fa)}(function(){var a=m.length/3;if(y){var c=0*X;for(G=0;G<da;G++)S=V[G],g(S[2]+c,S[1]+c,S[0]+c);c=X*(w+2*x);for(G=0;G<da;G++)S=V[G],g(S[0]+c,S[1]+c,S[2]+c)}else{for(G=\n0;G<da;G++)S=V[G],g(S[2],S[1],S[0]);for(G=0;G<da;G++)S=V[G],g(S[0]+X*w,S[1]+X*w,S[2]+X*w)}R.addGroup(a,m.length/3-a,void 0!==b.material?b.material:0)})();(function(){var a=m.length/3,c=0;e(W,c);c+=W.length;M=0;for(J=N.length;M<J;M++)T=N[M],e(T,c),c+=T.length;R.addGroup(a,m.length/3-a,void 0!==b.extrudeMaterial?b.extrudeMaterial:1)})();b.arrays||(this.setIndex(p),this.addAttribute(\"position\",new z(m,3)),this.addAttribute(\"uv\",new z(b.arrays.uv,2)))};$a.WorldUVGenerator={generateTopUV:function(a,b,\nc,d,e){a=b[3*d];d=b[3*d+1];var f=b[3*e];e=b[3*e+1];return[new D(b[3*c],b[3*c+1]),new D(a,d),new D(f,e)]},generateSideWallUV:function(a,b,c,d,e,f){a=b[3*c];var g=b[3*c+1];c=b[3*c+2];var h=b[3*d],k=b[3*d+1];d=b[3*d+2];var l=b[3*e],m=b[3*e+1];e=b[3*e+2];var p=b[3*f],n=b[3*f+1];b=b[3*f+2];return.01>Math.abs(g-k)?[new D(a,1-c),new D(h,1-d),new D(l,1-e),new D(p,1-b)]:[new D(g,1-c),new D(k,1-d),new D(m,1-e),new D(n,1-b)]}};Lc.prototype=Object.create(Q.prototype);Lc.prototype.constructor=Lc;Tb.prototype=\nObject.create(Ea.prototype);Tb.prototype.constructor=Tb;Mc.prototype=Object.create(Q.prototype);Mc.prototype.constructor=Mc;kb.prototype=Object.create(F.prototype);kb.prototype.constructor=kb;Nc.prototype=Object.create(Q.prototype);Nc.prototype.constructor=Nc;Ub.prototype=Object.create(F.prototype);Ub.prototype.constructor=Ub;Oc.prototype=Object.create(Q.prototype);Oc.prototype.constructor=Oc;Vb.prototype=Object.create(F.prototype);Vb.prototype.constructor=Vb;Wb.prototype=Object.create(Q.prototype);\nWb.prototype.constructor=Wb;Xb.prototype=Object.create(F.prototype);Xb.prototype.constructor=Xb;Yb.prototype=Object.create(F.prototype);Yb.prototype.constructor=Yb;lb.prototype=Object.create(Q.prototype);lb.prototype.constructor=lb;Ta.prototype=Object.create(F.prototype);Ta.prototype.constructor=Ta;Pc.prototype=Object.create(lb.prototype);Pc.prototype.constructor=Pc;Qc.prototype=Object.create(Ta.prototype);Qc.prototype.constructor=Qc;Rc.prototype=Object.create(Q.prototype);Rc.prototype.constructor=\nRc;Zb.prototype=Object.create(F.prototype);Zb.prototype.constructor=Zb;var Ka=Object.freeze({WireframeGeometry:Lb,ParametricGeometry:Cc,ParametricBufferGeometry:Mb,TetrahedronGeometry:Ec,TetrahedronBufferGeometry:Nb,OctahedronGeometry:Fc,OctahedronBufferGeometry:jb,IcosahedronGeometry:Gc,IcosahedronBufferGeometry:Ob,DodecahedronGeometry:Hc,DodecahedronBufferGeometry:Pb,PolyhedronGeometry:Dc,PolyhedronBufferGeometry:ua,TubeGeometry:Ic,TubeBufferGeometry:Qb,TorusKnotGeometry:Jc,TorusKnotBufferGeometry:Rb,\nTorusGeometry:Kc,TorusBufferGeometry:Sb,TextGeometry:Lc,TextBufferGeometry:Tb,SphereGeometry:Mc,SphereBufferGeometry:kb,RingGeometry:Nc,RingBufferGeometry:Ub,PlaneGeometry:vc,PlaneBufferGeometry:gb,LatheGeometry:Oc,LatheBufferGeometry:Vb,ShapeGeometry:Wb,ShapeBufferGeometry:Xb,ExtrudeGeometry:$a,ExtrudeBufferGeometry:Ea,EdgesGeometry:Yb,ConeGeometry:Pc,ConeBufferGeometry:Qc,CylinderGeometry:lb,CylinderBufferGeometry:Ta,CircleGeometry:Rc,CircleBufferGeometry:Zb,BoxGeometry:Eb,BoxBufferGeometry:fb});\n$b.prototype=Object.create(P.prototype);$b.prototype.constructor=$b;$b.prototype.isShadowMaterial=!0;ac.prototype=Object.create(ya.prototype);ac.prototype.constructor=ac;ac.prototype.isRawShaderMaterial=!0;Na.prototype=Object.create(P.prototype);Na.prototype.constructor=Na;Na.prototype.isMeshStandardMaterial=!0;Na.prototype.copy=function(a){P.prototype.copy.call(this,a);this.defines={STANDARD:\"\"};this.color.copy(a.color);this.roughness=a.roughness;this.metalness=a.metalness;this.map=a.map;this.lightMap=\na.lightMap;this.lightMapIntensity=a.lightMapIntensity;this.aoMap=a.aoMap;this.aoMapIntensity=a.aoMapIntensity;this.emissive.copy(a.emissive);this.emissiveMap=a.emissiveMap;this.emissiveIntensity=a.emissiveIntensity;this.bumpMap=a.bumpMap;this.bumpScale=a.bumpScale;this.normalMap=a.normalMap;this.normalScale.copy(a.normalScale);this.displacementMap=a.displacementMap;this.displacementScale=a.displacementScale;this.displacementBias=a.displacementBias;this.roughnessMap=a.roughnessMap;this.metalnessMap=\na.metalnessMap;this.alphaMap=a.alphaMap;this.envMap=a.envMap;this.envMapIntensity=a.envMapIntensity;this.refractionRatio=a.refractionRatio;this.wireframe=a.wireframe;this.wireframeLinewidth=a.wireframeLinewidth;this.wireframeLinecap=a.wireframeLinecap;this.wireframeLinejoin=a.wireframeLinejoin;this.skinning=a.skinning;this.morphTargets=a.morphTargets;this.morphNormals=a.morphNormals;return this};mb.prototype=Object.create(Na.prototype);mb.prototype.constructor=mb;mb.prototype.isMeshPhysicalMaterial=\n!0;mb.prototype.copy=function(a){Na.prototype.copy.call(this,a);this.defines={PHYSICAL:\"\"};this.reflectivity=a.reflectivity;this.clearCoat=a.clearCoat;this.clearCoatRoughness=a.clearCoatRoughness;return this};Aa.prototype=Object.create(P.prototype);Aa.prototype.constructor=Aa;Aa.prototype.isMeshPhongMaterial=!0;Aa.prototype.copy=function(a){P.prototype.copy.call(this,a);this.color.copy(a.color);this.specular.copy(a.specular);this.shininess=a.shininess;this.map=a.map;this.lightMap=a.lightMap;this.lightMapIntensity=\na.lightMapIntensity;this.aoMap=a.aoMap;this.aoMapIntensity=a.aoMapIntensity;this.emissive.copy(a.emissive);this.emissiveMap=a.emissiveMap;this.emissiveIntensity=a.emissiveIntensity;this.bumpMap=a.bumpMap;this.bumpScale=a.bumpScale;this.normalMap=a.normalMap;this.normalScale.copy(a.normalScale);this.displacementMap=a.displacementMap;this.displacementScale=a.displacementScale;this.displacementBias=a.displacementBias;this.specularMap=a.specularMap;this.alphaMap=a.alphaMap;this.envMap=a.envMap;this.combine=\na.combine;this.reflectivity=a.reflectivity;this.refractionRatio=a.refractionRatio;this.wireframe=a.wireframe;this.wireframeLinewidth=a.wireframeLinewidth;this.wireframeLinecap=a.wireframeLinecap;this.wireframeLinejoin=a.wireframeLinejoin;this.skinning=a.skinning;this.morphTargets=a.morphTargets;this.morphNormals=a.morphNormals;return this};nb.prototype=Object.create(Aa.prototype);nb.prototype.constructor=nb;nb.prototype.isMeshToonMaterial=!0;nb.prototype.copy=function(a){Aa.prototype.copy.call(this,\na);this.gradientMap=a.gradientMap;return this};ob.prototype=Object.create(P.prototype);ob.prototype.constructor=ob;ob.prototype.isMeshNormalMaterial=!0;ob.prototype.copy=function(a){P.prototype.copy.call(this,a);this.bumpMap=a.bumpMap;this.bumpScale=a.bumpScale;this.normalMap=a.normalMap;this.normalScale.copy(a.normalScale);this.displacementMap=a.displacementMap;this.displacementScale=a.displacementScale;this.displacementBias=a.displacementBias;this.wireframe=a.wireframe;this.wireframeLinewidth=a.wireframeLinewidth;\nthis.skinning=a.skinning;this.morphTargets=a.morphTargets;this.morphNormals=a.morphNormals;return this};pb.prototype=Object.create(P.prototype);pb.prototype.constructor=pb;pb.prototype.isMeshLambertMaterial=!0;pb.prototype.copy=function(a){P.prototype.copy.call(this,a);this.color.copy(a.color);this.map=a.map;this.lightMap=a.lightMap;this.lightMapIntensity=a.lightMapIntensity;this.aoMap=a.aoMap;this.aoMapIntensity=a.aoMapIntensity;this.emissive.copy(a.emissive);this.emissiveMap=a.emissiveMap;this.emissiveIntensity=\na.emissiveIntensity;this.specularMap=a.specularMap;this.alphaMap=a.alphaMap;this.envMap=a.envMap;this.combine=a.combine;this.reflectivity=a.reflectivity;this.refractionRatio=a.refractionRatio;this.wireframe=a.wireframe;this.wireframeLinewidth=a.wireframeLinewidth;this.wireframeLinecap=a.wireframeLinecap;this.wireframeLinejoin=a.wireframeLinejoin;this.skinning=a.skinning;this.morphTargets=a.morphTargets;this.morphNormals=a.morphNormals;return this};qb.prototype=Object.create(W.prototype);qb.prototype.constructor=\nqb;qb.prototype.isLineDashedMaterial=!0;qb.prototype.copy=function(a){W.prototype.copy.call(this,a);this.scale=a.scale;this.dashSize=a.dashSize;this.gapSize=a.gapSize;return this};var sg=Object.freeze({ShadowMaterial:$b,SpriteMaterial:Za,RawShaderMaterial:ac,ShaderMaterial:ya,PointsMaterial:ma,MeshPhysicalMaterial:mb,MeshStandardMaterial:Na,MeshPhongMaterial:Aa,MeshToonMaterial:nb,MeshNormalMaterial:ob,MeshLambertMaterial:pb,MeshDepthMaterial:Wa,MeshDistanceMaterial:Xa,MeshBasicMaterial:sa,LineDashedMaterial:qb,\nLineBasicMaterial:W,Material:P}),hd={enabled:!1,files:{},add:function(a,b){!1!==this.enabled&&(this.files[a]=b)},get:function(a){if(!1!==this.enabled)return this.files[a]},remove:function(a){delete this.files[a]},clear:function(){this.files={}}},oa=new $d;Object.assign(Ia.prototype,{load:function(a,b,c,d){void 0===a&&(a=\"\");void 0!==this.path&&(a=this.path+a);var e=this,f=hd.get(a);if(void 0!==f)return e.manager.itemStart(a),setTimeout(function(){b&&b(f);e.manager.itemEnd(a)},0),f;var g=a.match(/^data:(.*?)(;base64)?,(.*)$/);\nif(g){var h=g[1],k=!!g[2],g=g[3],g=window.decodeURIComponent(g);k&&(g=window.atob(g));try{var l=(this.responseType||\"\").toLowerCase();switch(l){case \"arraybuffer\":case \"blob\":var m=new ArrayBuffer(g.length);for(var p=new Uint8Array(m),k=0;k<g.length;k++)p[k]=g.charCodeAt(k);\"blob\"===l&&(m=new Blob([m],{type:h}));break;case \"document\":m=(new DOMParser).parseFromString(g,h);break;case \"json\":m=JSON.parse(g);break;default:m=g}window.setTimeout(function(){b&&b(m);e.manager.itemEnd(a)},0)}catch(r){window.setTimeout(function(){d&&\nd(r);e.manager.itemEnd(a);e.manager.itemError(a)},0)}}else{var n=new XMLHttpRequest;n.open(\"GET\",a,!0);n.addEventListener(\"load\",function(c){var f=c.target.response;hd.add(a,f);200===this.status?(b&&b(f),e.manager.itemEnd(a)):0===this.status?(console.warn(\"THREE.FileLoader: HTTP Status 0 received.\"),b&&b(f),e.manager.itemEnd(a)):(d&&d(c),e.manager.itemEnd(a),e.manager.itemError(a))},!1);void 0!==c&&n.addEventListener(\"progress\",function(a){c(a)},!1);n.addEventListener(\"error\",function(b){d&&d(b);\ne.manager.itemEnd(a);e.manager.itemError(a)},!1);void 0!==this.responseType&&(n.responseType=this.responseType);void 0!==this.withCredentials&&(n.withCredentials=this.withCredentials);n.overrideMimeType&&n.overrideMimeType(void 0!==this.mimeType?this.mimeType:\"text/plain\");for(h in this.requestHeader)n.setRequestHeader(h,this.requestHeader[h]);n.send(null)}e.manager.itemStart(a);return n},setPath:function(a){this.path=a;return this},setResponseType:function(a){this.responseType=a;return this},setWithCredentials:function(a){this.withCredentials=\na;return this},setMimeType:function(a){this.mimeType=a;return this},setRequestHeader:function(a){this.requestHeader=a;return this}});Object.assign(Re.prototype,{load:function(a,b,c,d){function e(e){l.load(a[e],function(a){a=g._parser(a,!0);h[e]={width:a.width,height:a.height,format:a.format,mipmaps:a.mipmaps};f+=1;6===f&&(1===a.mipmapCount&&(k.minFilter=1006),k.format=a.format,k.needsUpdate=!0,b&&b(k))},c,d)}var f,g=this,h=[],k=new Kb;k.image=h;var l=new Ia(this.manager);l.setPath(this.path);l.setResponseType(\"arraybuffer\");\nif(Array.isArray(a))for(var m=f=0,p=a.length;m<p;++m)e(m);else l.load(a,function(a){a=g._parser(a,!0);if(a.isCubemap)for(var c=a.mipmaps.length/a.mipmapCount,d=0;d<c;d++){h[d]={mipmaps:[]};for(var e=0;e<a.mipmapCount;e++)h[d].mipmaps.push(a.mipmaps[d*a.mipmapCount+e]),h[d].format=a.format,h[d].width=a.width,h[d].height=a.height}else k.image.width=a.width,k.image.height=a.height,k.mipmaps=a.mipmaps;1===a.mipmapCount&&(k.minFilter=1006);k.format=a.format;k.needsUpdate=!0;b&&b(k)},c,d);return k},setPath:function(a){this.path=\na;return this}});Object.assign(ae.prototype,{load:function(a,b,c,d){var e=this,f=new bb,g=new Ia(this.manager);g.setResponseType(\"arraybuffer\");g.load(a,function(a){if(a=e._parser(a))void 0!==a.image?f.image=a.image:void 0!==a.data&&(f.image.width=a.width,f.image.height=a.height,f.image.data=a.data),f.wrapS=void 0!==a.wrapS?a.wrapS:1001,f.wrapT=void 0!==a.wrapT?a.wrapT:1001,f.magFilter=void 0!==a.magFilter?a.magFilter:1006,f.minFilter=void 0!==a.minFilter?a.minFilter:1008,f.anisotropy=void 0!==a.anisotropy?\na.anisotropy:1,void 0!==a.format&&(f.format=a.format),void 0!==a.type&&(f.type=a.type),void 0!==a.mipmaps&&(f.mipmaps=a.mipmaps),1===a.mipmapCount&&(f.minFilter=1006),f.needsUpdate=!0,b&&b(f,a)},c,d);return f}});Object.assign(Sc.prototype,{crossOrigin:\"Anonymous\",load:function(a,b,c,d){void 0===a&&(a=\"\");void 0!==this.path&&(a=this.path+a);var e=this,f=hd.get(a);if(void 0!==f)return e.manager.itemStart(a),setTimeout(function(){b&&b(f);e.manager.itemEnd(a)},0),f;c=document.createElementNS(\"http://www.w3.org/1999/xhtml\",\n\"img\");c.addEventListener(\"load\",function(){hd.add(a,this);b&&b(this);e.manager.itemEnd(a)},!1);c.addEventListener(\"error\",function(b){d&&d(b);e.manager.itemEnd(a);e.manager.itemError(a)},!1);\"data:\"!==a.substr(0,5)&&void 0!==this.crossOrigin&&(c.crossOrigin=this.crossOrigin);e.manager.itemStart(a);c.src=a;return c},setCrossOrigin:function(a){this.crossOrigin=a;return this},setPath:function(a){this.path=a;return this}});Object.assign(be.prototype,{crossOrigin:\"Anonymous\",load:function(a,b,c,d){function e(c){g.load(a[c],\nfunction(a){f.images[c]=a;h++;6===h&&(f.needsUpdate=!0,b&&b(f))},void 0,d)}var f=new Va,g=new Sc(this.manager);g.setCrossOrigin(this.crossOrigin);g.setPath(this.path);var h=0;for(c=0;c<a.length;++c)e(c);return f},setCrossOrigin:function(a){this.crossOrigin=a;return this},setPath:function(a){this.path=a;return this}});Object.assign(sd.prototype,{crossOrigin:\"Anonymous\",load:function(a,b,c,d){var e=new Sc(this.manager);e.setCrossOrigin(this.crossOrigin);e.setPath(this.path);var f=new N;f.image=e.load(a,\nfunction(){var c=0<a.search(/\\.(jpg|jpeg)$/)||0===a.search(/^data\\:image\\/jpeg/);f.format=c?1022:1023;f.needsUpdate=!0;void 0!==b&&b(f)},c,d);return f},setCrossOrigin:function(a){this.crossOrigin=a;return this},setPath:function(a){this.path=a;return this}});aa.prototype=Object.assign(Object.create(w.prototype),{constructor:aa,isLight:!0,copy:function(a){w.prototype.copy.call(this,a);this.color.copy(a.color);this.intensity=a.intensity;return this},toJSON:function(a){a=w.prototype.toJSON.call(this,\na);a.object.color=this.color.getHex();a.object.intensity=this.intensity;void 0!==this.groundColor&&(a.object.groundColor=this.groundColor.getHex());void 0!==this.distance&&(a.object.distance=this.distance);void 0!==this.angle&&(a.object.angle=this.angle);void 0!==this.decay&&(a.object.decay=this.decay);void 0!==this.penumbra&&(a.object.penumbra=this.penumbra);void 0!==this.shadow&&(a.object.shadow=this.shadow.toJSON());return a}});td.prototype=Object.assign(Object.create(aa.prototype),{constructor:td,\nisHemisphereLight:!0,copy:function(a){aa.prototype.copy.call(this,a);this.groundColor.copy(a.groundColor);return this}});Object.assign(rb.prototype,{copy:function(a){this.camera=a.camera.clone();this.bias=a.bias;this.radius=a.radius;this.mapSize.copy(a.mapSize);return this},clone:function(){return(new this.constructor).copy(this)},toJSON:function(){var a={};0!==this.bias&&(a.bias=this.bias);1!==this.radius&&(a.radius=this.radius);if(512!==this.mapSize.x||512!==this.mapSize.y)a.mapSize=this.mapSize.toArray();\na.camera=this.camera.toJSON(!1).object;delete a.camera.matrix;return a}});ud.prototype=Object.assign(Object.create(rb.prototype),{constructor:ud,isSpotLightShadow:!0,update:function(a){var b=this.camera,c=2*R.RAD2DEG*a.angle,d=this.mapSize.width/this.mapSize.height;a=a.distance||b.far;if(c!==b.fov||d!==b.aspect||a!==b.far)b.fov=c,b.aspect=d,b.far=a,b.updateProjectionMatrix()}});vd.prototype=Object.assign(Object.create(aa.prototype),{constructor:vd,isSpotLight:!0,copy:function(a){aa.prototype.copy.call(this,\na);this.distance=a.distance;this.angle=a.angle;this.penumbra=a.penumbra;this.decay=a.decay;this.target=a.target.clone();this.shadow=a.shadow.clone();return this}});wd.prototype=Object.assign(Object.create(aa.prototype),{constructor:wd,isPointLight:!0,copy:function(a){aa.prototype.copy.call(this,a);this.distance=a.distance;this.decay=a.decay;this.shadow=a.shadow.clone();return this}});xd.prototype=Object.assign(Object.create(rb.prototype),{constructor:xd});yd.prototype=Object.assign(Object.create(aa.prototype),\n{constructor:yd,isDirectionalLight:!0,copy:function(a){aa.prototype.copy.call(this,a);this.target=a.target.clone();this.shadow=a.shadow.clone();return this}});zd.prototype=Object.assign(Object.create(aa.prototype),{constructor:zd,isAmbientLight:!0});Ad.prototype=Object.assign(Object.create(aa.prototype),{constructor:Ad,isRectAreaLight:!0,copy:function(a){aa.prototype.copy.call(this,a);this.width=a.width;this.height=a.height;return this},toJSON:function(a){a=aa.prototype.toJSON.call(this,a);a.object.width=\nthis.width;a.object.height=this.height;return a}});var ea={arraySlice:function(a,b,c){return ea.isTypedArray(a)?new a.constructor(a.subarray(b,void 0!==c?c:a.length)):a.slice(b,c)},convertArray:function(a,b,c){return!a||!c&&a.constructor===b?a:\"number\"===typeof b.BYTES_PER_ELEMENT?new b(a):Array.prototype.slice.call(a)},isTypedArray:function(a){return ArrayBuffer.isView(a)&&!(a instanceof DataView)},getKeyframeOrder:function(a){for(var b=a.length,c=Array(b),d=0;d!==b;++d)c[d]=d;c.sort(function(b,\nc){return a[b]-a[c]});return c},sortedArray:function(a,b,c){for(var d=a.length,e=new a.constructor(d),f=0,g=0;g!==d;++f)for(var h=c[f]*b,k=0;k!==b;++k)e[g++]=a[h+k];return e},flattenJSON:function(a,b,c,d){for(var e=1,f=a[0];void 0!==f&&void 0===f[d];)f=a[e++];if(void 0!==f){var g=f[d];if(void 0!==g)if(Array.isArray(g)){do g=f[d],void 0!==g&&(b.push(f.time),c.push.apply(c,g)),f=a[e++];while(void 0!==f)}else if(void 0!==g.toArray){do g=f[d],void 0!==g&&(b.push(f.time),g.toArray(c,c.length)),f=a[e++];\nwhile(void 0!==f)}else{do g=f[d],void 0!==g&&(b.push(f.time),c.push(g)),f=a[e++];while(void 0!==f)}}}};Object.assign(wa.prototype,{evaluate:function(a){var b=this.parameterPositions,c=this._cachedIndex,d=b[c],e=b[c-1];a:{b:{c:{d:if(!(a<d)){for(var f=c+2;;){if(void 0===d){if(a<e)break d;this._cachedIndex=c=b.length;return this.afterEnd_(c-1,a,e)}if(c===f)break;e=d;d=b[++c];if(a<d)break b}d=b.length;break c}if(a>=e)break a;else{f=b[1];a<f&&(c=2,e=f);for(f=c-2;;){if(void 0===e)return this._cachedIndex=\n0,this.beforeStart_(0,a,d);if(c===f)break;d=e;e=b[--c-1];if(a>=e)break b}d=c;c=0}}for(;c<d;)e=c+d>>>1,a<b[e]?d=e:c=e+1;d=b[c];e=b[c-1];if(void 0===e)return this._cachedIndex=0,this.beforeStart_(0,a,d);if(void 0===d)return this._cachedIndex=c=b.length,this.afterEnd_(c-1,e,a)}this._cachedIndex=c;this.intervalChanged_(c,e,d)}return this.interpolate_(c,e,a,d)},settings:null,DefaultSettings_:{},getSettings_:function(){return this.settings||this.DefaultSettings_},copySampleValue_:function(a){var b=this.resultBuffer,\nc=this.sampleValues,d=this.valueSize;a*=d;for(var e=0;e!==d;++e)b[e]=c[a+e];return b},interpolate_:function(a,b,c,d){throw Error(\"call to abstract method\");},intervalChanged_:function(a,b,c){}});Object.assign(wa.prototype,{beforeStart_:wa.prototype.copySampleValue_,afterEnd_:wa.prototype.copySampleValue_});Bd.prototype=Object.assign(Object.create(wa.prototype),{constructor:Bd,DefaultSettings_:{endingStart:2400,endingEnd:2400},intervalChanged_:function(a,b,c){var d=this.parameterPositions,e=a-2,f=\na+1,g=d[e],h=d[f];if(void 0===g)switch(this.getSettings_().endingStart){case 2401:e=a;g=2*b-c;break;case 2402:e=d.length-2;g=b+d[e]-d[e+1];break;default:e=a,g=c}if(void 0===h)switch(this.getSettings_().endingEnd){case 2401:f=a;h=2*c-b;break;case 2402:f=1;h=c+d[1]-d[0];break;default:f=a-1,h=b}a=.5*(c-b);d=this.valueSize;this._weightPrev=a/(b-g);this._weightNext=a/(h-c);this._offsetPrev=e*d;this._offsetNext=f*d},interpolate_:function(a,b,c,d){var e=this.resultBuffer,f=this.sampleValues,g=this.valueSize;\na*=g;var h=a-g,k=this._offsetPrev,l=this._offsetNext,m=this._weightPrev,p=this._weightNext,n=(c-b)/(d-b);c=n*n;d=c*n;b=-m*d+2*m*c-m*n;m=(1+m)*d+(-1.5-2*m)*c+(-.5+m)*n+1;n=(-1-p)*d+(1.5+p)*c+.5*n;p=p*d-p*c;for(c=0;c!==g;++c)e[c]=b*f[k+c]+m*f[h+c]+n*f[a+c]+p*f[l+c];return e}});Tc.prototype=Object.assign(Object.create(wa.prototype),{constructor:Tc,interpolate_:function(a,b,c,d){var e=this.resultBuffer,f=this.sampleValues,g=this.valueSize;a*=g;var h=a-g;b=(c-b)/(d-b);c=1-b;for(d=0;d!==g;++d)e[d]=f[h+\nd]*c+f[a+d]*b;return e}});Cd.prototype=Object.assign(Object.create(wa.prototype),{constructor:Cd,interpolate_:function(a,b,c,d){return this.copySampleValue_(a-1)}});var ab={TimeBufferType:Float32Array,ValueBufferType:Float32Array,DefaultInterpolation:2301,InterpolantFactoryMethodDiscrete:function(a){return new Cd(this.times,this.values,this.getValueSize(),a)},InterpolantFactoryMethodLinear:function(a){return new Tc(this.times,this.values,this.getValueSize(),a)},InterpolantFactoryMethodSmooth:function(a){return new Bd(this.times,\nthis.values,this.getValueSize(),a)},setInterpolation:function(a){switch(a){case 2300:var b=this.InterpolantFactoryMethodDiscrete;break;case 2301:b=this.InterpolantFactoryMethodLinear;break;case 2302:b=this.InterpolantFactoryMethodSmooth}if(void 0===b){b=\"unsupported interpolation for \"+this.ValueTypeName+\" keyframe track named \"+this.name;if(void 0===this.createInterpolant)if(a!==this.DefaultInterpolation)this.setInterpolation(this.DefaultInterpolation);else throw Error(b);console.warn(\"THREE.KeyframeTrackPrototype:\",\nb)}else this.createInterpolant=b},getInterpolation:function(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return 2300;case this.InterpolantFactoryMethodLinear:return 2301;case this.InterpolantFactoryMethodSmooth:return 2302}},getValueSize:function(){return this.values.length/this.times.length},shift:function(a){if(0!==a)for(var b=this.times,c=0,d=b.length;c!==d;++c)b[c]+=a;return this},scale:function(a){if(1!==a)for(var b=this.times,c=0,d=b.length;c!==d;++c)b[c]*=a;return this},\ntrim:function(a,b){for(var c=this.times,d=c.length,e=0,f=d-1;e!==d&&c[e]<a;)++e;for(;-1!==f&&c[f]>b;)--f;++f;if(0!==e||f!==d)e>=f&&(f=Math.max(f,1),e=f-1),a=this.getValueSize(),this.times=ea.arraySlice(c,e,f),this.values=ea.arraySlice(this.values,e*a,f*a);return this},validate:function(){var a=!0,b=this.getValueSize();0!==b-Math.floor(b)&&(console.error(\"THREE.KeyframeTrackPrototype: Invalid value size in track.\",this),a=!1);var c=this.times,b=this.values,d=c.length;0===d&&(console.error(\"THREE.KeyframeTrackPrototype: Track is empty.\",\nthis),a=!1);for(var e=null,f=0;f!==d;f++){var g=c[f];if(\"number\"===typeof g&&isNaN(g)){console.error(\"THREE.KeyframeTrackPrototype: Time is not a valid number.\",this,f,g);a=!1;break}if(null!==e&&e>g){console.error(\"THREE.KeyframeTrackPrototype: Out of order keys.\",this,f,g,e);a=!1;break}e=g}if(void 0!==b&&ea.isTypedArray(b))for(f=0,c=b.length;f!==c;++f)if(d=b[f],isNaN(d)){console.error(\"THREE.KeyframeTrackPrototype: Value is not a valid number.\",this,f,d);a=!1;break}return a},optimize:function(){for(var a,\nb,c=this.times,d=this.values,e=this.getValueSize(),f=2302===this.getInterpolation(),g=1,h=c.length-1,k=1;k<h;++k){a=!1;var l=c[k];if(l!==c[k+1]&&(1!==k||l!==l[0]))if(f)a=!0;else{b=k*e;for(var m=b-e,p=b+e,l=0;l!==e;++l){var n=d[b+l];if(n!==d[m+l]||n!==d[p+l]){a=!0;break}}}if(a){if(k!==g)for(c[g]=c[k],b=k*e,a=g*e,l=0;l!==e;++l)d[a+l]=d[b+l];++g}}if(0<h){c[g]=c[h];b=h*e;a=g*e;for(l=0;l!==e;++l)d[a+l]=d[b+l];++g}g!==c.length&&(this.times=ea.arraySlice(c,0,g),this.values=ea.arraySlice(d,0,g*e));return this}};\nbc.prototype=Object.assign(Object.create(ab),{constructor:bc,ValueTypeName:\"vector\"});Dd.prototype=Object.assign(Object.create(wa.prototype),{constructor:Dd,interpolate_:function(a,b,c,d){var e=this.resultBuffer,f=this.sampleValues,g=this.valueSize;a*=g;b=(c-b)/(d-b);for(c=a+g;a!==c;a+=4)ia.slerpFlat(e,0,f,a-g,f,a,b);return e}});Uc.prototype=Object.assign(Object.create(ab),{constructor:Uc,ValueTypeName:\"quaternion\",DefaultInterpolation:2301,InterpolantFactoryMethodLinear:function(a){return new Dd(this.times,\nthis.values,this.getValueSize(),a)},InterpolantFactoryMethodSmooth:void 0});cc.prototype=Object.assign(Object.create(ab),{constructor:cc,ValueTypeName:\"number\"});Ed.prototype=Object.assign(Object.create(ab),{constructor:Ed,ValueTypeName:\"string\",ValueBufferType:Array,DefaultInterpolation:2300,InterpolantFactoryMethodLinear:void 0,InterpolantFactoryMethodSmooth:void 0});Fd.prototype=Object.assign(Object.create(ab),{constructor:Fd,ValueTypeName:\"bool\",ValueBufferType:Array,DefaultInterpolation:2300,\nInterpolantFactoryMethodLinear:void 0,InterpolantFactoryMethodSmooth:void 0});Gd.prototype=Object.assign(Object.create(ab),{constructor:Gd,ValueTypeName:\"color\"});tb.prototype=ab;ab.constructor=tb;Object.assign(tb,{parse:function(a){if(void 0===a.type)throw Error(\"track type undefined, can not parse\");var b=tb._getTrackTypeForValueTypeName(a.type);if(void 0===a.times){var c=[],d=[];ea.flattenJSON(a.keys,c,d,\"value\");a.times=c;a.values=d}return void 0!==b.parse?b.parse(a):new b(a.name,a.times,a.values,\na.interpolation)},toJSON:function(a){var b=a.constructor;if(void 0!==b.toJSON)b=b.toJSON(a);else{var b={name:a.name,times:ea.convertArray(a.times,Array),values:ea.convertArray(a.values,Array)},c=a.getInterpolation();c!==a.DefaultInterpolation&&(b.interpolation=c)}b.type=a.ValueTypeName;return b},_getTrackTypeForValueTypeName:function(a){switch(a.toLowerCase()){case \"scalar\":case \"double\":case \"float\":case \"number\":case \"integer\":return cc;case \"vector\":case \"vector2\":case \"vector3\":case \"vector4\":return bc;\ncase \"color\":return Gd;case \"quaternion\":return Uc;case \"bool\":case \"boolean\":return Fd;case \"string\":return Ed}throw Error(\"Unsupported typeName: \"+a);}});Object.assign(Ba,{parse:function(a){for(var b=[],c=a.tracks,d=1/(a.fps||1),e=0,f=c.length;e!==f;++e)b.push(tb.parse(c[e]).scale(d));return new Ba(a.name,a.duration,b)},toJSON:function(a){var b=[],c=a.tracks;a={name:a.name,duration:a.duration,tracks:b};for(var d=0,e=c.length;d!==e;++d)b.push(tb.toJSON(c[d]));return a},CreateFromMorphTargetSequence:function(a,\nb,c,d){for(var e=b.length,f=[],g=0;g<e;g++){var h=[],k=[];h.push((g+e-1)%e,g,(g+1)%e);k.push(0,1,0);var l=ea.getKeyframeOrder(h),h=ea.sortedArray(h,1,l),k=ea.sortedArray(k,1,l);d||0!==h[0]||(h.push(e),k.push(k[0]));f.push((new cc(\".morphTargetInfluences[\"+b[g].name+\"]\",h,k)).scale(1/c))}return new Ba(a,-1,f)},findByName:function(a,b){var c=a;Array.isArray(a)||(c=a.geometry&&a.geometry.animations||a.animations);for(a=0;a<c.length;a++)if(c[a].name===b)return c[a];return null},CreateClipsFromMorphTargetSequences:function(a,\nb,c){for(var d,e={},f=/^([\\w-]*?)([\\d]+)$/,g=0,h=a.length;g<h;g++){var k=a[g],l=k.name.match(f);l&&1<l.length&&(d=l[1],(l=e[d])||(e[d]=l=[]),l.push(k))}a=[];for(d in e)a.push(Ba.CreateFromMorphTargetSequence(d,e[d],b,c));return a},parseAnimation:function(a,b){if(!a)return console.error(\"THREE.AnimationClip: No animation in JSONLoader data.\"),null;var c=function(a,b,c,d,e){if(0!==c.length){var f=[],g=[];ea.flattenJSON(c,f,g,d);0!==f.length&&e.push(new a(b,f,g))}},d=[],e=a.name||\"default\",f=a.length||\n-1,g=a.fps||30;a=a.hierarchy||[];for(var h=0;h<a.length;h++){var k=a[h].keys;if(k&&0!==k.length)if(k[0].morphTargets){for(var f={},l=0;l<k.length;l++)if(k[l].morphTargets)for(var m=0;m<k[l].morphTargets.length;m++)f[k[l].morphTargets[m]]=-1;for(var p in f){for(var n=[],r=[],m=0;m!==k[l].morphTargets.length;++m){var v=k[l];n.push(v.time);r.push(v.morphTarget===p?1:0)}d.push(new cc(\".morphTargetInfluence[\"+p+\"]\",n,r))}f=f.length*(g||1)}else l=\".bones[\"+b[h].name+\"]\",c(bc,l+\".position\",k,\"pos\",d),c(Uc,\nl+\".quaternion\",k,\"rot\",d),c(bc,l+\".scale\",k,\"scl\",d)}return 0===d.length?null:new Ba(e,f,d)}});Object.assign(Ba.prototype,{resetDuration:function(){for(var a=0,b=0,c=this.tracks.length;b!==c;++b)var d=this.tracks[b],a=Math.max(a,d.times[d.times.length-1]);this.duration=a},trim:function(){for(var a=0;a<this.tracks.length;a++)this.tracks[a].trim(0,this.duration);return this},optimize:function(){for(var a=0;a<this.tracks.length;a++)this.tracks[a].optimize();return this}});Object.assign(Hd.prototype,\n{load:function(a,b,c,d){var e=this;(new Ia(e.manager)).load(a,function(a){b(e.parse(JSON.parse(a)))},c,d)},setTextures:function(a){this.textures=a},parse:function(a){function b(a){void 0===c[a]&&console.warn(\"THREE.MaterialLoader: Undefined texture\",a);return c[a]}var c=this.textures,d=new sg[a.type];void 0!==a.uuid&&(d.uuid=a.uuid);void 0!==a.name&&(d.name=a.name);void 0!==a.color&&d.color.setHex(a.color);void 0!==a.roughness&&(d.roughness=a.roughness);void 0!==a.metalness&&(d.metalness=a.metalness);\nvoid 0!==a.emissive&&d.emissive.setHex(a.emissive);void 0!==a.specular&&d.specular.setHex(a.specular);void 0!==a.shininess&&(d.shininess=a.shininess);void 0!==a.clearCoat&&(d.clearCoat=a.clearCoat);void 0!==a.clearCoatRoughness&&(d.clearCoatRoughness=a.clearCoatRoughness);void 0!==a.uniforms&&(d.uniforms=a.uniforms);void 0!==a.vertexShader&&(d.vertexShader=a.vertexShader);void 0!==a.fragmentShader&&(d.fragmentShader=a.fragmentShader);void 0!==a.vertexColors&&(d.vertexColors=a.vertexColors);void 0!==\na.fog&&(d.fog=a.fog);void 0!==a.flatShading&&(d.flatShading=a.flatShading);void 0!==a.blending&&(d.blending=a.blending);void 0!==a.side&&(d.side=a.side);void 0!==a.opacity&&(d.opacity=a.opacity);void 0!==a.transparent&&(d.transparent=a.transparent);void 0!==a.alphaTest&&(d.alphaTest=a.alphaTest);void 0!==a.depthTest&&(d.depthTest=a.depthTest);void 0!==a.depthWrite&&(d.depthWrite=a.depthWrite);void 0!==a.colorWrite&&(d.colorWrite=a.colorWrite);void 0!==a.wireframe&&(d.wireframe=a.wireframe);void 0!==\na.wireframeLinewidth&&(d.wireframeLinewidth=a.wireframeLinewidth);void 0!==a.wireframeLinecap&&(d.wireframeLinecap=a.wireframeLinecap);void 0!==a.wireframeLinejoin&&(d.wireframeLinejoin=a.wireframeLinejoin);void 0!==a.skinning&&(d.skinning=a.skinning);void 0!==a.morphTargets&&(d.morphTargets=a.morphTargets);void 0!==a.dithering&&(d.dithering=a.dithering);void 0!==a.visible&&(d.visible=a.visible);void 0!==a.userData&&(d.userData=a.userData);void 0!==a.shading&&(d.flatShading=1===a.shading);void 0!==\na.size&&(d.size=a.size);void 0!==a.sizeAttenuation&&(d.sizeAttenuation=a.sizeAttenuation);void 0!==a.map&&(d.map=b(a.map));void 0!==a.alphaMap&&(d.alphaMap=b(a.alphaMap),d.transparent=!0);void 0!==a.bumpMap&&(d.bumpMap=b(a.bumpMap));void 0!==a.bumpScale&&(d.bumpScale=a.bumpScale);void 0!==a.normalMap&&(d.normalMap=b(a.normalMap));if(void 0!==a.normalScale){var e=a.normalScale;!1===Array.isArray(e)&&(e=[e,e]);d.normalScale=(new D).fromArray(e)}void 0!==a.displacementMap&&(d.displacementMap=b(a.displacementMap));\nvoid 0!==a.displacementScale&&(d.displacementScale=a.displacementScale);void 0!==a.displacementBias&&(d.displacementBias=a.displacementBias);void 0!==a.roughnessMap&&(d.roughnessMap=b(a.roughnessMap));void 0!==a.metalnessMap&&(d.metalnessMap=b(a.metalnessMap));void 0!==a.emissiveMap&&(d.emissiveMap=b(a.emissiveMap));void 0!==a.emissiveIntensity&&(d.emissiveIntensity=a.emissiveIntensity);void 0!==a.specularMap&&(d.specularMap=b(a.specularMap));void 0!==a.envMap&&(d.envMap=b(a.envMap));void 0!==a.reflectivity&&\n(d.reflectivity=a.reflectivity);void 0!==a.lightMap&&(d.lightMap=b(a.lightMap));void 0!==a.lightMapIntensity&&(d.lightMapIntensity=a.lightMapIntensity);void 0!==a.aoMap&&(d.aoMap=b(a.aoMap));void 0!==a.aoMapIntensity&&(d.aoMapIntensity=a.aoMapIntensity);void 0!==a.gradientMap&&(d.gradientMap=b(a.gradientMap));return d}});Object.assign(ce.prototype,{load:function(a,b,c,d){var e=this;(new Ia(e.manager)).load(a,function(a){b(e.parse(JSON.parse(a)))},c,d)},parse:function(a){var b=new F;var c=a.data.index;\nvoid 0!==c&&(c=new hf[c.type](c.array),b.setIndex(new K(c,1)));var d=a.data.attributes;for(f in d){var e=d[f];c=new hf[e.type](e.array);b.addAttribute(f,new K(c,e.itemSize,e.normalized))}var f=a.data.groups||a.data.drawcalls||a.data.offsets;if(void 0!==f)for(c=0,d=f.length;c!==d;++c)e=f[c],b.addGroup(e.start,e.count,e.materialIndex);a=a.data.boundingSphere;void 0!==a&&(f=new n,void 0!==a.center&&f.fromArray(a.center),b.boundingSphere=new Ca(f,a.radius));return b}});var hf={Int8Array:Int8Array,Uint8Array:Uint8Array,\nUint8ClampedArray:\"undefined\"!==typeof Uint8ClampedArray?Uint8ClampedArray:Uint8Array,Int16Array:Int16Array,Uint16Array:Uint16Array,Int32Array:Int32Array,Uint32Array:Uint32Array,Float32Array:Float32Array,Float64Array:Float64Array};dc.Handlers={handlers:[],add:function(a,b){this.handlers.push(a,b)},get:function(a){for(var b=this.handlers,c=0,d=b.length;c<d;c+=2){var e=b[c+1];if(b[c].test(a))return e}return null}};Object.assign(dc.prototype,{crossOrigin:void 0,extractUrlBase:function(a){a=a.split(\"/\");\nif(1===a.length)return\"./\";a.pop();return a.join(\"/\")+\"/\"},initMaterials:function(a,b,c){for(var d=[],e=0;e<a.length;++e)d[e]=this.createMaterial(a[e],b,c);return d},createMaterial:function(){var a={NoBlending:0,NormalBlending:1,AdditiveBlending:2,SubtractiveBlending:3,MultiplyBlending:4,CustomBlending:5},b=new C,c=new sd,d=new Hd;return function(e,f,g){function h(a,b,d,e,h){a=f+a;var l=dc.Handlers.get(a);null!==l?a=l.load(a):(c.setCrossOrigin(g),a=c.load(a));void 0!==b&&(a.repeat.fromArray(b),1!==\nb[0]&&(a.wrapS=1E3),1!==b[1]&&(a.wrapT=1E3));void 0!==d&&a.offset.fromArray(d);void 0!==e&&(\"repeat\"===e[0]&&(a.wrapS=1E3),\"mirror\"===e[0]&&(a.wrapS=1002),\"repeat\"===e[1]&&(a.wrapT=1E3),\"mirror\"===e[1]&&(a.wrapT=1002));void 0!==h&&(a.anisotropy=h);b=R.generateUUID();k[b]=a;return b}var k={},l={uuid:R.generateUUID(),type:\"MeshLambertMaterial\"},m;for(m in e){var p=e[m];switch(m){case \"DbgColor\":case \"DbgIndex\":case \"opticalDensity\":case \"illumination\":break;case \"DbgName\":l.name=p;break;case \"blending\":l.blending=\na[p];break;case \"colorAmbient\":case \"mapAmbient\":console.warn(\"THREE.Loader.createMaterial:\",m,\"is no longer supported.\");break;case \"colorDiffuse\":l.color=b.fromArray(p).getHex();break;case \"colorSpecular\":l.specular=b.fromArray(p).getHex();break;case \"colorEmissive\":l.emissive=b.fromArray(p).getHex();break;case \"specularCoef\":l.shininess=p;break;case \"shading\":\"basic\"===p.toLowerCase()&&(l.type=\"MeshBasicMaterial\");\"phong\"===p.toLowerCase()&&(l.type=\"MeshPhongMaterial\");\"standard\"===p.toLowerCase()&&\n(l.type=\"MeshStandardMaterial\");break;case \"mapDiffuse\":l.map=h(p,e.mapDiffuseRepeat,e.mapDiffuseOffset,e.mapDiffuseWrap,e.mapDiffuseAnisotropy);break;case \"mapDiffuseRepeat\":case \"mapDiffuseOffset\":case \"mapDiffuseWrap\":case \"mapDiffuseAnisotropy\":break;case \"mapEmissive\":l.emissiveMap=h(p,e.mapEmissiveRepeat,e.mapEmissiveOffset,e.mapEmissiveWrap,e.mapEmissiveAnisotropy);break;case \"mapEmissiveRepeat\":case \"mapEmissiveOffset\":case \"mapEmissiveWrap\":case \"mapEmissiveAnisotropy\":break;case \"mapLight\":l.lightMap=\nh(p,e.mapLightRepeat,e.mapLightOffset,e.mapLightWrap,e.mapLightAnisotropy);break;case \"mapLightRepeat\":case \"mapLightOffset\":case \"mapLightWrap\":case \"mapLightAnisotropy\":break;case \"mapAO\":l.aoMap=h(p,e.mapAORepeat,e.mapAOOffset,e.mapAOWrap,e.mapAOAnisotropy);break;case \"mapAORepeat\":case \"mapAOOffset\":case \"mapAOWrap\":case \"mapAOAnisotropy\":break;case \"mapBump\":l.bumpMap=h(p,e.mapBumpRepeat,e.mapBumpOffset,e.mapBumpWrap,e.mapBumpAnisotropy);break;case \"mapBumpScale\":l.bumpScale=p;break;case \"mapBumpRepeat\":case \"mapBumpOffset\":case \"mapBumpWrap\":case \"mapBumpAnisotropy\":break;\ncase \"mapNormal\":l.normalMap=h(p,e.mapNormalRepeat,e.mapNormalOffset,e.mapNormalWrap,e.mapNormalAnisotropy);break;case \"mapNormalFactor\":l.normalScale=[p,p];break;case \"mapNormalRepeat\":case \"mapNormalOffset\":case \"mapNormalWrap\":case \"mapNormalAnisotropy\":break;case \"mapSpecular\":l.specularMap=h(p,e.mapSpecularRepeat,e.mapSpecularOffset,e.mapSpecularWrap,e.mapSpecularAnisotropy);break;case \"mapSpecularRepeat\":case \"mapSpecularOffset\":case \"mapSpecularWrap\":case \"mapSpecularAnisotropy\":break;case \"mapMetalness\":l.metalnessMap=\nh(p,e.mapMetalnessRepeat,e.mapMetalnessOffset,e.mapMetalnessWrap,e.mapMetalnessAnisotropy);break;case \"mapMetalnessRepeat\":case \"mapMetalnessOffset\":case \"mapMetalnessWrap\":case \"mapMetalnessAnisotropy\":break;case \"mapRoughness\":l.roughnessMap=h(p,e.mapRoughnessRepeat,e.mapRoughnessOffset,e.mapRoughnessWrap,e.mapRoughnessAnisotropy);break;case \"mapRoughnessRepeat\":case \"mapRoughnessOffset\":case \"mapRoughnessWrap\":case \"mapRoughnessAnisotropy\":break;case \"mapAlpha\":l.alphaMap=h(p,e.mapAlphaRepeat,\ne.mapAlphaOffset,e.mapAlphaWrap,e.mapAlphaAnisotropy);break;case \"mapAlphaRepeat\":case \"mapAlphaOffset\":case \"mapAlphaWrap\":case \"mapAlphaAnisotropy\":break;case \"flipSided\":l.side=1;break;case \"doubleSided\":l.side=2;break;case \"transparency\":console.warn(\"THREE.Loader.createMaterial: transparency has been renamed to opacity\");l.opacity=p;break;case \"depthTest\":case \"depthWrite\":case \"colorWrite\":case \"opacity\":case \"reflectivity\":case \"transparent\":case \"visible\":case \"wireframe\":l[m]=p;break;case \"vertexColors\":!0===\np&&(l.vertexColors=2);\"face\"===p&&(l.vertexColors=1);break;default:console.error(\"THREE.Loader.createMaterial: Unsupported\",m,p)}}\"MeshBasicMaterial\"===l.type&&delete l.emissive;\"MeshPhongMaterial\"!==l.type&&delete l.specular;1>l.opacity&&(l.transparent=!0);d.setTextures(k);return d.parse(l)}}()});Object.assign(de.prototype,{load:function(a,b,c,d){var e=this,f=this.texturePath&&\"string\"===typeof this.texturePath?this.texturePath:dc.prototype.extractUrlBase(a),g=new Ia(this.manager);g.setWithCredentials(this.withCredentials);\ng.load(a,function(c){c=JSON.parse(c);var d=c.metadata;if(void 0!==d&&(d=d.type,void 0!==d)){if(\"object\"===d.toLowerCase()){console.error(\"THREE.JSONLoader: \"+a+\" should be loaded with THREE.ObjectLoader instead.\");return}if(\"scene\"===d.toLowerCase()){console.error(\"THREE.JSONLoader: \"+a+\" should be loaded with THREE.SceneLoader instead.\");return}}c=e.parse(c,f);b(c.geometry,c.materials)},c,d)},setTexturePath:function(a){this.texturePath=a},parse:function(){return function(a,b){void 0!==a.data&&(a=\na.data);a.scale=void 0!==a.scale?1/a.scale:1;var c=new Q,d=a,e,f,g,h=d.faces;var k=d.vertices;var l=d.normals,m=d.colors;var p=d.scale;var t=0;if(void 0!==d.uvs){for(e=0;e<d.uvs.length;e++)d.uvs[e].length&&t++;for(e=0;e<t;e++)c.faceVertexUvs[e]=[]}var r=0;for(g=k.length;r<g;)e=new n,e.x=k[r++]*p,e.y=k[r++]*p,e.z=k[r++]*p,c.vertices.push(e);r=0;for(g=h.length;r<g;){k=h[r++];var v=k&1;var u=k&2;e=k&8;var x=k&16;var y=k&32;p=k&64;k&=128;if(v){v=new Qa;v.a=h[r];v.b=h[r+1];v.c=h[r+3];var w=new Qa;w.a=\nh[r+1];w.b=h[r+2];w.c=h[r+3];r+=4;u&&(u=h[r++],v.materialIndex=u,w.materialIndex=u);u=c.faces.length;if(e)for(e=0;e<t;e++){var z=d.uvs[e];c.faceVertexUvs[e][u]=[];c.faceVertexUvs[e][u+1]=[];for(f=0;4>f;f++){var B=h[r++];var H=z[2*B];B=z[2*B+1];H=new D(H,B);2!==f&&c.faceVertexUvs[e][u].push(H);0!==f&&c.faceVertexUvs[e][u+1].push(H)}}x&&(x=3*h[r++],v.normal.set(l[x++],l[x++],l[x]),w.normal.copy(v.normal));if(y)for(e=0;4>e;e++)x=3*h[r++],y=new n(l[x++],l[x++],l[x]),2!==e&&v.vertexNormals.push(y),0!==\ne&&w.vertexNormals.push(y);p&&(p=h[r++],p=m[p],v.color.setHex(p),w.color.setHex(p));if(k)for(e=0;4>e;e++)p=h[r++],p=m[p],2!==e&&v.vertexColors.push(new C(p)),0!==e&&w.vertexColors.push(new C(p));c.faces.push(v);c.faces.push(w)}else{v=new Qa;v.a=h[r++];v.b=h[r++];v.c=h[r++];u&&(u=h[r++],v.materialIndex=u);u=c.faces.length;if(e)for(e=0;e<t;e++)for(z=d.uvs[e],c.faceVertexUvs[e][u]=[],f=0;3>f;f++)B=h[r++],H=z[2*B],B=z[2*B+1],H=new D(H,B),c.faceVertexUvs[e][u].push(H);x&&(x=3*h[r++],v.normal.set(l[x++],\nl[x++],l[x]));if(y)for(e=0;3>e;e++)x=3*h[r++],y=new n(l[x++],l[x++],l[x]),v.vertexNormals.push(y);p&&(p=h[r++],v.color.setHex(m[p]));if(k)for(e=0;3>e;e++)p=h[r++],v.vertexColors.push(new C(m[p]));c.faces.push(v)}}d=a;r=void 0!==d.influencesPerVertex?d.influencesPerVertex:2;if(d.skinWeights)for(g=0,h=d.skinWeights.length;g<h;g+=r)c.skinWeights.push(new S(d.skinWeights[g],1<r?d.skinWeights[g+1]:0,2<r?d.skinWeights[g+2]:0,3<r?d.skinWeights[g+3]:0));if(d.skinIndices)for(g=0,h=d.skinIndices.length;g<h;g+=\nr)c.skinIndices.push(new S(d.skinIndices[g],1<r?d.skinIndices[g+1]:0,2<r?d.skinIndices[g+2]:0,3<r?d.skinIndices[g+3]:0));c.bones=d.bones;c.bones&&0<c.bones.length&&(c.skinWeights.length!==c.skinIndices.length||c.skinIndices.length!==c.vertices.length)&&console.warn(\"When skinning, number of vertices (\"+c.vertices.length+\"), skinIndices (\"+c.skinIndices.length+\"), and skinWeights (\"+c.skinWeights.length+\") should match.\");g=a;h=g.scale;if(void 0!==g.morphTargets)for(d=0,r=g.morphTargets.length;d<r;d++)for(c.morphTargets[d]=\n{},c.morphTargets[d].name=g.morphTargets[d].name,c.morphTargets[d].vertices=[],l=c.morphTargets[d].vertices,m=g.morphTargets[d].vertices,t=0,k=m.length;t<k;t+=3)p=new n,p.x=m[t]*h,p.y=m[t+1]*h,p.z=m[t+2]*h,l.push(p);if(void 0!==g.morphColors&&0<g.morphColors.length)for(console.warn('THREE.JSONLoader: \"morphColors\" no longer supported. Using them as face colors.'),h=c.faces,g=g.morphColors[0].colors,d=0,r=h.length;d<r;d++)h[d].color.fromArray(g,3*d);g=a;d=[];r=[];void 0!==g.animation&&r.push(g.animation);\nvoid 0!==g.animations&&(g.animations.length?r=r.concat(g.animations):r.push(g.animations));for(g=0;g<r.length;g++)(h=Ba.parseAnimation(r[g],c.bones))&&d.push(h);c.morphTargets&&(r=Ba.CreateClipsFromMorphTargetSequences(c.morphTargets,10),d=d.concat(r));0<d.length&&(c.animations=d);c.computeFaceNormals();c.computeBoundingSphere();if(void 0===a.materials||0===a.materials.length)return{geometry:c};a=dc.prototype.initMaterials(a.materials,b,this.crossOrigin);return{geometry:c,materials:a}}}()});Object.assign(Se.prototype,\n{load:function(a,b,c,d){\"\"===this.texturePath&&(this.texturePath=a.substring(0,a.lastIndexOf(\"/\")+1));var e=this;(new Ia(e.manager)).load(a,function(c){var f=null;try{f=JSON.parse(c)}catch(h){void 0!==d&&d(h);console.error(\"THREE:ObjectLoader: Can't parse \"+a+\".\",h.message);return}c=f.metadata;void 0===c||void 0===c.type||\"geometry\"===c.type.toLowerCase()?console.error(\"THREE.ObjectLoader: Can't load \"+a+\". Use THREE.JSONLoader instead.\"):e.parse(f,b)},c,d)},setTexturePath:function(a){this.texturePath=\na},setCrossOrigin:function(a){this.crossOrigin=a},parse:function(a,b){var c=this.parseGeometries(a.geometries),d=this.parseImages(a.images,function(){void 0!==b&&b(e)}),d=this.parseTextures(a.textures,d),d=this.parseMaterials(a.materials,d),e=this.parseObject(a.object,c,d);a.animations&&(e.animations=this.parseAnimations(a.animations));void 0!==a.images&&0!==a.images.length||void 0===b||b(e);return e},parseGeometries:function(a){var b={};if(void 0!==a)for(var c=new de,d=new ce,e=0,f=a.length;e<f;e++){var g=\na[e];switch(g.type){case \"PlaneGeometry\":case \"PlaneBufferGeometry\":var h=new Ka[g.type](g.width,g.height,g.widthSegments,g.heightSegments);break;case \"BoxGeometry\":case \"BoxBufferGeometry\":case \"CubeGeometry\":h=new Ka[g.type](g.width,g.height,g.depth,g.widthSegments,g.heightSegments,g.depthSegments);break;case \"CircleGeometry\":case \"CircleBufferGeometry\":h=new Ka[g.type](g.radius,g.segments,g.thetaStart,g.thetaLength);break;case \"CylinderGeometry\":case \"CylinderBufferGeometry\":h=new Ka[g.type](g.radiusTop,\ng.radiusBottom,g.height,g.radialSegments,g.heightSegments,g.openEnded,g.thetaStart,g.thetaLength);break;case \"ConeGeometry\":case \"ConeBufferGeometry\":h=new Ka[g.type](g.radius,g.height,g.radialSegments,g.heightSegments,g.openEnded,g.thetaStart,g.thetaLength);break;case \"SphereGeometry\":case \"SphereBufferGeometry\":h=new Ka[g.type](g.radius,g.widthSegments,g.heightSegments,g.phiStart,g.phiLength,g.thetaStart,g.thetaLength);break;case \"DodecahedronGeometry\":case \"IcosahedronGeometry\":case \"OctahedronGeometry\":case \"TetrahedronGeometry\":h=\nnew Ka[g.type](g.radius,g.detail);break;case \"RingGeometry\":case \"RingBufferGeometry\":h=new Ka[g.type](g.innerRadius,g.outerRadius,g.thetaSegments,g.phiSegments,g.thetaStart,g.thetaLength);break;case \"TorusGeometry\":case \"TorusBufferGeometry\":h=new Ka[g.type](g.radius,g.tube,g.radialSegments,g.tubularSegments,g.arc);break;case \"TorusKnotGeometry\":case \"TorusKnotBufferGeometry\":h=new Ka[g.type](g.radius,g.tube,g.tubularSegments,g.radialSegments,g.p,g.q);break;case \"LatheGeometry\":case \"LatheBufferGeometry\":h=\nnew Ka[g.type](g.points,g.segments,g.phiStart,g.phiLength);break;case \"BufferGeometry\":h=d.parse(g);break;case \"Geometry\":h=c.parse(g,this.texturePath).geometry;break;default:console.warn('THREE.ObjectLoader: Unsupported geometry type \"'+g.type+'\"');continue}h.uuid=g.uuid;void 0!==g.name&&(h.name=g.name);b[g.uuid]=h}return b},parseMaterials:function(a,b){var c={};if(void 0!==a){var d=new Hd;d.setTextures(b);b=0;for(var e=a.length;b<e;b++){var f=a[b];if(\"MultiMaterial\"===f.type){for(var g=[],h=0;h<\nf.materials.length;h++)g.push(d.parse(f.materials[h]));c[f.uuid]=g}else c[f.uuid]=d.parse(f)}}return c},parseAnimations:function(a){for(var b=[],c=0;c<a.length;c++){var d=Ba.parse(a[c]);b.push(d)}return b},parseImages:function(a,b){function c(a){d.manager.itemStart(a);return f.load(a,function(){d.manager.itemEnd(a)},void 0,function(){d.manager.itemEnd(a);d.manager.itemError(a)})}var d=this,e={};if(void 0!==a&&0<a.length){b=new $d(b);var f=new Sc(b);f.setCrossOrigin(this.crossOrigin);b=0;for(var g=\na.length;b<g;b++){var h=a[b],k=/^(\\/\\/)|([a-z]+:(\\/\\/)?)/i.test(h.url)?h.url:d.texturePath+h.url;e[h.uuid]=c(k)}}return e},parseTextures:function(a,b){function c(a,b){if(\"number\"===typeof a)return a;console.warn(\"THREE.ObjectLoader.parseTexture: Constant should be in numeric form.\",a);return b[a]}var d={};if(void 0!==a)for(var e=0,f=a.length;e<f;e++){var g=a[e];void 0===g.image&&console.warn('THREE.ObjectLoader: No \"image\" specified for',g.uuid);void 0===b[g.image]&&console.warn(\"THREE.ObjectLoader: Undefined image\",\ng.image);var h=new N(b[g.image]);h.needsUpdate=!0;h.uuid=g.uuid;void 0!==g.name&&(h.name=g.name);void 0!==g.mapping&&(h.mapping=c(g.mapping,tg));void 0!==g.offset&&h.offset.fromArray(g.offset);void 0!==g.repeat&&h.repeat.fromArray(g.repeat);void 0!==g.wrap&&(h.wrapS=c(g.wrap[0],jf),h.wrapT=c(g.wrap[1],jf));void 0!==g.minFilter&&(h.minFilter=c(g.minFilter,kf));void 0!==g.magFilter&&(h.magFilter=c(g.magFilter,kf));void 0!==g.anisotropy&&(h.anisotropy=g.anisotropy);void 0!==g.flipY&&(h.flipY=g.flipY);\nd[g.uuid]=h}return d},parseObject:function(){var a=new O;return function(b,c,d){function e(a){void 0===c[a]&&console.warn(\"THREE.ObjectLoader: Undefined geometry\",a);return c[a]}function f(a){if(void 0!==a){if(Array.isArray(a)){for(var b=[],c=0,e=a.length;c<e;c++){var f=a[c];void 0===d[f]&&console.warn(\"THREE.ObjectLoader: Undefined material\",f);b.push(d[f])}return b}void 0===d[a]&&console.warn(\"THREE.ObjectLoader: Undefined material\",a);return d[a]}}switch(b.type){case \"Scene\":var g=new nd;void 0!==\nb.background&&Number.isInteger(b.background)&&(g.background=new C(b.background));void 0!==b.fog&&(\"Fog\"===b.fog.type?g.fog=new Ib(b.fog.color,b.fog.near,b.fog.far):\"FogExp2\"===b.fog.type&&(g.fog=new Hb(b.fog.color,b.fog.density)));break;case \"PerspectiveCamera\":g=new ja(b.fov,b.aspect,b.near,b.far);void 0!==b.focus&&(g.focus=b.focus);void 0!==b.zoom&&(g.zoom=b.zoom);void 0!==b.filmGauge&&(g.filmGauge=b.filmGauge);void 0!==b.filmOffset&&(g.filmOffset=b.filmOffset);void 0!==b.view&&(g.view=Object.assign({},\nb.view));break;case \"OrthographicCamera\":g=new Db(b.left,b.right,b.top,b.bottom,b.near,b.far);break;case \"AmbientLight\":g=new zd(b.color,b.intensity);break;case \"DirectionalLight\":g=new yd(b.color,b.intensity);break;case \"PointLight\":g=new wd(b.color,b.intensity,b.distance,b.decay);break;case \"RectAreaLight\":g=new Ad(b.color,b.intensity,b.width,b.height);break;case \"SpotLight\":g=new vd(b.color,b.intensity,b.distance,b.angle,b.penumbra,b.decay);break;case \"HemisphereLight\":g=new td(b.color,b.groundColor,\nb.intensity);break;case \"SkinnedMesh\":console.warn(\"THREE.ObjectLoader.parseObject() does not support SkinnedMesh yet.\");case \"Mesh\":g=e(b.geometry);var h=f(b.material);g=g.bones&&0<g.bones.length?new pd(g,h):new fa(g,h);break;case \"LOD\":g=new yc;break;case \"Line\":g=new ra(e(b.geometry),f(b.material),b.mode);break;case \"LineLoop\":g=new qd(e(b.geometry),f(b.material));break;case \"LineSegments\":g=new X(e(b.geometry),f(b.material));break;case \"PointCloud\":case \"Points\":g=new Jb(e(b.geometry),f(b.material));\nbreak;case \"Sprite\":g=new xc(f(b.material));break;case \"Group\":g=new Ac;break;default:g=new w}g.uuid=b.uuid;void 0!==b.name&&(g.name=b.name);void 0!==b.matrix?(a.fromArray(b.matrix),a.decompose(g.position,g.quaternion,g.scale)):(void 0!==b.position&&g.position.fromArray(b.position),void 0!==b.rotation&&g.rotation.fromArray(b.rotation),void 0!==b.quaternion&&g.quaternion.fromArray(b.quaternion),void 0!==b.scale&&g.scale.fromArray(b.scale));void 0!==b.castShadow&&(g.castShadow=b.castShadow);void 0!==\nb.receiveShadow&&(g.receiveShadow=b.receiveShadow);b.shadow&&(void 0!==b.shadow.bias&&(g.shadow.bias=b.shadow.bias),void 0!==b.shadow.radius&&(g.shadow.radius=b.shadow.radius),void 0!==b.shadow.mapSize&&g.shadow.mapSize.fromArray(b.shadow.mapSize),void 0!==b.shadow.camera&&(g.shadow.camera=this.parseObject(b.shadow.camera)));void 0!==b.visible&&(g.visible=b.visible);void 0!==b.userData&&(g.userData=b.userData);if(void 0!==b.children)for(var h=b.children,k=0;k<h.length;k++)g.add(this.parseObject(h[k],\nc,d));if(\"LOD\"===b.type)for(b=b.levels,h=0;h<b.length;h++){var k=b[h],l=g.getObjectByProperty(\"uuid\",k.object);void 0!==l&&g.addLevel(l,k.distance)}return g}}()});var tg={UVMapping:300,CubeReflectionMapping:301,CubeRefractionMapping:302,EquirectangularReflectionMapping:303,EquirectangularRefractionMapping:304,SphericalReflectionMapping:305,CubeUVReflectionMapping:306,CubeUVRefractionMapping:307},jf={RepeatWrapping:1E3,ClampToEdgeWrapping:1001,MirroredRepeatWrapping:1002},kf={NearestFilter:1003,NearestMipMapNearestFilter:1004,\nNearestMipMapLinearFilter:1005,LinearFilter:1006,LinearMipMapNearestFilter:1007,LinearMipMapLinearFilter:1008};Object.assign(pa.prototype,{getPoint:function(){console.warn(\"THREE.Curve: .getPoint() not implemented.\");return null},getPointAt:function(a){a=this.getUtoTmapping(a);return this.getPoint(a)},getPoints:function(a){void 0===a&&(a=5);for(var b=[],c=0;c<=a;c++)b.push(this.getPoint(c/a));return b},getSpacedPoints:function(a){void 0===a&&(a=5);for(var b=[],c=0;c<=a;c++)b.push(this.getPointAt(c/\na));return b},getLength:function(){var a=this.getLengths();return a[a.length-1]},getLengths:function(a){void 0===a&&(a=this.arcLengthDivisions);if(this.cacheArcLengths&&this.cacheArcLengths.length===a+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;var b=[],c=this.getPoint(0),d,e=0;b.push(0);for(d=1;d<=a;d++){var f=this.getPoint(d/a);e+=f.distanceTo(c);b.push(e);c=f}return this.cacheArcLengths=b},updateArcLengths:function(){this.needsUpdate=!0;this.getLengths()},getUtoTmapping:function(a,\nb){var c=this.getLengths(),d=c.length;b=b?b:a*c[d-1];for(var e=0,f=d-1,g;e<=f;)if(a=Math.floor(e+(f-e)/2),g=c[a]-b,0>g)e=a+1;else if(0<g)f=a-1;else{f=a;break}a=f;if(c[a]===b)return a/(d-1);e=c[a];return(a+(b-e)/(c[a+1]-e))/(d-1)},getTangent:function(a){var b=a-1E-4;a+=1E-4;0>b&&(b=0);1<a&&(a=1);b=this.getPoint(b);return this.getPoint(a).clone().sub(b).normalize()},getTangentAt:function(a){a=this.getUtoTmapping(a);return this.getTangent(a)},computeFrenetFrames:function(a,b){var c=new n,d=[],e=[],f=\n[],g=new n,h=new O,k;for(k=0;k<=a;k++){var l=k/a;d[k]=this.getTangentAt(l);d[k].normalize()}e[0]=new n;f[0]=new n;k=Number.MAX_VALUE;l=Math.abs(d[0].x);var m=Math.abs(d[0].y),p=Math.abs(d[0].z);l<=k&&(k=l,c.set(1,0,0));m<=k&&(k=m,c.set(0,1,0));p<=k&&c.set(0,0,1);g.crossVectors(d[0],c).normalize();e[0].crossVectors(d[0],g);f[0].crossVectors(d[0],e[0]);for(k=1;k<=a;k++)e[k]=e[k-1].clone(),f[k]=f[k-1].clone(),g.crossVectors(d[k-1],d[k]),g.length()>Number.EPSILON&&(g.normalize(),c=Math.acos(R.clamp(d[k-\n1].dot(d[k]),-1,1)),e[k].applyMatrix4(h.makeRotationAxis(g,c))),f[k].crossVectors(d[k],e[k]);if(!0===b)for(c=Math.acos(R.clamp(e[0].dot(e[a]),-1,1)),c/=a,0<d[0].dot(g.crossVectors(e[0],e[a]))&&(c=-c),k=1;k<=a;k++)e[k].applyMatrix4(h.makeRotationAxis(d[k],c*k)),f[k].crossVectors(d[k],e[k]);return{tangents:d,normals:e,binormals:f}}});Oa.prototype=Object.create(pa.prototype);Oa.prototype.constructor=Oa;Oa.prototype.isLineCurve=!0;Oa.prototype.getPoint=function(a){if(1===a)return this.v2.clone();var b=\nthis.v2.clone().sub(this.v1);b.multiplyScalar(a).add(this.v1);return b};Oa.prototype.getPointAt=function(a){return this.getPoint(a)};Oa.prototype.getTangent=function(a){return this.v2.clone().sub(this.v1).normalize()};Vc.prototype=Object.assign(Object.create(pa.prototype),{constructor:Vc,add:function(a){this.curves.push(a)},closePath:function(){var a=this.curves[0].getPoint(0),b=this.curves[this.curves.length-1].getPoint(1);a.equals(b)||this.curves.push(new Oa(b,a))},getPoint:function(a){var b=a*\nthis.getLength(),c=this.getCurveLengths();for(a=0;a<c.length;){if(c[a]>=b)return b=c[a]-b,a=this.curves[a],c=a.getLength(),a.getPointAt(0===c?0:1-b/c);a++}return null},getLength:function(){var a=this.getCurveLengths();return a[a.length-1]},updateArcLengths:function(){this.needsUpdate=!0;this.cacheLengths=null;this.getCurveLengths()},getCurveLengths:function(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;for(var a=[],b=0,c=0,d=this.curves.length;c<d;c++)b+=\nthis.curves[c].getLength(),a.push(b);return this.cacheLengths=a},getSpacedPoints:function(a){void 0===a&&(a=40);for(var b=[],c=0;c<=a;c++)b.push(this.getPoint(c/a));this.autoClose&&b.push(b[0]);return b},getPoints:function(a){a=a||12;for(var b=[],c,d=0,e=this.curves;d<e.length;d++)for(var f=e[d],f=f.getPoints(f&&f.isEllipseCurve?2*a:f&&f.isLineCurve?1:f&&f.isSplineCurve?a*f.points.length:a),g=0;g<f.length;g++){var h=f[g];c&&c.equals(h)||(b.push(h),c=h)}this.autoClose&&1<b.length&&!b[b.length-1].equals(b[0])&&\nb.push(b[0]);return b},createPointsGeometry:function(a){a=this.getPoints(a);return this.createGeometry(a)},createSpacedPointsGeometry:function(a){a=this.getSpacedPoints(a);return this.createGeometry(a)},createGeometry:function(a){for(var b=new Q,c=0,d=a.length;c<d;c++){var e=a[c];b.vertices.push(new n(e.x,e.y,e.z||0))}return b}});Ua.prototype=Object.create(pa.prototype);Ua.prototype.constructor=Ua;Ua.prototype.isEllipseCurve=!0;Ua.prototype.getPoint=function(a){for(var b=2*Math.PI,c=this.aEndAngle-\nthis.aStartAngle,d=Math.abs(c)<Number.EPSILON;0>c;)c+=b;for(;c>b;)c-=b;c<Number.EPSILON&&(c=d?0:b);!0!==this.aClockwise||d||(c=c===b?-b:c-b);b=this.aStartAngle+a*c;a=this.aX+this.xRadius*Math.cos(b);var e=this.aY+this.yRadius*Math.sin(b);0!==this.aRotation&&(b=Math.cos(this.aRotation),c=Math.sin(this.aRotation),d=a-this.aX,e-=this.aY,a=d*b-e*c+this.aX,e=d*c+e*b+this.aY);return new D(a,e)};wb.prototype=Object.create(pa.prototype);wb.prototype.constructor=wb;wb.prototype.isSplineCurve=!0;wb.prototype.getPoint=\nfunction(a){var b=this.points,c=(b.length-1)*a;a=Math.floor(c);var c=c-a,d=b[0===a?a:a-1],e=b[a],f=b[a>b.length-2?b.length-1:a+1],b=b[a>b.length-3?b.length-1:a+2];return new D(Te(c,d.x,e.x,f.x,b.x),Te(c,d.y,e.y,f.y,b.y))};ec.prototype=Object.create(pa.prototype);ec.prototype.constructor=ec;ec.prototype.getPoint=function(a){var b=this.v0,c=this.v1,d=this.v2,e=this.v3;return new D(vb(a,b.x,c.x,d.x,e.x),vb(a,b.y,c.y,d.y,e.y))};fc.prototype=Object.create(pa.prototype);fc.prototype.constructor=fc;fc.prototype.getPoint=\nfunction(a){var b=this.v0,c=this.v1,d=this.v2;return new D(ub(a,b.x,c.x,d.x),ub(a,b.y,c.y,d.y))};var ue=Object.assign(Object.create(Vc.prototype),{fromPoints:function(a){this.moveTo(a[0].x,a[0].y);for(var b=1,c=a.length;b<c;b++)this.lineTo(a[b].x,a[b].y)},moveTo:function(a,b){this.currentPoint.set(a,b)},lineTo:function(a,b){var c=new Oa(this.currentPoint.clone(),new D(a,b));this.curves.push(c);this.currentPoint.set(a,b)},quadraticCurveTo:function(a,b,c,d){a=new fc(this.currentPoint.clone(),new D(a,\nb),new D(c,d));this.curves.push(a);this.currentPoint.set(c,d)},bezierCurveTo:function(a,b,c,d,e,f){a=new ec(this.currentPoint.clone(),new D(a,b),new D(c,d),new D(e,f));this.curves.push(a);this.currentPoint.set(e,f)},splineThru:function(a){var b=[this.currentPoint.clone()].concat(a),b=new wb(b);this.curves.push(b);this.currentPoint.copy(a[a.length-1])},arc:function(a,b,c,d,e,f){this.absarc(a+this.currentPoint.x,b+this.currentPoint.y,c,d,e,f)},absarc:function(a,b,c,d,e,f){this.absellipse(a,b,c,c,d,\ne,f)},ellipse:function(a,b,c,d,e,f,g,h){this.absellipse(a+this.currentPoint.x,b+this.currentPoint.y,c,d,e,f,g,h)},absellipse:function(a,b,c,d,e,f,g,h){a=new Ua(a,b,c,d,e,f,g,h);0<this.curves.length&&(b=a.getPoint(0),b.equals(this.currentPoint)||this.lineTo(b.x,b.y));this.curves.push(a);a=a.getPoint(1);this.currentPoint.copy(a)}});Wc.prototype=ue;ue.constructor=Wc;xb.prototype=Object.assign(Object.create(ue),{constructor:xb,getPointsHoles:function(a){for(var b=[],c=0,d=this.holes.length;c<d;c++)b[c]=\nthis.holes[c].getPoints(a);return b},extractAllPoints:function(a){return{shape:this.getPoints(a),holes:this.getPointsHoles(a)}},extractPoints:function(a){return this.extractAllPoints(a)}});Object.assign(ee.prototype,{moveTo:function(a,b){this.currentPath=new Wc;this.subPaths.push(this.currentPath);this.currentPath.moveTo(a,b)},lineTo:function(a,b){this.currentPath.lineTo(a,b)},quadraticCurveTo:function(a,b,c,d){this.currentPath.quadraticCurveTo(a,b,c,d)},bezierCurveTo:function(a,b,c,d,e,f){this.currentPath.bezierCurveTo(a,\nb,c,d,e,f)},splineThru:function(a){this.currentPath.splineThru(a)},toShapes:function(a,b){function c(a){for(var b=[],c=0,d=a.length;c<d;c++){var e=a[c],f=new xb;f.curves=e.curves;b.push(f)}return b}function d(a,b){for(var c=b.length,d=!1,e=c-1,f=0;f<c;e=f++){var g=b[e],h=b[f],k=h.x-g.x,l=h.y-g.y;if(Math.abs(l)>Number.EPSILON){if(0>l&&(g=b[f],k=-k,h=b[e],l=-l),!(a.y<g.y||a.y>h.y))if(a.y===g.y){if(a.x===g.x)return!0}else{e=l*(a.x-g.x)-k*(a.y-g.y);if(0===e)return!0;0>e||(d=!d)}}else if(a.y===g.y&&(h.x<=\na.x&&a.x<=g.x||g.x<=a.x&&a.x<=h.x))return!0}return d}var e=Fa.isClockWise,f=this.subPaths;if(0===f.length)return[];if(!0===b)return c(f);b=[];if(1===f.length){var g=f[0];var h=new xb;h.curves=g.curves;b.push(h);return b}var k=!e(f[0].getPoints()),k=a?!k:k;h=[];var l=[],m=[],p=0;l[p]=void 0;m[p]=[];for(var n=0,r=f.length;n<r;n++){g=f[n];var v=g.getPoints();var u=e(v);(u=a?!u:u)?(!k&&l[p]&&p++,l[p]={s:new xb,p:v},l[p].s.curves=g.curves,k&&p++,m[p]=[]):m[p].push({h:g,p:v[0]})}if(!l[0])return c(f);if(1<\nl.length){n=!1;a=[];e=0;for(f=l.length;e<f;e++)h[e]=[];e=0;for(f=l.length;e<f;e++)for(g=m[e],u=0;u<g.length;u++){k=g[u];p=!0;for(v=0;v<l.length;v++)d(k.p,l[v].p)&&(e!==v&&a.push({froms:e,tos:v,hole:u}),p?(p=!1,h[v].push(k)):n=!0);p&&h[e].push(k)}0<a.length&&(n||(m=h))}n=0;for(e=l.length;n<e;n++)for(h=l[n].s,b.push(h),a=m[n],f=0,g=a.length;f<g;f++)h.holes.push(a[f].h);return b}});Object.assign(fe.prototype,{isFont:!0,generateShapes:function(a,b,c){void 0===b&&(b=100);void 0===c&&(c=4);var d=this.data;\na=String(a).split(\"\");var e=b/d.resolution,f=(d.boundingBox.yMax-d.boundingBox.yMin+d.underlineThickness)*e,g=0,h=0;b=[];for(var k=0;k<a.length;k++){var l=a[k];if(\"\\n\"===l)g=0,h-=f;else{var m;var p=e;var n=g,r=h;if(l=d.glyphs[l]||d.glyphs[\"?\"]){var v=new ee,u=[];if(l.o)for(var x=l._cachedOutline||(l._cachedOutline=l.o.split(\" \")),w=0,z=x.length;w<z;)switch(x[w++]){case \"m\":var C=x[w++]*p+n;var B=x[w++]*p+r;v.moveTo(C,B);break;case \"l\":C=x[w++]*p+n;B=x[w++]*p+r;v.lineTo(C,B);break;case \"q\":var D=x[w++]*\np+n;var F=x[w++]*p+r;var K=x[w++]*p+n;var L=x[w++]*p+r;v.quadraticCurveTo(K,L,D,F);if(m=u[u.length-1]){var O=m.x;m=m.y;for(var N=1;N<=c;N++){var P=N/c;ub(P,O,K,D);ub(P,m,L,F)}}break;case \"b\":if(D=x[w++]*p+n,F=x[w++]*p+r,K=x[w++]*p+n,L=x[w++]*p+r,C=x[w++]*p+n,B=x[w++]*p+r,v.bezierCurveTo(K,L,C,B,D,F),m=u[u.length-1])for(O=m.x,m=m.y,N=1;N<=c;N++)P=N/c,vb(P,O,K,C,D),vb(P,m,L,B,F)}p={offsetX:l.ha*p,path:v}}else p=void 0;g+=p.offsetX;b.push(p.path)}}c=[];d=0;for(a=b.length;d<a;d++)Array.prototype.push.apply(c,\nb[d].toShapes());return c}});Object.assign(Ue.prototype,{load:function(a,b,c,d){var e=this;(new Ia(this.manager)).load(a,function(a){try{var c=JSON.parse(a)}catch(h){console.warn(\"THREE.FontLoader: typeface.js support is being deprecated. Use typeface.json instead.\"),c=JSON.parse(a.substring(65,a.length-2))}a=e.parse(c);b&&b(a)},c,d)},parse:function(a){return new fe(a)}});var Nd,ie={getContext:function(){void 0===Nd&&(Nd=new (window.AudioContext||window.webkitAudioContext));return Nd},setContext:function(a){Nd=\na}};Object.assign(ge.prototype,{load:function(a,b,c,d){var e=new Ia(this.manager);e.setResponseType(\"arraybuffer\");e.load(a,function(a){ie.getContext().decodeAudioData(a,function(a){b(a)})},c,d)}});Object.assign(Ve.prototype,{update:function(){var a,b,c,d,e,f,g,h,k=new O,l=new O;return function(m){if(a!==this||b!==m.focus||c!==m.fov||d!==m.aspect*this.aspect||e!==m.near||f!==m.far||g!==m.zoom||h!==this.eyeSep){a=this;b=m.focus;c=m.fov;d=m.aspect*this.aspect;e=m.near;f=m.far;g=m.zoom;var p=m.projectionMatrix.clone();\nh=this.eyeSep/2;var q=h*e/b,n=e*Math.tan(R.DEG2RAD*c*.5)/g;l.elements[12]=-h;k.elements[12]=h;var v=-n*d+q;var u=n*d+q;p.elements[0]=2*e/(u-v);p.elements[8]=(u+v)/(u-v);this.cameraL.projectionMatrix.copy(p);v=-n*d-q;u=n*d-q;p.elements[0]=2*e/(u-v);p.elements[8]=(u+v)/(u-v);this.cameraR.projectionMatrix.copy(p)}this.cameraL.matrixWorld.copy(m.matrixWorld).multiply(l);this.cameraR.matrixWorld.copy(m.matrixWorld).multiply(k)}}()});Xc.prototype=Object.create(w.prototype);Xc.prototype.constructor=Xc;he.prototype=\nObject.assign(Object.create(w.prototype),{constructor:he,getInput:function(){return this.gain},removeFilter:function(){null!==this.filter&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null)},getFilter:function(){return this.filter},setFilter:function(a){null!==this.filter?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination);this.filter=\na;this.gain.connect(this.filter);this.filter.connect(this.context.destination)},getMasterVolume:function(){return this.gain.gain.value},setMasterVolume:function(a){this.gain.gain.value=a},updateMatrixWorld:function(){var a=new n,b=new ia,c=new n,d=new n;return function(e){w.prototype.updateMatrixWorld.call(this,e);e=this.context.listener;var f=this.up;this.matrixWorld.decompose(a,b,c);d.set(0,0,-1).applyQuaternion(b);e.positionX?(e.positionX.setValueAtTime(a.x,this.context.currentTime),e.positionY.setValueAtTime(a.y,\nthis.context.currentTime),e.positionZ.setValueAtTime(a.z,this.context.currentTime),e.forwardX.setValueAtTime(d.x,this.context.currentTime),e.forwardY.setValueAtTime(d.y,this.context.currentTime),e.forwardZ.setValueAtTime(d.z,this.context.currentTime),e.upX.setValueAtTime(f.x,this.context.currentTime),e.upY.setValueAtTime(f.y,this.context.currentTime),e.upZ.setValueAtTime(f.z,this.context.currentTime)):(e.setPosition(a.x,a.y,a.z),e.setOrientation(d.x,d.y,d.z,f.x,f.y,f.z))}}()});gc.prototype=Object.assign(Object.create(w.prototype),\n{constructor:gc,getOutput:function(){return this.gain},setNodeSource:function(a){this.hasPlaybackControl=!1;this.sourceType=\"audioNode\";this.source=a;this.connect();return this},setBuffer:function(a){this.buffer=a;this.sourceType=\"buffer\";this.autoplay&&this.play();return this},play:function(){if(!0===this.isPlaying)console.warn(\"THREE.Audio: Audio is already playing.\");else if(!1===this.hasPlaybackControl)console.warn(\"THREE.Audio: this Audio has no playback control.\");else{var a=this.context.createBufferSource();\na.buffer=this.buffer;a.loop=this.loop;a.onended=this.onEnded.bind(this);a.playbackRate.setValueAtTime(this.playbackRate,this.startTime);a.start(0,this.startTime);this.isPlaying=!0;this.source=a;return this.connect()}},pause:function(){if(!1===this.hasPlaybackControl)console.warn(\"THREE.Audio: this Audio has no playback control.\");else return this.source.stop(),this.startTime=this.context.currentTime,this.isPlaying=!1,this},stop:function(){if(!1===this.hasPlaybackControl)console.warn(\"THREE.Audio: this Audio has no playback control.\");\nelse return this.source.stop(),this.startTime=0,this.isPlaying=!1,this},connect:function(){if(0<this.filters.length){this.source.connect(this.filters[0]);for(var a=1,b=this.filters.length;a<b;a++)this.filters[a-1].connect(this.filters[a]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this},disconnect:function(){if(0<this.filters.length){this.source.disconnect(this.filters[0]);for(var a=1,b=this.filters.length;a<b;a++)this.filters[a-\n1].disconnect(this.filters[a]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this},getFilters:function(){return this.filters},setFilters:function(a){a||(a=[]);!0===this.isPlaying?(this.disconnect(),this.filters=a,this.connect()):this.filters=a;return this},getFilter:function(){return this.getFilters()[0]},setFilter:function(a){return this.setFilters(a?[a]:[])},setPlaybackRate:function(a){if(!1===this.hasPlaybackControl)console.warn(\"THREE.Audio: this Audio has no playback control.\");\nelse return this.playbackRate=a,!0===this.isPlaying&&this.source.playbackRate.setValueAtTime(this.playbackRate,this.context.currentTime),this},getPlaybackRate:function(){return this.playbackRate},onEnded:function(){this.isPlaying=!1},getLoop:function(){return!1===this.hasPlaybackControl?(console.warn(\"THREE.Audio: this Audio has no playback control.\"),!1):this.loop},setLoop:function(a){if(!1===this.hasPlaybackControl)console.warn(\"THREE.Audio: this Audio has no playback control.\");else return this.loop=\na,!0===this.isPlaying&&(this.source.loop=this.loop),this},getVolume:function(){return this.gain.gain.value},setVolume:function(a){this.gain.gain.value=a;return this}});je.prototype=Object.assign(Object.create(gc.prototype),{constructor:je,getOutput:function(){return this.panner},getRefDistance:function(){return this.panner.refDistance},setRefDistance:function(a){this.panner.refDistance=a},getRolloffFactor:function(){return this.panner.rolloffFactor},setRolloffFactor:function(a){this.panner.rolloffFactor=\na},getDistanceModel:function(){return this.panner.distanceModel},setDistanceModel:function(a){this.panner.distanceModel=a},getMaxDistance:function(){return this.panner.maxDistance},setMaxDistance:function(a){this.panner.maxDistance=a},updateMatrixWorld:function(){var a=new n;return function(b){w.prototype.updateMatrixWorld.call(this,b);a.setFromMatrixPosition(this.matrixWorld);this.panner.setPosition(a.x,a.y,a.z)}}()});Object.assign(ke.prototype,{getFrequencyData:function(){this.analyser.getByteFrequencyData(this.data);\nreturn this.data},getAverageFrequency:function(){for(var a=0,b=this.getFrequencyData(),c=0;c<b.length;c++)a+=b[c];return a/b.length}});Object.assign(le.prototype,{accumulate:function(a,b){var c=this.buffer,d=this.valueSize;a=a*d+d;var e=this.cumulativeWeight;if(0===e){for(e=0;e!==d;++e)c[a+e]=c[e];e=b}else e+=b,this._mixBufferRegion(c,a,0,b/e,d);this.cumulativeWeight=e},apply:function(a){var b=this.valueSize,c=this.buffer;a=a*b+b;var d=this.cumulativeWeight,e=this.binding;this.cumulativeWeight=0;\n1>d&&this._mixBufferRegion(c,a,3*b,1-d,b);for(var d=b,f=b+b;d!==f;++d)if(c[d]!==c[d+b]){e.setValue(c,a);break}},saveOriginalState:function(){var a=this.buffer,b=this.valueSize,c=3*b;this.binding.getValue(a,c);for(var d=b;d!==c;++d)a[d]=a[c+d%b];this.cumulativeWeight=0},restoreOriginalState:function(){this.binding.setValue(this.buffer,3*this.valueSize)},_select:function(a,b,c,d,e){if(.5<=d)for(d=0;d!==e;++d)a[b+d]=a[c+d]},_slerp:function(a,b,c,d){ia.slerpFlat(a,b,a,b,a,c,d)},_lerp:function(a,b,c,d,\ne){for(var f=1-d,g=0;g!==e;++g){var h=b+g;a[h]=a[h]*f+a[c+g]*d}}});Object.assign(We.prototype,{getValue:function(a,b){this.bind();var c=this._bindings[this._targetGroup.nCachedObjects_];void 0!==c&&c.getValue(a,b)},setValue:function(a,b){for(var c=this._bindings,d=this._targetGroup.nCachedObjects_,e=c.length;d!==e;++d)c[d].setValue(a,b)},bind:function(){for(var a=this._bindings,b=this._targetGroup.nCachedObjects_,c=a.length;b!==c;++b)a[b].bind()},unbind:function(){for(var a=this._bindings,b=this._targetGroup.nCachedObjects_,\nc=a.length;b!==c;++b)a[b].unbind()}});Object.assign(da,{Composite:We,create:function(a,b,c){return a&&a.isAnimationObjectGroup?new da.Composite(a,b,c):new da(a,b,c)},sanitizeNodeName:function(a){return a.replace(/\\s/g,\"_\").replace(/[^\\w-]/g,\"\")},parseTrackName:function(){var a=new RegExp(\"^\"+/((?:[\\w-]+[\\/:])*)/.source+/([\\w-\\.]+)?/.source+/(?:\\.([\\w-]+)(?:\\[(.+)\\])?)?/.source+/\\.([\\w-]+)(?:\\[(.+)\\])?/.source+\"$\"),b=[\"material\",\"materials\",\"bones\"];return function(c){var d=a.exec(c);if(!d)throw Error(\"PropertyBinding: Cannot parse trackName: \"+\nc);var d={nodeName:d[2],objectName:d[3],objectIndex:d[4],propertyName:d[5],propertyIndex:d[6]},e=d.nodeName&&d.nodeName.lastIndexOf(\".\");if(void 0!==e&&-1!==e){var f=d.nodeName.substring(e+1);-1!==b.indexOf(f)&&(d.nodeName=d.nodeName.substring(0,e),d.objectName=f)}if(null===d.propertyName||0===d.propertyName.length)throw Error(\"PropertyBinding: can not parse propertyName from trackName: \"+c);return d}}(),findNode:function(a,b){if(!b||\"\"===b||\"root\"===b||\".\"===b||-1===b||b===a.name||b===a.uuid)return a;\nif(a.skeleton){var c=function(a){for(var c=0;c<a.bones.length;c++){var d=a.bones[c];if(d.name===b)return d}return null}(a.skeleton);if(c)return c}if(a.children){var d=function(a){for(var c=0;c<a.length;c++){var e=a[c];if(e.name===b||e.uuid===b||(e=d(e.children)))return e}return null};if(a=d(a.children))return a}return null}});Object.assign(da.prototype,{_getValue_unavailable:function(){},_setValue_unavailable:function(){},BindingType:{Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3},Versioning:{None:0,\nNeedsUpdate:1,MatrixWorldNeedsUpdate:2},GetterByBindingType:[function(a,b){a[b]=this.node[this.propertyName]},function(a,b){for(var c=this.resolvedProperty,d=0,e=c.length;d!==e;++d)a[b++]=c[d]},function(a,b){a[b]=this.resolvedProperty[this.propertyIndex]},function(a,b){this.resolvedProperty.toArray(a,b)}],SetterByBindingTypeAndVersioning:[[function(a,b){this.node[this.propertyName]=a[b]},function(a,b){this.node[this.propertyName]=a[b];this.targetObject.needsUpdate=!0},function(a,b){this.node[this.propertyName]=\na[b];this.targetObject.matrixWorldNeedsUpdate=!0}],[function(a,b){for(var c=this.resolvedProperty,d=0,e=c.length;d!==e;++d)c[d]=a[b++]},function(a,b){for(var c=this.resolvedProperty,d=0,e=c.length;d!==e;++d)c[d]=a[b++];this.targetObject.needsUpdate=!0},function(a,b){for(var c=this.resolvedProperty,d=0,e=c.length;d!==e;++d)c[d]=a[b++];this.targetObject.matrixWorldNeedsUpdate=!0}],[function(a,b){this.resolvedProperty[this.propertyIndex]=a[b]},function(a,b){this.resolvedProperty[this.propertyIndex]=\na[b];this.targetObject.needsUpdate=!0},function(a,b){this.resolvedProperty[this.propertyIndex]=a[b];this.targetObject.matrixWorldNeedsUpdate=!0}],[function(a,b){this.resolvedProperty.fromArray(a,b)},function(a,b){this.resolvedProperty.fromArray(a,b);this.targetObject.needsUpdate=!0},function(a,b){this.resolvedProperty.fromArray(a,b);this.targetObject.matrixWorldNeedsUpdate=!0}]],getValue:function(a,b){this.bind();this.getValue(a,b)},setValue:function(a,b){this.bind();this.setValue(a,b)},bind:function(){var a=\nthis.node,b=this.parsedPath,c=b.objectName,d=b.propertyName,e=b.propertyIndex;a||(this.node=a=da.findNode(this.rootNode,b.nodeName)||this.rootNode);this.getValue=this._getValue_unavailable;this.setValue=this._setValue_unavailable;if(a){if(c){var f=b.objectIndex;switch(c){case \"materials\":if(!a.material){console.error(\"THREE.PropertyBinding: Can not bind to material as node does not have a material.\",this);return}if(!a.material.materials){console.error(\"THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.\",\nthis);return}a=a.material.materials;break;case \"bones\":if(!a.skeleton){console.error(\"THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.\",this);return}a=a.skeleton.bones;for(c=0;c<a.length;c++)if(a[c].name===f){f=c;break}break;default:if(void 0===a[c]){console.error(\"THREE.PropertyBinding: Can not bind to objectName of node undefined.\",this);return}a=a[c]}if(void 0!==f){if(void 0===a[f]){console.error(\"THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.\",\nthis,a);return}a=a[f]}}f=a[d];if(void 0===f)console.error(\"THREE.PropertyBinding: Trying to update property for track: \"+b.nodeName+\".\"+d+\" but it wasn't found.\",a);else{b=this.Versioning.None;void 0!==a.needsUpdate?(b=this.Versioning.NeedsUpdate,this.targetObject=a):void 0!==a.matrixWorldNeedsUpdate&&(b=this.Versioning.MatrixWorldNeedsUpdate,this.targetObject=a);c=this.BindingType.Direct;if(void 0!==e){if(\"morphTargetInfluences\"===d){if(!a.geometry){console.error(\"THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.\",\nthis);return}if(a.geometry.isBufferGeometry){if(!a.geometry.morphAttributes){console.error(\"THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.\",this);return}for(c=0;c<this.node.geometry.morphAttributes.position.length;c++)if(a.geometry.morphAttributes.position[c].name===e){e=c;break}}else{if(!a.geometry.morphTargets){console.error(\"THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphTargets.\",\nthis);return}for(c=0;c<this.node.geometry.morphTargets.length;c++)if(a.geometry.morphTargets[c].name===e){e=c;break}}}c=this.BindingType.ArrayElement;this.resolvedProperty=f;this.propertyIndex=e}else void 0!==f.fromArray&&void 0!==f.toArray?(c=this.BindingType.HasFromToArray,this.resolvedProperty=f):Array.isArray(f)?(c=this.BindingType.EntireArray,this.resolvedProperty=f):this.propertyName=d;this.getValue=this.GetterByBindingType[c];this.setValue=this.SetterByBindingTypeAndVersioning[c][b]}}else console.error(\"THREE.PropertyBinding: Trying to update node for track: \"+\nthis.path+\" but it wasn't found.\")},unbind:function(){this.node=null;this.getValue=this._getValue_unbound;this.setValue=this._setValue_unbound}});Object.assign(da.prototype,{_getValue_unbound:da.prototype.getValue,_setValue_unbound:da.prototype.setValue});Object.assign(Xe.prototype,{isAnimationObjectGroup:!0,add:function(a){for(var b=this._objects,c=b.length,d=this.nCachedObjects_,e=this._indicesByUUID,f=this._paths,g=this._parsedPaths,h=this._bindings,k=h.length,l=0,m=arguments.length;l!==m;++l){var p=\narguments[l],n=p.uuid,r=e[n];if(void 0===r){r=c++;e[n]=r;b.push(p);for(var n=0,v=k;n!==v;++n)h[n].push(new da(p,f[n],g[n]))}else if(r<d){var u=--d,v=b[u];e[v.uuid]=r;b[r]=v;e[n]=u;b[u]=p;n=0;for(v=k;n!==v;++n){var w=h[n],y=w[r];w[r]=w[u];void 0===y&&(y=new da(p,f[n],g[n]));w[u]=y}}else void 0!==b[r]&&console.error(\"THREE.AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes.\")}this.nCachedObjects_=d},remove:function(a){for(var b=\nthis._objects,c=this.nCachedObjects_,d=this._indicesByUUID,e=this._bindings,f=e.length,g=0,h=arguments.length;g!==h;++g){var k=arguments[g],l=k.uuid,m=d[l];if(void 0!==m&&m>=c){var p=c++,n=b[p];d[n.uuid]=m;b[m]=n;d[l]=p;b[p]=k;k=0;for(l=f;k!==l;++k){var n=e[k],r=n[m];n[m]=n[p];n[p]=r}}}this.nCachedObjects_=c},uncache:function(a){for(var b,c,d=this._objects,e=d.length,f=this.nCachedObjects_,g=this._indicesByUUID,h=this._bindings,k=h.length,l=0,m=arguments.length;l!==m;++l){c=arguments[l].uuid;var p=\ng[c];if(void 0!==p)if(delete g[c],p<f){var n=--f,r=d[n];c=--e;b=d[c];g[r.uuid]=p;d[p]=r;g[b.uuid]=n;d[n]=b;d.pop();for(var r=0,v=k;r!==v;++r){b=h[r];var u=b[c];b[p]=b[n];b[n]=u;b.pop()}}else for(c=--e,b=d[c],g[b.uuid]=p,d[p]=b,d.pop(),r=0,v=k;r!==v;++r)b=h[r],b[p]=b[c],b.pop()}this.nCachedObjects_=f},subscribe_:function(a,b){var c=this._bindingsIndicesByPath,d=c[a],e=this._bindings;if(void 0!==d)return e[d];var f=this._paths,g=this._parsedPaths,h=this._objects,k=this.nCachedObjects_,l=Array(h.length),\nd=e.length;c[a]=d;f.push(a);g.push(b);e.push(l);c=k;for(d=h.length;c!==d;++c)l[c]=new da(h[c],a,b);return l},unsubscribe_:function(a){var b=this._bindingsIndicesByPath,c=b[a];if(void 0!==c){var d=this._paths,e=this._parsedPaths,f=this._bindings,g=f.length-1,h=f[g];b[a[g]]=c;f[c]=h;f.pop();e[c]=e[g];e.pop();d[c]=d[g];d.pop()}}});Object.assign(Ye.prototype,{play:function(){this._mixer._activateAction(this);return this},stop:function(){this._mixer._deactivateAction(this);return this.reset()},reset:function(){this.paused=\n!1;this.enabled=!0;this.time=0;this._loopCount=-1;this._startTime=null;return this.stopFading().stopWarping()},isRunning:function(){return this.enabled&&!this.paused&&0!==this.timeScale&&null===this._startTime&&this._mixer._isActiveAction(this)},isScheduled:function(){return this._mixer._isActiveAction(this)},startAt:function(a){this._startTime=a;return this},setLoop:function(a,b){this.loop=a;this.repetitions=b;return this},setEffectiveWeight:function(a){this.weight=a;this._effectiveWeight=this.enabled?\na:0;return this.stopFading()},getEffectiveWeight:function(){return this._effectiveWeight},fadeIn:function(a){return this._scheduleFading(a,0,1)},fadeOut:function(a){return this._scheduleFading(a,1,0)},crossFadeFrom:function(a,b,c){a.fadeOut(b);this.fadeIn(b);if(c){c=this._clip.duration;var d=a._clip.duration,e=c/d;a.warp(1,d/c,b);this.warp(e,1,b)}return this},crossFadeTo:function(a,b,c){return a.crossFadeFrom(this,b,c)},stopFading:function(){var a=this._weightInterpolant;null!==a&&(this._weightInterpolant=\nnull,this._mixer._takeBackControlInterpolant(a));return this},setEffectiveTimeScale:function(a){this.timeScale=a;this._effectiveTimeScale=this.paused?0:a;return this.stopWarping()},getEffectiveTimeScale:function(){return this._effectiveTimeScale},setDuration:function(a){this.timeScale=this._clip.duration/a;return this.stopWarping()},syncWith:function(a){this.time=a.time;this.timeScale=a.timeScale;return this.stopWarping()},halt:function(a){return this.warp(this._effectiveTimeScale,0,a)},warp:function(a,\nb,c){var d=this._mixer,e=d.time,f=this._timeScaleInterpolant,g=this.timeScale;null===f&&(this._timeScaleInterpolant=f=d._lendControlInterpolant());d=f.parameterPositions;f=f.sampleValues;d[0]=e;d[1]=e+c;f[0]=a/g;f[1]=b/g;return this},stopWarping:function(){var a=this._timeScaleInterpolant;null!==a&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(a));return this},getMixer:function(){return this._mixer},getClip:function(){return this._clip},getRoot:function(){return this._localRoot||\nthis._mixer._root},_update:function(a,b,c,d){if(this.enabled){var e=this._startTime;if(null!==e){b=(a-e)*c;if(0>b||0===c)return;this._startTime=null;b*=c}b*=this._updateTimeScale(a);c=this._updateTime(b);a=this._updateWeight(a);if(0<a){b=this._interpolants;for(var e=this._propertyBindings,f=0,g=b.length;f!==g;++f)b[f].evaluate(c),e[f].accumulate(d,a)}}else this._updateWeight(a)},_updateWeight:function(a){var b=0;if(this.enabled){var b=this.weight,c=this._weightInterpolant;if(null!==c){var d=c.evaluate(a)[0],\nb=b*d;a>c.parameterPositions[1]&&(this.stopFading(),0===d&&(this.enabled=!1))}}return this._effectiveWeight=b},_updateTimeScale:function(a){var b=0;if(!this.paused){var b=this.timeScale,c=this._timeScaleInterpolant;if(null!==c){var d=c.evaluate(a)[0],b=b*d;a>c.parameterPositions[1]&&(this.stopWarping(),0===b?this.paused=!0:this.timeScale=b)}}return this._effectiveTimeScale=b},_updateTime:function(a){var b=this.time+a;if(0===a)return b;var c=this._clip.duration,d=this.loop,e=this._loopCount;if(2200===\nd)a:{if(-1===e&&(this._loopCount=0,this._setEndings(!0,!0,!1)),b>=c)b=c;else if(0>b)b=0;else break a;this.clampWhenFinished?this.paused=!0:this.enabled=!1;this._mixer.dispatchEvent({type:\"finished\",action:this,direction:0>a?-1:1})}else{d=2202===d;-1===e&&(0<=a?(e=0,this._setEndings(!0,0===this.repetitions,d)):this._setEndings(0===this.repetitions,!0,d));if(b>=c||0>b){var f=Math.floor(b/c),b=b-c*f,e=e+Math.abs(f),g=this.repetitions-e;0>g?(this.clampWhenFinished?this.paused=!0:this.enabled=!1,b=0<a?\nc:0,this._mixer.dispatchEvent({type:\"finished\",action:this,direction:0<a?1:-1})):(0===g?(a=0>a,this._setEndings(a,!a,d)):this._setEndings(!1,!1,d),this._loopCount=e,this._mixer.dispatchEvent({type:\"loop\",action:this,loopDelta:f}))}if(d&&1===(e&1))return this.time=b,c-b}return this.time=b},_setEndings:function(a,b,c){var d=this._interpolantSettings;c?(d.endingStart=2401,d.endingEnd=2401):(d.endingStart=a?this.zeroSlopeAtStart?2401:2400:2402,d.endingEnd=b?this.zeroSlopeAtEnd?2401:2400:2402)},_scheduleFading:function(a,\nb,c){var d=this._mixer,e=d.time,f=this._weightInterpolant;null===f&&(this._weightInterpolant=f=d._lendControlInterpolant());d=f.parameterPositions;f=f.sampleValues;d[0]=e;f[0]=b;d[1]=e+a;f[1]=c;return this}});Object.assign(Ze.prototype,na.prototype,{_bindAction:function(a,b){var c=a._localRoot||this._root,d=a._clip.tracks,e=d.length,f=a._propertyBindings;a=a._interpolants;var g=c.uuid,h=this._bindingsByRootAndName,k=h[g];void 0===k&&(k={},h[g]=k);for(h=0;h!==e;++h){var l=d[h],m=l.name,n=k[m];if(void 0===\nn){n=f[h];if(void 0!==n){null===n._cacheIndex&&(++n.referenceCount,this._addInactiveBinding(n,g,m));continue}n=new le(da.create(c,m,b&&b._propertyBindings[h].binding.parsedPath),l.ValueTypeName,l.getValueSize());++n.referenceCount;this._addInactiveBinding(n,g,m)}f[h]=n;a[h].resultBuffer=n.buffer}},_activateAction:function(a){if(!this._isActiveAction(a)){if(null===a._cacheIndex){var b=(a._localRoot||this._root).uuid,c=a._clip.uuid,d=this._actionsByClip[c];this._bindAction(a,d&&d.knownActions[0]);this._addInactiveAction(a,\nc,b)}b=a._propertyBindings;c=0;for(d=b.length;c!==d;++c){var e=b[c];0===e.useCount++&&(this._lendBinding(e),e.saveOriginalState())}this._lendAction(a)}},_deactivateAction:function(a){if(this._isActiveAction(a)){for(var b=a._propertyBindings,c=0,d=b.length;c!==d;++c){var e=b[c];0===--e.useCount&&(e.restoreOriginalState(),this._takeBackBinding(e))}this._takeBackAction(a)}},_initMemoryManager:function(){this._actions=[];this._nActiveActions=0;this._actionsByClip={};this._bindings=[];this._nActiveBindings=\n0;this._bindingsByRootAndName={};this._controlInterpolants=[];this._nActiveControlInterpolants=0;var a=this;this.stats={actions:{get total(){return a._actions.length},get inUse(){return a._nActiveActions}},bindings:{get total(){return a._bindings.length},get inUse(){return a._nActiveBindings}},controlInterpolants:{get total(){return a._controlInterpolants.length},get inUse(){return a._nActiveControlInterpolants}}}},_isActiveAction:function(a){a=a._cacheIndex;return null!==a&&a<this._nActiveActions},\n_addInactiveAction:function(a,b,c){var d=this._actions,e=this._actionsByClip,f=e[b];void 0===f?(f={knownActions:[a],actionByRoot:{}},a._byClipCacheIndex=0,e[b]=f):(b=f.knownActions,a._byClipCacheIndex=b.length,b.push(a));a._cacheIndex=d.length;d.push(a);f.actionByRoot[c]=a},_removeInactiveAction:function(a){var b=this._actions,c=b[b.length-1],d=a._cacheIndex;c._cacheIndex=d;b[d]=c;b.pop();a._cacheIndex=null;var b=a._clip.uuid,c=this._actionsByClip,d=c[b],e=d.knownActions,f=e[e.length-1],g=a._byClipCacheIndex;\nf._byClipCacheIndex=g;e[g]=f;e.pop();a._byClipCacheIndex=null;delete d.actionByRoot[(a._localRoot||this._root).uuid];0===e.length&&delete c[b];this._removeInactiveBindingsForAction(a)},_removeInactiveBindingsForAction:function(a){a=a._propertyBindings;for(var b=0,c=a.length;b!==c;++b){var d=a[b];0===--d.referenceCount&&this._removeInactiveBinding(d)}},_lendAction:function(a){var b=this._actions,c=a._cacheIndex,d=this._nActiveActions++,e=b[d];a._cacheIndex=d;b[d]=a;e._cacheIndex=c;b[c]=e},_takeBackAction:function(a){var b=\nthis._actions,c=a._cacheIndex,d=--this._nActiveActions,e=b[d];a._cacheIndex=d;b[d]=a;e._cacheIndex=c;b[c]=e},_addInactiveBinding:function(a,b,c){var d=this._bindingsByRootAndName,e=d[b],f=this._bindings;void 0===e&&(e={},d[b]=e);e[c]=a;a._cacheIndex=f.length;f.push(a)},_removeInactiveBinding:function(a){var b=this._bindings,c=a.binding,d=c.rootNode.uuid,c=c.path,e=this._bindingsByRootAndName,f=e[d],g=b[b.length-1];a=a._cacheIndex;g._cacheIndex=a;b[a]=g;b.pop();delete f[c];a:{for(var h in f)break a;\ndelete e[d]}},_lendBinding:function(a){var b=this._bindings,c=a._cacheIndex,d=this._nActiveBindings++,e=b[d];a._cacheIndex=d;b[d]=a;e._cacheIndex=c;b[c]=e},_takeBackBinding:function(a){var b=this._bindings,c=a._cacheIndex,d=--this._nActiveBindings,e=b[d];a._cacheIndex=d;b[d]=a;e._cacheIndex=c;b[c]=e},_lendControlInterpolant:function(){var a=this._controlInterpolants,b=this._nActiveControlInterpolants++,c=a[b];void 0===c&&(c=new Tc(new Float32Array(2),new Float32Array(2),1,this._controlInterpolantsResultBuffer),\nc.__cacheIndex=b,a[b]=c);return c},_takeBackControlInterpolant:function(a){var b=this._controlInterpolants,c=a.__cacheIndex,d=--this._nActiveControlInterpolants,e=b[d];a.__cacheIndex=d;b[d]=a;e.__cacheIndex=c;b[c]=e},_controlInterpolantsResultBuffer:new Float32Array(1),clipAction:function(a,b){var c=b||this._root,d=c.uuid,c=\"string\"===typeof a?Ba.findByName(c,a):a;a=null!==c?c.uuid:a;var e=this._actionsByClip[a],f=null;if(void 0!==e){f=e.actionByRoot[d];if(void 0!==f)return f;f=e.knownActions[0];\nnull===c&&(c=f._clip)}if(null===c)return null;b=new Ye(this,c,b);this._bindAction(b,f);this._addInactiveAction(b,a,d);return b},existingAction:function(a,b){var c=b||this._root;b=c.uuid;c=\"string\"===typeof a?Ba.findByName(c,a):a;a=this._actionsByClip[c?c.uuid:a];return void 0!==a?a.actionByRoot[b]||null:null},stopAllAction:function(){for(var a=this._actions,b=this._nActiveActions,c=this._bindings,d=this._nActiveBindings,e=this._nActiveBindings=this._nActiveActions=0;e!==b;++e)a[e].reset();for(e=0;e!==\nd;++e)c[e].useCount=0;return this},update:function(a){a*=this.timeScale;for(var b=this._actions,c=this._nActiveActions,d=this.time+=a,e=Math.sign(a),f=this._accuIndex^=1,g=0;g!==c;++g)b[g]._update(d,a,e,f);a=this._bindings;b=this._nActiveBindings;for(g=0;g!==b;++g)a[g].apply(f);return this},getRoot:function(){return this._root},uncacheClip:function(a){var b=this._actions;a=a.uuid;var c=this._actionsByClip,d=c[a];if(void 0!==d){for(var d=d.knownActions,e=0,f=d.length;e!==f;++e){var g=d[e];this._deactivateAction(g);\nvar h=g._cacheIndex,k=b[b.length-1];g._cacheIndex=null;g._byClipCacheIndex=null;k._cacheIndex=h;b[h]=k;b.pop();this._removeInactiveBindingsForAction(g)}delete c[a]}},uncacheRoot:function(a){a=a.uuid;var b=this._actionsByClip;for(d in b){var c=b[d].actionByRoot[a];void 0!==c&&(this._deactivateAction(c),this._removeInactiveAction(c))}var d=this._bindingsByRootAndName[a];if(void 0!==d)for(var e in d)a=d[e],a.restoreOriginalState(),this._removeInactiveBinding(a)},uncacheAction:function(a,b){a=this.existingAction(a,\nb);null!==a&&(this._deactivateAction(a),this._removeInactiveAction(a))}});Id.prototype.clone=function(){return new Id(void 0===this.value.clone?this.value:this.value.clone())};me.prototype=Object.assign(Object.create(F.prototype),{constructor:me,isInstancedBufferGeometry:!0,addGroup:function(a,b,c){this.groups.push({start:a,count:b,materialIndex:c})},copy:function(a){var b=a.index;null!==b&&this.setIndex(b.clone());var b=a.attributes;for(c in b)this.addAttribute(c,b[c].clone());a=a.groups;var c=0;\nfor(b=a.length;c<b;c++){var d=a[c];this.addGroup(d.start,d.count,d.materialIndex)}return this}});Object.defineProperties(ne.prototype,{count:{get:function(){return this.data.count}},array:{get:function(){return this.data.array}}});Object.assign(ne.prototype,{isInterleavedBufferAttribute:!0,setX:function(a,b){this.data.array[a*this.data.stride+this.offset]=b;return this},setY:function(a,b){this.data.array[a*this.data.stride+this.offset+1]=b;return this},setZ:function(a,b){this.data.array[a*this.data.stride+\nthis.offset+2]=b;return this},setW:function(a,b){this.data.array[a*this.data.stride+this.offset+3]=b;return this},getX:function(a){return this.data.array[a*this.data.stride+this.offset]},getY:function(a){return this.data.array[a*this.data.stride+this.offset+1]},getZ:function(a){return this.data.array[a*this.data.stride+this.offset+2]},getW:function(a){return this.data.array[a*this.data.stride+this.offset+3]},setXY:function(a,b,c){a=a*this.data.stride+this.offset;this.data.array[a+0]=b;this.data.array[a+\n1]=c;return this},setXYZ:function(a,b,c,d){a=a*this.data.stride+this.offset;this.data.array[a+0]=b;this.data.array[a+1]=c;this.data.array[a+2]=d;return this},setXYZW:function(a,b,c,d,e){a=a*this.data.stride+this.offset;this.data.array[a+0]=b;this.data.array[a+1]=c;this.data.array[a+2]=d;this.data.array[a+3]=e;return this}});Object.defineProperty(hc.prototype,\"needsUpdate\",{set:function(a){!0===a&&this.version++}});Object.assign(hc.prototype,{isInterleavedBuffer:!0,setArray:function(a){if(Array.isArray(a))throw new TypeError(\"THREE.BufferAttribute: array should be a Typed Array.\");\nthis.count=void 0!==a?a.length/this.stride:0;this.array=a},setDynamic:function(a){this.dynamic=a;return this},copy:function(a){this.array=new a.array.constructor(a.array);this.count=a.count;this.stride=a.stride;this.dynamic=a.dynamic;return this},copyAt:function(a,b,c){a*=this.stride;c*=b.stride;for(var d=0,e=this.stride;d<e;d++)this.array[a+d]=b.array[c+d];return this},set:function(a,b){void 0===b&&(b=0);this.array.set(a,b);return this},clone:function(){return(new this.constructor).copy(this)},onUpload:function(a){this.onUploadCallback=\na;return this}});oe.prototype=Object.assign(Object.create(hc.prototype),{constructor:oe,isInstancedInterleavedBuffer:!0,copy:function(a){hc.prototype.copy.call(this,a);this.meshPerAttribute=a.meshPerAttribute;return this}});pe.prototype=Object.assign(Object.create(K.prototype),{constructor:pe,isInstancedBufferAttribute:!0,copy:function(a){K.prototype.copy.call(this,a);this.meshPerAttribute=a.meshPerAttribute;return this}});Object.assign($e.prototype,{linePrecision:1,set:function(a,b){this.ray.set(a,\nb)},setFromCamera:function(a,b){b&&b.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(b.matrixWorld),this.ray.direction.set(a.x,a.y,.5).unproject(b).sub(this.ray.origin).normalize()):b&&b.isOrthographicCamera?(this.ray.origin.set(a.x,a.y,(b.near+b.far)/(b.near-b.far)).unproject(b),this.ray.direction.set(0,0,-1).transformDirection(b.matrixWorld)):console.error(\"THREE.Raycaster: Unsupported camera type.\")},intersectObject:function(a,b){var c=[];qe(a,this,c,b);c.sort(af);return c},intersectObjects:function(a,\nb){var c=[];if(!1===Array.isArray(a))return console.warn(\"THREE.Raycaster.intersectObjects: objects is not an Array.\"),c;for(var d=0,e=a.length;d<e;d++)qe(a[d],this,c,b);c.sort(af);return c}});Object.assign(bf.prototype,{start:function(){this.oldTime=this.startTime=(\"undefined\"===typeof performance?Date:performance).now();this.elapsedTime=0;this.running=!0},stop:function(){this.getElapsedTime();this.autoStart=this.running=!1},getElapsedTime:function(){this.getDelta();return this.elapsedTime},getDelta:function(){var a=\n0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){var b=(\"undefined\"===typeof performance?Date:performance).now(),a=(b-this.oldTime)/1E3;this.oldTime=b;this.elapsedTime+=a}return a}});Object.assign(cf.prototype,{set:function(a,b,c){this.radius=a;this.phi=b;this.theta=c;return this},clone:function(){return(new this.constructor).copy(this)},copy:function(a){this.radius=a.radius;this.phi=a.phi;this.theta=a.theta;return this},makeSafe:function(){this.phi=Math.max(1E-6,Math.min(Math.PI-\n1E-6,this.phi));return this},setFromVector3:function(a){this.radius=a.length();0===this.radius?this.phi=this.theta=0:(this.theta=Math.atan2(a.x,a.z),this.phi=Math.acos(R.clamp(a.y/this.radius,-1,1)));return this}});Object.assign(df.prototype,{set:function(a,b,c){this.radius=a;this.theta=b;this.y=c;return this},clone:function(){return(new this.constructor).copy(this)},copy:function(a){this.radius=a.radius;this.theta=a.theta;this.y=a.y;return this},setFromVector3:function(a){this.radius=Math.sqrt(a.x*\na.x+a.z*a.z);this.theta=Math.atan2(a.x,a.z);this.y=a.y;return this}});Yc.prototype=Object.create(w.prototype);Yc.prototype.constructor=Yc;Yc.prototype.isImmediateRenderObject=!0;Zc.prototype=Object.create(X.prototype);Zc.prototype.constructor=Zc;Zc.prototype.update=function(){var a=new n,b=new n,c=new qa;return function(){var d,e=[\"a\",\"b\",\"c\"];this.object.updateMatrixWorld(!0);c.getNormalMatrix(this.object.matrixWorld);var f=this.object.matrixWorld,g=this.geometry.attributes.position;if((d=this.object.geometry)&&\nd.isGeometry)for(var h=d.vertices,k=d.faces,l=d=0,m=k.length;l<m;l++)for(var n=k[l],t=0,r=n.vertexNormals.length;t<r;t++){var v=n.vertexNormals[t];a.copy(h[n[e[t]]]).applyMatrix4(f);b.copy(v).applyMatrix3(c).normalize().multiplyScalar(this.size).add(a);g.setXYZ(d,a.x,a.y,a.z);d+=1;g.setXYZ(d,b.x,b.y,b.z);d+=1}else if(d&&d.isBufferGeometry)for(e=d.attributes.position,h=d.attributes.normal,t=d=0,r=e.count;t<r;t++)a.set(e.getX(t),e.getY(t),e.getZ(t)).applyMatrix4(f),b.set(h.getX(t),h.getY(t),h.getZ(t)),\nb.applyMatrix3(c).normalize().multiplyScalar(this.size).add(a),g.setXYZ(d,a.x,a.y,a.z),d+=1,g.setXYZ(d,b.x,b.y,b.z),d+=1;g.needsUpdate=!0}}();ic.prototype=Object.create(w.prototype);ic.prototype.constructor=ic;ic.prototype.dispose=function(){this.cone.geometry.dispose();this.cone.material.dispose()};ic.prototype.update=function(){var a=new n,b=new n;return function(){this.light.updateMatrixWorld();var c=this.light.distance?this.light.distance:1E3,d=c*Math.tan(this.light.angle);this.cone.scale.set(d,\nd,c);a.setFromMatrixPosition(this.light.matrixWorld);b.setFromMatrixPosition(this.light.target.matrixWorld);this.cone.lookAt(b.sub(a));void 0!==this.color?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)}}();jc.prototype=Object.create(X.prototype);jc.prototype.constructor=jc;jc.prototype.onBeforeRender=function(){var a=new n,b=new O,c=new O;return function(){var d=this.bones,e=this.geometry,f=e.getAttribute(\"position\");c.getInverse(this.root.matrixWorld);for(var g=\n0,h=0;g<d.length;g++){var k=d[g];k.parent&&k.parent.isBone&&(b.multiplyMatrices(c,k.matrixWorld),a.setFromMatrixPosition(b),f.setXYZ(h,a.x,a.y,a.z),b.multiplyMatrices(c,k.parent.matrixWorld),a.setFromMatrixPosition(b),f.setXYZ(h+1,a.x,a.y,a.z),h+=2)}e.getAttribute(\"position\").needsUpdate=!0}}();kc.prototype=Object.create(fa.prototype);kc.prototype.constructor=kc;kc.prototype.dispose=function(){this.geometry.dispose();this.material.dispose()};kc.prototype.update=function(){void 0!==this.color?this.material.color.set(this.color):\nthis.material.color.copy(this.light.color)};lc.prototype=Object.create(w.prototype);lc.prototype.constructor=lc;lc.prototype.dispose=function(){this.children[0].geometry.dispose();this.children[0].material.dispose()};lc.prototype.update=function(){var a=.5*this.light.width,b=.5*this.light.height,c=this.line.geometry.attributes.position,d=c.array;d[0]=a;d[1]=-b;d[2]=0;d[3]=a;d[4]=b;d[5]=0;d[6]=-a;d[7]=b;d[8]=0;d[9]=-a;d[10]=-b;d[11]=0;d[12]=a;d[13]=-b;d[14]=0;c.needsUpdate=!0;void 0!==this.color?this.line.material.color.set(this.color):\nthis.line.material.color.copy(this.light.color)};mc.prototype=Object.create(w.prototype);mc.prototype.constructor=mc;mc.prototype.dispose=function(){this.children[0].geometry.dispose();this.children[0].material.dispose()};mc.prototype.update=function(){var a=new n,b=new C,c=new C;return function(){var d=this.children[0];if(void 0!==this.color)this.material.color.set(this.color);else{var e=d.geometry.getAttribute(\"color\");b.copy(this.light.color);c.copy(this.light.groundColor);for(var f=0,g=e.count;f<\ng;f++){var h=f<g/2?b:c;e.setXYZ(f,h.r,h.g,h.b)}e.needsUpdate=!0}d.lookAt(a.setFromMatrixPosition(this.light.matrixWorld).negate())}}();$c.prototype=Object.create(X.prototype);$c.prototype.constructor=$c;Jd.prototype=Object.create(X.prototype);Jd.prototype.constructor=Jd;ad.prototype=Object.create(X.prototype);ad.prototype.constructor=ad;ad.prototype.update=function(){var a=new n,b=new n,c=new qa;return function(){this.object.updateMatrixWorld(!0);c.getNormalMatrix(this.object.matrixWorld);for(var d=\nthis.object.matrixWorld,e=this.geometry.attributes.position,f=this.object.geometry,g=f.vertices,f=f.faces,h=0,k=0,l=f.length;k<l;k++){var m=f[k],n=m.normal;a.copy(g[m.a]).add(g[m.b]).add(g[m.c]).divideScalar(3).applyMatrix4(d);b.copy(n).applyMatrix3(c).normalize().multiplyScalar(this.size).add(a);e.setXYZ(h,a.x,a.y,a.z);h+=1;e.setXYZ(h,b.x,b.y,b.z);h+=1}e.needsUpdate=!0}}();nc.prototype=Object.create(w.prototype);nc.prototype.constructor=nc;nc.prototype.dispose=function(){this.lightPlane.geometry.dispose();\nthis.lightPlane.material.dispose();this.targetLine.geometry.dispose();this.targetLine.material.dispose()};nc.prototype.update=function(){var a=new n,b=new n,c=new n;return function(){a.setFromMatrixPosition(this.light.matrixWorld);b.setFromMatrixPosition(this.light.target.matrixWorld);c.subVectors(b,a);this.lightPlane.lookAt(c);void 0!==this.color?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),\nthis.targetLine.material.color.copy(this.light.color));this.targetLine.lookAt(c);this.targetLine.scale.z=c.length()}}();bd.prototype=Object.create(X.prototype);bd.prototype.constructor=bd;bd.prototype.update=function(){function a(a,g,h,k){d.set(g,h,k).unproject(e);a=c[a];if(void 0!==a)for(g=b.getAttribute(\"position\"),h=0,k=a.length;h<k;h++)g.setXYZ(a[h],d.x,d.y,d.z)}var b,c,d=new n,e=new Ma;return function(){b=this.geometry;c=this.pointMap;e.projectionMatrix.copy(this.camera.projectionMatrix);a(\"c\",\n0,0,-1);a(\"t\",0,0,1);a(\"n1\",-1,-1,-1);a(\"n2\",1,-1,-1);a(\"n3\",-1,1,-1);a(\"n4\",1,1,-1);a(\"f1\",-1,-1,1);a(\"f2\",1,-1,1);a(\"f3\",-1,1,1);a(\"f4\",1,1,1);a(\"u1\",.7,1.1,-1);a(\"u2\",-.7,1.1,-1);a(\"u3\",0,2,-1);a(\"cf1\",-1,0,1);a(\"cf2\",1,0,1);a(\"cf3\",0,-1,1);a(\"cf4\",0,1,1);a(\"cn1\",-1,0,-1);a(\"cn2\",1,0,-1);a(\"cn3\",0,-1,-1);a(\"cn4\",0,1,-1);b.getAttribute(\"position\").needsUpdate=!0}}();yb.prototype=Object.create(X.prototype);yb.prototype.constructor=yb;yb.prototype.update=function(){var a=new Pa;return function(b){void 0!==\nb&&console.warn(\"THREE.BoxHelper: .update() has no longer arguments.\");void 0!==this.object&&a.setFromObject(this.object);if(!a.isEmpty()){b=a.min;var c=a.max,d=this.geometry.attributes.position,e=d.array;e[0]=c.x;e[1]=c.y;e[2]=c.z;e[3]=b.x;e[4]=c.y;e[5]=c.z;e[6]=b.x;e[7]=b.y;e[8]=c.z;e[9]=c.x;e[10]=b.y;e[11]=c.z;e[12]=c.x;e[13]=c.y;e[14]=b.z;e[15]=b.x;e[16]=c.y;e[17]=b.z;e[18]=b.x;e[19]=b.y;e[20]=b.z;e[21]=c.x;e[22]=b.y;e[23]=b.z;d.needsUpdate=!0;this.geometry.computeBoundingSphere()}}}();yb.prototype.setFromObject=\nfunction(a){this.object=a;this.update();return this};cd.prototype=Object.create(X.prototype);cd.prototype.constructor=cd;cd.prototype.onBeforeRender=function(){var a=this.box;a.isEmpty()||(a.getCenter(this.position),a.getSize(this.scale),this.scale.multiplyScalar(.5))};dd.prototype=Object.create(ra.prototype);dd.prototype.constructor=dd;dd.prototype.onBeforeRender=function(){var a=-this.plane.constant;1E-8>Math.abs(a)&&(a=1E-8);this.scale.set(.5*this.size,.5*this.size,a);this.lookAt(this.plane.normal);\nthis.updateMatrixWorld()};var Kd,re;zb.prototype=Object.create(w.prototype);zb.prototype.constructor=zb;zb.prototype.setDirection=function(){var a=new n,b;return function(c){.99999<c.y?this.quaternion.set(0,0,0,1):-.99999>c.y?this.quaternion.set(1,0,0,0):(a.set(c.z,0,-c.x).normalize(),b=Math.acos(c.y),this.quaternion.setFromAxisAngle(a,b))}}();zb.prototype.setLength=function(a,b,c){void 0===b&&(b=.2*a);void 0===c&&(c=.2*b);this.line.scale.set(1,Math.max(0,a-b),1);this.line.updateMatrix();this.cone.scale.set(c,\nb,c);this.cone.position.y=a;this.cone.updateMatrix()};zb.prototype.setColor=function(a){this.line.material.color.copy(a);this.cone.material.color.copy(a)};Ld.prototype=Object.create(X.prototype);Ld.prototype.constructor=Ld;var Od=new n,ve=new se,we=new se,xe=new se;Ja.prototype=Object.create(pa.prototype);Ja.prototype.constructor=Ja;Ja.prototype.getPoint=function(a){var b=this.points,c=b.length;a*=c-(this.closed?0:1);var d=Math.floor(a);a-=d;this.closed?d+=0<d?0:(Math.floor(Math.abs(d)/b.length)+\n1)*b.length:0===a&&d===c-1&&(d=c-2,a=1);if(this.closed||0<d)var e=b[(d-1)%c];else Od.subVectors(b[0],b[1]).add(b[0]),e=Od;var f=b[d%c];var g=b[(d+1)%c];this.closed||d+2<c?b=b[(d+2)%c]:(Od.subVectors(b[c-1],b[c-2]).add(b[c-1]),b=Od);if(void 0===this.type||\"centripetal\"===this.type||\"chordal\"===this.type){var h=\"chordal\"===this.type?.5:.25,c=Math.pow(e.distanceToSquared(f),h),d=Math.pow(f.distanceToSquared(g),h),h=Math.pow(g.distanceToSquared(b),h);1E-4>d&&(d=1);1E-4>c&&(c=d);1E-4>h&&(h=d);ve.initNonuniformCatmullRom(e.x,\nf.x,g.x,b.x,c,d,h);we.initNonuniformCatmullRom(e.y,f.y,g.y,b.y,c,d,h);xe.initNonuniformCatmullRom(e.z,f.z,g.z,b.z,c,d,h)}else\"catmullrom\"===this.type&&(c=void 0!==this.tension?this.tension:.5,ve.initCatmullRom(e.x,f.x,g.x,b.x,c),we.initCatmullRom(e.y,f.y,g.y,b.y,c),xe.initCatmullRom(e.z,f.z,g.z,b.z,c));return new n(ve.calc(a),we.calc(a),xe.calc(a))};ed.prototype=Object.create(pa.prototype);ed.prototype.constructor=ed;ed.prototype.getPoint=function(a){var b=this.v0,c=this.v1,d=this.v2,e=this.v3;return new n(vb(a,\nb.x,c.x,d.x,e.x),vb(a,b.y,c.y,d.y,e.y),vb(a,b.z,c.z,d.z,e.z))};fd.prototype=Object.create(pa.prototype);fd.prototype.constructor=fd;fd.prototype.getPoint=function(a){var b=this.v0,c=this.v1,d=this.v2;return new n(ub(a,b.x,c.x,d.x),ub(a,b.y,c.y,d.y),ub(a,b.z,c.z,d.z))};gd.prototype=Object.create(pa.prototype);gd.prototype.constructor=gd;gd.prototype.getPoint=function(a){if(1===a)return this.v2.clone();var b=new n;b.subVectors(this.v2,this.v1);b.multiplyScalar(a);b.add(this.v1);return b};Md.prototype=\nObject.create(Ua.prototype);Md.prototype.constructor=Md;pa.create=function(a,b){console.log(\"THREE.Curve.create() has been deprecated\");a.prototype=Object.create(pa.prototype);a.prototype.constructor=a;a.prototype.getPoint=b;return a};ff.prototype=Object.create(Ja.prototype);gf.prototype=Object.create(Ja.prototype);te.prototype=Object.create(Ja.prototype);Object.assign(te.prototype,{initFromArray:function(a){console.error(\"THREE.Spline: .initFromArray() has been removed.\")},getControlPointsArray:function(a){console.error(\"THREE.Spline: .getControlPointsArray() has been removed.\")},\nreparametrizeByArcLength:function(a){console.error(\"THREE.Spline: .reparametrizeByArcLength() has been removed.\")}});$c.prototype.setColors=function(){console.error(\"THREE.GridHelper: setColors() has been deprecated, pass them in the constructor instead.\")};jc.prototype.update=function(){console.error(\"THREE.SkeletonHelper: update() no longer needs to be called.\")};Object.assign(id.prototype,{center:function(a){console.warn(\"THREE.Box2: .center() has been renamed to .getCenter().\");return this.getCenter(a)},\nempty:function(){console.warn(\"THREE.Box2: .empty() has been renamed to .isEmpty().\");return this.isEmpty()},isIntersectionBox:function(a){console.warn(\"THREE.Box2: .isIntersectionBox() has been renamed to .intersectsBox().\");return this.intersectsBox(a)},size:function(a){console.warn(\"THREE.Box2: .size() has been renamed to .getSize().\");return this.getSize(a)}});Object.assign(Pa.prototype,{center:function(a){console.warn(\"THREE.Box3: .center() has been renamed to .getCenter().\");return this.getCenter(a)},\nempty:function(){console.warn(\"THREE.Box3: .empty() has been renamed to .isEmpty().\");return this.isEmpty()},isIntersectionBox:function(a){console.warn(\"THREE.Box3: .isIntersectionBox() has been renamed to .intersectsBox().\");return this.intersectsBox(a)},isIntersectionSphere:function(a){console.warn(\"THREE.Box3: .isIntersectionSphere() has been renamed to .intersectsSphere().\");return this.intersectsSphere(a)},size:function(a){console.warn(\"THREE.Box3: .size() has been renamed to .getSize().\");return this.getSize(a)}});\nFb.prototype.center=function(a){console.warn(\"THREE.Line3: .center() has been renamed to .getCenter().\");return this.getCenter(a)};R.random16=function(){console.warn(\"THREE.Math.random16() has been deprecated. Use Math.random() instead.\");return Math.random()};Object.assign(qa.prototype,{flattenToArrayOffset:function(a,b){console.warn(\"THREE.Matrix3: .flattenToArrayOffset() has been deprecated. Use .toArray() instead.\");return this.toArray(a,b)},multiplyVector3:function(a){console.warn(\"THREE.Matrix3: .multiplyVector3() has been removed. Use vector.applyMatrix3( matrix ) instead.\");\nreturn a.applyMatrix3(this)},multiplyVector3Array:function(a){console.error(\"THREE.Matrix3: .multiplyVector3Array() has been removed.\")},applyToBuffer:function(a,b,c){console.warn(\"THREE.Matrix3: .applyToBuffer() has been removed. Use matrix.applyToBufferAttribute( attribute ) instead.\");return this.applyToBufferAttribute(a)},applyToVector3Array:function(a,b,c){console.error(\"THREE.Matrix3: .applyToVector3Array() has been removed.\")}});Object.assign(O.prototype,{extractPosition:function(a){console.warn(\"THREE.Matrix4: .extractPosition() has been renamed to .copyPosition().\");\nreturn this.copyPosition(a)},flattenToArrayOffset:function(a,b){console.warn(\"THREE.Matrix4: .flattenToArrayOffset() has been deprecated. Use .toArray() instead.\");return this.toArray(a,b)},getPosition:function(){var a;return function(){void 0===a&&(a=new n);console.warn(\"THREE.Matrix4: .getPosition() has been removed. Use Vector3.setFromMatrixPosition( matrix ) instead.\");return a.setFromMatrixColumn(this,3)}}(),setRotationFromQuaternion:function(a){console.warn(\"THREE.Matrix4: .setRotationFromQuaternion() has been renamed to .makeRotationFromQuaternion().\");\nreturn this.makeRotationFromQuaternion(a)},multiplyToArray:function(){console.warn(\"THREE.Matrix4: .multiplyToArray() has been removed.\")},multiplyVector3:function(a){console.warn(\"THREE.Matrix4: .multiplyVector3() has been removed. Use vector.applyMatrix4( matrix ) instead.\");return a.applyMatrix4(this)},multiplyVector4:function(a){console.warn(\"THREE.Matrix4: .multiplyVector4() has been removed. Use vector.applyMatrix4( matrix ) instead.\");return a.applyMatrix4(this)},multiplyVector3Array:function(a){console.error(\"THREE.Matrix4: .multiplyVector3Array() has been removed.\")},\nrotateAxis:function(a){console.warn(\"THREE.Matrix4: .rotateAxis() has been removed. Use Vector3.transformDirection( matrix ) instead.\");a.transformDirection(this)},crossVector:function(a){console.warn(\"THREE.Matrix4: .crossVector() has been removed. Use vector.applyMatrix4( matrix ) instead.\");return a.applyMatrix4(this)},translate:function(){console.error(\"THREE.Matrix4: .translate() has been removed.\")},rotateX:function(){console.error(\"THREE.Matrix4: .rotateX() has been removed.\")},rotateY:function(){console.error(\"THREE.Matrix4: .rotateY() has been removed.\")},\nrotateZ:function(){console.error(\"THREE.Matrix4: .rotateZ() has been removed.\")},rotateByAxis:function(){console.error(\"THREE.Matrix4: .rotateByAxis() has been removed.\")},applyToBuffer:function(a,b,c){console.warn(\"THREE.Matrix4: .applyToBuffer() has been removed. Use matrix.applyToBufferAttribute( attribute ) instead.\");return this.applyToBufferAttribute(a)},applyToVector3Array:function(a,b,c){console.error(\"THREE.Matrix4: .applyToVector3Array() has been removed.\")},makeFrustum:function(a,b,c,d,\ne,f){console.warn(\"THREE.Matrix4: .makeFrustum() has been removed. Use .makePerspective( left, right, top, bottom, near, far ) instead.\");return this.makePerspective(a,b,d,c,e,f)}});za.prototype.isIntersectionLine=function(a){console.warn(\"THREE.Plane: .isIntersectionLine() has been renamed to .intersectsLine().\");return this.intersectsLine(a)};ia.prototype.multiplyVector3=function(a){console.warn(\"THREE.Quaternion: .multiplyVector3() has been removed. Use is now vector.applyQuaternion( quaternion ) instead.\");\nreturn a.applyQuaternion(this)};Object.assign(hb.prototype,{isIntersectionBox:function(a){console.warn(\"THREE.Ray: .isIntersectionBox() has been renamed to .intersectsBox().\");return this.intersectsBox(a)},isIntersectionPlane:function(a){console.warn(\"THREE.Ray: .isIntersectionPlane() has been renamed to .intersectsPlane().\");return this.intersectsPlane(a)},isIntersectionSphere:function(a){console.warn(\"THREE.Ray: .isIntersectionSphere() has been renamed to .intersectsSphere().\");return this.intersectsSphere(a)}});\nObject.assign(xb.prototype,{extrude:function(a){console.warn(\"THREE.Shape: .extrude() has been removed. Use ExtrudeGeometry() instead.\");return new $a(this,a)},makeGeometry:function(a){console.warn(\"THREE.Shape: .makeGeometry() has been removed. Use ShapeGeometry() instead.\");return new Wb(this,a)}});Object.assign(D.prototype,{fromAttribute:function(a,b,c){console.error(\"THREE.Vector2: .fromAttribute() has been renamed to .fromBufferAttribute().\");return this.fromBufferAttribute(a,b,c)}});Object.assign(n.prototype,\n{setEulerFromRotationMatrix:function(){console.error(\"THREE.Vector3: .setEulerFromRotationMatrix() has been removed. Use Euler.setFromRotationMatrix() instead.\")},setEulerFromQuaternion:function(){console.error(\"THREE.Vector3: .setEulerFromQuaternion() has been removed. Use Euler.setFromQuaternion() instead.\")},getPositionFromMatrix:function(a){console.warn(\"THREE.Vector3: .getPositionFromMatrix() has been renamed to .setFromMatrixPosition().\");return this.setFromMatrixPosition(a)},getScaleFromMatrix:function(a){console.warn(\"THREE.Vector3: .getScaleFromMatrix() has been renamed to .setFromMatrixScale().\");\nreturn this.setFromMatrixScale(a)},getColumnFromMatrix:function(a,b){console.warn(\"THREE.Vector3: .getColumnFromMatrix() has been renamed to .setFromMatrixColumn().\");return this.setFromMatrixColumn(b,a)},applyProjection:function(a){console.warn(\"THREE.Vector3: .applyProjection() has been removed. Use .applyMatrix4( m ) instead.\");return this.applyMatrix4(a)},fromAttribute:function(a,b,c){console.error(\"THREE.Vector3: .fromAttribute() has been renamed to .fromBufferAttribute().\");return this.fromBufferAttribute(a,\nb,c)}});Object.assign(S.prototype,{fromAttribute:function(a,b,c){console.error(\"THREE.Vector4: .fromAttribute() has been renamed to .fromBufferAttribute().\");return this.fromBufferAttribute(a,b,c)}});Q.prototype.computeTangents=function(){console.warn(\"THREE.Geometry: .computeTangents() has been removed.\")};Object.assign(w.prototype,{getChildByName:function(a){console.warn(\"THREE.Object3D: .getChildByName() has been renamed to .getObjectByName().\");return this.getObjectByName(a)},renderDepth:function(){console.warn(\"THREE.Object3D: .renderDepth has been removed. Use .renderOrder, instead.\")},\ntranslate:function(a,b){console.warn(\"THREE.Object3D: .translate() has been removed. Use .translateOnAxis( axis, distance ) instead.\");return this.translateOnAxis(b,a)}});Object.defineProperties(w.prototype,{eulerOrder:{get:function(){console.warn(\"THREE.Object3D: .eulerOrder is now .rotation.order.\");return this.rotation.order},set:function(a){console.warn(\"THREE.Object3D: .eulerOrder is now .rotation.order.\");this.rotation.order=a}},useQuaternion:{get:function(){console.warn(\"THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.\")},\nset:function(){console.warn(\"THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.\")}}});Object.defineProperties(yc.prototype,{objects:{get:function(){console.warn(\"THREE.LOD: .objects has been renamed to .levels.\");return this.levels}}});Object.defineProperty(zc.prototype,\"useVertexTexture\",{get:function(){console.warn(\"THREE.Skeleton: useVertexTexture has been removed.\")},set:function(){console.warn(\"THREE.Skeleton: useVertexTexture has been removed.\")}});\nObject.defineProperty(pa.prototype,\"__arcLengthDivisions\",{get:function(){console.warn(\"THREE.Curve: .__arcLengthDivisions is now .arcLengthDivisions.\");return this.arcLengthDivisions},set:function(a){console.warn(\"THREE.Curve: .__arcLengthDivisions is now .arcLengthDivisions.\");this.arcLengthDivisions=a}});ja.prototype.setLens=function(a,b){console.warn(\"THREE.PerspectiveCamera.setLens is deprecated. Use .setFocalLength and .filmGauge for a photographic setup.\");void 0!==b&&(this.filmGauge=b);this.setFocalLength(a)};\nObject.defineProperties(aa.prototype,{onlyShadow:{set:function(){console.warn(\"THREE.Light: .onlyShadow has been removed.\")}},shadowCameraFov:{set:function(a){console.warn(\"THREE.Light: .shadowCameraFov is now .shadow.camera.fov.\");this.shadow.camera.fov=a}},shadowCameraLeft:{set:function(a){console.warn(\"THREE.Light: .shadowCameraLeft is now .shadow.camera.left.\");this.shadow.camera.left=a}},shadowCameraRight:{set:function(a){console.warn(\"THREE.Light: .shadowCameraRight is now .shadow.camera.right.\");\nthis.shadow.camera.right=a}},shadowCameraTop:{set:function(a){console.warn(\"THREE.Light: .shadowCameraTop is now .shadow.camera.top.\");this.shadow.camera.top=a}},shadowCameraBottom:{set:function(a){console.warn(\"THREE.Light: .shadowCameraBottom is now .shadow.camera.bottom.\");this.shadow.camera.bottom=a}},shadowCameraNear:{set:function(a){console.warn(\"THREE.Light: .shadowCameraNear is now .shadow.camera.near.\");this.shadow.camera.near=a}},shadowCameraFar:{set:function(a){console.warn(\"THREE.Light: .shadowCameraFar is now .shadow.camera.far.\");\nthis.shadow.camera.far=a}},shadowCameraVisible:{set:function(){console.warn(\"THREE.Light: .shadowCameraVisible has been removed. Use new THREE.CameraHelper( light.shadow.camera ) instead.\")}},shadowBias:{set:function(a){console.warn(\"THREE.Light: .shadowBias is now .shadow.bias.\");this.shadow.bias=a}},shadowDarkness:{set:function(){console.warn(\"THREE.Light: .shadowDarkness has been removed.\")}},shadowMapWidth:{set:function(a){console.warn(\"THREE.Light: .shadowMapWidth is now .shadow.mapSize.width.\");\nthis.shadow.mapSize.width=a}},shadowMapHeight:{set:function(a){console.warn(\"THREE.Light: .shadowMapHeight is now .shadow.mapSize.height.\");this.shadow.mapSize.height=a}}});Object.defineProperties(K.prototype,{length:{get:function(){console.warn(\"THREE.BufferAttribute: .length has been deprecated. Use .count instead.\");return this.array.length}}});Object.assign(F.prototype,{addIndex:function(a){console.warn(\"THREE.BufferGeometry: .addIndex() has been renamed to .setIndex().\");this.setIndex(a)},addDrawCall:function(a,\nb,c){void 0!==c&&console.warn(\"THREE.BufferGeometry: .addDrawCall() no longer supports indexOffset.\");console.warn(\"THREE.BufferGeometry: .addDrawCall() is now .addGroup().\");this.addGroup(a,b)},clearDrawCalls:function(){console.warn(\"THREE.BufferGeometry: .clearDrawCalls() is now .clearGroups().\");this.clearGroups()},computeTangents:function(){console.warn(\"THREE.BufferGeometry: .computeTangents() has been removed.\")},computeOffsets:function(){console.warn(\"THREE.BufferGeometry: .computeOffsets() has been removed.\")}});\nObject.defineProperties(F.prototype,{drawcalls:{get:function(){console.error(\"THREE.BufferGeometry: .drawcalls has been renamed to .groups.\");return this.groups}},offsets:{get:function(){console.warn(\"THREE.BufferGeometry: .offsets has been renamed to .groups.\");return this.groups}}});Object.defineProperties(Id.prototype,{dynamic:{set:function(){console.warn(\"THREE.Uniform: .dynamic has been removed. Use object.onBeforeRender() instead.\")}},onUpdate:{value:function(){console.warn(\"THREE.Uniform: .onUpdate() has been removed. Use object.onBeforeRender() instead.\");\nreturn this}}});Object.defineProperties(P.prototype,{wrapAround:{get:function(){console.warn(\"THREE.Material: .wrapAround has been removed.\")},set:function(){console.warn(\"THREE.Material: .wrapAround has been removed.\")}},wrapRGB:{get:function(){console.warn(\"THREE.Material: .wrapRGB has been removed.\");return new C}},shading:{get:function(){console.error(\"THREE.\"+this.type+\": .shading has been removed. Use the boolean .flatShading instead.\")},set:function(a){console.warn(\"THREE.\"+this.type+\": .shading has been removed. Use the boolean .flatShading instead.\");\nthis.flatShading=1===a}}});Object.defineProperties(Aa.prototype,{metal:{get:function(){console.warn(\"THREE.MeshPhongMaterial: .metal has been removed. Use THREE.MeshStandardMaterial instead.\");return!1},set:function(){console.warn(\"THREE.MeshPhongMaterial: .metal has been removed. Use THREE.MeshStandardMaterial instead\")}}});Object.defineProperties(ya.prototype,{derivatives:{get:function(){console.warn(\"THREE.ShaderMaterial: .derivatives has been moved to .extensions.derivatives.\");return this.extensions.derivatives},\nset:function(a){console.warn(\"THREE. ShaderMaterial: .derivatives has been moved to .extensions.derivatives.\");this.extensions.derivatives=a}}});Object.assign(Yd.prototype,{getCurrentRenderTarget:function(){console.warn(\"THREE.WebGLRenderer: .getCurrentRenderTarget() is now .getRenderTarget().\");return this.getRenderTarget()},getMaxAnisotropy:function(){console.warn(\"THREE.WebGLRenderer: .getMaxAnisotropy() is now .capabilities.getMaxAnisotropy().\");return this.capabilities.getMaxAnisotropy()},getPrecision:function(){console.warn(\"THREE.WebGLRenderer: .getPrecision() is now .capabilities.precision.\");\nreturn this.capabilities.precision},supportsFloatTextures:function(){console.warn(\"THREE.WebGLRenderer: .supportsFloatTextures() is now .extensions.get( 'OES_texture_float' ).\");return this.extensions.get(\"OES_texture_float\")},supportsHalfFloatTextures:function(){console.warn(\"THREE.WebGLRenderer: .supportsHalfFloatTextures() is now .extensions.get( 'OES_texture_half_float' ).\");return this.extensions.get(\"OES_texture_half_float\")},supportsStandardDerivatives:function(){console.warn(\"THREE.WebGLRenderer: .supportsStandardDerivatives() is now .extensions.get( 'OES_standard_derivatives' ).\");\nreturn this.extensions.get(\"OES_standard_derivatives\")},supportsCompressedTextureS3TC:function(){console.warn(\"THREE.WebGLRenderer: .supportsCompressedTextureS3TC() is now .extensions.get( 'WEBGL_compressed_texture_s3tc' ).\");return this.extensions.get(\"WEBGL_compressed_texture_s3tc\")},supportsCompressedTexturePVRTC:function(){console.warn(\"THREE.WebGLRenderer: .supportsCompressedTexturePVRTC() is now .extensions.get( 'WEBGL_compressed_texture_pvrtc' ).\");return this.extensions.get(\"WEBGL_compressed_texture_pvrtc\")},\nsupportsBlendMinMax:function(){console.warn(\"THREE.WebGLRenderer: .supportsBlendMinMax() is now .extensions.get( 'EXT_blend_minmax' ).\");return this.extensions.get(\"EXT_blend_minmax\")},supportsVertexTextures:function(){console.warn(\"THREE.WebGLRenderer: .supportsVertexTextures() is now .capabilities.vertexTextures.\");return this.capabilities.vertexTextures},supportsInstancedArrays:function(){console.warn(\"THREE.WebGLRenderer: .supportsInstancedArrays() is now .extensions.get( 'ANGLE_instanced_arrays' ).\");\nreturn this.extensions.get(\"ANGLE_instanced_arrays\")},enableScissorTest:function(a){console.warn(\"THREE.WebGLRenderer: .enableScissorTest() is now .setScissorTest().\");this.setScissorTest(a)},initMaterial:function(){console.warn(\"THREE.WebGLRenderer: .initMaterial() has been removed.\")},addPrePlugin:function(){console.warn(\"THREE.WebGLRenderer: .addPrePlugin() has been removed.\")},addPostPlugin:function(){console.warn(\"THREE.WebGLRenderer: .addPostPlugin() has been removed.\")},updateShadowMap:function(){console.warn(\"THREE.WebGLRenderer: .updateShadowMap() has been removed.\")}});\nObject.defineProperties(Yd.prototype,{shadowMapEnabled:{get:function(){return this.shadowMap.enabled},set:function(a){console.warn(\"THREE.WebGLRenderer: .shadowMapEnabled is now .shadowMap.enabled.\");this.shadowMap.enabled=a}},shadowMapType:{get:function(){return this.shadowMap.type},set:function(a){console.warn(\"THREE.WebGLRenderer: .shadowMapType is now .shadowMap.type.\");this.shadowMap.type=a}},shadowMapCullFace:{get:function(){return this.shadowMap.cullFace},set:function(a){console.warn(\"THREE.WebGLRenderer: .shadowMapCullFace is now .shadowMap.cullFace.\");\nthis.shadowMap.cullFace=a}}});Object.defineProperties(Ke.prototype,{cullFace:{get:function(){return this.renderReverseSided?2:1},set:function(a){a=1!==a;console.warn(\"WebGLRenderer: .shadowMap.cullFace is deprecated. Set .shadowMap.renderReverseSided to \"+a+\".\");this.renderReverseSided=a}}});Object.defineProperties(Ab.prototype,{wrapS:{get:function(){console.warn(\"THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS.\");return this.texture.wrapS},set:function(a){console.warn(\"THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS.\");\nthis.texture.wrapS=a}},wrapT:{get:function(){console.warn(\"THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT.\");return this.texture.wrapT},set:function(a){console.warn(\"THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT.\");this.texture.wrapT=a}},magFilter:{get:function(){console.warn(\"THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter.\");return this.texture.magFilter},set:function(a){console.warn(\"THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter.\");this.texture.magFilter=\na}},minFilter:{get:function(){console.warn(\"THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter.\");return this.texture.minFilter},set:function(a){console.warn(\"THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter.\");this.texture.minFilter=a}},anisotropy:{get:function(){console.warn(\"THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy.\");return this.texture.anisotropy},set:function(a){console.warn(\"THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy.\");this.texture.anisotropy=\na}},offset:{get:function(){console.warn(\"THREE.WebGLRenderTarget: .offset is now .texture.offset.\");return this.texture.offset},set:function(a){console.warn(\"THREE.WebGLRenderTarget: .offset is now .texture.offset.\");this.texture.offset=a}},repeat:{get:function(){console.warn(\"THREE.WebGLRenderTarget: .repeat is now .texture.repeat.\");return this.texture.repeat},set:function(a){console.warn(\"THREE.WebGLRenderTarget: .repeat is now .texture.repeat.\");this.texture.repeat=a}},format:{get:function(){console.warn(\"THREE.WebGLRenderTarget: .format is now .texture.format.\");\nreturn this.texture.format},set:function(a){console.warn(\"THREE.WebGLRenderTarget: .format is now .texture.format.\");this.texture.format=a}},type:{get:function(){console.warn(\"THREE.WebGLRenderTarget: .type is now .texture.type.\");return this.texture.type},set:function(a){console.warn(\"THREE.WebGLRenderTarget: .type is now .texture.type.\");this.texture.type=a}},generateMipmaps:{get:function(){console.warn(\"THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps.\");return this.texture.generateMipmaps},\nset:function(a){console.warn(\"THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps.\");this.texture.generateMipmaps=a}}});gc.prototype.load=function(a){console.warn(\"THREE.Audio: .load has been deprecated. Use THREE.AudioLoader instead.\");var b=this;(new ge).load(a,function(a){b.setBuffer(a)});return this};ke.prototype.getData=function(){console.warn(\"THREE.AudioAnalyser: .getData() is now .getFrequencyData().\");return this.getFrequencyData()};Xc.prototype.updateCubeMap=function(a,\nb){console.warn(\"THREE.CubeCamera: .updateCubeMap() is now .update().\");return this.update(a,b)};m.WebGLRenderTargetCube=Bb;m.WebGLRenderTarget=Ab;m.WebGLRenderer=Yd;m.ShaderLib=ib;m.UniformsLib=L;m.UniformsUtils=Da;m.ShaderChunk=V;m.FogExp2=Hb;m.Fog=Ib;m.Scene=nd;m.LensFlare=Zd;m.Sprite=xc;m.LOD=yc;m.SkinnedMesh=pd;m.Skeleton=zc;m.Bone=od;m.Mesh=fa;m.LineSegments=X;m.LineLoop=qd;m.Line=ra;m.Points=Jb;m.Group=Ac;m.VideoTexture=rd;m.DataTexture=bb;m.CompressedTexture=Kb;m.CubeTexture=Va;m.CanvasTexture=\noc;m.DepthTexture=Bc;m.Texture=N;m.CompressedTextureLoader=Re;m.DataTextureLoader=ae;m.CubeTextureLoader=be;m.TextureLoader=sd;m.ObjectLoader=Se;m.MaterialLoader=Hd;m.BufferGeometryLoader=ce;m.DefaultLoadingManager=oa;m.LoadingManager=$d;m.JSONLoader=de;m.ImageLoader=Sc;m.FontLoader=Ue;m.FileLoader=Ia;m.Loader=dc;m.Cache=hd;m.AudioLoader=ge;m.SpotLightShadow=ud;m.SpotLight=vd;m.PointLight=wd;m.RectAreaLight=Ad;m.HemisphereLight=td;m.DirectionalLightShadow=xd;m.DirectionalLight=yd;m.AmbientLight=zd;\nm.LightShadow=rb;m.Light=aa;m.StereoCamera=Ve;m.PerspectiveCamera=ja;m.OrthographicCamera=Db;m.CubeCamera=Xc;m.ArrayCamera=md;m.Camera=Ma;m.AudioListener=he;m.PositionalAudio=je;m.AudioContext=ie;m.AudioAnalyser=ke;m.Audio=gc;m.VectorKeyframeTrack=bc;m.StringKeyframeTrack=Ed;m.QuaternionKeyframeTrack=Uc;m.NumberKeyframeTrack=cc;m.ColorKeyframeTrack=Gd;m.BooleanKeyframeTrack=Fd;m.PropertyMixer=le;m.PropertyBinding=da;m.KeyframeTrack=tb;m.AnimationUtils=ea;m.AnimationObjectGroup=Xe;m.AnimationMixer=\nZe;m.AnimationClip=Ba;m.Uniform=Id;m.InstancedBufferGeometry=me;m.BufferGeometry=F;m.GeometryIdCount=function(){return Rd++};m.Geometry=Q;m.InterleavedBufferAttribute=ne;m.InstancedInterleavedBuffer=oe;m.InterleavedBuffer=hc;m.InstancedBufferAttribute=pe;m.Face3=Qa;m.Object3D=w;m.Raycaster=$e;m.Layers=Qd;m.EventDispatcher=na;m.Clock=bf;m.QuaternionLinearInterpolant=Dd;m.LinearInterpolant=Tc;m.DiscreteInterpolant=Cd;m.CubicInterpolant=Bd;m.Interpolant=wa;m.Triangle=Ra;m.Math=R;m.Spherical=cf;m.Cylindrical=\ndf;m.Plane=za;m.Frustum=kd;m.Sphere=Ca;m.Ray=hb;m.Matrix4=O;m.Matrix3=qa;m.Box3=Pa;m.Box2=id;m.Line3=Fb;m.Euler=Ya;m.Vector4=S;m.Vector3=n;m.Vector2=D;m.Quaternion=ia;m.Color=C;m.ImmediateRenderObject=Yc;m.VertexNormalsHelper=Zc;m.SpotLightHelper=ic;m.SkeletonHelper=jc;m.PointLightHelper=kc;m.RectAreaLightHelper=lc;m.HemisphereLightHelper=mc;m.GridHelper=$c;m.PolarGridHelper=Jd;m.FaceNormalsHelper=ad;m.DirectionalLightHelper=nc;m.CameraHelper=bd;m.BoxHelper=yb;m.Box3Helper=cd;m.PlaneHelper=dd;m.ArrowHelper=\nzb;m.AxisHelper=Ld;m.CatmullRomCurve3=Ja;m.CubicBezierCurve3=ed;m.QuadraticBezierCurve3=fd;m.LineCurve3=gd;m.ArcCurve=Md;m.EllipseCurve=Ua;m.SplineCurve=wb;m.CubicBezierCurve=ec;m.QuadraticBezierCurve=fc;m.LineCurve=Oa;m.Shape=xb;m.Path=Wc;m.ShapePath=ee;m.Font=fe;m.CurvePath=Vc;m.Curve=pa;m.ShapeUtils=Fa;m.SceneUtils={createMultiMaterialObject:function(a,b){for(var c=new Ac,d=0,e=b.length;d<e;d++)c.add(new fa(a,b[d]));return c},detach:function(a,b,c){a.applyMatrix(b.matrixWorld);b.remove(a);c.add(a)},\nattach:function(a,b,c){a.applyMatrix((new O).getInverse(c.matrixWorld));b.remove(a);c.add(a)}};m.WebGLUtils=Qe;m.WireframeGeometry=Lb;m.ParametricGeometry=Cc;m.ParametricBufferGeometry=Mb;m.TetrahedronGeometry=Ec;m.TetrahedronBufferGeometry=Nb;m.OctahedronGeometry=Fc;m.OctahedronBufferGeometry=jb;m.IcosahedronGeometry=Gc;m.IcosahedronBufferGeometry=Ob;m.DodecahedronGeometry=Hc;m.DodecahedronBufferGeometry=Pb;m.PolyhedronGeometry=Dc;m.PolyhedronBufferGeometry=ua;m.TubeGeometry=Ic;m.TubeBufferGeometry=\nQb;m.TorusKnotGeometry=Jc;m.TorusKnotBufferGeometry=Rb;m.TorusGeometry=Kc;m.TorusBufferGeometry=Sb;m.TextGeometry=Lc;m.TextBufferGeometry=Tb;m.SphereGeometry=Mc;m.SphereBufferGeometry=kb;m.RingGeometry=Nc;m.RingBufferGeometry=Ub;m.PlaneGeometry=vc;m.PlaneBufferGeometry=gb;m.LatheGeometry=Oc;m.LatheBufferGeometry=Vb;m.ShapeGeometry=Wb;m.ShapeBufferGeometry=Xb;m.ExtrudeGeometry=$a;m.ExtrudeBufferGeometry=Ea;m.EdgesGeometry=Yb;m.ConeGeometry=Pc;m.ConeBufferGeometry=Qc;m.CylinderGeometry=lb;m.CylinderBufferGeometry=\nTa;m.CircleGeometry=Rc;m.CircleBufferGeometry=Zb;m.BoxGeometry=Eb;m.BoxBufferGeometry=fb;m.ShadowMaterial=$b;m.SpriteMaterial=Za;m.RawShaderMaterial=ac;m.ShaderMaterial=ya;m.PointsMaterial=ma;m.MeshPhysicalMaterial=mb;m.MeshStandardMaterial=Na;m.MeshPhongMaterial=Aa;m.MeshToonMaterial=nb;m.MeshNormalMaterial=ob;m.MeshLambertMaterial=pb;m.MeshDepthMaterial=Wa;m.MeshDistanceMaterial=Xa;m.MeshBasicMaterial=sa;m.LineDashedMaterial=qb;m.LineBasicMaterial=W;m.Material=P;m.Float64BufferAttribute=uc;m.Float32BufferAttribute=\nz;m.Uint32BufferAttribute=eb;m.Int32BufferAttribute=tc;m.Uint16BufferAttribute=db;m.Int16BufferAttribute=sc;m.Uint8ClampedBufferAttribute=rc;m.Uint8BufferAttribute=qc;m.Int8BufferAttribute=pc;m.BufferAttribute=K;m.REVISION=\"87\";m.MOUSE={LEFT:0,MIDDLE:1,RIGHT:2};m.CullFaceNone=0;m.CullFaceBack=1;m.CullFaceFront=2;m.CullFaceFrontBack=3;m.FrontFaceDirectionCW=0;m.FrontFaceDirectionCCW=1;m.BasicShadowMap=0;m.PCFShadowMap=1;m.PCFSoftShadowMap=2;m.FrontSide=0;m.BackSide=1;m.DoubleSide=2;m.FlatShading=1;\nm.SmoothShading=2;m.NoColors=0;m.FaceColors=1;m.VertexColors=2;m.NoBlending=0;m.NormalBlending=1;m.AdditiveBlending=2;m.SubtractiveBlending=3;m.MultiplyBlending=4;m.CustomBlending=5;m.AddEquation=100;m.SubtractEquation=101;m.ReverseSubtractEquation=102;m.MinEquation=103;m.MaxEquation=104;m.ZeroFactor=200;m.OneFactor=201;m.SrcColorFactor=202;m.OneMinusSrcColorFactor=203;m.SrcAlphaFactor=204;m.OneMinusSrcAlphaFactor=205;m.DstAlphaFactor=206;m.OneMinusDstAlphaFactor=207;m.DstColorFactor=208;m.OneMinusDstColorFactor=\n209;m.SrcAlphaSaturateFactor=210;m.NeverDepth=0;m.AlwaysDepth=1;m.LessDepth=2;m.LessEqualDepth=3;m.EqualDepth=4;m.GreaterEqualDepth=5;m.GreaterDepth=6;m.NotEqualDepth=7;m.MultiplyOperation=0;m.MixOperation=1;m.AddOperation=2;m.NoToneMapping=0;m.LinearToneMapping=1;m.ReinhardToneMapping=2;m.Uncharted2ToneMapping=3;m.CineonToneMapping=4;m.UVMapping=300;m.CubeReflectionMapping=301;m.CubeRefractionMapping=302;m.EquirectangularReflectionMapping=303;m.EquirectangularRefractionMapping=304;m.SphericalReflectionMapping=\n305;m.CubeUVReflectionMapping=306;m.CubeUVRefractionMapping=307;m.RepeatWrapping=1E3;m.ClampToEdgeWrapping=1001;m.MirroredRepeatWrapping=1002;m.NearestFilter=1003;m.NearestMipMapNearestFilter=1004;m.NearestMipMapLinearFilter=1005;m.LinearFilter=1006;m.LinearMipMapNearestFilter=1007;m.LinearMipMapLinearFilter=1008;m.UnsignedByteType=1009;m.ByteType=1010;m.ShortType=1011;m.UnsignedShortType=1012;m.IntType=1013;m.UnsignedIntType=1014;m.FloatType=1015;m.HalfFloatType=1016;m.UnsignedShort4444Type=1017;\nm.UnsignedShort5551Type=1018;m.UnsignedShort565Type=1019;m.UnsignedInt248Type=1020;m.AlphaFormat=1021;m.RGBFormat=1022;m.RGBAFormat=1023;m.LuminanceFormat=1024;m.LuminanceAlphaFormat=1025;m.RGBEFormat=1023;m.DepthFormat=1026;m.DepthStencilFormat=1027;m.RGB_S3TC_DXT1_Format=2001;m.RGBA_S3TC_DXT1_Format=2002;m.RGBA_S3TC_DXT3_Format=2003;m.RGBA_S3TC_DXT5_Format=2004;m.RGB_PVRTC_4BPPV1_Format=2100;m.RGB_PVRTC_2BPPV1_Format=2101;m.RGBA_PVRTC_4BPPV1_Format=2102;m.RGBA_PVRTC_2BPPV1_Format=2103;m.RGB_ETC1_Format=\n2151;m.LoopOnce=2200;m.LoopRepeat=2201;m.LoopPingPong=2202;m.InterpolateDiscrete=2300;m.InterpolateLinear=2301;m.InterpolateSmooth=2302;m.ZeroCurvatureEnding=2400;m.ZeroSlopeEnding=2401;m.WrapAroundEnding=2402;m.TrianglesDrawMode=0;m.TriangleStripDrawMode=1;m.TriangleFanDrawMode=2;m.LinearEncoding=3E3;m.sRGBEncoding=3001;m.GammaEncoding=3007;m.RGBEEncoding=3002;m.LogLuvEncoding=3003;m.RGBM7Encoding=3004;m.RGBM16Encoding=3005;m.RGBDEncoding=3006;m.BasicDepthPacking=3200;m.RGBADepthPacking=3201;m.CubeGeometry=\nEb;m.Face4=function(a,b,c,d,e,f,g){console.warn(\"THREE.Face4 has been removed. A THREE.Face3 will be created instead.\");return new Qa(a,b,c,e,f,g)};m.LineStrip=0;m.LinePieces=1;m.MeshFaceMaterial=function(a){console.warn(\"THREE.MeshFaceMaterial has been removed. Use an Array instead.\");return a};m.MultiMaterial=function(a){void 0===a&&(a=[]);console.warn(\"THREE.MultiMaterial has been removed. Use an Array instead.\");a.isMultiMaterial=!0;a.materials=a;a.clone=function(){return a.slice()};return a};\nm.PointCloud=function(a,b){console.warn(\"THREE.PointCloud has been renamed to THREE.Points.\");return new Jb(a,b)};m.Particle=function(a){console.warn(\"THREE.Particle has been renamed to THREE.Sprite.\");return new xc(a)};m.ParticleSystem=function(a,b){console.warn(\"THREE.ParticleSystem has been renamed to THREE.Points.\");return new Jb(a,b)};m.PointCloudMaterial=function(a){console.warn(\"THREE.PointCloudMaterial has been renamed to THREE.PointsMaterial.\");return new ma(a)};m.ParticleBasicMaterial=function(a){console.warn(\"THREE.ParticleBasicMaterial has been renamed to THREE.PointsMaterial.\");\nreturn new ma(a)};m.ParticleSystemMaterial=function(a){console.warn(\"THREE.ParticleSystemMaterial has been renamed to THREE.PointsMaterial.\");return new ma(a)};m.Vertex=function(a,b,c){console.warn(\"THREE.Vertex has been removed. Use THREE.Vector3 instead.\");return new n(a,b,c)};m.DynamicBufferAttribute=function(a,b){console.warn(\"THREE.DynamicBufferAttribute has been removed. Use new THREE.BufferAttribute().setDynamic( true ) instead.\");return(new K(a,b)).setDynamic(!0)};m.Int8Attribute=function(a,\nb){console.warn(\"THREE.Int8Attribute has been removed. Use new THREE.Int8BufferAttribute() instead.\");return new pc(a,b)};m.Uint8Attribute=function(a,b){console.warn(\"THREE.Uint8Attribute has been removed. Use new THREE.Uint8BufferAttribute() instead.\");return new qc(a,b)};m.Uint8ClampedAttribute=function(a,b){console.warn(\"THREE.Uint8ClampedAttribute has been removed. Use new THREE.Uint8ClampedBufferAttribute() instead.\");return new rc(a,b)};m.Int16Attribute=function(a,b){console.warn(\"THREE.Int16Attribute has been removed. Use new THREE.Int16BufferAttribute() instead.\");\nreturn new sc(a,b)};m.Uint16Attribute=function(a,b){console.warn(\"THREE.Uint16Attribute has been removed. Use new THREE.Uint16BufferAttribute() instead.\");return new db(a,b)};m.Int32Attribute=function(a,b){console.warn(\"THREE.Int32Attribute has been removed. Use new THREE.Int32BufferAttribute() instead.\");return new tc(a,b)};m.Uint32Attribute=function(a,b){console.warn(\"THREE.Uint32Attribute has been removed. Use new THREE.Uint32BufferAttribute() instead.\");return new eb(a,b)};m.Float32Attribute=\nfunction(a,b){console.warn(\"THREE.Float32Attribute has been removed. Use new THREE.Float32BufferAttribute() instead.\");return new z(a,b)};m.Float64Attribute=function(a,b){console.warn(\"THREE.Float64Attribute has been removed. Use new THREE.Float64BufferAttribute() instead.\");return new uc(a,b)};m.ClosedSplineCurve3=ff;m.SplineCurve3=gf;m.Spline=te;m.BoundingBoxHelper=function(a,b){console.warn(\"THREE.BoundingBoxHelper has been deprecated. Creating a THREE.BoxHelper instead.\");return new yb(a,b)};\nm.EdgesHelper=function(a,b){console.warn(\"THREE.EdgesHelper has been removed. Use THREE.EdgesGeometry instead.\");return new X(new Yb(a.geometry),new W({color:void 0!==b?b:16777215}))};m.WireframeHelper=function(a,b){console.warn(\"THREE.WireframeHelper has been removed. Use THREE.WireframeGeometry instead.\");return new X(new Lb(a.geometry),new W({color:void 0!==b?b:16777215}))};m.XHRLoader=function(a){console.warn(\"THREE.XHRLoader has been renamed to THREE.FileLoader.\");return new Ia(a)};m.BinaryTextureLoader=\nfunction(a){console.warn(\"THREE.BinaryTextureLoader has been renamed to THREE.DataTextureLoader.\");return new ae(a)};m.GeometryUtils={merge:function(a,b,c){console.warn(\"THREE.GeometryUtils: .merge() has been moved to Geometry. Use geometry.merge( geometry2, matrix, materialIndexOffset ) instead.\");if(b.isMesh){b.matrixAutoUpdate&&b.updateMatrix();var d=b.matrix;b=b.geometry}a.merge(b,d,c)},center:function(a){console.warn(\"THREE.GeometryUtils: .center() has been moved to Geometry. Use geometry.center() instead.\");\nreturn a.center()}};m.ImageUtils={crossOrigin:void 0,loadTexture:function(a,b,c,d){console.warn(\"THREE.ImageUtils.loadTexture has been deprecated. Use THREE.TextureLoader() instead.\");var e=new sd;e.setCrossOrigin(this.crossOrigin);a=e.load(a,c,void 0,d);b&&(a.mapping=b);return a},loadTextureCube:function(a,b,c,d){console.warn(\"THREE.ImageUtils.loadTextureCube has been deprecated. Use THREE.CubeTextureLoader() instead.\");var e=new be;e.setCrossOrigin(this.crossOrigin);a=e.load(a,c,void 0,d);b&&(a.mapping=\nb);return a},loadCompressedTexture:function(){console.error(\"THREE.ImageUtils.loadCompressedTexture has been removed. Use THREE.DDSLoader instead.\")},loadCompressedTextureCube:function(){console.error(\"THREE.ImageUtils.loadCompressedTextureCube has been removed. Use THREE.DDSLoader instead.\")}};m.Projector=function(){console.error(\"THREE.Projector has been moved to /examples/js/renderers/Projector.js.\");this.projectVector=function(a,b){console.warn(\"THREE.Projector: .projectVector() is now vector.project().\");\na.project(b)};this.unprojectVector=function(a,b){console.warn(\"THREE.Projector: .unprojectVector() is now vector.unproject().\");a.unproject(b)};this.pickingRay=function(){console.error(\"THREE.Projector: .pickingRay() is now raycaster.setFromCamera().\")}};m.CanvasRenderer=function(){console.error(\"THREE.CanvasRenderer has been moved to /examples/js/renderers/CanvasRenderer.js\");this.domElement=document.createElementNS(\"http://www.w3.org/1999/xhtml\",\"canvas\");this.clear=function(){};this.render=function(){};\nthis.setClearColor=function(){};this.setSize=function(){}};Object.defineProperty(m,\"__esModule\",{value:!0})});\n</script> <script type=\"text/javascript\">THREE.TrackballControls=function(e,t){function o(e){!1!==u.enabled&&(window.removeEventListener(\"keydown\",o),g=l,l===E.NONE&&(e.keyCode!==u.keys[E.ROTATE]||u.noRotate?e.keyCode!==u.keys[E.ZOOM]||u.noZoom?e.keyCode!==u.keys[E.PAN]||u.noPan||(l=E.PAN):l=E.ZOOM:l=E.ROTATE))}function n(e){!1!==u.enabled&&(l=g,window.addEventListener(\"keydown\",o,!1))}function i(e){!1!==u.enabled&&(l===E.NONE&&(l=e.button),l!==E.ROTATE||u.noRotate?l!==E.ZOOM||u.noZoom?l!==E.PAN||u.noPan||(L.copy(A(e.pageX,e.pageY)),V.copy(L)):(b.copy(A(e.pageX,e.pageY)),O.copy(b)):(w.copy(D(e.pageX,e.pageY)),v.copy(w)),document.addEventListener(\"mousemove\",c,!1),document.addEventListener(\"mouseup\",s,!1),u.dispatchEvent(N))}function c(e){!1!==u.enabled&&(e.preventDefault(),e.stopPropagation(),l!==E.ROTATE||u.noRotate?l!==E.ZOOM||u.noZoom?l!==E.PAN||u.noPan||V.copy(A(e.pageX,e.pageY)):O.copy(A(e.pageX,e.pageY)):(v.copy(w),w.copy(D(e.pageX,e.pageY))))}function s(e){!1!==u.enabled&&(e.preventDefault(),e.stopPropagation(),l=E.NONE,document.removeEventListener(\"mousemove\",c),document.removeEventListener(\"mouseup\",s),u.dispatchEvent(j))}function a(e){if(!1!==u.enabled){switch(e.preventDefault(),e.stopPropagation(),e.deltaMode){case 2:b.y-=.025*e.deltaY;break;case 1:b.y-=.01*e.deltaY;break;default:b.y-=25e-5*e.deltaY}u.dispatchEvent(N),u.dispatchEvent(j)}}function r(e){if(!1!==u.enabled){switch(e.touches.length){case 1:l=E.TOUCH_ROTATE,w.copy(D(e.touches[0].pageX,e.touches[0].pageY)),v.copy(w);break;default:l=E.TOUCH_ZOOM_PAN;var t=e.touches[0].pageX-e.touches[1].pageX,o=e.touches[0].pageY-e.touches[1].pageY;H=R=Math.sqrt(t*t+o*o);var n=(e.touches[0].pageX+e.touches[1].pageX)/2,i=(e.touches[0].pageY+e.touches[1].pageY)/2;L.copy(A(n,i)),V.copy(L)}u.dispatchEvent(N)}}function p(e){if(!1!==u.enabled)switch(e.preventDefault(),e.stopPropagation(),e.touches.length){case 1:v.copy(w),w.copy(D(e.touches[0].pageX,e.touches[0].pageY));break;default:var t=e.touches[0].pageX-e.touches[1].pageX,o=e.touches[0].pageY-e.touches[1].pageY;H=Math.sqrt(t*t+o*o);var n=(e.touches[0].pageX+e.touches[1].pageX)/2,i=(e.touches[0].pageY+e.touches[1].pageY)/2;V.copy(A(n,i))}}function h(e){if(!1!==u.enabled){switch(e.touches.length){case 0:l=E.NONE;break;case 1:l=E.TOUCH_ROTATE,w.copy(D(e.touches[0].pageX,e.touches[0].pageY)),v.copy(w)}u.dispatchEvent(j)}}function d(e){e.preventDefault()}var u=this,E={NONE:-1,ROTATE:0,ZOOM:1,PAN:2,TOUCH_ROTATE:3,TOUCH_ZOOM_PAN:4};this.object=e,this.domElement=void 0!==t?t:document,this.enabled=!0,this.screen={left:0,top:0,width:0,height:0},this.rotateSpeed=1,this.zoomSpeed=1.2,this.panSpeed=.3,this.noRotate=!1,this.noZoom=!1,this.noPan=!1,this.staticMoving=!1,this.dynamicDampingFactor=.2,this.minDistance=0,this.maxDistance=400,this.keys=[65,83,68],this.target=new THREE.Vector3;var m=new THREE.Vector3,l=E.NONE,g=E.NONE,y=new THREE.Vector3,v=new THREE.Vector2,w=new THREE.Vector2,T=new THREE.Vector3,f=0,b=new THREE.Vector2,O=new THREE.Vector2,R=0,H=0,L=new THREE.Vector2,V=new THREE.Vector2;this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.up0=this.object.up.clone();var k={type:\"change\"},N={type:\"start\"},j={type:\"end\"};this.handleResize=function(){if(this.domElement===document)this.screen.left=0,this.screen.top=0,this.screen.width=window.innerWidth,this.screen.height=window.innerHeight;else{var e=this.domElement.getBoundingClientRect(),t=this.domElement.ownerDocument.documentElement;this.screen.left=e.left+window.pageXOffset-t.clientLeft,this.screen.top=e.top+window.pageYOffset-t.clientTop,this.screen.width=e.width,this.screen.height=e.height}},this.handleEvent=function(e){\"function\"==typeof this[e.type]&&this[e.type](e)};var A=function(){var e=new THREE.Vector2;return function(t,o){return e.set((t-u.screen.left)/u.screen.width,(o-u.screen.top)/u.screen.height),e}}(),D=function(){var e=new THREE.Vector2;return function(t,o){return e.set((t-.5*u.screen.width-u.screen.left)/(.5*u.screen.width),(u.screen.height+2*(u.screen.top-o))/u.screen.width),e}}();this.rotateCamera=function(){var e,t=new THREE.Vector3,o=new THREE.Quaternion,n=new THREE.Vector3,i=new THREE.Vector3,c=new THREE.Vector3,s=new THREE.Vector3;return function(){s.set(w.x-v.x,w.y-v.y,0),e=s.length(),e?(y.copy(u.object.position).sub(u.target),n.copy(y).normalize(),i.copy(u.object.up).normalize(),c.crossVectors(i,n).normalize(),i.setLength(w.y-v.y),c.setLength(w.x-v.x),s.copy(i.add(c)),t.crossVectors(s,y).normalize(),e*=u.rotateSpeed,o.setFromAxisAngle(t,e),y.applyQuaternion(o),u.object.up.applyQuaternion(o),T.copy(t),f=e):!u.staticMoving&&f&&(f*=Math.sqrt(1-u.dynamicDampingFactor),y.copy(u.object.position).sub(u.target),o.setFromAxisAngle(T,f),y.applyQuaternion(o),u.object.up.applyQuaternion(o)),v.copy(w)}}(),this.zoomCamera=function(){var e;l===E.TOUCH_ZOOM_PAN?(e=R/H,R=H,y.multiplyScalar(e)):(e=1+(O.y-b.y)*u.zoomSpeed,1!==e&&e>0&&y.multiplyScalar(e),u.staticMoving?b.copy(O):b.y+=(O.y-b.y)*this.dynamicDampingFactor)},this.panCamera=function(){var e=new THREE.Vector2,t=new THREE.Vector3,o=new THREE.Vector3;return function(){e.copy(V).sub(L),e.lengthSq()&&(e.multiplyScalar(y.length()*u.panSpeed),o.copy(y).cross(u.object.up).setLength(e.x),o.add(t.copy(u.object.up).setLength(e.y)),u.object.position.add(o),u.target.add(o),u.staticMoving?L.copy(V):L.add(e.subVectors(V,L).multiplyScalar(u.dynamicDampingFactor)))}}(),this.checkDistances=function(){u.noZoom&&u.noPan||(y.lengthSq()>u.maxDistance*u.maxDistance&&(u.object.position.addVectors(u.target,y.setLength(u.maxDistance)),b.copy(O)),y.lengthSq()<u.minDistance*u.minDistance&&(u.object.position.addVectors(u.target,y.setLength(u.minDistance)),b.copy(O)))},this.update=function(){y.subVectors(u.object.position,u.target),u.noRotate||u.rotateCamera(),u.noZoom||u.zoomCamera(),u.noPan||u.panCamera(),u.object.position.addVectors(u.target,y),u.checkDistances(),u.object.lookAt(u.target),m.distanceToSquared(u.object.position)>1e-6&&(u.dispatchEvent(k),m.copy(u.object.position))},this.reset=function(e){l=E.NONE,g=E.NONE,u.target.copy(u.target0),void 0===e?e=u.position0:e.normalize().multiplyScalar(u.object.position.length()),u.object.position.copy(e),u.object.up.copy(u.up0),y.subVectors(u.object.position,u.target),u.object.lookAt(u.target),u.dispatchEvent(k),m.copy(u.object.position)},this.dispose=function(){this.domElement.removeEventListener(\"contextmenu\",d,!1),this.domElement.removeEventListener(\"mousedown\",i,!1),this.domElement.removeEventListener(\"wheel\",a,!1),this.domElement.removeEventListener(\"touchstart\",r,!1),this.domElement.removeEventListener(\"touchend\",h,!1),this.domElement.removeEventListener(\"touchmove\",p,!1),document.removeEventListener(\"mousemove\",c,!1),document.removeEventListener(\"mouseup\",s,!1),window.removeEventListener(\"keydown\",o,!1),window.removeEventListener(\"keyup\",n,!1)},this.domElement.addEventListener(\"contextmenu\",d,!1),this.domElement.addEventListener(\"mousedown\",i,!1),this.domElement.addEventListener(\"wheel\",a,!1),this.domElement.addEventListener(\"touchstart\",r,!1),this.domElement.addEventListener(\"touchend\",h,!1),this.domElement.addEventListener(\"touchmove\",p,!1),window.addEventListener(\"keydown\",o,!1),window.addEventListener(\"keyup\",n,!1),this.handleResize(),this.update()},THREE.TrackballControls.prototype=Object.create(THREE.EventDispatcher.prototype),THREE.TrackballControls.prototype.constructor=THREE.TrackballControls;</script> <script type=\"text/javascript\">(function(){function n(n){function t(t,r,e,u,i,o){for(;i>=0&&o>i;i+=n){var a=u?u[i]:i;e=r(e,t[a],a,t)}return e}return function(r,e,u,i){e=b(e,i,4);var o=!k(r)&&m.keys(r),a=(o||r).length,c=n>0?0:a-1;return arguments.length<3&&(u=r[o?o[c]:c],c+=n),t(r,e,u,o,c,a)}}function t(n){return function(t,r,e){r=x(r,e);for(var u=O(t),i=n>0?0:u-1;i>=0&&u>i;i+=n)if(r(t[i],i,t))return i;return-1}}function r(n,t,r){return function(e,u,i){var o=0,a=O(e);if(\"number\"==typeof i)n>0?o=i>=0?i:Math.max(i+a,o):a=i>=0?Math.min(i+1,a):i+a+1;else if(r&&i&&a)return i=r(e,u),e[i]===u?i:-1;if(u!==u)return i=t(l.call(e,o,a),m.isNaN),i>=0?i+o:-1;for(i=n>0?o:a-1;i>=0&&a>i;i+=n)if(e[i]===u)return i;return-1}}function e(n,t){var r=I.length,e=n.constructor,u=m.isFunction(e)&&e.prototype||a,i=\"constructor\";for(m.has(n,i)&&!m.contains(t,i)&&t.push(i);r--;)(i=I[r])in n&&n[i]!==u[i]&&!m.contains(t,i)&&t.push(i)}var u=this,i=u._,o=Array.prototype,a=Object.prototype,c=Function.prototype,f=o.push,l=o.slice,s=a.toString,p=a.hasOwnProperty,h=Array.isArray,v=Object.keys,y=c.bind,d=Object.create,g=function(){},m=function(n){return n instanceof m?n:this instanceof m?void(this._wrapped=n):new m(n)};\"undefined\"!=typeof exports?(\"undefined\"!=typeof module&&module.exports&&(exports=module.exports=m),exports._=m):u._=m,m.VERSION=\"1.8.3\";var b=function(n,t,r){if(void 0===t)return n;switch(null==r?3:r){case 1:return function(r){return n.call(t,r)};case 2:return function(r,e){return n.call(t,r,e)};case 3:return function(r,e,u){return n.call(t,r,e,u)};case 4:return function(r,e,u,i){return n.call(t,r,e,u,i)}}return function(){return n.apply(t,arguments)}},x=function(n,t,r){return null==n?m.identity:m.isFunction(n)?b(n,t,r):m.isObject(n)?m.matcher(n):m.property(n)};m.iteratee=function(n,t){return x(n,t,1/0)};var _=function(n,t){return function(r){var e=arguments.length;if(2>e||null==r)return r;for(var u=1;e>u;u++)for(var i=arguments[u],o=n(i),a=o.length,c=0;a>c;c++){var f=o[c];t&&void 0!==r[f]||(r[f]=i[f])}return r}},j=function(n){if(!m.isObject(n))return{};if(d)return d(n);g.prototype=n;var t=new g;return g.prototype=null,t},w=function(n){return function(t){return null==t?void 0:t[n]}},A=Math.pow(2,53)-1,O=w(\"length\"),k=function(n){var t=O(n);return\"number\"==typeof t&&t>=0&&A>=t};m.each=m.forEach=function(n,t,r){t=b(t,r);var e,u;if(k(n))for(e=0,u=n.length;u>e;e++)t(n[e],e,n);else{var i=m.keys(n);for(e=0,u=i.length;u>e;e++)t(n[i[e]],i[e],n)}return n},m.map=m.collect=function(n,t,r){t=x(t,r);for(var e=!k(n)&&m.keys(n),u=(e||n).length,i=Array(u),o=0;u>o;o++){var a=e?e[o]:o;i[o]=t(n[a],a,n)}return i},m.reduce=m.foldl=m.inject=n(1),m.reduceRight=m.foldr=n(-1),m.find=m.detect=function(n,t,r){var e;return e=k(n)?m.findIndex(n,t,r):m.findKey(n,t,r),void 0!==e&&-1!==e?n[e]:void 0},m.filter=m.select=function(n,t,r){var e=[];return t=x(t,r),m.each(n,function(n,r,u){t(n,r,u)&&e.push(n)}),e},m.reject=function(n,t,r){return m.filter(n,m.negate(x(t)),r)},m.every=m.all=function(n,t,r){t=x(t,r);for(var e=!k(n)&&m.keys(n),u=(e||n).length,i=0;u>i;i++){var o=e?e[i]:i;if(!t(n[o],o,n))return!1}return!0},m.some=m.any=function(n,t,r){t=x(t,r);for(var e=!k(n)&&m.keys(n),u=(e||n).length,i=0;u>i;i++){var o=e?e[i]:i;if(t(n[o],o,n))return!0}return!1},m.contains=m.includes=m.include=function(n,t,r,e){return k(n)||(n=m.values(n)),(\"number\"!=typeof r||e)&&(r=0),m.indexOf(n,t,r)>=0},m.invoke=function(n,t){var r=l.call(arguments,2),e=m.isFunction(t);return m.map(n,function(n){var u=e?t:n[t];return null==u?u:u.apply(n,r)})},m.pluck=function(n,t){return m.map(n,m.property(t))},m.where=function(n,t){return m.filter(n,m.matcher(t))},m.findWhere=function(n,t){return m.find(n,m.matcher(t))},m.max=function(n,t,r){var e,u,i=-1/0,o=-1/0;if(null==t&&null!=n){n=k(n)?n:m.values(n);for(var a=0,c=n.length;c>a;a++)(e=n[a])>i&&(i=e)}else t=x(t,r),m.each(n,function(n,r,e){((u=t(n,r,e))>o||u===-1/0&&i===-1/0)&&(i=n,o=u)});return i},m.min=function(n,t,r){var e,u,i=1/0,o=1/0;if(null==t&&null!=n){n=k(n)?n:m.values(n);for(var a=0,c=n.length;c>a;a++)e=n[a],i>e&&(i=e)}else t=x(t,r),m.each(n,function(n,r,e){u=t(n,r,e),(o>u||1/0===u&&1/0===i)&&(i=n,o=u)});return i},m.shuffle=function(n){for(var t,r=k(n)?n:m.values(n),e=r.length,u=Array(e),i=0;e>i;i++)t=m.random(0,i),t!==i&&(u[i]=u[t]),u[t]=r[i];return u},m.sample=function(n,t,r){return null==t||r?(k(n)||(n=m.values(n)),n[m.random(n.length-1)]):m.shuffle(n).slice(0,Math.max(0,t))},m.sortBy=function(n,t,r){return t=x(t,r),m.pluck(m.map(n,function(n,r,e){return{value:n,index:r,criteria:t(n,r,e)}}).sort(function(n,t){var r=n.criteria,e=t.criteria;if(r!==e){if(r>e||void 0===r)return 1;if(e>r||void 0===e)return-1}return n.index-t.index}),\"value\")};var F=function(n){return function(t,r,e){var u={};return r=x(r,e),m.each(t,function(e,i){var o=r(e,i,t);n(u,e,o)}),u}};m.groupBy=F(function(n,t,r){m.has(n,r)?n[r].push(t):n[r]=[t]}),m.indexBy=F(function(n,t,r){n[r]=t}),m.countBy=F(function(n,t,r){m.has(n,r)?n[r]++:n[r]=1}),m.toArray=function(n){return n?m.isArray(n)?l.call(n):k(n)?m.map(n,m.identity):m.values(n):[]},m.size=function(n){return null==n?0:k(n)?n.length:m.keys(n).length},m.partition=function(n,t,r){t=x(t,r);var e=[],u=[];return m.each(n,function(n,r,i){(t(n,r,i)?e:u).push(n)}),[e,u]},m.first=m.head=m.take=function(n,t,r){return null==n?void 0:null==t||r?n[0]:m.initial(n,n.length-t)},m.initial=function(n,t,r){return l.call(n,0,Math.max(0,n.length-(null==t||r?1:t)))},m.last=function(n,t,r){return null==n?void 0:null==t||r?n[n.length-1]:m.rest(n,Math.max(0,n.length-t))},m.rest=m.tail=m.drop=function(n,t,r){return l.call(n,null==t||r?1:t)},m.compact=function(n){return m.filter(n,m.identity)};var S=function(n,t,r,e){for(var u=[],i=0,o=e||0,a=O(n);a>o;o++){var c=n[o];if(k(c)&&(m.isArray(c)||m.isArguments(c))){t||(c=S(c,t,r));var f=0,l=c.length;for(u.length+=l;l>f;)u[i++]=c[f++]}else r||(u[i++]=c)}return u};m.flatten=function(n,t){return S(n,t,!1)},m.without=function(n){return m.difference(n,l.call(arguments,1))},m.uniq=m.unique=function(n,t,r,e){m.isBoolean(t)||(e=r,r=t,t=!1),null!=r&&(r=x(r,e));for(var u=[],i=[],o=0,a=O(n);a>o;o++){var c=n[o],f=r?r(c,o,n):c;t?(o&&i===f||u.push(c),i=f):r?m.contains(i,f)||(i.push(f),u.push(c)):m.contains(u,c)||u.push(c)}return u},m.union=function(){return m.uniq(S(arguments,!0,!0))},m.intersection=function(n){for(var t=[],r=arguments.length,e=0,u=O(n);u>e;e++){var i=n[e];if(!m.contains(t,i)){for(var o=1;r>o&&m.contains(arguments[o],i);o++);o===r&&t.push(i)}}return t},m.difference=function(n){var t=S(arguments,!0,!0,1);return m.filter(n,function(n){return!m.contains(t,n)})},m.zip=function(){return m.unzip(arguments)},m.unzip=function(n){for(var t=n&&m.max(n,O).length||0,r=Array(t),e=0;t>e;e++)r[e]=m.pluck(n,e);return r},m.object=function(n,t){for(var r={},e=0,u=O(n);u>e;e++)t?r[n[e]]=t[e]:r[n[e][0]]=n[e][1];return r},m.findIndex=t(1),m.findLastIndex=t(-1),m.sortedIndex=function(n,t,r,e){r=x(r,e,1);for(var u=r(t),i=0,o=O(n);o>i;){var a=Math.floor((i+o)/2);r(n[a])<u?i=a+1:o=a}return i},m.indexOf=r(1,m.findIndex,m.sortedIndex),m.lastIndexOf=r(-1,m.findLastIndex),m.range=function(n,t,r){null==t&&(t=n||0,n=0),r=r||1;for(var e=Math.max(Math.ceil((t-n)/r),0),u=Array(e),i=0;e>i;i++,n+=r)u[i]=n;return u};var E=function(n,t,r,e,u){if(!(e instanceof t))return n.apply(r,u);var i=j(n.prototype),o=n.apply(i,u);return m.isObject(o)?o:i};m.bind=function(n,t){if(y&&n.bind===y)return y.apply(n,l.call(arguments,1));if(!m.isFunction(n))throw new TypeError(\"Bind must be called on a function\");var r=l.call(arguments,2),e=function(){return E(n,e,t,this,r.concat(l.call(arguments)))};return e},m.partial=function(n){var t=l.call(arguments,1),r=function(){for(var e=0,u=t.length,i=Array(u),o=0;u>o;o++)i[o]=t[o]===m?arguments[e++]:t[o];for(;e<arguments.length;)i.push(arguments[e++]);return E(n,r,this,this,i)};return r},m.bindAll=function(n){var t,r,e=arguments.length;if(1>=e)throw new Error(\"bindAll must be passed function names\");for(t=1;e>t;t++)r=arguments[t],n[r]=m.bind(n[r],n);return n},m.memoize=function(n,t){var r=function(e){var u=r.cache,i=\"\"+(t?t.apply(this,arguments):e);return m.has(u,i)||(u[i]=n.apply(this,arguments)),u[i]};return r.cache={},r},m.delay=function(n,t){var r=l.call(arguments,2);return setTimeout(function(){return n.apply(null,r)},t)},m.defer=m.partial(m.delay,m,1),m.throttle=function(n,t,r){var e,u,i,o=null,a=0;r||(r={});var c=function(){a=!1===r.leading?0:m.now(),o=null,i=n.apply(e,u),o||(e=u=null)};return function(){var f=m.now();a||!1!==r.leading||(a=f);var l=t-(f-a);return e=this,u=arguments,0>=l||l>t?(o&&(clearTimeout(o),o=null),a=f,i=n.apply(e,u),o||(e=u=null)):o||!1===r.trailing||(o=setTimeout(c,l)),i}},m.debounce=function(n,t,r){var e,u,i,o,a,c=function(){var f=m.now()-o;t>f&&f>=0?e=setTimeout(c,t-f):(e=null,r||(a=n.apply(i,u),e||(i=u=null)))};return function(){i=this,u=arguments,o=m.now();var f=r&&!e;return e||(e=setTimeout(c,t)),f&&(a=n.apply(i,u),i=u=null),a}},m.wrap=function(n,t){return m.partial(t,n)},m.negate=function(n){return function(){return!n.apply(this,arguments)}},m.compose=function(){var n=arguments,t=n.length-1;return function(){for(var r=t,e=n[t].apply(this,arguments);r--;)e=n[r].call(this,e);return e}},m.after=function(n,t){return function(){return--n<1?t.apply(this,arguments):void 0}},m.before=function(n,t){var r;return function(){return--n>0&&(r=t.apply(this,arguments)),1>=n&&(t=null),r}},m.once=m.partial(m.before,2);var M=!{toString:null}.propertyIsEnumerable(\"toString\"),I=[\"valueOf\",\"isPrototypeOf\",\"toString\",\"propertyIsEnumerable\",\"hasOwnProperty\",\"toLocaleString\"];m.keys=function(n){if(!m.isObject(n))return[];if(v)return v(n);var t=[];for(var r in n)m.has(n,r)&&t.push(r);return M&&e(n,t),t},m.allKeys=function(n){if(!m.isObject(n))return[];var t=[];for(var r in n)t.push(r);return M&&e(n,t),t},m.values=function(n){for(var t=m.keys(n),r=t.length,e=Array(r),u=0;r>u;u++)e[u]=n[t[u]];return e},m.mapObject=function(n,t,r){t=x(t,r);for(var e,u=m.keys(n),i=u.length,o={},a=0;i>a;a++)e=u[a],o[e]=t(n[e],e,n);return o},m.pairs=function(n){for(var t=m.keys(n),r=t.length,e=Array(r),u=0;r>u;u++)e[u]=[t[u],n[t[u]]];return e},m.invert=function(n){for(var t={},r=m.keys(n),e=0,u=r.length;u>e;e++)t[n[r[e]]]=r[e];return t},m.functions=m.methods=function(n){var t=[];for(var r in n)m.isFunction(n[r])&&t.push(r);return t.sort()},m.extend=_(m.allKeys),m.extendOwn=m.assign=_(m.keys),m.findKey=function(n,t,r){t=x(t,r);for(var e,u=m.keys(n),i=0,o=u.length;o>i;i++)if(e=u[i],t(n[e],e,n))return e},m.pick=function(n,t,r){var e,u,i={},o=n;if(null==o)return i;m.isFunction(t)?(u=m.allKeys(o),e=b(t,r)):(u=S(arguments,!1,!1,1),e=function(n,t,r){return t in r},o=Object(o));for(var a=0,c=u.length;c>a;a++){var f=u[a],l=o[f];e(l,f,o)&&(i[f]=l)}return i},m.omit=function(n,t,r){if(m.isFunction(t))t=m.negate(t);else{var e=m.map(S(arguments,!1,!1,1),String);t=function(n,t){return!m.contains(e,t)}}return m.pick(n,t,r)},m.defaults=_(m.allKeys,!0),m.create=function(n,t){var r=j(n);return t&&m.extendOwn(r,t),r},m.clone=function(n){return m.isObject(n)?m.isArray(n)?n.slice():m.extend({},n):n},m.tap=function(n,t){return t(n),n},m.isMatch=function(n,t){var r=m.keys(t),e=r.length;if(null==n)return!e;for(var u=Object(n),i=0;e>i;i++){var o=r[i];if(t[o]!==u[o]||!(o in u))return!1}return!0};var N=function(n,t,r,e){if(n===t)return 0!==n||1/n==1/t;if(null==n||null==t)return n===t;n instanceof m&&(n=n._wrapped),t instanceof m&&(t=t._wrapped);var u=s.call(n);if(u!==s.call(t))return!1;switch(u){case\"[object RegExp]\":case\"[object String]\":return\"\"+n==\"\"+t;case\"[object Number]\":return+n!=+n?+t!=+t:0==+n?1/+n==1/t:+n==+t;case\"[object Date]\":case\"[object Boolean]\":return+n==+t}var i=\"[object Array]\"===u;if(!i){if(\"object\"!=typeof n||\"object\"!=typeof t)return!1;var o=n.constructor,a=t.constructor;if(o!==a&&!(m.isFunction(o)&&o instanceof o&&m.isFunction(a)&&a instanceof a)&&\"constructor\"in n&&\"constructor\"in t)return!1}r=r||[],e=e||[];for(var c=r.length;c--;)if(r[c]===n)return e[c]===t;if(r.push(n),e.push(t),i){if((c=n.length)!==t.length)return!1;for(;c--;)if(!N(n[c],t[c],r,e))return!1}else{var f,l=m.keys(n);if(c=l.length,m.keys(t).length!==c)return!1;for(;c--;)if(f=l[c],!m.has(t,f)||!N(n[f],t[f],r,e))return!1}return r.pop(),e.pop(),!0};m.isEqual=function(n,t){return N(n,t)},m.isEmpty=function(n){return null==n||(k(n)&&(m.isArray(n)||m.isString(n)||m.isArguments(n))?0===n.length:0===m.keys(n).length)},m.isElement=function(n){return!(!n||1!==n.nodeType)},m.isArray=h||function(n){return\"[object Array]\"===s.call(n)},m.isObject=function(n){var t=typeof n;return\"function\"===t||\"object\"===t&&!!n},m.each([\"Arguments\",\"Function\",\"String\",\"Number\",\"Date\",\"RegExp\",\"Error\"],function(n){m[\"is\"+n]=function(t){return s.call(t)===\"[object \"+n+\"]\"}}),m.isArguments(arguments)||(m.isArguments=function(n){return m.has(n,\"callee\")}),\"function\"!=typeof/./&&\"object\"!=typeof Int8Array&&(m.isFunction=function(n){return\"function\"==typeof n||!1}),m.isFinite=function(n){return isFinite(n)&&!isNaN(parseFloat(n))},m.isNaN=function(n){return m.isNumber(n)&&n!==+n},m.isBoolean=function(n){return!0===n||!1===n||\"[object Boolean]\"===s.call(n)},m.isNull=function(n){return null===n},m.isUndefined=function(n){return void 0===n},m.has=function(n,t){return null!=n&&p.call(n,t)},m.noConflict=function(){return u._=i,this},m.identity=function(n){return n},m.constant=function(n){return function(){return n}},m.noop=function(){},m.property=w,m.propertyOf=function(n){return null==n?function(){}:function(t){return n[t]}},m.matcher=m.matches=function(n){return n=m.extendOwn({},n),function(t){return m.isMatch(t,n)}},m.times=function(n,t,r){var e=Array(Math.max(0,n));t=b(t,r,1);for(var u=0;n>u;u++)e[u]=t(u);return e},m.random=function(n,t){return null==t&&(t=n,n=0),n+Math.floor(Math.random()*(t-n+1))},m.now=Date.now||function(){return(new Date).getTime()};var B={\"&\":\"&amp;\",\"<\":\"&lt;\",\">\":\"&gt;\",'\"':\"&quot;\",\"'\":\"&#x27;\",\"`\":\"&#x60;\"},T=m.invert(B),R=function(n){var t=function(t){return n[t]},r=\"(?:\"+m.keys(n).join(\"|\")+\")\",e=RegExp(r),u=RegExp(r,\"g\");return function(n){return n=null==n?\"\":\"\"+n,e.test(n)?n.replace(u,t):n}};m.escape=R(B),m.unescape=R(T),m.result=function(n,t,r){var e=null==n?void 0:n[t];return void 0===e&&(e=r),m.isFunction(e)?e.call(n):e};var q=0;m.uniqueId=function(n){var t=++q+\"\";return n?n+t:t},m.templateSettings={evaluate:/<%([\\s\\S]+?)%>/g,interpolate:/<%=([\\s\\S]+?)%>/g,escape:/<%-([\\s\\S]+?)%>/g};var K=/(.)^/,z={\"'\":\"'\",\"\\\\\":\"\\\\\",\"\\r\":\"r\",\"\\n\":\"n\",\"\\u2028\":\"u2028\",\"\\u2029\":\"u2029\"},D=/\\\\|'|\\r|\\n|\\u2028|\\u2029/g,L=function(n){return\"\\\\\"+z[n]};m.template=function(n,t,r){!t&&r&&(t=r),t=m.defaults({},t,m.templateSettings);var e=RegExp([(t.escape||K).source,(t.interpolate||K).source,(t.evaluate||K).source].join(\"|\")+\"|$\",\"g\"),u=0,i=\"__p+='\";n.replace(e,function(t,r,e,o,a){return i+=n.slice(u,a).replace(D,L),u=a+t.length,r?i+=\"'+\\n((__t=(\"+r+\"))==null?'':_.escape(__t))+\\n'\":e?i+=\"'+\\n((__t=(\"+e+\"))==null?'':__t)+\\n'\":o&&(i+=\"';\\n\"+o+\"\\n__p+='\"),t}),i+=\"';\\n\",t.variable||(i=\"with(obj||{}){\\n\"+i+\"}\\n\"),i=\"var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\\n\"+i+\"return __p;\\n\";try{var o=new Function(t.variable||\"obj\",\"_\",i)}catch(n){throw n.source=i,n}var a=function(n){return o.call(this,n,m)};return a.source=\"function(\"+(t.variable||\"obj\")+\"){\\n\"+i+\"}\",a},m.chain=function(n){var t=m(n);return t._chain=!0,t};var P=function(n,t){return n._chain?m(t).chain():t};m.mixin=function(n){m.each(m.functions(n),function(t){var r=m[t]=n[t];m.prototype[t]=function(){var n=[this._wrapped];return f.apply(n,arguments),P(this,r.apply(m,n))}})},m.mixin(m),m.each([\"pop\",\"push\",\"reverse\",\"shift\",\"sort\",\"splice\",\"unshift\"],function(n){var t=o[n];m.prototype[n]=function(){var r=this._wrapped;return t.apply(r,arguments),\"shift\"!==n&&\"splice\"!==n||0!==r.length||delete r[0],P(this,r)}}),m.each([\"concat\",\"join\",\"slice\"],function(n){var t=o[n];m.prototype[n]=function(){return P(this,t.apply(this._wrapped,arguments))}}),m.prototype.value=function(){return this._wrapped},m.prototype.valueOf=m.prototype.toJSON=m.prototype.value,m.prototype.toString=function(){return\"\"+this._wrapped},\"function\"==typeof define&&define.amd&&define(\"underscore\",[],function(){return m})}).call(this);</script> <script type=\"text/javascript\">THREE.SVGLoader=function(a){this.manager=void 0!==a?a:THREE.DefaultLoadingManager},THREE.SVGLoader.prototype={constructor:THREE.SVGLoader,load:function(a,e,o,r){var n=this,t=new DOMParser;new THREE.FileLoader(n.manager).load(a,function(a){var o=t.parseFromString(a,\"image/svg+xml\");e(o.documentElement)},o,r)}};</script> <script type=\"text/javascript\">\"use strict\";function earcut(e,n,r){r=r||2;var t=n&&n.length,i=t?n[0]*r:e.length,x=linkedList(e,0,i,r,!0),a=[];if(!x)return a;var o,l,u,s,v,f,y;if(t&&(x=eliminateHoles(e,n,x,r)),e.length>80*r){o=u=e[0],l=s=e[1];for(var d=r;d<i;d+=r)v=e[d],f=e[d+1],v<o&&(o=v),f<l&&(l=f),v>u&&(u=v),f>s&&(s=f);y=Math.max(u-o,s-l)}return earcutLinked(x,a,r,o,l,y),a}function linkedList(e,n,r,t,i){var x,a;if(i===signedArea(e,n,r,t)>0)for(x=n;x<r;x+=t)a=insertNode(x,e[x],e[x+1],a);else for(x=r-t;x>=n;x-=t)a=insertNode(x,e[x],e[x+1],a);return a&&equals(a,a.next)&&(removeNode(a),a=a.next),a}function filterPoints(e,n){if(!e)return e;n||(n=e);var r,t=e;do{if(r=!1,t.steiner||!equals(t,t.next)&&0!==area(t.prev,t,t.next))t=t.next;else{if(removeNode(t),(t=n=t.prev)===t.next)return null;r=!0}}while(r||t!==n);return n}function earcutLinked(e,n,r,t,i,x,a){if(e){!a&&x&&indexCurve(e,t,i,x);for(var o,l,u=e;e.prev!==e.next;)if(o=e.prev,l=e.next,x?isEarHashed(e,t,i,x):isEar(e))n.push(o.i/r),n.push(e.i/r),n.push(l.i/r),removeNode(e),e=l.next,u=l.next;else if((e=l)===u){a?1===a?(e=cureLocalIntersections(e,n,r),earcutLinked(e,n,r,t,i,x,2)):2===a&&splitEarcut(e,n,r,t,i,x):earcutLinked(filterPoints(e),n,r,t,i,x,1);break}}}function isEar(e){var n=e.prev,r=e,t=e.next;if(area(n,r,t)>=0)return!1;for(var i=e.next.next;i!==e.prev;){if(pointInTriangle(n.x,n.y,r.x,r.y,t.x,t.y,i.x,i.y)&&area(i.prev,i,i.next)>=0)return!1;i=i.next}return!0}function isEarHashed(e,n,r,t){var i=e.prev,x=e,a=e.next;if(area(i,x,a)>=0)return!1;for(var o=i.x<x.x?i.x<a.x?i.x:a.x:x.x<a.x?x.x:a.x,l=i.y<x.y?i.y<a.y?i.y:a.y:x.y<a.y?x.y:a.y,u=i.x>x.x?i.x>a.x?i.x:a.x:x.x>a.x?x.x:a.x,s=i.y>x.y?i.y>a.y?i.y:a.y:x.y>a.y?x.y:a.y,v=zOrder(o,l,n,r,t),f=zOrder(u,s,n,r,t),y=e.nextZ;y&&y.z<=f;){if(y!==e.prev&&y!==e.next&&pointInTriangle(i.x,i.y,x.x,x.y,a.x,a.y,y.x,y.y)&&area(y.prev,y,y.next)>=0)return!1;y=y.nextZ}for(y=e.prevZ;y&&y.z>=v;){if(y!==e.prev&&y!==e.next&&pointInTriangle(i.x,i.y,x.x,x.y,a.x,a.y,y.x,y.y)&&area(y.prev,y,y.next)>=0)return!1;y=y.prevZ}return!0}function cureLocalIntersections(e,n,r){var t=e;do{var i=t.prev,x=t.next.next;!equals(i,x)&&intersects(i,t,t.next,x)&&locallyInside(i,x)&&locallyInside(x,i)&&(n.push(i.i/r),n.push(t.i/r),n.push(x.i/r),removeNode(t),removeNode(t.next),t=e=x),t=t.next}while(t!==e);return t}function splitEarcut(e,n,r,t,i,x){var a=e;do{for(var o=a.next.next;o!==a.prev;){if(a.i!==o.i&&isValidDiagonal(a,o)){var l=splitPolygon(a,o);return a=filterPoints(a,a.next),l=filterPoints(l,l.next),earcutLinked(a,n,r,t,i,x),void earcutLinked(l,n,r,t,i,x)}o=o.next}a=a.next}while(a!==e)}function eliminateHoles(e,n,r,t){var i,x,a,o,l,u=[];for(i=0,x=n.length;i<x;i++)a=n[i]*t,o=i<x-1?n[i+1]*t:e.length,l=linkedList(e,a,o,t,!1),l===l.next&&(l.steiner=!0),u.push(getLeftmost(l));for(u.sort(compareX),i=0;i<u.length;i++)eliminateHole(u[i],r),r=filterPoints(r,r.next);return r}function compareX(e,n){return e.x-n.x}function eliminateHole(e,n){if(n=findHoleBridge(e,n)){var r=splitPolygon(n,e);filterPoints(r,r.next)}}function findHoleBridge(e,n){var r,t=n,i=e.x,x=e.y,a=-1/0;do{if(x<=t.y&&x>=t.next.y&&t.next.y!==t.y){var o=t.x+(x-t.y)*(t.next.x-t.x)/(t.next.y-t.y);if(o<=i&&o>a){if(a=o,o===i){if(x===t.y)return t;if(x===t.next.y)return t.next}r=t.x<t.next.x?t:t.next}}t=t.next}while(t!==n);if(!r)return null;if(i===a)return r.prev;var l,u=r,s=r.x,v=r.y,f=1/0;for(t=r.next;t!==u;)i>=t.x&&t.x>=s&&i!==t.x&&pointInTriangle(x<v?i:a,x,s,v,x<v?a:i,x,t.x,t.y)&&((l=Math.abs(x-t.y)/(i-t.x))<f||l===f&&t.x>r.x)&&locallyInside(t,e)&&(r=t,f=l),t=t.next;return r}function indexCurve(e,n,r,t){var i=e;do{null===i.z&&(i.z=zOrder(i.x,i.y,n,r,t)),i.prevZ=i.prev,i.nextZ=i.next,i=i.next}while(i!==e);i.prevZ.nextZ=null,i.prevZ=null,sortLinked(i)}function sortLinked(e){var n,r,t,i,x,a,o,l,u=1;do{for(r=e,e=null,x=null,a=0;r;){for(a++,t=r,o=0,n=0;n<u&&(o++,t=t.nextZ);n++);for(l=u;o>0||l>0&&t;)0===o?(i=t,t=t.nextZ,l--):0!==l&&t?r.z<=t.z?(i=r,r=r.nextZ,o--):(i=t,t=t.nextZ,l--):(i=r,r=r.nextZ,o--),x?x.nextZ=i:e=i,i.prevZ=x,x=i;r=t}x.nextZ=null,u*=2}while(a>1);return e}function zOrder(e,n,r,t,i){return e=32767*(e-r)/i,n=32767*(n-t)/i,e=16711935&(e|e<<8),e=252645135&(e|e<<4),e=858993459&(e|e<<2),e=1431655765&(e|e<<1),n=16711935&(n|n<<8),n=252645135&(n|n<<4),n=858993459&(n|n<<2),n=1431655765&(n|n<<1),e|n<<1}function getLeftmost(e){var n=e,r=e;do{n.x<r.x&&(r=n),n=n.next}while(n!==e);return r}function pointInTriangle(e,n,r,t,i,x,a,o){return(i-a)*(n-o)-(e-a)*(x-o)>=0&&(e-a)*(t-o)-(r-a)*(n-o)>=0&&(r-a)*(x-o)-(i-a)*(t-o)>=0}function isValidDiagonal(e,n){return e.next.i!==n.i&&e.prev.i!==n.i&&!intersectsPolygon(e,n)&&locallyInside(e,n)&&locallyInside(n,e)&&middleInside(e,n)}function area(e,n,r){return(n.y-e.y)*(r.x-n.x)-(n.x-e.x)*(r.y-n.y)}function equals(e,n){return e.x===n.x&&e.y===n.y}function intersects(e,n,r,t){return!!(equals(e,n)&&equals(r,t)||equals(e,t)&&equals(r,n))||area(e,n,r)>0!=area(e,n,t)>0&&area(r,t,e)>0!=area(r,t,n)>0}function intersectsPolygon(e,n){var r=e;do{if(r.i!==e.i&&r.next.i!==e.i&&r.i!==n.i&&r.next.i!==n.i&&intersects(r,r.next,e,n))return!0;r=r.next}while(r!==e);return!1}function locallyInside(e,n){return area(e.prev,e,e.next)<0?area(e,n,e.next)>=0&&area(e,e.prev,n)>=0:area(e,n,e.prev)<0||area(e,e.next,n)<0}function middleInside(e,n){var r=e,t=!1,i=(e.x+n.x)/2,x=(e.y+n.y)/2;do{r.y>x!=r.next.y>x&&r.next.y!==r.y&&i<(r.next.x-r.x)*(x-r.y)/(r.next.y-r.y)+r.x&&(t=!t),r=r.next}while(r!==e);return t}function splitPolygon(e,n){var r=new EarNode(e.i,e.x,e.y),t=new EarNode(n.i,n.x,n.y),i=e.next,x=n.prev;return e.next=n,n.prev=e,r.next=i,i.prev=r,t.next=r,r.prev=t,x.next=t,t.prev=x,t}function insertNode(e,n,r,t){var i=new EarNode(e,n,r);return t?(i.next=t.next,i.prev=t,t.next.prev=i,t.next=i):(i.prev=i,i.next=i),i}function removeNode(e){e.next.prev=e.prev,e.prev.next=e.next,e.prevZ&&(e.prevZ.nextZ=e.nextZ),e.nextZ&&(e.nextZ.prevZ=e.prevZ)}function EarNode(e,n,r){this.i=e,this.x=n,this.y=r,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function signedArea(e,n,r,t){for(var i=0,x=n,a=r-t;x<r;x+=t)i+=(e[a]-e[x])*(e[x+1]+e[a+1]),a=x;return i}earcut.deviation=function(e,n,r,t){var i=n&&n.length,x=i?n[0]*r:e.length,a=Math.abs(signedArea(e,0,x,r));if(i)for(var o=0,l=n.length;o<l;o++){var u=n[o]*r,s=o<l-1?n[o+1]*r:e.length;a-=Math.abs(signedArea(e,u,s,r))}var v=0;for(o=0;o<t.length;o+=3){var f=t[o]*r,y=t[o+1]*r,d=t[o+2]*r;v+=Math.abs((e[f]-e[d])*(e[y+1]-e[f+1])-(e[f]-e[y])*(e[d+1]-e[f+1]))}return 0===a&&0===v?0:Math.abs((v-a)/a)},earcut.flatten=function(e){for(var n=e[0][0].length,r={vertices:[],holes:[],dimensions:n},t=0,i=0;i<e.length;i++){for(var x=0;x<e[i].length;x++)for(var a=0;a<n;a++)r.vertices.push(e[i][x][a]);i>0&&(t+=e[i-1].length,r.holes.push(t))}return r};</script> <script type=\"text/javascript\">require=function e(t,n,r){function o(i,u){if(!n[i]){if(!t[i]){var l=\"function\"==typeof require&&require;if(!u&&l)return l(i,!0);if(s)return s(i,!0);var a=new Error(\"Cannot find module '\"+i+\"'\");throw a.code=\"MODULE_NOT_FOUND\",a}var c=n[i]={exports:{}};t[i][0].call(c.exports,function(e){var n=t[i][1][e];return o(n||e)},c,c.exports,e,t,n,r)}return n[i].exports}for(var s=\"function\"==typeof require&&require,i=0;i<r.length;i++)o(r[i]);return o}({1:[function(e,t,n){},{}],2:[function(e,t,n){var r,o,s,i=function(e,t){return(+e%(t=+t)+t)%t};s=e(\"./geom\"),o=e(\"./filter\"),r=n,r.edges_vertices_to_vertices_vertices_unsorted=function(e){return e.vertices_vertices=o.edges_vertices_to_vertices_vertices(e),e},r.edges_vertices_to_vertices_vertices_sorted=function(e){return r.edges_vertices_to_vertices_vertices_unsorted(e),r.sort_vertices_vertices(e)},r.sort_vertices_vertices=function(e){var t,n,o,i,u,l;if(2!==(null!=(n=e.vertices_coords)&&null!=(o=n[0])?o.length:void 0))throw new Error(\"sort_vertices_vertices: Vertex coordinates missing or not two dimensional\");null==e.vertices_vertices&&r.edges_vertices_to_vertices_vertices(e),i=e.vertices_vertices,u=[];for(l in i)t=i[l],u.push(s.sortByAngle(t,l,function(t){return e.vertices_coords[t]}));return u},r.vertices_vertices_to_faces_vertices=function(e){var t,n,r,o,u,l,a,c,f,p,d,g,v,h,m,_,y,x;f={},p=e.vertices_vertices;for(_ in p)for(c=p[_],_=parseInt(_),n=r=0,l=c.length;r<l;n=++r)h=c[n],f[h+\",\"+_]=c[i(n-1,c.length)];for(e.faces_vertices=[],d=function(){var e;e=[];for(u in f)e.push(u);return e}(),o=0,a=d.length;o<a;o++)if(m=d[o],null!=(y=f[m])){for(f[m]=null,g=m.split(\",\"),h=g[0],_=g[1],h=parseInt(h),_=parseInt(_),t=[h,_];y!==t[0];){if(null==y){console.warn(\"Confusion with face\",t);break}t.push(y),v=[_,y],h=v[0],_=v[1],y=f[h+\",\"+_],f[h+\",\"+_]=null}f[t[t.length-1]+\",\"+t[0]]=null,null!=y&&s.polygonOrientation(function(){var n,r,o;for(o=[],n=0,r=t.length;n<r;n++)x=t[n],o.push(e.vertices_coords[x]);return o}())>0&&e.faces_vertices.push(t)}return e},r.edges_vertices_to_faces_vertices=function(e){return r.edges_vertices_to_vertices_vertices_sorted(e),r.vertices_vertices_to_faces_vertices(e)},r.faces_vertices_to_edges=function(e){var t,n,r,o,s,i,u,l,a;e.edges_vertices=[],e.edges_faces=[],e.faces_edges=[],e.edges_assignment=[],n={},i=e.faces_vertices;for(r in i)a=i[r],r=parseInt(r),e.faces_edges.push(function(){var i,c,f;for(f=[],o=i=0,c=a.length;i<c;o=++i)u=a[o],u=parseInt(u),l=a[(o+1)%a.length],s=u<=l?u+\",\"+l:l+\",\"+u,s in n?t=n[s]:(t=n[s]=e.edges_vertices.length,u<=l?e.edges_vertices.push([u,l]):e.edges_vertices.push([l,u]),e.edges_faces.push([null,null]),e.edges_assignment.push(\"B\")),u<=l?e.edges_faces[t][0]=r:e.edges_faces[t][1]=r,f.push(t);return f}());return e},r.extensions={},r.converters={},r.getConverter=function(e,t){return e===t?function(e){return e}:r.converters[\"\"+e+t]},r.setConverter=function(e,t,n){return r.extensions[e]=!0,r.extensions[t]=!0,r.converters[\"\"+e+t]=n},r.convertFromTo=function(e,t,n){var o;if(\".\"!==t[0]&&(t=\".\"+t),\".\"!==n[0]&&(n=\".\"+n),null==(o=r.getConverter(t,n))){if(t===n)return e;throw new Error(\"No converter from \"+t+\" to \"+n)}return o(e)},r.convertFrom=function(e,t){return r.convertFromTo(e,t,\".fold\")},r.convertTo=function(e,t){return r.convertFromTo(e,\".fold\",t)},r.oripa=e(\"./oripa\")},{\"./filter\":3,\"./geom\":4,\"./oripa\":5}],3:[function(e,t,n){var r,o,s,i=[].indexOf||function(e){for(var t=0,n=this.length;t<n;t++)if(t in this&&this[t]===e)return t;return-1};s=e(\"./geom\"),o=n,o.edgesAssigned=function(e,t){var n,r,o,s,i;for(s=e.edges_assignment,i=[],n=r=0,o=s.length;r<o;n=++r)s[n]===t&&i.push(e.edges_vertices[n]);return i},o.mountainEdges=function(e){return o.edgesAssigned(e,\"M\")},o.valleyEdges=function(e){return o.edgesAssigned(e,\"V\")},o.flatEdges=function(e){return o.edgesAssigned(e,\"F\")},o.boundaryEdges=function(e){return o.edgesAssigned(e,\"B\")},o.unassignedEdges=function(e){return o.edgesAssigned(e,\"U\")},o.cutEdges=function(e){return o.edgesAssigned(e,\"C\")},o.keysStartingWith=function(e,t){var n,r;r=[];for(n in e)n.slice(0,t.length)===t&&r.push(n);return r},o.keysEndingWith=function(e,t){var n,r;r=[];for(n in e)n.slice(-t.length)===t&&r.push(n);return r},o.remapField=function(e,t,n){var r,s,i,u,l,a,c,f,p,d,g,v,h,m;for(g=[],s=u=0,c=n.length;u<c;s=++u)null!=(i=n[s])&&(g[i]=s);for(h=o.keysStartingWith(e,t+\"_\"),a=0,f=h.length;a<f;a++)l=h[a],e[l]=function(){var t,n,r;for(r=[],n=0,t=g.length;n<t;n++)v=g[n],r.push(e[l][v]);return r}();for(m=o.keysEndingWith(e,\"_\"+t),d=0,p=m.length;d<p;d++)l=m[d],e[l]=function(){var t,o,s,i;for(s=e[l],i=[],o=0,t=s.length;o<t;o++)r=s[o],i.push(function(){var e,t,o;for(o=[],t=0,e=r.length;t<e;t++)v=r[t],o.push(n[v]);return o}());return i}();return e},o.remapFieldSubset=function(e,t,n){var r,s,i;return r=0,s=function(){var e,t,o;for(o=[],e=0,t=n.length;e<t;e++)i=n[e],i?o.push(r++):o.push(null);return o}(),o.remapField(e,t,s)},o.removeDuplicateEdges_vertices=function(e){var t,n,r,s,i,u,l;return i={},n=0,s=function(){var o,s,a,c;for(a=e.edges_vertices,c=[],o=0,s=a.length;o<s;o++)t=a[o],u=t[0],l=t[1],r=u<l?u+\",\"+l:l+\",\"+u,r in i||(i[r]=n,n+=1),c.push(i[r]);return c}(),o.remapField(e,\"edges\",s)},o.edges_verticesIncident=function(e,t){var n,r,o;for(n=0,r=e.length;n<r;n++)if(o=e[n],i.call(t,o)>=0)return!0;return!1},r=function(){function e(e,t){var n,r,o,s,i,u;for(this.vertices_coords=e,this.epsilon=t,this.hash={},i=this.vertices_coords,u=r=0,s=i.length;r<s;u=++r)n=i[u],o=this.key(n),o in this.hash||(this.hash[o]=[]),this.hash[o].push(u)}return e.prototype.lookup=function(e){var t,n,r,o,i,u,l,a,c,f,p,d,g,v,h,m,_,y;for(g=e[0],m=e[1],v=Math.round(g/this.epsilon),_=Math.round(m/this.epsilon),a=[v,v-1,v+1],t=0,o=a.length;t<o;t++)for(h=a[t],c=[_,_-1,_+1],r=0,i=c.length;r<i;r++)for(y=c[r],n=h+\",\"+y,p=null!=(f=this.hash[n])?f:[],l=0,u=p.length;l<u;l++)if(d=p[l],this.epsilon>s.dist(this.vertices_coords[d],e))return d;return null},e.prototype.key=function(e){var t,n,r,o;return t=e[0],r=e[1],n=Math.round(t/this.epsilon),o=Math.round(r/this.epsilon),n+\",\"+o},e.prototype.insert=function(e){var t,n;return null!=(n=this.lookup(e))?n:(t=this.key(e),t in this.hash||(this.hash[t]=[]),this.hash[t].push(n=this.vertices_coords.length),this.vertices_coords.push(e),n)},e}(),o.collapseNearbyVertices=function(e,t){var n,s,i;return i=new r([],t),s=function(){var t,r,o,s;for(o=e.vertices_coords,s=[],t=0,r=o.length;t<r;t++)n=o[t],s.push(i.insert(n));return s}(),o.remapField(e,\"vertices\",s)},o.removeLoopEdges=function(e){var t;return o.remapFieldSubset(e,\"edges\",function(){var n,r,o,s;for(o=e.edges_vertices,s=[],n=0,r=o.length;n<r;n++)t=o[n],s.push(t[0]!==t[1]);return s}())},o.subdivideCrossingEdges_vertices=function(e,t){var n,u,l,a,c,f,p,d,g,v,h,m,_,y,x,b,w,M,A,T,k,L,S,I,O,F,H;for(M=e.vertices_coords,F=g=0,h=M.length;g<h;F=++g)for(w=M[F],A=e.edges_vertices,f=v=0,m=A.length;v<m;f=++v)l=A[f],i.call(l,F)>=0||(L=function(){var t,n,r;for(r=[],n=0,t=l.length;n<t;n++)O=l[n],r.push(e.vertices_coords[O]);return r}(),s.pointStrictlyInSegment(w,L)&&(e.edges_vertices.push([F,l[1]]),e.edges_assignment.push(e.edges_assignment[f]),e.edges_foldAngle.push(e.edges_foldAngle[f]),l[1]=F));for(o.removeDuplicateEdges_vertices(e),o.removeLoopEdges(e),H=new r(e.vertices_coords,t),T=e.edges_vertices,p=x=0,_=T.length;x<_;p=++x)for(a=T[p],S=function(){var t,n,r;for(r=[],n=0,t=a.length;n<t;n++)F=a[n],r.push(e.vertices_coords[F]);return r}(),k=e.edges_vertices.slice(0,p),d=b=0,y=k.length;b<y;d=++b)c=k[d],I=function(){var t,n,r;for(r=[],n=0,t=c.length;n<t;n++)F=c[n],r.push(e.vertices_coords[F]);return r}(),!o.edges_verticesIncident(a,c)&&s.segmentsCross(S,I)&&(n=s.lineIntersectLine(S,I),u=H.insert(n),i.call(a,u)>=0&&i.call(c,u)>=0||(i.call(a,u)<0&&(e.edges_vertices.push([u,a[1]]),e.edges_assignment.push(e.edges_assignment[p]),e.edges_foldAngle.push(e.edges_foldAngle[p]),a[1]=u),i.call(c,u)<0&&(e.edges_vertices.push([u,c[1]]),e.edges_assignment.push(e.edges_assignment[d]),e.edges_foldAngle.push(e.edges_foldAngle[d]),c[1]=u)));return e},o.edges_vertices_to_vertices_vertices=function(e){var t,n,r,o,s,i,u;i=[];for(var l=0;l<e.vertices_coords.length;l++)i.push([]);for(o=e.edges_vertices,n=0,r=o.length;n<r;n++)t=o[n],s=t[0],u=t[1],i[s].push(u),i[u].push(s);return i}},{\"./geom\":4}],4:[function(e,t,n){var r,o,s=function(e,t){return(+e%(t=+t)+t)%t};o=n,r=1e-6,o.sum=function(e,t){return e+t},o.min=function(e,t){return e<t?e:t},o.max=function(e,t){return e>t?e:t},o.all=function(e,t){return e&&t},o.next=function(e,t,n){return null==n&&(n=1),s(e+n,t)},o.rangesDisjoint=function(e,t){var n,r,o,s,i,u;return n=e[0],r=e[1],o=t[0],s=t[1],o<(i=Math.min(n,r))&&i>s||o>(u=Math.max(n,r))&&u<s},o.topologicalSort=function(e){var t,n,r,s,i,u,l;for(t=0,r=e.length;t<r;t++)l=e[t],u=[!1,null],l.visited=u[0],l.parent=u[1];for(i=[],n=0,s=e.length;n<s;n++)l=e[n],l.visited||(i=o.visit(l,i));return i},o.visit=function(e,t){var n,r,s,i;for(e.visited=!0,s=e.children,n=0,r=s.length;n<r;n++)i=s[n],i.visited||(i.parent=e,t=o.visit(i,t));return t.concat([e])},o.magsq=function(e){return o.dot(e,e)},o.mag=function(e){return Math.sqrt(o.magsq(e))},o.unit=function(e,t){var n;return null==t&&(t=r),n=o.magsq(e),n<t?null:o.mul(e,1/o.mag(e))},o.ang2D=function(e,t){return null==t&&(t=r),o.magsq(e)<t?null:Math.atan2(e[1],e[0])},o.mul=function(e,t){var n,r,o,s;for(s=[],r=0,o=e.length;r<o;r++)n=e[r],s.push(n*t);return s},o.linearInterpolate=function(e,t,n){return o.plus(o.mul(t,1-e),o.mul(n,e))},o.plus=function(e,t){var n,r,o,s,i;for(i=[],r=o=0,s=e.length;o<s;r=++o)n=e[r],i.push(n+t[r]);return i},o.sub=function(e,t){return o.plus(e,o.mul(t,-1))},o.dot=function(e,t){var n,r;return function(){var o,s,i;for(i=[],r=o=0,s=e.length;o<s;r=++o)n=e[r],i.push(n*t[r]);return i}().reduce(o.sum)},o.distsq=function(e,t){return o.magsq(o.sub(e,t))},o.dist=function(e,t){return Math.sqrt(o.distsq(e,t))},o.dir=function(e,t){return o.unit(o.sub(t,e))},o.ang=function(e,t){var n,r,s,i;return n=function(){var n,r,s,u;for(s=[e,t],u=[],n=0,r=s.length;n<r;n++)i=s[n],u.push(o.unit(i));return u}(),r=n[0],s=n[1],null==r||null==s?null:Math.acos(o.dot(r,s))},o.cross=function(e,t){var n,r,o,s;return e.length===(o=t.length)&&2===o?e[0]*t[1]-e[1]*t[0]:e.length===(s=t.length)&&3===s?function(){var o,s,i,u,l;for(i=[[1,2],[2,0],[0,1]],l=[],o=0,s=i.length;o<s;o++)u=i[o],n=u[0],r=u[1],l.push(e[n]*t[r]-e[r]*t[n]);return l}():null},o.parallel=function(e,t,n){var s,i,u,l;return null==n&&(n=r),s=function(){var n,r,s,i;for(s=[e,t],i=[],n=0,r=s.length;n<r;n++)l=s[n],i.push(o.unit(l));return i}(),i=s[0],u=s[1],null==i||null==u?null:1-Math.abs(o.dot(i,u))<n},o.rotate=function(e,t,n){var r,s,i,u,l,a,c,f,p,d;if(null==(t=o.unit(t)))return null;for(c=[Math.cos(n),Math.sin(n)],r=c[0],d=c[1],f=[[0,1,2],[1,2,0],[2,0,1]],p=[],i=0,u=f.length;i<u;i++)l=f[i],p.push(function(){var n,o,i,u;for(i=[r,-d*t[l[2]],d*t[l[1]]],u=[],s=n=0,o=i.length;n<o;s=++n)a=i[s],u.push(e[l[s]]*(t[l[0]]*t[l[s]]*(1-r)+a));return u}().reduce(o.sum));return p},o.interiorAngle=function(e,t,n){var r;return(r=o.ang2D(o.sub(e,t))-o.ang2D(o.sub(n,t)))+(r<0?2*Math.PI:0)},o.turnAngle=function(e,t,n){return Math.PI-o.interiorAngle(e,t,n)},o.triangleNormal=function(e,t,n){return o.unit(o.cross(o.sub(t,e),o.sub(n,t)))},o.polygonNormal=function(e,t){var n,s;return null==t&&(t=r),o.unit(function(){var t,r,i;for(i=[],n=t=0,r=e.length;t<r;n=++t)s=e[n],i.push(o.cross(s,e[o.next(n,e.length)]));return i}().reduce(o.plus))},o.twiceSignedArea=function(e){var t,n,r;return function(){var s,i,u;for(u=[],t=s=0,i=e.length;s<i;t=++s)n=e[t],r=e[o.next(t,e.length)],u.push(n[0]*r[1]-r[0]*n[1]);return u}().reduce(o.sum)},o.polygonOrientation=function(e){return Math.sign(o.twiceSignedArea(e))},o.sortByAngle=function(e,t,n){return null==t&&(t=[0,0]),null==n&&(n=function(e){return e}),t=n(t),e.sort(function(e,r){var s,i;return s=o.ang2D(o.sub(n(e),t)),i=o.ang2D(o.sub(n(r),t)),s-i})},o.segmentsCross=function(e,t){var n,r,s,i;return n=e[0],s=e[1],r=t[0],i=t[1],!o.rangesDisjoint([n[0],s[0]],[r[0],i[0]])&&!o.rangesDisjoint([n[1],s[1]],[r[1],i[1]])&&(o.polygonOrientation([n,s,r])!==o.polygonOrientation([n,s,i])&&o.polygonOrientation([r,i,n])!==o.polygonOrientation([r,i,s]))},o.parametricLineIntersect=function(e,t){var n,r,o,s,i;return r=e[0],o=e[1],s=t[0],i=t[1],n=(i[1]-s[1])*(o[0]-r[0])+(s[0]-i[0])*(o[1]-r[1]),0===n?[null,null]:[(i[0]*(r[1]-s[1])+i[1]*(s[0]-r[0])+s[1]*r[0]-r[1]*s[0])/n,(s[0]*(o[1]-r[1])+s[1]*(r[0]-o[0])+r[1]*o[0]-o[1]*r[0])/n]},o.segmentIntersectSegment=function(e,t){var n,r,s;return n=o.parametricLineIntersect(e,t),r=n[0],s=n[1],null!=r&&0<=r&&r<=1&&0<=s&&s<=1?o.linearInterpolate(r,e[0],e[1]):null},o.lineIntersectLine=function(e,t){var n,r;return n=o.parametricLineIntersect(e,t),r=n[0],n[1],null!=r?o.linearInterpolate(r,e[0],e[1]):null},o.pointStrictlyInSegment=function(e,t,n){var s,i;return null==n&&(n=r),s=o.sub(e,t[0]),i=o.sub(e,t[1]),o.parallel(s,i,n)&&o.dot(s,i)<0},o.centroid=function(e){return o.mul(e.reduce(o.plus),1/e.length)},o.basis=function(e,t){var n,s,i,u,l,a,c,f;return null==t&&(t=r),function(){var t,n,r;for(r=[],t=0,n=e.length;t<n;t++)l=e[t],r.push(3!==l.length);return r}().reduce(o.all)?null:(s=function(){var n,r,s;for(s=[],n=0,r=e.length;n<r;n++)l=e[n],o.distsq(l,e[0])>t&&s.push(o.dir(l,e[0]));return s}(),0===s.length?[]:(a=s[0],function(){var e,r,i;for(i=[],e=0,r=s.length;e<r;e++)n=s[e],i.push(o.parallel(n,a,t));return i}().reduce(o.all)?[a]:(u=function(){var e,t,r;for(r=[],e=0,t=s.length;e<t;e++)n=s[e],r.push(o.unit(o.cross(n,a)));return r}(),u=function(){var e,t,n;for(n=[],e=0,t=u.length;e<t;e++)null!=(i=u[e])&&n.push(i);return n}(),f=u[0],c=o.cross(f,a),function(){var e,n,r;for(r=[],e=0,n=u.length;e<n;e++)i=u[e],r.push(o.parallel(i,f,t));return r}().reduce(o.all)?[a,c]:[a,c,f])))},o.above=function(e,t,n,s){var i,u,l,a,c;return null==s&&(s=r),l=function(){var r,s,i,u;for(i=[e,t],u=[],r=0,s=i.length;r<s;r++)c=i[r],u.push(function(){var e,t,r;for(r=[],e=0,t=c.length;e<t;e++)a=c[e],r.push(o.dot(a,n));return r}());return u}(),i=l[0],u=l[1],u.reduce(o.max)-i.reduce(o.min)<s?1:i.reduce(o.max)-u.reduce(o.min)<s?-1:0},o.separatingDirection2D=function(e,t,n,s){var i,u,l,a,c,f,p,d,g,v,h,m,_,y;for(null==s&&(s=r),m=[e,t],l=0,c=m.length;l<c;l++)for(y=m[l],i=a=0,f=y.length;a<f;i=++a)for(v=y[i],u=g=0,p=y.length;g<p;u=++g)if(h=y[u],i<u&&null!=(d=o.unit(o.cross(o.sub(v,h),n)))&&0!==(_=o.above(e,t,d,s)))return o.mul(d,_);return null},o.separatingDirection3D=function(e,t,n){var s,i,u,l,a,c,f,p,d,g,v,h,m,_,y,x,b,w,M;for(null==n&&(n=r),y=[[e,t],[t,e]],u=0,a=y.length;u<a;u++)for(x=y[u],w=x[0],M=x[1],l=0,c=w.length;l<c;l++)for(v=w[l],s=g=0,f=M.length;g<f;s=++g)for(h=M[s],i=_=0,p=M.length;_<p;i=++_)if(m=M[i],s<i&&null!=(d=o.unit(o.cross(o.sub(v,h),o.sub(v,m))))&&0!==(b=o.above(e,t,d,n)))return o.mul(d,b);return null},o.circleCross=function(e,t,n){var r,o;return r=(e*e-n*n+t*t)/e/2,o=Math.sqrt(t*t-r*r),[r,o]},o.creaseDir=function(e,t,n,s,i){var u,l,a,c,f,p;return null==i&&(i=r),u=Math.cos(n)+Math.cos(s),l=Math.cos(n)-Math.cos(s),a=o.plus(e,t),c=o.sub(e,t),f=o.unit(o.cross(c,a)),a=o.mul(a,u/o.magsq(a)),c=o.mul(c,o.magsq(c)<i?0:l/o.magsq(c)),p=Math.sqrt(1-o.magsq(a)-o.magsq(c)),f=o.mul(f,p),[a,c,f].reduce(o.plus)},o.quadSplit=function(e,t,n,r){if(o.magsq(t)>n*n)throw new Error(\"STOP! Trying to split expansive quad.\");return o.mul(e,(n*n-o.magsq(t))/2/(n*Math.cos(r)-o.dot(e,t)))}},{}],5:[function(e,t,n){var r,o,s,i,u,l,a;void 0!==r&&null!==r||(r=e(\"xmldom\").DOMParser),o=e(\"./convert\"),s=e(\"./filter\"),i=n,i.type2fold={0:\"F\",1:\"B\",2:\"M\",3:\"V\"},i.fold2type={},u=i.type2fold;for(l in u)a=u[l],i.fold2type[a]=l;i.fold2type_default=0,i.prop_xml2fold={editorName:\"frame_author\",originalAuthorName:\"frame_designer\",reference:\"frame_reference\",title:\"frame_title\",memo:\"frame_description\",paperSize:null,mainVersion:null,subVersion:null},i.POINT_EPS=1,i.toFold=function(e){var t,n,u,l,a,c,f,p,d,g,v,h,m,_,y,x,b,w,M,A,T,k,L,S,I,O,F,H,E,N,q,P,C,D;for(n={vertices_coords:[],edges_vertices:[],edges_assignment:[],file_creator:\"oripa2fold\"},E=function(e,t){var r;return r=n.vertices_coords.length,n.vertices_coords.push([parseFloat(e),parseFloat(t)]),r},y=function(e,t,n,r){return null!=t&&e.tagName!==t?(console.warn(\"ORIPA file has \"+e.tagName+\" where \"+t+\" was expected\"),null):null==n||e.hasAttribute(n)&&(null==r||e.getAttribute(n)===r)?e:(console.warn(\"ORIPA file has \"+e.tagName+\" with \"+n+\" = \"+e.getAttribute(n)+\" where \"+r+\" was expected\"),null)},t=function(e){var t,n,r,o,s;if(e){for(o=e.childNodes,s=[],n=0,r=o.length;n<r;n++)t=o[n],1===t.nodeType&&s.push(t);return s}return[]},b=function(e,n,r,o){var s;return s=t(e),1!==s.length?(console.warn(\"ORIPA file has \"+e.tagName+\" with \"+e.childNodes.length+\" children, not 1\"),null):y(s[0],n,r,o)},w=function(e){var t;return e.childNodes.length>1?(console.warn(\"ORIPA file has \"+e.tagName+\" with \"+e.childNodes.length+\" children, not 0 or 1\"),null):0===e.childNodes.length?\"\":(t=e.childNodes[0],3!==t.nodeType?console.warn(\"ORIPA file has nodeType \"+t.nodeType+\" where 3 (text) was expected\"):t.data)},P=(new r).parseFromString(e,\"text/xml\"),T=t(P.documentElement),u=0,c=T.length;u<c;u++)if(F=T[u],y(F,\"object\",\"class\",\"oripa.DataSet\"))for(k=t(F),l=0,f=k.length;l<f;l++)if(A=k[l],\"lines\"===A.getAttribute(\"property\")){for(h=b(A,\"array\",\"class\",\"oripa.OriLineProxy\"),L=t(h),a=0,p=L.length;a<p;a++)if(v=L[a],y(v,\"void\",\"index\"))for(S=t(v),m=0,d=S.length;m<d;m++)if(x=S[m],y(x,\"object\",\"class\",\"oripa.OriLineProxy\")){for(N=q=C=D=H=0,I=t(x),_=0,g=I.length;_<g;_++)if(O=I[_],y(O,\"void\",\"property\"))switch(O.getAttribute(\"property\")){case\"x0\":N=w(b(O,\"double\"));break;case\"x1\":q=w(b(O,\"double\"));break;case\"y0\":C=w(b(O,\"double\"));break;case\"y1\":D=w(b(O,\"double\"));break;case\"type\":H=w(b(O,\"int\"))}null!=N&&null!=q&&null!=C&&null!=D?(n.edges_vertices.push([E(N,C),E(q,D)]),null!=H&&(H=parseInt(H)),n.edges_assignment.push(i.type2fold[H])):console.warn(\"ORIPA line has missing data: \"+N+\" \"+q+\" \"+C+\" \"+D+\" \"+H)}}else A.getAttribute(\"property\")in i.prop_xml2fold?null!=(M=i.prop_xml2fold[A.getAttribute(\"property\")])&&(n[M]=w(b(A,\"string\"))):console.warn(\"Ignoring \"+A.tagName+\" \"+F.getAttribute(\"property\")+\" in ORIPA file\");return s.collapseNearbyVertices(n,i.POINT_EPS),s.subdivideCrossingEdges_vertices(n,i.POINT_EPS),o.edges_vertices_to_faces_vertices(n),n},i.fromFold=function(e){var t,n,r,o,s,u,l,a,c,f,p,d,g,v,h;\"string\"==typeof e&&(e=JSON.parse(e)),p='<?xml version=\"1.0\" encoding=\"UTF-8\"?> \\n<java version=\"1.5.0_05\" class=\"java.beans.XMLDecoder\"> \\n <object class=\"oripa.DataSet\"> \\n  <void property=\"mainVersion\"> \\n   <int>1</int> \\n  </void> \\n  <void property=\"subVersion\"> \\n   <int>1</int> \\n  </void> \\n  <void property=\"paperSize\"> \\n   <double>400.0</double> \\n  </void> \\n',f=i.prop_xml2fold;for(v in f)o=f[v],p+=('.\\n  <void property=\"'+v+'\"> \\n   <string>'+(e[o]||\"\")+\"</string> \\n  </void> \\n\").slice(2);for(h=0,c=function(){var o,s,u,l;for(u=e.edges_vertices,l=[],r=o=0,s=u.length;o<s;r=++o)n=u[r],g=function(){var r,o,s,i,u,l;for(l=[],r=0,s=n.length;r<s;r++){for(d=n[r],u=e.vertices_coords[d].slice(2),o=0,i=u.length;o<i;o++)0!==(t=u[o])&&(h+=1);l.push(e.vertices_coords[d])}return l}(),l.push({x0:g[0][0],y0:g[0][1],x1:g[1][0],y1:g[1][1],type:i.fold2type[e.edges_assignment[r]]||i.fold2type_default});return l}(),p+=('.\\n  <void property=\"lines\"> \\n   <array class=\"oripa.OriLineProxy\" length=\"'+c.length+'\"> \\n').slice(2),s=u=0,l=c.length;u<l;s=++u)a=c[s],p+=('.\\n    <void index=\"'+s+'\"> \\n     <object class=\"oripa.OriLineProxy\"> \\n      <void property=\"type\"> \\n       <int>'+a.type+'</int> \\n      </void> \\n      <void property=\"x0\"> \\n       <double>'+a.x0+'</double> \\n      </void> \\n      <void property=\"x1\"> \\n       <double>'+a.x1+'</double> \\n      </void> \\n      <void property=\"y0\"> \\n       <double>'+a.y0+'</double> \\n      </void> \\n      <void property=\"y1\"> \\n       <double>'+a.y1+\"</double> \\n      </void> \\n     </object> \\n    </void> \\n\").slice(2);return p+=\".\\n   </array> \\n  </void> \\n </object> \\n</java> \\n\".slice(2)},o.setConverter(\".fold\",\".opx\",i.fromFold),o.setConverter(\".opx\",\".fold\",i.toFold)},{\"./convert\":2,\"./filter\":3,xmldom:1}],6:[function(e,t,n){var r,o,s,i,u;i=e(\"./geom\"),u=n,o={vert:\"fill: white; r: 0.03; stroke: black; stroke-width: 0.005;\",face:\"stroke: none; fill-opacity: 0.8;\",top:\"fill: cyan;\",bot:\"fill: yellow;\",edge:\"fill: none; stroke-width: 0.01; stroke-linecap: round;\",axis:\"fill: none; stroke-width: 0.01; stroke-linecap: round;\",text:\"fill: black; font-size: 0.04; text-anchor: middle; font-family: sans-serif;\",B:\"stroke: black;\",V:\"stroke: blue;\",M:\"stroke: red;\",U:\"stroke: white;\",F:\"stroke: gray;\",ax:\"stroke: blue;\",ay:\"stroke: red;\",az:\"stroke: green;\"},u.setAttrs=function(e,t){var n,r;for(n in t)r=t[n],e.setAttribute(n,r);return e},u.appendHTML=function(e,t,n){return e.appendChild(u.setAttrs(document.createElement(t),n))},s=\"http://www.w3.org/2000/svg\",u.appendSVG=function(e,t,n){return e.appendChild(u.setAttrs(document.createElementNS(s,t),n))},u.makePath=function(e){var t,n;return function(){var r,o,s;for(s=[],n=r=0,o=e.length;r<o;n=++r)t=e[n],s.push((0===n?\"M\":\"L\")+\" \"+t[0]+\" \"+t[1]+\" \");return s}().reduce(i.sum)},u.processInput=function(e,t){var n;if(t.fold=JSON.parse(e),t.model=u.makeModel(t.fold),u.addRotation(t),u.draw(t),u.update(t),t.opts.properties){t.properties.innerHTML=\"\";for(n in t.fold)t.opts.properties&&(u.appendHTML(t.properties,\"option\",{value:n}).innerHTML=n);return u.updateProperties(t)}},u.updateProperties=function(e){var t,n;return n=e.fold[e.properties.value],t=null!=n.length?n.length+\" elements: \":\"\",e.data.innerHTML=t+JSON.stringify(n)},u.importURL=function(e,t){var n;return n=new XMLHttpRequest,n.onload=function(e){return function(e){return u.processInput(e.target.responseText,t)}}(),n.open(\"GET\",e),n.send()},u.importFile=function(e,t){var n;return n=new FileReader,n.onload=function(e){return function(e){return u.processInput(e.target.result,t)}}(),n.readAsText(e)},r={viewButtons:!0,axisButtons:!0,attrViewer:!0,examples:!0,import:!0,export:!0,properties:!0},u.addViewer=function(e,t){var n,o,i,l,a,c,f,p,d,g,v,h,m,_;null==t&&(t={}),_={cam:u.initCam(),opts:r};for(l in t)h=t[l],_.opts[l]=h;if(_.opts.viewButtons){v=u.appendHTML(e,\"div\"),v.innerHtml=\"\",v.innerHtml+=\"Toggle: \",f=_.cam.show;for(l in f)h=f[l],g=u.appendHTML(v,\"input\",{type:\"checkbox\",value:l}),h&&g.setAttribute(\"checked\",\"\"),v.innerHTML+=l+\" \"}if(_.opts.axisButtons)for(n=u.appendHTML(e,\"div\"),n.innerHTML+=\"View: \",p=[\"x\",\"y\",\"z\"],o=a=0,c=p.length;a<c;o=++a)m=p[o],u.appendHTML(n,\"input\",{type:\"button\",value:m});return _.opts.properties&&(n.innerHTML+=\" Property:\",_.properties=u.appendHTML(n,\"select\"),_.data=u.appendHTML(n,\"div\",{style:\"width: 300; padding: 10px; overflow: auto; border: 1px solid black; display: inline-block; white-space: nowrap;\"})),(_.opts.examples||_.opts.import)&&(i=u.appendHTML(e,\"div\"),_.opts.examples&&(i.innerHTML=\"Example: \",d=u.appendHTML(i,\"select\"),u.appendHTML(d,\"option\",{value:\"../examples/simple.fold\"}).innerHTML=\"Default\",u.appendHTML(d,\"option\",{value:\"../examples/box.fold\"}).innerHTML=\"Flexicube Unit\",u.appendHTML(d,\"option\",{value:\"../examples/squaretwist.fold\"}).innerHTML=\"Square Twist\",u.importURL(d.value,_)),_.opts.import&&(i.innerHTML+=\" Import: \",u.appendHTML(i,\"input\",{type:\"file\"}))),e.onclick=function(e){return function(e){if(\"checkbox\"===e.target.type&&(e.target.hasAttribute(\"checked\")?e.target.removeAttribute(\"checked\"):e.target.setAttribute(\"checked\",\"\"),_.cam.show[e.target.value]=e.target.hasAttribute(\"checked\"),u.update(_)),\"button\"===e.target.type){switch(e.target.value){case\"x\":u.setCamXY(_.cam,[0,1,0],[0,0,1]);break;case\"y\":u.setCamXY(_.cam,[0,0,1],[1,0,0]);break;case\"z\":u.setCamXY(_.cam,[1,0,0],[0,1,0])}return u.update(_)}}}(),e.onchange=function(e){return function(e){if(\"file\"===e.target.type&&u.importFile(e.target.files[0],_),\"select-one\"===e.target.type)return e.target===_.properties?u.updateProperties(_):u.importURL(e.target.value,_)}}(),_.svg=u.appendSVG(e,\"svg\",{xmlns:s,width:600}),_},u.initCam=function(){return{c:[0,0,0],x:[1,0,0],y:[0,1,0],z:[0,0,1],r:1,last:null,show:{Faces:!0,Edges:!0,Vertices:!1,\"Face Text\":!1}}},u.proj=function(e,t){var n;return n=i.mul(i.sub(e,t.c),1/t.r),[i.dot(n,t.x),-i.dot(n,t.y),0]},u.setCamXY=function(e,t,n){var r;return r=[t,n,i.cross(t,n)],e.x=r[0],e.y=r[1],e.z=r[2],r},u.addRotation=function(e){var t,n,r,o,s,i;for(i=e.svg,t=e.cam,o=[\"contextmenu\",\"selectstart\",\"dragstart\"],n=0,r=o.length;n<r;n++)s=o[n],i[\"on\"+s]=function(e){return e.preventDefault()};return i.onmousedown=function(e){return function(e){return t.last=[e.clientX,e.clientY]}}(),i.onmousemove=function(t){return function(t){return u.rotateCam([t.clientX,t.clientY],e)}}(),i.onmouseup=function(n){return function(n){return u.rotateCam([n.clientX,n.clientY],e),t.last=null}}()},u.rotateCam=function(e,t){var n,r,o,s,l,a,c;if(n=t.cam,null!=n.last&&(r=i.sub(e,n.last),!(!i.mag(r)>0)))return l=i.unit(i.plus(i.mul(n.x,-r[1]),i.mul(n.y,-r[0]))),s=function(){var e,t,s,u;for(s=[\"x\",\"y\"],u=[],e=0,t=s.length;e<t;e++)o=s[e],u.push(i.rotate(n[o],l,.01*i.mag(r)));return u}(),a=s[0],c=s[1],u.setCamXY(n,a,c),n.last=e,u.update(t)},u.makeModel=function(e){var t,n,r,o,s,u,l,a,c,f,p,d,g,v,h,m,_,y,x,b,w,M,A,T,k,L,S,I,O,F,H,E,N,q,P,C,D;for(w={vs:null,fs:null,es:{}},w.vs=function(){var t,n,r,s;for(r=e.vertices_coords,s=[],c=t=0,n=r.length;t<n;c=++t)o=r[c],s.push({i:c,cs:o});return s}(),k=w.vs,c=v=0,h=k.length;v<h;c=++v)q=k[c],2===q.cs.length&&(w.vs[c].cs[2]=0);if(w.fs=function(){var t,n,r,o;for(r=e.faces_vertices,o=[],c=n=0,t=r.length;n<t;c=++n)P=r[c],o.push({i:c,vs:function(){var e,t,n;for(t=[],n=0,e=P.length;n<e;n++)q=P[n],t.push(w.vs[q]);return t}()});return o}(),null!=e.edges_vertices)for(L=e.edges_vertices,c=T=0,m=L.length;T<m;c=++T)q=L[c],S=q[0]>q[1]?[q[1],q[0]]:[q[0],q[1]],t=S[0],r=S[1],n=null!=e.edges_assignment[c]?e.edges_assignment[c]:\"U\",w.es[\"e\"+t+\"e\"+r]={v1:w.vs[t],v2:w.vs[r],as:n};else for(I=w.fs,c=D=0,_=I.length;D<_;c=++D)for(u=I[c],O=u.vs,p=f=0,y=O.length;f<y;p=++f)q=O[p],C=u.vs[i.next(p,u.vs.length)],F=q.i>C.i?[C,q]:[q,C],t=F[0],r=F[1],w.es[\"e\"+t.i+\"e\"+r.i]={v1:t,v2:r,as:\"U\"};for(H=w.fs,c=d=0,x=H.length;d<x;c=++d)u=H[c],w.fs[c].n=i.polygonNormal(function(){var e,t,n,r;for(n=u.vs,r=[],e=0,t=n.length;e<t;e++)q=n[e],r.push(q.cs);return r}()),w.fs[c].c=i.centroid(function(){var e,t,n,r;for(n=u.vs,r=[],e=0,t=n.length;e<t;e++)q=n[e],r.push(q.cs);return r}()),w.fs[c].es={},w.fs[c].es=function(){var e,n,o,l,a;for(o=u.vs,a=[],p=e=0,n=o.length;e<n;p=++e)q=o[p],C=u.vs[i.next(p,u.vs.length)],l=q.i>C.i?[C,q]:[q,C],t=l[0],r=l[1],s=w.es[\"e\"+t.i+\"e\"+r.i],null==s&&(s={v1:t,v2:r,as:\"U\"}),a.push(s);return a}(),w.fs[c].ord={};if(null!=e.faceOrders)for(E=e.faceOrders,g=0,b=E.length;g<b;g++)N=E[g],l=N[0],a=N[1],A=N[2],0!==A&&(i.parallel(w.fs[l].n,w.fs[a].n)?(M=i.dot(w.fs[l].n,w.fs[a].n)>0?1:-1,null!=w.fs[l].ord[\"f\"+a]?(console.log(\"Warning: duplicate ordering input information for faces \"+l+\" and \"+a+\". Using first found in the faceOrder list.\"),w.fs[l].ord[\"f\"+a]!==A&&console.log(\"Error: duplicat ordering [\"+l+\",\"+a+\",\"+A+\"] is inconsistant with a previous entry.\")):(w.fs[l].ord[\"f\"+a]=A,w.fs[a].ord[\"f\"+l]=-A*M)):console.log(\"Warning: order for non-parallel faces [\"+l+\",\"+a+\"]\"));return w},u.faceAbove=function(e,t,n){var r,o,s,u,l,a,c,f,p,d,g;if(c=function(){var n,r,o,i;for(o=[e,t],i=[],n=0,r=o.length;n<r;n++)s=o[n],i.push(function(){var e,t,n,r;for(n=s.vs,r=[],t=0,e=n.length;t<e;t++)p=n[t],r.push(p.ps);return r}());return i}(),l=c[0],a=c[1],null!=i.separatingDirection2D(l,a,[0,0,1]))return null;if(f=function(){var n,r,o,i;for(o=[e,t],i=[],n=0,r=o.length;n<r;n++)s=o[n],i.push(function(){var e,t,n,r;for(n=s.vs,r=[],t=0,e=n.length;t<e;t++)p=n[t],r.push(p.cs);return r}());return i}(),d=f[0],g=f[1],r=i.basis(d.concat(g)),3===r.length){if(null!=(o=i.separatingDirection3D(d,g)))return 0>i.dot(n,o);console.log(\"Warning: faces \"+e.i+\" and \"+t.i+\" properly intersect. Ordering is unresolved.\")}return 2===r.length&&null!=(u=e.ord[\"f\"+t.i])?0>i.dot(t.n,n)*u:null},u.orderFaces=function(e){var t,n,r,o,s,l,a,c,f,p,d,g,v,h,m,_,y,x,b,w,M,A,T,k;for(a=e.model.fs,n=i.mul(e.cam.z,-1),g=0,v=a.length;g<v;g++)r=a[g],r.children=[];for(c=b=0,h=a.length;b<h;c=++b)for(o=a[c],p=k=0,m=a.length;k<m;p=++k)l=a[p],c<p&&null!=(s=u.faceAbove(o,l,n))&&(w=s?[o,l]:[l,o],x=w[0],t=w[1],x.children=x.children.concat([t]));for(e.model.fs=i.topologicalSort(a),M=e.model.fs,f=0,_=M.length;f<_;f++)r=M[f],r.g.parentNode.removeChild(r.g);for(A=e.model.fs,T=[],d=0,y=A.length;d<y;d++)r=A[d],T.push(e.svg.appendChild(r.g));return T},u.draw=function(e){var t,n,r,s,l,a,c,f,p,d,g,v,h,m,_,y,x,b,w,M,A,T,k,L,S,I;k=e.svg,n=e.cam,_=e.model,k.innerHTML=\"\",T=u.appendSVG(k,\"style\");for(c in o)S=o[c],T.innerHTML+=\".\"+c+\"{\"+S+\"}\\n\";for(m=function(){var e,t,n,r;for(n=[0,1,2],r=[],e=0,t=n.length;e<t;e++)s=n[e],r.push(function(){var e,t,n,r;for(n=_.vs,r=[],t=0,e=n.length;t<e;t++)S=n[t],r.push(S.cs[s]);return r}().reduce(i.min));return r}(),h=function(){var e,t,n,r;for(n=[0,1,2],r=[],e=0,t=n.length;e<t;e++)s=n[e],r.push(function(){var e,t,n,r;for(n=_.vs,r=[],t=0,e=n.length;t<e;t++)S=n[t],r.push(S.cs[s]);return r}().reduce(i.max));return r}(),n.c=i.mul(i.plus(m,h),.5),n.r=i.mag(i.sub(h,m))/2*1.05,t=u.proj(n.c,n),u.setAttrs(k,{viewBox:\"-1,-1,2,2\"}),L=\"translate(0,0.01)\",x=_.fs,s=f=0,p=x.length;f<p;s=++f){for(r=x[s],r.g=u.appendSVG(k,\"g\"),r.path=u.appendSVG(r.g,\"path\"),r.text=u.appendSVG(r.g,\"text\",{class:\"text\",transform:L}),r.text.innerHTML=\"f\"+r.i,r.eg=[],b=r.es,a=y=0,d=b.length;y<d;a=++y)b[a],r.eg[a]=u.appendSVG(r.g,\"path\");for(r.vg=[],w=r.vs,a=I=0,g=w.length;I<g;a=++I)S=w[a],r.vg[a]=u.appendSVG(r.g,\"g\"),r.vg[a].path=u.appendSVG(r.vg[a],\"circle\",{class:\"vert\"}),r.vg[a].text=u.appendSVG(r.vg[a],\"text\",{transform:\"translate(0, 0.01)\",class:\"text\"}),r.vg[a].text.innerHTML=\"\"+S.i}for(n.axis=u.appendSVG(k,\"g\",{transform:\"translate(-0.9,-0.9)\"}),M=[\"x\",\"y\",\"z\"],A=[],l=0,v=M.length;l<v;l++)t=M[l],A.push(n.axis[t]=u.appendSVG(n.axis,\"path\",{id:\"a\"+t,class:\"a\"+t+\" axis\"}));return A},u.update=function(e){var t,n,r,o,s,l,a,c,f,p,d,g,v,h,m,_,y,x,b,w,M,A,T,k,L,S,I,O,F,H,E;for(y=e.model,n=e.cam,e.svg,w=y.vs,l=d=0,g=w.length;d<g;l=++d)F=w[l],y.vs[l].ps=u.proj(F.cs,n);for(M=y.fs,l=b=0,v=M.length;b<v;l=++b)s=M[l],y.fs[l].c2=u.proj(s.c,n);u.orderFaces(e),O={},A=n.show;for(p in A)F=A[p],O[p]=F?\"visible\":\"hidden\";for(T=y.fs,l=E=0,h=T.length;E<h;l=++E)if(s=T[l],null!=s.path){for(H=i.dot(s.n,n.z)>0?\"top\":\"bot\",u.setAttrs(s.text,{x:s.c2[0],y:s.c2[1],visibility:O[\"Face Text\"]}),u.setAttrs(s.path,{d:u.makePath(function(){var e,t,n,r;for(n=s.vs,r=[],e=0,t=n.length;e<t;e++)F=n[e],r.push(F.ps);return r}())+\"Z\",visibility:O.Faces,class:\"face \"+H}),k=s.es,c=a=0,m=k.length;a<m;c=++a)r=k[c],u.setAttrs(s.eg[c],{d:u.makePath([r.v1.ps,r.v2.ps]),visibility:O.Edges,class:\"edge \"+r.as});for(L=s.vs,c=f=0,_=L.length;f<_;c=++f)F=L[c],u.setAttrs(s.vg[c],{visibility:O.Vertices}),u.setAttrs(s.vg[c].path,{cx:F.ps[0],cy:F.ps[1]}),u.setAttrs(s.vg[c].text,{x:F.ps[0],y:F.ps[1]})}S={x:[1,0,0],y:[0,1,0],z:[0,0,1]},I=[];for(t in S)F=S[t],o=i.plus(i.mul(F,.05*n.r),n.c),I.push(u.setAttrs(n.axis[t],{d:u.makePath(function(){var e,t,r,s;for(r=[n.c,o],s=[],e=0,t=r.length;e<t;e++)x=r[e],s.push(u.proj(x,n));return s}())}));return I}},{\"./geom\":4}],fold:[function(e,t,n){t.exports={geom:e(\"./geom\"),viewer:e(\"./viewer\"),filter:e(\"./filter\"),convert:e(\"./convert\"),file:e(\"./file\")}},{\"./convert\":2,\"./file\":1,\"./filter\":3,\"./geom\":4,\"./viewer\":6}]},{},[]);</script> <script type=\"text/javascript\">var WEBVR={isLatestAvailable:function(){return console.warn(\"WEBVR: isLatestAvailable() is being deprecated. Use .isAvailable() instead.\"),this.isAvailable()},isAvailable:function(){return void 0!==navigator.getVRDisplays},getVRDisplay:function(e){\"getVRDisplays\"in navigator&&navigator.getVRDisplays().then(function(t){e(t[0])})},getMessage:function(){var e;if(navigator.getVRDisplays?navigator.getVRDisplays().then(function(t){0===t.length&&(e=\"WebVR supported, but no VRDisplays found.\")}):e='Your browser does not support WebVR. See <a href=\"http://webvr.info\">webvr.info</a> for assistance.',void 0!==e){var t=document.createElement(\"div\");t.style.position=\"absolute\",t.style.left=\"0\",t.style.top=\"0\",t.style.right=\"0\",t.style.zIndex=\"999\",t.align=\"center\";var n=document.createElement(\"div\");return n.style.fontFamily=\"sans-serif\",n.style.fontSize=\"16px\",n.style.fontStyle=\"normal\",n.style.lineHeight=\"26px\",n.style.backgroundColor=\"#fff\",n.style.color=\"#000\",n.style.padding=\"10px 20px\",n.style.margin=\"50px\",n.style.display=\"inline-block\",n.innerHTML=e,t.appendChild(n),t}},getButton:function(e,t){if(\"VREffect\"in THREE&&e instanceof THREE.VREffect)return console.error(\"WebVR.getButton() now expects a VRDisplay.\"),document.createElement(\"button\");var n=document.createElement(\"button\");return n.style.position=\"absolute\",n.style.left=\"calc(50% - 50px)\",n.style.bottom=\"20px\",n.style.width=\"100px\",n.style.border=\"0\",n.style.padding=\"8px\",n.style.cursor=\"pointer\",n.style.backgroundColor=\"#000\",n.style.color=\"#fff\",n.style.fontFamily=\"sans-serif\",n.style.fontSize=\"13px\",n.style.fontStyle=\"normal\",n.style.textAlign=\"center\",n.style.zIndex=\"999\",e?(n.textContent=\"ENTER VR\",n.onclick=function(){e.isPresenting?e.exitPresent():e.requestPresent([{source:t}])},window.addEventListener(\"vrdisplaypresentchange\",function(){n.textContent=e.isPresenting?\"EXIT VR\":\"ENTER VR\"},!1)):n.textContent=\"NO VR DISPLAY\",n}};</script> <script type=\"text/javascript\">function GLBoilerPlate(){function r(r,e,t){var a=r.createShader(t);if(r.shaderSource(a,e),r.compileShader(a),!r.getShaderParameter(a,r.COMPILE_STATUS))throw\"could not compile shader:\"+r.getShaderInfoLog(a);return a}function e(r,e,t){var a=r.createProgram();if(r.attachShader(a,e),r.attachShader(a,t),r.linkProgram(a),!r.getProgramParameter(a,r.LINK_STATUS))throw\"program filed to link:\"+r.getProgramInfoLog(a);return a}function t(e,t,a){return r(e,t,a)}function a(r,a,T){var a=t(r,a,r.VERTEX_SHADER),T=t(r,T,r.FRAGMENT_SHADER);return e(r,a,T)}function T(r,e){r.bindBuffer(r.ARRAY_BUFFER,r.createBuffer()),r.bufferData(r.ARRAY_BUFFER,new Float32Array([-1,-1,1,-1,-1,1,1,1]),r.STATIC_DRAW);var t=r.getAttribLocation(e,\"a_position\");r.enableVertexAttribArray(t),r.vertexAttribPointer(t,2,r.FLOAT,!1,0,0)}function E(r,e,t,a,T){var E=r.createTexture();return r.bindTexture(r.TEXTURE_2D,E),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_S,r.CLAMP_TO_EDGE),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_T,r.CLAMP_TO_EDGE),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MIN_FILTER,r.NEAREST),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MAG_FILTER,r.NEAREST),r.texImage2D(r.TEXTURE_2D,0,r.RGBA,e,t,0,r.RGBA,a,T),E}return{createProgramFromSource:a,loadVertexData:T,makeTexture:E}}</script> <script type=\"text/javascript\">function initGPUMath(){function e(){$('<div id=\"coverImg\" style=\"background: url(crane.gif) no-repeat center center fixed;-webkit-background-size: cover;-moz-background-size: cover;-o-background-size: cover;background-size: cover;\"></div>').appendTo($(\"body\")),$(\"#noSupportModal\").modal(\"show\"),$(\"#aboutCorner\").show(),console.warn(\"floating point textures are not supported on your system\")}function r(){this.reset()}var t=GLBoilerPlate(),o=document.getElementById(\"gpuMathCanvas\"),s=o.getContext(\"webgl\",{antialias:!1})||o.getContext(\"experimental-webgl\",{antialias:!1});s.getExtension(\"OES_texture_float\")||e(),s.disable(s.DEPTH_TEST);var i=s.getParameter(s.MAX_TEXTURE_IMAGE_UNITS);return console.log(i+\" textures max\"),r.prototype.createProgram=function(e,r,o){var i=this.programs,a=i[e];if(a)return void s.useProgram(a.program);a=t.createProgramFromSource(s,r,o),s.useProgram(a),t.loadVertexData(s,a),i[e]={program:a,uniforms:{}}},r.prototype.initTextureFromData=function(e,r,o,i,a,f){var n=this.textures[e];if(n){if(!f)return void console.warn(\"already a texture with the name \"+e);s.deleteTexture(n)}n=t.makeTexture(s,r,o,s[i],a),this.textures[e]=n},r.prototype.initFrameBufferForTexture=function(r,t){var o=this.frameBuffers[r];if(o){if(!t)return void console.warn(\"framebuffer already exists for texture \"+r);s.deleteFramebuffer(o)}var i=this.textures[r];if(!i)return void console.warn(\"texture \"+r+\" does not exist\");o=s.createFramebuffer(),s.bindFramebuffer(s.FRAMEBUFFER,o),s.framebufferTexture2D(s.FRAMEBUFFER,s.COLOR_ATTACHMENT0,s.TEXTURE_2D,i,0),s.checkFramebufferStatus(s.FRAMEBUFFER)!=s.FRAMEBUFFER_COMPLETE&&e(),this.frameBuffers[r]=o},r.prototype.setUniformForProgram=function(e,r,t,o){if(!this.programs[e])return void console.warn(\"no program with name \"+e);var i=this.programs[e].uniforms,a=i[r];a||(a=s.getUniformLocation(this.programs[e].program,r),i[r]=a),\"1f\"==o?s.uniform1f(a,t):\"2f\"==o?s.uniform2f(a,t[0],t[1]):\"3f\"==o?s.uniform3f(a,t[0],t[1],t[2]):\"1i\"==o?s.uniform1i(a,t):console.warn(\"no uniform for type \"+o)},r.prototype.setSize=function(e,r){s.viewport(0,0,e,r),o.clientWidth=e,o.clientHeight=r},r.prototype.setProgram=function(e){var r=this.programs[e];r&&s.useProgram(r.program)},r.prototype.step=function(e,r,t,o){s.useProgram(this.programs[e].program),o&&this.setUniformForProgram(e,\"u_time\",o,\"1f\"),s.bindFramebuffer(s.FRAMEBUFFER,this.frameBuffers[t]);for(var i=0;i<r.length;i++)s.activeTexture(s.TEXTURE0+i),s.bindTexture(s.TEXTURE_2D,this.textures[r[i]]);s.drawArrays(s.TRIANGLE_STRIP,0,4)},r.prototype.swapTextures=function(e,r){var t=this.textures[e];this.textures[e]=this.textures[r],this.textures[r]=t,t=this.frameBuffers[e],this.frameBuffers[e]=this.frameBuffers[r],this.frameBuffers[r]=t},r.prototype.swap3Textures=function(e,r,t){var o=this.textures[t];this.textures[t]=this.textures[r],this.textures[r]=this.textures[e],this.textures[e]=o,o=this.frameBuffers[t],this.frameBuffers[t]=this.frameBuffers[r],this.frameBuffers[r]=this.frameBuffers[e],this.frameBuffers[e]=o},r.prototype.readyToRead=function(){return s.checkFramebufferStatus(s.FRAMEBUFFER)==s.FRAMEBUFFER_COMPLETE},r.prototype.readPixels=function(e,r,t,o,i){s.readPixels(e,r,t,o,s.RGBA,s.UNSIGNED_BYTE,i)},r.prototype.reset=function(){this.programs={},this.frameBuffers={},this.textures={},this.index=0},new r}</script> <script type=\"text/javascript\">/**\n * Created by ghassaei on 10/7/16.\n */\n\n\nfunction initControls(globals){\n\n    window.addEventListener('resize', function(){\n        if (globals.capturer) return;\n        globals.threeView.onWindowResize();\n        updateCanvasDimensions();\n    }, false);\n\n    $(\"#logo\").mouseenter(function(){\n        $(\"#activeLogo\").show();\n        $(\"#inactiveLogo\").hide();\n    });\n    $(\"#logo\").mouseleave(function(){\n        $(\"#inactiveLogo\").show();\n        $(\"#activeLogo\").hide();\n    });\n\n    $(\".author\").hover(function(e){\n        var $target = $(e.target);\n        var $moreInfo = $(\"#authorMoreInfo\");\n        if (!$target.hasClass(\"demo\")) {\n            $moreInfo.hide();\n            return;\n        }\n        var offset = $target.position();\n        var width = $target.outerWidth();\n        if (width == 0) {\n            $moreInfo.hide();\n            return;\n        }\n\n        var author = $target.data(\"author\");\n        $(\"#authorContent\").children().hide();\n        $(\"#authorContent>#\" + author).show();\n\n        $moreInfo.css({top:offset.top-13+\"px\", left:width+\"px\"});\n        $moreInfo.show();\n        $target.parent().append($moreInfo);\n    });\n    $(\".author\").mouseout(function(e){\n        var $moreInfo = $(\"#authorMoreInfo\");\n        if ($(e.target).parent().is(\":hover\")) return;\n        if ($moreInfo.is(\":hover\")) return;\n        $moreInfo.hide();\n    });\n    $(\"#authorMoreInfo\").mouseout(function(e){\n        var $moreInfo = $(\"#authorMoreInfo\");\n        if ($moreInfo.is(\":hover\")) return;\n        if ($moreInfo.find(\"#element:hover\").length>0) return;\n        $moreInfo.hide();\n    });\n\n    setLink(\"#menuVis\", function(){\n        if (globals.menusVisible){\n            $(\"#controls\").fadeOut();\n            $(\"#controlsLeft\").fadeOut();\n            $(\"#creasePercentNav\").fadeIn();\n        } else {\n            $(\"#controls\").fadeIn();\n            $(\"#controlsLeft\").fadeIn();\n            $(\"#creasePercentNav\").fadeOut();\n        }\n        globals.menusVisible = !globals.menusVisible;\n    });\n    $(\"#controls\").fadeIn();\n\n    setLink(\"#about\", function(){\n        $('#aboutModal').modal('show');\n    });\n    setLink(\"#aboutCorner\", function(){\n        $('#aboutModal').modal('show');\n    });\n    setLink(\"#tips\", function(){\n        $('#tipsModal').modal('show');\n    });\n    setLink(\"#aboutAnimation\", function(){\n        $('#aboutAnimationModal').modal('show');\n    });\n\n    setLink(\"#cameraX\", function(){\n        globals.threeView.setCameraX(1);\n    });\n    setLink(\"#cameraY\", function(){\n        globals.threeView.setCameraY(1);\n    });\n    setLink(\"#cameraZ\", function(){\n        globals.threeView.setCameraZ(1);\n    });\n    setLink(\"#cameraMinusX\", function(){\n        globals.threeView.setCameraX(-1);\n    });\n    setLink(\"#cameraMinusY\", function(){\n        globals.threeView.setCameraY(-1);\n    });\n    setLink(\"#cameraMinusZ\", function(){\n        globals.threeView.setCameraZ(-1);\n    });\n    setLink(\"#cameraIso\", function(){\n        globals.threeView.setCameraIso();\n    });\n\n    setLink(\"#exportFOLD\", function(){\n        updateDimensions();\n        $(\"#foldFilename\").val(globals.filename + \" : \" + parseInt(globals.creasePercent*100) +  \"PercentFolded\");\n        var units = globals.foldUnits;\n        if (units == \"unit\") units = \"unitless\";\n        $(\".unitsDisplay\").html(units);\n        $('#exportFOLDModal').modal('show');\n    });\n    setLink(\"#exportSTL\", function(){\n        updateDimensions();\n        $(\"#stlFilename\").val(globals.filename + \" : \" + parseInt(globals.creasePercent*100) +  \"PercentFolded\");\n        $('#exportSTLModal').modal('show');\n    });\n    setLink(\"#exportOBJ\", function(){\n        updateDimensions();\n        $(\"#objFilename\").val(globals.filename + \" : \" + parseInt(globals.creasePercent*100) +  \"PercentFolded\");\n        $('#exportOBJModal').modal('show');\n    });\n    setInput(\".exportScale\", globals.exportScale, function(val){\n        globals.exportScale = val;\n        updateDimensions();\n    }, 0);\n    function updateDimensions(){\n        var dim = globals.model.getDimensions();\n        dim.multiplyScalar(globals.exportScale/globals.scale);\n        $(\".exportDimensions\").html(dim.x.toFixed(2) + \" x \" + dim.y.toFixed(2) + \" x \" + dim.z.toFixed(2));\n    }\n    setCheckbox(\"#doublesidedSTL\", globals.doublesidedSTL, function(val){\n        globals.doublesidedSTL = val;\n    });\n    setCheckbox(\"#doublesidedOBJ\", globals.doublesidedOBJ, function(val){\n        globals.doublesidedOBJ = val;\n    });\n    setCheckbox(\"#polyFacesOBJ\", globals.polyFacesOBJ, function(val){\n        globals.polyFacesOBJ = val;\n    });\n    setLink(\".units\", function(e){\n        var units = $(e.target).data(\"id\");\n        globals.foldUnits = units;\n        if (units == \"unit\") units = \"unitless\";\n        $(\".unitsDisplay\").html(units);\n    });\n    setCheckbox(\"#triangulateFOLDexport\", globals.triangulateFOLDexport, function(val){\n        globals.triangulateFOLDexport = val;\n    });\n    setCheckbox(\"#exportFoldAngle\", globals.exportFoldAngle, function(val){\n        globals.exportFoldAngle = val;\n    });\n\n    setLink(\"#doSTLsave\", function(){\n        saveSTL();\n    });\n    setLink(\"#doOBJsave\", function(){\n        saveOBJ();\n    });\n    setLink(\"#doFOLDsave\", function(){\n        saveFOLD();\n    });\n\n    setLink(\"#rotateX\", function(){\n        globals.threeView.resetModel();\n        globals.rotateModel = \"x\";\n    });\n    setLink(\"#rotateY\", function(){\n        globals.threeView.resetModel();\n        globals.rotateModel = \"y\";\n    });\n    setLink(\"#rotateZ\", function(){\n        globals.threeView.resetModel();\n        globals.rotateModel = \"z\";\n    });\n    setLink(\"#stopRotation\", function(){\n        globals.rotateModel = null;\n        globals.threeView.resetModel();\n    });\n    setLink(\"#changeRotationSpeed\", function(){\n        $(\"#changeRotationSpeedModal\").modal(\"show\");\n    });\n    setInput(\"#rotationSpeed\", globals.rotationSpeed, function(val){\n        globals.rotationSpeed = val;\n    });\n\n    setLink(\"#changeBackground\", function(){\n        $(\"#changeBackgroundModal\").modal(\"show\");\n    });\n    setHexInput(\"#backgroundColor\", globals.backgroundColor, function(val){\n        globals.backgroundColor = val;\n        globals.threeView.setBackgroundColor();\n    });\n\n    setLink(\"#importSettings\", function(){\n        $(\"#vertTol\").val(globals.vertTol);\n        $(\"#curvedLines\").val(globals.includeCurves);\n        $(\"#vertInt\").val(globals.vertInt);\n        $(\"#apprCurve\").val(globals.apprCurve);\n        $(\"#importSettingsModal\").modal(\"show\");\n    });\n    setInput(\"#vertTol\", globals.vertTol, function(val){\n        globals.vertTol = val;\n    });\n    setCheckbox(\"#curvedLines\", globals.includeCurves, function(val){\n        globals.includeCurves = val;\n        if (val) $(\"#curvedCreaseImportOptions\").show();\n        else $(\"#curvedCreaseImportOptions\").hide();\n    });\n    if (globals.includeCurves) $(\"#curvedCreaseImportOptions\").show();\n    else $(\"#curvedCreaseImportOptions\").hide();\n    setInput(\"#vertInt\", globals.vertInt, function(val){\n        globals.vertInt = val;\n    });\n    setInput(\"#apprCurve\", globals.apprCurve, function(val){\n        globals.apprCurve = val;\n    });\n\n    setLink(\"#createGif\", function(){\n        globals.shouldScaleCanvas = true;\n        $(\"#screenCaptureModal .video\").hide();\n        $(\"#screenCaptureModal .png\").hide();\n        $(\"#screenCaptureModal .gif\").show();\n        $(\"#screenCaptureModal\").modal(\"show\");\n        $(\"#screenRecordFilename\").val(globals.filename);\n        globals.screenRecordFilename = globals.filename;\n        globals.threeView.onWindowResize();\n        updateCanvasDimensions();\n    });\n    setLink(\"#createPNG\", function(){\n        globals.shouldScaleCanvas = true;\n        $(\"#screenCaptureModal .gif\").hide();\n        $(\"#screenCaptureModal .video\").hide();\n        $(\"#screenCaptureModal .png\").show();\n        $(\"#screenCaptureModal\").modal(\"show\");\n        $(\"#screenRecordFilename\").val(globals.filename);\n        globals.screenRecordFilename = globals.filename;\n        globals.threeView.onWindowResize();\n        updateCanvasDimensions();\n    });\n    setLink(\"#createVideo\", function(){\n        var hasWebP = false;\n        (function() {\n          var img = new Image();\n          img.onload = function() {\n            hasWebP = !!(img.height > 0 && img.width > 0);\n              if (hasWebP){\n                  //timeLimit: s of video to limit\n                $(\"#screenCaptureModal .gif\").hide();\n                $(\"#screenCaptureModal .png\").hide();\n                $(\"#screenCaptureModal .video\").show();\n                $(\"#screenCaptureModal\").modal(\"show\");\n                $(\"#screenRecordFilename\").val(globals.filename);\n                globals.screenRecordFilename = globals.filename;\n              } else {\n                  globals.warn(\"Video export not supported by this browser, please try again \" +\n                \"with the latest version of Google Chrome.\");\n              }\n          };\n          img.onerror = function() {\n             globals.warn(\"Video export not supported by this browser, please try again \" +\n                \"with the latest version of Google Chrome.\");\n          };\n          img.src = '../assets/support/test.webp';\n        })();\n\n    });\n    $(\"#screenCaptureModal\").on('hidden.bs.modal', function (){\n        if (globals.capturer) return;\n        globals.shouldScaleCanvas = false;\n        globals.threeView.onWindowResize();\n    });\n    $(\"#screenCaptureModal\").on('shown.bs.modal', function (){\n        globals.shouldScaleCanvas = true;//fixes problem of setting animation turning off shouldScaleCanvas\n        globals.threeView.onWindowResize();\n        updateCanvasDimensions();\n    });\n    setInput(\"#capturerFPS\", globals.capturerFPS, function(val){\n        globals.capturerFPS = val;\n    }, 0, 60);\n    setInput(\"#gifFPS\", globals.gifFPS, function(val){\n        globals.gifFPS = val;\n    }, 0, 60);\n    setInput(\"#capturerQuality\", globals.capturerQuality, function(val){\n        globals.capturerQuality = val;\n    }, 0, 63);\n    setInput(\"#capturerScale\", globals.capturerScale, function(val){\n        globals.capturerScale = val;\n        globals.threeView.onWindowResize();\n        updateCanvasDimensions();\n    }, 1);\n    function updateCanvasDimensions(){\n        var dim = (new THREE.Vector2(window.innerWidth, window.innerHeight)).multiplyScalar(globals.capturerScale);\n        $(\"#canvasDimensions\").html(dim.x + \" x \" + dim.y + \" px\");\n    }\n    setInput(\"#screenRecordFilename\", \"OrigamiSimulator\", function(val){\n        globals.screenRecordFilename = val;\n    });\n\n    setLink(\"#doScreenRecord\", function(){\n        globals.capturerFrames = 0;\n        globals.capturer = new CCapture({\n            format:'webm',\n            name:globals.screenRecordFilename,\n            framerate:globals.capturerFPS,\n            workersPath:'dependencies/',\n            quality: globals.capturerQuality\n        });\n        globals.currentFPS = globals.capturerFPS;\n        globals.isGif = false;\n        $(\"#recordStatus\").show();\n        globals.shouldScaleCanvas = false;\n        globals.threeView.resetModel();\n        globals.capturer.start();\n        if (globals.videoAnimator.isValid()) {\n            globals.shouldAnimateFoldPercent = true;\n            globals.videoAnimator.compile();\n        }\n    });\n    setLink(\"#doPNGCapture\", function(){\n        globals.shouldScaleCanvas = false;\n        globals.capturer = \"png\";\n    });\n    setLink(\"#doGifRecord\", function(){\n        globals.capturerFrames = 0;\n        globals.capturer = new CCapture({\n            format:'gif',\n            name:globals.screenRecordFilename,\n            framerate:globals.gifFPS,\n            workersPath:'dependencies/'\n        });\n        globals.currentFPS = globals.gifFPS;\n        globals.isGif = true;\n        $(\"#recordStatus\").show();\n        globals.shouldScaleCanvas = false;\n        globals.threeView.resetModel();\n        globals.capturer.start();\n        if (globals.videoAnimator.isValid()) {\n            globals.shouldAnimateFoldPercent = true;\n            globals.videoAnimator.compile();\n        }\n    });\n\n    setLink(\"#stopRecord\", function(){\n        if (!globals.capturer) return;\n        if (globals.isGif) globals.warn(\"Processing GIF, may take a few minutes...  <br/>(you can close this window in the meantime)<br/><br/> GIFs exported from this app are not highly compressed, \" +\n            \"you can decrease their file size using a GIF editor.  \" +\n            \"I like <a href='https://ezgif.com/video-to-gif' target='blank'>EZGif</a>.\");\n        else {\n            globals.warn(\"Compiling WebM video.  If you have trouble playing videos exported from this app, try using \" +\n                \"<a href='http://www.videolan.org/vlc/index.html' target='blank'>VLC Player</a>.\");\n        }\n        globals.capturer.stop();\n        globals.capturer.save();\n        globals.capturer = null;\n        globals.shouldScaleCanvas = false;\n        globals.shouldAnimateFoldPercent = false;\n        globals.threeView.onWindowResize();\n        $(\"#recordStatus\").hide();\n    });\n\n\n    setLink(\"#navPattern\", function(){\n        if (globals.noCreasePatternAvailable()){\n            globals.warn(\"No crease pattern available.\");\n            return;\n        }\n        if (globals.navMode == \"pattern\") return;\n        globals.pausedForPatternView = globals.simulationRunning;\n        globals.model.pause();\n        globals.navMode = \"pattern\";\n        $(\"#navPattern\").parent().addClass(\"open\");\n        $(\"#navSimulation\").parent().removeClass(\"open\");\n        $(\"#svgViewer\").show();\n    });\n    $(\"#navSimulation\").parent().addClass(\"open\");\n    $(\"#navPattern\").parent().removeClass(\"open\");\n    setLink(\"#navSimulation\", function(){\n        if (globals.navMode == \"simulation\") return;\n        globals.navMode = \"simulation\";\n        if (globals.pausedForPatternView) globals.model.resume();\n        $(\"#navSimulation\").parent().addClass(\"open\");\n        $(\"#navPattern\").parent().removeClass(\"open\");\n        $(\"#svgViewer\").hide();\n    });\n\n    setLink(\".seeMore\", function(e){\n        var $target = $(e.target);\n        if (!$target.hasClass(\"seeMore\")) $target = $target.parent();\n        var $div = $(\"#\"+ $target.data(\"id\"));\n        if ($target.hasClass(\"closed\")){\n            $target.removeClass(\"closed\");\n            $target.addClass(\"open\");\n            AnimateRotate(-90, 0, $target.children(\"span\"));\n            $div.removeClass(\"hide\");\n            $div.css('display', 'inline-block');\n        } else {\n            $target.removeClass(\"open\");\n            $target.addClass(\"closed\");\n            AnimateRotate(0, -90, $target.children(\"span\"));\n            $div.hide();\n        }\n    });\n\n    function AnimateRotate(from, to, $elem) {\n        // we use a pseudo object for the animation\n        // (starts from `0` to `angle`), you can name it as you want\n        $({deg: from}).animate({deg: to}, {\n            duration: 200,\n            step: function(now) {\n                // in the step-callback (that is fired each step of the animation),\n                // you can use the `now` paramter which contains the current\n                // animation-position (`0` up to `angle`)\n                $elem.css({\n                    transform: 'rotate(' + now + 'deg)'\n                });\n            }\n        });\n    }\n\n    setLink(\".goToImportInstructions\", function(){\n       $(\"#aboutModal\").modal(\"hide\");\n        $(\"#importSettingsModal\").modal(\"hide\");\n        $(\"#tipsModal\").modal(\"show\");\n    });\n\n    setLink(\"#goToViveInstructions\", function(){\n       $(\"#aboutModal\").modal(\"hide\");\n        $(\"#aboutVRmodal\").modal(\"show\");\n    });\n\n    setRadio(\"integrationType\", globals.integrationType, function(val){\n        globals.dynamicSolver.reset();\n        globals.integrationType = val;\n    });\n\n\n    setRadio(\"simType\", globals.simType, function(val){\n        globals.simType = val;\n        globals.simNeedsSync = true;\n    });\n\n    setSliderInput(\"#axialStiffness\", globals.axialStiffness, 10, 100, 1, function(val){\n        globals.axialStiffness = val;\n        globals.materialHasChanged = true;\n    });\n\n    setSliderInput(\"#faceStiffness\", globals.faceStiffness, 0, 5, 0.01, function(val){\n        globals.faceStiffness = val;\n        globals.materialHasChanged = true;\n    });\n\n    setSliderInput(\"#creaseStiffness\", globals.creaseStiffness, 0, 3, 0.01, function(val){\n        globals.creaseStiffness = val;\n        globals.creaseMaterialHasChanged = true;\n    });\n\n    setSliderInput(\"#panelStiffness\", globals.panelStiffness, 0, 3, 0.01, function(val){\n        globals.panelStiffness = val;\n        globals.creaseMaterialHasChanged = true;\n    });\n\n    setSliderInput(\"#percentDamping\", globals.percentDamping, 0.01, 0.5, 0.01, function(val){\n        globals.percentDamping = val;\n        globals.materialHasChanged = true;\n    });\n\n    var creasePercentSlider = setSliderInput(\"#creasePercent\", globals.creasePercent*100, -100, 100, 1, function(val){\n        // Map slider value (0-100) to actual folding value (0-currentPatternMaxFolding)\n        var actualVal = (val / 100) * (globals.currentPatternMaxFolding / 100);\n        globals.creasePercent = actualVal;\n        globals.shouldChangeCreasePercent = true;\n        updateCreasePercent();\n    });\n    var creasePercentNavSlider = setSlider(\"#creasePercentNav>div\", globals.creasePercent*100, -100, 100, 1, function(val){\n        // Map slider value (0-100) to actual folding value (0-currentPatternMaxFolding)\n        var actualVal = (val / 100) * (globals.currentPatternMaxFolding / 100);\n        globals.creasePercent = actualVal;\n        globals.shouldChangeCreasePercent = true;\n        updateCreasePercent();\n    });\n    var creasePercentBottomSlider = setSlider(\"#creasePercentBottom>div\", globals.creasePercent*100, 0, 100, 1, function(val){\n        // Map slider value (0-100) to actual folding value (0-currentPatternMaxFolding)\n        var actualVal = (val / 100) * (globals.currentPatternMaxFolding / 100);\n        globals.creasePercent = actualVal;\n        globals.shouldChangeCreasePercent = true;\n        updateCreasePercent()\n    });\n    setInput(\"#currentFoldPercent\", globals.creasePercent*100, function(val){\n        globals.creasePercent = val/100;\n        globals.shouldChangeCreasePercent = true;\n        updateCreasePercent();\n    }, -100, 100);\n\n    setLink(\"#flatIndicator\", function(){\n        globals.creasePercent = 0;\n        globals.shouldChangeCreasePercent = true;\n        updateCreasePercent();\n    });\n    setLink(\"#foldedIndicator\", function(){\n        globals.creasePercent = 1;\n        globals.shouldChangeCreasePercent = true;\n        updateCreasePercent();\n    });\n\n    function updateCreasePercent(){\n        // Convert actual folding value back to display percentage (0-100)\n        var displayVal = (globals.creasePercent / (globals.currentPatternMaxFolding / 100)) * 100;\n        creasePercentSlider.slider('value', displayVal);\n        creasePercentNavSlider.slider('value', displayVal);\n        creasePercentBottomSlider.slider('value', displayVal);\n        $('#currentFoldPercent').val(displayVal.toFixed(0));\n        $('#creasePercent>input').val(displayVal.toFixed(0));\n        $(\"#foldPercentSimple\").html(displayVal.toFixed(0));\n    }\n    updateCreasePercent();\n\n    // Check if slider controls should auto-animate when they become visible\n    setTimeout(function() {\n        if ($(\"#creasePercent\").is(':visible') && globals.threeView && globals.threeView.startSliderAnimation) {\n            console.log(' Slider controls detected as visible - considering auto animation');\n            // Only start if not already animating and in appropriate mode\n            if (!globals.sliderAutoAnimationEnabled && window.editMode !== false) {\n                console.log(' Starting immediate slider auto animation');\n                globals.threeView.startSliderAnimation(0, 100, 4000, true, 5000); // 4s animation, loop enabled, 5s pause\n            }\n        }\n    }, 1000); // Delay to ensure UI is fully rendered\n\n    function updateFoldingSliderMax(){\n        var currentMax = globals.currentPatternMaxFolding;\n        \n        // Update the actual slider maximum values but keep UI display as 0-100\n        creasePercentSlider.slider('option', 'max', currentMax);\n        creasePercentNavSlider.slider('option', 'max', currentMax);\n        creasePercentBottomSlider.slider('option', 'max', currentMax);\n        \n        // Adjust current value if it exceeds the new maximum\n        if (globals.creasePercent * 100 > currentMax) {\n            globals.creasePercent = currentMax / 100;\n            globals.shouldChangeCreasePercent = true;\n            updateCreasePercent();\n        }\n    }\n    \n    // Make function globally available\n    window.updateFoldingSliderMax = updateFoldingSliderMax;\n\n    function setDeltaT(val){\n        $(\"#deltaT\").html(val.toFixed(4));\n    }\n\n    setLink(\".loadFile\", function(e){\n        $(\"#fileSelector\").click();\n        $(e.target).blur();\n    });\n\n    setLink(\".demo\", function(e){\n        var $target = $(e.target);\n        var url = $target.data(\"url\");\n        if (url) {\n            // Check if we are loading a curved crease pattern.\n            // TODO: this should be removed eventually, replace with detecting beziers in svg.\n            if ($target.hasClass('cc')) {\n                globals.includeCurves = true;\n                globals.vertInt = 20;\n                globals.apprCurve = 0.2;\n            } else {\n                globals.includeCurves = false;\n            }\n            globals.vertTol = 3;\n            globals.importer.importDemoFile(url);\n        }\n    });\n\n    setLink(\"#setupAnimation\", function(){\n        $(\"#screenCaptureModal\").modal(\"hide\");\n        $(\"#animationSetupModal\").modal(\"show\");\n    });\n\n    setLink(\"#saveSVGScreenshot\", function(){\n        globals.threeView.saveSVG();\n    });\n\n    setLink(\"#saveSVG\", function(){\n        globals.pattern.saveSVG();\n    });\n    \n    setLink(\"#generateCellMap\", function(){\n        if (globals.cellColorizer) {\n            globals.cellColorizer.generateCellMapImage();\n        } else {\n            globals.warn(\"Cell colorizer not available.\");\n        }\n    });\n    \n    setLink(\"#generateTextureMappedCells\", function(){\n        if (globals.cellColorizer) {\n            globals.cellColorizer.generateTextureMappedCellImage();\n        } else {\n            globals.warn(\"Cell colorizer not available.\");\n        }\n    });\n    setLink(\"#addAnimationItem\", function(){\n        globals.videoAnimator.addItem();\n    });\n    setLink(\"#addDelay\", function(){\n        globals.videoAnimator.addDelay();\n    });\n    $(\"#animationSetupModal\").on('hidden.bs.modal', function (){\n        $(\"#screenCaptureModal\").modal(\"show\");\n    });\n\n    setCheckbox(\"#ambientOcclusion\", globals.ambientOcclusion, function(val){\n        globals.ambientOcclusion = val;\n    });\n\n    if (globals.colorMode == \"color\") $(\"#coloredMaterialOptions\").show();\n    else $(\"#coloredMaterialOptions\").hide();\n    if (globals.colorMode == \"axialStrain\") $(\"#axialStrainMaterialOptions\").show();\n    else $(\"#axialStrainMaterialOptions\").hide();\n    if (globals.colorMode == \"texture\") $(\"#textureMaterialOptions\").show();\n    else $(\"#textureMaterialOptions\").hide();\n\n    function setColorMode(val){\n        console.log(\"Setting color mode to:\", val);\n        \n        // Reset cell texture mode flag when switching away from texture mode\n        if (val !== \"texture\" && (globals.isCellGeneratedTexture || globals.useSimpleTextureMode)) {\n            if (globals.cellColorizer && globals.cellColorizer.resetCellTextureMode) {\n                globals.cellColorizer.resetCellTextureMode();\n            }\n        }\n        \n        globals.colorMode = val;\n        if (val == \"color\") {\n            $(\"#coloredMaterialOptions\").show();\n            $(\"#colorToggle>div\").addClass(\"active\");\n            $(\"#strainToggle>div\").removeClass(\"active\");\n        }\n        else {\n            $(\"#coloredMaterialOptions\").hide();\n            $(\"#colorToggle>div\").removeClass(\"active\");\n            $(\"#strainToggle>div\").addClass(\"active\");\n        }\n        if (val == \"axialStrain\") $(\"#axialStrainMaterialOptions\").show();\n        else $(\"#axialStrainMaterialOptions\").hide();\n        if (val == \"texture\") {\n            $(\"#textureMaterialOptions\").show();\n            $(\"#textureMaterialOptions\").removeClass(\"hide\");\n        } else {\n            $(\"#textureMaterialOptions\").hide();\n            $(\"#textureMaterialOptions\").addClass(\"hide\");\n        }\n        $(\".radio>input[value=\"+val+\"]\").prop(\"checked\", true);\n        globals.model.setMeshMaterial();\n    }\n    setRadio(\"colorMode\", globals.colorMode, setColorMode);\n    setLink(\"#colorToggle\", function(){\n        setColorMode(\"color\");\n    });\n    setLink(\"#strainToggle\", function(){\n        setColorMode(\"axialStrain\");\n    });\n\n    // Enhanced texture controls\n    $(\"#textureFileInput\").change(function(e) {\n        var files = e.target.files;\n        if (files && files.length > 0) {\n            console.log(\"Loading\", files.length, \"texture file(s)...\");\n            \n            // Convert FileList to Array for better handling\n            var fileArray = Array.from(files);\n            \n            globals.loadMultipleTextures(fileArray, function(textures) {\n                if (textures && textures.length > 0) {\n                    console.log(\"All textures loaded successfully:\", textures.length, \"textures\");\n                    console.log(\"Texture names:\", textures.map(t => t.name));\n                    \n                    setColorMode(\"texture\");\n                    \n                    // Note: Texture processing is now handled automatically by globals.js\n                    // via cellColorizer auto-generation, so we don't need complex manual processing here\n                    \n                    // Additional fallback: try manual execution if auto-generation didn't work\n                    setTimeout(function() {\n                        console.log(\" Controls: Checking if auto-generation completed...\");\n                        if (globals.isCellGeneratedTexture && globals.useSimpleTextureMode) {\n                            console.log(\" Auto-generation completed successfully\");\n                        } else {\n                            console.log(\" Auto-generation may not have completed, trying manual trigger...\");\n                            if (globals.cellColorizer && globals.cellColorizer.generateTextureMappedCellImage) {\n                                try {\n                                    globals.cellColorizer.generateTextureMappedCellImage(true); // Pass true for auto mode\n                                    console.log(\" Manual trigger successful\");\n                                } catch (error) {\n                                    console.warn(\" Manual trigger failed:\", error);\n                                }\n                            }\n                        }\n                    }, 2000); // 2 second delay\n                    \n                    // Show success message\n                    var statusElement = document.getElementById('compressionStatus');\n                    if (statusElement) {\n                        statusElement.textContent = \" \" + textures.length + \" texture\" + (textures.length > 1 ? \"s\" : \"\") + \" loaded and processed!\";\n                        setTimeout(function() {\n                            statusElement.textContent = \"\";\n                        }, 3000);\n                    }\n                } else {\n                    console.warn(\"No textures were loaded successfully\");\n                    var statusElement = document.getElementById('compressionStatus');\n                    if (statusElement) {\n                        statusElement.textContent = \" Failed to load any textures\";\n                        setTimeout(function() {\n                            statusElement.textContent = \"\";\n                        }, 3000);\n                    }\n                }\n            });\n        }\n        \n        // Clear the input so the same files can be selected again if needed\n        this.value = '';\n    });\n\n    $(\"#randomTextures\").change(function() {\n        globals.randomTextures = this.checked;\n        if (this.checked && globals.textureLibrary.length > 0 && globals.model) {\n            console.log(\"Manually enabling random texture assignment\");\n            globals.assignRandomTextures();\n            if (globals.colorMode === \"texture\") {\n                globals.model.setMeshMaterial();\n            }\n            \n            // Show confirmation\n            var statusElement = document.getElementById('compressionStatus');\n            if (statusElement) {\n                statusElement.textContent = \" Textures randomly redistributed!\";\n                setTimeout(function() {\n                    statusElement.textContent = \"\";\n                }, 2000);\n            }\n        }\n    });\n\n    setInput(\"#textureRepeat\", globals.textureRepeat, function(val){\n        globals.textureRepeat = val;\n        if (globals.faceTexture) {\n            globals.faceTexture.repeat.set(val, val);\n            globals.model.setMeshMaterial();\n        }\n    }, 0.1, 10);\n\n    setHexInput(\"#color1\", globals.color1, function(val){\n        globals.color1 = val;\n        globals.model.setMeshMaterial();\n    });\n    setHexInput(\"#color2\", globals.color2, function(val){\n        globals.color2 = val;\n        globals.model.setMeshMaterial();\n    });\n\n    setCheckbox(\"#edgesVisible\", globals.edgesVisible, function(val){\n        globals.edgesVisible = val;\n        if (globals.edgesVisible) $(\"#edgeVisOptions\").show();\n        else $(\"#edgeVisOptions\").hide();\n        globals.model.updateEdgeVisibility();\n    });\n    setCheckbox(\"#mtnsVisible\", globals.mtnsVisible, function(val){\n        globals.mtnsVisible = val;\n        globals.model.updateEdgeVisibility();\n    });\n    setCheckbox(\"#valleysVisible\", globals.valleysVisible, function(val){\n        globals.valleysVisible = val;\n        globals.model.updateEdgeVisibility();\n    });\n    setCheckbox(\"#panelsVisible\", globals.panelsVisible, function(val){\n        globals.panelsVisible = val;\n        globals.model.updateEdgeVisibility();\n    });\n    setCheckbox(\"#passiveEdgesVisible\", globals.passiveEdgesVisible, function(val){\n        globals.passiveEdgesVisible = val;\n        globals.model.updateEdgeVisibility();\n    });\n    setCheckbox(\"#boundaryEdgesVisible\", globals.boundaryEdgesVisible, function(val){\n        globals.boundaryEdgesVisible = val;\n        globals.model.updateEdgeVisibility();\n    });\n\n    setCheckbox(\"#meshVisible\", globals.meshVisible, function(val){\n        globals.meshVisible = val;\n        globals.model.updateMeshVisibility();\n        if (globals.meshVisible) $(\"#meshMaterialOptions\").show();\n        else $(\"#meshMaterialOptions\").hide();\n    });\n\n    setLink(\"#aboutError\", function(){\n        $(\"#aboutErrorModal\").modal(\"show\");\n    });\n    setLink(\"#aboutStiffness\", function(){\n        $(\"#aboutStiffnessModal\").modal(\"show\");\n    });\n    setLink(\"#aboutDynamicSim\", function(){\n        $(\"#aboutDynamicSimModal\").modal(\"show\");\n    });\n    setLink(\"#aboutStaticSim\", function(){\n        $(\"#aboutStaticSimModal\").modal(\"show\");\n    });\n    setLink(\"#aboutRigidSim\", function(){\n        $(\"#aboutRigidSimModal\").modal(\"show\");\n    });\n    setLink(\"#aboutAxialStrain\", function(){\n        $(\"#aboutAxialStrainModal\").modal(\"show\");\n    });\n    setLink(\"#aboutVR\", function(){\n        $(\"#aboutVRmodal\").modal(\"show\");\n    });\n\n    setCheckbox(\"#vrEnabled\", globals.vrEnabled, function(val){\n        globals.vrEnabled = val;\n    });\n\n    setLink(\"#start\", function(){\n        $(\"#pause\").css('display', 'inline-block');\n        $(\"#reset\").css('display', 'inline-block');\n        $(\"#start\").hide();\n        $(\"#stepForwardOptions\").hide();\n        globals.model.resume();\n    });\n    setLink(\"#pause\", function(){\n        $(\"#start\").css('display', 'inline-block');\n        $(\"#stepForwardOptions\").css('display', 'inline-block');\n        $(\"#pause\").hide();\n        globals.model.pause();\n    });\n    setLink(\"#reset\", function(){\n        if (!globals.simulationRunning) $(\"#reset\").hide();\n        globals.model.reset();\n    });\n    setLink(\"#resetBottom\", function(){\n        globals.model.reset();\n    });\n    setLink(\"#stepForward\", function(){\n        globals.model.step(globals.numSteps);\n        $(\"#reset\").css('display', 'inline-block');\n    });\n\n    setInput(\"#strainClip\", globals.strainClip, function(val){\n        globals.strainClip = val;\n    }, 0.0001, 100);\n\n    setCheckbox($(\"#userInteractionEnabled\"), globals.userInteractionEnabled, enableInteraction);\n    function enableInteraction(val){\n        globals.userInteractionEnabled = val;\n        $(\"#userInteractionEnabled\").prop('checked', val);\n        if (val) {\n            $(\"#grabToggle>div\").addClass(\"active\");\n            $(\"#orbitToggle>div\").removeClass(\"active\");\n            globals.rotateModel = null;\n            globals.threeView.resetModel();\n        } else {\n            $(\"#grabToggle>div\").removeClass(\"active\");\n            $(\"#orbitToggle>div\").addClass(\"active\");\n            globals.UI3D.hideHighlighters();\n        }\n    }\n    setLink(\"#grabToggle\", function(){\n        enableInteraction(true);\n    });\n    setLink(\"#orbitToggle\", function(){\n        enableInteraction(false);\n    });\n\n    setCheckbox($(\"#foldUseAngles\"), globals.foldUseAngles, function(val){\n        globals.foldUseAngles = val;\n    });\n\n    setLink(\"#shouldCenterGeo\", function(){\n        globals.shouldCenterGeo = true;\n    });\n\n    setInput(\".numStepsPerRender\", globals.numSteps, function(val){\n        globals.numSteps = val;\n    }, 1);\n\n    setLink(\"#aboutUserInteraction\", function(){\n        $('#aboutUserInteractionModal').modal('show');\n    });\n\n    setLink(\"#showAdvancedOptions\", function(){\n        $(\"#basicUI\").hide();\n        $(\"#controlsBottom\").animate({\n            bottom: \"-140px\"\n        }, function(){\n            $(\"#controls\").animate({\n            right: 0\n            });\n            $(\"#controlsLeft\").animate({\n                left: 0\n            });\n        });\n    });\n    setLink(\"#hideAdvancedOptions\", function(){\n        $(\"#controls\").animate({\n            right: \"-430px\"\n        }, function(){\n            $(\"#basicUI\").fadeIn();\n            $(\"#controlsBottom\").animate({\n                bottom: 0\n            });\n        });\n        $(\"#controlsLeft\").animate({\n            left: \"-420px\"\n        });\n    });\n\n    setLink(\"#exampleMenuButton\", function(){\n        $(\"#helper\").hide();\n    });\n\n\n    function setButtonGroup(id, callback){\n        $(id+\" a\").click(function(e){\n            e.preventDefault();\n            var $target = $(e.target);\n            var val = $target.data(\"id\");\n            if (val) {\n                $(id+\" span.dropdownLabel\").html($target.html());\n                callback(val);\n            }\n        });\n    }\n\n    function setLink(id, callback){\n        $(id).click(function(e){\n            e.preventDefault();\n            callback(e);\n        });\n    }\n\n    function setRadio(name, val, callback){\n        $(\"input[name=\" + name + \"]\").on('change', function() {\n            var state = $(\"input[name=\"+name+\"]:checked\").val();\n            callback(state);\n        });\n        $(\".radio>input[value=\"+val+\"]\").prop(\"checked\", true);\n    }\n\n    function setInput(id, val, callback, min, max){\n        var $input = $(id);\n        $input.change(function(){\n            var $this = $(this);\n            if ($input.length == 1) $this = $input;//probably not necessary\n            var val = $this.val();\n            if ($this.hasClass(\"int\")){\n                if (isNaN(parseInt(val))) return;\n                val = parseInt(val);\n            } else if ($this.hasClass(\"text\")){\n            } else {\n                if (isNaN(parseFloat(val))) return;\n                val = parseFloat(val);\n            }\n            if (min !== undefined && val < min) val = min;\n            if (max !== undefined && val > max) val = max;\n            $input.val(val);\n            callback(val);\n        });\n        $input.val(val);\n    }\n\n    function setHexInput(id, val, callback){\n        var $input = $(id);\n        $input.css({\"border-color\": \"#\" + val});\n        $input.change(function(){\n            var val = $input.val();\n            var validHex  = /(^[0-9A-F]{6}$)|(^[0-9A-F]{3}$)/i.test(val);\n            if (!validHex) return;\n            $input.val(val);\n            $input.css({\"border-color\": \"#\" + val});\n            callback(val);\n        });\n        $input.val(val);\n    }\n\n    function setCheckbox(id, state, callback){\n        var $input  = $(id);\n        $input.on('change', function () {\n            if ($input.is(\":checked\")) callback(true);\n            else callback(false);\n        });\n        $input.prop('checked', state);\n    }\n\n    function setSlider(id, val, min, max, incr, callback, callbackOnStop){\n        var slider = $(id).slider({\n            orientation: 'horizontal',\n            range: false,\n            value: val,\n            min: min,\n            max: max,\n            step: incr\n        });\n        slider.on(\"slide\", function(e, ui){\n            var val = ui.value;\n            callback(val);\n        });\n        slider.on(\"slidestop\", function(){\n            var val = slider.slider('value');\n            if (callbackOnStop) callbackOnStop(val);\n        });\n        return slider;\n    }\n\n    function setLogSliderInput(id, val, min, max, incr, callback){\n\n        var scale = (Math.log(max)-Math.log(min)) / (max-min);\n\n        var slider = $(id+\">div\").slider({\n            orientation: 'horizontal',\n            range: false,\n            value: (Math.log(val)-Math.log(min)) / scale + min,\n            min: min,\n            max: max,\n            step: incr\n        });\n\n        var $input = $(id+\">input\");\n        $input.change(function(){\n            var val = $input.val();\n            if ($input.hasClass(\"int\")){\n                if (isNaN(parseInt(val))) return;\n                val = parseInt(val);\n            } else {\n                if (isNaN(parseFloat(val))) return;\n                val = parseFloat(val);\n            }\n\n            var min = slider.slider(\"option\", \"min\");\n            if (val < min) val = min;\n            if (val > max) val = max;\n            $input.val(val);\n            slider.slider('value', (Math.log(val)-Math.log(min)) / scale + min);\n            callback(val, id);\n        });\n        $input.val(val);\n        slider.on(\"slide\", function(e, ui){\n            var val = ui.value;\n            val = Math.exp(Math.log(min) + scale*(val-min));\n            $input.val(val.toFixed(4));\n            callback(val, id);\n        });\n    }\n\n    function setSliderInputVal(id, val){\n        $(id+\">div\").slider({value:val});\n        var $input = $(id+\">input\");\n        $input.val(val);\n    }\n\n    function setSliderInput(id, val, min, max, incr, callback){\n\n        var slider = $(id+\">div\").slider({\n            orientation: 'horizontal',\n            range: false,\n            value: val,\n            min: min,\n            max: max,\n            step: incr\n        });\n\n        var $input = $(id+\">input\");\n        $input.change(function(){\n            var val = $input.val();\n            if ($input.hasClass(\"int\")){\n                if (isNaN(parseInt(val))) return;\n                val = parseInt(val);\n            } else {\n                if (isNaN(parseFloat(val))) return;\n                val = parseFloat(val);\n            }\n\n            var min = slider.slider(\"option\", \"min\");\n            if (val < min) val = min;\n            if (val > max) val = max;\n            $input.val(val);\n            slider.slider('value', val);\n            callback(val);\n        });\n        $input.val(val);\n        slider.on(\"slide\", function(e, ui){\n            var val = ui.value;\n            $input.val(val);\n            callback(val);\n        });\n        return slider;\n    }\n\n    return {\n        setDeltaT: setDeltaT,\n        updateCreasePercent: updateCreasePercent,\n        setSliderInputVal: setSliderInputVal,\n        \n        // Start slider animation when controls become visible\n        startSliderAutoAnimation: function() {\n            if (globals.threeView && globals.threeView.startSliderAnimation) {\n                console.log(' Controls visible - starting slider auto animation');\n                globals.threeView.startSliderAnimation(0, 100, 4000, true, 5000); // 4s animation, loop enabled, 5s pause\n            }\n        }\n    }\n}</script> <script type=\"text/javascript\">function initThreeView(i){function t(){D.zoom=7,D.updateProjectionMatrix(),D.position.x=0,D.position.y=0,D.position.z=10,A&&A.reset(new THREE.Vector3(0,0,1))}function n(i){A.reset(new THREE.Vector3(i,0,0))}function e(i){A.reset(new THREE.Vector3(0,i,0))}function o(i){A.reset(new THREE.Vector3(0,0,i))}function a(){A.reset(new THREE.Vector3(1,1,1))}function l(){i.multiAxisRotation.x=2*(Math.random()-.5)*(.003+.007*Math.random()),i.multiAxisRotation.y=2*(Math.random()-.5)*(.003+.007*Math.random()),i.multiAxisRotation.z=2*(Math.random()-.5)*(.003+.007*Math.random()),console.log(\" New random rotation speeds:\",{x:i.multiAxisRotation.x.toFixed(4),y:i.multiAxisRotation.y.toFixed(4),z:i.multiAxisRotation.z.toFixed(4)})}function s(){console.log(\"starting animation\"),E.animate(m)}function r(){i.simulationRunning=!1,console.log(\"pausing simulation\")}function g(){console.log(\"starting simulation\"),i.simulationRunning=!0}function d(){if(i.vrEnabled)return void i.vive.render();if(E.render(S,D),i.capturer){if(\"png\"==i.capturer){return i.threeView.renderer.domElement.toBlob(function(t){saveAs(t,i.screenRecordFilename+\".png\")},\"image/png\"),i.capturer=null,i.shouldScaleCanvas=!1,i.shouldAnimateFoldPercent=!1,void i.threeView.onWindowResize()}w.html(\"( \"+ ++i.capturerFrames+\" frames  at \"+i.currentFPS+\"fps )\"),i.capturer.capture(E.domElement)}}function m(){if(i.autoRotateEnabled){var t=performance.now();null===i.autoRotateStartTime&&(i.autoRotateStartTime=t,i.lastRotationChangeTime=t,i.randomRotationEnabled&&l());var n=t-i.autoRotateStartTime;if(n>=i.autoRotateWaitTime){if(i.randomRotationEnabled&&i.lastRotationChangeTime){t-i.lastRotationChangeTime>=i.rotationChangeInterval&&(l(),i.lastRotationChangeTime=t)}b.rotateX(i.multiAxisRotation.x),b.rotateY(i.multiAxisRotation.y),b.rotateZ(i.multiAxisRotation.z)}}if(i.sliderAutoAnimationEnabled){var t=performance.now();if(\"animating\"===i.sliderAnimationState){null===i.sliderAnimationStartTime&&(i.sliderAnimationStartTime=t);var n=t-i.sliderAnimationStartTime,e=Math.min(n/i.sliderAnimationDuration,1),o=.5-Math.cos(e*Math.PI)/2,a=i.sliderAnimationStartValue+(i.sliderAnimationEndValue-i.sliderAnimationStartValue)*o,s=a/100*(i.currentPatternMaxFolding/100);i.creasePercent=s,i.shouldChangeCreasePercent=!0,i.controls&&i.controls.updateCreasePercent&&i.controls.updateCreasePercent(),e>=1&&(console.log(\" Slider animation phase completed, starting pause\"),i.sliderAnimationState=\"pausing\",i.sliderAnimationPauseStartTime=t,i.sliderAnimationStartTime=null)}else if(\"pausing\"===i.sliderAnimationState){null===i.sliderAnimationPauseStartTime&&(i.sliderAnimationPauseStartTime=t);var r=t-i.sliderAnimationPauseStartTime;if(r>=i.sliderAnimationPauseTime)if(console.log(\" Pause completed, reversing animation direction\"),i.sliderAnimationLoop){var g=i.sliderAnimationStartValue;i.sliderAnimationStartValue=i.sliderAnimationEndValue,i.sliderAnimationEndValue=g,i.sliderAnimationDirection*=-1,i.sliderAnimationState=\"animating\",i.sliderAnimationPauseStartTime=null,i.sliderAnimationStartTime=null,console.log(\" Starting next animation phase: \"+i.sliderAnimationStartValue+\"  \"+i.sliderAnimationEndValue)}else console.log(\" Slider animation loop completed\"),i.sliderAutoAnimationEnabled=!1,i.sliderAnimationStartTime=null,i.sliderAnimationPauseStartTime=null}}if(null!==i.rotateModel&&(\"x\"==i.rotateModel&&b.rotateX(i.rotationSpeed),\"y\"==i.rotateModel&&b.rotateY(i.rotationSpeed),\"z\"==i.rotateModel&&b.rotateZ(i.rotationSpeed)),i.needsSync&&i.model.sync(),i.simNeedsSync&&i.model.syncSolver(),i.simulationRunning&&i.model.step(),i.vrEnabled)return void d();A.update(),d()}function h(i){b.add(i)}function u(){if(i.vrEnabled)return void i.warn(\"Can't resize window when in VR mode.\");D.aspect=window.innerWidth/window.innerHeight,D.updateProjectionMatrix();var t=1;i.shouldScaleCanvas&&(t=i.capturerScale),E.setSize(t*window.innerWidth,t*window.innerHeight),A.handleResize()}function c(i){A.enabled=i,A.enableRotate=i}function f(){b.rotation.set(0,0,0)}function p(i){console.log(\" Background color change ignored - using transparent background\")}function R(){console.log(\" Updating lighting settings\"),L.frontMain&&(L.frontMain.intensity=i.lighting.frontMain.intensity,L.frontMain.position.set(i.lighting.frontMain.position.x,i.lighting.frontMain.position.y,i.lighting.frontMain.position.z)),L.backLight&&(L.backLight.intensity=i.lighting.backLight.intensity,L.backLight.position.set(i.lighting.backLight.position.x,i.lighting.backLight.position.y,i.lighting.backLight.position.z)),L.sideLeft&&(L.sideLeft.intensity=i.lighting.sideLeft.intensity,L.sideLeft.position.set(i.lighting.sideLeft.position.x,i.lighting.sideLeft.position.y,i.lighting.sideLeft.position.z)),L.sideRight&&(L.sideRight.intensity=i.lighting.sideRight.intensity,L.sideRight.position.set(i.lighting.sideRight.position.x,i.lighting.sideRight.position.y,i.lighting.sideRight.position.z)),L.frontDetail1&&(L.frontDetail1.intensity=i.lighting.frontDetail1.intensity,L.frontDetail1.position.set(i.lighting.frontDetail1.position.x,i.lighting.frontDetail1.position.y,i.lighting.frontDetail1.position.z)),L.frontDetail2&&(L.frontDetail2.intensity=i.lighting.frontDetail2.intensity,L.frontDetail2.position.set(i.lighting.frontDetail2.position.x,i.lighting.frontDetail2.position.y,i.lighting.frontDetail2.position.z)),L.ambient&&(L.ambient.intensity=i.lighting.ambient.intensity),console.log(\" Lighting settings updated\")}function y(){return{frontMain:{intensity:L.frontMain?L.frontMain.intensity:0,position:L.frontMain?L.frontMain.position:{x:0,y:0,z:0}},backLight:{intensity:L.backLight?L.backLight.intensity:0,position:L.backLight?L.backLight.position:{x:0,y:0,z:0}},sideLeft:{intensity:L.sideLeft?L.sideLeft.intensity:0,position:L.sideLeft?L.sideLeft.position:{x:0,y:0,z:0}},sideRight:{intensity:L.sideRight?L.sideRight.intensity:0,position:L.sideRight?L.sideRight.position:{x:0,y:0,z:0}},frontDetail1:{intensity:L.frontDetail1?L.frontDetail1.intensity:0,position:L.frontDetail1?L.frontDetail1.position:{x:0,y:0,z:0}},frontDetail2:{intensity:L.frontDetail2?L.frontDetail2.intensity:0,position:L.frontDetail2?L.frontDetail2.position:{x:0,y:0,z:0}},ambient:{intensity:L.ambient?L.ambient.intensity:0}}}var A,S=new THREE.Scene,b=new THREE.Object3D,D=new THREE.PerspectiveCamera(60,window.innerWidth/window.innerHeight,.1,500),E=new THREE.WebGLRenderer({antialias:!0,alpha:!0}),L={frontMain:null,backLight:null,sideLeft:null,sideRight:null,frontDetail1:null,frontDetail2:null,ambient:null};!function(){var n=$(\"#threeContainer\");E.setPixelRatio(window.devicePixelRatio),E.setSize(window.innerWidth,window.innerHeight),E.setClearColor(0,0),n.append(E.domElement),E.domElement.style.background=\"transparent\",E.domElement.style.backgroundColor=\"transparent\",S.background=null,b.rotation.x=Math.PI/2,S.add(b),console.log(\" ThreeView: Initializing lighting with globals settings:\"),console.log(\"- frontMain intensity:\",i.lighting.frontMain.intensity),console.log(\"- frontDetail1 intensity:\",i.lighting.frontDetail1.intensity),console.log(\"- frontDetail2 intensity:\",i.lighting.frontDetail2.intensity),console.log(\"- ambient intensity:\",i.lighting.ambient.intensity),L.frontMain=new THREE.DirectionalLight(16777215,i.lighting.frontMain.intensity),L.frontMain.position.set(i.lighting.frontMain.position.x,i.lighting.frontMain.position.y,i.lighting.frontMain.position.z),S.add(L.frontMain),L.backLight=new THREE.DirectionalLight(16777215,i.lighting.backLight.intensity),L.backLight.position.set(i.lighting.backLight.position.x,i.lighting.backLight.position.y,i.lighting.backLight.position.z),S.add(L.backLight),L.sideLeft=new THREE.DirectionalLight(16777215,i.lighting.sideLeft.intensity),L.sideLeft.position.set(i.lighting.sideLeft.position.x,i.lighting.sideLeft.position.y,i.lighting.sideLeft.position.z),S.add(L.sideLeft),L.sideRight=new THREE.DirectionalLight(16777215,i.lighting.sideRight.intensity),L.sideRight.position.set(i.lighting.sideRight.position.x,i.lighting.sideRight.position.y,i.lighting.sideRight.position.z),S.add(L.sideRight),L.frontDetail1=new THREE.DirectionalLight(16777215,i.lighting.frontDetail1.intensity),L.frontDetail1.position.set(i.lighting.frontDetail1.position.x,i.lighting.frontDetail1.position.y,i.lighting.frontDetail1.position.z),S.add(L.frontDetail1),L.frontDetail2=new THREE.DirectionalLight(16777215,i.lighting.frontDetail2.intensity),L.frontDetail2.position.set(i.lighting.frontDetail2.position.x,i.lighting.frontDetail2.position.y,i.lighting.frontDetail2.position.z),S.add(L.frontDetail2),L.ambient=new THREE.AmbientLight(16777215,i.lighting.ambient.intensity),S.add(L.ambient),console.log(\" ThreeView: Lighting initialization completed\"),S.add(D),t(),A=new THREE.TrackballControls(D,E.domElement),A.rotateSpeed=4,A.zoomSpeed=15,A.noPan=!0,A.staticMoving=!0,A.dynamicDampingFactor=.3,A.minDistance=1,A.maxDistance=30,d()}();var w=$(\"#stopRecord>span\");return{sceneAddModel:h,onWindowResize:u,startAnimation:s,startSimulation:g,pauseSimulation:r,enableControls:c,scene:S,camera:D,renderer:E,modelWrapper:b,setCameraX:n,setCameraY:e,setCameraZ:o,setCameraIso:a,resetModel:f,resetCamera:t,setBackgroundColor:p,startAutoRotation:function(t,n){t=void 0===t||t,n=void 0!==n?n:8e3,console.log(\" Starting auto rotation animation\"+(t?\" with random directions (change every \"+n+\"ms)\":\"\")),i.autoRotateEnabled=!0,i.autoRotateStartTime=null,i.randomRotationEnabled=t,i.rotationChangeInterval=n,i.lastRotationChangeTime=null},stopAutoRotation:function(){console.log(\" Stopping auto rotation animation\"),i.autoRotateEnabled=!1,i.autoRotateStartTime=null,i.lastRotationChangeTime=null},startSliderAnimation:function(t,n,e,o,a){t=void 0!==t?t:0,n=void 0!==n?n:100,e=void 0!==e?e:4e3,o=void 0===o||o,a=void 0!==a?a:5e3,console.log(\" Starting slider animation from \"+t+\" to \"+n+\" over \"+e+\"ms\"+(o?\" (looping with \"+a+\"ms pauses)\":\"\")),i.sliderAutoAnimationEnabled=!0,i.sliderAnimationStartTime=null,i.sliderAnimationStartValue=t,i.sliderAnimationEndValue=n,i.sliderAnimationDuration=e,i.sliderAnimationLoop=o,i.sliderAnimationPauseTime=a,i.sliderAnimationState=\"animating\",i.sliderAnimationPauseStartTime=null,i.sliderAnimationDirection=t<n?1:-1},stopSliderAnimation:function(){console.log(\" Stopping slider animation\"),i.sliderAutoAnimationEnabled=!1,i.sliderAnimationStartTime=null,i.sliderAnimationPauseStartTime=null,i.sliderAnimationState=\"animating\"},generateRandomRotationSpeeds:l,setRandomRotationInterval:function(t){i.rotationChangeInterval=t,console.log(\" Set random rotation change interval to \"+t+\"ms\")},updateLighting:R,getLightingSettings:y}}</script> <script type=\"text/javascript\">function initGlobals(){function e(e){R.creasePercent=e,e*=100,$(\"#creasePercent>div\").slider({value:e}),$(\"#creasePercent>input\").val(e.toFixed(0)),$(\"#creasePercentNav>div\").slider({value:e}),$(\"#creasePercentBottom>div\").slider({value:e})}function t(e){R.currentPatternMaxFolding=e,\"function\"==typeof updateFoldingSliderMax&&updateFoldingSliderMax()}function n(e){\"\"!=$(\"#warningMessage\").html()?$(\"#warningMessage\").append(\"<br/><hr>\"+e):$(\"#warningMessage\").html(e),$(\"#warningModal\").hasClass(\"show\")||$(\"#warningModal\").modal(\"show\")}function o(){return 0==$(\"#svgViewer>svg\").length}function a(e,t,n){function o(e){$(\"#compressionStatus\").text(e)}var a=1024*t*1024;if(e.size<=a)return console.log(\"File size OK:\",Math.round(e.size/1024)+\"KB\"),o(\"\"),void n(e);o(\"Compressing \"+e.name+\" (\"+Math.round(e.size/1024/1024)+\"MB)...\"),console.log(\"Compressing large image:\",e.name,\"from\",Math.round(e.size/1024/1024)+\"MB\");var i=document.createElement(\"canvas\"),r=i.getContext(\"2d\"),l=new Image;l.onload=function(){function t(){o(\"Optimizing \"+e.name+\" (attempt \"+(m+1)+\")...\"),i.toBlob(function(i){if(i){var r=i.size/1024/1024;if(console.log(\"Compression attempt\",m+1,\"- Size:\",Math.round(1e3*r)/1e3+\"MB\",\"Quality:\",c),i.size<=a||m>=f||c<=.3){var l=new File([i],e.name,{type:i.type||\"image/jpeg\",lastModified:Date.now()}),s=Math.round(100*(1-l.size/e.size));o(\" Compressed \"+e.name+\" by \"+s+\"% (\"+Math.round(e.size/1024/1024*100)/100+\"MB  \"+Math.round(l.size/1024/1024*100)/100+\"MB)\"),console.log(\"Compression completed:\",\"Original:\",Math.round(e.size/1024/1024*100)/100+\"MB\",\"Compressed:\",Math.round(l.size/1024/1024*100)/100+\"MB\",\"Reduction:\",s+\"%\"),setTimeout(function(){o(\"\")},3e3),n(l)}else m++,c*=.8,t()}else console.error(\"Failed to create compressed blob\"),o(\" Compression failed, using original file\"),setTimeout(function(){o(\"\")},3e3),n(e)},\"image/jpeg\",c)}var s=Math.sqrt(a/e.size),g=Math.floor(l.width*s),d=Math.floor(l.height*s);g=Math.max(g,256),d=Math.max(d,256);if(g>1024||d>1024){var u=1024/Math.max(g,d);g=Math.floor(g*u),d=Math.floor(d*u)}i.width=g,i.height=d,o(\"Resizing \"+e.name+\" to \"+g+\"\"+d+\"...\"),console.log(\"Resizing from\",l.width+\"x\"+l.height,\"to\",g+\"x\"+d),r.drawImage(l,0,0,g,d);var c=.8,m=0,f=5;t()},l.onerror=function(){console.error(\"Failed to load image for compression\"),o(\" Compression failed, using original file\"),setTimeout(function(){o(\"\")},3e3),n(e)};var s=new FileReader;s.onload=function(e){l.src=e.target.result},s.onerror=function(){console.error(\"Failed to read file for compression\"),o(\" Compression failed, using original file\"),setTimeout(function(){o(\"\")},3e3),n(e)},s.readAsDataURL(e)}function i(e,t){e.size>3145728&&(e.size>10485760?console.log(\"Very large texture file (\"+Math.round(e.size/1024/1024)+\"MB). Compressing to improve performance...\"):console.log(\"Large texture file (\"+Math.round(e.size/1024/1024)+\"MB). Compressing for better performance...\")),e.size>3145728?R.compressImage(e,3,function(e){r(e,t)}):r(e,t)}function r(e,t){function n(e){o||(o=!0,t&&t(e))}var o=!1,a=new FileReader;a.onload=function(t){(new THREE.TextureLoader).load(t.target.result,function(t){t.wrapS=THREE.RepeatWrapping,t.wrapT=THREE.RepeatWrapping,t.repeat.set(R.textureRepeat,R.textureRepeat),t.flipY=!1,t.generateMipmaps=!0,t.minFilter=THREE.LinearFilter,t.magFilter=THREE.LinearFilter,t.name=e.name,t.image?(t.image.crossOrigin=\"anonymous\",t.image.complete?(console.log(\" Texture image already complete:\",t.name,t.image.width+\"x\"+t.image.height),R.faceTexture=t,n(t)):(t.image.onload=function(){console.log(\" Texture image loaded completely:\",t.name,t.image.width+\"x\"+t.image.height),R.faceTexture=t,n(t)},t.image.onerror=function(){console.error(\" Failed to load texture image:\",t.name),n(null)})):(console.error(\" Texture has no image data:\",t.name),n(null))},function(e){console.log(\"Loading texture progress:\",e)},function(t){console.error(\" Error loading texture:\",e.name,t),R.warn(\"Failed to load texture file: \"+e.name),n(null)})},a.onerror=function(t){console.error(\" Error reading file:\",e.name,t),R.warn(\"Failed to read texture file: \"+e.name),n(null)},a.readAsDataURL(e)}function l(e,t){function n(e){var t=document.getElementById(\"compressionStatus\");t&&(t.textContent=e)}function o(e){if(e>=r){R.textureLibrary=[];for(var t=0;t<s.length;t++)s[t]&&R.textureLibrary.push(s[t]);return void a()}var n=g[e];if(![\"image/png\",\"image/jpeg\",\"image/jpg\",\"image/avif\",\"image/webp\",\"image/gif\"].includes(n.type))return console.warn(\"Unsupported file type:\",n.type,\"for file:\",n.name),l.push(n.name+\" (unsupported format)\"),s[e]=null,void o(e+1);console.log(\" Loading texture \"+(e+1)+\"/\"+r+\":\",n.name),i(n,function(t){if(t){for(var a=!1,i=0;i<e;i++)if(s[i]&&s[i].name===t.name){a=!0;break}a?(console.log(\" Skipping duplicate texture:\",t.name),s[e]=null):(s[e]=t,console.log(\" Loaded texture \"+(e+1)+\":\",t.name),console.log(\"   - Image dimensions:\",t.image?t.image.width+\"x\"+t.image.height:\"No image\"))}else l.push(n.name+\" (load failed)\"),console.error(\" Failed to load texture:\",n.name),s[e]=null;o(e+1)})}function a(){var e=R.textureLibrary.length,o=l.length;console.log(\" Texture loading completed:\",e,\"successful,\",o,\"failed\"),console.log(\" Texture library contents:\");for(var a=0;a<R.textureLibrary.length;a++){var i=R.textureLibrary[a];console.log(\"- Index \"+a+\":\",i?i.name:\"NULL\",i&&i.image?\"(\"+i.image.width+\"x\"+i.image.height+\")\":\"(no image)\")}if(console.log(\" Checking conditions: textureLibrary.length =\",R.textureLibrary.length,\"model exists =\",!!R.model),R.textureLibrary.length>=1?(console.log(\" Textures detected, but skipping immediate assignment (waiting for simple texture generation)\"),R.randomTextures=!0,$(\"#randomTextures\").prop(\"checked\",!0)):(console.log(\" Conditions not met for random textures\"),R.textureLibrary.length<1&&console.log(\"   - No textures in library\")),!R.fold||!R.fold.faces_vertices)return console.warn(\" No origami pattern loaded. Please import an SVG pattern first for textures to display properly.\"),n(\" Load an origami pattern first for multi-texture support\"),void(t&&t(R.textureLibrary));if(o>0?(console.warn(\"Failed to load:\",l.join(\", \")),n(\" \"+e+\" loaded, \"+o+\" failed\")):n(\" \"+e+\" image\"+(e>1?\"s\":\"\")+\" loaded successfully\"),console.log(\" Auto-generating simple texture for loaded textures...\"),R.cellColorizer&&R.cellColorizer.generateTextureMappedCellImage){var r=!1;if(R.fold&&R.fold.vertices_coords&&R.fold.faces_vertices)r=!0,console.log(\" Using existing fold data for simple texture\");else if(R.pattern&&R.pattern.getFoldData)try{var s=R.pattern.getFoldData(!1);s&&s.vertices_coords&&s.faces_vertices&&(r=!0,console.log(\" Retrieved fold data from pattern for simple texture\"))}catch(e){console.warn(\" Failed to get fold data from pattern:\",e.message)}else if(R.curvedFolding&&R.curvedFolding.getFoldData)try{var s=R.curvedFolding.getFoldData(!1);s&&s.vertices_coords&&s.faces_vertices&&(r=!0,console.log(\" Retrieved fold data from curvedFolding for simple texture\"))}catch(e){console.warn(\" Failed to get fold data from curvedFolding:\",e.message)}if(r)try{console.log(\" Executing simple texture generation...\"),R.cellColorizer.generateTextureMappedCellImage(!0),console.log(\" Simple texture applied successfully\")}catch(e){console.error(\" Failed to generate simple texture:\",e),console.log(\" Falling back to first texture only\"),R.faceTexture=R.textureLibrary[0],R.useSimpleTextureMode=!0,R.isCellGeneratedTexture=!1,R.model&&R.model.setMeshMaterial&&R.model.setMeshMaterial()}else console.warn(\" No fold data available, using basic single texture\"),R.faceTexture=R.textureLibrary[0],R.useSimpleTextureMode=!0,R.isCellGeneratedTexture=!1,R.model&&R.model.setMeshMaterial&&R.model.setMeshMaterial()}else console.warn(\" cellColorizer not available, using basic single texture\"),R.faceTexture=R.textureLibrary[0],R.useSimpleTextureMode=!0,R.isCellGeneratedTexture=!1,R.model&&R.model.setMeshMaterial&&R.model.setMeshMaterial();setTimeout(function(){n(\"\")},3e3),t&&t(R.textureLibrary)}R.textureLibrary=[],R.faceTextureMapping={};var r=e.length,l=[],s=[];if(0===r)return void(t&&t([]));console.log(\" Loading\",r,\"texture files in deterministic order...\");var g=Array.from(e).sort(function(e,t){return e.name.localeCompare(t.name)});console.log(\" Sorted file order:\");for(var d=0;d<g.length;d++)console.log(\"  \"+d+\": \"+g[d].name);n(\" Loading \"+r+\" image\"+(r>1?\"s\":\"\")+\" in order...\");var s=new Array(r);o(0)}function s(){var e=$(\"#textureList\");e.empty(),R.textureLibrary.forEach(function(t,n){if(t){var o=$('<div class=\"texture-item\" style=\"margin: 5px 0; padding: 5px; border: 1px solid #ccc; cursor: pointer;\"><span style=\"font-weight: bold;\">Texture '+(n+1)+\":</span> \"+t.name+'<button class=\"btn btn-xs btn-danger\" style=\"float: right; margin-left: 10px;\" onclick=\"removeTexture('+n+')\">Remove</button><button class=\"btn btn-xs btn-primary\" style=\"float: right;\" onclick=\"selectTexture('+n+')\">Select</button></div>');n===R.selectedTexture&&o.css(\"background-color\",\"#e6f3ff\"),e.append(o)}})}function g(e){e>=0&&e<R.textureLibrary.length&&R.textureLibrary[e]&&(R.selectedTexture=e,R.faceTexture=R.textureLibrary[e],s(),R.model&&R.model.setMeshMaterial())}function d(e){if(e>=0&&e<R.textureLibrary.length){R.textureLibrary.splice(e,1);var t={};Object.keys(R.faceTextureMapping).forEach(function(n){var o=R.faceTextureMapping[n];o>e?t[n]=o-1:o<e&&(t[n]=o)}),R.faceTextureMapping=t,R.selectedTexture>=R.textureLibrary.length&&(R.selectedTexture=Math.max(0,R.textureLibrary.length-1)),R.textureLibrary.length>0?R.faceTexture=R.textureLibrary[R.selectedTexture]:R.faceTexture=null,s(),R.model&&R.model.setMeshMaterial()}}function u(){if(console.log(\" assignRandomTextures called at:\",(new Date).toISOString()),console.log(\" Using seed:\",R.randomSeed,\"| Seeded random enabled:\",R.useSeededRandom),R.randomFunction&&R.useSeededRandom||(console.log(\" Re-initializing random seed before texture assignment\"),R.initializeRandomSeed(R.randomSeed)),!R.model||0===R.textureLibrary.length)return void console.warn(\"Cannot assign random textures: missing model or textures\");console.log(\" Pre-assignment texture library verification:\"),console.log(\"- Library length:\",R.textureLibrary.length);for(var e=0;e<R.textureLibrary.length;e++){var t=R.textureLibrary[e];console.log(\"  [\"+e+\"]\",t?t.name:\"NULL\",t&&t.image?\"\":\"\")}var n;if(R.fold&&R.fold.faces_vertices?(n=R.fold.faces_vertices,console.log(\"Using fold data for faces:\",n.length,\"faces\")):(n=R.model.getFaces(),console.log(\"Using model data for faces:\",n?n.length:0,\"faces\")),!n||0===n.length)return void console.warn(\"No faces found in model\");console.log(\" Assigning\",R.textureLibrary.length,\"textures randomly to\",n.length,\"faces\"),R.faceTextureMapping={};var o=R.textureLibrary.length,a=[];if(n.length>=o){for(var e=0;e<o;e++)a.push(e);console.log(\" Guaranteed assignment: Each of\",o,\"textures gets at least 1 face\");for(var i=n.length-o,r=0;r<i;r++){var l=r%o;a.push(l)}}else{console.log(\" More textures (\"+o+\") than faces (\"+n.length+\") - some textures won't be used\");for(var g=0;g<n.length;g++)a.push(g%o)}console.log(\" Initial distribution before shuffle:\");for(var d={},u=0;u<a.length;u++){var c=a[u];d[c]=(d[c]||0)+1}for(var c in d)console.log(\"- Texture \"+c+\": \"+d[c]+\" faces\");R.useSeededRandom&&(console.log(\" Resetting random seed state for deterministic assignment\"),R.initializeRandomSeed(R.randomSeed)),console.log(\" Using seeded random values for texture assignment:\"),console.log(\" Current seed:\",R.randomSeed),console.log(\" Seeded random function available:\",!!R.randomFunction),console.log(\" faceAssignments array length:\",a.length),console.log(\" faceAssignments before shuffle:\",JSON.stringify(a));for(var m=[],r=a.length-1;r>0;r--){var f=R.getSeededRandom();m.push(f)}console.log(\" Generated seeded random values: [\"+m.slice(0,10).map(function(e){return e.toFixed(6)}).join(\", \")+(m.length>10?\"...\":\"\")+\"]\");for(var x=0,r=a.length-1;r>0;r--){var f=m[x],u=Math.floor(f*(r+1));x++,x<=10&&console.log(\"Step \"+(a.length-1-r)+\": seeded random=\"+f.toFixed(6)+\", j=\"+u+\", swapping indices \"+r+\"  \"+u);var h=a[r];a[r]=a[u],a[u]=h}console.log(\" All seeded random values: [\"+m.map(function(e){return e.toFixed(6)}).join(\", \")+\"]\"),console.log(\" faceAssignments after shuffle:\",JSON.stringify(a));for(var g=0;g<n.length;g++)void 0!==a[g]&&(R.faceTextureMapping[g]=a[g]);console.log(\" Final face mapping (first 20 faces):\");for(var g=0;g<Math.min(20,n.length);g++)console.log(\"Face \"+g+\"  Texture \"+R.faceTextureMapping[g]);var p={};for(var y in R.faceTextureMapping){var c=R.faceTextureMapping[y];p[c]=(p[c]||0)+1}console.log(\" Random texture assignment completed:\"),console.log(\" Final texture usage statistics:\");var v=0,b=[];for(var c in p){var M=R.textureLibrary[c]?R.textureLibrary[c].name:\"Texture \"+(parseInt(c)+1),T=p[c],L=(T/n.length*100).toFixed(1);console.log(\"- \"+M+\": \"+T+\" faces (\"+L+\"%)\"),v+=T}for(var r=0;r<R.textureLibrary.length;r++)if(!p.hasOwnProperty(r)){var M=R.textureLibrary[r]?R.textureLibrary[r].name:\"Texture \"+(r+1);b.push(M)}b.length>0?(console.warn(\" Unused textures detected:\",b.join(\", \")),console.warn(\"This indicates a distribution problem!\")):console.log(\" All textures are being used!\"),console.log(\" Total faces assigned:\",v,\"/ Expected:\",n.length),console.log(\" Sample assignments:\",Object.keys(R.faceTextureMapping).slice(0,10).map(function(e){return\"Face \"+e+\"  Texture \"+R.faceTextureMapping[e]})),s(),\"texture\"===R.colorMode&&(console.log(\" Updating material with new texture mapping\"),console.log(\" Material update context:\"),console.log(\"  - Atlas exists:\",!!R.textureAtlas),console.log(\"  - Atlas dimensions:\",R.textureAtlas?R.textureAtlas.image.width+\"x\"+R.textureAtlas.image.height:\"N/A\"),console.log(\"  - Face mapping size:\",Object.keys(R.faceTextureMapping).length),R.model.setMeshMaterial(),console.log(\" Material update completed\")),R.textureLibrary.length<=2&&R.model&&R.model.updateUVMapping&&(console.log(\" Forcing UV mapping update for single texture grid system\"),R.model.updateUVMapping())}function c(){if(0===R.textureLibrary.length)return console.warn(\" No textures available for atlas creation\"),null;if(1===R.textureLibrary.length)return console.log(\" Single texture detected, using original texture without atlas\"),R.textureLibrary[0];console.log(\" Creating texture atlas from\",R.textureLibrary.length,\"textures\"),console.log(\" Textures to include in atlas:\");for(var e=[],t=0;t<R.textureLibrary.length;t++){var n=R.textureLibrary[t],o=n&&n.image&&n.image.complete&&n.image.width>0&&n.image.height>0;console.log(\"- Texture \"+t+\":\",n?n.name:\"NULL\",\"Size:\",n&&n.image?n.image.width+\"x\"+n.image.height:\"No image\",\"Valid:\",o?\"\":\"\"),o&&e.push({index:t,texture:n})}if(0===e.length)return console.error(\" No valid textures found for atlas creation\"),null;e.length!==R.textureLibrary.length&&console.warn(\" Some textures are invalid:\",R.textureLibrary.length-e.length,\"out of\",R.textureLibrary.length);var a=Math.ceil(Math.sqrt(e.length)),i=Math.ceil(e.length/a),r=document.createElement(\"canvas\"),l=r.getContext(\"2d\"),s=Math.floor(2048/Math.max(a,i));r.width=a*s,r.height=i*s,console.log(\"Atlas dimensions:\",r.width+\"x\"+r.height,\"Grid:\",a+\"x\"+i,\"Texture size:\",s+\"x\"+s,\"Valid textures:\",e.length+\"/\"+R.textureLibrary.length),R.atlasLayout={texturesPerRow:a,texturesPerCol:i,textureSize:s,width:r.width,height:r.height,regions:[],textureIndexMapping:{},validTextures:e};for(var t=0;t<e.length;t++){var g=e[t],d=g.index,u=Math.floor(t/a),c=t%a,m=c*s,f=u*s;R.atlasLayout.regions.push({x:m,y:f,width:s,height:s}),R.atlasLayout.textureIndexMapping[d]=t}l.clearRect(0,0,r.width,r.height),l.imageSmoothingEnabled=!0,l.imageSmoothingQuality=\"high\";for(var x=0,h=[],t=0;t<e.length;t++){var g=e[t],n=g.texture,d=g.index,u=Math.floor(t/a),c=t%a,m=c*s,f=u*s;try{l.drawImage(n.image,m,f,s,s),console.log(\" Drew texture\",d,\"'\"+n.name+\"' at atlas position [\"+m+\",\"+f+\"]\"),h.push({originalIndex:d,atlasIndex:t,name:n.name,position:[m,f],size:[s,s]}),x++}catch(e){console.error(\" Failed to draw texture\",d,\"to atlas:\",e)}}console.log(\" Atlas drawing summary:\"),console.log(\"- Total textures in library:\",R.textureLibrary.length),console.log(\"- Valid textures found:\",e.length),console.log(\"- Successfully drawn:\",x),console.log(\"- Drawn texture details:\");for(var t=0;t<h.length;t++){var p=h[t];console.log(\"  * Slot \"+p.atlasIndex+\": \"+p.name+\" (original index \"+p.originalIndex+\")\")}console.log(\" Texture index mapping:\");for(var d in R.atlasLayout.textureIndexMapping){var y=R.atlasLayout.textureIndexMapping[d],v=R.textureLibrary[d]?R.textureLibrary[d].name:\"unknown\";console.log(\"  * Original index \"+d+\" (\"+v+\")  Atlas position \"+y)}for(var b=[],t=0;t<e.length;t++){var d=e[t].index;h.some(function(e){return e.originalIndex===d})||b.push(d+\":\"+e[t].texture.name)}if(b.length>0?console.error(\" Missing valid textures from atlas:\",b.join(\", \")):console.log(\" All valid textures successfully included in atlas\"),0===x)return console.warn(\"No textures could be added to atlas\"),R.textureLibrary[0];var M=new THREE.CanvasTexture(r);M.wrapS=THREE.RepeatWrapping,M.wrapT=THREE.RepeatWrapping,M.minFilter=THREE.LinearFilter,M.magFilter=THREE.LinearFilter,M.flipY=!1,M.name=\"TextureAtlas_\"+R.textureLibrary.length+\"textures\",M.needsUpdate=!0,console.log(\"Texture atlas created successfully:\",M.name,\"with\",x,\"textures\");var T=document.getElementById(\"compressionStatus\");return T&&(T.textContent=\" Created texture atlas with \"+x+\" textures\",setTimeout(function(){T.textContent=\"\"},3e3)),M}function m(e,t){if(t>=0&&t<R.textureLibrary.length&&(R.faceTextureMapping[e]=t,console.log(\"Assigned texture\",t,\"to face\",e),R.model&&\"texture\"===R.colorMode)){var n=c();n&&(R.faceTexture=n,R.model.setMeshMaterial())}}function f(e){e&&R.faceTexture?R.colorMode=\"texture\":R.colorMode=\"color\",R.model.setMeshMaterial()}function x(e){void 0===e?e=R.randomSeed:R.randomSeed=e,console.log(\" Initializing global random seed:\",e);for(var t=0,n=0;n<e.length;n++){t=(t<<5)-t+e.charCodeAt(n)&4294967295}0===(t=Math.abs(t))&&(t=1);var o=t%2147483647;o<=0&&(o+=2147483646),R.randomFunction=function(){return((o=16807*o%2147483647)-1)/2147483646},R.useSeededRandom=!0,console.log(\" Using custom seeded random generator with hash:\",t),console.log(\" Random seed initialized. Seeded random:\",R.useSeededRandom),y()}function h(){return R.useSeededRandom&&R.randomFunction?R.randomFunction():Math.random()}function p(e){console.log(\" Changing random seed to:\",e),console.log(\" Previous seed was:\",R.randomSeed),x(e),R.faceTextureMapping={},R.textureLibrary.length>0&&R.model?(console.log(\" Regenerating ALL texture assignments with new seed\"),console.log(\" Texture library has\",R.textureLibrary.length,\"textures\"),u(),R.model.setMeshMaterial&&(console.log(\" Updating mesh material with new texture assignments\"),R.model.setMeshMaterial())):console.log(\" Cannot regenerate texture assignments:\",\"textures=\"+R.textureLibrary.length,\"model=\"+!!R.model),console.log(\" Random seed change completed. New seed:\",R.randomSeed)}function y(){R.useSeededRandom&&R.randomFunction?(console.log(\" Overriding Math.random with seeded function\"),Math.random=R.getSeededRandom):(console.log(\" Using original Math.random\"),Math.random=C)}function v(){console.log(\" Restoring original Math.random\"),Math.random=C}function b(e,t){R.lighting[e]&&\"number\"==typeof t?(R.lighting[e].intensity=Math.max(0,Math.min(10,t)),console.log(\" Set\",e,\"intensity to\",R.lighting[e].intensity),R.threeView&&R.threeView.updateLighting&&R.threeView.updateLighting()):console.warn(\"Invalid light name or intensity value:\",e,t)}function M(e,t,n,o){R.lighting[e]&&R.lighting[e].position?(R.lighting[e].position.x=t||0,R.lighting[e].position.y=n||0,R.lighting[e].position.z=o||0,console.log(\" Set\",e,\"position to\",R.lighting[e].position),R.threeView&&R.threeView.updateLighting&&R.threeView.updateLighting()):console.warn(\"Invalid light name:\",e)}function T(e){console.log(\" Adjusting front lighting to intensity:\",e),b(\"frontMain\",e),b(\"frontDetail1\",.875*e),b(\"frontDetail2\",.5*e)}function L(){console.log(\" Resetting lighting to default values\"),R.lighting.frontMain.intensity=.8,R.lighting.backLight.intensity=.3,R.lighting.sideLeft.intensity=.6,R.lighting.sideRight.intensity=.6,R.lighting.frontDetail1.intensity=.7,R.lighting.frontDetail2.intensity=.4,R.lighting.ambient.intensity=.25,R.threeView&&R.threeView.updateLighting&&R.threeView.updateLighting()}function w(){console.log(\" Current lighting settings:\");for(var e in R.lighting){var t=R.lighting[e];t.position?console.log(\"  \"+e+\": intensity=\"+t.intensity+\", position=(\"+t.position.x+\",\"+t.position.y+\",\"+t.position.z+\")\"):console.log(\"  \"+e+\": intensity=\"+t.intensity)}return R.lighting}function S(e){\"function\"==typeof e&&(R.patternLoadingCallbacks.push(e),console.log(\" Pattern loading callback registered, total callbacks:\",R.patternLoadingCallbacks.length))}function F(e){console.log(\" Notifying pattern loaded:\",e);var t=R.patternLoadingCallbacks.slice();R.patternLoadingCallbacks=[],t.forEach(function(t,n){try{console.log(\" Calling pattern loading callback\",n),t(e)}catch(e){console.error(\" Error in pattern loading callback\",n,\":\",e)}})}console.log(\"initGlobals function called\");var R={navMode:\"simulation\",scale:1,editMode:!0,isNFTProcessing:!1,hideUntilTextured:!1,colorMode:\"color\",calcFaceStrain:!1,color1:\"ffffff\",color2:\"ffffff\",defaultOpacity:1,edgesVisible:!0,mtnsVisible:!0,valleysVisible:!0,panelsVisible:!1,passiveEdgesVisible:!1,boundaryEdgesVisible:!0,meshVisible:!0,ambientOcclusion:!1,faceTexture:null,textureRepeat:1,textureLibrary:[],faceTextureMapping:{},selectedTexture:0,randomTextures:!1,lighting:{frontMain:{intensity:1.2,position:{x:0,y:100,z:0}},backLight:{intensity:.3,position:{x:0,y:-100,z:0}},sideLeft:{intensity:.6,position:{x:100,y:-30,z:0}},sideRight:{intensity:.6,position:{x:-100,y:-30,z:0}},frontDetail1:{intensity:.6,position:{x:0,y:30,z:100}},frontDetail2:{intensity:.3,position:{x:0,y:30,z:-100}},ambient:{intensity:.35}},randomSeed:\"origami-simulator-2024\",randomFunction:null,useSeededRandom:!0,simulationRunning:!0,fixedHasChanged:!1,forceHasChanged:!1,materialHasChanged:!1,creaseMaterialHasChanged:!1,shouldResetDynamicSim:!1,shouldChangeCreasePercent:!1,nodePositionHasChanged:!1,shouldZeroDynamicVelocity:!1,shouldCenterGeo:!1,needsSync:!1,simNeedsSync:!1,menusVisible:!0,url:null,simType:\"dynamic\",creasePercent:0,maxFoldingPercent:100,currentPatternMaxFolding:100,axialStiffness:20,creaseStiffness:.7,panelStiffness:.7,faceStiffness:.2,percentDamping:.45,density:1,integrationType:\"euler\",strainClip:5,vertTol:3,foldUseAngles:!0,includeCurves:!1,vertInt:20,apprCurve:.2,filename:null,extension:null,doublesidedSTL:!1,doublesidedOBJ:!1,exportScale:1,thickenModel:!0,thickenOffset:5,polyFacesOBJ:!0,foldUnits:\"unit\",triangulateFOLDexport:!1,exportFoldAngle:!0,pausedForPatternView:!1,userInteractionEnabled:!1,vrEnabled:!1,numSteps:100,rotateModel:null,rotationSpeed:.01,autoRotateEnabled:!1,autoRotateStartTime:null,autoRotateWaitTime:3e3,multiAxisRotation:{x:.005,y:.008,z:.003},randomRotationEnabled:!0,rotationChangeInterval:6e3,lastRotationChangeTime:null,sliderAutoAnimationEnabled:!1,sliderAnimationStartTime:null,sliderAnimationDuration:4e3,sliderAnimationDirection:1,sliderAnimationStartValue:0,sliderAnimationEndValue:100,sliderAnimationLoop:!0,sliderAnimationPauseTime:5e3,sliderAnimationState:\"animating\",sliderAnimationPauseStartTime:null,backgroundColor:\"ffffff\",capturer:null,capturerQuality:63,capturerFPS:60,gifFPS:20,currentFPS:null,capturerScale:1,capturerFrames:0,shouldScaleCanvas:!1,isGif:!1,shouldAnimateFoldPercent:!1};R.setCreasePercent=e,R.setMaxFolding=t,$(\"#warningModal\").on(\"hidden.bs.modal\",function(){$(\"#warningMessage\").html(\"\")}),R.warn=n,R.noCreasePatternAvailable=o,R.compressImage=a,R.loadTexture=i,R.loadMultipleTextures=l,R.updateTextureList=s,R.selectTexture=g,R.removeTexture=d,R.assignRandomTextures=u,R.createTextureAtlas=c,R.assignTextureToFace=m,window.selectTexture=R.selectTexture,window.removeTexture=R.removeTexture,R.setTextureMode=f,R.initializeRandomSeed=x,R.getSeededRandom=h,R.setRandomSeed=p,x();var C=Math.random;return R.enableGlobalRandomOverride=y,R.disableGlobalRandomOverride=v,R.originalMathRandom=C,R.setLightIntensity=b,R.setLightPosition=M,R.adjustFrontLighting=T,R.resetLightingToDefaults=L,R.getLightingInfo=w,R.patternLoadingCallbacks=[],R.onPatternLoaded=S,R.notifyPatternLoaded=F,y(),console.log(\"initGlobals function completed successfully\"),R}console.log(\"Loading globals.js...\"),console.log(\"globals.js loaded successfully, initGlobals function defined\");</script> <script type=\"text/javascript\">function Node(e,t){this.type=\"node\",this.index=t,this._originalPosition=e.clone(),this.beams=[],this.creases=[],this.invCreases=[],this.externalForce=null,this.fixed=!1}var nodeMaterial=new THREE.MeshBasicMaterial({color:0,side:THREE.DoubleSide}),transparentMaterial=new THREE.MeshBasicMaterial({color:16777215,opacity:.5,transparent:!0}),transparentVRMaterial=new THREE.MeshBasicMaterial({color:16777215,opacity:.8,transparent:!0}),nodeGeo=new THREE.SphereGeometry(.02,20);Node.prototype.setFixed=function(e){this.fixed=e},Node.prototype.isFixed=function(){return this.fixed},Node.prototype.addExternalForce=function(e){},Node.prototype.getExternalForce=function(){return this.externalForce?this.externalForce.getForce():new THREE.Vector3(0,0,0)},Node.prototype.addCrease=function(e){this.creases.push(e)},Node.prototype.removeCrease=function(e){if(null!==this.creases){var t=this.creases.indexOf(e);t>=0&&this.creases.splice(t,1)}},Node.prototype.addInvCrease=function(e){this.invCreases.push(e)},Node.prototype.removeInvCrease=function(e){if(null!==this.invCreases){var t=this.invCreases.indexOf(e);t>=0&&this.invCreases.splice(t,1)}},Node.prototype.addBeam=function(e){this.beams.push(e)},Node.prototype.removeBeam=function(e){if(null!==this.beams){var t=this.beams.indexOf(e);t>=0&&this.beams.splice(t,1)}},Node.prototype.getBeams=function(){return this.beams},Node.prototype.numBeams=function(){return this.beams.length},Node.prototype.isConnectedTo=function(e){for(var t=0;t<this.beams.length;t++)if(this.beams[t].getOtherNode(this)==e)return!0;return!1},Node.prototype.numCreases=function(){return this.creases.length},Node.prototype.getIndex=function(){return this.index},Node.prototype.getObject3D=function(){return this.object3D},Node.prototype.setTransparent=function(){this.object3D||(this.object3D=new THREE.Mesh(nodeGeo,nodeMaterial),this.object3D.visible=!1),this.object3D.material=transparentMaterial},Node.prototype.setTransparentVR=function(){this.object3D||(this.object3D=new THREE.Mesh(nodeGeo,nodeMaterial),this.object3D.visible=!1),this.object3D.material=transparentVRMaterial,this.object3D.scale.set(.4,.4,.4)},Node.prototype.getOriginalPosition=function(){return this._originalPosition.clone()},Node.prototype.setOriginalPosition=function(e,t,o){this._originalPosition.set(e,t,o)},Node.prototype.getPosition=function(){var e=globals.model.getPositionsArray(),t=this.getIndex();return new THREE.Vector3(e[3*t],e[3*t+1],e[3*t+2])},Node.prototype.moveManually=function(e){var t=globals.model.getPositionsArray(),o=this.getIndex();t[3*o]=e.x,t[3*o+1]=e.y,t[3*o+2]=e.z},Node.prototype.getRelativePosition=function(){return this.getPosition().sub(this._originalPosition)},Node.prototype.getSimMass=function(){return 1},Node.prototype.destroy=function(){this.object3D=null,this.beams=null,this.creases=null,this.invCreases=null,this.externalForce=null};</script> <script type=\"text/javascript\">function Beam(t){this.type=\"beam\",t[0].addBeam(this),t[1].addBeam(this),this.vertices=[t[0]._originalPosition,t[1]._originalPosition],this.nodes=t,this.originalLength=this.getLength()}Beam.prototype.getLength=function(){return this.getVector().length()},Beam.prototype.getOriginalLength=function(){return this.originalLength},Beam.prototype.recalcOriginalLength=function(){this.originalLength=this.getVector().length()},Beam.prototype.isFixed=function(){return this.nodes[0].fixed&&this.nodes[1].fixed},Beam.prototype.getVector=function(t){return t==this.nodes[1]?this.vertices[0].clone().sub(this.vertices[1]):this.vertices[1].clone().sub(this.vertices[0])},Beam.prototype.getK=function(){return globals.axialStiffness/this.getLength()},Beam.prototype.getD=function(){return 2*globals.percentDamping*Math.sqrt(this.getK()*this.getMinMass())},Beam.prototype.getNaturalFrequency=function(){return Math.sqrt(this.getK()/this.getMinMass())},Beam.prototype.getMinMass=function(){var t=this.nodes[0].getSimMass();return this.nodes[1].getSimMass()<t&&(t=this.nodes[1].getSimMass()),t},Beam.prototype.getOtherNode=function(t){return this.nodes[0]==t?this.nodes[1]:this.nodes[0]},Beam.prototype.destroy=function(){var t=this;_.each(this.nodes,function(e){e.removeBeam(t)}),this.vertices=null,this.nodes=null};</script> <script type=\"text/javascript\">function Crease(e,t,n,o,s,i,r,a){this.edge=e;for(var h=0;h<e.nodes.length;h++)e.nodes[h].addInvCrease(this);this.face1Index=t,this.face2Index=n,this.targetTheta=o,this.type=s,this.node1=i,this.node2=r,this.index=a,i.addCrease(this),r.addCrease(this)}Crease.prototype.getLength=function(){return this.edge.getLength()},Crease.prototype.getVector=function(e){return this.edge.getVector(e)},Crease.prototype.getNormal1Index=function(){return this.face1Index},Crease.prototype.getNormal2Index=function(){return this.face2Index},Crease.prototype.getTargetTheta=function(){return this.targetTheta},Crease.prototype.getK=function(){var e=this.getLength();return 0==this.type?globals.panelStiffness*e:globals.creaseStiffness*e},Crease.prototype.getD=function(){return 2*globals.percentDamping*Math.sqrt(this.getK())},Crease.prototype.getIndex=function(){return this.index},Crease.prototype.getLengthToNode1=function(){return this.getLengthTo(this.node1)},Crease.prototype.getLengthToNode2=function(){return this.getLengthTo(this.node2)},Crease.prototype.getCoef1=function(e){return this.getCoef(this.node1,e)},Crease.prototype.getCoef2=function(e){return this.getCoef(this.node2,e)},Crease.prototype.getCoef=function(e,t){var n=this.getVector(t),o=n.length();n.normalize();var s=e.getOriginalPosition(),i=s.sub(t.getOriginalPosition()),r=n.dot(i),a=Math.sqrt(i.lengthSq()-r*r);return a<=0&&(console.warn(\"bad moment arm\"),a=.001),1-r/o},Crease.prototype.getLengthTo=function(e){var t=this.getVector().normalize(),n=e.getOriginalPosition(),o=n.sub(this.edge.nodes[1].getOriginalPosition()),s=t.dot(o),i=Math.sqrt(o.lengthSq()-s*s);return i<=0&&(console.warn(\"bad moment arm\"),i=.001),i},Crease.prototype.getNodeIndex=function(e){return e==this.node1?1:e==this.node2?2:e==this.edge.nodes[0]?3:e==this.edge.nodes[1]?4:(console.log(\"unknown node type\"),0)},Crease.prototype.setVisibility=function(){var e=!1;e=0==this.type?globals.panelsVisible:this.targetTheta>0&&globals.mtnsVisible||this.targetTheta<0&&globals.valleysVisible,this.edge.setVisibility(e)},Crease.prototype.destroy=function(){if(this.node1.removeCrease(this),this.node2.removeCrease(this),this.edge&&this.edge.nodes)for(var e=0;e<this.edge.nodes.length;e++)this.edge.nodes[e].removeInvCrease(this);this.edge=null,this.face1Index=null,this.face2Index=null,this.targetTheta=null,this.type=null,this.node1=null,this.node2=null,this.index=null};</script> <script type=\"text/javascript\">/**\n * Created by amandaghassaei on 2/24/17.\n */\n\n//model updates object3d geometry and materials\n\nfunction initModel(globals){\n\n    var material, material2, geometry;\n    var frontside = new THREE.Mesh();//front face of mesh\n    var backside = new THREE.Mesh();//back face of mesh (different color)\n    backside.visible = false;\n\n    var lineMaterial = new THREE.LineBasicMaterial({color: 0x000000, linewidth: 1});\n    var hingeLines = new THREE.LineSegments(null, lineMaterial);\n    var mountainLines = new THREE.LineSegments(null, lineMaterial);\n    var valleyLines = new THREE.LineSegments(null, lineMaterial);\n    var cutLines = new THREE.LineSegments(null, lineMaterial);\n    var facetLines = new THREE.LineSegments(null, lineMaterial);\n    var borderLines = new THREE.LineSegments(null, lineMaterial);\n\n    var lines = {\n        U: hingeLines,\n        M: mountainLines,\n        V: valleyLines,\n        C: cutLines,\n        F: facetLines,\n        B: borderLines\n    };\n\n    clearGeometries();\n    setMeshMaterial();\n\n    function clearGeometries(){\n\n        if (geometry) {\n            frontside.geometry = null;\n            backside.geometry = null;\n            geometry.dispose();\n        }\n\n        geometry = new THREE.BufferGeometry();\n        frontside.geometry = geometry;\n        backside.geometry = geometry;\n        // geometry.verticesNeedUpdate = true;\n        geometry.dynamic = true;\n\n        _.each(lines, function(line){\n            var lineGeometry = line.geometry;\n            if (lineGeometry) {\n                line.geometry = null;\n                lineGeometry.dispose();\n            }\n\n            lineGeometry = new THREE.BufferGeometry();\n            line.geometry = lineGeometry;\n            // lineGeometry.verticesNeedUpdate = true;\n            lineGeometry.dynamic = true;\n        });\n    }\n\n    globals.threeView.sceneAddModel(frontside);\n    globals.threeView.sceneAddModel(backside);\n    _.each(lines, function(line){\n        globals.threeView.sceneAddModel(line);\n    });\n\n    var positions;//place to store buffer geo vertex data\n    var colors;//place to store buffer geo vertex colors\n    var indices;\n    var nodes = [];\n    var faces = [];\n    var edges = [];\n    var creases = [];\n    var vertices = [];//indexed vertices array\n    var fold, creaseParams;\n\n    var nextCreaseParams, nextFold;//todo only nextFold, nextCreases?\n\n    var inited = false;\n\n    function setMeshMaterial() {\n        var polygonOffset = 0.5;\n        if (globals.colorMode == \"normal\") {\n            material = new THREE.MeshNormalMaterial({\n                flatShading:true,\n                side: THREE.FrontSide,  // \n                polygonOffset: true,\n                polygonOffsetFactor: polygonOffset, // positive value pushes polygon further away\n                polygonOffsetUnits: 1\n            });\n            // \n            material2 = new THREE.MeshPhongMaterial({\n                color: 0xffffff,       // \n                flatShading: true,\n                side: THREE.BackSide,  // \n                polygonOffset: true,\n                polygonOffsetFactor: polygonOffset,\n                polygonOffsetUnits: 1,\n                transparent: false,\n                opacity: 1.0\n            });\n            backside.visible = true;  // \n        } else if (globals.colorMode == \"axialStrain\"){\n            material = new THREE.MeshBasicMaterial({\n                vertexColors: THREE.VertexColors, \n                side: THREE.FrontSide,  // \n                polygonOffset: true,\n                polygonOffsetFactor: polygonOffset, // positive value pushes polygon further away\n                polygonOffsetUnits: 1\n            });\n            // \n            material2 = new THREE.MeshPhongMaterial({\n                color: 0xffffff,       // \n                flatShading: true,\n                side: THREE.BackSide,  // \n                polygonOffset: true,\n                polygonOffsetFactor: polygonOffset,\n                polygonOffsetUnits: 1,\n                transparent: false,\n                opacity: 1.0\n            });\n            backside.visible = true;  // \n            if (!globals.threeView.simulationRunning) {\n                getSolver().render();\n                setGeoUpdates();\n            }\n        } else if (globals.colorMode == \"texture\" && (globals.faceTexture || globals.textureLibrary.length > 0)) {\n            console.log(\" Setting mesh material to simple texture mode\");\n            console.log(\" Simple texture context:\");\n            console.log(\"  - faceTexture exists:\", !!globals.faceTexture);\n            console.log(\"  - useSimpleTextureMode:\", !!globals.useSimpleTextureMode);\n            console.log(\"  - isCellGeneratedTexture:\", !!globals.isCellGeneratedTexture);\n            \n            var textureToUse = globals.faceTexture;\n            \n            // Only use texture if it's cell-generated or explicitly set\n            if (!textureToUse && globals.textureLibrary.length > 0 && globals.isCellGeneratedTexture) {\n                console.log(\" Using first texture from library for cell-generated texture\");\n                textureToUse = globals.textureLibrary[0];\n                globals.faceTexture = textureToUse;\n            } else if (!textureToUse && globals.textureLibrary.length > 0 && !globals.isCellGeneratedTexture) {\n                console.log(\" Waiting for cell-generated texture, skipping temporary texture application\");\n                // Don't apply temporary texture - wait for cellColorizer\n                return;\n            }\n            \n            if (textureToUse) {\n                console.log(\" Creating texture material\");\n                console.log(\" Texture details:\");\n                console.log(\"  - Name:\", textureToUse.name || \"atlas\");\n                console.log(\"  - Image dimensions:\", textureToUse.image ? textureToUse.image.width + \"x\" + textureToUse.image.height : \"N/A\");\n                console.log(\"  - Format:\", textureToUse.format);\n                console.log(\"  - Type:\", textureToUse.type);\n                \n                // Enhanced texture material with subtle reflective properties\n                material = new THREE.MeshPhongMaterial({\n                    map: textureToUse,\n                    flatShading: true,\n                    side: THREE.FrontSide,  // \n                    polygonOffset: true,\n                    polygonOffsetFactor: polygonOffset,\n                    polygonOffsetUnits: 1,\n                    // Subtle reflective properties to preserve texture visibility\n                    shininess: 30,         // Moderate shininess\n                    specular: 0x333333,    // Reduced specular reflection\n                    reflectivity: 0.2,     // Low reflectivity\n                    transparent: false,    // No transparency to keep texture colors vivid\n                    opacity: 1.0\n                });\n                \n                // \n                console.log(\" Creating flipped texture for backside\");\n                var flippedTexture = textureToUse.clone();\n                flippedTexture.needsUpdate = true;\n                \n                // \n                flippedTexture.wrapS = THREE.RepeatWrapping;\n                flippedTexture.wrapT = THREE.RepeatWrapping;\n                \n                // \n                flippedTexture.repeat.x = -1; // \n                flippedTexture.repeat.y = 1;  // \n                flippedTexture.offset.x = 1;  // \n                flippedTexture.offset.y = 0;\n                \n                // \n                flippedTexture.matrix = new THREE.Matrix3();\n                flippedTexture.matrixAutoUpdate = false;\n                // \n                flippedTexture.matrix.set(\n                    -1, 0, 1,  // \n                     0, 1, 0,  // \n                     0, 0, 1\n                );\n                \n                // \n                material2 = new THREE.MeshPhongMaterial({\n                    map: flippedTexture,   // \n                    flatShading: true,\n                    side: THREE.BackSide,  // \n                    polygonOffset: true,\n                    polygonOffsetFactor: polygonOffset,\n                    polygonOffsetUnits: 1,\n                    shininess: 20,         // \n                    specular: 0x111111,    // \n                    reflectivity: 0.1,     // \n                    transparent: false,\n                    opacity: 1.0\n                });\n                \n                console.log(\" Texture material created successfully\");\n                console.log(\" \");\n                backside.visible = true;  // \n                \n                // Check if this is a cell-generated texture that needs simple UV mapping\n                console.log(\" Checking UV mapping condition:\");\n                console.log(\"  - globals.isCellGeneratedTexture:\", !!globals.isCellGeneratedTexture);\n                console.log(\"  - globals.useSimpleTextureMode:\", !!globals.useSimpleTextureMode);\n                console.log(\"  - Combined condition:\", !!(globals.isCellGeneratedTexture && globals.useSimpleTextureMode));\n                \n                if (globals.isCellGeneratedTexture && globals.useSimpleTextureMode) {\n                    console.log(\" Using simple UV mapping for cell-generated texture\");\n                    setSimpleUVMapping();\n                } else {\n                    // Update UV coordinates for face-based texture mapping\n                    console.log(\" Updating UV coordinates for texture mapping (fallback)\");\n                    updateFaceBasedUVs();\n                }\n                console.log(\" Texture material applied successfully\");\n            } else {\n                console.warn(\" Texture mode selected but no texture available, falling back to color mode\");\n                globals.colorMode = \"color\";\n                // Fall through to color mode\n                material = new THREE.MeshPhongMaterial({\n                    flatShading:true,\n                    side:THREE.FrontSide,\n                    polygonOffset: true,\n                    polygonOffsetFactor: polygonOffset, // positive value pushes polygon further away\n                    polygonOffsetUnits: 1,\n                    // Subtle reflective properties\n                    shininess: 25,\n                    specular: 0x222222,\n                    reflectivity: 0.15,\n                    transparent: true,  // Enable transparency for default surfaces\n                    opacity: globals.defaultOpacity || 0.0  // Use transparent default opacity\n                });\n                material2 = new THREE.MeshPhongMaterial({\n                    flatShading:true,\n                    side:THREE.BackSide,\n                    polygonOffset: true,\n                    polygonOffsetFactor: polygonOffset, // positive value pushes polygon further away\n                    polygonOffsetUnits: 1,\n                    // Subtle reflective properties\n                    shininess: 25,\n                    specular: 0x222222,\n                    reflectivity: 0.15,\n                    transparent: false,    // \n                    opacity: 1.0,         // \n                    color: 0xffffff       // \n                });\n                \n                // For transparent surfaces, color setting is optional\n                if (globals.defaultOpacity > 0) {\n                    material.color.setStyle( \"#\" + globals.color1);\n                    material2.color.setStyle( \"#\" + globals.color2);\n                } else {\n                    console.log(\" Fallback surfaces set to transparent - color not applied\");\n                }\n                backside.visible = true;\n            }\n        } else {\n            // Standard color mode - white surfaces\n            material = new THREE.MeshPhongMaterial({\n                flatShading:true,\n                side:THREE.FrontSide,\n                polygonOffset: true,\n                polygonOffsetFactor: polygonOffset, // positive value pushes polygon further away\n                polygonOffsetUnits: 1,\n                // Subtle reflective properties\n                shininess: 25,         // Low shininess\n                specular: 0x222222,    // Reduced specular reflection\n                reflectivity: 0.15,    // Low reflectivity\n                transparent: false,    // \n                opacity: 1.0,          // \n                color: 0xffffff        // \n            });\n            material2 = new THREE.MeshPhongMaterial({\n                flatShading:true,\n                side:THREE.BackSide,\n                polygonOffset: true,\n                polygonOffsetFactor: polygonOffset, // positive value pushes polygon further away\n                polygonOffsetUnits: 1,\n                // Subtle reflective properties\n                shininess: 25,         // Low shininess\n                specular: 0x222222,    // Reduced specular reflection\n                reflectivity: 0.15,    // Low reflectivity\n                transparent: false,    // \n                opacity: 1.0,          // \n                color: 0xffffff        // \n            });\n            // For transparent surfaces, color setting is optional\n            if (globals.defaultOpacity > 0) {\n                material.color.setStyle( \"#\" + globals.color1);\n                material2.color.setStyle( \"#\" + globals.color2);\n            } else {\n                console.log(\" Surfaces set to transparent - color not applied\");\n            }\n            backside.visible = true;\n        }\n        \n        console.log(\" Applying materials to mesh objects\");\n        console.log(\" Material assignment:\");\n        console.log(\"  - frontside material type:\", material.type);\n        console.log(\"  - frontside has texture map:\", !!material.map);\n        if (material.map) {\n            console.log(\"  - texture dimensions:\", material.map.image ? material.map.image.width + \"x\" + material.map.image.height : \"N/A\");\n        }\n        console.log(\"  - backside material type:\", material2.type);\n        \n        frontside.material = material;\n        backside.material = material2;\n        \n        // If in NFT processing mode, ensure objects remain hidden\n        if (globals.isNFTProcessing || globals.hideUntilTextured) {\n            console.log(' NFT processing detected in setMeshMaterial - forcing objects hidden');\n            frontside.visible = false;\n            backside.visible = false;\n        } else {\n            // If origami is visible and has textures, start auto rotation\n            if (globals.colorMode == \"texture\" && (globals.faceTexture || globals.textureLibrary.length > 0)) {\n                if (globals.threeView && globals.threeView.startAutoRotation && !globals.autoRotateEnabled) {\n                    console.log(' Textures applied - starting auto rotation animation');\n                    globals.threeView.startAutoRotation(true, 6000); // Random rotation, change every 6 seconds\n                    \n                    // Also start slider animation\n                    if (globals.threeView.startSliderAnimation) {\n                        setTimeout(function() {\n                            globals.threeView.startSliderAnimation(0, 100, 5000, true, 5000); // 5s animation, loop enabled, 5s pause\n                        }, globals.autoRotateWaitTime + 1000); // Start 1 second after rotation begins\n                    }\n                }\n            }\n        }\n        \n        console.log(\" Materials successfully applied to mesh\");\n        console.log(\" Material configuration:\");\n        console.log(\"  - Frontside color:\", material.color ? \"#\" + material.color.getHexString() : \"N/A\");\n        console.log(\"  - Backside color:\", material2.color ? \"#\" + material2.color.getHexString() : \"N/A\");\n        console.log(\"  - Frontside visible:\", frontside.visible);\n        console.log(\"  - Backside visible:\", backside.visible);\n        console.log(\"  - Frontside opacity:\", material.opacity);\n        console.log(\"  - Backside opacity:\", material2.opacity);\n    }\n\n    function updateEdgeVisibility(){\n        // If hideUntilTextured is true, hide edges too\n        if (globals.hideUntilTextured) {\n            mountainLines.visible = false;\n            valleyLines.visible = false;\n            facetLines.visible = false;\n            hingeLines.visible = false;\n            borderLines.visible = false;\n            cutLines.visible = false;\n            return;\n        }\n        \n        // Normal edge visibility logic\n        mountainLines.visible = globals.edgesVisible && globals.mtnsVisible;\n        valleyLines.visible = globals.edgesVisible && globals.valleysVisible;\n        facetLines.visible = globals.edgesVisible && globals.panelsVisible;\n        hingeLines.visible = globals.edgesVisible && globals.passiveEdgesVisible;\n        borderLines.visible = globals.edgesVisible && globals.boundaryEdgesVisible;\n        cutLines.visible = false;\n    }\n\n    function updateMeshVisibility(){\n        // If hideUntilTextured is true, keep objects hidden regardless of other settings\n        if (globals.hideUntilTextured) {\n            frontside.visible = false;\n            backside.visible = false;\n            return;\n        }\n        \n        // Normal visibility logic\n        frontside.visible = globals.meshVisible;\n        // Always show backside when mesh is visible ()\n        backside.visible = globals.meshVisible;\n    }\n\n    function hideOrigami(){\n        console.log(' Hiding origami object until textures are ready');\n        if (frontside) frontside.visible = false;\n        if (backside) backside.visible = false;\n        if (edges) edges.visible = false;\n        globals.hideUntilTextured = true;\n    }\n\n    function showOrigami(){\n        console.log(' Showing origami object - textures applied');\n        globals.hideUntilTextured = false;\n        \n        // Hide loading screen when origami is ready\n        console.log(' Hiding loading screen - origami is ready to display');\n        hideLoadingScreen();\n        \n        // Restore normal visibility based on settings\n        if (frontside) frontside.visible = globals.meshVisible;\n        // Always show backside when mesh is visible ()\n        if (backside) backside.visible = globals.meshVisible;\n        if (edges) edges.visible = true; // Edges are usually visible\n        updateEdgeVisibility(); // Apply edge visibility settings\n        \n        // Start auto rotation animation when origami becomes visible with textures\n        if (globals.threeView && globals.threeView.startAutoRotation) {\n            console.log(' Triggering auto rotation animation after origami is shown');\n            globals.threeView.startAutoRotation(true, 6000); // Random rotation, change every 6 seconds\n            \n            // Also start slider animation from min to max\n            if (globals.threeView.startSliderAnimation) {\n                setTimeout(function() {\n                    globals.threeView.startSliderAnimation(0, 100, 5000, true, 5000); // 5s animation, loop enabled, 5s pause\n                }, globals.autoRotateWaitTime + 1000); // Start 1 second after rotation begins\n            }\n        }\n    }\n\n    function hideLoadingScreen() {\n        try {\n            console.log(' Model.js requesting loading screen hide');\n            \n            // Use global function if available\n            if (typeof window !== 'undefined' && window.hideLoadingScreenGlobal) {\n                window.hideLoadingScreenGlobal();\n            } else {\n                // Fallback to direct DOM manipulation\n                var loadingScreen = document.getElementById('loadingScreen');\n                if (loadingScreen) {\n                    console.log(' Hiding loading screen with fade-out animation (fallback)');\n                    \n                    // Add fade-out class for smooth animation\n                    document.body.classList.add('fade-out-loading');\n                    \n                    // Remove the loading screen after animation completes\n                    setTimeout(function() {\n                        loadingScreen.style.display = 'none';\n                        document.body.classList.remove('fade-out-loading');\n                        document.body.classList.add('loading-hidden');\n                        console.log(' Loading screen hidden successfully (fallback)');\n                    }, 800); // Match the animation duration\n                } else {\n                    console.log(' Loading screen element not found');\n                }\n            }\n        } catch (error) {\n            console.error(' Error hiding loading screen:', error);\n        }\n    }\n\n    function getGlobalBounds(vertices) {\n        var minX = Infinity, minY = Infinity;\n        var maxX = -Infinity, maxY = -Infinity;\n        \n        for (var i = 0; i < vertices.length; i++) {\n            var x = vertices[i][0];\n            var y = vertices[i][1];\n            minX = Math.min(minX, x);\n            maxX = Math.max(maxX, x);\n            minY = Math.min(minY, y);\n            maxY = Math.max(maxY, y);\n        }\n        \n        return {\n            minX: minX,\n            maxX: maxX,\n            minY: minY,\n            maxY: maxY\n        };\n    }\n\n    function getOriginalBounds(originalVertices) {\n        var minX = Infinity, minY = Infinity;\n        var maxX = -Infinity, maxY = -Infinity;\n        \n        for (var i = 0; i < originalVertices.length; i++) {\n            var x = originalVertices[i][0];\n            var y = originalVertices[i][1];\n            minX = Math.min(minX, x);\n            maxX = Math.max(maxX, x);\n            minY = Math.min(minY, y);\n            maxY = Math.max(maxY, y);\n        }\n        \n        return {\n            minX: minX,\n            maxX: maxX,\n            minY: minY,\n            maxY: maxY\n        };\n    }\n\n    function getGeometryBounds(positionsArray) {\n        var minX = Infinity, minY = Infinity, minZ = Infinity;\n        var maxX = -Infinity, maxY = -Infinity, maxZ = -Infinity;\n        \n        for (var i = 0; i < positionsArray.length; i += 3) {\n            var x = positionsArray[i];\n            var y = positionsArray[i + 1];\n            var z = positionsArray[i + 2];\n            \n            minX = Math.min(minX, x);\n            maxX = Math.max(maxX, x);\n            minY = Math.min(minY, y);\n            maxY = Math.max(maxY, y);\n            minZ = Math.min(minZ, z);\n            maxZ = Math.max(maxZ, z);\n        }\n        \n        return {\n            minX: minX, maxX: maxX,\n            minY: minY, maxY: maxY,\n            minZ: minZ, maxZ: maxZ\n        };\n    }\n\n    function setSimpleUVMapping() {\n        console.log(\" Setting simple UV mapping for cell-generated texture\");\n        \n        if (!geometry || !geometry.attributes || !geometry.attributes.position) {\n            console.warn(\" Cannot set simple UV mapping: geometry not available\");\n            return;\n        }\n        \n        var positions = geometry.attributes.position.array;\n        var vertexCount = positions.length / 3;\n        \n        console.log(\" Creating simple UV mapping for\", vertexCount, \"vertices\");\n        \n        // Create simple UV coordinates (0,0) to (1,1) mapping\n        var uvs = new Float32Array(vertexCount * 2);\n        \n        // Get fold data for consistent coordinate transformation\n        var fold = globals.cellColorizerFoldData || globals.fold;\n        if (!fold || !fold.vertices_coords) {\n            console.warn(\" No fold data available for consistent UV mapping\");\n            console.log(\" Available globals:\", {\n                cellColorizerFoldData: !!globals.cellColorizerFoldData,\n                globalsFold: !!globals.fold,\n                cellColorizerTransformParams: !!globals.cellColorizerTransformParams\n            });\n            return;\n        }\n        \n        console.log(\" Using fold data with\", fold.vertices_coords.length, \"vertices\");\n        \n        // Get original 2D pattern bounds using the EXACT same method as cellColorizer\n        var minX = Infinity, minZ = Infinity;\n        var maxX = -Infinity, maxZ = -Infinity;\n        \n        // Use the same getBoundingBox logic as cellColorizer\n        for (var i = 0; i < fold.vertices_coords.length; i++) {\n            var vertex = fold.vertices_coords[i];\n            var x = vertex[0];\n            var z = vertex[2]; // Using Z coordinate for 2D projection (same as cellColorizer)\n            \n            minX = Math.min(minX, x);\n            maxX = Math.max(maxX, x);\n            minZ = Math.min(minZ, z);\n            maxZ = Math.max(maxZ, z);\n        }\n        \n        var patternWidth = maxX - minX;\n        var patternHeight = maxZ - minZ;\n        \n        console.log(\" Pattern bounds from fold data (same as cellColorizer):\", {minX, maxX, minZ, maxZ});\n        console.log(\" Pattern dimensions from fold data:\", patternWidth.toFixed(3), \"x\", patternHeight.toFixed(3));\n        \n        // Use the EXACT same canvas dimensions and transformation parameters from cellColorizer\n        var canvasWidth, canvasHeight;\n        var scale, offsetX, offsetY;\n        \n        if (globals.cellColorizerCanvasWidth && globals.cellColorizerCanvasHeight && \n            globals.cellColorizerScale !== null && globals.cellColorizerOffsetX !== null && globals.cellColorizerOffsetY !== null) {\n            // Use exact same parameters as cellColorizer\n            canvasWidth = globals.cellColorizerCanvasWidth;\n            canvasHeight = globals.cellColorizerCanvasHeight;\n            scale = globals.cellColorizerScale;\n            offsetX = globals.cellColorizerOffsetX;\n            offsetY = globals.cellColorizerOffsetY;\n            \n            console.log(\" Using cellColorizer parameters:\");\n            console.log(\"  - canvas size:\", canvasWidth + \"x\" + canvasHeight);\n            console.log(\"  - scale:\", scale.toFixed(3));\n            console.log(\"  - offset:\", offsetX.toFixed(1) + \",\" + offsetY.toFixed(1));\n        } else {\n            // Fallback: calculate parameters (same logic as cellColorizer)\n            console.log(\" cellColorizer parameters not available, calculating fallback...\");\n            \n            var aspectRatio = patternWidth / patternHeight;\n            \n            if (aspectRatio >= 1) {\n                canvasWidth = 2048;\n                canvasHeight = Math.round(2048 / aspectRatio);\n            } else {\n                canvasHeight = 2048;\n                canvasWidth = Math.round(2048 * aspectRatio);\n            }\n            \n            canvasWidth = Math.max(canvasWidth, 512);\n            canvasHeight = Math.max(canvasHeight, 512);\n            \n            var scaleX = canvasWidth / patternWidth;\n            var scaleY = canvasHeight / patternHeight;\n            scale = Math.min(scaleX, scaleY);\n            \n            var scaledWidth = patternWidth * scale;\n            var scaledHeight = patternHeight * scale;\n            offsetX = (canvasWidth - scaledWidth) / 2;\n            offsetY = (canvasHeight - scaledHeight) / 2;\n            \n            console.log(\" Fallback parameters:\");\n            console.log(\"  - canvas size:\", canvasWidth + \"x\" + canvasHeight);\n            console.log(\"  - scale:\", scale.toFixed(3));\n            console.log(\"  - offset:\", offsetX.toFixed(1) + \",\" + offsetY.toFixed(1));\n        }\n        \n        // Create UV mapping using EXACT same transformation as cellColorizer\n        for (var i = 0; i < vertexCount; i++) {\n            // Use fold data coordinates instead of geometry positions for consistency\n            if (i < fold.vertices_coords.length) {\n                var vertex = fold.vertices_coords[i];\n                var x = vertex[0];\n                var z = vertex[2];\n            } else {\n                // Fallback to geometry positions if fold data is insufficient\n                var x = positions[i * 3];\n                var z = positions[i * 3 + 2];\n            }\n            \n            // Transform to canvas coordinates (EXACT same as cellColorizer transformPoint)\n            var canvasX = (x - minX) * scale + offsetX;\n            var canvasY = (z - minZ) * scale + offsetY; // Normal coordinate mapping since canvas is already rotated\n            \n            // Normalize to [0,1] UV space\n            var u = canvasX / canvasWidth;\n            var v = canvasY / canvasHeight;\n            \n            // No additional coordinate transformation needed - canvas is already properly oriented\n            \n            // Clamp to [0,1] range\n            u = Math.max(0, Math.min(1, u));\n            v = Math.max(0, Math.min(1, v));\n            \n            uvs[i * 2] = u;\n            uvs[i * 2 + 1] = v;\n            \n            // Debug first few vertices\n            if (i < 5) {\n                console.log(\"Vertex\", i, \"3D[\" + x.toFixed(3) + \", \" + z.toFixed(3) + \"]  Canvas[\" + canvasX.toFixed(1) + \", \" + canvasY.toFixed(1) + \"]  UV[\" + u.toFixed(3) + \", \" + v.toFixed(3) + \"]\");\n            }\n        }\n        \n        console.log(\" Generated\", uvs.length / 2, \"simple UV coordinates\");\n        \n        // Apply UV coordinates to geometry\n        if (geometry.attributes.uv) {\n            geometry.attributes.uv.array = uvs;\n            geometry.attributes.uv.needsUpdate = true;\n        } else {\n            geometry.setAttribute('uv', new THREE.BufferAttribute(uvs, 2));\n        }\n        \n        console.log(\" Simple UV mapping applied successfully\");\n    }\n\n    function updateFaceBasedUVs(){\n        console.log(\" updateFaceBasedUVs: Using cellColorizer-compatible UV mapping\");\n        \n        if (!geometry) {\n            console.warn(\" Cannot update UVs: geometry not available\");\n            return;\n        }\n        \n        // Use the EXACT same parameters as cellColorizer if available\n        if (globals.cellColorizerCanvasWidth && globals.cellColorizerCanvasHeight && \n            globals.cellColorizerScale !== null && globals.cellColorizerOffsetX !== null && globals.cellColorizerOffsetY !== null) {\n            \n            console.log(\" Using stored cellColorizer parameters for updateFaceBasedUVs\");\n            \n            var canvasWidth = globals.cellColorizerCanvasWidth;\n            var canvasHeight = globals.cellColorizerCanvasHeight;\n            var scale = globals.cellColorizerScale;\n            var offsetX = globals.cellColorizerOffsetX;\n            var offsetY = globals.cellColorizerOffsetY;\n            \n            // Get fold data for bounding box (same as cellColorizer)\n            var fold = globals.cellColorizerFoldData || globals.fold;\n            if (!fold || !fold.vertices_coords) {\n                console.warn(\" No fold data available for updateFaceBasedUVs\");\n                console.log(\" Available globals for updateFaceBasedUVs:\", {\n                    cellColorizerFoldData: !!globals.cellColorizerFoldData,\n                    globalsFold: !!globals.fold\n                });\n                return;\n            }\n            \n            console.log(\" updateFaceBasedUVs using fold data with\", fold.vertices_coords.length, \"vertices\");\n            \n            // Get same bounding box as cellColorizer\n            var minX = Infinity, minZ = Infinity;\n            var maxX = -Infinity, maxZ = -Infinity;\n            \n            for (var i = 0; i < fold.vertices_coords.length; i++) {\n                var vertex = fold.vertices_coords[i];\n                var x = vertex[0];\n                var z = vertex[2]; // Use Z coordinate (same as cellColorizer)\n                \n                minX = Math.min(minX, x);\n                maxX = Math.max(maxX, x);\n                minZ = Math.min(minZ, z);\n                maxZ = Math.max(maxZ, z);\n            }\n            \n            console.log(\" updateFaceBasedUVs parameters:\");\n            console.log(\"  - canvas size:\", canvasWidth + \"x\" + canvasHeight);\n            console.log(\"  - scale:\", scale.toFixed(3));\n            console.log(\"  - offset:\", offsetX.toFixed(1) + \",\" + offsetY.toFixed(1));\n            console.log(\"  - bounding box:\", {minX, maxX, minZ, maxZ});\n            \n            // Apply UV mapping to geometry vertices\n            var positions = geometry.attributes.position.array;\n            var vertexCount = positions.length / 3;\n            var uvs = new Float32Array(vertexCount * 2);\n            \n            for (var i = 0; i < vertexCount; i++) {\n                // Use fold data coordinates for consistency\n                if (i < fold.vertices_coords.length) {\n                    var vertex = fold.vertices_coords[i];\n                    var x = vertex[0];\n                    var z = vertex[2];\n                } else {\n                    // Fallback to geometry positions\n                    var x = positions[i * 3];\n                    var z = positions[i * 3 + 2];\n                }\n                \n                // Transform to canvas coordinates (EXACT same as cellColorizer)\n                var canvasX = (x - minX) * scale + offsetX;\n                var canvasY = (z - minZ) * scale + offsetY;\n                \n                // Normalize to [0,1] UV space\n                var u = canvasX / canvasWidth;\n                var v = canvasY / canvasHeight;\n                \n                // Clamp to [0,1] range\n                u = Math.max(0, Math.min(1, u));\n                v = Math.max(0, Math.min(1, v));\n                \n                uvs[i * 2] = u;\n                uvs[i * 2 + 1] = v;\n            }\n            \n            // Apply UV coordinates to geometry\n            if (geometry.attributes.uv) {\n                geometry.attributes.uv.array = uvs;\n                geometry.attributes.uv.needsUpdate = true;\n            } else {\n                geometry.setAttribute('uv', new THREE.BufferAttribute(uvs, 2));\n            }\n            \n            console.log(\" updateFaceBasedUVs: Applied cellColorizer-compatible UV mapping\");\n            \n        } else {\n            console.log(\" updateFaceBasedUVs: cellColorizer parameters not available, using fallback\");\n            // Fallback to simple UV mapping\n            createBasicUVMapping();\n        }\n    }\n\n    function createBasicUVMapping() {\n        console.log(\" Creating basic UV mapping for geometry\");\n        \n        if (!geometry || !geometry.attributes || !geometry.attributes.position) {\n            console.warn(\" Cannot create basic UV mapping: no position data\");\n            return;\n        }\n        \n        var positions = geometry.attributes.position.array;\n        var vertexCount = positions.length / 3;\n        var uvs = new Float32Array(vertexCount * 2);\n        \n        // Simple planar projection\n        for (var i = 0; i < vertexCount; i++) {\n            var x = positions[i * 3];\n            var z = positions[i * 3 + 2];\n            \n            // Normalize coordinates to [0,1] range\n            var u = (x + 1) * 0.5;\n            var v = (z + 1) * 0.5;\n            \n            uvs[i * 2] = Math.max(0, Math.min(1, u));\n            uvs[i * 2 + 1] = Math.max(0, Math.min(1, v));\n        }\n        \n        if (geometry.attributes.uv) {\n            geometry.attributes.uv.array = uvs;\n            geometry.attributes.uv.needsUpdate = true;\n        } else {\n            geometry.setAttribute('uv', new THREE.BufferAttribute(uvs, 2));\n        }\n        \n        console.log(\" Basic UV mapping created for\", vertexCount, \"vertices\");\n    }\n\n    function getGeometry(){\n        return geometry;\n    }\n\n    function getMesh(){\n        return [frontside, backside];\n    }\n\n    function getPositionsArray(){\n        return positions;\n    }\n\n    function getColorsArray(){\n        return colors;\n    }\n\n    function pause(){\n        globals.threeView.pauseSimulation();\n    }\n\n    function resume(){\n        globals.threeView.startSimulation();\n    }\n\n    function reset(){\n        getSolver().reset();\n        setGeoUpdates();\n    }\n\n    function step(numSteps){\n        getSolver().solve(numSteps);\n        setGeoUpdates();\n    }\n\n    function setGeoUpdates(){\n        geometry.attributes.position.needsUpdate = true;\n        if (globals.colorMode == \"axialStrain\") geometry.attributes.color.needsUpdate = true;\n        if (globals.userInteractionEnabled || globals.vrEnabled) geometry.computeBoundingBox();\n    }\n\n    function startSolver(){\n        globals.threeView.startAnimation();\n    }\n\n    function getSolver(){\n        if (globals.simType == \"dynamic\") return globals.dynamicSolver;\n        else if (globals.simType == \"static\") return globals.staticSolver;\n        return globals.rigidSolver;\n    }\n\n\n\n\n    function buildModel(fold, creaseParams){\n\n        if (fold.vertices_coords.length == 0) {\n            globals.warn(\"No geometry found.\");\n            return;\n        }\n        if (fold.faces_vertices.length == 0) {\n            globals.warn(\"No faces found, try adjusting import vertex merge tolerance.\");\n            return;\n        }\n        if (fold.edges_vertices.length == 0) {\n            globals.warn(\"No edges found.\");\n            return;\n        }\n\n        nextFold = fold;\n        nextCreaseParams = creaseParams;\n\n        globals.needsSync = true;\n        globals.simNeedsSync = true;\n\n        if (!inited) {\n            startSolver();//start animation loop\n            inited = true;\n        }\n    }\n\n\n\n    function sync(){\n\n        for (var i=0;i<nodes.length;i++){\n            nodes[i].destroy();\n        }\n\n        for (var i=0;i<edges.length;i++){\n            edges[i].destroy();\n        }\n\n        for (var i=0;i<creases.length;i++){\n            creases[i].destroy();\n        }\n\n        fold = nextFold;\n        nodes = [];\n        edges = [];\n        faces = fold.faces_vertices;\n        creases = [];\n        creaseParams = nextCreaseParams;\n        var _edges = fold.edges_vertices;\n\n        var _vertices = [];\n        for (var i=0;i<fold.vertices_coords.length;i++){\n            var vertex = fold.vertices_coords[i];\n            _vertices.push(new THREE.Vector3(vertex[0], vertex[1], vertex[2]));\n        }\n\n        for (var i=0;i<_vertices.length;i++){\n            nodes.push(new Node(_vertices[i].clone(), nodes.length));\n        }\n        // _nodes[_faces[0][0]].setFixed(true);\n        // _nodes[_faces[0][1]].setFixed(true);\n        // _nodes[_faces[0][2]].setFixed(true);\n\n        for (var i=0;i<_edges.length;i++) {\n            edges.push(new Beam([nodes[_edges[i][0]], nodes[_edges[i][1]]]));\n        }\n\n        for (var i=0;i<creaseParams.length;i++) {//allCreaseParams.length\n            var _creaseParams = creaseParams[i];//face1Ind, vert1Ind, face2Ind, ver2Ind, edgeInd, angle\n            var type = _creaseParams[5]!=0 ? 1:0;\n            //edge, face1Index, face2Index, targetTheta, type, node1, node2, index\n            creases.push(new Crease(\n                edges[_creaseParams[4]],\n                _creaseParams[0],\n                _creaseParams[2],\n                _creaseParams[5] * Math.PI / 180,  // convert back to radians for the GPU math\n                type,\n                nodes[_creaseParams[1]],\n                nodes[_creaseParams[3]],\n                creases.length));\n        }\n\n        vertices = [];\n        for (var i=0;i<nodes.length;i++){\n            vertices.push(nodes[i].getOriginalPosition());\n        }\n\n        if (globals.noCreasePatternAvailable() && globals.navMode == \"pattern\"){\n            //switch to simulation mode\n            $(\"#navSimulation\").parent().addClass(\"open\");\n            $(\"#navPattern\").parent().removeClass(\"open\");\n            $(\"#svgViewer\").hide();\n            globals.navMode = \"simulation\";\n        }\n\n        positions = new Float32Array(vertices.length*3);\n        colors = new Float32Array(vertices.length*3);\n        indices = new Uint16Array(faces.length*3);\n\n        for (var i=0;i<vertices.length;i++){\n            positions[3*i] = vertices[i].x;\n            positions[3*i+1] = vertices[i].y;\n            positions[3*i+2] = vertices[i].z;\n        }\n        for (var i=0;i<faces.length;i++){\n            var face = faces[i];\n            indices[3*i] = face[0];\n            indices[3*i+1] = face[1];\n            indices[3*i+2] = face[2];\n        }\n\n        clearGeometries();\n\n        var positionsAttribute = new THREE.BufferAttribute(positions, 3);\n\n        var lineIndices = {\n            U: [],\n            V: [],\n            M: [],\n            B: [],\n            F: [],\n            C: []\n        };\n        for (var i=0;i<fold.edges_assignment.length;i++){\n            var edge = fold.edges_vertices[i];\n            var assignment = fold.edges_assignment[i];\n            lineIndices[assignment].push(edge[0]);\n            lineIndices[assignment].push(edge[1]);\n        }\n        _.each(lines, function(line, key){\n            var indicesArray = lineIndices[key];\n            var indices = new Uint16Array(indicesArray.length);\n            for (var i=0;i<indicesArray.length;i++){\n                indices[i] = indicesArray[i];\n            }\n            lines[key].geometry.addAttribute('position', positionsAttribute);\n            lines[key].geometry.setIndex(new THREE.BufferAttribute(indices, 1));\n            // lines[key].geometry.attributes.position.needsUpdate = true;\n            // lines[key].geometry.index.needsUpdate = true;\n            lines[key].geometry.computeBoundingBox();\n            lines[key].geometry.computeBoundingSphere();\n            lines[key].geometry.center();\n        });\n\n        geometry.addAttribute('position', positionsAttribute);\n        geometry.addAttribute('color', new THREE.BufferAttribute(colors, 3));\n        geometry.setIndex(new THREE.BufferAttribute(indices, 1));\n        \n        // Initialize UV coordinates (for texture mapping)\n        var uvArray = new Float32Array(vertices.length * 2);\n        for (var i = 0; i < vertices.length; i++) {\n            uvArray[2 * i] = 0.0;     // u coordinate\n            uvArray[2 * i + 1] = 0.0; // v coordinate\n        }\n        geometry.addAttribute('uv', new THREE.BufferAttribute(uvArray, 2));\n        \n        // geometry.attributes.position.needsUpdate = true;\n        // geometry.index.needsUpdate = true;\n        // geometry.verticesNeedUpdate = true;\n        geometry.computeVertexNormals();\n        geometry.computeBoundingBox();\n        geometry.computeBoundingSphere();\n        geometry.center();\n\n        var scale = 1/geometry.boundingSphere.radius;\n        globals.scale = scale;\n\n        //scale geometry\n        for (var i=0;i<positions.length;i++){\n            positions[i] *= scale;\n        }\n        for (var i=0;i<vertices.length;i++){\n            vertices[i].multiplyScalar(scale);\n        }\n\n        //update vertices and edges\n        for (var i=0;i<vertices.length;i++){\n            nodes[i].setOriginalPosition(positions[3*i], positions[3*i+1], positions[3*i+2]);\n        }\n        for (var i=0;i<edges.length;i++){\n            edges[i].recalcOriginalLength();\n        }\n\n        updateEdgeVisibility();\n        updateMeshVisibility();\n        \n        // If in NFT processing mode, override visibility to keep objects hidden\n        if (globals.isNFTProcessing || globals.hideUntilTextured) {\n            console.log(' NFT processing detected in buildModel - forcing objects hidden');\n            if (frontside) frontside.visible = false;\n            if (backside) backside.visible = false;\n            if (edges) edges.visible = false;\n        }\n\n        syncSolver();\n\n        globals.needsSync = false;\n        if (!globals.simulationRunning) reset();\n    }\n\n    function syncSolver(){\n        getSolver().syncNodesAndEdges();\n        globals.simNeedsSync = false;\n    }\n\n    function getNodes(){\n        return nodes;\n    }\n\n    function getEdges(){\n        return edges;\n    }\n\n    function getFaces(){\n        return faces;\n    }\n\n    function getCreases(){\n        return creases;\n    }\n\n    function getDimensions(){\n        geometry.computeBoundingBox();\n        return geometry.boundingBox.max.clone().sub(geometry.boundingBox.min);\n    }\n    \n    function updateUVMapping() {\n        console.log(\" updateUVMapping called - determining which mapping method to use\");\n        \n        // Check if we have fold data for face-based mapping\n        if (globals.fold && globals.fold.faces_vertices && globals.fold.vertices_coords) {\n            console.log(\" Using face-based UV mapping\");\n            updateFaceBasedUVs();\n        } else if (geometry && geometry.attributes && geometry.attributes.position) {\n            console.log(\" Using basic geometry UV mapping\");\n            createBasicUVMapping();\n        } else {\n            console.warn(\" Cannot update UV mapping: no geometry data available\");\n        }\n    }\n\n    return {\n        pause: pause,\n        resume: resume,\n        reset: reset,\n        step: step,\n\n        getNodes: getNodes,\n        getEdges: getEdges,\n        getFaces: getFaces,\n        getCreases: getCreases,\n        getGeometry: getGeometry,//for save stl\n        getPositionsArray: getPositionsArray,\n        getColorsArray: getColorsArray,\n        getMesh: getMesh,\n\n        buildModel: buildModel,//load new model\n        sync: sync,//update geometry to new model\n        syncSolver: syncSolver,//update solver params\n\n        //rendering\n        setMeshMaterial: setMeshMaterial,\n        updateEdgeVisibility: updateEdgeVisibility,\n        updateMeshVisibility: updateMeshVisibility,\n        updateUVMapping: updateUVMapping,\n        hideOrigami: hideOrigami,\n        showOrigami: showOrigami,\n\n        getDimensions: getDimensions//for save stl\n    }\n    \n    // Initial setup for NFT processing mode\n    if (window.editMode === false) {\n        console.log(' Edit mode disabled - setting initial hide state for NFT processing');\n        globals.hideUntilTextured = true;\n    }\n    \n    return model;\n}</script> <script type=\"text/javascript\">function init3DUI(e){function n(n){if(h&&(d=!0),e.userInteractionEnabled){s.x=n.clientX/window.innerWidth*2-1,s.y=-n.clientY/window.innerHeight*2+1,a.setFromCamera(s,e.threeView.camera);var r=null;if(d){if(d&&c){u||(u=c,E=u.isFixed(),u.setFixed(!0),e.fixedHasChanged=!0,e.threeView.enableControls(!1));var l=t(c.getPosition().clone());c.moveManually(l),e.nodePositionHasChanged=!0}}else r=o(n,e.model.getMesh()),i(r);if(c){var w=c.getPosition();g.getObject3D().position.set(w.x,w.y,w.z)}}}function t(n){var t=e.threeView.camera.getWorldDirection(),i=n.dot(t);l.set(t,-i);var o=new THREE.Vector3;return a.ray.intersectPlane(l,o),o}function i(e){c&&e!=c&&(g.getObject3D().visible=!1),(c=e)&&(g.getObject3D().visible=!0)}function o(n,t){var i=null,o=a.intersectObjects(t,!1);if(o.length>0){var r=o[0].face,c=o[0].point,s=e.model.getPositionsArray(),l=[];l.push(new THREE.Vector3(s[3*r.a],s[3*r.a+1],s[3*r.a+2])),l.push(new THREE.Vector3(s[3*r.b],s[3*r.b+1],s[3*r.b+2])),l.push(new THREE.Vector3(s[3*r.c],s[3*r.c+1],s[3*r.c+2]));for(var d=l[0].clone().sub(c).lengthSq(),u=r.a,E=1;E<3;E++){var h=l[E].clone().sub(c).lengthSq();h<d&&(d=h,u=1==E?r.b:r.c)}i=e.model.getNodes()[u]}return i}function r(){g.getObject3D().visible=!1}var c,a=new THREE.Raycaster,s=new THREE.Vector2,l=new THREE.Plane(new THREE.Vector3(0,0,1)),d=!1,u=null,E=!1,h=!1,g=new Node(new THREE.Vector3);return g.setTransparent(),e.threeView.scene.add(g.getObject3D()),$(document).dblclick(function(){}),document.addEventListener(\"mousedown\",function(){h=!0},!1),document.addEventListener(\"mouseup\",function(n){d=!1,u&&(u.setFixed(E),u=null,e.fixedHasChanged=!0,e.threeView.enableControls(!0),i(null),e.shouldCenterGeo=!0),h=!1},!1),document.addEventListener(\"mousemove\",n,!1),{hideHighlighters:r}}</script> <script type=\"text/javascript\">function initStaticSolver(){function e(){f=globals.model.getNodes(),c=globals.model.getEdges(),v=globals.model.getFaces(),d=globals.model.getCreases(),u=globals.model.getPositionsArray(),l()}function r(){s(),n()}function o(){}function n(){console.log(\"static solve\");for(var e=m.slice(),r=0;r<e.length;r++)e[r]+=p[r];t(numeric.solve(V,e))}function t(e){for(var r=0;r<z;r++){var o=R[r],n=new THREE.Vector3(e[3*r],e[3*r+1],e[3*r+2]),t=f[o].renderDelta(n);u[3*o]=t.x,u[3*o+1]=t.y,u[3*o+2]=t.z}for(var r=0;r<w;r++){var o=T[r],n=new THREE.Vector3(0,0,0),t=f[o].render(n);u[3*o]=t.x,u[3*o+1]=t.y,u[3*o+2]=t.z}for(var r=0;r<c.length;r++)c[r].render()}function a(e,r,o){void 0===r&&(r=0),void 0===o&&(o=0);for(var n=[],t=0;t<e;t++){0==r?n.push(0):n.push([]);for(var a=0;a<r;a++){0==o?n[t].push(0):n[t].push([]);for(var s=0;s<o;s++)n[t][a].push(0)}}return n}function s(){i(),E=numeric.transpose(x),y=numeric.dot(E,h),V=numeric.dot(y,x)}function l(){R=[],T=[],I=[],O=[];for(var e=0;e<f.length;e++)f[e].fixed?T.push(f[e].getIndex()):R.push(f[e].getIndex());for(var e=0;e<c.length;e++)c[e].isFixed()||I.push(e);for(var e=0;e<d.length;e++)O.push(e);z=R.length,w=T.length,b=I.length,H=O.length,h=a(b+H,b+H),x=a(b+H,3*z),g(),m=a(3*z);for(var e=0;e<z;e++)m[3*e]=0,m[3*e+1]=0,m[3*e+2]=0;s()}function i(){p=a(3*z);for(var e=0;e<b;e++){var r=c[I[e]],o=r.nodes,n=r.getVector(o[0]),t=r.getOriginalLength(),s=n.length()-t,l=globals.axialStiffness*s/t;if(n.normalize(),!o[0].fixed){var i=R.indexOf(o[0].getIndex());x[e][3*i]=n.x,x[e][3*i+1]=n.y,x[e][3*i+2]=n.z,p[3*i]-=n.x*l,p[3*i+1]-=n.y*l,p[3*i+2]-=n.z*l}if(!o[1].fixed){var i=R.indexOf(o[1].getIndex());x[e][3*i]=-n.x,x[e][3*i+1]=-n.y,x[e][3*i+2]=-n.z,p[3*i]+=n.x*l,p[3*i+1]+=n.y*l,p[3*i+2]+=n.z*l}}for(var g=globals.model.getGeometry(),f=g.index.array,v=[],d=new THREE.Vector3,h=new THREE.Vector3,e=0;e<f.length;e+=3){var E=3*f[e],m=new THREE.Vector3(u[E],u[E+1],u[E+2]);E=3*f[e+1];var y=new THREE.Vector3(u[E],u[E+1],u[E+2]);E=3*f[e+2];var V=new THREE.Vector3(u[E],u[E+1],u[E+2]);d.subVectors(V,y),h.subVectors(m,y),d.cross(h),d.normalize(),v.push(d.clone())}}function g(){for(var e=0;e<b;e++)h[e][e]=c[I[e]].getK();for(var e=0;e<H;e++){var r=d[O[e]];h[b+e][b+e]=r.getK()}}var f,c,v,d,u,h,x,E,m,p,y,V,b,z,w,H,R,T,I,O;return{syncNodesAndEdges:e,solve:r,reset:o}}</script> <script type=\"text/javascript\">function initDynamicSolver(e){function t(){d=e.model.getNodes(),T=e.model.getEdges(),y=e.model.getFaces(),v=e.model.getCreases(),U=e.model.getPositionsArray(),M=e.model.getColorsArray(),x(),u(e.gpuMath),s()}function r(){e.gpuMath.step(\"zeroTexture\",[],\"u_position\"),e.gpuMath.step(\"zeroTexture\",[],\"u_lastPosition\"),e.gpuMath.step(\"zeroTexture\",[],\"u_lastLastPosition\"),e.gpuMath.step(\"zeroTexture\",[],\"u_velocity\"),e.gpuMath.step(\"zeroTexture\",[],\"u_lastVelocity\"),e.gpuMath.step(\"zeroThetaTexture\",[\"u_lastTheta\"],\"u_theta\"),e.gpuMath.step(\"zeroThetaTexture\",[\"u_theta\"],\"u_lastTheta\"),n()}function o(t){if(e.shouldAnimateFoldPercent&&(e.creasePercent=e.videoAnimator.nextFoldAngle(0),e.controls.updateCreasePercent(),C(e.creasePercent),e.shouldChangeCreasePercent=!0),e.forceHasChanged&&(g(),e.forceHasChanged=!1),e.fixedHasChanged&&(f(),e.fixedHasChanged=!1),e.nodePositionHasChanged&&(h(),e.nodePositionHasChanged=!1),e.creaseMaterialHasChanged&&(p(),e.creaseMaterialHasChanged=!1),e.materialHasChanged&&(c(),e.materialHasChanged=!1),e.shouldChangeCreasePercent&&(C(e.creasePercent),e.shouldChangeCreasePercent=!1),e.shouldCenterGeo){var r=i();e.gpuMath.setProgram(\"centerTexture\"),e.gpuMath.setUniformForProgram(\"centerTexture\",\"u_center\",[r.x,r.y,r.z],\"3f\"),e.gpuMath.step(\"centerTexture\",[\"u_lastPosition\"],\"u_position\"),\"verlet\"==e.integrationType&&e.gpuMath.step(\"copyTexture\",[\"u_position\"],\"u_lastLastPosition\"),e.gpuMath.swapTextures(\"u_position\",\"u_lastPosition\"),e.gpuMath.step(\"zeroTexture\",[],\"u_lastVelocity\"),e.gpuMath.step(\"zeroTexture\",[],\"u_velocity\"),e.shouldCenterGeo=!1}void 0===t&&(t=e.numSteps);for(var o=0;o<t;o++)a();n()}function a(){var t=e.gpuMath;t.setProgram(\"normalCalc\"),t.setSize(Z,Z),t.step(\"normalCalc\",[\"u_faceVertexIndices\",\"u_lastPosition\",\"u_originalPosition\"],\"u_normals\"),t.setProgram(\"thetaCalc\"),t.setSize(ee,ee),t.step(\"thetaCalc\",[\"u_normals\",\"u_lastTheta\",\"u_creaseVectors\",\"u_lastPosition\",\"u_originalPosition\"],\"u_theta\"),t.setProgram(\"updateCreaseGeo\"),t.step(\"updateCreaseGeo\",[\"u_lastPosition\",\"u_originalPosition\",\"u_creaseMeta2\"],\"u_creaseGeo\"),\"verlet\"==e.integrationType?(t.setProgram(\"positionCalcVerlet\"),t.setSize(W,W),t.step(\"positionCalcVerlet\",[\"u_lastPosition\",\"u_lastLastPosition\",\"u_lastVelocity\",\"u_originalPosition\",\"u_externalForces\",\"u_mass\",\"u_meta\",\"u_beamMeta\",\"u_creaseMeta\",\"u_nodeCreaseMeta\",\"u_normals\",\"u_theta\",\"u_creaseGeo\",\"u_meta2\",\"u_nodeFaceMeta\",\"u_nominalTriangles\"],\"u_position\"),t.step(\"velocityCalcVerlet\",[\"u_position\",\"u_lastPosition\",\"u_mass\"],\"u_velocity\"),t.swapTextures(\"u_lastPosition\",\"u_lastLastPosition\")):(t.setProgram(\"velocityCalc\"),t.setSize(W,W),t.step(\"velocityCalc\",[\"u_lastPosition\",\"u_lastVelocity\",\"u_originalPosition\",\"u_externalForces\",\"u_mass\",\"u_meta\",\"u_beamMeta\",\"u_creaseMeta\",\"u_nodeCreaseMeta\",\"u_normals\",\"u_theta\",\"u_creaseGeo\",\"u_meta2\",\"u_nodeFaceMeta\",\"u_nominalTriangles\"],\"u_velocity\"),t.step(\"positionCalc\",[\"u_velocity\",\"u_lastPosition\",\"u_mass\"],\"u_position\")),t.swapTextures(\"u_theta\",\"u_lastTheta\"),t.swapTextures(\"u_velocity\",\"u_lastVelocity\"),t.swapTextures(\"u_position\",\"u_lastPosition\")}function i(){for(var e=0,t=0,r=0,o=0;o<U.length;o+=3)e+=U[o],t+=U[o+1],r+=U[o+2];var a=new THREE.Vector3(e,t,r);return a.multiplyScalar(3/U.length),a}function n(){if(e.gpuMath.setProgram(\"packToBytes\"),e.gpuMath.setUniformForProgram(\"packToBytes\",\"u_vectorLength\",4,\"1f\"),e.gpuMath.setUniformForProgram(\"packToBytes\",\"u_floatTextureDim\",[W,W],\"2f\"),e.gpuMath.setSize(4*W,W),e.gpuMath.step(\"packToBytes\",[\"u_lastPosition\"],\"outputBytes\"),e.gpuMath.readyToRead()){var t=4*d.length,r=Math.ceil(t/(4*W)),o=new Uint8Array(r*W*4*4);e.gpuMath.readPixels(0,0,4*W,r,o);for(var a=new Float32Array(o.buffer),i=0,n=\"axialStrain\"==e.colorMode,s=0;s<d.length;s++){var l=4*s,u=100*a[l+3];i+=u;var m=new THREE.Vector3(a[l],a[l+1],a[l+2]);if(m.add(d[s]._originalPosition),U[3*s]=m.x,U[3*s+1]=m.y,U[3*s+2]=m.z,n){u>e.strainClip&&(u=e.strainClip);var c=.7*(1-u/e.strainClip),g=new THREE.Color;g.setHSL(c,1,.5),M[3*s]=g.r,M[3*s+1]=g.g,M[3*s+2]=g.b}}oe.html((i/d.length).toFixed(7)+\" %\")}else console.log(\"shouldn't be here\")}function s(){var t=l();$(\"#deltaT\").html(t),e.gpuMath.setProgram(\"thetaCalc\"),e.gpuMath.setUniformForProgram(\"thetaCalc\",\"u_dt\",t,\"1f\"),e.gpuMath.setProgram(\"velocityCalc\"),e.gpuMath.setUniformForProgram(\"velocityCalc\",\"u_dt\",t,\"1f\"),e.gpuMath.setProgram(\"positionCalcVerlet\"),e.gpuMath.setUniformForProgram(\"positionCalcVerlet\",\"u_dt\",t,\"1f\"),e.gpuMath.setProgram(\"positionCalc\"),e.gpuMath.setUniformForProgram(\"positionCalc\",\"u_dt\",t,\"1f\"),e.gpuMath.setProgram(\"velocityCalcVerlet\"),e.gpuMath.setUniformForProgram(\"velocityCalcVerlet\",\"u_dt\",t,\"1f\"),e.controls.setDeltaT(t)}function l(){var e=0;return _.each(T,function(t){t.getNaturalFrequency()>e&&(e=t.getNaturalFrequency())}),1/(2*Math.PI*e)*.9}function u(t){var r=document.getElementById(\"vertexShader\").text;t.initTextureFromData(\"u_position\",W,W,\"FLOAT\",D,!0),t.initTextureFromData(\"u_lastPosition\",W,W,\"FLOAT\",A,!0),t.initTextureFromData(\"u_lastLastPosition\",W,W,\"FLOAT\",S,!0),t.initTextureFromData(\"u_velocity\",W,W,\"FLOAT\",B,!0),t.initTextureFromData(\"u_lastVelocity\",W,W,\"FLOAT\",w,!0),t.initTextureFromData(\"u_theta\",ee,ee,\"FLOAT\",j,!0),t.initTextureFromData(\"u_lastTheta\",ee,ee,\"FLOAT\",J,!0),t.initTextureFromData(\"u_normals\",Z,Z,\"FLOAT\",G,!0),t.initFrameBufferForTexture(\"u_position\",!0),t.initFrameBufferForTexture(\"u_lastPosition\",!0),t.initFrameBufferForTexture(\"u_lastLastPosition\",!0),t.initFrameBufferForTexture(\"u_velocity\",!0),t.initFrameBufferForTexture(\"u_lastVelocity\",!0),t.initFrameBufferForTexture(\"u_theta\",!0),t.initFrameBufferForTexture(\"u_lastTheta\",!0),t.initFrameBufferForTexture(\"u_normals\",!0),t.initTextureFromData(\"u_meta\",W,W,\"FLOAT\",z,!0),t.initTextureFromData(\"u_meta2\",W,W,\"FLOAT\",O,!0),t.initTextureFromData(\"u_nominalTrinagles\",Z,Z,\"FLOAT\",N,!0),t.initTextureFromData(\"u_nodeCreaseMeta\",te,te,\"FLOAT\",q,!0),t.initTextureFromData(\"u_creaseMeta2\",ee,ee,\"FLOAT\",R,!0),t.initTextureFromData(\"u_nodeFaceMeta\",re,re,\"FLOAT\",H,!0),t.initTextureFromData(\"u_creaseGeo\",ee,ee,\"FLOAT\",K,!0),t.initFrameBufferForTexture(\"u_creaseGeo\",!0),t.initTextureFromData(\"u_faceVertexIndices\",Z,Z,\"FLOAT\",b,!0),t.initTextureFromData(\"u_nominalTriangles\",Z,Z,\"FLOAT\",N,!0),t.createProgram(\"positionCalc\",r,document.getElementById(\"positionCalcShader\").text),t.setUniformForProgram(\"positionCalc\",\"u_velocity\",0,\"1i\"),t.setUniformForProgram(\"positionCalc\",\"u_lastPosition\",1,\"1i\"),t.setUniformForProgram(\"positionCalc\",\"u_mass\",2,\"1i\"),t.setUniformForProgram(\"positionCalc\",\"u_textureDim\",[W,W],\"2f\"),t.createProgram(\"velocityCalcVerlet\",r,document.getElementById(\"velocityCalcVerletShader\").text),t.setUniformForProgram(\"velocityCalcVerlet\",\"u_position\",0,\"1i\"),t.setUniformForProgram(\"velocityCalcVerlet\",\"u_lastPosition\",1,\"1i\"),t.setUniformForProgram(\"velocityCalcVerlet\",\"u_mass\",2,\"1i\"),t.setUniformForProgram(\"velocityCalcVerlet\",\"u_textureDim\",[W,W],\"2f\"),t.createProgram(\"velocityCalc\",r,document.getElementById(\"velocityCalcShader\").text),t.setUniformForProgram(\"velocityCalc\",\"u_lastPosition\",0,\"1i\"),t.setUniformForProgram(\"velocityCalc\",\"u_lastVelocity\",1,\"1i\"),t.setUniformForProgram(\"velocityCalc\",\"u_originalPosition\",2,\"1i\"),t.setUniformForProgram(\"velocityCalc\",\"u_externalForces\",3,\"1i\"),t.setUniformForProgram(\"velocityCalc\",\"u_mass\",4,\"1i\"),t.setUniformForProgram(\"velocityCalc\",\"u_meta\",5,\"1i\"),t.setUniformForProgram(\"velocityCalc\",\"u_beamMeta\",6,\"1i\"),t.setUniformForProgram(\"velocityCalc\",\"u_creaseMeta\",7,\"1i\"),t.setUniformForProgram(\"velocityCalc\",\"u_nodeCreaseMeta\",8,\"1i\"),t.setUniformForProgram(\"velocityCalc\",\"u_normals\",9,\"1i\"),t.setUniformForProgram(\"velocityCalc\",\"u_theta\",10,\"1i\"),t.setUniformForProgram(\"velocityCalc\",\"u_creaseGeo\",11,\"1i\"),t.setUniformForProgram(\"velocityCalc\",\"u_meta2\",12,\"1i\"),t.setUniformForProgram(\"velocityCalc\",\"u_nodeFaceMeta\",13,\"1i\"),t.setUniformForProgram(\"velocityCalc\",\"u_nominalTriangles\",14,\"1i\"),t.setUniformForProgram(\"velocityCalc\",\"u_textureDim\",[W,W],\"2f\"),t.setUniformForProgram(\"velocityCalc\",\"u_textureDimEdges\",[X,X],\"2f\"),t.setUniformForProgram(\"velocityCalc\",\"u_textureDimFaces\",[Z,Z],\"2f\"),t.setUniformForProgram(\"velocityCalc\",\"u_textureDimCreases\",[ee,ee],\"2f\"),t.setUniformForProgram(\"velocityCalc\",\"u_textureDimNodeCreases\",[te,te],\"2f\"),t.setUniformForProgram(\"velocityCalc\",\"u_textureDimNodeFaces\",[re,re],\"2f\"),t.setUniformForProgram(\"velocityCalc\",\"u_creasePercent\",e.creasePercent,\"1f\"),t.setUniformForProgram(\"velocityCalc\",\"u_axialStiffness\",e.axialStiffness,\"1f\"),t.setUniformForProgram(\"velocityCalc\",\"u_faceStiffness\",e.faceStiffness,\"1f\"),t.setUniformForProgram(\"velocityCalc\",\"u_calcFaceStrain\",e.calcFaceStrain,\"1f\"),t.createProgram(\"positionCalcVerlet\",r,document.getElementById(\"positionCalcVerletShader\").text),t.setUniformForProgram(\"positionCalcVerlet\",\"u_lastPosition\",0,\"1i\"),t.setUniformForProgram(\"positionCalcVerlet\",\"u_lastLastPosition\",1,\"1i\"),t.setUniformForProgram(\"positionCalcVerlet\",\"u_lastVelocity\",2,\"1i\"),t.setUniformForProgram(\"positionCalcVerlet\",\"u_originalPosition\",3,\"1i\"),t.setUniformForProgram(\"positionCalcVerlet\",\"u_externalForces\",4,\"1i\"),t.setUniformForProgram(\"positionCalcVerlet\",\"u_mass\",5,\"1i\"),t.setUniformForProgram(\"positionCalcVerlet\",\"u_meta\",6,\"1i\"),t.setUniformForProgram(\"positionCalcVerlet\",\"u_beamMeta\",7,\"1i\"),t.setUniformForProgram(\"positionCalcVerlet\",\"u_creaseMeta\",8,\"1i\"),t.setUniformForProgram(\"positionCalcVerlet\",\"u_nodeCreaseMeta\",9,\"1i\"),t.setUniformForProgram(\"positionCalcVerlet\",\"u_normals\",10,\"1i\"),t.setUniformForProgram(\"positionCalcVerlet\",\"u_theta\",11,\"1i\"),t.setUniformForProgram(\"positionCalcVerlet\",\"u_creaseGeo\",12,\"1i\"),t.setUniformForProgram(\"positionCalcVerlet\",\"u_meta2\",13,\"1i\"),t.setUniformForProgram(\"positionCalcVerlet\",\"u_nodeFaceMeta\",14,\"1i\"),t.setUniformForProgram(\"positionCalcVerlet\",\"u_nominalTriangles\",15,\"1i\"),t.setUniformForProgram(\"positionCalcVerlet\",\"u_textureDim\",[W,W],\"2f\"),t.setUniformForProgram(\"positionCalcVerlet\",\"u_textureDimEdges\",[X,X],\"2f\"),t.setUniformForProgram(\"positionCalcVerlet\",\"u_textureDimFaces\",[Z,Z],\"2f\"),t.setUniformForProgram(\"positionCalcVerlet\",\"u_textureDimCreases\",[ee,ee],\"2f\"),t.setUniformForProgram(\"positionCalcVerlet\",\"u_textureDimNodeCreases\",[te,te],\"2f\"),t.setUniformForProgram(\"positionCalcVerlet\",\"u_textureDimNodeFaces\",[re,re],\"2f\"),t.setUniformForProgram(\"positionCalcVerlet\",\"u_creasePercent\",e.creasePercent,\"1f\"),t.setUniformForProgram(\"positionCalcVerlet\",\"u_axialStiffness\",e.axialStiffness,\"1f\"),t.setUniformForProgram(\"positionCalcVerlet\",\"u_faceStiffness\",e.faceStiffness,\"1f\"),t.setUniformForProgram(\"positionCalcVerlet\",\"u_calcFaceStrain\",e.calcFaceStrain,\"1f\"),t.createProgram(\"thetaCalc\",r,document.getElementById(\"thetaCalcShader\").text),t.setUniformForProgram(\"thetaCalc\",\"u_normals\",0,\"1i\"),t.setUniformForProgram(\"thetaCalc\",\"u_lastTheta\",1,\"1i\"),t.setUniformForProgram(\"thetaCalc\",\"u_creaseVectors\",2,\"1i\"),t.setUniformForProgram(\"thetaCalc\",\"u_lastPosition\",3,\"1i\"),t.setUniformForProgram(\"thetaCalc\",\"u_originalPosition\",4,\"1i\"),t.setUniformForProgram(\"thetaCalc\",\"u_textureDim\",[W,W],\"2f\"),t.setUniformForProgram(\"thetaCalc\",\"u_textureDimFaces\",[Z,Z],\"2f\"),t.setUniformForProgram(\"thetaCalc\",\"u_textureDimCreases\",[ee,ee],\"2f\"),t.createProgram(\"normalCalc\",r,document.getElementById(\"normalCalc\").text),t.setUniformForProgram(\"normalCalc\",\"u_faceVertexIndices\",0,\"1i\"),t.setUniformForProgram(\"normalCalc\",\"u_lastPosition\",1,\"1i\"),t.setUniformForProgram(\"normalCalc\",\"u_originalPosition\",2,\"1i\"),t.setUniformForProgram(\"normalCalc\",\"u_textureDim\",[W,W],\"2f\"),t.setUniformForProgram(\"normalCalc\",\"u_textureDimFaces\",[Z,Z],\"2f\"),t.createProgram(\"packToBytes\",r,document.getElementById(\"packToBytesShader\").text),t.initTextureFromData(\"outputBytes\",4*W,W,\"UNSIGNED_BYTE\",null,!0),t.initFrameBufferForTexture(\"outputBytes\",!0),t.setUniformForProgram(\"packToBytes\",\"u_floatTextureDim\",[W,W],\"2f\"),t.setUniformForProgram(\"packToBytes\",\"u_floatTexture\",0,\"1i\"),t.createProgram(\"zeroTexture\",r,document.getElementById(\"zeroTexture\").text),t.createProgram(\"zeroThetaTexture\",r,document.getElementById(\"zeroThetaTexture\").text),t.setUniformForProgram(\"zeroThetaTexture\",\"u_theta\",0,\"1i\"),t.setUniformForProgram(\"zeroThetaTexture\",\"u_textureDimCreases\",[ee,ee],\"2f\"),t.createProgram(\"centerTexture\",r,document.getElementById(\"centerTexture\").text),t.setUniformForProgram(\"centerTexture\",\"u_lastPosition\",0,\"1i\"),t.setUniformForProgram(\"centerTexture\",\"u_textureDim\",[W,W],\"2f\"),t.createProgram(\"copyTexture\",r,document.getElementById(\"copyTexture\").text),t.setUniformForProgram(\"copyTexture\",\"u_orig\",0,\"1i\"),t.setUniformForProgram(\"copyTexture\",\"u_textureDim\",[W,W],\"2f\"),t.createProgram(\"updateCreaseGeo\",r,document.getElementById(\"updateCreaseGeo\").text),t.setUniformForProgram(\"updateCreaseGeo\",\"u_lastPosition\",0,\"1i\"),t.setUniformForProgram(\"updateCreaseGeo\",\"u_originalPosition\",1,\"1i\"),t.setUniformForProgram(\"updateCreaseGeo\",\"u_creaseMeta2\",2,\"1i\"),t.setUniformForProgram(\"updateCreaseGeo\",\"u_textureDim\",[W,W],\"2f\"),t.setUniformForProgram(\"updateCreaseGeo\",\"u_textureDimCreases\",[ee,ee],\"2f\"),t.setSize(W,W),Q=!0}function m(e){if(1==e)return 2;for(var t=0;t<e;t++)if(Math.pow(2,2*t)>=e)return Math.pow(2,t);return console.warn(\"no texture size found for \"+e+\" items\"),2}function c(t){for(var r=0,o=0;o<d.length;o++){t&&(z[4*o]=r,z[4*o+1]=d[o].numBeams());for(var a=0;a<d[o].beams.length;a++){var i=d[o].beams[a];E[4*r]=i.getK(),E[4*r+1]=i.getD(),t&&(E[4*r+2]=i.getLength(),E[4*r+3]=i.getOtherNode(d[o]).getIndex()),r+=1}}e.gpuMath.initTextureFromData(\"u_beamMeta\",X,X,\"FLOAT\",E,!0),Q&&(e.gpuMath.setProgram(\"velocityCalc\"),e.gpuMath.setUniformForProgram(\"velocityCalc\",\"u_axialStiffness\",e.axialStiffness,\"1f\"),e.gpuMath.setUniformForProgram(\"velocityCalc\",\"u_faceStiffness\",e.faceStiffness,\"1f\"),e.gpuMath.setProgram(\"positionCalcVerlet\"),e.gpuMath.setUniformForProgram(\"positionCalcVerlet\",\"u_axialStiffness\",e.axialStiffness,\"1f\"),e.gpuMath.setUniformForProgram(\"positionCalcVerlet\",\"u_faceStiffness\",e.faceStiffness,\"1f\"),s())}function g(){for(var t=0;t<d.length;t++){var r=d[t].getExternalForce();L[4*t]=r.x,L[4*t+1]=r.y,L[4*t+2]=r.z}e.gpuMath.initTextureFromData(\"u_externalForces\",W,W,\"FLOAT\",L,!0)}function f(){for(var t=0;t<d.length;t++)I[4*t+1]=d[t].isFixed()?1:0;e.gpuMath.initTextureFromData(\"u_mass\",W,W,\"FLOAT\",I,!0)}function F(){for(var t=0;t<d.length;t++){var r=d[t].getOriginalPosition();V[4*t]=r.x,V[4*t+1]=r.y,V[4*t+2]=r.z}e.gpuMath.initTextureFromData(\"u_originalPosition\",W,W,\"FLOAT\",V,!0)}function P(){for(var t=0;t<v.length;t++){var r=4*t,o=v[t].edge.nodes;Y[r]=o[0].getIndex(),Y[r+1]=o[1].getIndex()}e.gpuMath.initTextureFromData(\"u_creaseVectors\",ee,ee,\"FLOAT\",Y,!0)}function p(t){for(var r=0;r<v.length;r++){var o=v[r];k[4*r]=o.getK(),t&&(k[4*r+2]=o.getTargetTheta())}e.gpuMath.initTextureFromData(\"u_creaseMeta\",ee,ee,\"FLOAT\",k,!0)}function h(){for(var t=0;t<d.length;t++){var r=d[t].getRelativePosition();A[4*t]=r.x,A[4*t+1]=r.y,A[4*t+2]=r.z}e.gpuMath.initTextureFromData(\"u_lastPosition\",W,W,\"FLOAT\",A,!0),e.gpuMath.initFrameBufferForTexture(\"u_lastPosition\",!0)}function C(t){Q&&(e.gpuMath.setProgram(\"velocityCalc\"),e.gpuMath.setUniformForProgram(\"velocityCalc\",\"u_creasePercent\",t,\"1f\"),e.gpuMath.setProgram(\"positionCalcVerlet\"),e.gpuMath.setUniformForProgram(\"positionCalcVerlet\",\"u_creasePercent\",t,\"1f\"))}function x(){W=m(d.length);for(var t=0,r=[],o=0;o<d.length;o++){r.push([]);for(var a=0;a<y.length;a++)y[a].indexOf(o)>=0&&(r[o].push(a),t++)}re=m(t);for(var i=0,o=0;o<d.length;o++)i+=d[o].numBeams();X=m(i);var n=v.length;ee=m(n);for(var s=0,o=0;o<d.length;o++)s+=d[o].numCreases();s+=2*n,te=m(s);var l=y.length;Z=m(l),V=new Float32Array(W*W*4),D=new Float32Array(W*W*4),A=new Float32Array(W*W*4),S=new Float32Array(W*W*4),B=new Float32Array(W*W*4),w=new Float32Array(W*W*4),L=new Float32Array(W*W*4),I=new Float32Array(W*W*4),z=new Float32Array(W*W*4),O=new Float32Array(W*W*4),E=new Float32Array(X*X*4),G=new Float32Array(Z*Z*4),b=new Float32Array(Z*Z*4),k=new Float32Array(ee*ee*4),H=new Float32Array(re*re*4),N=new Float32Array(Z*Z*4),q=new Float32Array(te*te*4),R=new Float32Array(ee*ee*4),K=new Float32Array(ee*ee*4),Y=new Float32Array(ee*ee*4),j=new Float32Array(ee*ee*4),J=new Float32Array(ee*ee*4);for(var o=0;o<y.length;o++){var u=y[o];b[4*o]=u[0],b[4*o+1]=u[1],b[4*o+2]=u[2];var _=d[u[0]].getOriginalPosition(),h=d[u[1]].getOriginalPosition(),x=d[u[2]].getOriginalPosition(),T=h.clone().sub(_).normalize(),U=x.clone().sub(_).normalize(),M=x.clone().sub(h).normalize();N[4*o]=Math.acos(T.dot(U)),N[4*o+1]=Math.acos(-1*T.dot(M)),N[4*o+2]=Math.acos(U.dot(M)),Math.abs(N[4*o]+N[4*o+1]+N[4*o+2]-Math.PI)>.1&&console.warn(\"bad angles\")}for(var o=0;o<W*W;o++)I[4*o+1]=1;for(var o=0;o<ee*ee;o++)o>=n?(J[4*o+2]=-1,J[4*o+3]=-1):(J[4*o+2]=v[o].getNormal1Index(),J[4*o+3]=v[o].getNormal2Index());for(var $=0,o=0;o<d.length;o++){O[4*o]=$;var Q=r[o].length;O[4*o+1]=Q;for(var a=0;a<Q;a++){var oe=4*($+a),u=y[r[o][a]];H[oe]=r[o][a],H[oe+1]=u[0]==o?-1:u[0],H[oe+2]=u[1]==o?-1:u[1],H[oe+3]=u[2]==o?-1:u[2]}$+=Q}for(var $=0,o=0;o<d.length;o++){I[4*o]=d[o].getSimMass(),z[4*o+2]=$;var ae=d[o].creases,ie=d[o].invCreases;z[4*o+3]=ae.length+ie.length;for(var a=0;a<ae.length;a++)q[4*$]=ae[a].getIndex(),q[4*$+1]=ae[a].getNodeIndex(d[o]),$++;for(var a=0;a<ie.length;a++)q[4*$]=ie[a].getIndex(),q[4*$+1]=ie[a].getNodeIndex(d[o]),$++}for(var o=0;o<v.length;o++){var ne=v[o];R[4*o]=ne.node1.getIndex(),R[4*o+1]=ne.node2.getIndex(),R[4*o+2]=ne.edge.nodes[0].getIndex(),R[4*o+3]=ne.edge.nodes[1].getIndex(),$++}F(),c(!0),f(),g(),p(!0),P(),C(e.creasePercent)}e.gpuMath=initGPUMath();var d,T,y,v,U,M,V,D,A,S,B,w,L,I,z,O,E,G,b,N,H,k,R,q,K,Y,j,J,Q=!1,W=0,X=0,Z=0,ee=0,te=0,re=0,oe=$(\"#globalError\");return{syncNodesAndEdges:t,updateFixed:f,solve:o,render:n,reset:r}}</script> <script type=\"text/javascript\">function initRigidSolver(){function e(){d=globals.model.getNodes(),s=globals.model.getEdges(),c=globals.model.getFaces(),u=globals.model.getCreases(),v=globals.model.getPositionsArray(),i()}function n(){g(),t()}function r(){}function o(e){var n,r=numeric.svd(e),o=r.S[0],t=r.U,a=r.S,l=r.V,i=e.length,g=e[0].length,d=Math.max(i,g)*numeric.epsilon*o,s=a.length,c=new Array(s);for(n=s-1;-1!==n;n--)a[n]>d?c[n]=1/a[n]:c[n]=0;return numeric.dot(numeric.dot(l,numeric.diag(c)),numeric.transpose(t))}function t(){var e=numeric.dot(numeric.sub(numeric.identity(3*d.length),numeric.dot(numeric.transpose(o(numeric.transpose(f))),f)),h);console.log(e),a(e)}function a(e){for(var n=0;n<d.length;n++){var r=new THREE.Vector3(e[3*n],e[3*n+1],e[3*n+2]),o=d[n].renderDelta(r);v[3*n]=o.x,v[3*n+1]=o.y,v[3*n+2]=o.z}for(var n=0;n<s.length;n++)s[n].render()}function l(e,n,r){void 0===n&&(n=0),void 0===r&&(r=0);for(var o=[],t=0;t<e;t++){0==n?o.push(0):o.push([]);for(var a=0;a<n;a++){0==r?o[t].push(0):o[t].push([]);for(var l=0;l<r;l++)o[t][a].push(0)}}return o}function i(){f=l(s.length,3*d.length),h=l(3*d.length)}function g(){var e=d.length,n=s.length;h=l(3*e);for(var r=0;r<n;r++){var o=s[r],t=o.nodes,a=o.getVector(t[0]),i=o.getOriginalLength(),g=a.length()-i,c=globals.axialStiffness*g/i;a.normalize();var m=t[0].getIndex();f[r][3*m]=a.x,f[r][3*m+1]=a.y,f[r][3*m+2]=a.z,h[3*m]-=a.x*c,h[3*m+1]-=a.y*c,h[3*m+2]-=a.z*c,m=t[1].getIndex(),f[r][3*m]=-a.x,f[r][3*m+1]=-a.y,f[r][3*m+2]=-a.z,h[3*m]+=a.x*c,h[3*m+1]+=a.y*c,h[3*m+2]+=a.z*c}for(var x=globals.model.getGeometry(),y=x.index.array,E=[],z=new THREE.Vector3,b=new THREE.Vector3,r=0;r<y.length;r+=3){var V=3*y[r],p=new THREE.Vector3(v[V],v[V+1],v[V+2]);V=3*y[r+1];var T=new THREE.Vector3(v[V],v[V+1],v[V+2]);V=3*y[r+2];var w=new THREE.Vector3(v[V],v[V+1],v[V+2]);z.subVectors(w,T),b.subVectors(p,T),z.cross(b),z.normalize(),E.push(z.clone())}for(var r=0;r<u.length;r++){var I=u[r],R=E[I.face1Index],H=E[I.face2Index],S=R.dot(H);S<-1?S=-1:S>1&&(S=1);var N,A,L=I.getVector().normalize(),M=Math.atan2(R.clone().cross(L).dot(H),S),g=M-globals.creasePercent*I.targetTheta,c=I.getK()*g;if(!I.node1.fixed){var m=I.node1.getIndex(),P=I.getLengthToNode1(),N=R.clone().divideScalar(P);h[3*m]-=N.x*c,h[3*m+1]-=N.y*c,h[3*m+2]-=N.z*c}if(!I.node2.fixed){var m=I.node2.getIndex(),P=I.getLengthToNode2(),A=H.clone().divideScalar(P);h[3*m]-=A.x*c,h[3*m+1]-=A.y*c,h[3*m+2]-=A.z*c}for(var C=I.edge.nodes,D=0;D<C.length;D++){var F=C[D];if(!F.fixed){var m=F.getIndex();h[3*m]+=(N.x+A.x)/2*c,h[3*m+1]+=(N.y+A.y)/2*c,h[3*m+2]+=(N.z+A.z)/2*c}}}}var d,s,c,u,v,f,h;return{syncNodesAndEdges:e,solve:n,reset:r}}</script> <script type=\"text/javascript\">function initPattern(e){function t(){Z.vertices_coords=[],Z.edges_vertices=[],Z.edges_assignment=[],Z.edges_foldAngle=[],delete Z.vertices_vertices,delete Z.faces_vertices,delete Z.vertices_edges,K={}}function r(){t(),Q=[],Y=[],ee=[],te=[],re=[],se=[],ne=[],ie=[],le=[],ae=[],oe=[],ce=[],ge=[]}function s(){return\"border\"==u(g($(this)))}function n(){var e=$(this);if(\"mountain\"==u(g(e))){var t=c(e);return this.targetAngle=180*-t,!0}return!1}function i(){var e=$(this);if(\"valley\"==u(g(e))){var t=c(e);return this.targetAngle=180*t,!0}return!1}function l(){return\"cut\"==u(g($(this)))}function a(){return\"triangulation\"==u(g($(this)))}function o(){return\"hinge\"==u(g($(this)))}function c(e){var t=e.css(\"opacity\")||e.attr(\"opacity\")||e[0].style&&e[0].style.opacity,r=e.css(\"stroke-opacity\")||e.attr(\"stroke-opacity\")||e[0].style&&e[0].style.strokeOpacity;return t=parseFloat(t),r=parseFloat(r),isNaN(t)&&(t=1),isNaN(r)&&(t=1),t*r}function g(e){var t=e.css(\"stroke\")||e.attr(\"stroke\")||e[0].style&&e[0].style.stroke;return void 0===t?null:(t=t.replace(/\\s/g,\"\"),t.toLowerCase())}function u(e){return\"#000000\"==e||\"#000\"==e||\"black\"==e||\"rgb(0,0,0)\"==e?\"border\":\"#ff0000\"==e||\"#f00\"==e||\"red\"==e||\"rgb(255,0,0)\"==e?\"mountain\":\"#0000ff\"==e||\"#00f\"==e||\"blue\"==e||\"rgb(0,0,255)\"==e?\"valley\":\"#00ff00\"==e||\"#0f0\"==e||\"green\"==e||\"rgb(0,255,0)\"==e?\"cut\":\"#ffff00\"==e||\"#ff0\"==e||\"yellow\"==e||\"rgb(255,255,0)\"==e?\"triangulation\":\"#ff00ff\"==e||\"#f0f\"==e||\"magenta\"==e||\"rgb(255,0,255)\"==e?\"hinge\":(ge.push(e),null)}function h(e){return\"B\"==e?\"#000\":\"M\"==e?\"#f00\":\"V\"==e?\"#00f\":\"C\"==e?\"#0f0\":\"F\"==e?\"#ff0\":\"U\"==e?\"#f0f\":\"#0ff\"}function v(e,t){return null===e||\"F\"==t?1:Math.abs(e)/180}function f(e,t,r,s,n,i,l,a){p(e,t,s.filter(r)),m(e,t,n.filter(r)),b(e,t,i.filter(r)),y(e,t,l.filter(r)),w(e,t,a.filter(r))}function d(e,t){var r=[],s=t;do{s.transform&&r.push.apply(r,s.transform.baseVal),s=s.parentNode}while(s&&\"svg\"!==s.nodeName);for(var n=0;n<r.length;n++){var i=r[n],l=[[i.matrix.a,i.matrix.c,i.matrix.e],[i.matrix.b,i.matrix.d,i.matrix.f],[0,0,1]],a=numeric.dot(l,[e.x,e.z,1]);e.x=a[0],e.z=a[1]}}function p(e,t,r){for(var s=0;s<r.length;s++){var n=r[s],i=[];if(void 0===n||void 0===n.getPathData){return $('<div id=\"coverImg\" style=\"background: url(assets/doc/crane.gif) no-repeat center center fixed;-webkit-background-size: cover;-moz-background-size: cover;-o-background-size: cover;background-size: cover;\"></div>').appendTo($(\"body\")),$(\"#noSupportModal\").modal(\"show\"),void console.warn(\"path parser not supported\")}for(var l=null,a=n.getPathData(),o=0;o<a.length;o++){var c=a[o];switch(c.type){case\"m\":var g;0===o?g=new THREE.Vector3(c.values[0],0,c.values[1]):(g=e[e.length-1].clone(),g.x+=c.values[0],g.z+=c.values[1]),l=e.length,e.push(g),i.push(g);break;case\"l\":t.push([e.length-1,e.length]),n.targetAngle&&t.length>0&&t[t.length-1].push(n.targetAngle);var g=e[e.length-1].clone();g.x+=c.values[0],g.z+=c.values[1],e.push(g),i.push(g);break;case\"v\":t.push([e.length-1,e.length]),n.targetAngle&&t.length>0&&t[t.length-1].push(n.targetAngle);var g=e[e.length-1].clone();g.z+=c.values[0],e.push(g),i.push(g);break;case\"h\":t.push([e.length-1,e.length]),n.targetAngle&&t.length>0&&t[t.length-1].push(n.targetAngle);var g=e[e.length-1].clone();g.x+=c.values[0],e.push(g),i.push(g);break;case\"M\":var g=new THREE.Vector3(c.values[0],0,c.values[1]);l=e.length,e.push(g),i.push(g);break;case\"L\":t.push([e.length-1,e.length]),n.targetAngle&&t.length>0&&t[t.length-1].push(n.targetAngle);var g=new THREE.Vector3(c.values[0],0,c.values[1]);e.push(g),i.push(g);break;case\"V\":t.push([e.length-1,e.length]),n.targetAngle&&t.length>0&&t[t.length-1].push(n.targetAngle);var g=e[e.length-1].clone();g.z=c.values[0],e.push(g),i.push(g);break;case\"H\":t.push([e.length-1,e.length]),n.targetAngle&&t.length>0&&t[t.length-1].push(n.targetAngle);var g=e[e.length-1].clone();g.x=c.values[0],e.push(g),i.push(g);break;case\"z\":case\"Z\":null!=l&&(t.push([e.length-1,l]),l=null)}}for(var o=0;o<i.length;o++)d(i[o],n)}}function m(e,t,r){for(var s=0;s<r.length;s++){var n=r[s];e.push(new THREE.Vector3(n.x1.baseVal.value,0,n.y1.baseVal.value)),e.push(new THREE.Vector3(n.x2.baseVal.value,0,n.y2.baseVal.value)),t.push([e.length-2,e.length-1]),n.targetAngle&&t[t.length-1].push(n.targetAngle),d(e[e.length-2],n),d(e[e.length-1],n)}}function b(e,t,r){for(var s=0;s<r.length;s++){var n=r[s],i=n.x.baseVal.value,l=n.y.baseVal.value,a=n.width.baseVal.value,o=n.height.baseVal.value;e.push(new THREE.Vector3(i,0,l)),e.push(new THREE.Vector3(i+a,0,l)),e.push(new THREE.Vector3(i+a,0,l+o)),e.push(new THREE.Vector3(i,0,l+o)),t.push([e.length-4,e.length-3]),t.push([e.length-3,e.length-2]),t.push([e.length-2,e.length-1]),t.push([e.length-1,e.length-4]);for(var c=1;c<=4;c++)n.targetAngle&&t[t.length-c].push(n.targetAngle),d(e[e.length-c],n)}}function y(e,t,r){for(var s=0;s<r.length;s++)for(var n=r[s],i=0;i<n.points.length;i++)e.push(new THREE.Vector3(n.points[i].x,0,n.points[i].y)),d(e[e.length-1],n),i<n.points.length-1?t.push([e.length-1,e.length]):t.push([e.length-1,e.length-n.points.length]),n.targetAngle&&t[t.length-1].push(n.targetAngle)}function w(e,t,r){for(var s=0;s<r.length;s++)for(var n=r[s],i=0;i<n.points.length;i++)e.push(new THREE.Vector3(n.points[i].x,0,n.points[i].y)),d(e[e.length-1],n),i>0&&(t.push([e.length-1,e.length-2]),n.targetAngle&&t[t.length-1].push(n.targetAngle))}function x(t,c){t=t.replace(/^(data:image\\/svg\\+xml;base64,)77u\\//,\"$1\"),ue.load(t,function(t){var c=$(t);if(c.find(\"parsererror\").length)return e.warn(\"Error parsing SVG: \"+t.innerText),console.warn(c.find(\"parsererror\")[0]);$(t).appendTo(\"body\"),r(),c.find(\"symbol\").remove(),c.find(\"defs > :not(style)\").remove();var g=c.find(\"path\"),u=c.find(\"line\"),h=c.find(\"rect\"),v=c.find(\"polygon\"),d=c.find(\"polyline\");if(g.css({fill:\"none\",\"stroke-dasharray\":\"none\"}),u.css({fill:\"none\",\"stroke-dasharray\":\"none\"}),h.css({fill:\"none\",\"stroke-dasharray\":\"none\"}),v.css({fill:\"none\",\"stroke-dasharray\":\"none\"}),d.css({fill:\"none\",\"stroke-dasharray\":\"none\"}),f(Q,te,s,g,u,h,v,d),f(Q,Y,n,g,u,h,v,d),f(Q,ee,i,g,u,h,v,d),f(Q,re,l,g,u,h,v,d),f(Q,se,a,g,u,h,v,d),f(Q,ne,o,g,u,h,v,d),ge.length>0){ge=_.uniq(ge);var p=\"Some objects found with the following stroke colors:<br/><br/>\";_.each(ge,function(e){p+=\"<span style='background:\"+e+\"' class='colorSwatch'></span>\"+e+\"<br/>\"}),p+=\"<br/>These objects were ignored.<br/>  Please check that your file is set up correctly, <br/>see <b>File > Design Tips</b> for more information.\",e.warn(p)}c.remove(),A(Q,te,Y,ee,re,se,ne)&&E()},function(){},function(r){e.warn(\"Error loading SVG \"+t+\" : \"+r),console.warn(r)})}function E(){$(\"#svgViewer\").empty();for(var t=new THREE.Vector3(-1/0,-1/0,-1/0),r=new THREE.Vector3(1/0,1/0,1/0),s=0;s<K.vertices_coords.length;s++){var n=new THREE.Vector3(K.vertices_coords[s][0],K.vertices_coords[s][1],K.vertices_coords[s][2]);t.max(n),r.min(n)}if(r.x===1/0)return void(0==ge.length&&e.warn(\"no geometry found in file\"));t.sub(r);var i=new THREE.Vector3(.1,0,.1),l=Math.max(t.x,t.y,t.z);if(0!=l){if(!((K.frame_classes&&K.frame_classes.includes(\"creasePattern\"))|t.y<l/100))return void console.log(\"Fold data is not a crease pattern, skipping SVG generation\");var a=l/300;i.multiplyScalar(l),r.sub(i),t.add(i.multiplyScalar(2));var o=r.x+\" \"+r.z+\" \"+t.x+\" \"+t.z,c=\"http://www.w3.org/2000/svg\",g=document.createElementNS(c,\"svg\");g.setAttribute(\"viewBox\",o);for(var s=0;s<K.edges_vertices.length;s++){var u=document.createElementNS(c,\"line\"),f=K.edges_vertices[s],n=K.vertices_coords[f[0]];u.setAttribute(\"stroke\",h(K.edges_assignment[s])),u.setAttribute(\"opacity\",v(K.edges_foldAngle[s],K.edges_assignment[s])),u.setAttribute(\"x1\",n[0]),u.setAttribute(\"y1\",n[2]),n=K.vertices_coords[f[1]],u.setAttribute(\"x2\",n[0]),u.setAttribute(\"y2\",n[2]),u.setAttribute(\"stroke-width\",a),g.appendChild(u)}$(\"#svgViewer\").html(g)}}function A(t,r,s,n,i,l,a){return _.each(t,function(e){Z.vertices_coords.push([e.x,e.z])}),_.each(r,function(e){Z.edges_vertices.push([e[0],e[1]]),Z.edges_assignment.push(\"B\"),Z.edges_foldAngle.push(null)}),_.each(s,function(e){Z.edges_vertices.push([e[0],e[1]]),Z.edges_assignment.push(\"M\"),Z.edges_foldAngle.push(e[2])}),_.each(n,function(e){Z.edges_vertices.push([e[0],e[1]]),Z.edges_assignment.push(\"V\"),Z.edges_foldAngle.push(e[2])}),_.each(l,function(e){Z.edges_vertices.push([e[0],e[1]]),Z.edges_assignment.push(\"F\"),Z.edges_foldAngle.push(0)}),_.each(a,function(e){Z.edges_vertices.push([e[0],e[1]]),Z.edges_assignment.push(\"U\"),Z.edges_foldAngle.push(null)}),_.each(i,function(e){Z.edges_vertices.push([e[0],e[1]]),Z.edges_assignment.push(\"C\"),Z.edges_foldAngle.push(null)}),0==Z.vertices_coords.length||0==Z.edges_vertices.length?(e.warn(\"No valid geometry found in SVG, be sure to ungroup all and remove all clipping masks.\"),!1):(Z=X.filter.collapseNearbyVertices(Z,e.vertTol),Z=X.filter.removeLoopEdges(Z),Z=X.filter.removeDuplicateEdges_vertices(Z),Z=B(Z,e.vertTol),Z=X.filter.collapseNearbyVertices(Z,e.vertTol),Z=X.filter.removeLoopEdges(Z),Z=X.filter.removeDuplicateEdges_vertices(Z),Z=X.convert.edges_vertices_to_vertices_vertices_unsorted(Z),Z=C(Z),Z=N(Z,.01),Z.vertices_vertices=X.convert.sort_vertices_vertices(Z),Z=X.convert.vertices_vertices_to_faces_vertices(Z),Z=T(Z),Z=z(Z),Z=k(Z),V(Z))}function V(t,r){for(var s=!0,n=0;n<t.vertices_coords.length;n++){var i=t.vertices_coords[n];2===i.length?t.vertices_coords[n]=[i[0],0,i[1]]:s=!1}K=JSON.parse(JSON.stringify(t)),X.filter.cutEdges(t).length>0&&(t=F(t),t=X.convert.edges_vertices_to_vertices_vertices_unsorted(t),t=N(t,.01)),delete t.vertices_vertices,delete t.vertices_edges,Z=P(t,s),ie=X.filter.mountainEdges(Z),le=X.filter.valleyEdges(Z),ae=X.filter.boundaryEdges(Z),oe=X.filter.unassignedEdges(Z),ce=X.filter.flatEdges(Z),$(\"#numMtns\").html(\"(\"+ie.length+\")\"),$(\"#numValleys\").html(\"(\"+le.length+\")\"),$(\"#numFacets\").html(\"(\"+ce.length+\")\"),$(\"#numBoundary\").html(\"(\"+ae.length+\")\"),$(\"#numPassive\").html(\"(\"+oe.length+\")\");var l=H(Z);if(r)return l;if(e.model.buildModel(Z,l),e.notifyPatternLoaded){var a={filename:e.filename,url:e.url,vertices:Z.vertices_coords?Z.vertices_coords.length:0,faces:Z.faces_vertices?Z.faces_vertices.length:0,edges:Z.edges_vertices?Z.edges_vertices.length:0};console.log(\" Pattern loading completed, notifying callbacks...\",a),e.isNFTProcessing&&e.model&&e.model.hideOrigami&&(console.log(\" NFT processing mode - hiding origami after pattern load\"),e.model.hideOrigami()),e.notifyPatternLoaded(a)}return!1===window.editMode||e.isNFTProcessing||e.hideUntilTextured||setTimeout(function(){e.threeView&&e.threeView.startAutoRotation&&!e.autoRotateEnabled&&(console.log(\" Pattern loaded in edit mode - starting auto rotation animation\"),e.threeView.startAutoRotation(!0,6e3),e.threeView.startSliderAnimation&&setTimeout(function(){e.threeView.startSliderAnimation(0,100,5e3,!0,5e3)},e.autoRotateWaitTime+1e3))},500),Z}function k(e){for(var t=0;t<e.faces_vertices.length;t++)e.faces_vertices[t].reverse();return e}function T(e){for(var t=[],r=0;r<e.vertices_coords.length;r++)t.push([]);for(var r=0;r<e.edges_vertices.length;r++){var s=e.edges_vertices[r];t[s[0]].push(r),t[s[1]].push(r)}return e.vertices_edges=t,e}function O(e){for(var t=[],r=0;r<e.vertices_coords.length;r++)t.push([]);for(var r=0;r<e.faces_vertices.length;r++)for(var s=e.faces_vertices[r],n=0;n<s.length;n++)t[s[n]].push(r);return e.vertices_faces=t,e}function R(e){for(var t=0;t<e.vertices_vertices.length;t++){for(var r=e.vertices_vertices[t],s=e.vertices_edges[t],n=[],i=0;i<r.length;i++){for(var l=-1,a=0;a<s.length;a++){var o=s[a];if(e.edges_vertices[o].indexOf(r[i])>=0){l=o;break}}l<0&&console.warn(\"no matching edge found, fix this\"),n.push(l)}e.vertices_edges[t]=n}return e}function F(e){e=R(e),e=O(e);for(var t=0;t<e.vertices_edges.length;t++){for(var r=[[]],s=0,n=e.vertices_edges[t],i=e.vertices_faces[t],l=0;l<n.length;l++){var a=n[l],o=e.edges_assignment[a];if(r[s].push(a),\"C\"==o){r.push([e.edges_vertices.length]),s++;var c=e.edges_vertices.length,g=e.edges_vertices[a];e.edges_vertices.push([g[0],g[1]]),e.edges_assignment[a]=\"B\",e.edges_foldAngle.push(null),e.edges_assignment.push(\"B\");var u=g[0];u==t&&(u=g[1]);var h=e.vertices_edges[u],v=h.indexOf(a);h.splice(v,0,c)}else if(\"B\"==o)if(0==l&&n.length>1){var f=n[1];if(\"B\"==e.edges_assignment[f]){var g=e.edges_vertices[a],u=g[0];u==t&&(u=g[1]);var d=e.edges_vertices[f],p=d[0];p==t&&(p=d[1]),S(e,e.vertices_faces[t],u,p)||(r.push([]),s++)}}else r[s].length>1&&(r.push([]),s++)}if(!(r.length<=1)){for(var _=r[s].length-1;_>=0;_--)r[0].unshift(r[s][_]);r.pop();for(var l=1;l<r.length;l++){var m=e.vertices_coords[t],b=e.vertices_coords.length;e.vertices_coords.push(m.slice());for(var y=[],_=0;_<r[l].length;_++){var a=r[l][_],g=e.edges_vertices[a],w=g[0];g[0]==t?(g[0]=b,w=g[1]):g[1]=b,y.push(w)}if(y.length<2)console.warn(\"problem here\");else for(var _=1;_<y.length;_++){for(var x=y[_],E=y[_-1],A=!1,V=0;V<i.length;V++){var k=e.faces_vertices[i[V]],T=k.indexOf(x),F=k.indexOf(E),z=k.indexOf(t);if(T>=0&&F>=0&&z>=0&&(1===Math.abs(T-z)||Math.abs(T-z)===k.length-1)&&(1===Math.abs(F-z)||Math.abs(F-z)===k.length-1)){A=!0,k[z]=b;break}}A||console.warn(\"problem here\")}}}}return delete e.vertices_faces,delete e.vertices_edges,delete e.vertices_vertices,e}function S(e,t,r,s){if(r==s)return!1;for(var n=0;n<t.length;n++){var i=e.faces_vertices[t[n]];if(i.indexOf(r)>=0&&i.indexOf(s)>=0)return!0}return!1}function z(e){for(var t=e.faces_vertices.length-1;t>=0;t--){for(var r=e.faces_vertices[t],s=!0,n=0;n<r.length;n++){var i=r[n],l=n+1;l>=r.length&&(l=0);for(var a=r[l],o=!1,c=0;c<e.vertices_edges[i].length;c++){var g=e.vertices_edges[i][c],u=e.edges_vertices[g];if(u[0]==i&&u[1]==a||u[1]==i&&u[0]==a){o=!0;if(\"B\"!=e.edges_assignment[g]){s=!1;break}}}if(o||console.warn(\"no connecting edge found on face\"),!s)break}s&&e.faces_vertices.splice(t,1)}return e}function H(t){for(var r=[],s=t.faces_vertices,n=0;n<t.edges_vertices.length;n++){var i=t.edges_assignment[n],l=t.edges_foldAngle[n];if(!(null===l&&!e.foldUseAngles||\"M\"!==i&&\"V\"!==i&&\"F\"!==i))for(var a=t.edges_vertices[n],o=a[0],c=a[1],g=[],u=0;u<s.length;u++){var h=s[u],v=[h[0],h[1],h[2]],f=v.indexOf(o);if(f>=0){var d=v.indexOf(c);if(d>=0&&(g.push(u),d>f?(v.splice(d,1),v.splice(f,1)):(v.splice(f,1),v.splice(d,1)),g.push(v[0]),4==g.length)){d-f!=1&&d-f!=-2||(g=[g[2],g[3],g[0],g[1]]),g.push(n),g.push(l),r.push(g);break}}}}return r}function N(e,t){for(var r=[],s=0,n=0,i=0;i<e.vertices_vertices.length;i++){var l=e.vertices_vertices[i];if(2==l.length){var a=e.vertices_coords[i],o=e.vertices_coords[l[0]],c=e.vertices_coords[l[1]],g=3==a.length,u=[o[0]-a[0],o[1]-a[1]],h=[c[0]-a[0],c[1]-a[1]],v=u[0]*u[0]+u[1]*u[1],f=h[0]*h[0]+h[1]*h[1],d=u[0]*h[0]+u[1]*h[1];if(g&&(u.push(o[2]-a[2]),h.push(c[2]-a[2]),v+=u[2]*u[2],f+=h[2]*h[2],d+=u[2]*h[2]),d/=Math.sqrt(v*f),Math.abs(d+1)<t){if(!M(e,l[0],i,l[1])){r.push(n++);continue}s++,r.push(null)}else r.push(n++)}else r.push(n++)}if(0==s)return e;if(console.warn(s+\" redundant vertices found\"),e=X.filter.remapField(e,\"vertices\",r),e.faces_vertices)for(var i=0;i<e.faces_vertices.length;i++)for(var p=e.faces_vertices[i],_=p.length-1;_>=0;_--)null===p[_]&&p.splice(_,1);return e}function M(e,t,r,s){for(var n=0,i=0,l=[],a=null,o=[],c=e.edges_vertices.length-1;c>=0;c--){var g=e.edges_vertices[c];if(g.indexOf(r)>=0&&(g.indexOf(t)>=0||g.indexOf(s)>=0)){if(null===a)a=e.edges_assignment[c];else if(a!=e.edges_assignment[c])return console.log(a,e.edges_assignment[c]),console.warn(\"different edge assignments\"),!1;var u=e.edges_foldAngle[c];isNaN(u)&&console.log(c),l.push(u),u&&(n+=u,i++),o.push(c)}}l[0]!=l[1]&&console.warn(\"incompatible angles: \"+JSON.stringify(l));for(var c=0;c<o.length;c++){var h=o[c];e.edges_vertices.splice(h,1),e.edges_assignment.splice(h,1),e.edges_foldAngle.splice(h,1)}e.edges_vertices.push([t,s]),e.edges_assignment.push(a),i>0?e.edges_foldAngle.push(n/i):e.edges_foldAngle.push(null);var h=e.vertices_vertices[t].indexOf(r);return e.vertices_vertices[t].splice(h,1),e.vertices_vertices[t].push(s),h=e.vertices_vertices[s].indexOf(r),e.vertices_vertices[s].splice(h,1),e.vertices_vertices[s].push(t),!0}function C(e){e.vertices_vertices||(console.warn(\"compute vertices_vertices first\"),e=X.convert.edges_vertices_to_vertices_vertices_unsorted(e));for(var t=0,r=[],s=0,n=0;n<e.vertices_vertices.length;n++)void 0===e.vertices_vertices[n]||0==e.vertices_vertices[n].length?(t++,r.push(null)):r.push(s++);return 0==t?e:(console.warn(t+\" stray vertices found\"),X.filter.remapField(e,\"vertices\",r))}function P(e,t){for(var r=e.vertices_coords,s=e.faces_vertices,n=e.edges_vertices,i=e.edges_foldAngle,l=e.edges_assignment,a=[],o=0;o<s.length;o++){var c=s[o];if(3!=c.length)if(4!=c.length){for(var g=[],u=0;u<n.length;u++){var h=n[u];c.indexOf(h[0])>=0&&c.indexOf(h[1])>=0&&g.push(u)}var v=[],f=[];if(t){for(var u=0;u<c.length;u++){var d=r[c[u]];v.push(d[0]),v.push(d[2])}f=earcut(v,null,2)}else for(var u=2;u>=0;u--){v=[];for(var p=0;p<c.length;p++){var d=r[c[p]];v.push(d[u]),v.push(d[(u+1)%3]),v.push(d[(u+2)%3])}if(f=earcut(v,null,3),f.length>=3*(c.length-2))break}for(var _=null,u=0;u<f.length;u+=3){for(var p=0;p<3;p++){if(0===f[u+p]&&1===f[u+(p+1)%3]){_=!1;break}if(1===f[u+p]&&0===f[u+(p+1)%3]){_=!0;break}}if(null!=_)break}for(var u=0;u<f.length;u+=3){var m;m=_?[c[f[u+2]],c[f[u+1]],c[f[u]]]:[c[f[u]],c[f[u+1]],c[f[u+2]]];for(var b=[!1,!1,!1],p=0;p<g.length;p++){var h=n[g[p]],y=h.indexOf(m[0]),w=h.indexOf(m[1]),x=h.indexOf(m[2]);if(y>=0){if(w>=0){b[0]=!0;continue}if(x>=0){b[2]=!0;continue}}w>=0&&x>=0&&(b[1]=!0)}for(var p=0;p<3;p++)b[p]||(0==p?(g.push(n.length),n.push([m[0],m[1]]),i.push(0),l.push(\"F\")):1==p?(g.push(n.length),n.push([m[2],m[1]]),i.push(0),l.push(\"F\")):2==p&&(g.push(n.length),n.push([m[2],m[0]]),i.push(0),l.push(\"F\")));a.push(m)}}else{var E=G(r[c[0]]),A=G(r[c[1]]),V=G(r[c[2]]),k=G(r[c[3]]),T=E.clone().sub(V).lengthSq(),O=A.clone().sub(k).lengthSq();O<T?(n.push([c[1],c[3]]),i.push(0),l.push(\"F\"),a.push([c[0],c[1],c[3]]),a.push([c[1],c[2],c[3]])):(n.push([c[0],c[2]]),i.push(0),l.push(\"F\"),a.push([c[0],c[1],c[2]]),a.push([c[0],c[2],c[3]]))}else a.push(c)}return e.faces_vertices=a,e}function L(){if(e.includeCurves)return void e.curvedFolding.saveSVG();if(e.noCreasePatternAvailable())return void e.warn(\"No crease pattern available.\");var t=new XMLSerializer,r=t.serializeToString($(\"#svgViewer>svg\").get(0)),s=new Blob([r],{type:\"image/svg+xml;charset=utf-8\"}),n=URL.createObjectURL(s),i=document.createElement(\"a\");i.href=n,i.download=e.filename+\".svg\",document.body.appendChild(i),i.click(),document.body.removeChild(i)}function B(e,t){for(var r=e.vertices_coords,s=e.edges_vertices,n=e.edges_foldAngle,i=e.edges_assignment,l=s.length-1;l>=0;l--)for(var a=l-1;a>=0;a--){var o=D(r[s[l][0]]),c=D(r[s[l][1]]),g=D(r[s[a][0]]),u=D(r[s[a][1]]),h=j(o,c,g,u);if(h){var v=c.clone().sub(o).length(),f=u.clone().sub(g).length(),d=q(h.t1,v,t),p=q(h.t2,f,t);if(null===d||null===p)continue;var _=d>t&&d<v-t,m=p>t&&p<f-t;if(!_&&!m)continue;var b;if(_&&m?(b=r.length,r.push([h.intersection.x,h.intersection.y])):b=_?p<=t?s[a][0]:s[a][1]:d<=t?s[l][0]:s[l][1],_){var y=n[l],w=i[l];s.splice(l,1,[b,s[l][0]],[b,s[l][1]]),n.splice(l,1,y,y),i.splice(l,1,w,w),l++}if(m){var y=n[a],w=i[a];s.splice(a,1,[b,s[a][0]],[b,s[a][1]]),n.splice(a,1,y,y),i.splice(a,1,w,w),a++,l++}}}return e}function G(e){return 2==e.length?D(e):U(e)}function D(e){return new THREE.Vector2(e[0],e[1])}function U(e){return new THREE.Vector3(e[0],e[1],e[2])}function q(e,t,r){var s=e*t;return s<-r?null:s>t+r?null:s}function j(e,t,r,s){var n,i,l=e.x,a=e.y,o=t.x,c=t.y,g=r.x,u=r.y,h=s.x,v=s.y,f=(v-u)*(o-l)-(h-g)*(c-a);return 0==f?null:(n=((h-g)*(a-u)-(v-u)*(l-g))/f,i=((o-l)*(a-u)-(c-a)*(l-g))/f,{intersection:new THREE.Vector2(l+n*(o-l),a+n*(c-a)),t1:n,t2:i})}function I(e){return e?K:Z}function J(t,s,n){r();var i=V(t,n);return e.fold=Z,e.textureLibrary&&e.textureLibrary.length>0&&e.cellColorizer&&e.cellColorizer.generateTextureMappedCellImage&&(console.log(\" Pattern loaded with existing textures, auto-generating texture-mapped cells...\"),setTimeout(function(){try{e.cellColorizer.generateTextureMappedCellImage(!0),console.log(\" Auto-generated texture-mapped cells from pattern load\")}catch(e){console.error(\" Failed to auto-generate from pattern load:\",e)}},500)),E(),i}function W(){return Z.faces_vertices}var X=require(\"fold\"),Z={},K={},Q=[],Y=[],ee=[],te=[],re=[],se=[],ne=[],ie=[],le=[],ae=[],oe=[],ce=[],ge=[];r();var ue=new THREE.SVGLoader;return{loadSVG:x,saveSVG:L,getFoldData:I,getTriangulatedFaces:W,setFoldData:J}}</script> <script type=\"text/javascript\">function makeSaveGEO(e){var a=(new THREE.Geometry).fromBufferGeometry(globals.model.getGeometry());if(0==a.vertices.length||0==a.faces.length)return void globals.warn(\"No geometry to save.\");for(var t=0;t<a.vertices.length;t++)a.vertices[t].multiplyScalar(globals.exportScale/globals.scale);if(e)for(var r=a.faces.length,t=0;t<r;t++){var o=a.faces[t];a.faces.push(new THREE.Face3(o.a,o.c,o.b))}return a}function saveSTL(){var e=[];e.push({geo:makeSaveGEO(globals.doublesidedSTL),offset:new THREE.Vector3(0,0,0),orientation:new THREE.Quaternion(0,0,0,1)});var a=geometryToSTLBin(e);if(a){var t=new Blob([a],{type:\"application/octet-binary\"}),r=$(\"#stlFilename\").val();\"\"==r&&(r=globals.filename),saveAs(t,r+\".stl\")}}function saveOBJ(){var e=(new THREE.Geometry).fromBufferGeometry(globals.model.getGeometry());if(globals.includeCurves)var a=globals.curvedFolding.getFoldData(!1);else var a=globals.pattern.getFoldData(!1);if(0==e.vertices.length||0==e.faces.length)return void globals.warn(\"No geometry to save.\");for(var t=0;t<e.vertices.length;t++)e.vertices[t].multiplyScalar(globals.exportScale/globals.scale);if(globals.includeCurves)var r=globals.curvedFolding.getFoldData(!1);else var r=globals.pattern.getFoldData(!1);var o=\"#output from https://origamisimulator.org/\\n\";o+=\"# \"+e.vertices.length+\"vertices\\n\";for(var t=0;t<e.vertices.length;t++){var s=e.vertices[t];o+=\"v \"+s.x+\" \"+s.y+\" \"+s.z+\"\\n\"}o+=\"# uv texture coords\\n\";for(var l=[1/0,1/0],n=[-1/0,-1/0],t=0;t<a.vertices_coords.length;t++){var s=a.vertices_coords[t];s[0]<l[0]&&(l[0]=s[0]),s[2]<l[1]&&(l[1]=s[2]),s[0]>n[0]&&(n[0]=s[0]),s[2]>n[1]&&(n[1]=s[2])}var v=n[0]-l[0];n[1]-l[1]>v&&(v=n[1]-l[1]);for(var t=0;t<a.vertices_coords.length;t++){var s=a.vertices_coords[t];o+=\"vt \"+(s[0]-l[0])/v+\" \"+(s[2]-l[1])/v+\"\\n\"}o+=\"# \"+r.faces_vertices.length+\" faces\\n\";for(var t=0;t<r.faces_vertices.length;t++){var g=r.faces_vertices[t];o+=\"f \"+(g[0]+1)+\"/\"+(g[0]+1)+\" \"+(g[1]+1)+\"/\"+(g[1]+1)+\" \"+(g[2]+1)+\"/\"+(g[2]+1)+\"\\n\"}o+=\"# \"+r.edges_vertices.length+\" edges\\n\";for(var t=0;t<r.edges_vertices.length;t++){var i=r.edges_vertices[t];o+=\"#e \"+(i[0]+1)+\" \"+(i[1]+1)+\" \",\"F\"==r.edges_assignment[t]?o+=1:\"B\"==r.edges_assignment[t]?o+=0:\"M\"==r.edges_assignment[t]?o+=3:\"V\"==r.edges_assignment[t]?o+=2:(console.log(\"don't know how to convert type \"+r.edges_assignment[t]),o+=0),o+=\" 0\\n\"}var c=new Blob([o],{type:\"application/octet-binary\"}),f=$(\"#objFilename\").val();\"\"==f&&(f=globals.filename),saveAs(c,f+\".obj\")}</script> <script type=\"text/javascript\">function saveFOLD(){var e=(new THREE.Geometry).fromBufferGeometry(globals.model.getGeometry());if(0==e.vertices.length||0==e.faces.length)return void globals.warn(\"No geometry to save.\");if(1!=globals.exportScale)for(var s=0;s<e.vertices.length;s++)e.vertices[s].multiplyScalar(globals.exportScale);var a=$(\"#foldFilename\").val();\"\"==a&&(a=globals.filename);for(var l={file_spec:1.1,file_creator:\"Origami Simulator: http://git.amandaghassaei.com/OrigamiSimulator/\",file_author:$(\"#foldAuthor\").val(),file_classes:[\"singleModel\"],frame_title:a,frame_classes:[\"foldedForm\"],frame_attributes:[\"3D\"],frame_unit:globals.foldUnits,vertices_coords:[],edges_vertices:[],edges_assignment:[],faces_vertices:[]},s=0;s<e.vertices.length;s++){var t=e.vertices[s];l.vertices_coords.push([t.x,t.y,t.z])}var r=globals.triangulateFOLDexport;if(globals.includeCurves)var o=globals.curvedFolding.getFoldData(!r);else var o=globals.pattern.getFoldData(!r);l.edges_vertices=o.edges_vertices;for(var i=[],s=0;s<o.edges_assignment.length;s++)\"C\"==o.edges_assignment[s]?i.push(\"B\"):i.push(o.edges_assignment[s]);l.edges_assignment=i,l.faces_vertices=o.faces_vertices,globals.exportFoldAngle&&(l.edges_foldAngle=o.edges_foldAngle);var g=new Blob([JSON.stringify(l,null,4)],{type:\"application/octet-binary\"});saveAs(g,a+\".fold\")}</script> <script type=\"text/javascript\">/**\n * Cell Colorizer - Generate colored cell map images of origami patterns\n */\n\nfunction initCellColorizer(globals) {\n    \n    // Generate a set of visually distinct colors for cells\n    function generateDistinctColors(count) {\n        const colors = [];\n        \n        // Start with some predefined distinct colors\n        const baseColors = [\n            '#FF6B6B', '#4ECDC4', '#45B7D1', '#96CEB4', '#FFEAA7',\n            '#DDA0DD', '#98D8C8', '#F7DC6F', '#BB8FCE', '#85C1E9',\n            '#F8C471', '#82E0AA', '#F1948A', '#85C1E9', '#D7BDE2',\n            '#A9DFBF', '#F9E79F', '#D5A6BD', '#A2D9CE', '#FAD7A0'\n        ];\n        \n        // If we need more colors than base colors, generate additional ones\n        for (let i = 0; i < count; i++) {\n            if (i < baseColors.length) {\n                colors.push(baseColors[i]);\n            } else {\n                // Generate colors using HSL for better distribution\n                const hue = (i * 137.508) % 360; // Golden angle approximation\n                const saturation = 60 + (i % 40); // 60-100%\n                const lightness = 45 + (i % 30); // 45-75%\n                colors.push(`hsl(${hue}, ${saturation}%, ${lightness}%)`);\n            }\n        }\n        \n        return colors;\n    }\n    \n    // Convert color string to RGB values\n    function colorToRGB(color) {\n        const canvas = document.createElement('canvas');\n        canvas.width = 1;\n        canvas.height = 1;\n        const ctx = canvas.getContext('2d');\n        ctx.fillStyle = color;\n        ctx.fillRect(0, 0, 1, 1);\n        const imageData = ctx.getImageData(0, 0, 1, 1);\n        return {\n            r: imageData.data[0],\n            g: imageData.data[1],\n            b: imageData.data[2]\n        };\n    }\n    \n    // Get the bounding box of all vertices\n    function getBoundingBox(vertices) {\n        let minX = Infinity, minZ = Infinity;\n        let maxX = -Infinity, maxZ = -Infinity;\n        \n        for (const vertex of vertices) {\n            const x = vertex[0];\n            const z = vertex[2]; // Using z coordinate for 2D projection\n            \n            minX = Math.min(minX, x);\n            maxX = Math.max(maxX, x);\n            minZ = Math.min(minZ, z);\n            maxZ = Math.max(maxZ, z);\n        }\n        \n        return { minX, maxX, minZ, maxZ };\n    }\n    \n    // Check if point is inside polygon using ray casting algorithm\n    function pointInPolygon(point, polygon) {\n        const x = point[0], y = point[1];\n        let inside = false;\n        \n        for (let i = 0, j = polygon.length - 1; i < polygon.length; j = i++) {\n            const xi = polygon[i][0], yi = polygon[i][1];\n            const xj = polygon[j][0], yj = polygon[j][1];\n            \n            if (((yi > y) !== (yj > y)) && (x < (xj - xi) * (y - yi) / (yj - yi) + xi)) {\n                inside = !inside;\n            }\n        }\n        \n        return inside;\n    }\n    \n    // Generate the colored cell map image\n    function generateCellMapImage() {\n        try {\n            console.log(\"Starting cell map generation...\");\n            \n            // Get fold data\n            const fold = globals.includeCurves ? \n                globals.curvedFolding.getFoldData(false) : \n                globals.pattern.getFoldData(false);\n            \n            if (!fold || !fold.vertices_coords || !fold.faces_vertices) {\n                globals.warn(\"No pattern data available to generate cell map.\");\n                return;\n            }\n            \n            console.log(\"Fold data:\", fold);\n            console.log(\"Vertices:\", fold.vertices_coords.length);\n            console.log(\"Faces:\", fold.faces_vertices.length);\n            \n            const vertices = fold.vertices_coords;\n            const faces = fold.faces_vertices;\n            \n            if (faces.length === 0) {\n                globals.warn(\"No faces found in the pattern.\");\n                return;\n            }\n            \n            // Generate distinct colors for each face\n            const colors = generateDistinctColors(faces.length);\n            console.log(\"Generated colors for\", faces.length, \"faces\");\n            \n            // Get bounding box\n            const bbox = getBoundingBox(vertices);\n            console.log(\" CellColorizer cell map bounding box:\", bbox);\n            \n            const width = bbox.maxX - bbox.minX;\n            const height = bbox.maxZ - bbox.minZ;\n            \n            console.log(\" CellColorizer cell map pattern dimensions:\", width.toFixed(3), \"x\", height.toFixed(3));\n            console.log(\" CellColorizer vertices count:\", vertices.length);\n            \n            if (width === 0 || height === 0) {\n                globals.warn(\"Pattern has no dimensions.\");\n                return;\n            }\n            \n            // Calculate appropriate canvas size based on pattern aspect ratio\n            const aspectRatio = width / height;\n            console.log(\"Pattern aspect ratio:\", aspectRatio.toFixed(3), \"(width/height =\", width.toFixed(3), \"/\", height.toFixed(3), \")\");\n            \n            // Determine canvas dimensions based on aspect ratio\n            const maxDimension = 2048;\n            let canvasWidth, canvasHeight;\n            \n            if (aspectRatio >= 1) {\n                canvasWidth = maxDimension;\n                canvasHeight = Math.round(maxDimension / aspectRatio);\n            } else {\n                canvasHeight = maxDimension;\n                canvasWidth = Math.round(maxDimension * aspectRatio);\n            }\n            \n            // Ensure minimum size\n            canvasWidth = Math.max(canvasWidth, 512);\n            canvasHeight = Math.max(canvasHeight, 512);\n            \n            console.log(\"Cell map canvas dimensions:\", canvasWidth + \"x\" + canvasHeight);\n            \n            // Create canvas with proper aspect ratio\n            const canvas = document.createElement('canvas');\n            canvas.width = canvasWidth;\n            canvas.height = canvasHeight;\n            const ctx = canvas.getContext('2d');\n            \n            // Clear with white background\n            ctx.fillStyle = 'white';\n            ctx.fillRect(0, 0, canvasWidth, canvasHeight);\n            \n            // Apply 180 degree rotation to fix upside-down texture\n            ctx.save();\n            ctx.translate(canvasWidth / 2, canvasHeight / 2);\n            ctx.rotate(Math.PI); // 180 degree rotation\n            ctx.translate(-canvasWidth / 2, -canvasHeight / 2);\n            \n            console.log(\"Canvas created with vertical flip, starting to draw faces...\");\n            \n            // Calculate scale to fit the pattern exactly in the canvas\n            const scaleX = canvasWidth / width;\n            const scaleY = canvasHeight / height;\n            const scale = Math.min(scaleX, scaleY);\n            \n            // Center the pattern in the canvas\n            const scaledWidth = width * scale;\n            const scaledHeight = height * scale;\n            const offsetX = (canvasWidth - scaledWidth) / 2;\n            const offsetY = (canvasHeight - scaledHeight) / 2;\n            \n            console.log(\"Cell map scale calculations:\");\n            console.log(\"  - scale:\", scale.toFixed(3));\n            console.log(\"  - offset:\", offsetX.toFixed(1) + \",\" + offsetY.toFixed(1));\n            \n            // Function to transform coordinates to canvas space\n            function transformPoint(vertex) {\n                const x = (vertex[0] - bbox.minX) * scale + offsetX;\n                const y = (vertex[2] - bbox.minZ) * scale + offsetY; // \n                return [x, y];\n            }\n            \n            // Draw each face\n            for (let i = 0; i < faces.length; i++) {\n                const face = faces[i];\n                const color = colors[i];\n                \n                if (face.length < 3) continue; // Skip invalid faces\n                \n                // Convert face vertices to canvas coordinates\n                const canvasPoints = [];\n                for (let j = 0; j < face.length; j++) {\n                    const vertexIndex = face[j];\n                    if (vertexIndex >= 0 && vertexIndex < vertices.length) {\n                        const vertex = vertices[vertexIndex];\n                        canvasPoints.push(transformPoint(vertex));\n                    }\n                }\n                \n                if (canvasPoints.length < 3) continue; // Skip if not enough valid points\n                \n                // Draw filled polygon\n                ctx.fillStyle = color;\n                ctx.beginPath();\n                ctx.moveTo(canvasPoints[0][0], canvasPoints[0][1]);\n                \n                for (let j = 1; j < canvasPoints.length; j++) {\n                    ctx.lineTo(canvasPoints[j][0], canvasPoints[j][1]);\n                }\n                \n                ctx.closePath();\n                ctx.fill();\n                \n                // Draw outline\n                ctx.strokeStyle = '#333333';\n                ctx.lineWidth = 1;\n                ctx.stroke();\n            }\n            \n            console.log(\"Finished drawing\", faces.length, \"faces\");\n            \n            // Restore canvas state after rotation\n            ctx.restore();\n            \n            // Convert to blob and download\n            canvas.toBlob(function(blob) {\n                if (blob) {\n                    const url = URL.createObjectURL(blob);\n                    const downloadLink = document.createElement(\"a\");\n                    downloadLink.href = url;\n                    \n                    const filename = globals.filename || \"origami_pattern\";\n                    downloadLink.download = filename + \"_cell_map.png\";\n                    \n                    document.body.appendChild(downloadLink);\n                    downloadLink.click();\n                    document.body.removeChild(downloadLink);\n                    \n                    URL.revokeObjectURL(url);\n                    \n                    console.log(\"Cell map image downloaded successfully\");\n                    globals.warn(\" Cell map image downloaded: \" + downloadLink.download);\n                } else {\n                    console.error(\"Failed to create blob\");\n                    globals.warn(\"Failed to generate cell map image.\");\n                }\n            }, 'image/png');\n            \n        } catch (error) {\n            console.error(\"Error generating cell map:\", error);\n            globals.warn(\"Error generating cell map: \" + error.message);\n        }\n    }\n    \n    // Generate texture-mapped cell image\n    function generateTextureMappedCellImage(autoMode = false) {\n        try {\n            console.log(\"Starting texture-mapped cell image generation...\");\n            \n            // Check if we have textures loaded\n            if (!globals.textureLibrary || globals.textureLibrary.length === 0) {\n                globals.warn(\"No textures loaded. Please load texture images first.\");\n                return;\n            }\n            \n            // Get fold data\n            const fold = globals.includeCurves ? \n                globals.curvedFolding.getFoldData(false) : \n                globals.pattern.getFoldData(false);\n            \n            if (!fold || !fold.vertices_coords || !fold.faces_vertices) {\n                globals.warn(\"No pattern data available to generate texture-mapped cell image.\");\n                return;\n            }\n            \n            console.log(\"Fold data:\", fold);\n            console.log(\"Vertices:\", fold.vertices_coords.length);\n            console.log(\"Faces:\", fold.faces_vertices.length);\n            console.log(\"Textures:\", globals.textureLibrary.length);\n            \n            const vertices = fold.vertices_coords;\n            const faces = fold.faces_vertices;\n            const numTextures = globals.textureLibrary.length;\n            \n            if (faces.length === 0) {\n                globals.warn(\"No faces found in the pattern.\");\n                return;\n            }\n            \n            // Calculate how many cells per texture\n            const cellsPerTexture = Math.ceil(faces.length / numTextures);\n            console.log(\"Cells per texture:\", cellsPerTexture);\n            \n            // Get bounding box\n            const bbox = getBoundingBox(vertices);\n            console.log(\" CellColorizer texture mapping bounding box:\", bbox);\n            \n            const width = bbox.maxX - bbox.minX;\n            const height = bbox.maxZ - bbox.minZ;\n            \n            console.log(\" CellColorizer texture mapping pattern dimensions:\", width.toFixed(3), \"x\", height.toFixed(3));\n            console.log(\" CellColorizer vertices count:\", vertices.length);\n            \n            if (width === 0 || height === 0) {\n                globals.warn(\"Pattern has no dimensions.\");\n                return;\n            }\n            \n            // Calculate appropriate canvas size based on pattern aspect ratio\n            const aspectRatio = width / height;\n            console.log(\"Pattern aspect ratio:\", aspectRatio.toFixed(3), \"(width/height =\", width.toFixed(3), \"/\", height.toFixed(3), \")\");\n            \n            // Determine canvas dimensions based on aspect ratio\n            // Use a maximum dimension of 2048 for performance, but maintain aspect ratio\n            const maxDimension = 2048;\n            let canvasWidth, canvasHeight;\n            \n            if (aspectRatio >= 1) {\n                // Width is larger or equal to height\n                canvasWidth = maxDimension;\n                canvasHeight = Math.round(maxDimension / aspectRatio);\n            } else {\n                // Height is larger than width\n                canvasHeight = maxDimension;\n                canvasWidth = Math.round(maxDimension * aspectRatio);\n            }\n            \n            // Ensure minimum size for small patterns\n            canvasWidth = Math.max(canvasWidth, 512);\n            canvasHeight = Math.max(canvasHeight, 512);\n            \n            console.log(\"Canvas dimensions:\", canvasWidth + \"x\" + canvasHeight, \"based on pattern aspect ratio\");\n            \n            // Store canvas dimensions globally for consistent UV mapping\n            globals.cellColorizerCanvasWidth = canvasWidth;\n            globals.cellColorizerCanvasHeight = canvasHeight;\n            globals.cellColorizerScale = null; // Will be calculated later\n            globals.cellColorizerOffsetX = null;\n            globals.cellColorizerOffsetY = null;\n            \n            // Create main canvas for the final result - aspect ratio matched\n            const finalCanvas = document.createElement('canvas');\n            finalCanvas.width = canvasWidth;\n            finalCanvas.height = canvasHeight;\n            const finalCtx = finalCanvas.getContext('2d');\n            \n            // Clear with transparent background\n            finalCtx.clearRect(0, 0, canvasWidth, canvasHeight);\n            \n            // Apply 180 degree rotation to fix upside-down texture\n            finalCtx.save();\n            finalCtx.translate(canvasWidth / 2, canvasHeight / 2);\n            finalCtx.rotate(Math.PI); // 180 degree rotation\n            finalCtx.translate(-canvasWidth / 2, -canvasHeight / 2);\n            \n            console.log(\"Canvas created, starting aspect-ratio-matched texture mapping...\");\n            \n            // Calculate scale to fit the pattern exactly in the canvas\n            const scaleX = canvasWidth / width;\n            const scaleY = canvasHeight / height;\n            \n            // Use the smaller scale to ensure the entire pattern fits\n            const scale = Math.min(scaleX, scaleY);\n            \n            // Center the pattern in the canvas\n            const scaledWidth = width * scale;\n            const scaledHeight = height * scale;\n            const offsetX = (canvasWidth - scaledWidth) / 2;\n            const offsetY = (canvasHeight - scaledHeight) / 2;\n            \n            // Store transformation parameters globally for consistent UV mapping\n            globals.cellColorizerScale = scale;\n            globals.cellColorizerOffsetX = offsetX;\n            globals.cellColorizerOffsetY = offsetY;\n            \n            console.log(\"Texture map scale calculations:\");\n            console.log(\"  - scaleX:\", scaleX.toFixed(3), \"scaleY:\", scaleY.toFixed(3));\n            console.log(\"  - final scale:\", scale.toFixed(3));\n            console.log(\"  - scaled dimensions:\", scaledWidth.toFixed(1) + \"x\" + scaledHeight.toFixed(1));\n            console.log(\"  - offset:\", offsetX.toFixed(1) + \",\" + offsetY.toFixed(1));\n            \n            // Function to transform coordinates to canvas space with full coverage\n            function transformPoint(vertex) {\n                const x = (vertex[0] - bbox.minX) * scale + offsetX;\n                const y = (vertex[2] - bbox.minZ) * scale + offsetY; // \n                return [x, y];\n            }\n            \n            // Process each texture\n            for (let textureIndex = 0; textureIndex < numTextures; textureIndex++) {\n                const texture = globals.textureLibrary[textureIndex];\n                if (!texture || !texture.image) {\n                    console.warn(\"Texture\", textureIndex, \"has no image data\");\n                    continue;\n                }\n                \n                console.log(\"Processing texture\", textureIndex, \":\", texture.name);\n                \n                // Create a temporary canvas with FIXED pattern dimensions\n                const tempCanvas = document.createElement('canvas');\n                tempCanvas.width = canvasWidth;\n                tempCanvas.height = canvasHeight;\n                const tempCtx = tempCanvas.getContext('2d');\n                \n                // Clear with transparent background\n                tempCtx.clearRect(0, 0, canvasWidth, canvasHeight);\n                \n                // Apply 180 degree rotation for consistency\n                tempCtx.save();\n                tempCtx.translate(canvasWidth / 2, canvasHeight / 2);\n                tempCtx.rotate(Math.PI); // 180 degree rotation\n                tempCtx.translate(-canvasWidth / 2, -canvasHeight / 2);\n                \n                // Calculate aspect ratios to fit within PATTERN bounds (not canvas bounds)\n                console.log(\" Fitting texture to pattern dimensions:\");\n                console.log(\"  - Pattern dimensions:\", scaledWidth.toFixed(1) + \"x\" + scaledHeight.toFixed(1));\n                console.log(\"  - Pattern position:\", offsetX.toFixed(1) + \",\" + offsetY.toFixed(1));\n                console.log(\"  - Canvas dimensions:\", canvasWidth + \"x\" + canvasHeight);\n                \n                const imageAspect = texture.image.width / texture.image.height;\n                const patternAspect = scaledWidth / scaledHeight;\n                \n                // FORCE texture to EXACT pattern size (no aspect ratio fitting)\n                // This ensures texture size matches fold lines exactly\n                const drawWidth = scaledWidth;\n                const drawHeight = scaledHeight;\n                const drawX = offsetX;\n                const drawY = offsetY;\n                \n                console.log(\"Texture\", textureIndex, \"STRETCHED to EXACT pattern size:\");\n                console.log(\"  - Image size:\", texture.image.width + \"x\" + texture.image.height, \"aspect:\", imageAspect.toFixed(3));\n                console.log(\"  - Pattern size:\", scaledWidth.toFixed(1) + \"x\" + scaledHeight.toFixed(1), \"aspect:\", patternAspect.toFixed(3));\n                console.log(\"  - Draw size:\", drawWidth.toFixed(1) + \"x\" + drawHeight.toFixed(1), \"(FORCED to pattern size)\");\n                console.log(\"  - Draw position:\", drawX.toFixed(1) + \",\" + drawY.toFixed(1));\n                console.log(\"  -  EXACT match with fold lines: \" + scale.toFixed(3));\n                \n                // Draw the texture fitted to PATTERN dimensions (same scale as fold lines)\n                tempCtx.drawImage(texture.image, drawX, drawY, drawWidth, drawHeight);\n                \n                // Restore temp canvas state\n                tempCtx.restore();\n                \n                // Create a mask canvas for the assigned cells\n                const maskCanvas = document.createElement('canvas');\n                maskCanvas.width = canvasWidth;\n                maskCanvas.height = canvasHeight;\n                const maskCtx = maskCanvas.getContext('2d');\n                \n                // Clear mask with transparent background\n                maskCtx.clearRect(0, 0, canvasWidth, canvasHeight);\n                \n                // Apply 180 degree rotation to mask canvas\n                maskCtx.save();\n                maskCtx.translate(canvasWidth / 2, canvasHeight / 2);\n                maskCtx.rotate(Math.PI); // 180 degree rotation\n                maskCtx.translate(-canvasWidth / 2, -canvasHeight / 2);\n                \n                maskCtx.fillStyle = 'white';\n                \n                // Calculate which faces are assigned to this texture\n                const startFace = textureIndex * cellsPerTexture;\n                const endFace = Math.min((textureIndex + 1) * cellsPerTexture, faces.length);\n                \n                console.log(\"Texture\", textureIndex, \"assigned to faces\", startFace, \"to\", endFace - 1);\n                console.log(\" Mask generation: using SAME coordinates as texture\");\n                \n                // Draw the assigned faces on the mask using THE SAME transformPoint function\n                for (let faceIndex = startFace; faceIndex < endFace; faceIndex++) {\n                    const face = faces[faceIndex];\n                    \n                    if (face.length < 3) continue; // Skip invalid faces\n                    \n                    // Use THE SAME coordinate transformation as the rest of the system\n                    const canvasPoints = face.map(vertexIndex => {\n                        const vertex = vertices[vertexIndex];\n                        return transformPoint(vertex); // SAME function as everywhere else\n                    });\n                    \n                    // Debug first face coordinates\n                    if (faceIndex === startFace) {\n                        console.log(\" First face canvas coordinates:\", canvasPoints.slice(0, 3));\n                    }\n                    \n                    // Draw filled polygon on mask\n                    maskCtx.beginPath();\n                    maskCtx.moveTo(canvasPoints[0][0], canvasPoints[0][1]);\n                    \n                    for (let j = 1; j < canvasPoints.length; j++) {\n                        maskCtx.lineTo(canvasPoints[j][0], canvasPoints[j][1]);\n                    }\n                    \n                    maskCtx.closePath();\n                    maskCtx.fill();\n                }\n                \n                // Restore mask canvas state\n                maskCtx.restore();\n                \n                // Apply mask to the texture using composite operation\n                tempCtx.globalCompositeOperation = 'destination-in';\n                tempCtx.drawImage(maskCanvas, 0, 0);\n                \n                // Composite this texture layer onto the final canvas\n                finalCtx.globalCompositeOperation = 'source-over';\n                finalCtx.drawImage(tempCanvas, 0, 0);\n                \n                console.log(\"Applied texture\", textureIndex, \"to\", endFace - startFace, \"faces\");\n            }\n            \n            console.log(\"Finished processing\", numTextures, \"textures\");\n            \n            // Restore canvas state after rotation\n            finalCtx.restore();\n            \n            // Apply the generated texture to the origami model immediately\n            applyTextureMappedImageToModel(finalCanvas, (globals.filename || \"origami_pattern\") + \"_texture_mapped\", {\n                bbox: bbox,\n                scale: scale,\n                offsetX: offsetX,\n                offsetY: offsetY,\n                canvasWidth: canvasWidth,\n                canvasHeight: canvasHeight\n            }, fold);\n            \n            // Only download if not in auto mode\n            if (!autoMode) {\n                // Convert to blob and download\n                finalCanvas.toBlob(function(blob) {\n                    if (blob) {\n                        const url = URL.createObjectURL(blob);\n                        const downloadLink = document.createElement(\"a\");\n                        downloadLink.href = url;\n                        \n                        const filename = globals.filename || \"origami_pattern\";\n                        downloadLink.download = filename + \"_texture_mapped.png\";\n                        \n                        document.body.appendChild(downloadLink);\n                        downloadLink.click();\n                        document.body.removeChild(downloadLink);\n                        \n                        URL.revokeObjectURL(url);\n                        \n                        console.log(\"Texture-mapped image downloaded successfully and applied to model\");\n                    } else {\n                        console.error(\"Failed to create blob\");\n                        globals.warn(\"Failed to generate texture-mapped image.\");\n                    }\n                }, 'image/png');\n            } else {\n                console.log(\"Auto mode: texture applied without download\");\n            }\n            \n        } catch (error) {\n            console.error(\"Error generating texture-mapped image:\", error);\n            globals.warn(\"Error generating texture-mapped image: \" + error.message);\n        }\n    }\n    \n    // Apply the generated texture-mapped image to the origami model\n    function applyTextureMappedImageToModel(canvas, textureName, transformParams, fold) {\n        try {\n            console.log(\"Applying texture-mapped image to origami model...\");\n            \n            // Extract transform parameters\n            const { bbox, scale, offsetX, offsetY, canvasWidth, canvasHeight } = transformParams;\n            \n            // Create a new texture from the canvas\n            const texture = new THREE.CanvasTexture(canvas);\n            texture.wrapS = THREE.RepeatWrapping;\n            texture.wrapT = THREE.RepeatWrapping;\n            texture.repeat.set(1.0, 1.0); // Use 1:1 mapping for the generated texture\n            texture.flipY = false; // Disable Y-flip since we already applied 180 degree rotation in canvas\n            texture.generateMipmaps = true;\n            texture.minFilter = THREE.LinearFilter;\n            texture.magFilter = THREE.LinearFilter;\n            texture.name = textureName;\n            texture.needsUpdate = true;\n            \n            console.log(\"Created texture from canvas:\", textureName, \"Size:\", canvas.width + \"x\" + canvas.height);\n            \n            // Force texture update\n            texture.generateMipmaps = false; // Disable mipmaps for better quality\n            texture.minFilter = THREE.LinearFilter;\n            texture.magFilter = THREE.LinearFilter;\n            \n            // Force simple texture mode - disable all complex texture features\n            console.log(\"Entering simple cell texture mode...\");\n            \n            // Clear complex texture system\n            globals.textureLibrary = [];  // Clear existing textures\n            globals.faceTextureMapping = {};  // Clear face mapping\n            globals.atlasLayout = null;  // Clear atlas\n            globals.textureAtlas = null;  // Clear atlas texture\n            globals.selectedTexture = 0;\n            globals.randomTextures = false;\n            \n            // Set the single texture as the main face texture\n            globals.faceTexture = texture;\n            globals.textureLibrary = [texture];  // Single texture in library\n            globals.useSimpleTextureMode = true;\n            globals.isCellGeneratedTexture = true;\n            globals.faceTextureMapping = 0;\n            globals.atlasLayout = false;\n            \n            // CRITICAL: Pass fold data and transformation parameters to model.js\n            globals.cellColorizerFoldData = fold; // Use the local fold variable, not globals.fold\n            globals.cellColorizerBoundingBox = bbox;\n            globals.cellColorizerTransformParams = {\n                scale: scale,\n                offsetX: offsetX,\n                offsetY: offsetY,\n                canvasWidth: canvasWidth,\n                canvasHeight: canvasHeight\n            };\n            \n            console.log(\" Passing fold data to model.js:\", {\n                foldExists: !!fold,\n                verticesCount: fold ? fold.vertices_coords.length : 0,\n                scale: scale.toFixed(3),\n                offset: offsetX.toFixed(1) + \",\" + offsetY.toFixed(1)\n            });\n            \n            // Update texture repeat setting\n            globals.textureRepeat = 1.0;\n            $(\"#textureRepeat\").val(1.0);\n            \n            console.log(\"Simple texture mode configured:\", {\n                faceTexture: !!globals.faceTexture,\n                textureLibraryLength: globals.textureLibrary.length,\n                faceTextureMapping: Object.keys(globals.faceTextureMapping).length,\n                atlasLayout: !!globals.atlasLayout\n            });\n            \n            // Force switch to texture mode\n            console.log(\"Current color mode:\", globals.colorMode);\n            globals.colorMode = \"texture\";\n            console.log(\"Switched to texture mode\");\n            \n            // Mark this as a generated cell texture to enable special UV handling\n            globals.isCellGeneratedTexture = true;\n            globals.useSimpleTextureMode = true;\n            \n            // Update UI radio buttons\n            $(\"input[name=colorMode]\").prop(\"checked\", false);\n            $(\"input[name=colorMode][value=texture]\").prop(\"checked\", true);\n            \n            // Show/hide appropriate UI elements\n            $(\"#textureMaterialOptions\").show().removeClass(\"hide\");\n            $(\"#coloredMaterialOptions\").hide();\n            $(\"#axialStrainMaterialOptions\").hide();\n            \n            // Update toggle buttons\n            $(\"#colorToggle>div\").removeClass(\"active\");\n            $(\"#strainToggle\").removeClass(\"active\");\n            \n            // Update material to apply the new texture\n            if (globals.model && globals.model.setMeshMaterial) {\n                console.log(\"Updating mesh material...\");\n                globals.model.setMeshMaterial();\n                console.log(\"Mesh material updated\");\n                \n                // Force a render update\n                if (globals.threeView && globals.threeView.render) {\n                    globals.threeView.render();\n                }\n            } else {\n                console.warn(\"Model or setMeshMaterial not available\");\n            }\n            \n            // Update other UI controls\n            $(\"#randomTextures\").prop(\"checked\", false);\n            \n            // Update texture list in UI\n            if (globals.updateTextureList) {\n                globals.updateTextureList();\n            }\n            \n            console.log(\"Applied texture-mapped image to origami model successfully\");\n            console.log(\"Final texture state:\", {\n                faceTexture: !!globals.faceTexture,\n                colorMode: globals.colorMode,\n                textureLibraryLength: globals.textureLibrary.length\n            });\n            \n            // Additional verification - check after a short delay\n            setTimeout(function() {\n                console.log(\"Texture verification after delay:\");\n                console.log(\"- globals.faceTexture exists:\", !!globals.faceTexture);\n                console.log(\"- globals.colorMode:\", globals.colorMode);\n                console.log(\"- Model material type:\", globals.model && globals.model.getMeshMaterial ? \n                           globals.model.getMeshMaterial().type : \"Unknown\");\n                \n                // Force another material update if needed\n                if (globals.colorMode === \"texture\" && globals.faceTexture && globals.model) {\n                    console.log(\"Forcing additional material update...\");\n                    globals.model.setMeshMaterial();\n                }\n            }, 500);\n            \n        } catch (error) {\n            console.error(\"Error applying texture-mapped image to model:\", error);\n            globals.warn(\"Error applying texture to origami: \" + error.message);\n        }\n    }\n    \n    return {\n        generateCellMapImage: generateCellMapImage,\n        generateTextureMappedCellImage: generateTextureMappedCellImage,\n        resetCellTextureMode: function() {\n            globals.isCellGeneratedTexture = false;\n            globals.useSimpleTextureMode = false;\n            console.log(\"Cell texture mode reset\");\n        }\n    };\n}</script> <script type=\"text/javascript\">/**\n * Created by amandaghassaei on 5/6/17.\n */\n\n\nfunction initImporter(globals){\n\n    var reader = new FileReader();\n\n    function importDemoFile(url){\n        var extension = url.split(\".\");\n        var name = extension[extension.length-2].split(\"/\");\n        name = name[name.length-1];\n        extension = extension[extension.length-1];\n        // globals.setCreasePercent(0);\n        if (extension == \"svg\"){\n            globals.url = url;\n            globals.filename = name;\n            globals.extension = extension;\n            if (!globals.includeCurves) {\n                globals.pattern.loadSVG(\"assets/\" + url, true);\n            } else {\n                globals.curvedFolding.loadSVG(\"assets/\" + url, true);\n            }\n        } else if (extension == \"fold\"){\n                globals.url = url;\n                globals.filename = name;\n                globals.extension = extension;\n                $.getJSON(\"assets/\" + url, undefined, function (fold) {\n                    globals.pattern.setFoldData(fold, true);\n                });\n        } else {\n            console.warn(\"unknown extension: \" + extension);\n        }\n    }\n\n    // Adobe Illustrator and Cuttle.xyz copy vector shapes as SVG string. By\n    // listening for a paste event, we can turn the SVG string into a Blob\n    // to load it as the pattern. After this paste handler, it has the same code\n    // path as selecting a local file.\n    window.addEventListener('paste', function (e) {\n        console.log(\"paste\");\n        // Make a synthetic svg file from text\n        var text = e.clipboardData.getData('text/plain');\n        if (text.includes(\"<svg\")) {\n            var blob = new Blob([text], {type: 'image/svg+xml'});\n\n            globals.url = null;\n            globals.filename = \"paste\";\n            globals.extension = \"svg\";\n\n            reader.onload = function () {\n                // Check edit mode to decide whether to show modal\n                if (globals.editMode === false) {\n                    console.log(' Edit mode disabled - loading pasted SVG directly without modal');\n                    if (!globals.includeCurves) {\n                        globals.pattern.loadSVG(reader.result);    \n                    } else {\n                        globals.curvedFolding.loadSVG(reader.result);\n                    }\n                } else {\n                    console.log(' Edit mode enabled - checking auto-proceed for pasted SVG');\n                    $(\"#vertTol\").val(globals.vertTol);\n                    \n                    // For paste events, assume user interaction and show modal\n                    $(\"#importSettingsModal\").modal(\"show\");\n                    $('#doSVGImport').unbind(\"click\").click(function (e) {\n                        e.preventDefault();\n                        $('#doSVGImport').unbind(\"click\");\n                        if (!globals.includeCurves) {\n                            globals.pattern.loadSVG(reader.result);    \n                        } else {\n                            globals.curvedFolding.loadSVG(reader.result);\n                        }\n                        $(\"#importSettingsModal\").modal(\"hide\");\n                    });\n                }\n            }\n            reader.readAsDataURL(blob);\n        }\n    });\n\n    function openFile(file) {\n        var extension = file.name.split(\".\");\n        var name = extension[0];\n        extension = extension[extension.length - 1];\n\n        if (extension == \"svg\") {\n            reader.onload = function () {\n                return function (e) {\n                    if (!reader.result) {\n                        warnUnableToLoad();\n                        return;\n                    }\n                    \n                    globals.filename = name;\n                    globals.extension = extension;\n                    globals.url = null;\n                    \n                    // Check edit mode to decide whether to show modal\n                    if (globals.editMode === false) {\n                        console.log(' Edit mode disabled - loading file SVG directly without modal');\n                        if (!globals.includeCurves) {\n                            globals.pattern.loadSVG(reader.result);    \n                        } else {\n                            globals.curvedFolding.loadSVG(reader.result);\n                        }\n                    } else {\n                        console.log(' Edit mode enabled - checking auto-proceed for file SVG');\n                        $(\"#vertTol\").val(globals.vertTol);\n                        \n                        // Check if this is NFT processing context\n                        var isNFTProcessing = globals.isNFTProcessing || \n                            (name && (name.includes('hypar') || name.includes('katachi')));\n                        \n                        if (isNFTProcessing) {\n                            console.log(' NFT processing context detected - proceeding automatically without modal');\n                            if (!globals.includeCurves) {\n                                globals.pattern.loadSVG(reader.result);    \n                            } else {\n                                globals.curvedFolding.loadSVG(reader.result);\n                            }\n                        } else {\n                            console.log(' User interaction context - showing import modal');\n                            $(\"#importSettingsModal\").modal(\"show\");\n                            $('#doSVGImport').unbind(\"click\").click(function (e) {\n                                e.preventDefault();\n                                $('#doSVGImport').unbind(\"click\");\n                                if (!globals.includeCurves) {\n                                    globals.pattern.loadSVG(reader.result);    \n                                } else {\n                                    globals.curvedFolding.loadSVG(reader.result);\n                                }\n                                $(\"#importSettingsModal\").modal(\"hide\");\n                            });\n                        }\n                    }\n                }\n            }(file);\n            reader.readAsDataURL(file);\n        } else if (extension == \"fold\"){\n            reader.onload = function () {\n                return function (e) {\n                    if (!reader.result) {\n                        warnUnableToLoad();\n                        return;\n                    }\n                    globals.filename = name;\n                    globals.extension = extension;\n                    globals.url = null;\n\n                    try {\n                        var fold = JSON.parse(reader.result);\n                        if (!fold || !fold.vertices_coords || !fold.edges_assignment || !fold.edges_vertices || !fold.faces_vertices){\n                            globals.warn(\"Invalid FOLD file, must contain all of: <br/>\" +\n                                \"<br/>vertices_coords<br/>edges_vertices<br/>edges_assignment<br/>faces_vertices\");\n                            return;\n                        }\n\n                        // spec 1.0 backwards compatibility\n                        if (fold.edges_foldAngles){\n                            fold.edges_foldAngle = fold.edges_foldAngles;\n                            delete fold.edges_foldAngles;\n                        }\n                        if (fold.edges_foldAngle){\n                            globals.pattern.setFoldData(fold);\n                            return;\n                        }\n                        $(\"#importFoldModal\").modal(\"show\");\n                        $('#importFoldModal').on('hidden.bs.modal', function () {\n                            $('#importFoldModal').off('hidden.bs.modal');\n                            if (globals.foldUseAngles) {//todo this should all go to pattern.js\n                                globals.setCreasePercent(1);\n                                var foldAngles = [];\n                                for (var i=0;i<fold.edges_assignment.length;i++){\n                                    var assignment = fold.edges_assignment[i];\n                                    if (assignment == \"F\") foldAngles.push(0);\n                                    else foldAngles.push(null);\n                                }\n                                fold.edges_foldAngle = foldAngles;\n\n                                var allCreaseParams = globals.pattern.setFoldData(fold, false, true);\n                                var j = 0;\n                                var faces = globals.pattern.getTriangulatedFaces();\n                                for (var i=0;i<fold.edges_assignment.length;i++){\n                                    var assignment = fold.edges_assignment[i];\n                                    if (assignment !== \"M\" && assignment !== \"V\" && assignment !== \"F\") continue;\n                                    var creaseParams = allCreaseParams[j];\n                                    var face1 = faces[creaseParams[0]];\n                                    var vec1 = makeVector(fold.vertices_coords[face1[1]]).sub(makeVector(fold.vertices_coords[face1[0]]));\n                                    var vec2 = makeVector(fold.vertices_coords[face1[2]]).sub(makeVector(fold.vertices_coords[face1[0]]));\n                                    var normal1 = (vec2.cross(vec1)).normalize();\n                                    var face2 = faces[creaseParams[2]];\n                                    vec1 = makeVector(fold.vertices_coords[face2[1]]).sub(makeVector(fold.vertices_coords[face2[0]]));\n                                    vec2 = makeVector(fold.vertices_coords[face2[2]]).sub(makeVector(fold.vertices_coords[face2[0]]));\n                                    var normal2 = (vec2.cross(vec1)).normalize();\n                                    var angle = Math.abs(normal1.angleTo(normal2));\n                                    if (assignment == \"M\") angle *= -1;\n                                    fold.edges_foldAngle[i] = angle * 180 / Math.PI;\n                                    creaseParams[5] = fold.edges_foldAngle[i];\n                                    j++;\n                                }\n                                globals.model.buildModel(fold, allCreaseParams);\n                                return;\n                            }\n                            var foldAngles = [];\n                            for (var i=0;i<fold.edges_assignment.length;i++){\n                                var assignment = fold.edges_assignment[i];\n                                if (assignment == \"M\") foldAngles.push(-180);\n                                else if (assignment == \"V\") foldAngles.push(180);\n                                else if (assignment == \"F\") foldAngles.push(0);\n                                else foldAngles.push(null);\n                            }\n                            fold.edges_foldAngle = foldAngles;\n                            globals.pattern.setFoldData(fold);\n                        });\n                    } catch(err) {\n                        globals.warn(\"Unable to parse FOLD json.\");\n                        console.log(err);\n                    }\n                }\n            }(file);\n            reader.readAsText(file);\n        } else {\n            globals.warn('Unknown file extension: .' + extension);\n            return null;\n        }\n    }\n\n    window.addEventListener('drop', function(e) {\n        e.preventDefault();\n        if (e.dataTransfer.items) {\n            for (item of e.dataTransfer.items) {\n                if (item.kind === \"file\") {\n                    const file = item.getAsFile();\n                    openFile(file)\n                    break;\n                }\n            }\n        } else {\n            for (item of e.dataTransfer.files) {\n                openFile(file)\n                break;\n            }\n        }\n    });\n\n    window.addEventListener('dragover', function(e) {\n        e.preventDefault();\n    }, false);\n\n    window.addEventListener('message', function(e) {\n        if (!e.data) return;\n        if (e.data.op === 'importFold' && e.data.fold) {\n            globals.filename = e.data.fold.file_title || 'message';\n            globals.extension = 'fold';\n            globals.url = null;\n            globals.pattern.setFoldData(e.data.fold);\n        } else if (e.data.op === 'importSVG' && e.data.svg) {\n            globals.filename = e.data.filename || 'message';\n            globals.extension = 'svg';\n            globals.url = null;\n            if (e.data.vertTol) {\n                globals.vertTol = e.data.vertTol;\n            }\n            if (!globals.includeCurves) {\n                globals.pattern.loadSVG(URL.createObjectURL(new Blob([e.data.svg])));\n            } else {\n                globals.curvedFolding.loadSVG(URL.createObjectURL(new Blob([e.data.svg])));\n            }\n        }\n    });\n    // Tell parent/opening window that we're ready for messages now.\n    var readyMessage = {from: 'OrigamiSimulator', status: 'ready'};\n    if (window.parent && window.parent !== window) {\n        window.parent.postMessage(readyMessage, '*');\n    } else if (window.opener) {\n        window.opener.postMessage(readyMessage, '*');\n    }\n\n    $(\"#fileSelector\").change(function(e) {\n        var files = e.target.files; // FileList object\n        if (files.length < 1) {\n            return;\n        }\n        openFile(files[0])\n        $(e.target).val(\"\");\n    });\n\n    function makeVector(v){\n        if (v.length == 2) return makeVector2(v);\n        return makeVector3(v);\n    }\n    function makeVector2(v){\n        return new THREE.Vector2(v[0], v[1]);\n    }\n    function makeVector3(v){\n        return new THREE.Vector3(v[0], v[1], v[2]);\n    }\n\n    function warnUnableToLoad(){\n        globals.warn(\"Unable to load file.\");\n    }\n\n    function importSVG(svgContent, sourceUrl = null) {\n        console.log(' importSVG called with content length:', svgContent.length);\n        console.log(' Source URL:', sourceUrl);\n        \n        try {\n            // Create a blob from the SVG content\n            var blob = new Blob([svgContent], {type: 'image/svg+xml'});\n            var dataUrl = URL.createObjectURL(blob);\n            \n            // Set globals for tracking\n            if (sourceUrl) {\n                var urlParts = sourceUrl.split('/');\n                globals.filename = urlParts[urlParts.length - 1].replace('.svg', '');\n            } else {\n                globals.filename = 'imported_pattern';\n            }\n            globals.extension = 'svg';\n            globals.url = sourceUrl;\n            \n            console.log(' Set filename:', globals.filename);\n            \n            // Load the SVG directly without import modal in editMode=false\n            if (globals.editMode === false) {\n                console.log(' Edit mode disabled - importing SVG directly without modal');\n                if (!globals.includeCurves) {\n                    globals.pattern.loadSVG(dataUrl);\n                } else {\n                    globals.curvedFolding.loadSVG(dataUrl);\n                }\n            } else {\n                // For edit mode enabled, check if we should auto-proceed (for NFT processing)\n                console.log(' Edit mode enabled - checking auto-proceed conditions');\n                \n                // Set default tolerance and proceed automatically if this is an NFT processing context\n                $(\"#vertTol\").val(globals.vertTol);\n                \n                // Check if this is being called during NFT processing\n                var isNFTProcessing = globals.isNFTProcessing || \n                    (globals.filename && (globals.filename.includes('hypar') || globals.filename.includes('katachi'))) ||\n                    (globals.url && globals.url.includes('exonemo.com'));\n                \n                if (isNFTProcessing) {\n                    console.log(' NFT processing context detected - proceeding automatically without modal');\n                    if (!globals.includeCurves) {\n                        globals.pattern.loadSVG(dataUrl);\n                    } else {\n                        globals.curvedFolding.loadSVG(dataUrl);\n                    }\n                } else {\n                    console.log(' User interaction context - showing import modal');\n                    $(\"#importSettingsModal\").modal(\"show\");\n                    $('#doSVGImport').unbind(\"click\").click(function (e) {\n                        e.preventDefault();\n                        $('#doSVGImport').unbind(\"click\");\n                        console.log(' Processing SVG import...');\n                        if (!globals.includeCurves) {\n                            globals.pattern.loadSVG(dataUrl);\n                        } else {\n                            globals.curvedFolding.loadSVG(dataUrl);\n                        }\n                        $(\"#importSettingsModal\").modal(\"hide\");\n                    });\n                }\n            }\n            \n            console.log(' SVG import initiated successfully');\n            return true;\n            \n        } catch (error) {\n            console.error(' Error in importSVG:', error);\n            if (globals.warn && globals.editMode !== false) {\n                globals.warn('Failed to import SVG pattern');\n            }\n            return false;\n        }\n    }\n\n    return {\n        importDemoFile: importDemoFile,\n        importSVG: importSVG\n    }\n}</script> <script type=\"text/javascript\">function initViveInterface(e){function a(){THREE.VRController.update(),t(),l.render(d,c)}function n(e){e.enabled=!1,e.laser.visible=!1,e.cursor.visible=!1}function t(){var a=m.length;a>2&&(console.warn(\"invalid num controllers: \"+a),a=2);for(var t=0;t<a;t++){var i=m[t].gamepad;if(i&&i.buttons&&i.buttons[0]){var o=p[t].object3D;if(o.visible=!1,!i.pose.hasPosition||!i.pose.hasOrientation)continue;var d=m[t].position.clone();if(d.applyMatrix4(l.vr.getStandingMatrix()),R.identity().extractRotation(m[t].matrixWorld),S.set(0,0,-1).applyMatrix4(R).normalize(),d.add(S.clone().multiplyScalar(.05)),u[t]&&g[t]){n(h[t]),g[t].isFixed()||(g[t].setFixed(!0),e.fixedHasChanged=!0),d.sub(f.position),d=r(d),g[t].moveManually(d),e.nodePositionHasChanged=!0;continue}if(u[t])continue;var c=new THREE.Raycaster(d,S,0,1),b=c.intersectObjects(e.model.getMesh(),!1);if(b.length>0){n(h[t]),v[t]=!0;var w=b[0],E=w.face,T=w.point;if(T.clone().sub(d).lengthSq()>.01){g[t]=null;continue}var y=e.model.getPositionsArray(),V=[];V.push(new THREE.Vector3(y[3*E.a],y[3*E.a+1],y[3*E.a+2])),V.push(new THREE.Vector3(y[3*E.b],y[3*E.b+1],y[3*E.b+2])),V.push(new THREE.Vector3(y[3*E.c],y[3*E.c+1],y[3*E.c+2]));for(var x=s(V[0].clone()).sub(T).lengthSq(),B=E.a,H=1;H<3;H++){var P=s(V[H].clone()).sub(T).lengthSq();P<x&&(x=P,B=H<2?E.b:E.c)}var C=e.model.getNodes();g[t]=C[B],o.position.copy(s(g[t].getPosition().clone())),o.visible=!0}else v[t]=!1,g[t]=null,h[t].enabled=!0}else console.warn(\"bad controller\")}}function s(e){return e.multiplyScalar(f.scale),e.add(f.position),e}function r(e){return e.multiplyScalar(1/f.scale),e}function i(){if(console.log(e.url),null===e.url)return\"\";for(var a=_.keys(T),n=0;n<a.length;n++){var t=T[a[n]];if(t[e.url])return\" - current file: \"+t[e.url]}return\"\"}var o=$(\"#VRstatus\");if(!1===WEBVR.isAvailable())return o.html(\"WebVR not supported by this browser<br/>see <a href='https://webvr.info/' target='_blank'>webvr.info</a> for more information.\"),void $(\"#VRoptions\").hide();o.html(\"No device connected.\");var l=e.threeView.renderer,d=e.threeView.scene,c=e.threeView.camera,m=[],u=[!1,!1],p=[new Node(new THREE.Vector3),new Node(new THREE.Vector3)];_.each(p,function(e){e.setTransparentVR(),d.add(e.getObject3D())});var g=[null,null],v=[!1,!1],h=[null,null];!function(){WEBVR.getVRDisplay(function(a){var n=$(\"#enterVR\");if(!a)return o.html(\"No VR device detected.  Check that you are connected to Steam VR and your HMD has the latest firmware updates, then refresh this page.\"),void n.hide();o.html(\"VR device detected.  Hit the button below to enter VR.  If you have problems, check that you are connected to Steam VR and your HMD has the latest firmware updates.\"),$(\"#VRoptions\").show();var t=WEBVR.getButton(a,l.domElement);n.show(),n.html(\"ENTER VR\");var s=t.onclick;n.click(function(t){if(t.preventDefault(),e.vrEnabled=!a.isPresenting,l.vr.enabled=e.vrEnabled,e.vrEnabled){e.numSteps=30,$(\".numStepsPerRender\").val(e.numSteps),f.stepsPerFrame=e.numSteps,e.threeView.modelWrapper.scale.set(f.scale,f.scale,f.scale),e.threeView.modelWrapper.position.copy(f.position),n.html(\"EXIT VR\"),l.vr.setDevice(a),l.vr.standing=!0,e.threeView.setBackgroundColor(\"000000\");var r=i();E.name(\"Examples\"+r)}else e.numSteps=100,$(\".numStepsPerRender\").val(e.numSteps),e.model.reset(),e.threeView.resetCamera(),n.html(\"ENTER VR\"),e.threeView.setBackgroundColor(),e.threeView.modelWrapper.scale.set(1,1,1),e.threeView.modelWrapper.position.set(0,0,0);_.each(m,function(a){_.each(a.children,function(a){a.visible=e.vrEnabled})}),b.visible=e.vrEnabled,E.visible=e.vrEnabled,s&&s()})})}();var f={scale:.5,foldPercent:100*e.creasePercent,Reset:function(){e.model.reset()},stepsPerFrame:e.numSteps,damping:e.percentDamping,strainMap:!1,position:new THREE.Vector3(0,1.3,0),examples:[\"amanda\",\"one\",\"two\"]},b=dat.GUIVR.create(\"Settings\");b.position.set(0,2.3,-1),b.rotation.set(0,0,0),d.add(b),b.visible=!1,b.add(f,\"foldPercent\").min(-100).max(100).step(1).name(\"Fold Percent\").onChange(function(a){e.creasePercent=a/100,e.shouldChangeCreasePercent=!0,e.controls.updateCreasePercent()}),b.add(f,\"strainMap\").name(\"Show Strain\").onChange(function(a){var n=\"color\";a&&(n=\"axialStrain\"),e.colorMode=n,\"color\"==n?$(\"#coloredMaterialOptions\").show():$(\"#coloredMaterialOptions\").hide(),\"axialStrain\"==n?$(\"#axialStrainMaterialOptions\").show():$(\"#axialStrainMaterialOptions\").hide(),e.model.setMeshMaterial(),$(\".radio>input[value=\"+n+\"]\").prop(\"checked\",!0)}),b.add(f,\"Reset\").name(\"Reset Simulation\"),b.add(f,\"damping\").min(.1).max(1).step(.01).name(\"Damping (0-1)\").onChange(function(a){e.percentDamping=a,e.materialHasChanged=!0,e.controls.setSliderInputVal(\"#percentDamping\",a)}),b.add(f,\"stepsPerFrame\").min(1).max(200).step(1).name(\"Num Steps Per Frame\").onChange(function(a){e.numSteps=a,$(\".numStepsPerRender\").val(a)}).listen(),b.add(f,\"scale\").min(.01).max(1).step(.001).name(\"Scale\").onChange(function(a){e.threeView.modelWrapper.scale.set(a,a,a)});var w=function(a){e.threeView.modelWrapper.position.copy(f.position)};b.add(f.position,\"x\").min(-2).max(2).step(.01).name(\"Position X\").onChange(w),b.add(f.position,\"z\").min(-2).max(2).step(.01).name(\"Position Y\").onChange(w),b.add(f.position,\"y\").min(-2).max(2).step(.01).name(\"Position Z\").onChange(w);var E=dat.GUIVR.create(\"Examples\");E.position.set(1.1,2.3,-.1),E.rotation.set(0,-Math.PI/2,0),d.add(E),E.visible=!1;var T={Origami:{\"Origami/flappingBird.svg\":\"Flapping Bird\",\"Origami/randlettflappingbird.svg\":\"Randlett Flapping Bird\",\"Origami/traditionalCrane.svg\":\"Crane\",\"Origami/hypar.svg\":\"Hypar\",\"Origami/6ptHypar-anti.svg\":\"Hypar (6 point)\",\"Origami/singlesquaretwist.svg\":\"Square Twist (single)\",\"Origami/squaretwistManyAngles.svg\":\"Square Twist (many angles)\",\"Origami/langCardinal.svg\":\"Lang Cardinal\",\"Origami/langOrchid.svg\":\"Lang Orchid\",\"Origami/langKnlDragon.svg\":\"Lang KNL Dragon\"},Tessellations:{\"Tessellations/miura-ori.svg\":\"Miura-Ori\",\"Tessellations//miura_sharpangle.svg\":\"Miura-Ori (sharp angle)\",\"Tessellations/waterbomb.svg\":\"Waterbomb\",\"Tessellations/whirlpool.svg\":\"Whirlpool\",\"Tessellations/huffmanExtrudedBoxes.svg\":\"Huffman Extruded Boxes\",\"Tessellations/huffmanWaterbomb.svg\":\"Huffman Waterbombs\",\"Tessellations/huffmanRectangularWeave.svg\":\"Huffman Rect Weave\",\"Tessellations/huffmanStarsTriangles.svg\":\"Huffman Stars-Triangles\",\"Tessellations/huffmanExdentedBoxes.svg\":\"Huffman Exdented Boxes\",\"Tessellations/reschTriTessellation.svg\":\"Resch Triangle Tessellation\",\"Tessellations/reschBarbell.svg\":\"Resch Barbell Tessellation\",\"Tessellations/langHoneycomb.svg\":\"Lang Honeycomb Tessellation\",\"Tessellations/langWedgeDoubleFaced.svg\":\"Lang Wedged Double Faced Tessellation\",\"Tessellations/langOvalTessellation.svg\":\"Lang Oval Tessellation\",\"Tessellations/langHyperbolicLimit.svg\":\"Lang Hyperbolic Limit\"},\"Curved Creases\":{\"Curved/huffmanTower.svg\":\"Huffman Tower\",\"Curved/CircularPleat-antiFacet.svg\":\"Circular Pleat\",\"Curved/shell14.svg\":\"14 panel shell\",\"Curved/shell6.svg\":\"6 panel shell\"},Kirigami:{\"Kirigami/miyamotoTower.svg\":\"Miyamoto Tower\",\"Kirigami/honeycombKiri.svg\":\"Kirigami Honeycomb\"},Popups:{\"Popup/geometricPopup.svg\":\"Geometric Pattern\",\"Popup/castlePopup.svg\":\"Castle\",\"Popup/housePopup.svg\":\"House\"},\"Maze Foldings\":{\"Squaremaze/helloworld.svg\":'Square Maze \"hello world\"',\"Squaremaze/origamisimulator.svg\":'Square Maze \"origami simulator\"',\"Squaremaze/cross.svg\":'Square Maze \"+\"',\"Polygami/polygamiCross.svg\":'Polygami \"+\"'},\"Origami Bases\":{\"Bases/birdBase.svg\":\"Bird Base\",\"Bases/frogBase.svg\":\"Frog Base\",\"Bases/boatBase.svg\":\"Boat Base\",\"Bases/pinwheelBase.svg\":\"Pinwheel Base\",\"Bases/openSinkBase.svg\":\"Open Sink Base\",\"Bases/squareBase.svg\":\"Square Base\",\"Bases/waterbombBase.svg\":\"Waterbomb Base\"},Bistable:{\"Bistable/curvedPleatSimple.svg\":\"Curved Pleat\"}};_.each(T,function(a,n){E.add(T,n,_.values(a)).onChange(function(n){var t=_.values(a).indexOf(n);if(t<0)return void console.warn(\"pattern not found: \"+n);var s=_.keys(a)[t];s&&(e.vertTol=3,e.importer.importDemoFile(s)),E.name(\"Examples - current file: \"+n)})}),window.addEventListener(\"vr controller connected\",function(a){var n=m.length,t=a.detail;d.add(t),t.standingMatrix=l.vr.getStandingMatrix(),t.head=c;var s=new THREE.MeshStandardMaterial({color:8947848}),r=new THREE.Mesh(new THREE.CylinderGeometry(.005,.05,.1,6),s),i=new THREE.Mesh(new THREE.BoxGeometry(.03,.1,.03),s);s.flatShading=!0,r.rotation.x=-Math.PI/2,i.position.y=-.05,r.add(i),t.userData.mesh=r,t.add(r);var o=dat.GUIVR.addInputObject(t);d.add(o.laser),h[n]=o,t.addEventListener(\"primary press began\",function(e){e.target.userData.mesh.material.color.setHex(13421772),u[n]=!0,v[n]||g[n]?o.laser.pressed(!1):o.laser.pressed(!0)}),t.addEventListener(\"primary press ended\",function(a){a.target.userData.mesh.material.color.setHex(8947848),u[n]=!1,g[n]&&(g[n].setFixed(!1),e.fixedHasChanged=!0),o.laser.pressed(!1)}),t.addEventListener(\"disconnected\",function(e){u[n]=!1,t.parent.remove(t)}),m.push(t)});var R=new THREE.Matrix4,S=new THREE.Vector3(0,0,-1);return{render:a}}</script> <script type=\"text/javascript\">function initVideoAnimator(t){function n(){for(var n=100*t.creasePercent,a=0,e=0;e<c.length;e++){var r=c[e];r.t=a,r.from=n,\"delay\"==r.type&&(r.to=n),n=r.to,a+=r.dur}}function a(n){var a=t.currentFPS,r=t.capturerFrames+n/t.numSteps,l=r/a,o=e(l);return null===o?(t.shouldAnimateFoldPercent=!1,t.creasePercent):0==o.dur?o.to/100:(l-=o.t,l/=o.dur,(o.from*(1-l)+o.to*l)/100)}function e(t){for(var n=0;n<c.length;n++){var a=c[n];if(t<=a.t+a.dur)return a}return null}function r(){c.push({type:\"animation\",dur:null,from:null,to:null}),u()}function l(){c.push({type:\"delay\",dur:null,from:null,to:null}),u()}function o(){if(0==c.length)return!1;for(var t=0;t<c.length;t++){var n=c[t];if((\"delay\"!=n.type||null===n.dur)&&(\"animation\"!=n.type||null===n.dur||null==n.to))return!1}return!0}function i(){if(0==c.length)return $(\"#foldPercentAnimationStatus\").removeClass(\"warning\"),void $(\"#foldPercentAnimationStatus\").html(\"no animation configured\");o()?($(\"#foldPercentAnimationStatus\").removeClass(\"warning\"),$(\"#foldPercentAnimationStatus\").html(\"animation configured\")):($(\"#foldPercentAnimationStatus\").addClass(\"warning\"),$(\"#foldPercentAnimationStatus\").html(\"incomplete config, will be ignored\"))}function u(){i();var t=\"\";if(0==c.length)return $(\"#animationSetupHelp\").html(\"No animation items in sequence.\"),void $(\"#animationHTML\").html(\"\");for(var n=0;n<c.length;n++)\"delay\"==c[n].type?t+=s(c[n],n):t+=d(c[n],n);$(\"#animationSetupHelp\").html(\"Configure automatic <b>Fold Percent</b> control:\"),$(\"#animationHTML\").html(t),$(\".deleteItem\").click(function(t){t.preventDefault();var n=$(t.target),a=n.data(\"index\");void 0===a&&(a=n.parent(\".deleteItem\").data(\"index\")),c.splice(a,1),u()}),$(\".durVal\").change(function(t){var n=$(t.target),a=n.val();if(!isNaN(parseFloat(a))){a=parseFloat(a),a<0&&(a=0),n.val(a);var e=n.data(\"index\");c[e].dur=a,u()}}),$(\".toVal\").change(function(t){var n=$(t.target),a=n.val();if(!isNaN(parseFloat(a))){a=parseFloat(a),a<-100&&(a=-100),a>100&&(a=100),n.val(a);var e=n.data(\"index\");c[e].to=a,u()}})}function d(t,n){var a=\"\";null!==t.dur&&(a=t.dur);var e=\"\";return null!==t.to&&(e=t.to),'<li class=\"animationStep\">Animate to &nbsp;<input value=\"'+e+'\" placeholder=\"Target\" data-index=\"'+n+'\" class=\"toVal float form-control\" type=\"text\"> % for &nbsp;<input value=\"'+a+'\" placeholder=\"Duration\" data-index=\"'+n+'\" class=\"durVal float form-control\" type=\"text\">&nbsp; seconds &nbsp;&nbsp;&nbsp;<a href=\"#\" data-index=\"'+n+'\" class=\"red deleteItem\"><span data-index=\"'+n+'\" class=\"fui-cross\"></span></a></li>'}function s(t,n){var a=\"\";return null!==t.dur&&(a=t.dur),'<li class=\"animationStep\">Wait for &nbsp;<input value=\"'+a+'\" placeholder=\"Duration\" data-index=\"'+n+'\" class=\"durVal float form-control\" type=\"text\">&nbsp; seconds &nbsp;&nbsp;&nbsp;<a href=\"#\" data-index=\"'+n+'\" class=\"red deleteItem\"><span class=\"fui-cross\"></span></a></li>'}var c=[];return u(),{addItem:r,addDelay:l,isValid:o,compile:n,nextFoldAngle:a}}</script> <script type=\"text/javascript\">function initCurvedFolding(globals) {\n\n    var FOLD = require('fold');\n\n    var foldData = {};\n    var rawFold = {};\n\n    function clearFold(){\n        foldData.vertices_coords = [];\n        foldData.edges_vertices = [];\n        foldData.edges_assignment = [];//B = boundary, M = mountain, V = valley, C = cut, F = facet, U = hinge\n        foldData.edges_foldAngle = [];//target angles\n        delete foldData.vertices_vertices;\n        delete foldData.faces_vertices;\n        delete foldData.vertices_edges;\n        rawFold = {};\n    }\n\n    var verticesRaw = [];\n    //refs to vertex indices\n    var mountainsRaw = [];\n    var valleysRaw = [];\n    var bordersRaw = [];\n    var cutsRaw = [];\n    var triangulationsRaw = [];\n    var hingesRaw = [];\n\n    var mountains = [];\n    var valleys = [];\n    var borders = [];\n    var hinges = [];\n    var triangulations = [];\n\n    var badColors = [];//store any bad colors in svg file to show user\n\n    function clearAll(){\n\n        clearFold();\n        verticesRaw = [];\n\n        mountainsRaw = [];\n        valleysRaw = [];\n        bordersRaw = [];\n        cutsRaw = [];\n        triangulationsRaw = [];\n        hingesRaw = [];\n\n        mountains = [];\n        valleys = [];\n        borders = [];\n        hinges = [];\n        triangulations = [];\n\n        badColors = [];\n    }\n\n    clearAll();\n\n    var SVGloader = new THREE.SVGLoader();\n\n    //filter for svg parsing\n    function borderFilter(){\n        var stroke = getStroke($(this));\n        return typeForStroke(stroke) == \"border\";\n    }\n    function mountainFilter(){\n        var $this = $(this);\n        var stroke = getStroke($this);\n        if (typeForStroke(stroke) == \"mountain\"){\n            var opacity = getOpacity($this);\n            this.targetAngle = -opacity*180;\n            return true;\n        }\n        return false;\n    }\n    function valleyFilter(){\n        var $this = $(this);\n        var stroke = getStroke($this);\n        if (typeForStroke(stroke) == \"valley\"){\n            var opacity = getOpacity($this);\n            this.targetAngle = opacity*180;\n            return true;\n        }\n        return false;\n    }\n    function cutFilter(){\n        var stroke = getStroke($(this));\n        return typeForStroke(stroke) == \"cut\";\n    }\n    function triangulationFilter(){\n        var stroke = getStroke($(this));\n        return typeForStroke(stroke) == \"triangulation\";\n    }\n    function hingeFilter(){\n        var stroke = getStroke($(this));\n        return typeForStroke(stroke) == \"hinge\";\n    }\n\n    function getOpacity(obj){\n        // Check rendered style first (most browsers, supporting CSS styling),\n        // then opacity attribute, then opacity:... spec in style attribute.\n        // Ditto for stroke-opacity.  Both default to 1 (full opacity).\n        // If both are present, they get multiplied together.\n        var opacity = obj.css('opacity') || obj.attr('opacity') ||\n            (obj[0].style && obj[0].style.opacity);\n        var strokeOpacity = obj.css('stroke-opacity') ||\n            obj.attr('stroke-opacity') ||\n            (obj[0].style && obj[0].style.strokeOpacity);\n        opacity = parseFloat(opacity);\n        strokeOpacity = parseFloat(strokeOpacity);\n        if (isNaN(opacity)) {\n            opacity = 1;\n        }\n        if (isNaN(strokeOpacity)) {\n            opacity = 1;\n        }\n        return opacity * strokeOpacity;\n    }\n\n    function getStroke(obj){\n        // Check rendered style first (most browsers, supporting CSS styling),\n        // then stroke attribute, then stroke:... spec in style attribute.\n        var stroke = obj.css('stroke') || obj.attr(\"stroke\") ||\n            (obj[0].style && obj[0].style.stroke);\n        if (stroke === undefined) {\n            return null;\n        }\n        stroke = stroke.replace(/\\s/g,'');//remove all whitespace\n        return stroke.toLowerCase();\n    }\n\n    function typeForStroke(stroke){\n        if (stroke == \"#000000\" || stroke == \"#000\" || stroke == \"black\"    || stroke == \"rgb(0,0,0)\"       ) return \"border\";\n        if (stroke == \"#ff0000\" || stroke == \"#f00\" || stroke == \"red\"      || stroke == \"rgb(255,0,0)\"     ) return \"mountain\";\n        if (stroke == \"#0000ff\" || stroke == \"#00f\" || stroke == \"blue\"     || stroke == \"rgb(0,0,255)\"     ) return \"valley\";\n        if (stroke == \"#00ff00\" || stroke == \"#0f0\" || stroke == \"green\"    || stroke == \"rgb(0,255,0)\"     ) return \"cut\";\n        if (stroke == \"#ffff00\" || stroke == \"#ff0\" || stroke == \"yellow\"   || stroke == \"rgb(255,255,0)\"   ) return \"triangulation\";\n        if (stroke == \"#ff00ff\" || stroke == \"#f0f\" || stroke == \"magenta\"  || stroke == \"rgb(255,0,255)\"   ) return \"hinge\";\n        badColors.push(stroke);\n        return null;\n    }\n\n    function colorForAssignment(assignment){\n        if (assignment == \"B\") return \"#000\";//border\n        if (assignment == \"M\") return \"#f00\";//mountain\n        if (assignment == \"CM\") return \"#f00\";//curved mountain\n        if (assignment == \"V\") return \"#00f\";//valley\n        if (assignment == \"CV\") return \"#00f\";//curved valley\n        if (assignment == \"C\") return \"#0f0\";//cut\n        if (assignment == \"F\") return \"#ff0\";//facet\n        if (assignment == \"U\") return \"#f0f\";//hinge\n        return \"#0ff\"\n    }\n    function opacityForAngle(angle, assignment){\n        if (angle === null || assignment == \"F\") return 1;\n        return Math.abs(angle)/180;\n    }\n\n    function findType(_verticesRaw, _segmentsRaw, filter, $paths, $lines, $rects, $polygons, $polylines, $ellipses, $circles){\n        parsePath(_verticesRaw, _segmentsRaw, $paths.filter(filter));\n        parseLine(_verticesRaw, _segmentsRaw, $lines.filter(filter));\n        parseRect(_verticesRaw, _segmentsRaw, $rects.filter(filter));\n        parsePolygon(_verticesRaw, _segmentsRaw, $polygons.filter(filter));\n        parsePolyline(_verticesRaw, _segmentsRaw, $polylines.filter(filter));\n        parseEllipse(_verticesRaw, _segmentsRaw, $ellipses.filter(filter));\n        parseCircle(_verticesRaw, _segmentsRaw, $circles.filter(filter));\n    }\n\n    function applyTransformation(vertex, element){\n        var transformations = [];\n        var ancestor = element;\n        do {\n            if (ancestor.transform)\n                transformations.push.apply(transformations, ancestor.transform.baseVal);\n            ancestor = ancestor.parentNode;\n        } while (ancestor && ancestor.nodeName !== 'svg');\n        for (var i=0;i<transformations.length;i++){\n            var t = transformations[i];\n            var M = [[t.matrix.a, t.matrix.c, t.matrix.e], [t.matrix.b, t.matrix.d, t.matrix.f], [0,0,1]];\n            var out = numeric.dot(M, [vertex.x, vertex.z, 1]);\n            vertex.x = out[0];\n            vertex.z = out[1];\n        }\n    }\n\n    function parsePath(_verticesRaw, _segmentsRaw, $elements){\n        for (var i=0;i<$elements.length;i++){\n            var path = $elements[i];\n            var pathVertices = [];\n            if (path === undefined || path.getPathData === undefined){//mobile problem\n                var elm = '<div id=\"coverImg\" ' +\n                  'style=\"background: url(assets/doc/crane.gif) no-repeat center center fixed;' +\n                    '-webkit-background-size: cover;' +\n                    '-moz-background-size: cover;' +\n                    '-o-background-size: cover;' +\n                    'background-size: cover;\">'+\n                  '</div>';\n                $(elm).appendTo($(\"body\"));\n                $(\"#noSupportModal\").modal(\"show\");\n                console.warn(\"path parser not supported\");\n                return;\n            }\n            var startVertex = null;\n            var segments = path.getPathData();\n            let $path = $(path);\n            let originV, startV, endV, c1, c2, lastSegment, lastType;\n            for (var j=0;j<segments.length;j++){\n                var segment = segments[j];\n                var type = segment.type;\n                switch(type){\n\n                    case \"m\"://dx, dy\n                        var vertex;\n                        if (j === 0){\n                            // \"If a relative moveto (m) appears as the first\n                            // element of the path, then it is treated as a\n                            // pair of absolute coordinates\"\n                            // [https://www.w3.org/TR/SVG/paths.html#PathDataMovetoCommands]\n                            vertex = new THREE.Vector3(segment.values[0], 0, segment.values[1]);\n                        } else {\n                            vertex = _verticesRaw[_verticesRaw.length-1].clone();\n                            vertex.x += segment.values[0];\n                            vertex.z += segment.values[1];\n                        }\n                        startVertex = _verticesRaw.length;\n                        _verticesRaw.push(vertex);\n                        pathVertices.push(vertex);\n                        break;\n\n                    case \"l\"://dx, dy\n                        if (typeForStroke(getStroke($path)) == \"border\") {\n                            divPathl(segment, _segmentsRaw, _verticesRaw, path, pathVertices);\n                        } else {\n                            _segmentsRaw.push([_verticesRaw.length-1, _verticesRaw.length]);\n                            if (path.targetAngle && _segmentsRaw.length>0) _segmentsRaw[_segmentsRaw.length-1].push(path.targetAngle);\n                            var vertex = _verticesRaw[_verticesRaw.length-1].clone();\n                            vertex.x += segment.values[0];\n                            vertex.z += segment.values[1];\n                            _verticesRaw.push(vertex);\n                            pathVertices.push(vertex);\n                        }\n                        break;\n\n                    case \"v\"://dy\n                        if (typeForStroke(getStroke($path)) == \"border\") {\n                            divPathv(segment, _segmentsRaw, _verticesRaw, path, pathVertices);\n                        } else {\n                            _segmentsRaw.push([_verticesRaw.length-1, _verticesRaw.length]);\n                            if (path.targetAngle && _segmentsRaw.length>0) _segmentsRaw[_segmentsRaw.length-1].push(path.targetAngle);\n                            var vertex = _verticesRaw[_verticesRaw.length-1].clone();\n                            vertex.z += segment.values[0];\n                            _verticesRaw.push(vertex);\n                            pathVertices.push(vertex);\n                        }\n                        break;\n\n                    case \"h\"://dx\n                        if (typeForStroke(getStroke($path)) == \"border\") {\n                            divPathh(segment, _segmentsRaw, _verticesRaw, path, pathVertices);\n                        } else {\n                            _segmentsRaw.push([_verticesRaw.length-1, _verticesRaw.length]);\n                            if (path.targetAngle && _segmentsRaw.length>0) _segmentsRaw[_segmentsRaw.length-1].push(path.targetAngle);\n                            var vertex = _verticesRaw[_verticesRaw.length-1].clone();\n                            vertex.x += segment.values[0];\n                            _verticesRaw.push(vertex);\n                            pathVertices.push(vertex);\n                        }\n                        break;\n\n                    case \"M\"://x, y\n                        var vertex = new THREE.Vector3(segment.values[0], 0, segment.values[1]);\n                        startVertex = _verticesRaw.length;\n                        _verticesRaw.push(vertex);\n                        pathVertices.push(vertex);\n                        break;\n\n                    case \"L\"://x, y\n                        if (typeForStroke(getStroke($path)) == \"border\") {\n                            divPathL(segment, _segmentsRaw, _verticesRaw, path, pathVertices);\n                        } else {\n                            _segmentsRaw.push([_verticesRaw.length-1, _verticesRaw.length]);\n                            if (path.targetAngle && _segmentsRaw.length>0) _segmentsRaw[_segmentsRaw.length-1].push(path.targetAngle);\n                            var vertex = new THREE.Vector3(segment.values[0], 0, segment.values[1]);\n                            _verticesRaw.push(vertex);\n                            pathVertices.push(vertex);\n                        }\n                        break;\n\n                    case \"V\"://y\n                        if (typeForStroke(getStroke($path)) == \"border\") {\n                            divPathV(segment, _segmentsRaw, _verticesRaw, path, pathVertices);\n                        } else {    \n                            _segmentsRaw.push([_verticesRaw.length-1, _verticesRaw.length]);\n                            if (path.targetAngle && _segmentsRaw.length>0) _segmentsRaw[_segmentsRaw.length-1].push(path.targetAngle);\n                            var vertex = _verticesRaw[_verticesRaw.length-1].clone();\n                            vertex.z = segment.values[0];\n                            _verticesRaw.push(vertex);\n                            pathVertices.push(vertex);\n                        }\n                        break;\n\n                    case \"H\"://x\n                        if (typeForStroke(getStroke($path)) == \"border\") {\n                            divPathH(segment, _segmentsRaw, _verticesRaw, path, pathVertices);\n                        } else {\n                            _segmentsRaw.push([_verticesRaw.length-1, _verticesRaw.length]);\n                            if (path.targetAngle && _segmentsRaw.length>0) _segmentsRaw[_segmentsRaw.length-1].push(path.targetAngle);\n                            var vertex = _verticesRaw[_verticesRaw.length-1].clone();\n                            vertex.x = segment.values[0];\n                            _verticesRaw.push(vertex);\n                            pathVertices.push(vertex);\n                        }\n                        break;\n\n                    case \"z\":\n                    case \"Z\":\n                        if (typeForStroke(getStroke($path)) == \"border\") {\n                            if (startVertex != null) {\n                                divPathZ(_segmentsRaw, _verticesRaw, path, pathVertices, startVertex);\n                                startVertex = null;\n                            }\n                        } else {\n                            if (startVertex != null) {\n                                _segmentsRaw.push([_verticesRaw.length-1, startVertex]);\n                                startVertex = null;\n                            }\n                        }\n                        break;\n                    \n                    case \"c\":\n                    case \"C\":\n                        originV = _verticesRaw[_verticesRaw.length-1].clone();\n                        startV = new THREE.Vector3(0, 0, 0);\n                        endV = new THREE.Vector3(segment.values[4], 0, segment.values[5]);\n                        c1 = new THREE.Vector3(segment.values[0], 0, segment.values[1]);\n                        c2 = new THREE.Vector3(segment.values[2], 0, segment.values[3]);\n                        if (type === \"c\") {\n                            divPathC(startV, endV, c1, c2, _segmentsRaw, _verticesRaw, path, pathVertices, originV, type);\n                        } else {\n                            divPathC(originV, endV, c1, c2, _segmentsRaw, _verticesRaw, path, pathVertices, originV, type);\n                        }\n                        if (typeForStroke(getStroke($path)) == \"mountain\" || typeForStroke(getStroke($path)) == \"valley\") {\n                            _segmentsRaw.push([\"C\"]);\n                        }\n                        _segmentsRaw.push([_verticesRaw.length-1, _verticesRaw.length]);\n                        if (path.targetAngle && _segmentsRaw.length>0) _segmentsRaw[_segmentsRaw.length-1].push(path.targetAngle);\n                        var vertex;\n                        if (type === \"c\") {\n                            vertex = new THREE.Vector3(originV.x+endV.x, 0, originV.z+endV.z);\n                        } else {\n                            vertex = new THREE.Vector3(endV.x, 0, endV.z);\n                        }\n                        _verticesRaw.push(vertex);\n                        pathVertices.push(vertex);\n                        break;\n\n                    case \"s\":\n                    case \"S\":\n                        lastSegment = segments[j-1];\n                        lastType = lastSegment.type;\n                        if (lastType === \"S\" || lastType === \"s\" || lastType === \"C\" || lastType === \"c\") {\n                            if (lastType === \"S\" || lastType === \"C\") {\n                                originV = _verticesRaw[_verticesRaw.length-1].clone();\n                                if (type === \"S\") {\n                                    c1 = new THREE.Vector3(endV.x * 2 - c2.x, 0, endV.z * 2 - c2.z);\n                                } else {\n                                    c1 = new THREE.Vector3(endV.x * 2 - c2.x - originV.x, 0, endV.z * 2 - c2.z - originV.z);\n                                }\n                            } else {\n                                if (type === \"S\") {\n                                    c1 = new THREE.Vector3(endV.x * 2 - c2.x + originV.x, 0, endV.z * 2 - c2.z + originV.z);\n                                    originV = _verticesRaw[_verticesRaw.length-1].clone();\n                                } else {\n                                    c1 = new THREE.Vector3(endV.x * 2 - c2.x + originV.x, 0, endV.z * 2 - c2.z + originV.z);\n                                    originV = _verticesRaw[_verticesRaw.length-1].clone();\n                                    c1.x = c1.x - originV.x;\n                                    c1.z = c1.z - originV.z;\n                                }\n                            }\n                            startV = new THREE.Vector3(0, 0, 0);\n                            endV = new THREE.Vector3(segment.values[2], 0, segment.values[3]);\n                            c2 = new THREE.Vector3(segment.values[0], 0, segment.values[1]);\n                            if (type === \"s\") {\n                                divPathC(startV, endV, c1, c2, _segmentsRaw, _verticesRaw, path, pathVertices, originV, \"c\");\n                            } else {\n                                divPathC(originV, endV, c1, c2, _segmentsRaw, _verticesRaw, path, pathVertices, originV, \"C\");\n                            }\n                            if (typeForStroke(getStroke($path)) == \"mountain\" || typeForStroke(getStroke($path)) == \"valley\") {\n                                _segmentsRaw.push([\"C\"]);\n                            }\n                            _segmentsRaw.push([_verticesRaw.length-1, _verticesRaw.length]);\n                            if (path.targetAngle && _segmentsRaw.length>0) _segmentsRaw[_segmentsRaw.length-1].push(path.targetAngle);\n                            var vertex;\n                            if (type === \"s\") {\n                                vertex = new THREE.Vector3(originV.x+endV.x, 0, originV.z+endV.z);\n                            } else {\n                                vertex = new THREE.Vector3(endV.x, 0, endV.z);\n                            }\n                            _verticesRaw.push(vertex);\n                            pathVertices.push(vertex);\n                        } else {\n                            originV = _verticesRaw[_verticesRaw.length-1];\n                            startV = new THREE.Vector3(0, 0, 0);\n                            endV = new THREE.Vector3(segment.values[2], 0, segment.values[3]);\n                            c1 = new THREE.Vector3(segment.values[0], 0, segment.values[1]);\n                            if (type === \"s\") {\n                                divPathQ(startV, endV, c1, _segmentsRaw, _verticesRaw, path, pathVertices, originV, \"q\");\n                            } else {\n                                divPathQ(originV, endV, c1, _segmentsRaw, _verticesRaw, path, pathVertices, originV, \"Q\");\n                            }\n                            if (typeForStroke(getStroke($path)) == \"mountain\" || typeForStroke(getStroke($path)) == \"valley\") {\n                                _segmentsRaw.push([\"C\"]);\n                            }\n                            _segmentsRaw.push([_verticesRaw.length-1, _verticesRaw.length]);\n                            if (path.targetAngle && _segmentsRaw.length>0) _segmentsRaw[_segmentsRaw.length-1].push(path.targetAngle);\n                            var vertex;\n                            if (type === \"s\") {\n                                vertex = new THREE.Vector3(originV.x+endV.x, 0, originV.z+endV.z);\n                            } else {\n                                vertex = new THREE.Vector3(endV.x, 0, endV.z);\n                            }\n                            _verticesRaw.push(vertex);\n                            pathVertices.push(vertex);\n                        }\n                        break;\n                    \n                    case \"q\":\n                    case \"Q\":\n                        originV = _verticesRaw[_verticesRaw.length-1];\n                        startV = new THREE.Vector3(0, 0, 0);\n                        endV = new THREE.Vector3(segment.values[2], 0, segment.values[3]);\n                        c1 = new THREE.Vector3(segment.values[0], 0, segment.values[1]);\n                        if (type === \"q\") {\n                            divPathQ(startV, endV, c1, _segmentsRaw, _verticesRaw, path, pathVertices, originV, type);\n                        } else {\n                            divPathQ(originV, endV, c1, _segmentsRaw, _verticesRaw, path, pathVertices, originV, type);\n                        }\n                        if (typeForStroke(getStroke($path)) == \"mountain\" || typeForStroke(getStroke($path)) == \"valley\") {\n                            _segmentsRaw.push([\"C\"]);\n                        }\n                        _segmentsRaw.push([_verticesRaw.length-1, _verticesRaw.length]);\n                        if (path.targetAngle && _segmentsRaw.length>0) _segmentsRaw[_segmentsRaw.length-1].push(path.targetAngle);\n                        var vertex;\n                        if (type === \"q\") {\n                            vertex = new THREE.Vector3(originV.x+endV.x, 0, originV.z+endV.z);\n                        } else {\n                            vertex = new THREE.Vector3(endV.x, 0, endV.z);\n                        }\n                        _verticesRaw.push(vertex);\n                        pathVertices.push(vertex);\n                        break;\n\n                    case \"t\":\n                    case \"T\":\n                        lastSegment = segments[j-1];\n                        lastType = lastSegment.type;\n                        if (lastType === \"Q\" || lastType === \"q\" || lastType === \"T\" || lastType === \"t\") {\n                            if (lastType === \"Q\" || lastType === \"T\") {\n                                originV = _verticesRaw[_verticesRaw.length-1].clone();\n                                const lastC1 = c1.clone();\n                                if (type === \"T\") {\n                                    c1 = new THREE.Vector3(endV.x * 2 - lastC1.x, 0, endV.z * 2 - lastC1.z);\n                                } else {\n                                    c1 = new THREE.Vector3(endV.x * 2 - lastC1.x - originV.x, 0, endV.z * 2 - lastC1.z - originV.z);\n                                }\n                            } else {\n                                if (type === \"T\") {\n                                    const lastC1 = c1.clone();\n                                    c1 = new THREE.Vector3(endV.x * 2 - lastC1.x + originV.x, 0, endV.z * 2 - lastC1.z + originV.z);\n                                    originV = _verticesRaw[_verticesRaw.length-1].clone();\n                                } else {\n                                    const lastC1 = c1.clone();\n                                    c1 = new THREE.Vector3(endV.x * 2 - lastC1.x + originV.x, 0, endV.z * 2 - lastC1.z + originV.z);\n                                    originV = _verticesRaw[_verticesRaw.length-1].clone();\n                                    c1.x = c1.x - originV.x;\n                                    c1.z = c1.z - originV.z;\n                                }\n                            }\n                            startV = new THREE.Vector3(0, 0, 0);\n                            endV = new THREE.Vector3(segment.values[0], 0, segment.values[1]);\n                            if (type === \"t\") {\n                                divPathQ(startV, endV, c1, _segmentsRaw, _verticesRaw, path, pathVertices, originV, \"q\");\n                            } else {\n                                divPathQ(originV, endV, c1, _segmentsRaw, _verticesRaw, path, pathVertices, originV, \"Q\");\n                            }\n                            if (typeForStroke(getStroke($path)) == \"mountain\" || typeForStroke(getStroke($path)) == \"valley\") {\n                                _segmentsRaw.push([\"C\"]);\n                            }\n                            _segmentsRaw.push([_verticesRaw.length-1, _verticesRaw.length]);\n                            if (path.targetAngle && _segmentsRaw.length>0) _segmentsRaw[_segmentsRaw.length-1].push(path.targetAngle);\n                            var vertex;\n                            if (type === \"t\") {\n                                vertex = new THREE.Vector3(originV.x+endV.x, 0, originV.z+endV.z);\n                            } else {\n                                vertex = new THREE.Vector3(endV.x, 0, endV.z);\n                            }\n                            _verticesRaw.push(vertex);\n                            pathVertices.push(vertex);\n                        } else {\n                            if (type === \"t\") {\n                                if (typeForStroke(getStroke($path)) != \"border\") {\n                                    _segmentsRaw.push([_verticesRaw.length-1, _verticesRaw.length]);\n                                    if (path.targetAngle && _segmentsRaw.length>0) _segmentsRaw[_segmentsRaw.length-1].push(path.targetAngle);\n                                    var vertex = _verticesRaw[_verticesRaw.length-1].clone();\n                                    vertex.x += segment.values[0];\n                                    vertex.z += segment.values[1];\n                                    _verticesRaw.push(vertex);\n                                    pathVertices.push(vertex);\n                                } else {\n                                    startV = _verticesRaw[_verticesRaw.length-1].clone();\n                                    endV = new THREE.Vector3(segment.values[0], 0, segment.values[1]);\n                                    const distance = Math.sqrt(Math.pow(endV.x, 2) + Math.pow(endV.z, 2));\n                                    const n = Math.ceil(distance / globals.vertInt);\n                                    if (n > 1) {\n                                        for (let i = n - 1; i >= 0; i--) {\n                                            _segmentsRaw.push([_verticesRaw.length-1, _verticesRaw.length]);\n                                            if (path.targetAngle && _segmentsRaw.length>0) _segmentsRaw[_segmentsRaw.length-1].push(path.targetAngle);\n                                            const vertex = new THREE.Vector3(startV.x+(i*0+(n-i)*endV.x)/n, 0, startV.z+(i*0+(n-i)*endV.z)/n);\n                                            _verticesRaw.push(vertex);\n                                            pathVertices.push(vertex);\n                                        }\n                                    } else {\n                                        _segmentsRaw.push([_verticesRaw.length-1, _verticesRaw.length]);\n                                        if (path.targetAngle && _segmentsRaw.length>0) _segmentsRaw[_segmentsRaw.length-1].push(path.targetAngle);\n                                        const vertex = new THREE.Vector3(startV.x+endV.x, 0, startV.z+endV.z);\n                                        _verticesRaw.push(vertex);\n                                        pathVertices.push(vertex);\n                                    }\n                                }\n                            } else {\n                                if (typeForStroke(getStroke($path)) != \"border\") {\n                                    _segmentsRaw.push([_verticesRaw.length-1, _verticesRaw.length]);\n                                    if (path.targetAngle && _segmentsRaw.length>0) _segmentsRaw[_segmentsRaw.length-1].push(path.targetAngle);\n                                    var vertex = _verticesRaw[_verticesRaw.length-1].clone();\n                                    vertex.x = segment.values[0];\n                                    vertex.z = segment.values[1];\n                                    _verticesRaw.push(vertex);\n                                    pathVertices.push(vertex);\n                                } else {\n                                    startV = _verticesRaw[_verticesRaw.length-1].clone();\n                                    endV = new THREE.Vector3(segment.values[0], 0, segment.values[1]);\n                                    const distance = Math.sqrt(Math.pow(endV.x - startV.x, 2) + Math.pow(endV.z - startV.z, 2));\n                                    const n = Math.ceil(distance / globals.vertInt);\n                                    if (n > 1) {\n                                        for (let i = n - 1; i >= 0; i--) {\n                                            _segmentsRaw.push([_verticesRaw.length-1, _verticesRaw.length]);\n                                            if (path.targetAngle && _segmentsRaw.length>0) _segmentsRaw[_segmentsRaw.length-1].push(path.targetAngle);\n                                            const vertex = new THREE.Vector3((i*startV.x+(n-i)*endV.x)/n, 0, (i*startV.z+(n-i)*endV.z)/n);\n                                            _verticesRaw.push(vertex);\n                                            pathVertices.push(vertex);\n                                        }\n                                    } else {\n                                        _segmentsRaw.push([_verticesRaw.length-1, _verticesRaw.length]);\n                                        if (path.targetAngle && _segmentsRaw.length>0) _segmentsRaw[_segmentsRaw.length-1].push(path.targetAngle);\n                                        const vertex = new THREE.Vector3(endV.x, 0, endV.z);\n                                        _verticesRaw.push(vertex);\n                                        pathVertices.push(vertex);\n                                    }\n                                }\n                            }\n                        }\n                        break;\n\n                    case \"A\":\n                    case \"a\":\n                        let svgpath = require('svgpath');\n                        let pathDataString = \"M \" + _verticesRaw[_verticesRaw.length-1].x + \" \" + _verticesRaw[_verticesRaw.length-1].z + \" \" + type;\n                        pathDataString += \" \";\n                        for (let index = 0; index < segment.values.length; index++) {\n                            pathDataString += segment.values[index];\n                            pathDataString += \" \";\n                        }\n                        const output = svgpath(pathDataString).unarc();\n                        for (let i = 1; i < output.segments.length; i++) {\n                            let newSegment = new Object();\n                            newSegment.type = output.segments[i][0];\n                            newSegment.values = [];\n                            for (let j = 1; j < output.segments[i].length; j++) {\n                                newSegment.values.push(output.segments[i][j]);\n                            }\n                            segments.splice(j+i, 0, newSegment);\n                        }\n                        break;\n                }\n            }\n            for (var j=0;j<pathVertices.length;j++){\n                applyTransformation(pathVertices[j], path);\n            }\n        }\n    }\n\n    function divPathl(_segment, _segmentsRaw, _verticesRaw, _path, _pathVertices) {\n        const startV = _verticesRaw[_verticesRaw.length-1].clone();\n        const endV = new THREE.Vector3(_segment.values[0], 0, _segment.values[1]);\n        const distance = Math.sqrt(Math.pow(endV.x, 2) + Math.pow(endV.z, 2));\n        const n = Math.ceil(distance / globals.vertInt);\n        if (n > 1) {\n            for (let i = n - 1; i >= 0; i--) {\n                _segmentsRaw.push([_verticesRaw.length-1, _verticesRaw.length]);\n                if (_path.targetAngle && _segmentsRaw.length>0) _segmentsRaw[_segmentsRaw.length-1].push(_path.targetAngle);\n                const vertex = new THREE.Vector3(startV.x+(i*0+(n-i)*endV.x)/n, 0, startV.z+(i*0+(n-i)*endV.z)/n);\n                _verticesRaw.push(vertex);\n                _pathVertices.push(vertex);\n            }\n        } else {\n            _segmentsRaw.push([_verticesRaw.length-1, _verticesRaw.length]);\n            if (_path.targetAngle && _segmentsRaw.length>0) _segmentsRaw[_segmentsRaw.length-1].push(_path.targetAngle);\n            const vertex = new THREE.Vector3(startV.x+endV.x, 0, startV.z+endV.z);\n            _verticesRaw.push(vertex);\n            _pathVertices.push(vertex);\n        }\n    }\n\n    function divPathL(_segment, _segmentsRaw, _verticesRaw, _path, _pathVertices) {\n        const startV = _verticesRaw[_verticesRaw.length-1].clone();\n        const endV = new THREE.Vector3(_segment.values[0], 0, _segment.values[1]);\n        const distance = Math.sqrt(Math.pow(endV.x - startV.x, 2) + Math.pow(endV.z - startV.z, 2));\n        const n = Math.ceil(distance / globals.vertInt);\n        if (n > 1) {\n            for (let i = n - 1; i >= 0; i--) {\n                _segmentsRaw.push([_verticesRaw.length-1, _verticesRaw.length]);\n                if (_path.targetAngle && _segmentsRaw.length>0) _segmentsRaw[_segmentsRaw.length-1].push(_path.targetAngle);\n                const vertex = new THREE.Vector3((i*startV.x+(n-i)*endV.x)/n, 0, (i*startV.z+(n-i)*endV.z)/n);\n                _verticesRaw.push(vertex);\n                _pathVertices.push(vertex);\n            }\n        } else {\n            _segmentsRaw.push([_verticesRaw.length-1, _verticesRaw.length]);\n            if (_path.targetAngle && _segmentsRaw.length>0) _segmentsRaw[_segmentsRaw.length-1].push(_path.targetAngle);\n            const vertex = new THREE.Vector3(endV.x, 0, endV.z);\n            _verticesRaw.push(vertex);\n            _pathVertices.push(vertex);\n        }\n    }\n\n    function divPathv(_segment, _segmentsRaw, _verticesRaw, _path, _pathVertices) {\n        const startV = _verticesRaw[_verticesRaw.length-1].clone();\n        const endV = new THREE.Vector3(0, 0, _segment.values[0]);\n        const distance = Math.sqrt(Math.pow(endV.x, 2) + Math.pow(endV.z, 2));\n        const n = Math.ceil(distance / globals.vertInt);\n        if (n > 1) {\n            for (let i = n - 1; i >= 0; i--) {\n                _segmentsRaw.push([_verticesRaw.length-1, _verticesRaw.length]);\n                if (_path.targetAngle && _segmentsRaw.length>0) _segmentsRaw[_segmentsRaw.length-1].push(_path.targetAngle);\n                const vertex = new THREE.Vector3(startV.x+(i*0+(n-i)*endV.x)/n, 0, startV.z+(i*0+(n-i)*endV.z)/n);\n                _verticesRaw.push(vertex);\n                _pathVertices.push(vertex);\n            }\n        } else {\n            _segmentsRaw.push([_verticesRaw.length-1, _verticesRaw.length]);\n            if (_path.targetAngle && _segmentsRaw.length>0) _segmentsRaw[_segmentsRaw.length-1].push(_path.targetAngle);\n            const vertex = new THREE.Vector3(startV.x+endV.x, 0, startV.z+endV.z);\n            _verticesRaw.push(vertex);\n            _pathVertices.push(vertex);\n        }\n    }\n\n    function divPathV(_segment, _segmentsRaw, _verticesRaw, _path, _pathVertices) {\n        const startV = _verticesRaw[_verticesRaw.length-1].clone();\n        const endV = new THREE.Vector3(startV.x, 0, _segment.values[0]);\n        const distance = Math.sqrt(Math.pow(endV.x - startV.x, 2) + Math.pow(endV.z - startV.z, 2));\n        const n = Math.ceil(distance / globals.vertInt);\n        if (n > 1) {\n            for (let i = n - 1; i >= 0; i--) {\n                _segmentsRaw.push([_verticesRaw.length-1, _verticesRaw.length]);\n                if (_path.targetAngle && _segmentsRaw.length>0) _segmentsRaw[_segmentsRaw.length-1].push(_path.targetAngle);\n                const vertex = new THREE.Vector3((i*startV.x+(n-i)*endV.x)/n, 0, (i*startV.z+(n-i)*endV.z)/n);\n                _verticesRaw.push(vertex);\n                _pathVertices.push(vertex);\n            }\n        } else {\n            _segmentsRaw.push([_verticesRaw.length-1, _verticesRaw.length]);\n            if (_path.targetAngle && _segmentsRaw.length>0) _segmentsRaw[_segmentsRaw.length-1].push(_path.targetAngle);\n            const vertex = new THREE.Vector3(endV.x, 0, endV.z);\n            _verticesRaw.push(vertex);\n            _pathVertices.push(vertex);\n        }\n    }\n\n    function divPathh(_segment, _segmentsRaw, _verticesRaw, _path, _pathVertices) {\n        const startV = _verticesRaw[_verticesRaw.length-1].clone();\n        const endV = new THREE.Vector3(_segment.values[0], 0, 0);\n        const distance = Math.sqrt(Math.pow(endV.x, 2) + Math.pow(endV.z, 2));\n        const n = Math.ceil(distance / globals.vertInt);\n        if (n > 1) {\n            for (let i = n - 1; i >= 0; i--) {\n                _segmentsRaw.push([_verticesRaw.length-1, _verticesRaw.length]);\n                if (_path.targetAngle && _segmentsRaw.length>0) _segmentsRaw[_segmentsRaw.length-1].push(_path.targetAngle);\n                const vertex = new THREE.Vector3(startV.x+(i*0+(n-i)*endV.x)/n, 0, startV.z+(i*0+(n-i)*endV.z)/n);\n                _verticesRaw.push(vertex);\n                _pathVertices.push(vertex);\n            }\n        } else {\n            _segmentsRaw.push([_verticesRaw.length-1, _verticesRaw.length]);\n            if (_path.targetAngle && _segmentsRaw.length>0) _segmentsRaw[_segmentsRaw.length-1].push(_path.targetAngle);\n            const vertex = new THREE.Vector3(startV.x+endV.x, 0, startV.z+endV.z);\n            _verticesRaw.push(vertex);\n            _pathVertices.push(vertex);\n        }\n    }\n\n    function divPathH(_segment, _segmentsRaw, _verticesRaw, _path, _pathVertices) {\n        const startV = _verticesRaw[_verticesRaw.length-1].clone();\n        const endV = new THREE.Vector3(_segment.values[0], 0, startV.z);\n        const distance = Math.sqrt(Math.pow(endV.x - startV.x, 2) + Math.pow(endV.z - startV.z, 2));\n        const n = Math.ceil(distance / globals.vertInt);\n        if (n > 1) {\n            for (let i = n - 1; i >= 0; i--) {\n                _segmentsRaw.push([_verticesRaw.length-1, _verticesRaw.length]);\n                if (_path.targetAngle && _segmentsRaw.length>0) _segmentsRaw[_segmentsRaw.length-1].push(_path.targetAngle);\n                const vertex = new THREE.Vector3((i*startV.x+(n-i)*endV.x)/n, 0, (i*startV.z+(n-i)*endV.z)/n);\n                _verticesRaw.push(vertex);\n                _pathVertices.push(vertex);\n            }\n        } else {\n            _segmentsRaw.push([_verticesRaw.length-1, _verticesRaw.length]);\n            if (_path.targetAngle && _segmentsRaw.length>0) _segmentsRaw[_segmentsRaw.length-1].push(_path.targetAngle);\n            const vertex = new THREE.Vector3(endV.x, 0, endV.z);\n            _verticesRaw.push(vertex);\n            _pathVertices.push(vertex);\n        }\n    }\n\n    function divPathZ(_segmentsRaw, _verticesRaw, _path, _pathVertices, _startVertex) {\n        const startV = _verticesRaw[_verticesRaw.length-1].clone();\n        const endV = _verticesRaw[_startVertex].clone();\n        const distance = Math.sqrt(Math.pow(endV.x - startV.x, 2) + Math.pow(endV.z - startV.z, 2));\n        const n = Math.ceil(distance / globals.vertInt);\n        if (n > 1) {\n            for (let i = n - 1; i >= 1; i--) {\n                _segmentsRaw.push([_verticesRaw.length-1, _verticesRaw.length]);\n                if (_path.targetAngle && _segmentsRaw.length>0) _segmentsRaw[_segmentsRaw.length-1].push(_path.targetAngle);\n                const vertex = new THREE.Vector3((i*startV.x+(n-i)*endV.x)/n, 0, (i*startV.z+(n-i)*endV.z)/n);\n                _verticesRaw.push(vertex);\n                _pathVertices.push(vertex);\n            }\n            _segmentsRaw.push([_verticesRaw.length-1, _startVertex]);\n            if (_path.targetAngle && _segmentsRaw.length>0) _segmentsRaw[_segmentsRaw.length-1].push(_path.targetAngle);\n        } else {\n            _segmentsRaw.push([_verticesRaw.length-1, _startVertex]);\n            if (_path.targetAngle && _segmentsRaw.length>0) _segmentsRaw[_segmentsRaw.length-1].push(_path.targetAngle);\n        }\n    }\n\n    function divPathC(_startV, _endV, _c1, _c2, _segmentsRaw, _verticesRaw, _path, _pathVertices, _originV, _type) {\n        let a, b, midV, d;\n        if (_endV.x - _startV.x == 0) {\n            midV = calcMidVC(_startV, _endV, _c1, _c2, 0.5);\n            d = Math.abs(midV.x - _endV.x);\n        } else {\n            a = (_endV.z - _startV.z)/(_endV.x - _startV.x);\n            b = _endV.z - a*_endV.x;\n            midV = calcMidVC(_startV, _endV, _c1, _c2, 0.5);\n            d = Math.abs(a*midV.x + (-1)*midV.z + b)/Math.sqrt(a*a+1);\n        }\n        if (globals.apprCurve < d || globals.vertInt * globals.vertInt < dist2(_startV, _endV)) {\n            const newC1 = new THREE.Vector3((_startV.x+_c1.x)*0.5, 0, (_startV.z+_c1.z)*0.5);\n            const newC2 = new THREE.Vector3((_c1.x+_c2.x)*0.5, 0, (_c1.z+_c2.z)*0.5);\n            const newC3 = new THREE.Vector3((_c2.x+_endV.x)*0.5, 0, (_c2.z+_endV.z)*0.5);\n            const newC4 = new THREE.Vector3((newC1.x+newC2.x)*0.5, 0, (newC1.z+newC2.z)*0.5);\n            const newC5 = new THREE.Vector3((newC2.x+newC3.x)*0.5, 0, (newC2.z+newC3.z)*0.5);\n            divPathC(_startV, midV, newC1, newC4, _segmentsRaw, _verticesRaw, _path, _pathVertices, _originV, _type);\n            if (typeForStroke(getStroke($(_path))) == \"mountain\" || typeForStroke(getStroke($(_path))) == \"valley\") {\n                _segmentsRaw.push([\"C\"]);\n            }\n            _segmentsRaw.push([_verticesRaw.length-1, _verticesRaw.length]);\n            if (_path.targetAngle && _segmentsRaw.length>0) _segmentsRaw[_segmentsRaw.length-1].push(_path.targetAngle);\n            let vertex;\n            if (_type === \"c\") {\n                vertex = new THREE.Vector3(_originV.x+midV.x, 0, _originV.z+midV.z);\n            } else {\n                vertex = new THREE.Vector3(midV.x, 0, midV.z);\n            }\n            _verticesRaw.push(vertex);\n            _pathVertices.push(vertex);\n            divPathC(midV, _endV, newC5, newC3, _segmentsRaw, _verticesRaw, _path, _pathVertices, _originV, _type);\n        }\n    }\n\n    function dist2(v1, v2) {\n        return (v1.x-v2.x)*(v1.x-v2.x)+(v1.z-v2.z)*(v1.z-v2.z);\n    }\n\n    function calcMidVC(_startV, _endV, _c1, _c2, _t) {\n        const u = 1-_t;\n        return new THREE.Vector3(u*u*u*_startV.x + 3*_t*u*u*_c1.x + 3*_t*_t*u*_c2.x + _t*_t*_t*_endV.x, 0, u*u*u*_startV.z + 3*_t*u*u*_c1.z + 3*_t*_t*u*_c2.z + _t*_t*_t*_endV.z);\n    }\n\n    function divPathQ(_startV, _endV, _c1, _segmentsRaw, _verticesRaw, _path, _pathVertices, _originV, _type) {\n        let a, b, midV, d;\n        if (_endV.x - _startV.x == 0) {\n            midV = calcMidVQ(_startV, _endV, _c1, 0.5);\n            d = Math.abs(midV.x - _endV.x);\n        } else {\n            a = (_endV.z - _startV.z)/(_endV.x - _startV.x);\n            b = _endV.z - a*_endV.x;\n            midV = calcMidVQ(_startV, _endV, _c1, 0.5);\n            d = Math.abs(a*midV.x + (-1)*midV.z + b)/Math.sqrt(a*a+1);\n        }\n        if (globals.apprCurve < d || globals.vertInt * globals.vertInt < dist2(_startV, _endV)) {\n            const newC1 = new THREE.Vector3((_startV.x+_c1.x)*0.5, 0, (_startV.z+_c1.z)*0.5);\n            const newC2 = new THREE.Vector3((_c1.x+_endV.x)*0.5, 0, (_c1.z+_endV.z)*0.5);\n            divPathQ(_startV, midV, newC1, _segmentsRaw, _verticesRaw, _path, _pathVertices, _originV, _type);\n            if (typeForStroke(getStroke($(_path))) == \"mountain\" || typeForStroke(getStroke($(_path))) == \"valley\") {\n                _segmentsRaw.push([\"C\"]);\n            }\n            _segmentsRaw.push([_verticesRaw.length-1, _verticesRaw.length]);\n            if (_path.targetAngle && _segmentsRaw.length>0) _segmentsRaw[_segmentsRaw.length-1].push(_path.targetAngle);\n            let vertex;\n            if (_type === \"q\") {\n                vertex = new THREE.Vector3(_originV.x+midV.x, 0, _originV.z+midV.z);\n            } else {\n                vertex = new THREE.Vector3(midV.x, 0, midV.z);\n            }\n            _verticesRaw.push(vertex);\n            _pathVertices.push(vertex);\n            divPathQ(midV, _endV, newC2, _segmentsRaw, _verticesRaw, _path, _pathVertices, _originV, _type);\n        }\n    }\n\n    function calcMidVQ(_startV, _endV, _c1, _t) {\n        const u = 1-_t;\n        return new THREE.Vector3(u*u*_startV.x + 2*_t*u*_c1.x + _t*_t*_endV.x, 0, u*u*_startV.z + 2*_t*u*_c1.z + _t*_t*_endV.z);\n    }\n\n    function parseLine(_verticesRaw, _segmentsRaw, $elements){\n        for (var i=0;i<$elements.length;i++){\n            var element = $elements[i];\n            if (typeForStroke(getStroke($(element))) == \"border\") {\n                const vert1 = new THREE.Vector3(element.x1.baseVal.value, 0, element.y1.baseVal.value);\n                const vert2 = new THREE.Vector3(element.x2.baseVal.value, 0, element.y2.baseVal.value);\n\n                _verticesRaw.push(vert1);\n                let startVertex = _verticesRaw.length-1;\n                let distance = Math.sqrt(Math.pow(vert2.x - vert1.x, 2) + Math.pow(vert2.z - vert1.z, 2));\n                let n = Math.ceil(distance / globals.vertInt);\n                if (n > 1) {\n                    for (let i = n - 1; i >= 0; i--) {\n                        _segmentsRaw.push([_verticesRaw.length-1, _verticesRaw.length]);\n                        const vertex = new THREE.Vector3((i*vert1.x+(n-i)*vert2.x)/n, 0, (i*vert1.z+(n-i)*vert2.z)/n);\n                        _verticesRaw.push(vertex);\n                    }\n                } else {\n                    _segmentsRaw.push([_verticesRaw.length-1, _verticesRaw.length]);\n                    _verticesRaw.push(vert2);\n                }\n\n                for (let j=1;j<=_verticesRaw.length-1-startVertex;j++){\n                    if (element.targetAngle) _segmentsRaw[_segmentsRaw.length-j].push(element.targetAngle);\n                    applyTransformation(_verticesRaw[_verticesRaw.length-j], element);\n                }\n            } else {\n                _verticesRaw.push(new THREE.Vector3(element.x1.baseVal.value, 0, element.y1.baseVal.value));\n                _verticesRaw.push(new THREE.Vector3(element.x2.baseVal.value, 0, element.y2.baseVal.value));\n                _segmentsRaw.push([_verticesRaw.length-2, _verticesRaw.length-1]);\n                if (element.targetAngle) _segmentsRaw[_segmentsRaw.length-1].push(element.targetAngle);\n                applyTransformation(_verticesRaw[_verticesRaw.length-2], element);\n                applyTransformation(_verticesRaw[_verticesRaw.length-1], element);\n            }\n        }\n    }\n\n    function parseRect(_verticesRaw, _segmentsRaw, $elements){\n        for (var i=0;i<$elements.length;i++){\n            var element = $elements[i];\n            var x = element.x.baseVal.value;\n            var y = element.y.baseVal.value;\n            var width = element.width.baseVal.value;\n            var height = element.height.baseVal.value;\n            if (typeForStroke(getStroke($(element))) == \"border\") {\n                const vert1 = new THREE.Vector3(x, 0, y);\n                const vert2 = new THREE.Vector3(x+width, 0, y);\n                const vert3 = new THREE.Vector3(x+width, 0, y+height);\n                const vert4 = new THREE.Vector3(x, 0, y+height);\n\n                _verticesRaw.push(vert1);\n                let startVertex = _verticesRaw.length-1;\n                let distance = Math.sqrt(Math.pow(vert2.x - vert1.x, 2) + Math.pow(vert2.z - vert1.z, 2));\n                let n = Math.ceil(distance / globals.vertInt);\n                if (n > 1) {\n                    for (let i = n - 1; i >= 0; i--) {\n                        _segmentsRaw.push([_verticesRaw.length-1, _verticesRaw.length]);\n                        const vertex = new THREE.Vector3((i*vert1.x+(n-i)*vert2.x)/n, 0, (i*vert1.z+(n-i)*vert2.z)/n);\n                        _verticesRaw.push(vertex);\n                    }\n                } else {\n                    _segmentsRaw.push([_verticesRaw.length-1, _verticesRaw.length]);\n                    _verticesRaw.push(vert2);\n                }\n\n                distance = Math.sqrt(Math.pow(vert3.x - vert2.x, 2) + Math.pow(vert3.z - vert2.z, 2));\n                n = Math.ceil(distance / globals.vertInt);\n                if (n > 1) {\n                    for (let i = n - 1; i >= 0; i--) {\n                        _segmentsRaw.push([_verticesRaw.length-1, _verticesRaw.length]);\n                        const vertex = new THREE.Vector3((i*vert2.x+(n-i)*vert3.x)/n, 0, (i*vert2.z+(n-i)*vert3.z)/n);\n                        _verticesRaw.push(vertex);\n                    }\n                } else {\n                    _segmentsRaw.push([_verticesRaw.length-1, _verticesRaw.length]);\n                    _verticesRaw.push(vert3);\n                }\n\n                distance = Math.sqrt(Math.pow(vert4.x - vert3.x, 2) + Math.pow(vert4.z - vert3.z, 2));\n                n = Math.ceil(distance / globals.vertInt);\n                if (n > 1) {\n                    for (let i = n - 1; i >= 0; i--) {\n                        _segmentsRaw.push([_verticesRaw.length-1, _verticesRaw.length]);\n                        const vertex = new THREE.Vector3((i*vert3.x+(n-i)*vert4.x)/n, 0, (i*vert3.z+(n-i)*vert4.z)/n);\n                        _verticesRaw.push(vertex);\n                    }\n                } else {\n                    _segmentsRaw.push([_verticesRaw.length-1, _verticesRaw.length]);\n                    _verticesRaw.push(vert4);\n                }\n\n                distance = Math.sqrt(Math.pow(vert1.x - vert4.x, 2) + Math.pow(vert1.z - vert4.z, 2));\n                n = Math.ceil(distance / globals.vertInt);\n                if (n > 1) {\n                    for (let i = n - 1; i >= 1; i--) {\n                        _segmentsRaw.push([_verticesRaw.length-1, _verticesRaw.length]);\n                        const vertex = new THREE.Vector3((i*vert4.x+(n-i)*vert1.x)/n, 0, (i*vert4.z+(n-i)*vert1.z)/n);\n                        _verticesRaw.push(vertex);\n                    }\n                    _segmentsRaw.push([_verticesRaw.length-1, startVertex]);\n                } else {\n                    _segmentsRaw.push([_verticesRaw.length-1, startVertex]);\n                }\n\n                for (let j=1;j<=_verticesRaw.length-startVertex;j++){\n                    if (element.targetAngle) _segmentsRaw[_segmentsRaw.length-j].push(element.targetAngle);\n                    applyTransformation(_verticesRaw[_verticesRaw.length-j], element);\n                }\n            } else {\n                _verticesRaw.push(new THREE.Vector3(x, 0, y));\n                _verticesRaw.push(new THREE.Vector3(x+width, 0, y));\n                _verticesRaw.push(new THREE.Vector3(x+width, 0, y+height));\n                _verticesRaw.push(new THREE.Vector3(x, 0, y+height));\n                _segmentsRaw.push([_verticesRaw.length-4, _verticesRaw.length-3]);\n                _segmentsRaw.push([_verticesRaw.length-3, _verticesRaw.length-2]);\n                _segmentsRaw.push([_verticesRaw.length-2, _verticesRaw.length-1]);\n                _segmentsRaw.push([_verticesRaw.length-1, _verticesRaw.length-4]);\n                for (var j=1;j<=4;j++){\n                    if (element.targetAngle) _segmentsRaw[_segmentsRaw.length-j].push(element.targetAngle);\n                    applyTransformation(_verticesRaw[_verticesRaw.length-j], element);\n                }\n            }\n        }\n    }\n\n    function parsePolygon(_verticesRaw, _segmentsRaw, $elements){\n        for (var i=0;i<$elements.length;i++){\n            var element = $elements[i];\n            if (typeForStroke(getStroke($(element))) == \"border\") {\n                const vert = new THREE.Vector3(element.points[0].x, 0, element.points[0].y);\n                _verticesRaw.push(vert);\n                let startVertex = _verticesRaw.length-1;\n                for (let j=0;j<element.points.length-1;j++){\n                    const vert1 = new THREE.Vector3(element.points[j].x, 0, element.points[j].y);\n                    const vert2 = new THREE.Vector3(element.points[j+1].x, 0, element.points[j+1].y)\n\n                    let distance = Math.sqrt(Math.pow(vert2.x - vert1.x, 2) + Math.pow(vert2.z - vert1.z, 2));\n                    let n = Math.ceil(distance / globals.vertInt);\n                    if (n > 1) {\n                        for (let k = n - 1; k >= 0; k--) {\n                            _segmentsRaw.push([_verticesRaw.length-1, _verticesRaw.length]);\n                            const vertex = new THREE.Vector3((k*vert1.x+(n-k)*vert2.x)/n, 0, (k*vert1.z+(n-k)*vert2.z)/n);\n                            _verticesRaw.push(vertex);\n                        }\n                    } else {\n                        _segmentsRaw.push([_verticesRaw.length-1, _verticesRaw.length]);\n                        _verticesRaw.push(vert2);\n                    }\n                }\n\n                const vert1 = new THREE.Vector3(element.points[element.points.length-1].x, 0, element.points[element.points.length-1].y);\n                const vert2 = vert.clone();\n\n                let distance = Math.sqrt(Math.pow(vert2.x - vert1.x, 2) + Math.pow(vert2.z - vert1.z, 2));\n                let n = Math.ceil(distance / globals.vertInt);\n                if (n > 1) {\n                    for (let j = n - 1; j >= 1; j--) {\n                        _segmentsRaw.push([_verticesRaw.length-1, _verticesRaw.length]);\n                        const vertex = new THREE.Vector3((j*vert1.x+(n-j)*vert2.x)/n, 0, (j*vert1.z+(n-j)*vert2.z)/n);\n                        _verticesRaw.push(vertex);\n                    }\n                    _segmentsRaw.push([_verticesRaw.length-1, startVertex]);\n                } else {\n                    _segmentsRaw.push([_verticesRaw.length-1, startVertex]);\n                }\n\n                for (let j=1;j<=_verticesRaw.length-startVertex;j++){\n                    if (element.targetAngle) _segmentsRaw[_segmentsRaw.length-j].push(element.targetAngle);\n                    applyTransformation(_verticesRaw[_verticesRaw.length-j], element);\n                }\n            } else {\n                for (let j=0;j<element.points.length-1;j++){\n                    _verticesRaw.push(new THREE.Vector3(element.points[j].x, 0, element.points[j].y));\n                    applyTransformation(_verticesRaw[_verticesRaw.length-1], element);\n\n                    if (j<element.points.length-1) _segmentsRaw.push([_verticesRaw.length-1, _verticesRaw.length]);\n                    else _segmentsRaw.push([_verticesRaw.length-1, _verticesRaw.length-element.points.length]);\n\n                    if (element.targetAngle) _segmentsRaw[_segmentsRaw.length-1].push(element.targetAngle);\n                }\n            }\n        }\n    }\n\n    function parsePolyline(_verticesRaw, _segmentsRaw, $elements){\n        for (var i=0;i<$elements.length;i++){\n            var element = $elements[i];\n            if (typeForStroke(getStroke($(element))) == \"border\") {\n                const vert = new THREE.Vector3(element.points[0].x, 0, element.points[0].y);\n                _verticesRaw.push(vert);\n                let startVertex = _verticesRaw.length-1;\n                for (let j=0;j<element.points.length-1;j++){\n                    const vert1 = new THREE.Vector3(element.points[j].x, 0, element.points[j].y);\n                    const vert2 = new THREE.Vector3(element.points[j+1].x, 0, element.points[j+1].y)\n\n                    let distance = Math.sqrt(Math.pow(vert2.x - vert1.x, 2) + Math.pow(vert2.z - vert1.z, 2));\n                    let n = Math.ceil(distance / globals.vertInt);\n                    if (n > 1) {\n                        for (let k = n - 1; k >= 0; k--) {\n                            _segmentsRaw.push([_verticesRaw.length-1, _verticesRaw.length]);\n                            const vertex = new THREE.Vector3((k*vert1.x+(n-k)*vert2.x)/n, 0, (k*vert1.z+(n-k)*vert2.z)/n);\n                            _verticesRaw.push(vertex);\n                        }\n                    } else {\n                        _segmentsRaw.push([_verticesRaw.length-1, _verticesRaw.length]);\n                        _verticesRaw.push(vert2);\n                    }\n                }\n                for (let j=1;j<=_verticesRaw.length-startVertex;j++){\n                    if (element.targetAngle) _segmentsRaw[_segmentsRaw.length-j].push(element.targetAngle);\n                    applyTransformation(_verticesRaw[_verticesRaw.length-j], element);\n                }\n            } else {\n                for (var j=0;j<element.points.length;j++){\n                    _verticesRaw.push(new THREE.Vector3(element.points[j].x, 0, element.points[j].y));\n                    applyTransformation(_verticesRaw[_verticesRaw.length-1], element);\n                    if (j>0) {\n                        _segmentsRaw.push([_verticesRaw.length-1, _verticesRaw.length-2]);\n                        if (element.targetAngle) _segmentsRaw[_segmentsRaw.length-1].push(element.targetAngle);\n                    }\n                }\n            }\n        }\n    }\n\n    function parseEllipse(_verticesRaw, _segmentsRaw, $elements) {\n        for (var i=0;i<$elements.length;i++){\n            var element = $elements[i];\n\n            const cx = element.cx.baseVal.value;\n            const cy = element.cy.baseVal.value;\n            const rx = element.rx.baseVal.value;\n            const ry = element.ry.baseVal.value;\n\n            const vert1 = new THREE.Vector3(cx+rx, 0, cy+0);\n            const vert2 = new THREE.Vector3(cx+0, 0, cy+ry);\n            const vert3 = new THREE.Vector3(cx-rx, 0, cy+0);\n            const vert4 = new THREE.Vector3(cx+0, 0, cy-ry);\n\n            const m = (4*(Math.sqrt(2)-1)*ry)/3;\n            const n = (4*(Math.sqrt(2)-1)*rx)/3;\n\n            const c1 = new THREE.Vector3(cx+rx, 0, cy+n);\n            const c2 = new THREE.Vector3(cx+m, 0, cy+ry);\n            const c3 = new THREE.Vector3(cx-m, 0, cy+ry);\n            const c4 = new THREE.Vector3(cx-rx, 0, cy+n);\n            const c5 = new THREE.Vector3(cx-rx, 0, cy-n);\n            const c6 = new THREE.Vector3(cx-m, 0, cy-ry);\n            const c7 = new THREE.Vector3(cx+m, 0, cy-ry);\n            const c8 = new THREE.Vector3(cx+rx, 0, cy-n);\n\n            _verticesRaw.push(vert1);\n            const startVertLength = _verticesRaw.length-1;\n            divEllipse(vert1, vert2, c1, c2, _segmentsRaw, _verticesRaw, element);\n            if (typeForStroke(getStroke($(element))) == \"mountain\" || typeForStroke(getStroke($(element))) == \"valley\") {\n                _segmentsRaw.push([\"C\"]);\n            }\n            _segmentsRaw.push([_verticesRaw.length-1, _verticesRaw.length]);\n            _verticesRaw.push(vert2);\n            divEllipse(vert2, vert3, c3, c4, _segmentsRaw, _verticesRaw, element);\n            if (typeForStroke(getStroke($(element))) == \"mountain\" || typeForStroke(getStroke($(element))) == \"valley\") {\n                _segmentsRaw.push([\"C\"]);\n            }\n            _segmentsRaw.push([_verticesRaw.length-1, _verticesRaw.length]);\n            _verticesRaw.push(vert3);\n            divEllipse(vert3, vert4, c5, c6, _segmentsRaw, _verticesRaw, element);\n            if (typeForStroke(getStroke($(element))) == \"mountain\" || typeForStroke(getStroke($(element))) == \"valley\") {\n                _segmentsRaw.push([\"C\"]);\n            }\n            _segmentsRaw.push([_verticesRaw.length-1, _verticesRaw.length]);\n            _verticesRaw.push(vert4);\n            divEllipse(vert4, vert1, c7, c8, _segmentsRaw, _verticesRaw, element);\n            if (typeForStroke(getStroke($(element))) == \"mountain\" || typeForStroke(getStroke($(element))) == \"valley\") {\n                _segmentsRaw.push([\"C\"]);\n            }\n            _segmentsRaw.push([_verticesRaw.length-1, startVertLength]);\n\n            for (let j=1;j<=_verticesRaw.length-startVertLength;j++){\n                if (element.targetAngle) _segmentsRaw[_segmentsRaw.length-j].push(element.targetAngle);\n                applyTransformation(_verticesRaw[_verticesRaw.length-j], element);\n            }\n        }\n    }\n\n    function parseCircle(_verticesRaw, _segmentsRaw, $elements) {\n        for (var i=0;i<$elements.length;i++){\n            var element = $elements[i];\n\n            const cx = element.cx.baseVal.value;\n            const cy = element.cy.baseVal.value;\n            const r = element.r.baseVal.value;\n\n            const vert1 = new THREE.Vector3(cx+r, 0, cy+0);\n            const vert2 = new THREE.Vector3(cx+0, 0, cy+r);\n            const vert3 = new THREE.Vector3(cx-r, 0, cy+0);\n            const vert4 = new THREE.Vector3(cx+0, 0, cy-r);\n\n            const m = (4*(Math.sqrt(2)-1)*r)/3;\n            const n = (4*(Math.sqrt(2)-1)*r)/3;\n\n            const c1 = new THREE.Vector3(cx+r, 0, cy+n);\n            const c2 = new THREE.Vector3(cx+m, 0, cy+r);\n            const c3 = new THREE.Vector3(cx-m, 0, cy+r);\n            const c4 = new THREE.Vector3(cx-r, 0, cy+n);\n            const c5 = new THREE.Vector3(cx-r, 0, cy-n);\n            const c6 = new THREE.Vector3(cx-m, 0, cy-r);\n            const c7 = new THREE.Vector3(cx+m, 0, cy-r);\n            const c8 = new THREE.Vector3(cx+r, 0, cy-n);\n\n            _verticesRaw.push(vert1);\n            const startVertLength = _verticesRaw.length-1;\n            divEllipse(vert1, vert2, c1, c2, _segmentsRaw, _verticesRaw, element);\n            if (typeForStroke(getStroke($(element))) == \"mountain\" || typeForStroke(getStroke($(element))) == \"valley\") {\n                _segmentsRaw.push([\"C\"]);\n            }\n            _segmentsRaw.push([_verticesRaw.length-1, _verticesRaw.length]);\n            _verticesRaw.push(vert2);\n            divEllipse(vert2, vert3, c3, c4, _segmentsRaw, _verticesRaw, element);\n            if (typeForStroke(getStroke($(element))) == \"mountain\" || typeForStroke(getStroke($(element))) == \"valley\") {\n                _segmentsRaw.push([\"C\"]);\n            }\n            _segmentsRaw.push([_verticesRaw.length-1, _verticesRaw.length]);\n            _verticesRaw.push(vert3);\n            divEllipse(vert3, vert4, c5, c6, _segmentsRaw, _verticesRaw, element);\n            if (typeForStroke(getStroke($(element))) == \"mountain\" || typeForStroke(getStroke($(element))) == \"valley\") {\n                _segmentsRaw.push([\"C\"]);\n            }\n            _segmentsRaw.push([_verticesRaw.length-1, _verticesRaw.length]);\n            _verticesRaw.push(vert4);\n            divEllipse(vert4, vert1, c7, c8, _segmentsRaw, _verticesRaw, element);\n            if (typeForStroke(getStroke($(element))) == \"mountain\" || typeForStroke(getStroke($(element))) == \"valley\") {\n                _segmentsRaw.push([\"C\"]);\n            }\n            _segmentsRaw.push([_verticesRaw.length-1, startVertLength]);\n\n            for (let j=1;j<=_verticesRaw.length-startVertLength;j++){\n                if (element.targetAngle) _segmentsRaw[_segmentsRaw.length-j].push(element.targetAngle);\n                applyTransformation(_verticesRaw[_verticesRaw.length-j], element);\n            }\n        }\n    }\n\n    function divEllipse(_startV, _endV, _c1, _c2, _segmentsRaw, _verticesRaw, _element) {\n        let a, b, midV, d;\n        if (_endV.x - _startV.x == 0) {\n            midV = calcMidVC(_startV, _endV, _c1, _c2, 0.5);\n            d = Math.abs(midV.x - _endV.x);\n        } else {\n            a = (_endV.z - _startV.z)/(_endV.x - _startV.x);\n            b = _endV.z - a*_endV.x;\n            midV = calcMidVC(_startV, _endV, _c1, _c2, 0.5);\n            d = Math.abs(a*midV.x + (-1)*midV.z + b)/Math.sqrt(a*a+1);\n        }\n        if (globals.apprCurve < d || globals.vertInt * globals.vertInt < dist2(_startV, _endV)) {\n            const newC1 = new THREE.Vector3((_startV.x+_c1.x)*0.5, 0, (_startV.z+_c1.z)*0.5);\n            const newC2 = new THREE.Vector3((_c1.x+_c2.x)*0.5, 0, (_c1.z+_c2.z)*0.5);\n            const newC3 = new THREE.Vector3((_c2.x+_endV.x)*0.5, 0, (_c2.z+_endV.z)*0.5);\n            const newC4 = new THREE.Vector3((newC1.x+newC2.x)*0.5, 0, (newC1.z+newC2.z)*0.5);\n            const newC5 = new THREE.Vector3((newC2.x+newC3.x)*0.5, 0, (newC2.z+newC3.z)*0.5);\n            divEllipse(_startV, midV, newC1, newC4, _segmentsRaw, _verticesRaw, _element);\n            if (typeForStroke(getStroke($(_element))) == \"mountain\" || typeForStroke(getStroke($(_element))) == \"valley\") {\n                _segmentsRaw.push([\"C\"]);\n            }\n            _segmentsRaw.push([_verticesRaw.length-1, _verticesRaw.length]);\n            let vertex = new THREE.Vector3(midV.x, 0, midV.z);\n            _verticesRaw.push(vertex);\n            divEllipse(midV, _endV, newC5, newC3, _segmentsRaw, _verticesRaw, _element);\n        }\n    }\n\n    function loadSVG(url, isDemo){\n        // Some SVG files start with UTF-8 byte order mark (BOM) EF BB BF,\n        // which encodes in Base64 to 77u/ -- remove this, as it breaks the\n        // XML/SVG parser.\n        url = url.replace(/^(data:image\\/svg\\+xml;base64,)77u\\//, '$1');\n\n        SVGloader.load(url, function(svg){\n\n            var _$svg = $(svg);\n            if (_$svg.find('parsererror').length) {\n                globals.warn(\"Error parsing SVG: \" + svg.innerText);\n                return console.warn(_$svg.find('parsererror')[0]);\n            }\n\n            // Add SVG to page dom to reveal rendered styles (including CSS).\n            $(svg).appendTo('body');\n\n            clearAll();\n\n            //warn of groups\n            // var $groups = _$svg.children(\"g\");\n            // if ($groups.length>0){\n            //     globals.warn(\"Grouped elements found in SVG, these are currently ignored by the app.  \" +\n            //         \"Please ungroup all elements before importing.\");\n            // }\n\n            //format all appropriate svg elements\n            _$svg.find(\"symbol\").remove();\n            _$svg.find(\"defs > :not(style)\").remove();\n            var $paths = _$svg.find(\"path\");\n            var $lines = _$svg.find(\"line\");\n            var $rects = _$svg.find(\"rect\");\n            var $polygons = _$svg.find(\"polygon\");\n            var $polylines = _$svg.find(\"polyline\");\n            var $ellipses = _$svg.find(\"ellipse\");\n            var $circles = _$svg.find(\"circle\");\n            $paths.css({fill:\"none\", 'stroke-dasharray':\"none\"});\n            $lines.css({fill:\"none\", 'stroke-dasharray':\"none\"});\n            $rects.css({fill:\"none\", 'stroke-dasharray':\"none\"});\n            $polygons.css({fill:\"none\", 'stroke-dasharray':\"none\"});\n            $polylines.css({fill:\"none\", 'stroke-dasharray':\"none\"});\n            $ellipses.css({fill:\"none\", 'stroke-dasharray':\"none\"});\n            $circles.css({fill:\"none\", 'stroke-dasharray':\"none\"});\n\n            findType(verticesRaw, bordersRaw, borderFilter, $paths, $lines, $rects, $polygons, $polylines, $ellipses, $circles);\n            findType(verticesRaw, mountainsRaw, mountainFilter, $paths, $lines, $rects, $polygons, $polylines, $ellipses, $circles);\n            findType(verticesRaw, valleysRaw, valleyFilter, $paths, $lines, $rects, $polygons, $polylines, $ellipses, $circles);\n            findType(verticesRaw, cutsRaw, cutFilter, $paths, $lines, $rects, $polygons, $polylines, $ellipses, $circles);\n            findType(verticesRaw, triangulationsRaw, triangulationFilter, $paths, $lines, $rects, $polygons, $polylines, $ellipses, $circles);\n            findType(verticesRaw, hingesRaw, hingeFilter, $paths, $lines, $rects, $polygons, $polylines, $ellipses, $circles);\n\n            if (badColors.length>0){\n                badColors = _.uniq(badColors);\n                var string = \"Some objects found with the following stroke colors:<br/><br/>\";\n                _.each(badColors, function(color){\n                    string += \"<span style='background:\" + color + \"' class='colorSwatch'></span>\" + color + \"<br/>\";\n                });\n                string +=  \"<br/>These objects were ignored.<br/>  Please check that your file is set up correctly, <br/>\" +\n                    \"see <b>File > Design Tips</b> for more information.\";\n                globals.warn(string);\n            }\n\n            // Now that loading is done, remove SVG from page DOM.\n            _$svg.remove();\n\n            //todo revert back to old pattern if bad import\n            var success = parseSVG(verticesRaw, bordersRaw, mountainsRaw, valleysRaw, cutsRaw, triangulationsRaw, hingesRaw);\n            if (!success) return;\n\n            //find max and min vertices\n            var max = new THREE.Vector3(-Infinity,-Infinity,-Infinity);\n            var min = new THREE.Vector3(Infinity,Infinity,Infinity);\n            for (var i=0;i<rawFold.vertices_coords.length;i++){\n                var vertex = new THREE.Vector3(rawFold.vertices_coords[i][0], rawFold.vertices_coords[i][1], rawFold.vertices_coords[i][2]);\n                max.max(vertex);\n                min.min(vertex);\n            }\n            if (min.x === Infinity){\n                if (badColors.length == 0) globals.warn(\"no geometry found in file\");\n                return;\n            }\n            max.sub(min);\n            var border = new THREE.Vector3(0.1, 0, 0.1);\n            var scale = max.x;\n            if (max.z < scale) scale = max.z;\n            if (scale == 0) return;\n\n            var strokeWidth = scale/300;\n            border.multiplyScalar(scale);\n            min.sub(border);\n            max.add(border.multiplyScalar(2));\n            var viewBoxTxt = min.x + \" \" + min.z + \" \" + max.x + \" \" + max.z;\n\n            var ns = 'http://www.w3.org/2000/svg';\n            var svg = document.createElementNS(ns, 'svg');\n            svg.setAttribute('viewBox', viewBoxTxt);\n            for (var i=0;i<rawFold.edges_vertices.length;i++){\n                var line = document.createElementNS(ns, 'line');\n                var edge = rawFold.edges_vertices[i];\n                var vertex = rawFold.vertices_coords[edge[0]];\n                line.setAttribute('stroke', colorForAssignment(rawFold.edges_assignment[i]));\n                line.setAttribute('opacity', opacityForAngle(rawFold.edges_foldAngle[i], rawFold.edges_assignment[i]));\n                line.setAttribute('x1', vertex[0]);\n                line.setAttribute('y1', vertex[2]);\n                vertex = rawFold.vertices_coords[edge[1]];\n                line.setAttribute('x2', vertex[0]);\n                line.setAttribute('y2', vertex[2]);\n                line.setAttribute('stroke-width', strokeWidth);\n                svg.appendChild(line);\n            }\n            $(\"#svgViewer\").html(svg);\n\n            },\n            function(){},\n            function(error){\n                globals.warn(\"Error loading SVG \" + url + \" : \" + error);\n                console.warn(error);\n        });\n    }\n\n    function parseSVG(_verticesRaw, _bordersRaw, _mountainsRaw, _valleysRaw, _cutsRaw, _triangulationsRaw, _hingesRaw){\n\n        _.each(_verticesRaw, function(vertex){\n            foldData.vertices_coords.push([vertex.x, vertex.z]);\n        });\n        _.each(_bordersRaw, function(edge){\n            foldData.edges_vertices.push([edge[0], edge[1]]);\n            foldData.edges_assignment.push(\"B\");\n            foldData.edges_foldAngle.push(null);\n        });\n        for (let index = 0; index < _mountainsRaw.length; index++) {\n            const edge = _mountainsRaw[index];\n            if (edge[0] == \"C\") {\n                const curvedEdge = _mountainsRaw[index+1];\n                foldData.edges_vertices.push([curvedEdge[0], curvedEdge[1]]);\n                foldData.edges_assignment.push(\"CM\");\n                foldData.edges_foldAngle.push(curvedEdge[2]);\n                _mountainsRaw.splice(index, 1);\n            } else {\n                foldData.edges_vertices.push([edge[0], edge[1]]);\n                foldData.edges_assignment.push(\"M\");\n                foldData.edges_foldAngle.push(edge[2]);\n            }\n        }\n        for (let index = 0; index < _valleysRaw.length; index++) {\n            const edge = _valleysRaw[index];\n            if (edge[0] == \"C\") {\n                const curvedEdge = _valleysRaw[index+1];\n                foldData.edges_vertices.push([curvedEdge[0], curvedEdge[1]]);\n                foldData.edges_assignment.push(\"CV\");\n                foldData.edges_foldAngle.push(curvedEdge[2]);\n                _valleysRaw.splice(index, 1);\n            } else {\n                foldData.edges_vertices.push([edge[0], edge[1]]);\n                foldData.edges_assignment.push(\"V\");\n                foldData.edges_foldAngle.push(edge[2]);\n            }\n        }\n        _.each(_triangulationsRaw, function(edge){\n            foldData.edges_vertices.push([edge[0], edge[1]]);\n            foldData.edges_assignment.push(\"F\");\n            foldData.edges_foldAngle.push(0);\n        });\n        _.each(_hingesRaw, function(edge){\n            foldData.edges_vertices.push([edge[0], edge[1]]);\n            foldData.edges_assignment.push(\"U\");\n            foldData.edges_foldAngle.push(null);\n        });\n        _.each(_cutsRaw, function(edge){\n            foldData.edges_vertices.push([edge[0], edge[1]]);\n            foldData.edges_assignment.push(\"C\");\n            foldData.edges_foldAngle.push(null);\n        });\n\n        if (foldData.vertices_coords.length == 0 || foldData.edges_vertices.length == 0){\n            globals.warn(\"No valid geometry found in SVG, be sure to ungroup all and remove all clipping masks.\");\n            return false;\n        }\n\n        // FOLD.filter.collapseNearbyVertices\n        // FOLD.filter.removeLoopEdges\n        // FOLD.filter.removeDuplicateEdges_vertices\n        // findIntersections\n        // FOLD.convert.edges_vertices_to_vertices_vertices_unsorted\n        // removeStrayVertices\n        // FOLD.convert.sort_vertices_vertices\n        // FOLD.convert.vertices_vertices_to_faces_vertices\n        // edgesVerticesToVerticesEdges\n        // removeBorderFaces\n\n        foldData = FOLD.filter.collapseNearbyVertices(foldData, globals.vertTol);\n        foldData = FOLD.filter.removeLoopEdges(foldData);//remove edges that points to same vertex\n        foldData = FOLD.filter.removeDuplicateEdges_vertices(foldData);//remove duplicate edges\n        // foldData = FOLD.filter.subdivideCrossingEdges_vertices(foldData, globals.vertTol);//find intersections and add vertices/edges\n\n        foldData = findIntersections(foldData, globals.vertTol);\n        //cleanup after intersection operation\n        foldData = FOLD.filter.collapseNearbyVertices(foldData, globals.vertTol);\n        foldData = FOLD.filter.removeLoopEdges(foldData);//remove edges that points to same vertex\n        foldData = FOLD.filter.removeDuplicateEdges_vertices(foldData);//remove duplicate edges\n\n        foldData = FOLD.convert.edges_vertices_to_vertices_vertices_unsorted(foldData);\n        foldData = removeStrayVertices(foldData);//delete stray anchors\n        // foldData = removeRedundantVertices(foldData, 0.01);//remove vertices that split edge\n\n        foldData.vertices_vertices = FOLD.convert.sort_vertices_vertices(foldData);\n        foldData = FOLD.convert.vertices_vertices_to_faces_vertices(foldData);\n\n        foldData = edgesVerticesToVerticesEdges(foldData);\n        foldData = removeBorderFaces(foldData);//expose holes surrounded by all border edges\n\n        foldData = reverseFaceOrder(foldData);//set faces to counter clockwise\n\n        return processFold(foldData);\n    }\n\n    function processFold(fold, returnCreaseParams){\n\n        //add missing coordinates to make 3d, mapping (x,y) -> (x,0,z)\n        //This is against the FOLD spec which says that, beyond two dimensions,\n        //\"all unspecified coordinates are implicitly zero\"...\n        var is2d = true;\n        for (var i=0;i<fold.vertices_coords.length;i++){\n            var vertex = fold.vertices_coords[i];\n            if (vertex.length === 2) {\n                fold.vertices_coords[i] = [vertex[0], 0, vertex[1]];\n            } else {\n                is2d = false;\n            }\n        }\n\n        //save pre-triangulated faces for later saveFOLD()\n        rawFold = JSON.parse(JSON.stringify(fold));\n\n        var cuts = FOLD.filter.cutEdges(fold);\n        if (cuts.length>0) {\n            fold = splitCuts(fold);\n            fold = FOLD.convert.edges_vertices_to_vertices_vertices_unsorted(fold);\n            fold = removeRedundantVertices(fold, 0.01);//remove vertices that split edge\n        }\n        delete fold.vertices_vertices;\n        delete fold.vertices_edges;\n\n        foldData = triangulatePolys(fold);\n        \n        for (let index = 0; index < foldData.edges_assignment.length; index++) {\n            if (foldData.edges_assignment[index] == \"CM\") {\n                foldData.edges_assignment[index] = \"M\";\n            } else if (foldData.edges_assignment[index] == \"CV\") {\n                foldData.edges_assignment[index] = \"V\";\n            }\n        }\n\n        mountains = FOLD.filter.mountainEdges(foldData);\n        valleys = FOLD.filter.valleyEdges(foldData);\n        borders = FOLD.filter.boundaryEdges(foldData);\n        hinges = FOLD.filter.unassignedEdges(foldData);\n        triangulations = FOLD.filter.flatEdges(foldData);\n\n        $(\"#numMtns\").html(\"(\" + mountains.length + \")\");\n        $(\"#numValleys\").html(\"(\" + valleys.length + \")\");\n        $(\"#numFacets\").html(\"(\" + triangulations.length + \")\");\n        $(\"#numBoundary\").html(\"(\" + borders.length + \")\");\n        $(\"#numPassive\").html(\"(\" + hinges.length + \")\");\n\n        var allCreaseParams = getFacesAndVerticesForEdges(foldData);//todo precompute vertices_faces\n        if (returnCreaseParams) return allCreaseParams;\n\n        globals.model.buildModel(foldData, allCreaseParams);\n        return foldData;\n    }\n\n    function reverseFaceOrder(fold){\n        for (var i=0;i<fold.faces_vertices.length;i++){\n            fold.faces_vertices[i].reverse();\n        }\n        return fold;\n    }\n\n    function edgesVerticesToVerticesEdges(fold){\n        var verticesEdges = [];\n        for (var i=0;i<fold.vertices_coords.length;i++){\n            verticesEdges.push([]);\n        }\n        for (var i=0;i<fold.edges_vertices.length;i++){\n            var edge = fold.edges_vertices[i];\n            verticesEdges[edge[0]].push(i);\n            verticesEdges[edge[1]].push(i);\n        }\n        fold.vertices_edges = verticesEdges;\n        return fold;\n    }\n\n    function facesVerticesToVerticesFaces(fold){\n        var verticesFaces = [];\n        for (var i=0;i<fold.vertices_coords.length;i++){\n            verticesFaces.push([]);\n        }\n        for (var i=0;i<fold.faces_vertices.length;i++){\n            var face = fold.faces_vertices[i];\n            for (var j=0;j<face.length;j++){\n                verticesFaces[face[j]].push(i);\n            }\n        }\n        fold.vertices_faces = verticesFaces;\n        return fold;\n    }\n\n    function sortVerticesEdges(fold){\n        for (var i=0;i<fold.vertices_vertices.length;i++){\n            var verticesVertices = fold.vertices_vertices[i];\n            var verticesEdges = fold.vertices_edges[i];\n            var sortedVerticesEdges = [];\n            for (var j=0;j<verticesVertices.length;j++){\n                var index = -1;\n                for (var k=0;k<verticesEdges.length;k++){\n                    var edgeIndex = verticesEdges[k];\n                    var edge = fold.edges_vertices[edgeIndex];\n                    if (edge.indexOf(verticesVertices[j])>=0){\n                        index = edgeIndex;\n                        break;\n                    }\n                }\n                if (index<0) console.warn(\"no matching edge found, fix this\");\n                sortedVerticesEdges.push(index);\n            }\n            fold.vertices_edges[i] = sortedVerticesEdges;\n        }\n        return fold;\n    }\n\n    function splitCuts(fold){\n        fold = sortVerticesEdges(fold);\n        fold = facesVerticesToVerticesFaces(fold);\n        //go around each vertex and split cut in clockwise order\n        for (var i=0;i<fold.vertices_edges.length;i++){\n            var groups = [[]];\n            var groupIndex = 0;\n            var verticesEdges = fold.vertices_edges[i];\n            var verticesFaces = fold.vertices_faces[i];\n            for (var j=0;j<verticesEdges.length;j++){\n                var edgeIndex = verticesEdges[j];\n                var assignment = fold.edges_assignment[edgeIndex];\n                groups[groupIndex].push(edgeIndex);\n                if (assignment == \"C\"){\n                    //split cut edge into two boundary edges\n                    groups.push([fold.edges_vertices.length]);\n                    groupIndex++;\n                    var newEdgeIndex = fold.edges_vertices.length;\n                    var edge = fold.edges_vertices[edgeIndex];\n                    fold.edges_vertices.push([edge[0], edge[1]]);\n                    fold.edges_assignment[edgeIndex] = \"B\";\n                    fold.edges_foldAngle.push(null);\n                    fold.edges_assignment.push(\"B\");\n                    //add new boundary edge to other vertex\n                    var otherVertex = edge[0];\n                    if (otherVertex == i) otherVertex = edge[1];\n                    var otherVertexEdges = fold.vertices_edges[otherVertex];\n                    var otherVertexEdgeIndex = otherVertexEdges.indexOf(edgeIndex);\n                    otherVertexEdges.splice(otherVertexEdgeIndex, 0, newEdgeIndex);\n                } else if (assignment == \"B\"){\n                    if (j==0 && verticesEdges.length>1){\n                        //check if next edge is also boundary\n                        var nextEdgeIndex = verticesEdges[1];\n                        if (fold.edges_assignment[nextEdgeIndex] == \"B\"){\n                            //check if this edge shares a face with the next\n                            var edge = fold.edges_vertices[edgeIndex];\n                            var otherVertex = edge[0];\n                            if (otherVertex == i) otherVertex = edge[1];\n                            var nextEdge = fold.edges_vertices[nextEdgeIndex];\n                            var nextVertex  = nextEdge[0];\n                            if (nextVertex == i) nextVertex = nextEdge[1];\n                            if (connectedByFace(fold, fold.vertices_faces[i], otherVertex, nextVertex)){\n                            } else {\n                                groups.push([]);\n                                groupIndex++;\n                            }\n                        }\n                    } else if (groups[groupIndex].length>1) {\n                        groups.push([]);\n                        groupIndex++;\n                    }\n                }\n            }\n            if (groups.length <= 1) continue;\n            for (var k=groups[groupIndex].length-1;k>=0;k--){//put remainder of last group in first group\n                groups[0].unshift(groups[groupIndex][k]);\n            }\n            groups.pop();\n            for (var j=1;j<groups.length;j++){//for each extra group, assign new vertex\n                var currentVertex = fold.vertices_coords[i];\n                var vertIndex = fold.vertices_coords.length;\n                fold.vertices_coords.push(currentVertex.slice());//make a copy\n                var connectingIndices = [];\n                for (var k=0;k<groups[j].length;k++){//update edges_vertices\n                    var edgeIndex = groups[j][k];\n                    var edge = fold.edges_vertices[edgeIndex];\n                    var otherIndex = edge[0];\n                    if (edge[0] == i) {\n                        edge[0] = vertIndex;\n                        otherIndex = edge[1];\n                    } else edge[1] = vertIndex;\n                    connectingIndices.push(otherIndex);\n                }\n                if (connectingIndices.length<2) {\n                    console.warn(\"problem here\");\n                } else {\n                    for (var k=1;k<connectingIndices.length;k++){//update faces_vertices\n                        //i, k-1, k\n                        var thisConnectingVertIndex = connectingIndices[k];\n                        var previousConnectingVertIndex = connectingIndices[k-1];\n                        var found = false;\n                        for (var a=0;a<verticesFaces.length;a++){\n                            var face = fold.faces_vertices[verticesFaces[a]];\n                            var index1 = face.indexOf(thisConnectingVertIndex);\n                            var index2 = face.indexOf(previousConnectingVertIndex);\n                            var index3 = face.indexOf(i);\n                            if (index1 >= 0 && index2 >= 0 && index3>=0 &&\n                                (Math.abs(index1-index3) === 1 || Math.abs(index1-index3) === face.length-1) &&\n                                (Math.abs(index2-index3) === 1 || Math.abs(index2-index3) === face.length-1)){\n                                found = true;\n                                face[index3] = vertIndex;\n                                break;\n                            }\n                        }\n                        if (!found) console.warn(\"problem here\");\n                    }\n                }\n            }\n        }\n        //these are all incorrect now\n        delete fold.vertices_faces;\n        delete fold.vertices_edges;\n        delete fold.vertices_vertices;\n        return fold;\n    }\n\n    function connectedByFace(fold, verticesFaces, vert1, vert2){\n        if (vert1 == vert2) return false;\n        for (var a=0;a<verticesFaces.length;a++){\n            var face = fold.faces_vertices[verticesFaces[a]];\n            if (face.indexOf(vert1) >= 0 && face.indexOf(vert2) >= 0){\n                return true;\n            }\n        }\n        return false;\n    }\n\n    function removeBorderFaces(fold){\n        for (var i=fold.faces_vertices.length-1;i>=0;i--){\n            var face = fold.faces_vertices[i];\n            var allBorder = true;\n\n            for (var j=0;j<face.length;j++){\n                var vertexIndex = face[j];\n                var nextIndex = j+1;\n                if (nextIndex >= face.length) nextIndex = 0;\n                var nextVertexIndex = face[nextIndex];\n                var connectingEdgeFound = false;\n                for (var k=0;k<fold.vertices_edges[vertexIndex].length;k++){\n                    var edgeIndex = fold.vertices_edges[vertexIndex][k];\n                    var edge = fold.edges_vertices[edgeIndex];\n                    if ((edge[0] == vertexIndex && edge[1] == nextVertexIndex) ||\n                        (edge[1] == vertexIndex && edge[0] == nextVertexIndex)){\n                        connectingEdgeFound = true;\n                        var assignment = fold.edges_assignment[edgeIndex];\n                        if (assignment != \"B\"){\n                            allBorder = false;\n                            break;\n                        }\n                    }\n                }\n                if (!connectingEdgeFound) console.warn(\"no connecting edge found on face\");\n                if (!allBorder) break;\n            }\n            if (allBorder) fold.faces_vertices.splice(i,1);\n        }\n        return fold;\n    }\n\n    function getFacesAndVerticesForEdges(fold){\n        var allCreaseParams = [];//face1Ind, vertInd, face2Ind, ver2Ind, edgeInd, angle\n        var faces = fold.faces_vertices;\n        for (var i=0;i<fold.edges_vertices.length;i++){\n            var assignment = fold.edges_assignment[i];\n            if (assignment !== \"M\" && assignment !== \"V\" && assignment !== \"F\") continue;\n            var edge = fold.edges_vertices[i];\n            var v1 = edge[0];\n            var v2 = edge[1];\n            var creaseParams = [];\n            for (var j=0;j<faces.length;j++){\n                var face = faces[j];\n                var faceVerts = [face[0], face[1], face[2]];\n                var v1Index = faceVerts.indexOf(v1);\n                if (v1Index>=0){\n                    var v2Index = faceVerts.indexOf(v2);\n                    if (v2Index>=0){\n                        creaseParams.push(j);\n                        if (v2Index>v1Index) {\n                            faceVerts.splice(v2Index, 1);\n                            faceVerts.splice(v1Index, 1);\n                        } else {\n                            faceVerts.splice(v1Index, 1);\n                            faceVerts.splice(v2Index, 1);\n                        }\n                        creaseParams.push(faceVerts[0]);\n                        if (creaseParams.length == 4) {\n\n                            if (v2Index-v1Index == 1 || v2Index-v1Index == -2) {\n                                creaseParams = [creaseParams[2], creaseParams[3], creaseParams[0], creaseParams[1]];\n                            }\n\n                            creaseParams.push(i);\n                            var angle = fold.edges_foldAngle[i];\n                            creaseParams.push(angle);\n                            allCreaseParams.push(creaseParams);\n                            break;\n                        }\n                    }\n                }\n            }\n        }\n        return allCreaseParams;\n    }\n\n    function removeRedundantVertices(fold, epsilon){\n\n        var old2new = [];\n        var numRedundant = 0;\n        var newIndex = 0;\n        for (var i=0;i<fold.vertices_vertices.length;i++){\n            var vertex_vertices = fold.vertices_vertices[i];\n            if (vertex_vertices.length != 2) {\n                old2new.push(newIndex++);\n                continue;\n            }\n            var vertex_coord = fold.vertices_coords[i];\n            var neighbor0 = fold.vertices_coords[vertex_vertices[0]];\n            var neighbor1 = fold.vertices_coords[vertex_vertices[1]];\n            var threeD = vertex_coord.length == 3;\n            var vec0 = [neighbor0[0]-vertex_coord[0], neighbor0[1]-vertex_coord[1]];\n            var vec1 = [neighbor1[0]-vertex_coord[0], neighbor1[1]-vertex_coord[1]];\n            var magSqVec0 = vec0[0]*vec0[0]+vec0[1]*vec0[1];\n            var magSqVec1 = vec1[0]*vec1[0]+vec1[1]*vec1[1];\n            var dot = vec0[0]*vec1[0]+vec0[1]*vec1[1];\n            if (threeD){\n                vec0.push(neighbor0[2]-vertex_coord[2]);\n                vec1.push(neighbor1[2]-vertex_coord[2]);\n                magSqVec0 += vec0[2]*vec0[2];\n                magSqVec1 += vec1[2]*vec1[2];\n                dot += vec0[2]*vec1[2];\n            }\n            dot /= Math.sqrt(magSqVec0*magSqVec1);\n            if (Math.abs(dot + 1.0)<epsilon){\n                var merged = mergeEdge(fold, vertex_vertices[0], i, vertex_vertices[1]);\n                if (merged){\n                    numRedundant++;\n                    old2new.push(null);\n                } else {\n                    old2new.push(newIndex++);\n                    continue;\n                }\n            } else old2new.push(newIndex++);\n        }\n        if (numRedundant == 0) return fold;\n        console.warn(numRedundant + \" redundant vertices found\");\n        fold = FOLD.filter.remapField(fold, 'vertices', old2new);\n        if (fold.faces_vertices){\n            for (var i=0;i<fold.faces_vertices.length;i++){\n                var face = fold.faces_vertices[i];\n                for (var j=face.length-1;j>=0;j--){\n                    if (face[j] === null) face.splice(j, 1);\n                }\n            }\n        }\n        return fold;\n    }\n\n    function mergeEdge(fold, v1, v2, v3){//v2 is center vertex\n        var angleAvg = 0;\n        var avgSum = 0;\n        var angles = [];\n        var edgeAssignment = null;\n        var edgeIndices = [];\n        for (var i=fold.edges_vertices.length-1;i>=0;i--){\n            var edge = fold.edges_vertices[i];\n            if (edge.indexOf(v2)>=0 && (edge.indexOf(v1) >= 0 || edge.indexOf(v3) >= 0)){\n                if (edgeAssignment === null) edgeAssignment = fold.edges_assignment[i];\n                else if (edgeAssignment != fold.edges_assignment[i]) {\n                    console.log(edgeAssignment, fold.edges_assignment[i]);\n                    console.warn(\"different edge assignments\");\n                    return false;\n                }\n                var angle = fold.edges_foldAngle[i];\n                if (isNaN(angle)) console.log(i);\n                angles.push(angle);\n                if (angle) {\n                    angleAvg += angle;\n                    avgSum++;\n                }\n                edgeIndices.push(i);//larger index in front\n            }\n        }\n        if (angles[0] != angles[1]){\n            console.warn(\"incompatible angles: \" + JSON.stringify(angles));\n        }\n        for (var i=0;i<edgeIndices.length;i++){\n            var index = edgeIndices[i];\n            fold.edges_vertices.splice(index, 1);\n            fold.edges_assignment.splice(index, 1);\n            fold.edges_foldAngle.splice(index, 1);\n        }\n        fold.edges_vertices.push([v1, v3]);\n        fold.edges_assignment.push(edgeAssignment);\n        if (avgSum > 0) fold.edges_foldAngle.push(angleAvg/avgSum);\n        else fold.edges_foldAngle.push(null);\n        var index = fold.vertices_vertices[v1].indexOf(v2);\n        fold.vertices_vertices[v1].splice(index, 1);\n        fold.vertices_vertices[v1].push(v3);\n        index = fold.vertices_vertices[v3].indexOf(v2);\n        fold.vertices_vertices[v3].splice(index, 1);\n        fold.vertices_vertices[v3].push(v1);\n        return true;\n    }\n\n    function removeStrayVertices(fold){\n        if (!fold.vertices_vertices) {\n            console.warn(\"compute vertices_vertices first\");\n            fold = FOLD.convert.edges_vertices_to_vertices_vertices_unsorted(fold);\n        }\n        var numStrays = 0;\n        var old2new = [];\n        var newIndex = 0;\n        for (var i=0;i<fold.vertices_vertices.length;i++){\n            if (fold.vertices_vertices[i] === undefined || fold.vertices_vertices[i].length==0) {\n                numStrays++;\n                old2new.push(null);\n            } else old2new.push(newIndex++);\n        }\n        if (numStrays == 0) return fold;\n        console.warn(numStrays+ \" stray vertices found\");\n        return FOLD.filter.remapField(fold, 'vertices', old2new);\n    }\n\n    // class for halfedge\n    class Vertex {\n        constructor(point, id) {\n            this._point = point;\n            this._halfedge = null;\n            this._id = id;\n        }\n\n        get point() {\n            return this._point;\n        }\n        get halfedge() {\n            return this._halfedge;\n        }\n        get id() {\n            return this._id;\n        }\n        set point(point) {\n            this._point = point;\n        }\n        set halfedge(halfedge) {\n            this._halfedge = halfedge;\n        }\n    }\n\n    class Halfedge {\n        constructor(vertex) {\n            this._vertex = vertex;\n            this._face = null;\n            this._pair = null;\n            this._next = null;\n            this._prev = null;\n            this._isCurve = false;\n            this._edge = null;\n        }\n        \n        get vertex() {\n            return this._vertex;\n        }\n        get face() {\n            return this._face;\n        }\n        get pair() {\n            return this._pair;\n        }\n        get next() {\n            return this._next;\n        }\n        get prev() {\n            return this._prev;\n        }\n        get isCurve() {\n            return this._isCurve;\n        }\n        get edge() {\n            return this._edge;\n        }\n        set vertex(vertex) {\n            this._vertex = vertex;\n        }\n        set face(face) {\n            this._face = face;\n        }\n        set pair(pair) {\n            this._pair = pair;\n        }\n        set next(next) {\n            this._next = next;\n        }\n        set prev(prev) {\n            this._prev = prev;\n        }\n        set isCurve(isCurve) {\n            this._isCurve = isCurve;\n        }\n        set edge(edge) {\n            this._edge = edge;\n        }\n    }\n\n    class Face {\n        constructor(halfedge) {\n            this._halfedge = halfedge;\n        }\n\n        get halfedge() {\n            return this._halfedge;\n        }\n        set halfedge(halfedge) {\n            this._halfedge = halfedge;\n        }\n    }\n\n    class Edge {\n        constructor(halfedge) {\n            this._start = halfedge.vertex;\n            this._end = halfedge.next.vertex;\n            this._left = halfedge;\n            this._right = null;\n        }\n\n        get start() {\n            return this._start;\n        }\n        get end() {\n            return this._end;\n        }\n        get left() {\n            return this._left;\n        }\n        get right() {\n            return this._right;\n        }\n\n        set start(start) {\n            this._start = start;\n        }\n        set end(end) {\n            this._end = end;\n        }\n        set left(left) {\n            this._left = left;\n        }\n        set right(right) {\n            this._right = right;\n        }\n    }\n\n    class Model {\n        constructor(edges, assignments) {\n            this._faces = [];\n            this._vertices = [];\n            this._edges = edges;\n            this._assignments = assignments;\n            this._virtices_edges;\n            this._triangulated_edges = [];\n        }\n\n        setHalfedgePair(halfedge) {\n            for (let i = 0; i < this._faces.length; i++) {\n                let halfedgeInFace = this._faces[i].halfedge;\n                do {\n                    if (halfedge.vertex == halfedgeInFace.next.vertex && halfedge.next.vertex == halfedgeInFace.vertex) {\n                        halfedge.pair = halfedgeInFace;\n                        halfedgeInFace.pair = halfedge;\n                        return;\n                    }\n                    halfedgeInFace = halfedgeInFace.next;\n                } while (halfedgeInFace != this._faces[i].halfedge);\n            }\n        }\n\n        setHalfedgePair2(halfedge0, halfedge1) {\n            halfedge0.pair = halfedge1;\n            halfedge0.isCurve = false;\n            halfedge1.pair = halfedge0;\n            halfedge1.isCurve = false;\n        }\n\n        checkIsCurved(halfedge) {\n            for (let i = 0; i < this._edges.length; i++) {\n                if (this._edges[i][0] == halfedge.vertex.id) {\n                    if (this._edges[i][1] == halfedge.next.vertex.id) {\n                        if (this._assignments[i] == 'CM' || this._assignments[i] == 'CV') {\n                            halfedge.isCurve = true;\n                        }\n                    }\n                } else if (this._edges[i][1] == halfedge.vertex.id) {\n                    if (this._edges[i][0] == halfedge.next.vertex.id) {\n                        if (this._assignments[i] == 'CM' || this._assignments[i] == 'CV') {\n                            halfedge.isCurve = true;\n                        }\n                    }\n                }\n            }\n        }\n\n        addFace(vertex0, vertex1, vertex2) {\n            let veMap = this._vertices_edges;\n            let halfedge0 = new Halfedge(vertex0);\n            if (vertex0.halfedge == null) {\n                vertex0.halfedge = halfedge0;\n            }\n            let halfedge1 = new Halfedge(vertex1);\n            if (vertex1.halfedge == null) {\n                vertex1.halfedge = halfedge1;\n            }\n            let halfedge2 = new Halfedge(vertex2);\n            if (vertex2.halfedge == null) {\n                vertex2.halfedge = halfedge2;\n            }\n            \n            halfedge0.next = halfedge1;\n            halfedge0.prev = halfedge2;\n            halfedge1.next = halfedge2;\n            halfedge1.prev = halfedge0;\n            halfedge2.next = halfedge0;\n            halfedge2.prev = halfedge1;\n\n            let face = new Face(halfedge0);\n            this._faces.push(face);\n            halfedge0.face = face;\n            halfedge1.face = face;\n            halfedge2.face = face;\n            this.setHalfedgePair(halfedge0);\n            this.setHalfedgePair(halfedge1);\n            this.setHalfedgePair(halfedge2);\n\n            if (halfedge0.pair == null) {\n                let edge = new Edge(halfedge0);\n                this._triangulated_edges.push(edge);\n                halfedge0.edge = edge;\n            } else {\n                let edge = halfedge0.pair.edge;\n                edge.right = halfedge0;\n                halfedge0.edge = edge;\n            }\n\n            if (halfedge1.pair == null) {\n                let edge = new Edge(halfedge1);\n                this._triangulated_edges.push(edge);\n                halfedge1.edge = edge;\n            } else {\n                let edge = halfedge1.pair.edge;\n                edge.right = halfedge1;\n                halfedge1.edge = edge;\n            }\n\n            if (halfedge2.pair == null) {\n                let edge = new Edge(halfedge2);\n                this._triangulated_edges.push(edge);\n                halfedge2.edge = edge;\n            } else {\n                let edge = halfedge2.pair.edge;\n                edge.right = halfedge2;\n                halfedge2.edge = edge;\n            }\n\n            if (halfedge0.pair == null) {\n                this.checkIsCurved(halfedge0);\n            } else {\n                if (veMap.has(vertex0.id)) {\n                    veMap.set(vertex0.id, veMap.get(vertex0.id)+1);\n                } else {\n                    veMap.set(vertex0.id, 1);\n                }\n                if (veMap.has(vertex1.id)) {\n                    veMap.set(vertex1.id, veMap.get(vertex1.id)+1);\n                } else {\n                    veMap.set(vertex1.id, 1);\n                }\n            }\n\n            if (halfedge1.pair == null) {\n                this.checkIsCurved(halfedge1);\n            } else {\n                if (veMap.has(vertex1.id)) {\n                    veMap.set(vertex1.id, veMap.get(vertex1.id)+1);\n                } else {\n                    veMap.set(vertex1.id, 1);\n                }\n                if (veMap.has(vertex2.id)) {\n                    veMap.set(vertex2.id, veMap.get(vertex2.id)+1);\n                } else {\n                    veMap.set(vertex2.id, 1);\n                }\n            }\n\n            if (halfedge2.pair == null) {\n                this.checkIsCurved(halfedge2);\n            } else {\n                if (veMap.has(vertex0.id)) {\n                    veMap.set(vertex0.id, veMap.get(vertex0.id)+1);\n                } else {\n                    veMap.set(vertex0.id, 1);\n                }\n                if (veMap.has(vertex2.id)) {\n                    veMap.set(vertex2.id, veMap.get(vertex2.id)+1);\n                } else {\n                    veMap.set(vertex2.id, 1);\n                }\n            }\n        }\n\n        cross(halfedge) {\n            let vertexA = halfedge.vertex;\n            let vertexB = halfedge.next.vertex;\n            let vertexC = halfedge.prev.vertex;\n            let vertexD = halfedge.pair.prev.vertex;\n            let x1 = vertexA.point[0];\n            let y1 = vertexA.point[1];\n            let x2 = vertexB.point[0];\n            let y2 = vertexB.point[1];\n            let x3 = vertexC.point[0];\n            let y3 = vertexC.point[1];\n            let x4 = vertexD.point[0];\n            let y4 = vertexD.point[1];\n\n            let ta = (x3-x4)*(y1-y3)+(y3-y4)*(x3-x1);\n            let tb = (x3-x4)*(y2-y3)+(y3-y4)*(x3-x2);\n            let tc = (x1-x2)*(y3-y1)+(y1-y2)*(x1-x3);\n            let td = (x1-x2)*(y4-y1)+(y1-y2)*(x1-x4);\n\n            return (tc*td < 0) && (ta*tb < 0);\n        }\n\n        angle(a, b, c) {\n            let X1 = b[0] - a[0];\n            let Y1 = b[1] - a[1];\n            let X2 = c[0] - a[0];\n            let Y2 = c[1] - a[1];\n\n            let lengthX = Math.pow(X1*X1+Y1*Y1, 0.5);\n            let lengthY = Math.pow(X2*X2+Y2*Y2, 0.5);\n            let cos = (X1*X2+Y1*Y2) / (lengthX*lengthY);\n            let theta = Math.acos(cos);\n            return theta;\n        }\n\n        cHalfedge1(tmpHalfedge) {\n            if (tmpHalfedge.next.isCurve) {\n                return tmpHalfedge.next;\n            } else {\n                if (tmpHalfedge.next.pair != null) {\n                    return this.cHalfedge1(tmpHalfedge.next.pair);\n                } else {\n                    return false;\n                }\n            }\n        }\n\n        cHalfedge2(tmpHalfedge) {\n            if (tmpHalfedge.prev.isCurve) {\n                return tmpHalfedge.prev;\n            } else {\n                if (tmpHalfedge.prev.pair != null) {\n                    return this.cHalfedge2(tmpHalfedge.prev.pair);\n                } else {\n                    return false;\n                }\n            }\n        }\n\n        cHalfedge3(tmpHalfedge) {\n            if (tmpHalfedge.prev.isCurve) {\n                return tmpHalfedge.prev;\n            } else {\n                if (tmpHalfedge.prev.pair != null) {\n                    return this.cHalfedge3(tmpHalfedge.prev.pair);\n                } else {\n                    return false;\n                }\n            }\n        }\n\n        cHalfedge4(tmpHalfedge) {\n            if (tmpHalfedge.next.isCurve) {\n                return tmpHalfedge.next;\n            } else {\n                if (tmpHalfedge.next.pair != null) {\n                    return this.cHalfedge4(tmpHalfedge.next.pair);\n                } else {\n                    return false;\n                }\n            }\n        }\n\n        cHalfedge5(tmpHalfedge) {\n            if (tmpHalfedge.isCurve) {\n                return tmpHalfedge;\n            } else {\n                if (tmpHalfedge.pair != null) {\n                    return this.cHalfedge5(tmpHalfedge.pair.next);\n                } else {\n                    return false;\n                }\n            }\n        }\n\n        cHalfedge6(tmpHalfedge) {\n            if (tmpHalfedge.isCurve) {\n                return tmpHalfedge;\n            } else {\n                if (tmpHalfedge.pair != null) {\n                    return this.cHalfedge6(tmpHalfedge.pair.prev);\n                } else {\n                    return false;\n                }\n            }\n        }\n\n        cHalfedge7(tmpHalfedge) {\n            if (tmpHalfedge.isCurve) {\n                return tmpHalfedge;\n            } else {\n                if (tmpHalfedge.pair != null) {\n                    return this.cHalfedge7(tmpHalfedge.pair.prev);\n                } else {\n                    return false;\n                }\n            }\n        }\n        cHalfedge8(tmpHalfedge) {\n            if (tmpHalfedge.isCurve) {\n                return tmpHalfedge;\n            } else {\n                if (tmpHalfedge.pair != null) {\n                    return this.cHalfedge8(tmpHalfedge.pair.next);\n                } else {\n                    return false;\n                }\n            }\n        }\n\n        orthogonal(halfedge) {\n            let cHalfedge1 = null;\n            let cHalfedge2 = null; \n            let cHalfedge3 = null;\n            let cHalfedge4 = null;\n            let cHalfedge5 = null;\n            let cHalfedge6 = null; \n            let cHalfedge7 = null;\n            let cHalfedge8 = null;\n\n            let angleA1 = 0;\n            let angleA2 = 0;\n            let angleB1 = 0;\n            let angleB2 = 0;\n            let angleC1 = 0;\n            let angleC2 = 0;\n            let angleD1 = 0;\n            let angleD2 = 0;\n\n            let diffAngleA = null;\n            let diffAngleB = null;\n            let diffAngleC = null;\n            let diffAngleD = null;\n\n            cHalfedge1 = this.cHalfedge1(halfedge.pair);\n            cHalfedge2 = this.cHalfedge2(halfedge);\n            cHalfedge3 = this.cHalfedge3(halfedge.pair);\n            cHalfedge4 = this.cHalfedge4(halfedge);\n            cHalfedge5 = this.cHalfedge5(halfedge.pair.prev);\n            cHalfedge6 = this.cHalfedge6(halfedge.pair.next);\n            cHalfedge7 = this.cHalfedge7(halfedge.next);\n            cHalfedge8 = this.cHalfedge8(halfedge.prev);\n\n            if (cHalfedge1) {\n                angleA1 = this.angle(halfedge.vertex.point, cHalfedge1.next.vertex.point, halfedge.next.vertex.point);\n            }\n            if (cHalfedge2) {\n                angleA2 = this.angle(halfedge.vertex.point, cHalfedge2.vertex.point, halfedge.next.vertex.point);\n            }\n            if (cHalfedge1 && cHalfedge2) {\n                diffAngleA = Math.pow(angleA1-angleA2, 2);\n            }\n            if (cHalfedge3) {\n                angleB1 = this.angle(halfedge.next.vertex.point, cHalfedge3.vertex.point, halfedge.vertex.point);\n            }\n            if (cHalfedge4) {\n                angleB2 = this.angle(halfedge.next.vertex.point, cHalfedge4.next.vertex.point, halfedge.vertex.point);\n            }\n            if (cHalfedge3 && cHalfedge4) {\n                diffAngleB = Math.pow(angleB1-angleB2, 2);\n            }\n            if (cHalfedge5) {\n                angleC1 = this.angle(halfedge.pair.prev.vertex.point, cHalfedge5.next.vertex.point, halfedge.prev.vertex.point);\n            }\n            if (cHalfedge6) {\n                angleC2 = this.angle(halfedge.pair.prev.vertex.point, cHalfedge6.vertex.point, halfedge.prev.vertex.point);\n            }\n            if (cHalfedge5 && cHalfedge6) {\n                diffAngleC = Math.pow(angleC1-angleC2, 2);\n            }\n            if (cHalfedge7) {\n                angleD1 = this.angle(halfedge.prev.vertex.point, cHalfedge7.vertex.point, halfedge.pair.prev.vertex.point);\n            }\n            if (cHalfedge8) {\n                angleD2 = this.angle(halfedge.prev.vertex.point, cHalfedge8.next.vertex.point, halfedge.pair.prev.vertex.point);\n            }\n            if (cHalfedge7 && cHalfedge8) {\n                diffAngleD = Math.pow(angleD1-angleD2, 2);\n            }\n\n            if (diffAngleC && diffAngleD) {\n                if (diffAngleA && diffAngleB) {\n                    if (diffAngleA + diffAngleB > diffAngleC + diffAngleD) {\n                        return diffAngleC + diffAngleD;\n                    }\n                } else if (!diffAngleA && !diffAngleB) {\n                    return diffAngleC + diffAngleD;\n                } else if (diffAngleA && !diffAngleB) {\n                    if (diffAngleA * 2 > diffAngleC + diffAngleD) {\n                        return diffAngleC + diffAngleD;\n                    }\n                } else if (!diffAngleA && diffAngleB) {\n                    if (diffAngleB * 2 > diffAngleC + diffAngleD) {\n                        return diffAngleC + diffAngleD;\n                    }\n                }\n            } else if (diffAngleC && !diffAngleD) {\n                if (!diffAngleA && !diffAngleB) {\n                    return diffAngleC * 2;\n                } else if (diffAngleA && diffAngleB) {\n                    if (diffAngleA + diffAngleB > diffAngleC * 2) {\n                        return diffAngleC * 2;\n                    }\n                } else if (diffAngleA && !diffAngleB) {\n                    if (diffAngleA > diffAngleC) {\n                        return diffAngleC * 2;\n                    }\n                } else if (!diffAngleA && diffAngleB) {\n                    if (diffAngleB > diffAngleC) {\n                        return diffAngleC * 2;\n                    }\n                }\n            } else if (!diffAngleC && diffAngleD) {\n                if (!diffAngleA && !diffAngleB) {\n                    return diffAngleD * 2;\n                } else if (diffAngleA & diffAngleB) {\n                    if (diffAngleA + diffAngleB > diffAngleD * 2) {\n                        return diffAngleD * 2;\n                    }\n                } else if (diffAngleA && !diffAngleB) {\n                    if (diffAngleA > diffAngleD) {\n                        return diffAngleD * 2;\n                    }\n                } else if (!diffAngleA && diffAngleB) {\n                    if (diffAngleB > diffAngleD) {\n                        return diffAngleD * 2;\n                    }\n                }\n            }\n            return Infinity;\n        }\n\n        checkVertexNumber(halfedge) {\n            let veMap = this._vertices_edges;\n            if (veMap.get(halfedge.prev.vertex.id) >= 4) {\n                return false;\n            }\n            if (veMap.get(halfedge.pair.prev.vertex.id) >= 4) {\n                return false;\n            }\n            return true;\n        }\n\n        edgeSwap(halfedge) {// https://mitani.cs.tsukuba.ac.jp/lecture/jikken/polygon_operation.pdf\n\n            let heLT = halfedge.prev.pair;\n            if (heLT == null) {\n                var dheLT = new Halfedge(halfedge.vertex);\n                dheLT.edge = halfedge.prev.edge;\n            }\n            let heRT = halfedge.next.pair;\n            if (heRT == null) {\n                var dheRT = new Halfedge(halfedge.prev.vertex);\n                dheRT.edge = halfedge.next.edge;\n            }\n            let heLB = halfedge.pair.next.pair;\n            if (heLB == null) {\n                var dheLB = new Halfedge(halfedge.pair.prev.vertex);\n                dheLB.edge = halfedge.pair.next.edge;\n            }\n            let heRB = halfedge.pair.prev.pair;\n            if (heRB == null) {\n                var dheRB = new Halfedge(halfedge.pair.vertex);\n                dheRB.edge = halfedge.pair.prev.edge;\n            }\n\n            if (heRB != null) {\n                halfedge.next.vertex.halfedge = heRB;\n            }\n            if (heRT != null) {\n                halfedge.prev.vertex.halfedge = heRT;\n            }\n            if (heLT != null) {\n                halfedge.vertex.halfedge = heLT;\n            }\n            if (heLB != null) {\n                halfedge.pair.prev.vertex.halfedge = heLB;\n            }\n            \n            halfedge.vertex = heLB ? heLB.vertex : dheLB.vertex;\n            halfedge.next.vertex = heRT ? heRT.vertex : dheRT.vertex;\n            halfedge.prev.vertex = heLT ? heLT.vertex : dheLT.vertex;\n            halfedge.pair.vertex = heRT ? heRT.vertex : dheRT.vertex;\n            halfedge.pair.next.vertex = heLB ? heLB.vertex : dheLB.vertex;\n            halfedge.pair.prev.vertex = heRB ? heRB.vertex : dheRB.vertex;\n\n            halfedge.edge.start = halfedge.vertex;\n            halfedge.edge.end = halfedge.pair.vertex;\n\n            if (heLT != null) {\n                this.setHalfedgePair2(heLT, halfedge.next);\n                let edge = heLT.edge;\n                edge.left = heLT;\n                edge.right = halfedge.next;\n                edge.start = heLT.vertex;\n                edge.end = halfedge.next.vertex;\n                halfedge.next.edge = edge;\n            } else {\n                halfedge.next.pair = null;\n                halfedge.next.isCurve = false;\n                this.checkIsCurved(halfedge.next);\n                let edge = dheLT.edge;\n                edge.left = halfedge.next;\n                edge.right = null;\n                edge.start = halfedge.next.vertex;\n                edge.end = halfedge.next.next.vertex;\n                halfedge.next.edge = edge;\n            }\n            if (heLB != null) {\n                this.setHalfedgePair2(heLB, halfedge.prev);\n                let edge = heLB.edge;\n                edge.left = heLB;\n                edge.right = halfedge.prev;\n                edge.start = heLB.vertex;\n                edge.end = halfedge.prev.vertex;\n                halfedge.prev.edge = edge;\n            } else {\n                halfedge.prev.pair = null;\n                halfedge.prev.isCurve = false;\n                this.checkIsCurved(halfedge.prev);\n                let edge = dheLB.edge;\n                edge.left = halfedge.prev;\n                edge.right = null;\n                edge.start = halfedge.prev.vertex;\n                edge.end = halfedge.prev.next.vertex;\n                halfedge.prev.edge = edge;\n            }\n            if (heRT != null) {\n                this.setHalfedgePair2(heRT, halfedge.pair.prev);\n                let edge = heRT.edge;\n                edge.left = heRT;\n                edge.right = halfedge.pair.prev;\n                edge.start = heRT.vertex;\n                edge.end = halfedge.pair.prev.vertex;\n                halfedge.pair.prev.edge = edge;\n            } else {\n                halfedge.pair.prev.pair = null;\n                halfedge.pair.prev.isCurve = false;\n                this.checkIsCurved(halfedge.pair.prev);\n                let edge = dheRT.edge;\n                edge.left = halfedge.pair.prev;\n                edge.right = null;\n                edge.start = halfedge.pair.prev.vertex;\n                edge.end = halfedge.pair.prev.next.vertex;\n                halfedge.pair.prev.edge = edge;\n            }\n            if (heRB != null) {\n                this.setHalfedgePair2(heRB, halfedge.pair.next);\n                let edge = heRB.edge;\n                edge.left = heRB;\n                edge.right = halfedge.pair.next;\n                edge.start = heRB.vertex;\n                edge.end = halfedge.pair.next.vertex;\n                halfedge.pair.next.edge = edge;\n            } else {\n                halfedge.pair.next.pair = null;\n                halfedge.pair.next.isCurve = false;\n                this.checkIsCurved(halfedge.pair.next);\n                let edge = dheRB.edge;\n                edge.left = halfedge.pair.next;\n                edge.right = null;\n                edge.start = halfedge.pair.next.vertex;\n                edge.end = halfedge.pair.next.next.vertex;\n                halfedge.pair.next.edge = edge;\n            }\n\n            let veMap = this._vertices_edges;\n            if (veMap.has(halfedge.vertex.id)) {\n                veMap.set(halfedge.vertex.id, veMap.get(halfedge.vertex.id)+1);\n            } else {\n                veMap.set(halfedge.vertex.id, 1);\n            }\n            if (veMap.has(halfedge.next.vertex.id)) {\n                veMap.set(halfedge.next.vertex.id, veMap.get(halfedge.next.vertex.id)+1);\n            } else {\n                veMap.set(halfedge.next.vertex.id, 1);\n            }\n            veMap.set(halfedge.prev.vertex.id, veMap.get(halfedge.prev.vertex.id)-1);\n            veMap.set(halfedge.pair.prev.vertex.id, veMap.get(halfedge.pair.prev.vertex.id)-1);\n\n            return true;\n        }\n\n        get vertices() {\n            return this._vertices;\n        }\n        get faces() {\n            return this._faces;\n        }\n        get verticesEdges() {\n            return this._vertices_edges;\n        }\n        get triangulatedEdges() {\n            return this._triangulated_edges;\n        }\n\n        set verticesEdges(array) {\n            this._vertices_edges = array;\n        }\n    }\n\n    function triangulatePolys(fold) {\n        var vertices = fold.vertices_coords;\n        var faces = fold.faces_vertices;\n        var edges = fold.edges_vertices;\n        var foldAngles = fold.edges_foldAngle;\n        var assignments = fold.edges_assignment;\n        var triangulatedFaces = [];\n        for (var i=0;i<faces.length;i++){\n\n            var face = faces[i];\n\n            if (face.length == 3){\n                triangulatedFaces.push(face);\n                continue;\n            }\n\n            //check for quad and solve manually\n            if (face.length == 4){\n                var faceV1 = makeVector(vertices[face[0]]);\n                var faceV2 = makeVector(vertices[face[1]]);\n                var faceV3 = makeVector(vertices[face[2]]);\n                var faceV4 = makeVector(vertices[face[3]]);\n                var dist1 = (faceV1.clone().sub(faceV3)).lengthSq();\n                var dist2 = (faceV2.clone().sub(faceV4)).lengthSq();\n                if (dist2<dist1) {\n                    edges.push([face[1], face[3]]);\n                    foldAngles.push(0);\n                    assignments.push(\"F\");\n                    triangulatedFaces.push([face[0], face[1], face[3]]);\n                    triangulatedFaces.push([face[1], face[2], face[3]]);\n                } else {\n                    edges.push([face[0], face[2]]);\n                    foldAngles.push(0);\n                    assignments.push(\"F\");\n                    triangulatedFaces.push([face[0], face[1], face[2]]);\n                    triangulatedFaces.push([face[0], face[2], face[3]]);\n                }\n                continue;\n            }\n\n            var faceEdges = [];\n            for (var j=0;j<edges.length;j++){\n                var edge = edges[j];\n                if (face.indexOf(edge[0]) >= 0 && face.indexOf(edge[1]) >= 0){\n                    faceEdges.push(j);\n                }\n            }\n\n            var faceVert = [];\n            for (var j=0;j<face.length;j++){\n                var vertex = vertices[face[j]];\n                faceVert.push(vertex[0]);\n                faceVert.push(vertex[2]);\n            }\n\n            let cdt_points = [];\n            for (let i = 0; i < faceVert.length-1; i+=2) {\n                cdt_points.push([faceVert[i],faceVert[i+1]]);\n            }\n\n            let cdt_edges =[];\n            for (let i = 0; i < faceVert.length/2-1; i++) {\n                cdt_edges.push([i, i+1]);\n            }\n            cdt_edges.push([faceVert.length/2-1, 0]);\n\n            let cdt2d = require('cdt2d');\n            let cdt_result = cdt2d(cdt_points, cdt_edges, {exterior: false});\n\n            let triangles = [];\n            for (let i = 0; i < cdt_result.length; i++) {\n                triangles.push(cdt_result[i][0]);\n                triangles.push(cdt_result[i][1]);\n                triangles.push(cdt_result[i][2]);\n            }\n\n            let model = new Model(edges, assignments);\n            for (let i = 0; i < faceVert.length; i+=2) {\n                let vertex = new Vertex([faceVert[i], faceVert[i+1]], face[i/2]);\n                model.vertices.push(vertex);\n            }\n            model.verticesEdges = new Map();\n            for (let index = 0; index < model.vertices.length; index++) {\n                model.verticesEdges.set(index, 0);\n            }\n            for (let i = 0; i < triangles.length; i+=3) {\n                model.addFace(model.vertices[triangles[i]], model.vertices[triangles[i+1]], model.vertices[triangles[i+2]]);\n            }\n\n            let flag, repeat = 0;\n            while (repeat < 1000) {\n                flag = true;\n                let minAngle = Infinity;\n                let edgeNum = -1;\n                for (let index = 0; index < model.triangulatedEdges.length; index++) {\n                    const edge = model.triangulatedEdges[index];\n                    if (edge.left.pair != null) {\n                        if (model.cross(edge.left)) {\n                            if (model.checkVertexNumber(edge.left)) {\n                                if (model.orthogonal(edge.left) < minAngle) {\n                                    flag = false;\n                                    minAngle = model.orthogonal(edge.left);\n                                    edgeNum = index;\n                                }\n                            }\n                        }\n                    }\n                }\n                if (flag) {\n                    break;\n                } else {\n                    model.edgeSwap(model.triangulatedEdges[edgeNum].left);\n                }\n                repeat++;\n            }\n\n            triangles = [];\n            for (let i = 0; i < model.faces.length; i++) {\n                let face = model.faces[i];\n                let tri1 = face.halfedge.vertex.id;\n                let tri2 = face.halfedge.next.vertex.id;\n                let tri3 = face.halfedge.next.next.vertex.id;\n                triangles.push(tri1);\n                triangles.push(tri2);\n                triangles.push(tri3);\n            }\n\n            for (var j=0;j<triangles.length;j+=3){\n                var tri = [triangles[j+2], triangles[j+1], triangles[j]];\n                var foundEdges = [false, false, false];//ab, bc, ca\n\n                for (var k=0;k<faceEdges.length;k++){\n                    var edge = edges[faceEdges[k]];\n\n                    var aIndex = edge.indexOf(tri[0]);\n                    var bIndex = edge.indexOf(tri[1]);\n                    var cIndex = edge.indexOf(tri[2]);\n\n                    if (aIndex >= 0){\n                        if (bIndex >= 0) {\n                            foundEdges[0] = true;\n                            continue;\n                        }\n                        if (cIndex >= 0) {\n                            foundEdges[2] = true;\n                            continue;\n                        }\n                    }\n                    if (bIndex >= 0){\n                        if (cIndex >= 0) {\n                            foundEdges[1] = true;\n                            continue;\n                        }\n                    }\n                }\n\n                for (var k=0;k<3;k++){\n                    if (foundEdges[k]) continue;\n                    if (k==0){\n                        faceEdges.push(edges.length);\n                        edges.push([tri[0], tri[1]]);\n                        foldAngles.push(0);\n                        assignments.push(\"F\");\n                    } else if (k==1){\n                        faceEdges.push(edges.length);\n                        edges.push([tri[2], tri[1]]);\n                        foldAngles.push(0);\n                        assignments.push(\"F\");\n                    } else if (k==2){\n                        faceEdges.push(edges.length);\n                        edges.push([tri[2], tri[0]]);\n                        foldAngles.push(0);\n                        assignments.push(\"F\");\n                    }\n                }\n\n                triangulatedFaces.push(tri);\n            }\n        }\n        fold.faces_vertices = triangulatedFaces;\n        return fold;\n    }\n\n    function saveSVG(){\n        if (globals.extension == \"fold\"){\n            //todo solve for crease pattern\n            globals.warn(\"No crease pattern available for files imported from FOLD format.\");\n            return;\n        }\n\n        var serializer = new XMLSerializer();\n        var source = serializer.serializeToString($(\"#svgViewer>svg\").get(0));\n        var svgBlob = new Blob([source], {type:\"image/svg+xml;charset=utf-8\"});\n        var svgUrl = URL.createObjectURL(svgBlob);\n        var downloadLink = document.createElement(\"a\");\n        downloadLink.href = svgUrl;\n        downloadLink.download =  globals.filename + \".svg\";\n        document.body.appendChild(downloadLink);\n        downloadLink.click();\n        document.body.removeChild(downloadLink);\n    }\n\n    function findIntersections(fold, tol){\n        var vertices = fold.vertices_coords;\n        var edges = fold.edges_vertices;\n        var foldAngles = fold.edges_foldAngle;\n        var assignments = fold.edges_assignment;\n        for (var i=edges.length-1;i>=0;i--){\n            for (var j=i-1;j>=0;j--){\n                var v1 = makeVector2(vertices[edges[i][0]]);\n                var v2 = makeVector2(vertices[edges[i][1]]);\n                var v3 = makeVector2(vertices[edges[j][0]]);\n                var v4 = makeVector2(vertices[edges[j][1]]);\n                var data = line_intersect(v1, v2, v3, v4);\n                if (data) {\n                    var length1 = (v2.clone().sub(v1)).length();\n                    var length2 = (v4.clone().sub(v3)).length();\n                    var d1 = getDistFromEnd(data.t1, length1, tol);\n                    var d2 = getDistFromEnd(data.t2, length2, tol);\n                    if (d1 === null || d2 === null) continue;//no crossing\n\n                    var seg1Int = d1>tol && d1<length1-tol;\n                    var seg2Int = d2>tol && d2<length2-tol;\n                    if (!seg1Int && !seg2Int) continue;//intersects at endpoints only\n\n                    var vertIndex;\n                    if (seg1Int && seg2Int){\n                        vertIndex = vertices.length;\n                        vertices.push([data.intersection.x,  data.intersection.y]);\n                    } else if (seg1Int){\n                        if (d2<=tol) vertIndex = edges[j][0];\n                        else vertIndex = edges[j][1];\n                    } else {\n                        if (d1<=tol) vertIndex = edges[i][0];\n                        else vertIndex = edges[i][1];\n                    }\n\n                    if (seg1Int){\n                        var foldAngle = foldAngles[i];\n                        var assignment = assignments[i];\n                        edges.splice(i, 1, [vertIndex, edges[i][0]], [vertIndex, edges[i][1]]);\n                        foldAngles.splice(i, 1, foldAngle, foldAngle);\n                        assignments.splice(i, 1, assignment, assignment);\n                        i++;\n                    }\n                    if (seg2Int){\n                        var foldAngle = foldAngles[j];\n                        var assignment = assignments[j];\n                        edges.splice(j, 1, [vertIndex, edges[j][0]], [vertIndex, edges[j][1]]);\n                        foldAngles.splice(j, 1, foldAngle, foldAngle);\n                        assignments.splice(j, 1, assignment, assignment);\n                        j++;\n                        i++;\n                    }\n                }\n            }\n        }\n        return fold;\n    }\n\n    function makeVector(v){\n        if (v.length == 2) return makeVector2(v);\n        return makeVector3(v);\n    }\n    function makeVector2(v){\n        return new THREE.Vector2(v[0], v[1]);\n    }\n    function makeVector3(v){\n        return new THREE.Vector3(v[0], v[1], v[2]);\n    }\n\n    function getDistFromEnd(t, length, tol){\n        var dist = t*length;\n        if (dist < -tol) return null;\n        if (dist > length+tol) return null;\n        return dist;\n    }\n\n    //http://paulbourke.net/geometry/pointlineplane/\n    function line_intersect(v1, v2, v3, v4) {\n        var x1 = v1.x;\n        var y1 = v1.y;\n        var x2 = v2.x;\n        var y2 = v2.y;\n        var x3 = v3.x;\n        var y3 = v3.y;\n        var x4 = v4.x;\n        var y4 = v4.y;\n\n        var ua, ub, denom = (y4 - y3)*(x2 - x1) - (x4 - x3)*(y2 - y1);\n        if (denom == 0) {\n            return null;\n        }\n        ua = ((x4 - x3)*(y1 - y3) - (y4 - y3)*(x1 - x3))/denom;\n        ub = ((x2 - x1)*(y1 - y3) - (y2 - y1)*(x1 - x3))/denom;\n        return {\n            intersection: new THREE.Vector2(x1 + ua*(x2 - x1), y1 + ua*(y2 - y1)),\n            t1: ua,\n            t2: ub\n        };\n    }\n\n    function getFoldData(raw){\n        if (raw) return rawFold;\n        return foldData;\n    }\n\n    function setFoldData(fold, isDemo, returnCreaseParams){\n        clearAll();\n        var result = processFold(fold, returnCreaseParams);\n        \n        // Store fold data in globals for cell colorizer\n        globals.fold = foldData;\n        \n        // Auto-execute cellColorizer if textures are already loaded\n        if (globals.textureLibrary && globals.textureLibrary.length > 0 && globals.cellColorizer && globals.cellColorizer.generateTextureMappedCellImage) {\n            console.log(\" Curved folding loaded with existing textures, auto-generating texture-mapped cells...\");\n            setTimeout(function() {\n                try {\n                    globals.cellColorizer.generateTextureMappedCellImage(true); // Pass true for auto mode\n                    console.log(\" Auto-generated texture-mapped cells from curved folding load\");\n                } catch (error) {\n                    console.error(\" Failed to auto-generate from curved folding load:\", error);\n                }\n            }, 500); // Short delay to ensure everything is ready\n        }\n        \n        return result;\n    }\n\n    function getTriangulatedFaces(){\n        return foldData.faces_vertices;\n    }\n\n    return {\n        loadSVG : loadSVG,\n        saveSVG : saveSVG,\n        getFoldData: getFoldData,\n        getTriangulatedFaces: getTriangulatedFaces,\n        setFoldData : setFoldData\n    }\n}</script> <script type=\"text/javascript\">function setCookie(e,o,i){var l=new Date;l.setDate(l.getDate()+i);var t=escape(o)+(null==i?\"\":\"; expires=\"+l.toUTCString());document.cookie=e+\"=\"+t}function getCookie(e){var o=document.cookie,i=o.indexOf(\" \"+e+\"=\");if(-1==i&&(i=o.indexOf(e+\"=\")),-1==i)o=null;else{i=o.indexOf(\"=\",i)+1;var l=o.indexOf(\";\",i);-1==l&&(l=o.length),o=unescape(o.substring(i,l))}return o}function delCookie(e){document.cookie=e+\"=; expires=Thu, 01 Jan 1970 00:00:01 GMT;\"}globals={},$(function(){if(getCookie(\"firsttime\")||$(\"body\").innerWidth()>770&&window.setTimeout(function(){setCookie(\"firsttime\",!0);var e=$(\"#helper\");e.show(),window.setTimeout(function(){e.css({opacity:1}),window.setTimeout(function(){e.css({opacity:0}),window.setTimeout(function(){e.hide()},2e3)},1e4)},500)},7e3),globals=initGlobals(),globals.threeView=initThreeView(globals),globals.controls=initControls(globals),globals.UI3D=init3DUI(globals),globals.importer=initImporter(globals),globals.model=initModel(globals),globals.dynamicSolver=initDynamicSolver(globals),globals.pattern=initPattern(globals),globals.vive=initViveInterface(globals),globals.videoAnimator=initVideoAnimator(globals),globals.cellColorizer=initCellColorizer(globals),globals.curvedFolding=initCurvedFolding(globals),!1!==window.editMode){console.log(\" Edit mode enabled - loading default model\");var e=\"Tessellations/huffmanWaterbomb.svg\",o=/[\\\\?&]model=([^&#]*)/.exec(location.search);o&&(e=o[1]),e=e.replace(/'/g,\"\"),$(\".demo[data-url='\"+e+\"']\").click()}else console.log(\" Edit mode disabled - skipping default model load for NFT processing\")});</script> </head>",
      "new": "<head>\n    <!-- Basic meta tags -->\n    <meta charset=\"UTF-8\">\n    <title>Katachi Gen</title>\n    \n    <!-- Viewport configuration for responsive design -->\n    <meta name=\"viewport\" content=\"width=400\">\n    \n    <!-- External library CSS includes -->\n    <style>/*! jQuery UI - v1.12.0 - 2016-08-13\n* http://jqueryui.com\n* Includes: core.css, slider.css, theme.css\n* To view and modify this theme, visit http://jqueryui.com/themeroller/?scope=&amp;folderName=base&amp;cornerRadiusShadow=8px&amp;offsetLeftShadow=0px&amp;offsetTopShadow=0px&amp;thicknessShadow=5px&amp;opacityShadow=30&amp;bgImgOpacityShadow=0&amp;bgTextureShadow=flat&amp;bgColorShadow=666666&amp;opacityOverlay=30&amp;bgImgOpacityOverlay=0&amp;bgTextureOverlay=flat&amp;bgColorOverlay=aaaaaa&amp;iconColorError=cc0000&amp;fcError=5f3f3f&amp;borderColorError=f1a899&amp;bgTextureError=flat&amp;bgColorError=fddfdf&amp;iconColorHighlight=777620&amp;fcHighlight=777620&amp;borderColorHighlight=dad55e&amp;bgTextureHighlight=flat&amp;bgColorHighlight=fffa90&amp;iconColorActive=ffffff&amp;fcActive=ffffff&amp;borderColorActive=003eff&amp;bgTextureActive=flat&amp;bgColorActive=007fff&amp;iconColorHover=555555&amp;fcHover=2b2b2b&amp;borderColorHover=cccccc&amp;bgTextureHover=flat&amp;bgColorHover=ededed&amp;iconColorDefault=777777&amp;fcDefault=454545&amp;borderColorDefault=c5c5c5&amp;bgTextureDefault=flat&amp;bgColorDefault=f6f6f6&amp;iconColorContent=444444&amp;fcContent=333333&amp;borderColorContent=dddddd&amp;bgTextureContent=flat&amp;bgColorContent=ffffff&amp;iconColorHeader=444444&amp;fcHeader=333333&amp;borderColorHeader=dddddd&amp;bgTextureHeader=flat&amp;bgColorHeader=e9e9e9&amp;cornerRadius=3px&amp;fwDefault=normal&amp;fsDefault=1em&amp;ffDefault=Arial%2CHelvetica%2Csans-serif\n* Copyright jQuery Foundation and other contributors; Licensed MIT */\n\n.ui-helper-hidden{display:none}.ui-helper-hidden-accessible{border:0;clip:rect(0 0 0 0);height:1px;margin:-1px;overflow:hidden;padding:0;position:absolute;width:1px}.ui-helper-reset{margin:0;padding:0;border:0;outline:0;line-height:1.3;text-decoration:none;font-size:100%;list-style:none}.ui-helper-clearfix:before,.ui-helper-clearfix:after{content:&#34;&#34;;display:table;border-collapse:collapse}.ui-helper-clearfix:after{clear:both}.ui-helper-zfix{width:100%;height:100%;top:0;left:0;position:absolute;opacity:0;filter:Alpha(Opacity=0)}.ui-front{z-index:100}.ui-state-disabled{cursor:default!important;pointer-events:none}.ui-icon{display:inline-block;vertical-align:middle;margin-top:-.25em;position:relative;text-indent:-99999px;overflow:hidden;background-repeat:no-repeat}.ui-widget-icon-block{left:50%;margin-left:-8px;display:block}.ui-widget-overlay{position:fixed;top:0;left:0;width:100%;height:100%}.ui-slider{position:relative;text-align:left}.ui-slider .ui-slider-handle{position:absolute;z-index:2;width:1.2em;height:1.2em;cursor:default;-ms-touch-action:none;touch-action:none}.ui-slider .ui-slider-range{position:absolute;z-index:1;font-size:.7em;display:block;border:0;background-position:0 0}.ui-slider.ui-state-disabled .ui-slider-handle,.ui-slider.ui-state-disabled .ui-slider-range{filter:inherit}.ui-slider-horizontal{height:.8em}.ui-slider-horizontal .ui-slider-handle{top:-.3em;margin-left:-.6em}.ui-slider-horizontal .ui-slider-range{top:0;height:100%}.ui-slider-horizontal .ui-slider-range-min{left:0}.ui-slider-horizontal .ui-slider-range-max{right:0}.ui-slider-vertical{width:.8em;height:100px}.ui-slider-vertical .ui-slider-handle{left:-.3em;margin-left:0;margin-bottom:-.6em}.ui-slider-vertical .ui-slider-range{left:0;width:100%}.ui-slider-vertical .ui-slider-range-min{bottom:0}.ui-slider-vertical .ui-slider-range-max{top:0}.ui-widget{font-family:Arial,Helvetica,sans-serif;font-size:1em}.ui-widget .ui-widget{font-size:1em}.ui-widget input,.ui-widget select,.ui-widget textarea,.ui-widget button{font-family:Arial,Helvetica,sans-serif;font-size:1em}.ui-widget.ui-widget-content{border:1px solid #c5c5c5}.ui-widget-content{border:1px solid #ddd;background:#fff;color:#333}.ui-widget-content a{color:#333}.ui-widget-header{border:1px solid #ddd;background:#e9e9e9;color:#333;font-weight:bold}.ui-widget-header a{color:#333}.ui-state-default,.ui-widget-content .ui-state-default,.ui-widget-header .ui-state-default,.ui-button,html .ui-button.ui-state-disabled:hover,html .ui-button.ui-state-disabled:active{border:1px solid #c5c5c5;background:#f6f6f6;font-weight:normal;color:#454545}.ui-state-default a,.ui-state-default a:link,.ui-state-default a:visited,a.ui-button,a:link.ui-button,a:visited.ui-button,.ui-button{color:#454545;text-decoration:none}.ui-state-hover,.ui-widget-content .ui-state-hover,.ui-widget-header .ui-state-hover,.ui-state-focus,.ui-widget-content .ui-state-focus,.ui-widget-header .ui-state-focus,.ui-button:hover,.ui-button:focus{border:1px solid #ccc;background:#ededed;font-weight:normal;color:#2b2b2b}.ui-state-hover a,.ui-state-hover a:hover,.ui-state-hover a:link,.ui-state-hover a:visited,.ui-state-focus a,.ui-state-focus a:hover,.ui-state-focus a:link,.ui-state-focus a:visited,a.ui-button:hover,a.ui-button:focus{color:#2b2b2b;text-decoration:none}.ui-visual-focus{box-shadow:0 0 3px 1px rgb(94,158,214)}.ui-state-active,.ui-widget-content .ui-state-active,.ui-widget-header .ui-state-active,a.ui-button:active,.ui-button:active,.ui-button.ui-state-active:hover{border:1px solid #003eff;background:#007fff;font-weight:normal;color:#fff}.ui-icon-background,.ui-state-active .ui-icon-background{border:#003eff;background-color:#fff}.ui-state-active a,.ui-state-active a:link,.ui-state-active a:visited{color:#fff;text-decoration:none}.ui-state-highlight,.ui-widget-content .ui-state-highlight,.ui-widget-header .ui-state-highlight{border:1px solid #dad55e;background:#fffa90;color:#777620}.ui-state-checked{border:1px solid #dad55e;background:#fffa90}.ui-state-highlight a,.ui-widget-content .ui-state-highlight a,.ui-widget-header .ui-state-highlight a{color:#777620}.ui-state-error,.ui-widget-content .ui-state-error,.ui-widget-header .ui-state-error{border:1px solid #f1a899;background:#fddfdf;color:#5f3f3f}.ui-state-error a,.ui-widget-content .ui-state-error a,.ui-widget-header .ui-state-error a{color:#5f3f3f}.ui-state-error-text,.ui-widget-content .ui-state-error-text,.ui-widget-header .ui-state-error-text{color:#5f3f3f}.ui-priority-primary,.ui-widget-content .ui-priority-primary,.ui-widget-header .ui-priority-primary{font-weight:bold}.ui-priority-secondary,.ui-widget-content .ui-priority-secondary,.ui-widget-header .ui-priority-secondary{opacity:.7;filter:Alpha(Opacity=70);font-weight:normal}.ui-state-disabled,.ui-widget-content .ui-state-disabled,.ui-widget-header .ui-state-disabled{opacity:.35;filter:Alpha(Opacity=35);background-image:none}.ui-state-disabled .ui-icon{filter:Alpha(Opacity=35)}.ui-icon{width:16px;height:16px}.ui-icon,.ui-widget-content .ui-icon{background-image:url(&#34;images/ui-icons_444444_256x240.png&#34;)}.ui-widget-header .ui-icon{background-image:url(&#34;images/ui-icons_444444_256x240.png&#34;)}.ui-button .ui-icon{background-image:url(&#34;images/ui-icons_777777_256x240.png&#34;)}.ui-state-hover .ui-icon,.ui-state-focus .ui-icon,.ui-button:hover .ui-icon,.ui-button:focus .ui-icon,.ui-state-default .ui-icon{background-image:url(&#34;images/ui-icons_555555_256x240.png&#34;)}.ui-state-active .ui-icon,.ui-button:active .ui-icon{background-image:url(&#34;images/ui-icons_ffffff_256x240.png&#34;)}.ui-state-highlight .ui-icon,.ui-button .ui-state-highlight.ui-icon{background-image:url(&#34;images/ui-icons_777620_256x240.png&#34;)}.ui-state-error .ui-icon,.ui-state-error-text .ui-icon{background-image:url(&#34;images/ui-icons_cc0000_256x240.png&#34;)}.ui-icon-blank{background-position:16px 16px}.ui-icon-caret-1-n{background-position:0 0}.ui-icon-caret-1-ne{background-position:-16px 0}.ui-icon-caret-1-e{background-position:-32px 0}.ui-icon-caret-1-se{background-position:-48px 0}.ui-icon-caret-1-s{background-position:-65px 0}.ui-icon-caret-1-sw{background-position:-80px 0}.ui-icon-caret-1-w{background-position:-96px 0}.ui-icon-caret-1-nw{background-position:-112px 0}.ui-icon-caret-2-n-s{background-position:-128px 0}.ui-icon-caret-2-e-w{background-position:-144px 0}.ui-icon-triangle-1-n{background-position:0 -16px}.ui-icon-triangle-1-ne{background-position:-16px -16px}.ui-icon-triangle-1-e{background-position:-32px -16px}.ui-icon-triangle-1-se{background-position:-48px -16px}.ui-icon-triangle-1-s{background-position:-65px -16px}.ui-icon-triangle-1-sw{background-position:-80px -16px}.ui-icon-triangle-1-w{background-position:-96px -16px}.ui-icon-triangle-1-nw{background-position:-112px -16px}.ui-icon-triangle-2-n-s{background-position:-128px -16px}.ui-icon-triangle-2-e-w{background-position:-144px -16px}.ui-icon-arrow-1-n{background-position:0 -32px}.ui-icon-arrow-1-ne{background-position:-16px -32px}.ui-icon-arrow-1-e{background-position:-32px -32px}.ui-icon-arrow-1-se{background-position:-48px -32px}.ui-icon-arrow-1-s{background-position:-65px -32px}.ui-icon-arrow-1-sw{background-position:-80px -32px}.ui-icon-arrow-1-w{background-position:-96px -32px}.ui-icon-arrow-1-nw{background-position:-112px -32px}.ui-icon-arrow-2-n-s{background-position:-128px -32px}.ui-icon-arrow-2-ne-sw{background-position:-144px -32px}.ui-icon-arrow-2-e-w{background-position:-160px -32px}.ui-icon-arrow-2-se-nw{background-position:-176px -32px}.ui-icon-arrowstop-1-n{background-position:-192px -32px}.ui-icon-arrowstop-1-e{background-position:-208px -32px}.ui-icon-arrowstop-1-s{background-position:-224px -32px}.ui-icon-arrowstop-1-w{background-position:-240px -32px}.ui-icon-arrowthick-1-n{background-position:1px -48px}.ui-icon-arrowthick-1-ne{background-position:-16px -48px}.ui-icon-arrowthick-1-e{background-position:-32px -48px}.ui-icon-arrowthick-1-se{background-position:-48px -48px}.ui-icon-arrowthick-1-s{background-position:-64px -48px}.ui-icon-arrowthick-1-sw{background-position:-80px -48px}.ui-icon-arrowthick-1-w{background-position:-96px -48px}.ui-icon-arrowthick-1-nw{background-position:-112px -48px}.ui-icon-arrowthick-2-n-s{background-position:-128px -48px}.ui-icon-arrowthick-2-ne-sw{background-position:-144px -48px}.ui-icon-arrowthick-2-e-w{background-position:-160px -48px}.ui-icon-arrowthick-2-se-nw{background-position:-176px -48px}.ui-icon-arrowthickstop-1-n{background-position:-192px -48px}.ui-icon-arrowthickstop-1-e{background-position:-208px -48px}.ui-icon-arrowthickstop-1-s{background-position:-224px -48px}.ui-icon-arrowthickstop-1-w{background-position:-240px -48px}.ui-icon-arrowreturnthick-1-w{background-position:0 -64px}.ui-icon-arrowreturnthick-1-n{background-position:-16px -64px}.ui-icon-arrowreturnthick-1-e{background-position:-32px -64px}.ui-icon-arrowreturnthick-1-s{background-position:-48px -64px}.ui-icon-arrowreturn-1-w{background-position:-64px -64px}.ui-icon-arrowreturn-1-n{background-position:-80px -64px}.ui-icon-arrowreturn-1-e{background-position:-96px -64px}.ui-icon-arrowreturn-1-s{background-position:-112px -64px}.ui-icon-arrowrefresh-1-w{background-position:-128px -64px}.ui-icon-arrowrefresh-1-n{background-position:-144px -64px}.ui-icon-arrowrefresh-1-e{background-position:-160px -64px}.ui-icon-arrowrefresh-1-s{background-position:-176px -64px}.ui-icon-arrow-4{background-position:0 -80px}.ui-icon-arrow-4-diag{background-position:-16px -80px}.ui-icon-extlink{background-position:-32px -80px}.ui-icon-newwin{background-position:-48px -80px}.ui-icon-refresh{background-position:-64px -80px}.ui-icon-shuffle{background-position:-80px -80px}.ui-icon-transfer-e-w{background-position:-96px -80px}.ui-icon-transferthick-e-w{background-position:-112px -80px}.ui-icon-folder-collapsed{background-position:0 -96px}.ui-icon-folder-open{background-position:-16px -96px}.ui-icon-document{background-position:-32px -96px}.ui-icon-document-b{background-position:-48px -96px}.ui-icon-note{background-position:-64px -96px}.ui-icon-mail-closed{background-position:-80px -96px}.ui-icon-mail-open{background-position:-96px -96px}.ui-icon-suitcase{background-position:-112px -96px}.ui-icon-comment{background-position:-128px -96px}.ui-icon-person{background-position:-144px -96px}.ui-icon-print{background-position:-160px -96px}.ui-icon-trash{background-position:-176px -96px}.ui-icon-locked{background-position:-192px -96px}.ui-icon-unlocked{background-position:-208px -96px}.ui-icon-bookmark{background-position:-224px -96px}.ui-icon-tag{background-position:-240px -96px}.ui-icon-home{background-position:0 -112px}.ui-icon-flag{background-position:-16px -112px}.ui-icon-calendar{background-position:-32px -112px}.ui-icon-cart{background-position:-48px -112px}.ui-icon-pencil{background-position:-64px -112px}.ui-icon-clock{background-position:-80px -112px}.ui-icon-disk{background-position:-96px -112px}.ui-icon-calculator{background-position:-112px -112px}.ui-icon-zoomin{background-position:-128px -112px}.ui-icon-zoomout{background-position:-144px -112px}.ui-icon-search{background-position:-160px -112px}.ui-icon-wrench{background-position:-176px -112px}.ui-icon-gear{background-position:-192px -112px}.ui-icon-heart{background-position:-208px -112px}.ui-icon-star{background-position:-224px -112px}.ui-icon-link{background-position:-240px -112px}.ui-icon-cancel{background-position:0 -128px}.ui-icon-plus{background-position:-16px -128px}.ui-icon-plusthick{background-position:-32px -128px}.ui-icon-minus{background-position:-48px -128px}.ui-icon-minusthick{background-position:-64px -128px}.ui-icon-close{background-position:-80px -128px}.ui-icon-closethick{background-position:-96px -128px}.ui-icon-key{background-position:-112px -128px}.ui-icon-lightbulb{background-position:-128px -128px}.ui-icon-scissors{background-position:-144px -128px}.ui-icon-clipboard{background-position:-160px -128px}.ui-icon-copy{background-position:-176px -128px}.ui-icon-contact{background-position:-192px -128px}.ui-icon-image{background-position:-208px -128px}.ui-icon-video{background-position:-224px -128px}.ui-icon-script{background-position:-240px -128px}.ui-icon-alert{background-position:0 -144px}.ui-icon-info{background-position:-16px -144px}.ui-icon-notice{background-position:-32px -144px}.ui-icon-help{background-position:-48px -144px}.ui-icon-check{background-position:-64px -144px}.ui-icon-bullet{background-position:-80px -144px}.ui-icon-radio-on{background-position:-96px -144px}.ui-icon-radio-off{background-position:-112px -144px}.ui-icon-pin-w{background-position:-128px -144px}.ui-icon-pin-s{background-position:-144px -144px}.ui-icon-play{background-position:0 -160px}.ui-icon-pause{background-position:-16px -160px}.ui-icon-seek-next{background-position:-32px -160px}.ui-icon-seek-prev{background-position:-48px -160px}.ui-icon-seek-end{background-position:-64px -160px}.ui-icon-seek-start{background-position:-80px -160px}.ui-icon-seek-first{background-position:-80px -160px}.ui-icon-stop{background-position:-96px -160px}.ui-icon-eject{background-position:-112px -160px}.ui-icon-volume-off{background-position:-128px -160px}.ui-icon-volume-on{background-position:-144px -160px}.ui-icon-power{background-position:0 -176px}.ui-icon-signal-diag{background-position:-16px -176px}.ui-icon-signal{background-position:-32px -176px}.ui-icon-battery-0{background-position:-48px -176px}.ui-icon-battery-1{background-position:-64px -176px}.ui-icon-battery-2{background-position:-80px -176px}.ui-icon-battery-3{background-position:-96px -176px}.ui-icon-circle-plus{background-position:0 -192px}.ui-icon-circle-minus{background-position:-16px -192px}.ui-icon-circle-close{background-position:-32px -192px}.ui-icon-circle-triangle-e{background-position:-48px -192px}.ui-icon-circle-triangle-s{background-position:-64px -192px}.ui-icon-circle-triangle-w{background-position:-80px -192px}.ui-icon-circle-triangle-n{background-position:-96px -192px}.ui-icon-circle-arrow-e{background-position:-112px -192px}.ui-icon-circle-arrow-s{background-position:-128px -192px}.ui-icon-circle-arrow-w{background-position:-144px -192px}.ui-icon-circle-arrow-n{background-position:-160px -192px}.ui-icon-circle-zoomin{background-position:-176px -192px}.ui-icon-circle-zoomout{background-position:-192px -192px}.ui-icon-circle-check{background-position:-208px -192px}.ui-icon-circlesmall-plus{background-position:0 -208px}.ui-icon-circlesmall-minus{background-position:-16px -208px}.ui-icon-circlesmall-close{background-position:-32px -208px}.ui-icon-squaresmall-plus{background-position:-48px -208px}.ui-icon-squaresmall-minus{background-position:-64px -208px}.ui-icon-squaresmall-close{background-position:-80px -208px}.ui-icon-grip-dotted-vertical{background-position:0 -224px}.ui-icon-grip-dotted-horizontal{background-position:-16px -224px}.ui-icon-grip-solid-vertical{background-position:-32px -224px}.ui-icon-grip-solid-horizontal{background-position:-48px -224px}.ui-icon-gripsmall-diagonal-se{background-position:-64px -224px}.ui-icon-grip-diagonal-se{background-position:-80px -224px}.ui-corner-all,.ui-corner-top,.ui-corner-left,.ui-corner-tl{border-top-left-radius:3px}.ui-corner-all,.ui-corner-top,.ui-corner-right,.ui-corner-tr{border-top-right-radius:3px}.ui-corner-all,.ui-corner-bottom,.ui-corner-left,.ui-corner-bl{border-bottom-left-radius:3px}.ui-corner-all,.ui-corner-bottom,.ui-corner-right,.ui-corner-br{border-bottom-right-radius:3px}.ui-widget-overlay{background:#aaa;opacity:.3;filter:Alpha(Opacity=30)}.ui-widget-shadow{-webkit-box-shadow:0 0 5px #666;box-shadow:0 0 5px #666}</style>\n    \n    <!-- Bootstrap CSS -->\n    <!-- Bootstrap CSS -->\n<link rel=\"stylesheet\" href=\"https://cdnjs.cloudflare.com/ajax/libs/bootstrap/4.5.3/css/bootstrap.min.css\" \n      integrity=\"sha512-oc9+XSs1H243/FRN9Rw62Fn8EtxjEYWHXRvjS43YtueEewbS6ObfXcJNyohjHqVKFPoXXUxwc+q1K7Dee6vv9g==\" \n      crossorigin=\"anonymous\" \n      referrerpolicy=\"no-referrer\" />\n\n<!-- \nTODO: During content migration, verify bootstrap version and integrity hash\nExtract any additional Bootstrap-related configurations or customizations\n-->\n    \n    <!-- Custom CSS styles -->\n    <!-- Inline main.css file content -->\n<style>\nhtml{\n    width:100%;\n    min-width: 775px;\n    height:100%;\n    overflow: hidden;\n    padding:0;\n    margin:0;\n    background: black;\n    /*min-width: 1025px;*/\n}\n\nbody{\n    width:100%;\n    min-width: 775px;\n    height:100%;\n    padding:0;\n    margin:0;\n    overflow: hidden;\n    /* Black background */\n    background: black;\n    /*min-width: 1025px;*/\n    /*-webkit-touch-callout: none; !* iOS Safari *!*/\n    /*-webkit-user-select: none;   !* Chrome/Safari/Opera *!*/\n    /*-khtml-user-select: none;    !* Konqueror *!*/\n    /*-moz-user-select: none;      !* Firefox *!*/\n    /*-ms-user-select: none;       !* Internet Explorer/Edge *!*/\n    /*user-select: none;           !* Non-prefixed version, currently*/\n                                 /*not supported by any browser *!*/\n}\n\np{\n    margin: 15px 0 15px 0;\n}\n\n#basicUI{\n    position: absolute;\n    top: 53px;\n    font-size: 14px;\n    color: #34495e;\n    text-align: right;\n    right: 0px;\n    width: 400px;\n    padding: 20px 20px;\n}\n#showAdvancedOptions{\n    color: #ffffff;\n    font-weight: 900;\n}\n#hideAdvancedOptions{\n    font-size: 14px;\n    color: #34495e;\n    font-weight: 900;\n    text-align: right;\n    width: 100%;\n    display: inline-block;\n}\n\n#controlsBottom{\n    width:100%;\n    /* min-width: 775px; */\n    max-width: 850px;\n    margin: auto;\n    position: absolute;\n    bottom: 0;\n    right: 0;\n    left: 0;\n    height:110px;\n    font-weight: 900;\n}\n#controlsBottom&gt;div{\n    display: inline-block;\n}\n#bottomSliderContainer{\n    text-align: center;\n    position: absolute;\n    right:auto;\n    left:auto;\n        margin-top: 20px;\n}\n#bottomSliderContainer&gt;span{\n    font-size: 14px;\n}\n#creasePercentBottom{\n    width: 100%;\n    margin-top: 14px;\n    margin-bottom: 5px;\n}\n#creasePercentBottom&gt;.flat-slider{\n    width: 100%;\n    margin: 0;\n    background: #e8e8e8;\n}\n.sliderEndPt{\n    text-align: center;\n    width: 100px;\n    position: absolute;\n    top: -30px;\n    color: #34495e;\n    line-height: 18px;\n}\n#flatIndicator{\n    left: -50px;\n        top: -15px;\n}\n.sliderEndPt&gt;img{\n    width:100%;\n}\n#foldedIndicator{\n    right: -50px;\n        top: -15px;\n}\n.sliderEndPt&gt;.fui-triangle-down{\n    display: block;\n    color: #34495e;\n    margin-top: 0px;\n}\n.sliderEndPtLabel{\n    color: #34495e;\n    display: block;\n    /*margin-top: 30px;*/\n}\n\n#viewToggle{\n    display: none !important;\n    left: 30px;\n}\n#controlsToggle{\n    display: none !important;\n    right: 140px;\n}\n.preserveAspect{\n    width: auto;\n}\n.bigToggle{\n    height:90px;\n    width:140px;\n    text-align: center;\n    position: absolute;\n    font-size:14px;\n    /*border: 1px solid #34495e;*/\n}\n.bigToggle&gt;div{\n    border: 2px solid #34495e;\n    background: white;\n    height:70px;\n    overflow: hidden;\n    border-radius: 10px;\n    margin-bottom: 5px;\n}\n.bigToggle&gt;div div{\n    padding: 5px;\n    width:50%;\n    height: 100%;\n    display: inline-block;\n    text-align: center;\n    font-size: 12px;\n    color: #34495e;\n}\n.bigToggle div.active{\n    background: #e8e8e8;\n}\n.bigToggle .separator{\n        width: 2px;\n    height: 68px;\n    position: absolute;\n    background: #34495e;\n    padding: 0;\n    margin: 0;\n}\n.bigToggle img{\n    display: inline-block;\n    height:40px;\n}\n.bigToggle span{\n    display: block;\n    width:100%;\n}\n\n#resetBottom{\n    display: none !important;\n    position: absolute;\n    right:30px;\n    top: 13px;\n    color: #34495e;\n    font-weight: 900;\n}\n\n\n#controls{\n    position: absolute;\n    top:53px;\n    bottom: 0;\n    right:-430px;\n    width:430px;\n    padding:20px 20px;\n    overflow: auto;\n    background:rgba(10,10,10,0.1);\n}\n#controls&gt;a{\n    /*float:right;*/\n}\n#controlsLeft{\n    position: absolute;\n    bottom:0;\n    left:-420px;\n    width: 420px;\n    top:53px;\n    padding:20px 20px;\n    max-height: 100%;\n    overflow: auto;\n}\n#controlsLeft .radio{\n    width: 240px;\n}\n\n.sliderInput{\n    float:right;\n    display: inline-block;\n    margin-bottom:15px;\n    min-width: 100px;\n}\n.sliderContainer{\n    display: block;\n    margin-bottom:15px;\n}\n\n.indent{\n    padding-left:20px;\n}\n.doubleIndent{\n    padding-left:40px;\n}\n\n#gpuMathCanvas{\n    display: none;\n}\n\na, a:hover, a:visited, a:focus{\n    color:#ec008b;\n}\n\na.btn:visited, a.btn:focus{\n    color: white;\n}\n\nbutton{\n    border: 0;\n    outline: none;\n}\n\n.editable{\n    color:#34495e;\n    height: 42px;\n    display: inline-block;\n    line-height: 42px;\n    width: 70px;\n    text-overflow: ellipsis;\n    overflow: hidden;\n    white-space:nowrap\n}\n.editable:hover{\n    color:#34495e;\n    cursor: text;\n}\n.editableInput{\n    display: none;\n    outline: grey;\n    padding: 5px 7px;\n    height: 42px;\n    line-height: 42px;\n}\n.editableInput:focus {\n    outline: grey;\n    border:none;\n}\n\ninput.form-control {\n    width: 90px;\n    display: inline-block;\n}\n\n.radioSlider{\n    display: inline-block;\n    float:right;\n}\n\n.form-control, .select2-search input[type=text] {\n    height: 35px;\n}\n\n.floatRight{\n    float:right;\n}\n\n#threeContainer {\n    width:100%;\n    height:100%;\n    padding:0;\n    position: absolute;\n    top: 0px;\n    left: 0px;\n}\n\n/* Ensure Three.js canvas is transparent */\n#threeContainer canvas,\ncanvas {\n    background: transparent !important;\n    background-color: transparent !important;\n}\n\n/* Force transparency for all WebGL canvases */\ncanvas[data-engine=&#34;three.js&#34;] {\n    background: none !important;\n    opacity: 1;\n}\n\n\n\n.slider.slider-horizontal {\n    width: 200px;\n    margin: 0;\n    padding: 20px;\n    top: 10px;\n}\n\n.slider.slider-vertical {\n    height: 200px;\n    margin: 0;\n    padding: 20px;\n}\n\n.flat-slider.ui-corner-all,\n.flat-slider .ui-corner-all {\n  border-radius: 0;\n}\n\n.flat-slider.ui-slider {\n  border: 0;\n  background: #ffffff;\n  border-radius: 7px;\n}\n\n.flat-slider.ui-slider-horizontal {\n  height: 6px;\n}\n\n.flat-slider.ui-slider-vertical {\n  width: 6px;\n}\n\n.flat-slider .ui-slider-handle {\n  width: 20px;\n  height: 20px;\n  background: #666;\n  border-radius: 50%;\n  border: none;\n  cursor: pointer;\n}\n\n.flat-slider.ui-slider-horizontal .ui-slider-handle {\n  top: 50%;\n  margin-top: -10px;\n    opacity: 0.8;\n}\n\n.flat-slider.ui-slider-vertical .ui-slider-handle {\n  left: 50%;\n  margin-left: -10px;\n    opacity: 0.8;\n}\n\n.flat-slider .ui-slider-handle:hover {\n  opacity: 0.7;\n}\n\n.flat-slider .ui-slider-handle:focus { outline: none; }\n\n\n.flat-slider{\n    vertical-align: middle;\n    display: inline-block;\n    width: 130px;\n    position: relative;\n    margin: 10px 10px 10px 10px;\n    /*padding: 4px 0;*/\n}\n\n.modal-content{\n    border-radius: 0;\n}\n.modal-body{\n    padding: 20px 35px;\n}\n\nspan.modal-close{\n    display: none;\n}\n.titleSpan{\n    display: inline-block;\n    width:100%;\n    margin-top:15px;\n}\n.form-control:focus{\n    border-color: #666;\n}\n\n.checkbox input.custom-checkbox[type=&#34;checkbox&#34;]:checked + .icons .icon-checked, .radio input.custom-checkbox[type=&#34;checkbox&#34;]:checked + .icons .icon-checked, .checkbox input.custom-radio[type=&#34;radio&#34;]:checked + .icons .icon-checked, .radio input.custom-radio[type=&#34;radio&#34;]:checked + .icons .icon-checked {\n    color: #666;\n}\n.checkbox .icon-checked, .radio .icon-checked, .checkbox .icon-unchecked, .radio .icon-unchecked {\n    color: #bdc3c7;\n}\n\n.radio .icon-checked{\n    transition-duration: 0s;\n}\n\n.radio .icon-unchecked{\n    transition-duration: 0s;\n}\n\n.sliderInput&gt;.flat-slider{\n   width: 90px;\n}\n\n.label-slider{\n    font-size: 15px;\n}\n\n.extraSpace{\n    display: inline-block;\n    width:100%;\n    height:15px;\n}\n\n.flipped\n{\n    direction: rtl;\n}\n.flipped&gt;div\n{\n    direction: ltr;\n}\n\n.paddingBottom{\n    margin-bottom: 20px;\n}\n\n#svgViewer{\n    width: 100%;\n    height: 100%;\n    position: absolute;\n    z-index: 3;\n    top:0px;\n    right:0;\n    background: white;\n    display: none;\n    padding-top: 56px;\n}\nsvg{\n    width: 100%;\n    height: 100%;\n}\n\n.hexVal{\n    border-width:4px;\n}\n\n#warningMessage{\n    padding: 30px 0;\n    text-align: center;\n    margin: 0 18px;\n}\n\n.about{\n    margin-right: 10px;\n    color: #34495e!important;\n    font-size: 18px;\n    line-height: 18px;\n}\n#controls .about, #basicUI .about{\n    position: absolute;\n    line-height: 1.7;\n    margin-top: 2px;\n    right:5px;\n}\n\n#aboutError{\n    line-height: 2.0\n}\n#aboutStiffness{\n    line-height: 28px;\n}\n\n#aboutUserInteraction{\n    margin-top: 10px!important;\n    line-height: 21px!important;\n}\n\n#aboutVR{\n        float: none;\n    margin-left: 40px;\n    position: absolute;\n    line-height: 1.7;\n    margin-top: 2px;\n}\n\n#start, #stepForwardOptions{\n    display: none;\n}\n#stepForwardOptions{\n    width: 100%;\n}\n#reset{\n    margin-left: 20px;\n}\n\n\n#creasePercentNav{\n    margin-bottom: 0;\n    margin-top:12px;\n    color: white;\n    display: none;\n}\n\n.bigLabel{\n    font-size:16px;\n    margin-top: 20px;\n}\n.checkbox.bigLabel .icons, .radio .icons {\n    top: 2px;\n}\n\n.smallTxt{\n    font-size: 14px;\n}\ninput.form-control.bigInput{\n    width:300px;\n}\n\n.actionButton{\n    min-width: 110px;\n    font-size: 16px;\n}\n\n#unitsDropdown{\n    height: 100px;\n    overflow: auto;\n}\n\n.modal img{\n    width: 200px;\n}\n\na.seeMore{\n    float:none!important;\n    color: #34495e;\n}\na.seeMore&gt;.fui-triangle-down{\n    display: inline-block;\n    margin-right:10px;\n}\na.seeMore.closed&gt;.fui-triangle-down{\n    -ms-transform: rotate(-90deg); /* IE 9 */\n    -webkit-transform: rotate(-90deg); /* Chrome, Safari, Opera */\n    transform: rotate(-90deg);\n}\n\n.hide{\n    display: none;\n}\n\n.inlineBlock{\n    display: inline-block;\n}\n\n.alignRight{\n    text-align: right;\n}\n\n.fullWidth{\n    width: 100%;\n}\n\n#simulationSettings, #errorInfo,  #animationsSettings, #cameraAngle, #edgeVisibility, #virtualReality, #materialSettings{\n    margin-top: 15px;\n}\n.modal-body img{\n    margin-left: auto;\n    margin-right: auto;\n        display: block;\n}\n\n.colorSwatch{\n    display: inline-block;\n    width: 20px;\n    height: 10px;\n    margin-right: 10px;\n    margin-bottom: 2px;\n}\n\n#authorMoreInfo{\n    display: none;\n    position: absolute;\n    top:0px;\n    left:100px;\n    z-index: 5;\n}\n#authorMoreInfo&gt;#authorContent{\n    font-size: 14px;\n    background: #f5f5f5;\n    padding: 15px 25px;\n    margin-left: 20px;\n    color:#34495e;\n    white-space: normal;\n    width: 300px;\n    border: 2px solid #a8a6ae;\n}\n\n#authorMoreInfo a, #authorMoreInfo a:hover,#authorMoreInfo a:visited,#authorMoreInfo a:focus{\n    color: #ec008b !important;\n}\n\n#authorMoreInfo:after {\n    content: &#39;&#39;;\n    display: block;\n    position: absolute;\n    top: 19px;\n    left:11px;\n    width: 20px;\n    height: 20px;\n    background: #f5f5f5;\n    border-left:2px solid #a8a6ae;\n    border-bottom:2px solid #a8a6ae;\n    -ms-transform: rotate(45deg); /* IE 9 */\n     -moz-transform:rotate(45deg);\n      -webkit-transform:rotate(45deg);\n    transform: rotate(45deg);\n}\n\n#helper{\n    display: none;\n    position: absolute;\n    padding: 10px 15px;\n    font-size: 14px;\n    background: #f5f5f5;\n    margin-top: 20px;\n    opacity:0;\n    top: 54px;\n    -webkit-transition: opacity 1s; /* For Safari 3.1 to 6.0 */\n    transition: opacity 1s;\n    left: 140px;\n    color:#34495e;\n    white-space: normal;\n    border: 2px solid #a8a6ae;\n    /*transition-timing-function: easeInOutCubic;*/\n}\n\n#helper:after {\n    content: &#39;&#39;;\n    display: block;\n    position: absolute;\n    top: -12px;\n    left:105px;\n    width: 20px;\n    height: 20px;\n    background: #f5f5f5;\n    border-left:2px solid #a8a6ae;\n    border-top:2px solid #a8a6ae;\n    -ms-transform: rotate(45deg); /* IE 9 */\n     -moz-transform:rotate(45deg);\n      -webkit-transform:rotate(45deg);\n    transform: rotate(45deg);\n}\n\n#screenCaptureModal .modal-content, #animationSetupModal .modal-content{\n    background: rgba(255,255,255,0.9);\n}\n\n#recordStatus{\n    position: absolute;\n    bottom:20px;\n    width:350px;\n    left: 0;\n    right: 0;\n    margin: 0 auto;\n    z-index: 2;\n    display: none;\n}\n#stopRecord{\n    display: block;\n    margin-left: auto;\n    margin-right: auto;\n}\n\n.animationStep{\n    margin: 7px 0;\n    display: inline-block;\n    padding: 5px 15px;\n    background: #fff;\n}\n#animationSetupModal p, #animationSetupModal ul, #animationSetupModal div.btns{\n    text-align: center;\n    padding: 0;\n}\n.warning{\n    color: #f1970f;\n}\n\n.red{\n    color:red!important;\n}\n\n#coverImg{\n    z-index: 5;\n    position: absolute;\n    top: 0;\n    left: 0;\n    width: 100%;\n    height: 100%;\n}\n\nobject{\n    width:100%;\n    margin-bottom: 10px;\n}\n\n#aboutCorner{\n    display: none;\n    position: absolute;\n    z-index: 6;\n    top:0;\n    right:0;\n    background: rgba(40, 40, 40, 0.7);\n    width: 30px;\n    text-align: center;\n    color: white;\n}\n\n#noSupportModal{\n    text-align: center;\n}\n\n#tipImportSVG{\n    float: left;\n    display: inline-block;\n    margin-top: 8px;\n    margin-left: 20px;\n}\n\n#feedbackNotification {\n\tposition: absolute;\n    z-index: 10;\n    right: 130px;\n    top: 0;\n    padding: 5px 10px 4px;\n    font-size: 15px;\n    font-weight: 900;\n    background: #ff64bf;\n\tdisplay: none;\n\tflex-direction: row;\n\talign-items: center;\n}\n\n#feedbackNotification&gt;span {\n\tmax-width: 150px;\n    text-align: center;\n    display: inline-block;\n\tline-height: 22px;\n}\n\n@media only screen and (max-width: 1055px) {\n\t#feedbackNotification {\n\t  display: none;\n\t}\n}\n\n@media only screen and (max-width: 890px) {\n\t#feedback {\n\t  display: none;\n\t}\n}\n\n/* Bottom button styles */\n#bottomButtonContainer {\n    display: flex;\n    gap: 20px;\n    margin-left: 40px;\n    align-items: center;\n}\n\n#dlButton, #printButton {\n    color: #b0b0b0;\n    text-decoration: bold;\n    width: 5em;\n    text-align: center;\n    font-size: 9px;\n    font-weight: 500;\n    cursor: pointer;\n    transition: opacity 0.2s ease;\n    border: none;\n    background: none;\n    padding: 4px 8px;\n    margin: 0;\n    white-space: nowrap;\n}\n\n#dlButton:hover, #printButton:hover {\n    opacity: 0.7;\n    text-decoration: none !important;\n}\n\n#dlButton:focus, #printButton:focus {\n    outline: none;\n    text-decoration: none !important;\n}\n\n/* Custom CSS Styles */\n\n/* Styles for non-edit mode */\n.edit-mode-disabled #globalNav {\n    display: none !important;\n}\n\n.edit-mode-disabled body {\n    padding-top: 0 !important; /* Remove top padding when nav is hidden */\n}\n\n.edit-mode-disabled .main-content {\n    margin-top: 0 !important; /* Adjust main content position */\n}\n</style>\n    \n    <!-- Animation styles -->\n    <style>\n/* Animation Styles and Keyframes */\n\n/* Loading screen styles */\n#loadingScreen {\n    position: fixed;\n    top: 0;\n    left: 0;\n    width: 100%;\n    height: 100%;\n    background-color: #000000;\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    z-index: 9999;\n    font-family: 'Lato', 'Helvetica', Arial, sans-serif;\n}\n\n#loadingText {\n    color: #ffffff;\n    font-size: 16px;\n    font-weight: 300;\n    letter-spacing: 2px;\n}\n\n.loading-dots {\n    display: inline-block;\n    width: 60px;\n    text-align: left;\n}\n\n.loading-dots::after {\n    content: '';\n    animation: loadingDots 1.5s infinite;\n}\n\n/* Loading animation keyframes */\n@keyframes loadingDots {\n    0% {\n        content: '';\n    }\n    25% {\n        content: '.';\n    }\n    50% {\n        content: '..';\n    }\n    75% {\n        content: '...';\n    }\n    100% {\n        content: '';\n    }\n}\n\n/* Hide loading screen when ready */\n.loading-hidden #loadingScreen {\n    opacity: 0;\n    pointer-events: none;\n    transition: opacity 0.5s ease-out;\n}\n\n/* Smooth fade out animation */\n.fade-out-loading #loadingScreen {\n    animation: fadeOutLoading 0.8s ease-out forwards;\n}\n\n@keyframes fadeOutLoading {\n    0% {\n        opacity: 1;\n        visibility: visible;\n    }\n    100% {\n        opacity: 0;\n        visibility: hidden;\n    }\n}\n</style>\n    \n    <!-- \n    TODO: During content migration, extract:\n    - Meta tags from original template\n    - Link tags for external stylesheets\n    - Any additional head elements\n    -->\n    \n    <!-- NFT Data and Configuration Script -->\n    <!-- This will contain the main data object and initialization -->\n    <script>\n        // Global variables for NFT rendering\n        window.nftRenderComplete = false;\n        \n        // NFT data will be injected here during generation\n        // ___NFT_DATA_PLACEHOLDER___ will be replaced with actual data\n        const nftData = ___NFT_DATA_PLACEHOLDER___;\n        \n        // Edit mode configuration\n        const editMode = false;\n        window.editMode = editMode;\n        \n        // TODO: Extract origami patterns data from original template\n        // This will include the origamiPatterns array with SVG content\n        const origamiPatterns = [\n            // Pattern definitions will be migrated here\n        ];\n    </script>\n</head>"
    },
    {
      "section": "bootstrap",
      "original": [],
      "new": [
        "Bootstrap CSS",
        "Bootstrap CSS",
        "bootstrap/4.5.3/css",
        "bootstrap.min.css"
      ]
    },
    {
      "section": "nftData",
      "original": {
        "pattern_0": [
          "const nftData = JSON.parse(`___NFT_DATA_PLACEHOLDER___`);"
        ],
        "pattern_1": [
          "window.nftData = nftData;",
          "window.nftData = null;"
        ],
        "pattern_2": [
          "___NFT_DATA_PLACEHOLDER___"
        ]
      },
      "new": {
        "pattern_0": [
          "const nftData = ___NFT_DATA_PLACEHOLDER___;"
        ],
        "pattern_1": [
          "window.nftData = window.nftData;",
          "window.nftData = nftData;",
          "window.nftData = null;"
        ],
        "pattern_2": [
          "___NFT_DATA_PLACEHOLDER___",
          "___NFT_DATA_PLACEHOLDER___"
        ]
      }
    },
    {
      "section": "scripts",
      "original": {
        "external": [
          "https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.0/jquery.min.js",
          "https://cdnjs.cloudflare.com/ajax/libs/flat-ui/2.3.0/js/flat-ui.min.js"
        ],
        "inline": 47,
        "total": 49
      },
      "new": {
        "external": [],
        "inline": 51,
        "total": 51
      }
    },
    {
      "section": "threejsDependencies",
      "original": {
        "pattern_0": 0,
        "pattern_1": 0,
        "pattern_2": 0,
        "pattern_3": 1,
        "pattern_4": 303
      },
      "new": {
        "pattern_0": 0,
        "pattern_1": 0,
        "pattern_2": 0,
        "pattern_3": 1,
        "pattern_4": 317
      }
    },
    {
      "section": "shaders",
      "original": {
        "pattern_0": 33,
        "pattern_1": 35,
        "pattern_2": 17,
        "pattern_3": 472
      },
      "new": {
        "pattern_0": 45,
        "pattern_1": 58,
        "pattern_2": 17,
        "pattern_3": 475
      }
    },
    {
      "section": "animations",
      "original": {
        "pattern_0": 3,
        "pattern_1": 8,
        "pattern_2": 52,
        "pattern_3": 5
      },
      "new": {
        "pattern_0": 3,
        "pattern_1": 8,
        "pattern_2": 8,
        "pattern_3": 2
      }
    }
  ],
  "success": false
}